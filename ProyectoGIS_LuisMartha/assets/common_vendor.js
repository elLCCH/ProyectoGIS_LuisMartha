(window.webpackJsonp = window.webpackJsonp || []).push([[20], [function (e, t, n) { var r; (function () { var n = this, i = n._, o = Array.prototype, a = Object.prototype, s = Function.prototype, l = o.push, u = o.slice, c = a.toString, d = a.hasOwnProperty, f = Array.isArray, h = Object.keys, p = s.bind, m = Object.create, g = function () { }, v = function (e) { return e instanceof v ? e : this instanceof v ? void (this._wrapped = e) : new v(e) }; void 0 !== e && e.exports && (t = e.exports = v), t._ = v, v.VERSION = "1.8.3"; var y = function (e, t, n) { if (void 0 === t) return e; switch (null == n ? 3 : n) { case 1: return function (n) { return e.call(t, n) }; case 2: return function (n, r) { return e.call(t, n, r) }; case 3: return function (n, r, i) { return e.call(t, n, r, i) }; case 4: return function (n, r, i, o) { return e.call(t, n, r, i, o) } }return function () { return e.apply(t, arguments) } }, _ = function (e, t, n) { return null == e ? v.identity : v.isFunction(e) ? y(e, t, n) : v.isObject(e) ? v.matcher(e) : v.property(e) }; v.iteratee = function (e, t) { return _(e, t, 1 / 0) }; var b = function (e, t) { return function (n) { var r = arguments.length; if (r < 2 || null == n) return n; for (var i = 1; i < r; i++)for (var o = arguments[i], a = e(o), s = a.length, l = 0; l < s; l++) { var u = a[l]; t && void 0 !== n[u] || (n[u] = o[u]) } return n } }, w = function (e) { if (!v.isObject(e)) return {}; if (m) return m(e); g.prototype = e; var t = new g; return g.prototype = null, t }, x = function (e) { return function (t) { return null == t ? void 0 : t[e] } }, C = Math.pow(2, 53) - 1, S = x("length"), k = function (e) { var t = S(e); return "number" == typeof t && t >= 0 && t <= C }; function createReduce(e) { return function (t, n, r, i) { n = y(n, i, 4); var o = !k(t) && v.keys(t), a = (o || t).length, s = e > 0 ? 0 : a - 1; return arguments.length < 3 && (r = t[o ? o[s] : s], s += e), function iterator(t, n, r, i, o, a) { for (; o >= 0 && o < a; o += e) { var s = i ? i[o] : o; r = n(r, t[s], s, t) } return r }(t, n, r, o, s, a) } } v.each = v.forEach = function (e, t, n) { var r, i; if (t = y(t, n), k(e)) for (r = 0, i = e.length; r < i; r++)t(e[r], r, e); else { var o = v.keys(e); for (r = 0, i = o.length; r < i; r++)t(e[o[r]], o[r], e) } return e }, v.map = v.collect = function (e, t, n) { t = _(t, n); for (var r = !k(e) && v.keys(e), i = (r || e).length, o = Array(i), a = 0; a < i; a++) { var s = r ? r[a] : a; o[a] = t(e[s], s, e) } return o }, v.reduce = v.foldl = v.inject = createReduce(1), v.reduceRight = v.foldr = createReduce(-1), v.find = v.detect = function (e, t, n) { var r; if (void 0 !== (r = k(e) ? v.findIndex(e, t, n) : v.findKey(e, t, n)) && -1 !== r) return e[r] }, v.filter = v.select = function (e, t, n) { var r = []; return t = _(t, n), v.each(e, function (e, n, i) { t(e, n, i) && r.push(e) }), r }, v.reject = function (e, t, n) { return v.filter(e, v.negate(_(t)), n) }, v.every = v.all = function (e, t, n) { t = _(t, n); for (var r = !k(e) && v.keys(e), i = (r || e).length, o = 0; o < i; o++) { var a = r ? r[o] : o; if (!t(e[a], a, e)) return !1 } return !0 }, v.some = v.any = function (e, t, n) { t = _(t, n); for (var r = !k(e) && v.keys(e), i = (r || e).length, o = 0; o < i; o++) { var a = r ? r[o] : o; if (t(e[a], a, e)) return !0 } return !1 }, v.contains = v.includes = v.include = function (e, t, n, r) { return k(e) || (e = v.values(e)), ("number" != typeof n || r) && (n = 0), v.indexOf(e, t, n) >= 0 }, v.invoke = function (e, t) { var n = u.call(arguments, 2), r = v.isFunction(t); return v.map(e, function (e) { var i = r ? t : e[t]; return null == i ? i : i.apply(e, n) }) }, v.pluck = function (e, t) { return v.map(e, v.property(t)) }, v.where = function (e, t) { return v.filter(e, v.matcher(t)) }, v.findWhere = function (e, t) { return v.find(e, v.matcher(t)) }, v.max = function (e, t, n) { var r, i, o = -1 / 0, a = -1 / 0; if (null == t && null != e) for (var s = 0, l = (e = k(e) ? e : v.values(e)).length; s < l; s++)(r = e[s]) > o && (o = r); else t = _(t, n), v.each(e, function (e, n, r) { ((i = t(e, n, r)) > a || i === -1 / 0 && o === -1 / 0) && (o = e, a = i) }); return o }, v.min = function (e, t, n) { var r, i, o = 1 / 0, a = 1 / 0; if (null == t && null != e) for (var s = 0, l = (e = k(e) ? e : v.values(e)).length; s < l; s++)(r = e[s]) < o && (o = r); else t = _(t, n), v.each(e, function (e, n, r) { ((i = t(e, n, r)) < a || i === 1 / 0 && o === 1 / 0) && (o = e, a = i) }); return o }, v.shuffle = function (e) { for (var t, n = k(e) ? e : v.values(e), r = n.length, i = Array(r), o = 0; o < r; o++)(t = v.random(0, o)) !== o && (i[o] = i[t]), i[t] = n[o]; return i }, v.sample = function (e, t, n) { return null == t || n ? (k(e) || (e = v.values(e)), e[v.random(e.length - 1)]) : v.shuffle(e).slice(0, Math.max(0, t)) }, v.sortBy = function (e, t, n) { return t = _(t, n), v.pluck(v.map(e, function (e, n, r) { return { value: e, index: n, criteria: t(e, n, r) } }).sort(function (e, t) { var n = e.criteria, r = t.criteria; if (n !== r) { if (n > r || void 0 === n) return 1; if (n < r || void 0 === r) return -1 } return e.index - t.index }), "value") }; var T = function (e) { return function (t, n, r) { var i = {}; return n = _(n, r), v.each(t, function (r, o) { var a = n(r, o, t); e(i, r, a) }), i } }; v.groupBy = T(function (e, t, n) { v.has(e, n) ? e[n].push(t) : e[n] = [t] }), v.indexBy = T(function (e, t, n) { e[n] = t }), v.countBy = T(function (e, t, n) { v.has(e, n) ? e[n]++ : e[n] = 1 }), v.toArray = function (e) { return e ? v.isArray(e) ? u.call(e) : k(e) ? v.map(e, v.identity) : v.values(e) : [] }, v.size = function (e) { return null == e ? 0 : k(e) ? e.length : v.keys(e).length }, v.partition = function (e, t, n) { t = _(t, n); var r = [], i = []; return v.each(e, function (e, n, o) { (t(e, n, o) ? r : i).push(e) }), [r, i] }, v.first = v.head = v.take = function (e, t, n) { if (null != e) return null == t || n ? e[0] : v.initial(e, e.length - t) }, v.initial = function (e, t, n) { return u.call(e, 0, Math.max(0, e.length - (null == t || n ? 1 : t))) }, v.last = function (e, t, n) { if (null != e) return null == t || n ? e[e.length - 1] : v.rest(e, Math.max(0, e.length - t)) }, v.rest = v.tail = v.drop = function (e, t, n) { return u.call(e, null == t || n ? 1 : t) }, v.compact = function (e) { return v.filter(e, v.identity) }; var L = function (e, t, n, r) { for (var i = [], o = 0, a = r || 0, s = S(e); a < s; a++) { var l = e[a]; if (k(l) && (v.isArray(l) || v.isArguments(l))) { t || (l = L(l, t, n)); var u = 0, c = l.length; for (i.length += c; u < c;)i[o++] = l[u++] } else n || (i[o++] = l) } return i }; function createPredicateIndexFinder(e) { return function (t, n, r) { n = _(n, r); for (var i = S(t), o = e > 0 ? 0 : i - 1; o >= 0 && o < i; o += e)if (n(t[o], o, t)) return o; return -1 } } function createIndexFinder(e, t, n) { return function (r, i, o) { var a = 0, s = S(r); if ("number" == typeof o) e > 0 ? a = o >= 0 ? o : Math.max(o + s, a) : s = o >= 0 ? Math.min(o + 1, s) : o + s + 1; else if (n && o && s) return r[o = n(r, i)] === i ? o : -1; if (i != i) return (o = t(u.call(r, a, s), v.isNaN)) >= 0 ? o + a : -1; for (o = e > 0 ? a : s - 1; o >= 0 && o < s; o += e)if (r[o] === i) return o; return -1 } } v.flatten = function (e, t) { return L(e, t, !1) }, v.without = function (e) { return v.difference(e, u.call(arguments, 1)) }, v.uniq = v.unique = function (e, t, n, r) { v.isBoolean(t) || (r = n, n = t, t = !1), null != n && (n = _(n, r)); for (var i = [], o = [], a = 0, s = S(e); a < s; a++) { var l = e[a], u = n ? n(l, a, e) : l; t ? (a && o === u || i.push(l), o = u) : n ? v.contains(o, u) || (o.push(u), i.push(l)) : v.contains(i, l) || i.push(l) } return i }, v.union = function () { return v.uniq(L(arguments, !0, !0)) }, v.intersection = function (e) { for (var t = [], n = arguments.length, r = 0, i = S(e); r < i; r++) { var o = e[r]; if (!v.contains(t, o)) { for (var a = 1; a < n && v.contains(arguments[a], o); a++); a === n && t.push(o) } } return t }, v.difference = function (e) { var t = L(arguments, !0, !0, 1); return v.filter(e, function (e) { return !v.contains(t, e) }) }, v.zip = function () { return v.unzip(arguments) }, v.unzip = function (e) { for (var t = e && v.max(e, S).length || 0, n = Array(t), r = 0; r < t; r++)n[r] = v.pluck(e, r); return n }, v.object = function (e, t) { for (var n = {}, r = 0, i = S(e); r < i; r++)t ? n[e[r]] = t[r] : n[e[r][0]] = e[r][1]; return n }, v.findIndex = createPredicateIndexFinder(1), v.findLastIndex = createPredicateIndexFinder(-1), v.sortedIndex = function (e, t, n, r) { for (var i = (n = _(n, r, 1))(t), o = 0, a = S(e); o < a;) { var s = Math.floor((o + a) / 2); n(e[s]) < i ? o = s + 1 : a = s } return o }, v.indexOf = createIndexFinder(1, v.findIndex, v.sortedIndex), v.lastIndexOf = createIndexFinder(-1, v.findLastIndex), v.range = function (e, t, n) { null == t && (t = e || 0, e = 0), n = n || 1; for (var r = Math.max(Math.ceil((t - e) / n), 0), i = Array(r), o = 0; o < r; o++, e += n)i[o] = e; return i }; var M = function (e, t, n, r, i) { if (!(r instanceof t)) return e.apply(n, i); var o = w(e.prototype), a = e.apply(o, i); return v.isObject(a) ? a : o }; v.bind = function (e, t) { if (p && e.bind === p) return p.apply(e, u.call(arguments, 1)); if (!v.isFunction(e)) throw new TypeError("Bind must be called on a function"); var n = u.call(arguments, 2), r = function () { return M(e, r, t, this, n.concat(u.call(arguments))) }; return r }, v.partial = function (e) { var t = u.call(arguments, 1), n = function () { for (var r = 0, i = t.length, o = Array(i), a = 0; a < i; a++)o[a] = t[a] === v ? arguments[r++] : t[a]; for (; r < arguments.length;)o.push(arguments[r++]); return M(e, n, this, this, o) }; return n }, v.bindAll = function (e) { var t, n, r = arguments.length; if (r <= 1) throw new Error("bindAll must be passed function names"); for (t = 1; t < r; t++)e[n = arguments[t]] = v.bind(e[n], e); return e }, v.memoize = function (e, t) { var n = function (r) { var i = n.cache, o = "" + (t ? t.apply(this, arguments) : r); return v.has(i, o) || (i[o] = e.apply(this, arguments)), i[o] }; return n.cache = {}, n }, v.delay = function (e, t) { var n = u.call(arguments, 2); return setTimeout(function () { return e.apply(null, n) }, t) }, v.defer = v.partial(v.delay, v, 1), v.throttle = function (e, t, n) { var r, i, o, a = null, s = 0; n || (n = {}); var l = function () { s = !1 === n.leading ? 0 : v.now(), a = null, o = e.apply(r, i), a || (r = i = null) }; return function () { var u = v.now(); s || !1 !== n.leading || (s = u); var c = t - (u - s); return r = this, i = arguments, c <= 0 || c > t ? (a && (clearTimeout(a), a = null), s = u, o = e.apply(r, i), a || (r = i = null)) : a || !1 === n.trailing || (a = setTimeout(l, c)), o } }, v.debounce = function (e, t, n) { var r, i, o, a, s, l = function () { var u = v.now() - a; u < t && u >= 0 ? r = setTimeout(l, t - u) : (r = null, n || (s = e.apply(o, i), r || (o = i = null))) }; return function () { o = this, i = arguments, a = v.now(); var u = n && !r; return r || (r = setTimeout(l, t)), u && (s = e.apply(o, i), o = i = null), s } }, v.wrap = function (e, t) { return v.partial(t, e) }, v.negate = function (e) { return function () { return !e.apply(this, arguments) } }, v.compose = function () { var e = arguments, t = e.length - 1; return function () { for (var n = t, r = e[t].apply(this, arguments); n--;)r = e[n].call(this, r); return r } }, v.after = function (e, t) { return function () { if (--e < 1) return t.apply(this, arguments) } }, v.before = function (e, t) { var n; return function () { return --e > 0 && (n = t.apply(this, arguments)), e <= 1 && (t = null), n } }, v.once = v.partial(v.before, 2); var E = !{ toString: null }.propertyIsEnumerable("toString"), A = ["valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString"]; function collectNonEnumProps(e, t) { var n = A.length, r = e.constructor, i = v.isFunction(r) && r.prototype || a, o = "constructor"; for (v.has(e, o) && !v.contains(t, o) && t.push(o); n--;)(o = A[n]) in e && e[o] !== i[o] && !v.contains(t, o) && t.push(o) } v.keys = function (e) { if (!v.isObject(e)) return []; if (h) return h(e); var t = []; for (var n in e) v.has(e, n) && t.push(n); return E && collectNonEnumProps(e, t), t }, v.allKeys = function (e) { if (!v.isObject(e)) return []; var t = []; for (var n in e) t.push(n); return E && collectNonEnumProps(e, t), t }, v.values = function (e) { for (var t = v.keys(e), n = t.length, r = Array(n), i = 0; i < n; i++)r[i] = e[t[i]]; return r }, v.mapObject = function (e, t, n) { t = _(t, n); for (var r, i = v.keys(e), o = i.length, a = {}, s = 0; s < o; s++)a[r = i[s]] = t(e[r], r, e); return a }, v.pairs = function (e) { for (var t = v.keys(e), n = t.length, r = Array(n), i = 0; i < n; i++)r[i] = [t[i], e[t[i]]]; return r }, v.invert = function (e) { for (var t = {}, n = v.keys(e), r = 0, i = n.length; r < i; r++)t[e[n[r]]] = n[r]; return t }, v.functions = v.methods = function (e) { var t = []; for (var n in e) v.isFunction(e[n]) && t.push(n); return t.sort() }, v.extend = b(v.allKeys), v.extendOwn = v.assign = b(v.keys), v.findKey = function (e, t, n) { t = _(t, n); for (var r, i = v.keys(e), o = 0, a = i.length; o < a; o++)if (t(e[r = i[o]], r, e)) return r }, v.pick = function (e, t, n) { var r, i, o = {}, a = e; if (null == a) return o; v.isFunction(t) ? (i = v.allKeys(a), r = y(t, n)) : (i = L(arguments, !1, !1, 1), r = function (e, t, n) { return t in n }, a = Object(a)); for (var s = 0, l = i.length; s < l; s++) { var u = i[s], c = a[u]; r(c, u, a) && (o[u] = c) } return o }, v.omit = function (e, t, n) { if (v.isFunction(t)) t = v.negate(t); else { var r = v.map(L(arguments, !1, !1, 1), String); t = function (e, t) { return !v.contains(r, t) } } return v.pick(e, t, n) }, v.defaults = b(v.allKeys, !0), v.create = function (e, t) { var n = w(e); return t && v.extendOwn(n, t), n }, v.clone = function (e) { return v.isObject(e) ? v.isArray(e) ? e.slice() : v.extend({}, e) : e }, v.tap = function (e, t) { return t(e), e }, v.isMatch = function (e, t) { var n = v.keys(t), r = n.length; if (null == e) return !r; for (var i = Object(e), o = 0; o < r; o++) { var a = n[o]; if (t[a] !== i[a] || !(a in i)) return !1 } return !0 }; var P = function (e, t, n, r) { if (e === t) return 0 !== e || 1 / e == 1 / t; if (null == e || null == t) return e === t; e instanceof v && (e = e._wrapped), t instanceof v && (t = t._wrapped); var i = c.call(e); if (i !== c.call(t)) return !1; switch (i) { case "[object RegExp]": case "[object String]": return "" + e == "" + t; case "[object Number]": return +e != +e ? +t != +t : 0 == +e ? 1 / +e == 1 / t : +e == +t; case "[object Date]": case "[object Boolean]": return +e == +t }var o = "[object Array]" === i; if (!o) { if ("object" != typeof e || "object" != typeof t) return !1; var a = e.constructor, s = t.constructor; if (a !== s && !(v.isFunction(a) && a instanceof a && v.isFunction(s) && s instanceof s) && "constructor" in e && "constructor" in t) return !1 } n = n || [], r = r || []; for (var l = n.length; l--;)if (n[l] === e) return r[l] === t; if (n.push(e), r.push(t), o) { if ((l = e.length) !== t.length) return !1; for (; l--;)if (!P(e[l], t[l], n, r)) return !1 } else { var u, d = v.keys(e); if (l = d.length, v.keys(t).length !== l) return !1; for (; l--;)if (u = d[l], !v.has(t, u) || !P(e[u], t[u], n, r)) return !1 } return n.pop(), r.pop(), !0 }; v.isEqual = function (e, t) { return P(e, t) }, v.isEmpty = function (e) { return null == e || (k(e) && (v.isArray(e) || v.isString(e) || v.isArguments(e)) ? 0 === e.length : 0 === v.keys(e).length) }, v.isElement = function (e) { return !(!e || 1 !== e.nodeType) }, v.isArray = f || function (e) { return "[object Array]" === c.call(e) }, v.isObject = function (e) { var t = typeof e; return "function" === t || "object" === t && !!e }, v.each(["Arguments", "Function", "String", "Number", "Date", "RegExp", "Error"], function (e) { v["is" + e] = function (t) { return c.call(t) === "[object " + e + "]" } }), v.isArguments(arguments) || (v.isArguments = function (e) { return v.has(e, "callee") }), "function" != typeof /./ && "object" != typeof Int8Array && (v.isFunction = function (e) { return "function" == typeof e || !1 }), v.isFinite = function (e) { return isFinite(e) && !isNaN(parseFloat(e)) }, v.isNaN = function (e) { return v.isNumber(e) && e !== +e }, v.isBoolean = function (e) { return !0 === e || !1 === e || "[object Boolean]" === c.call(e) }, v.isNull = function (e) { return null === e }, v.isUndefined = function (e) { return void 0 === e }, v.has = function (e, t) { return null != e && d.call(e, t) }, v.noConflict = function () { return n._ = i, this }, v.identity = function (e) { return e }, v.constant = function (e) { return function () { return e } }, v.noop = function () { }, v.property = x, v.propertyOf = function (e) { return null == e ? function () { } : function (t) { return e[t] } }, v.matcher = v.matches = function (e) { return e = v.extendOwn({}, e), function (t) { return v.isMatch(t, e) } }, v.times = function (e, t, n) { var r = Array(Math.max(0, e)); t = y(t, n, 1); for (var i = 0; i < e; i++)r[i] = t(i); return r }, v.random = function (e, t) { return null == t && (t = e, e = 0), e + Math.floor(Math.random() * (t - e + 1)) }, v.now = Date.now || function () { return (new Date).getTime() }; var R = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#x27;", "`": "&#x60;" }, O = v.invert(R), D = function (e) { var t = function (t) { return e[t] }, n = "(?:" + v.keys(e).join("|") + ")", r = RegExp(n), i = RegExp(n, "g"); return function (e) { return e = null == e ? "" : "" + e, r.test(e) ? e.replace(i, t) : e } }; v.escape = D(R), v.unescape = D(O), v.result = function (e, t, n) { var r = null == e ? void 0 : e[t]; return void 0 === r && (r = n), v.isFunction(r) ? r.call(e) : r }; var F = 0; v.uniqueId = function (e) { var t = ++F + ""; return e ? e + t : t }, v.templateSettings = { evaluate: /<%([\s\S]+?)%>/g, interpolate: /<%=([\s\S]+?)%>/g, escape: /<%-([\s\S]+?)%>/g }; var I = /(.)^/, N = { "'": "'", "\\": "\\", "\r": "r", "\n": "n", "\u2028": "u2028", "\u2029": "u2029" }, $ = /\\|'|\r|\n|\u2028|\u2029/g, B = function (e) { return "\\" + N[e] }; v.template = function (e, t, n) { !t && n && (t = n), t = v.defaults({}, t, v.templateSettings); var r = RegExp([(t.escape || I).source, (t.interpolate || I).source, (t.evaluate || I).source].join("|") + "|$", "g"), i = 0, o = "__p+='"; e.replace(r, function (t, n, r, a, s) { return o += e.slice(i, s).replace($, B), i = s + t.length, n ? o += "'+\n((__t=(" + n + "))==null?'':_.escape(__t))+\n'" : r ? o += "'+\n((__t=(" + r + "))==null?'':__t)+\n'" : a && (o += "';\n" + a + "\n__p+='"), t }), o += "';\n", t.variable || (o = "with(obj||{}){\n" + o + "}\n"), o = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + o + "return __p;\n"; try { var a = new Function(t.variable || "obj", "_", o) } catch (e) { throw e.source = o, e } var s = function (e) { return a.call(this, e, v) }, l = t.variable || "obj"; return s.source = "function(" + l + "){\n" + o + "}", s }, v.chain = function (e) { var t = v(e); return t._chain = !0, t }; var z = function (e, t) { return e._chain ? v(t).chain() : t }; v.mixin = function (e) { v.each(v.functions(e), function (t) { var n = v[t] = e[t]; v.prototype[t] = function () { var e = [this._wrapped]; return l.apply(e, arguments), z(this, n.apply(v, e)) } }) }, v.mixin(v), v.each(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function (e) { var t = o[e]; v.prototype[e] = function () { var n = this._wrapped; return t.apply(n, arguments), "shift" !== e && "splice" !== e || 0 !== n.length || delete n[0], z(this, n) } }), v.each(["concat", "join", "slice"], function (e) { var t = o[e]; v.prototype[e] = function () { return z(this, t.apply(this._wrapped, arguments)) } }), v.prototype.value = function () { return this._wrapped }, v.prototype.valueOf = v.prototype.toJSON = v.prototype.value, v.prototype.toString = function () { return "" + this._wrapped }, void 0 === (r = function () { return v }.apply(t, [])) || (e.exports = r) }).call(this) }, function (e, t, n) { e.exports = n(3487) }, , function (e, t, n) { (function (r) { var i, o, a; a = "object" == typeof self && self.self == self && self || "object" == typeof r && r.global == r && r, i = [n(0), n(9), t], void 0 === (o = function (e, t, n) { a.Backbone = function (e, t, n, r) { var i = e.Backbone, o = Array.prototype.slice; t.VERSION = "1.2.3", t.$ = r, t.noConflict = function () { return e.Backbone = i, this }, t.emulateHTTP = !1, t.emulateJSON = !1; var a = function (e, t, r) { n.each(t, function (t, i) { n[i] && (e.prototype[i] = function (e, t, r) { switch (e) { case 1: return function () { return n[t](this[r]) }; case 2: return function (e) { return n[t](this[r], e) }; case 3: return function (e, i) { return n[t](this[r], s(e, this), i) }; case 4: return function (e, i, o) { return n[t](this[r], s(e, this), i, o) }; default: return function () { var e = o.call(arguments); return e.unshift(this[r]), n[t].apply(n, e) } } }(t, i, r)) }) }, s = function (e, t) { return n.isFunction(e) ? e : n.isObject(e) && !t._isModel(e) ? l(e) : n.isString(e) ? function (t) { return t.get(e) } : e }, l = function (e) { var t = n.matches(e); return function (e) { return t(e.attributes) } }, u = t.Events = {}, c = /\s+/, d = function (e, t, r, i, o) { var a, s = 0; if (r && "object" == typeof r) { void 0 !== i && "context" in o && void 0 === o.context && (o.context = i); for (a = n.keys(r); s < a.length; s++)t = d(e, t, a[s], r[a[s]], o) } else if (r && c.test(r)) for (a = r.split(c); s < a.length; s++)t = e(t, a[s], i, o); else t = e(t, r, i, o); return t }; u.on = function (e, t, n) { return f(this, e, t, n) }; var f = function (e, t, n, r, i) { if (e._events = d(h, e._events || {}, t, n, { context: r, ctx: e, listening: i }), i) { var o = e._listeners || (e._listeners = {}); o[i.id] = i } return e }; u.listenTo = function (e, t, r) { if (!e) return this; var i = e._listenId || (e._listenId = n.uniqueId("l")), o = this._listeningTo || (this._listeningTo = {}), a = o[i]; if (!a) { var s = this._listenId || (this._listenId = n.uniqueId("l")); a = o[i] = { obj: e, objId: i, id: s, listeningTo: o, count: 0 } } return f(e, t, r, this, a), this }; var h = function (e, t, n, r) { if (n) { var i = e[t] || (e[t] = []), o = r.context, a = r.ctx, s = r.listening; s && s.count++, i.push({ callback: n, context: o, ctx: o || a, listening: s }) } return e }; u.off = function (e, t, n) { return this._events ? (this._events = d(p, this._events, e, t, { context: n, listeners: this._listeners }), this) : this }, u.stopListening = function (e, t, r) { var i = this._listeningTo; if (!i) return this; for (var o = e ? [e._listenId] : n.keys(i), a = 0; a < o.length; a++) { var s = i[o[a]]; if (!s) break; s.obj.off(t, r, this) } return n.isEmpty(i) && (this._listeningTo = void 0), this }; var p = function (e, t, r, i) { if (e) { var o, a = 0, s = i.context, l = i.listeners; if (t || r || s) { for (var u = t ? [t] : n.keys(e); a < u.length; a++) { t = u[a]; var c = e[t]; if (!c) break; for (var d = [], f = 0; f < c.length; f++) { var h = c[f]; r && r !== h.callback && r !== h.callback._callback || s && s !== h.context ? d.push(h) : (o = h.listening) && 0 == --o.count && (delete l[o.id], delete o.listeningTo[o.objId]) } d.length ? e[t] = d : delete e[t] } return n.size(e) ? e : void 0 } for (var p = n.keys(l); a < p.length; a++)o = l[p[a]], delete l[o.id], delete o.listeningTo[o.objId] } }; u.once = function (e, t, r) { var i = d(m, {}, e, t, n.bind(this.off, this)); return this.on(i, void 0, r) }, u.listenToOnce = function (e, t, r) { var i = d(m, {}, t, r, n.bind(this.stopListening, this, e)); return this.listenTo(e, i) }; var m = function (e, t, r, i) { if (r) { var o = e[t] = n.once(function () { i(t, o), r.apply(this, arguments) }); o._callback = r } return e }; u.trigger = function (e) { if (!this._events) return this; for (var t = Math.max(0, arguments.length - 1), n = Array(t), r = 0; r < t; r++)n[r] = arguments[r + 1]; return d(g, this._events, e, void 0, n), this }; var g = function (e, t, n, r) { if (e) { var i = e[t], o = e.all; i && o && (o = o.slice()), i && v(i, r), o && v(o, [t].concat(r)) } return e }, v = function (e, t) { var n, r = -1, i = e.length, o = t[0], a = t[1], s = t[2]; switch (t.length) { case 0: for (; ++r < i;)(n = e[r]).callback.call(n.ctx); return; case 1: for (; ++r < i;)(n = e[r]).callback.call(n.ctx, o); return; case 2: for (; ++r < i;)(n = e[r]).callback.call(n.ctx, o, a); return; case 3: for (; ++r < i;)(n = e[r]).callback.call(n.ctx, o, a, s); return; default: for (; ++r < i;)(n = e[r]).callback.apply(n.ctx, t); return } }; u.bind = u.on, u.unbind = u.off, n.extend(t, u); var y = t.Model = function (e, t) { var r = e || {}; t || (t = {}), this.cid = n.uniqueId(this.cidPrefix), this.attributes = {}, t.collection && (this.collection = t.collection), t.parse && (r = this.parse(r, t) || {}), r = n.defaults({}, r, n.result(this, "defaults")), this.set(r, t), this.changed = {}, this.initialize.apply(this, arguments) }; n.extend(y.prototype, u, { changed: null, validationError: null, idAttribute: "id", cidPrefix: "c", initialize: function () { }, toJSON: function (e) { return n.clone(this.attributes) }, sync: function () { return t.sync.apply(this, arguments) }, get: function (e) { return this.attributes[e] }, escape: function (e) { return n.escape(this.get(e)) }, has: function (e) { return null != this.get(e) }, matches: function (e) { return !!n.iteratee(e, this)(this.attributes) }, set: function (e, t, r) { if (null == e) return this; var i; if ("object" == typeof e ? (i = e, r = t) : (i = {})[e] = t, r || (r = {}), !this._validate(i, r)) return !1; var o = r.unset, a = r.silent, s = [], l = this._changing; this._changing = !0, l || (this._previousAttributes = n.clone(this.attributes), this.changed = {}); var u = this.attributes, c = this.changed, d = this._previousAttributes; for (var f in i) t = i[f], n.isEqual(u[f], t) || s.push(f), n.isEqual(d[f], t) ? delete c[f] : c[f] = t, o ? delete u[f] : u[f] = t; if (this.id = this.get(this.idAttribute), !a) { s.length && (this._pending = r); for (var h = 0; h < s.length; h++)this.trigger("change:" + s[h], this, u[s[h]], r) } if (l) return this; if (!a) for (; this._pending;)r = this._pending, this._pending = !1, this.trigger("change", this, r); return this._pending = !1, this._changing = !1, this }, unset: function (e, t) { return this.set(e, void 0, n.extend({}, t, { unset: !0 })) }, clear: function (e) { var t = {}; for (var r in this.attributes) t[r] = void 0; return this.set(t, n.extend({}, e, { unset: !0 })) }, hasChanged: function (e) { return null == e ? !n.isEmpty(this.changed) : n.has(this.changed, e) }, changedAttributes: function (e) { if (!e) return !!this.hasChanged() && n.clone(this.changed); var t = this._changing ? this._previousAttributes : this.attributes, r = {}; for (var i in e) { var o = e[i]; n.isEqual(t[i], o) || (r[i] = o) } return !!n.size(r) && r }, previous: function (e) { return null != e && this._previousAttributes ? this._previousAttributes[e] : null }, previousAttributes: function () { return n.clone(this._previousAttributes) }, fetch: function (e) { var t = this, r = (e = n.extend({ parse: !0 }, e)).success; return e.success = function (n) { var i = e.parse ? t.parse(n, e) : n; if (!t.set(i, e)) return !1; r && r.call(e.context, t, n, e), t.trigger("sync", t, n, e) }, N(this, e), this.sync("read", this, e) }, save: function (e, t, r) { var i; null == e || "object" == typeof e ? (i = e, r = t) : (i = {})[e] = t; var o = (r = n.extend({ validate: !0, parse: !0 }, r)).wait; if (i && !o) { if (!this.set(i, r)) return !1 } else if (!this._validate(i, r)) return !1; var a = this, s = r.success, l = this.attributes; r.success = function (e) { a.attributes = l; var t = r.parse ? a.parse(e, r) : e; if (o && (t = n.extend({}, i, t)), t && !a.set(t, r)) return !1; s && s.call(r.context, a, e, r), a.trigger("sync", a, e, r) }, N(this, r), i && o && (this.attributes = n.extend({}, l, i)); var u = this.isNew() ? "create" : r.patch ? "patch" : "update"; "patch" !== u || r.attrs || (r.attrs = i); var c = this.sync(u, this, r); return this.attributes = l, c }, destroy: function (e) { var t = this, r = (e = e ? n.clone(e) : {}).success, i = e.wait, o = function () { t.stopListening(), t.trigger("destroy", t, t.collection, e) }; e.success = function (n) { i && o(), r && r.call(e.context, t, n, e), t.isNew() || t.trigger("sync", t, n, e) }; var a = !1; return this.isNew() ? n.defer(e.success) : (N(this, e), a = this.sync("delete", this, e)), i || o(), a }, url: function () { var e = n.result(this, "urlRoot") || n.result(this.collection, "url") || I(); if (this.isNew()) return e; var t = this.get(this.idAttribute); return e.replace(/[^\/]$/, "$&/") + encodeURIComponent(t) }, parse: function (e, t) { return e }, clone: function () { return new this.constructor(this.attributes) }, isNew: function () { return !this.has(this.idAttribute) }, isValid: function (e) { return this._validate({}, n.defaults({ validate: !0 }, e)) }, _validate: function (e, t) { if (!t.validate || !this.validate) return !0; e = n.extend({}, this.attributes, e); var r = this.validationError = this.validate(e, t) || null; return !r || (this.trigger("invalid", this, r, n.extend(t, { validationError: r })), !1) } }), a(y, { keys: 1, values: 1, pairs: 1, invert: 1, pick: 0, omit: 0, chain: 1, isEmpty: 1 }, "attributes"); var _ = t.Collection = function (e, t) { t || (t = {}), t.model && (this.model = t.model), void 0 !== t.comparator && (this.comparator = t.comparator), this._reset(), this.initialize.apply(this, arguments), e && this.reset(e, n.extend({ silent: !0 }, t)) }, b = { add: !0, remove: !0, merge: !0 }, w = { add: !0, remove: !1 }, x = function (e, t, n) { n = Math.min(Math.max(n, 0), e.length); for (var r = Array(e.length - n), i = t.length, o = 0; o < r.length; o++)r[o] = e[o + n]; for (o = 0; o < i; o++)e[o + n] = t[o]; for (o = 0; o < r.length; o++)e[o + i + n] = r[o] }; n.extend(_.prototype, u, { model: y, initialize: function () { }, toJSON: function (e) { return this.map(function (t) { return t.toJSON(e) }) }, sync: function () { return t.sync.apply(this, arguments) }, add: function (e, t) { return this.set(e, n.extend({ merge: !1 }, t, w)) }, remove: function (e, t) { t = n.extend({}, t); var r = !n.isArray(e); e = r ? [e] : n.clone(e); var i = this._removeModels(e, t); return !t.silent && i && this.trigger("update", this, t), r ? i[0] : i }, set: function (e, t) { if (null != e) { (t = n.defaults({}, t, b)).parse && !this._isModel(e) && (e = this.parse(e, t)); var r = !n.isArray(e); e = r ? [e] : e.slice(); var i = t.at; null != i && (i = +i), i < 0 && (i += this.length + 1); for (var o, a = [], s = [], l = [], u = {}, c = t.add, d = t.merge, f = t.remove, h = !1, p = this.comparator && null == i && !1 !== t.sort, m = n.isString(this.comparator) ? this.comparator : null, g = 0; g < e.length; g++) { o = e[g]; var v = this.get(o); if (v) { if (d && o !== v) { var y = this._isModel(o) ? o.attributes : o; t.parse && (y = v.parse(y, t)), v.set(y, t), p && !h && (h = v.hasChanged(m)) } u[v.cid] || (u[v.cid] = !0, a.push(v)), e[g] = v } else c && (o = e[g] = this._prepareModel(o, t)) && (s.push(o), this._addReference(o, t), u[o.cid] = !0, a.push(o)) } if (f) { for (g = 0; g < this.length; g++)o = this.models[g], u[o.cid] || l.push(o); l.length && this._removeModels(l, t) } var _ = !1, w = !p && c && f; if (a.length && w ? (_ = this.length != a.length || n.some(this.models, function (e, t) { return e !== a[t] }), this.models.length = 0, x(this.models, a, 0), this.length = this.models.length) : s.length && (p && (h = !0), x(this.models, s, null == i ? this.length : i), this.length = this.models.length), h && this.sort({ silent: !0 }), !t.silent) { for (g = 0; g < s.length; g++)null != i && (t.index = i + g), (o = s[g]).trigger("add", o, this, t); (h || _) && this.trigger("sort", this, t), (s.length || l.length) && this.trigger("update", this, t) } return r ? e[0] : e } }, reset: function (e, t) { t = t ? n.clone(t) : {}; for (var r = 0; r < this.models.length; r++)this._removeReference(this.models[r], t); return t.previousModels = this.models, this._reset(), e = this.add(e, n.extend({ silent: !0 }, t)), t.silent || this.trigger("reset", this, t), e }, push: function (e, t) { return this.add(e, n.extend({ at: this.length }, t)) }, pop: function (e) { var t = this.at(this.length - 1); return this.remove(t, e) }, unshift: function (e, t) { return this.add(e, n.extend({ at: 0 }, t)) }, shift: function (e) { var t = this.at(0); return this.remove(t, e) }, slice: function () { return o.apply(this.models, arguments) }, get: function (e) { if (null != e) { var t = this.modelId(this._isModel(e) ? e.attributes : e); return this._byId[e] || this._byId[t] || this._byId[e.cid] } }, at: function (e) { return e < 0 && (e += this.length), this.models[e] }, where: function (e, t) { return this[t ? "find" : "filter"](e) }, findWhere: function (e) { return this.where(e, !0) }, sort: function (e) { var t = this.comparator; if (!t) throw new Error("Cannot sort a set without a comparator"); e || (e = {}); var r = t.length; return n.isFunction(t) && (t = n.bind(t, this)), 1 === r || n.isString(t) ? this.models = this.sortBy(t) : this.models.sort(t), e.silent || this.trigger("sort", this, e), this }, pluck: function (e) { return n.invoke(this.models, "get", e) }, fetch: function (e) { var t = (e = n.extend({ parse: !0 }, e)).success, r = this; return e.success = function (n) { var i = e.reset ? "reset" : "set"; r[i](n, e), t && t.call(e.context, r, n, e), r.trigger("sync", r, n, e) }, N(this, e), this.sync("read", this, e) }, create: function (e, t) { var r = (t = t ? n.clone(t) : {}).wait; if (!(e = this._prepareModel(e, t))) return !1; r || this.add(e, t); var i = this, o = t.success; return t.success = function (e, t, n) { r && i.add(e, n), o && o.call(n.context, e, t, n) }, e.save(null, t), e }, parse: function (e, t) { return e }, clone: function () { return new this.constructor(this.models, { model: this.model, comparator: this.comparator }) }, modelId: function (e) { return e[this.model.prototype.idAttribute || "id"] }, _reset: function () { this.length = 0, this.models = [], this._byId = {} }, _prepareModel: function (e, t) { if (this._isModel(e)) return e.collection || (e.collection = this), e; (t = t ? n.clone(t) : {}).collection = this; var r = new this.model(e, t); return r.validationError ? (this.trigger("invalid", this, r.validationError, t), !1) : r }, _removeModels: function (e, t) { for (var n = [], r = 0; r < e.length; r++) { var i = this.get(e[r]); if (i) { var o = this.indexOf(i); this.models.splice(o, 1), this.length--, t.silent || (t.index = o, i.trigger("remove", i, this, t)), n.push(i), this._removeReference(i, t) } } return !!n.length && n }, _isModel: function (e) { return e instanceof y }, _addReference: function (e, t) { this._byId[e.cid] = e; var n = this.modelId(e.attributes); null != n && (this._byId[n] = e), e.on("all", this._onModelEvent, this) }, _removeReference: function (e, t) { delete this._byId[e.cid]; var n = this.modelId(e.attributes); null != n && delete this._byId[n], this === e.collection && delete e.collection, e.off("all", this._onModelEvent, this) }, _onModelEvent: function (e, t, n, r) { if ("add" !== e && "remove" !== e || n === this) { if ("destroy" === e && this.remove(t, r), "change" === e) { var i = this.modelId(t.previousAttributes()), o = this.modelId(t.attributes); i !== o && (null != i && delete this._byId[i], null != o && (this._byId[o] = t)) } this.trigger.apply(this, arguments) } } }), a(_, { forEach: 3, each: 3, map: 3, collect: 3, reduce: 4, foldl: 4, inject: 4, reduceRight: 4, foldr: 4, find: 3, detect: 3, filter: 3, select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3, contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3, head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3, without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3, isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3, sortBy: 3, indexBy: 3 }, "models"); var C = t.View = function (e) { this.cid = n.uniqueId("view"), n.extend(this, n.pick(e, k)), this._ensureElement(), this.initialize.apply(this, arguments) }, S = /^(\S+)\s*(.*)$/, k = ["model", "collection", "el", "id", "attributes", "className", "tagName", "events"]; n.extend(C.prototype, u, { tagName: "div", $: function (e) { return this.$el.find(e) }, initialize: function () { }, render: function () { return this }, remove: function () { return this._removeElement(), this.stopListening(), this }, _removeElement: function () { this.$el.remove() }, setElement: function (e) { return this.undelegateEvents(), this._setElement(e), this.delegateEvents(), this }, _setElement: function (e) { this.$el = e instanceof t.$ ? e : t.$(e), this.el = this.$el[0] }, delegateEvents: function (e) { if (e || (e = n.result(this, "events")), !e) return this; for (var t in this.undelegateEvents(), e) { var r = e[t]; if (n.isFunction(r) || (r = this[r]), r) { var i = t.match(S); this.delegate(i[1], i[2], n.bind(r, this)) } } return this }, delegate: function (e, t, n) { return this.$el.on(e + ".delegateEvents" + this.cid, t, n), this }, undelegateEvents: function () { return this.$el && this.$el.off(".delegateEvents" + this.cid), this }, undelegate: function (e, t, n) { return this.$el.off(e + ".delegateEvents" + this.cid, t, n), this }, _createElement: function (e) { return document.createElement(e) }, _ensureElement: function () { if (this.el) this.setElement(n.result(this, "el")); else { var e = n.extend({}, n.result(this, "attributes")); this.id && (e.id = n.result(this, "id")), this.className && (e.class = n.result(this, "className")), this.setElement(this._createElement(n.result(this, "tagName"))), this._setAttributes(e) } }, _setAttributes: function (e) { this.$el.attr(e) } }), t.sync = function (e, r, i) { var o = T[e]; n.defaults(i || (i = {}), { emulateHTTP: t.emulateHTTP, emulateJSON: t.emulateJSON }); var a = { type: o, dataType: "json" }; if (i.url || (a.url = n.result(r, "url") || I()), null != i.data || !r || "create" !== e && "update" !== e && "patch" !== e || (a.contentType = "application/json", a.data = JSON.stringify(i.attrs || r.toJSON(i))), i.emulateJSON && (a.contentType = "application/x-www-form-urlencoded", a.data = a.data ? { model: a.data } : {}), i.emulateHTTP && ("PUT" === o || "DELETE" === o || "PATCH" === o)) { a.type = "POST", i.emulateJSON && (a.data._method = o); var s = i.beforeSend; i.beforeSend = function (e) { if (e.setRequestHeader("X-HTTP-Method-Override", o), s) return s.apply(this, arguments) } } "GET" === a.type || i.emulateJSON || (a.processData = !1); var l = i.error; i.error = function (e, t, n) { i.textStatus = t, i.errorThrown = n, l && l.call(i.context, e, t, n) }; var u = i.xhr = t.ajax(n.extend(a, i)); return r.trigger("request", r, u, i), u }; var T = { create: "POST", update: "PUT", patch: "PATCH", delete: "DELETE", read: "GET" }; t.ajax = function () { return t.$.ajax.apply(t.$, arguments) }; var L = t.Router = function (e) { e || (e = {}), e.routes && (this.routes = e.routes), this._bindRoutes(), this.initialize.apply(this, arguments) }, M = /\((.*?)\)/g, E = /(\(\?)?:\w+/g, A = /\*\w+/g, P = /[\-{}\[\]+?.,\\\^$|#\s]/g; n.extend(L.prototype, u, { initialize: function () { }, route: function (e, r, i) { n.isRegExp(e) || (e = this._routeToRegExp(e)), n.isFunction(r) && (i = r, r = ""), i || (i = this[r]); var o = this; return t.history.route(e, function (n) { var a = o._extractParameters(e, n); !1 !== o.execute(i, a, r) && (o.trigger.apply(o, ["route:" + r].concat(a)), o.trigger("route", r, a), t.history.trigger("route", o, r, a)) }), this }, execute: function (e, t, n) { e && e.apply(this, t) }, navigate: function (e, n) { return t.history.navigate(e, n), this }, _bindRoutes: function () { if (this.routes) { this.routes = n.result(this, "routes"); for (var e, t = n.keys(this.routes); null != (e = t.pop());)this.route(e, this.routes[e]) } }, _routeToRegExp: function (e) { return e = e.replace(P, "\\$&").replace(M, "(?:$1)?").replace(E, function (e, t) { return t ? e : "([^/?]+)" }).replace(A, "([^?]*?)"), new RegExp("^" + e + "(?:\\?([\\s\\S]*))?$") }, _extractParameters: function (e, t) { var r = e.exec(t).slice(1); return n.map(r, function (e, t) { return t === r.length - 1 ? e || null : e ? decodeURIComponent(e) : null }) } }); var R = t.History = function () { this.handlers = [], this.checkUrl = n.bind(this.checkUrl, this), "undefined" != typeof window && (this.location = window.location, this.history = window.history) }, O = /^[#\/]|\s+$/g, D = /^\/+|\/+$/g, F = /#.*$/; R.started = !1, n.extend(R.prototype, u, { interval: 50, atRoot: function () { var e = this.location.pathname.replace(/[^\/]$/, "$&/"); return e === this.root && !this.getSearch() }, matchRoot: function () { var e = this.decodeFragment(this.location.pathname), t = e.slice(0, this.root.length - 1) + "/"; return t === this.root }, decodeFragment: function (e) { return decodeURI(e.replace(/%25/g, "%2525")) }, getSearch: function () { var e = this.location.href.replace(/#.*/, "").match(/\?.+/); return e ? e[0] : "" }, getHash: function (e) { var t = (e || this).location.href.match(/#(.*)$/); return t ? t[1] : "" }, getPath: function () { var e = this.decodeFragment(this.location.pathname + this.getSearch()).slice(this.root.length - 1); return "/" === e.charAt(0) ? e.slice(1) : e }, getFragment: function (e) { return null == e && (e = this._usePushState || !this._wantsHashChange ? this.getPath() : this.getHash()), e.replace(O, "") }, start: function (e) { if (R.started) throw new Error("Backbone.history has already been started"); if (R.started = !0, this.options = n.extend({ root: "/" }, this.options, e), this.root = this.options.root, this._wantsHashChange = !1 !== this.options.hashChange, this._hasHashChange = "onhashchange" in window && (void 0 === document.documentMode || document.documentMode > 7), this._useHashChange = this._wantsHashChange && this._hasHashChange, this._wantsPushState = !!this.options.pushState, this._hasPushState = !(!this.history || !this.history.pushState), this._usePushState = this._wantsPushState && this._hasPushState, this.fragment = this.getFragment(), this.root = ("/" + this.root + "/").replace(D, "/"), this._wantsHashChange && this._wantsPushState) { if (!this._hasPushState && !this.atRoot()) { var t = this.root.slice(0, -1) || "/"; return this.location.replace(t + "#" + this.getPath()), !0 } this._hasPushState && this.atRoot() && this.navigate(this.getHash(), { replace: !0 }) } if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) { this.iframe = document.createElement("iframe"), this.iframe.src = "javascript:0", this.iframe.style.display = "none", this.iframe.tabIndex = -1; var r = document.body, i = r.insertBefore(this.iframe, r.firstChild).contentWindow; i.document.open(), i.document.close(), i.location.hash = "#" + this.fragment } var o = window.addEventListener || function (e, t) { return attachEvent("on" + e, t) }; if (this._usePushState ? o("popstate", this.checkUrl, !1) : this._useHashChange && !this.iframe ? o("hashchange", this.checkUrl, !1) : this._wantsHashChange && (this._checkUrlInterval = setInterval(this.checkUrl, this.interval)), !this.options.silent) return this.loadUrl() }, stop: function () { var e = window.removeEventListener || function (e, t) { return detachEvent("on" + e, t) }; this._usePushState ? e("popstate", this.checkUrl, !1) : this._useHashChange && !this.iframe && e("hashchange", this.checkUrl, !1), this.iframe && (document.body.removeChild(this.iframe), this.iframe = null), this._checkUrlInterval && clearInterval(this._checkUrlInterval), R.started = !1 }, route: function (e, t) { this.handlers.unshift({ route: e, callback: t }) }, checkUrl: function (e) { var t = this.getFragment(); if (t === this.fragment && this.iframe && (t = this.getHash(this.iframe.contentWindow)), t === this.fragment) return !1; this.iframe && this.navigate(t), this.loadUrl() }, loadUrl: function (e) { return !!this.matchRoot() && (e = this.fragment = this.getFragment(e), n.some(this.handlers, function (t) { if (t.route.test(e)) return t.callback(e), !0 })) }, navigate: function (e, t) { if (!R.started) return !1; t && !0 !== t || (t = { trigger: !!t }), e = this.getFragment(e || ""); var n = this.root; "" !== e && "?" !== e.charAt(0) || (n = n.slice(0, -1) || "/"); var r = n + e; if (e = this.decodeFragment(e.replace(F, "")), this.fragment !== e) { if (this.fragment = e, this._usePushState) this.history[t.replace ? "replaceState" : "pushState"]({}, document.title, r); else { if (!this._wantsHashChange) return this.location.assign(r); if (this._updateHash(this.location, e, t.replace), this.iframe && e !== this.getHash(this.iframe.contentWindow)) { var i = this.iframe.contentWindow; t.replace || (i.document.open(), i.document.close()), this._updateHash(i.location, e, t.replace) } } return t.trigger ? this.loadUrl(e) : void 0 } }, _updateHash: function (e, t, n) { if (n) { var r = e.href.replace(/(javascript:|#).*$/, ""); e.replace(r + "#" + t) } else e.hash = "#" + t } }), t.history = new R, y.extend = _.extend = L.extend = C.extend = R.extend = function (e, t) { var r, i = this; r = e && n.has(e, "constructor") ? e.constructor : function () { return i.apply(this, arguments) }, n.extend(r, i, t); var o = function () { this.constructor = r }; return o.prototype = i.prototype, r.prototype = new o, e && n.extend(r.prototype, e), r.__super__ = i.prototype, r }; var I = function () { throw new Error('A "url" property or function must be specified') }, N = function (e, t) { var n = t.error; t.error = function (r) { n && n.call(t.context, e, r, t), e.trigger("error", e, r, t) } }; return t }(a, n, e, t) }.apply(t, i)) || (e.exports = o) }).call(this, n(48)) }, , function (e, t, n) { e.exports = n(3481) }, function (e, t, n) { e.exports = n(3544) }, function (e, t, n) { e.exports = n(3540) }, function (e, t, n) { "use strict"; function normalizeComponent(e, t, n, r, i, o, a, s) { var l, u = "function" == typeof e ? e.options : e; if (t && (u.render = t, u.staticRenderFns = n, u._compiled = !0), r && (u.functional = !0), o && (u._scopeId = "data-v-" + o), a ? (l = function (e) { (e = e || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) || "undefined" == typeof __VUE_SSR_CONTEXT__ || (e = __VUE_SSR_CONTEXT__), i && i.call(this, e), e && e._registeredComponents && e._registeredComponents.add(a) }, u._ssrRegister = l) : i && (l = s ? function () { i.call(this, this.$root.$options.shadowRoot) } : i), l) if (u.functional) { u._injectStyles = l; var c = u.render; u.render = function renderWithStyleInjection(e, t) { return l.call(t), c(e, t) } } else { var d = u.beforeCreate; u.beforeCreate = d ? [].concat(d, l) : [l] } return { exports: e, options: u } } n.d(t, "a", function () { return normalizeComponent }) }, function (e, t, n) { var r, i, o; i = "undefined" != typeof window ? window : this, o = function (n, i) { var o = [], a = o.slice, s = o.concat, l = o.push, u = o.indexOf, c = {}, d = c.toString, f = c.hasOwnProperty, h = {}, p = n.document, m = function (e, t) { return new m.fn.init(e, t) }, g = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, v = /^-ms-/, y = /-([\da-z])/gi, _ = function (e, t) { return t.toUpperCase() }; function isArraylike(e) { var t = "length" in e && e.length, n = m.type(e); return "function" !== n && !m.isWindow(e) && (!(1 !== e.nodeType || !t) || ("array" === n || 0 === t || "number" == typeof t && t > 0 && t - 1 in e)) } m.fn = m.prototype = { jquery: "2.1.4", constructor: m, selector: "", length: 0, toArray: function () { return a.call(this) }, get: function (e) { return null != e ? e < 0 ? this[e + this.length] : this[e] : a.call(this) }, pushStack: function (e) { var t = m.merge(this.constructor(), e); return t.prevObject = this, t.context = this.context, t }, each: function (e, t) { return m.each(this, e, t) }, map: function (e) { return this.pushStack(m.map(this, function (t, n) { return e.call(t, n, t) })) }, slice: function () { return this.pushStack(a.apply(this, arguments)) }, first: function () { return this.eq(0) }, last: function () { return this.eq(-1) }, eq: function (e) { var t = this.length, n = +e + (e < 0 ? t : 0); return this.pushStack(n >= 0 && n < t ? [this[n]] : []) }, end: function () { return this.prevObject || this.constructor(null) }, push: l, sort: o.sort, splice: o.splice }, m.extend = m.fn.extend = function () { var e, t, n, r, i, o, a = arguments[0] || {}, s = 1, l = arguments.length, u = !1; for ("boolean" == typeof a && (u = a, a = arguments[s] || {}, s++), "object" == typeof a || m.isFunction(a) || (a = {}), s === l && (a = this, s--); s < l; s++)if (null != (e = arguments[s])) for (t in e) n = a[t], a !== (r = e[t]) && (u && r && (m.isPlainObject(r) || (i = m.isArray(r))) ? (i ? (i = !1, o = n && m.isArray(n) ? n : []) : o = n && m.isPlainObject(n) ? n : {}, a[t] = m.extend(u, o, r)) : void 0 !== r && (a[t] = r)); return a }, m.extend({ expando: "jQuery" + ("2.1.4" + Math.random()).replace(/\D/g, ""), isReady: !0, error: function (e) { throw new Error(e) }, noop: function () { }, isFunction: function (e) { return "function" === m.type(e) }, isArray: Array.isArray, isWindow: function (e) { return null != e && e === e.window }, isNumeric: function (e) { return !m.isArray(e) && e - parseFloat(e) + 1 >= 0 }, isPlainObject: function (e) { return "object" === m.type(e) && !e.nodeType && !m.isWindow(e) && !(e.constructor && !f.call(e.constructor.prototype, "isPrototypeOf")) }, isEmptyObject: function (e) { var t; for (t in e) return !1; return !0 }, type: function (e) { return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? c[d.call(e)] || "object" : typeof e }, globalEval: function (e) { var t, n = eval; (e = m.trim(e)) && (1 === e.indexOf("use strict") ? ((t = p.createElement("script")).text = e, p.head.appendChild(t).parentNode.removeChild(t)) : n(e)) }, camelCase: function (e) { return e.replace(v, "ms-").replace(y, _) }, nodeName: function (e, t) { return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase() }, each: function (e, t, n) { var r = 0, i = e.length, o = isArraylike(e); if (n) { if (o) for (; r < i && !1 !== t.apply(e[r], n); r++); else for (r in e) if (!1 === t.apply(e[r], n)) break } else if (o) for (; r < i && !1 !== t.call(e[r], r, e[r]); r++); else for (r in e) if (!1 === t.call(e[r], r, e[r])) break; return e }, trim: function (e) { return null == e ? "" : (e + "").replace(g, "") }, makeArray: function (e, t) { var n = t || []; return null != e && (isArraylike(Object(e)) ? m.merge(n, "string" == typeof e ? [e] : e) : l.call(n, e)), n }, inArray: function (e, t, n) { return null == t ? -1 : u.call(t, e, n) }, merge: function (e, t) { for (var n = +t.length, r = 0, i = e.length; r < n; r++)e[i++] = t[r]; return e.length = i, e }, grep: function (e, t, n) { for (var r = [], i = 0, o = e.length, a = !n; i < o; i++)!t(e[i], i) !== a && r.push(e[i]); return r }, map: function (e, t, n) { var r, i = 0, o = e.length, a = []; if (isArraylike(e)) for (; i < o; i++)null != (r = t(e[i], i, n)) && a.push(r); else for (i in e) null != (r = t(e[i], i, n)) && a.push(r); return s.apply([], a) }, guid: 1, proxy: function (e, t) { var n, r, i; if ("string" == typeof t && (n = e[t], t = e, e = n), m.isFunction(e)) return r = a.call(arguments, 2), (i = function () { return e.apply(t || this, r.concat(a.call(arguments))) }).guid = e.guid = e.guid || m.guid++, i }, now: Date.now, support: h }), m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function (e, t) { c["[object " + t + "]"] = t.toLowerCase() }); var b = function (e) { var t, n, r, i, o, a, s, l, u, c, d, f, h, p, m, g, v, y, _, b = "sizzle" + 1 * new Date, w = e.document, x = 0, C = 0, S = createCache(), k = createCache(), T = createCache(), L = function (e, t) { return e === t && (d = !0), 0 }, M = 1 << 31, E = {}.hasOwnProperty, A = [], P = A.pop, R = A.push, O = A.push, D = A.slice, F = function (e, t) { for (var n = 0, r = e.length; n < r; n++)if (e[n] === t) return n; return -1 }, I = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", N = "[\\x20\\t\\r\\n\\f]", $ = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", B = $.replace("w", "w#"), z = "\\[" + N + "*(" + $ + ")(?:" + N + "*([*^$|!~]?=)" + N + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + B + "))|)" + N + "*\\]", j = ":(" + $ + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + z + ")*)|.*)\\)|)", U = new RegExp(N + "+", "g"), q = new RegExp("^" + N + "+|((?:^|[^\\\\])(?:\\\\.)*)" + N + "+$", "g"), H = new RegExp("^" + N + "*," + N + "*"), V = new RegExp("^" + N + "*([>+~]|" + N + ")" + N + "*"), G = new RegExp("=" + N + "*([^\\]'\"]*?)" + N + "*\\]", "g"), W = new RegExp(j), Y = new RegExp("^" + B + "$"), Z = { ID: new RegExp("^#(" + $ + ")"), CLASS: new RegExp("^\\.(" + $ + ")"), TAG: new RegExp("^(" + $.replace("w", "w*") + ")"), ATTR: new RegExp("^" + z), PSEUDO: new RegExp("^" + j), CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + N + "*(even|odd|(([+-]|)(\\d*)n|)" + N + "*(?:([+-]|)" + N + "*(\\d+)|))" + N + "*\\)|)", "i"), bool: new RegExp("^(?:" + I + ")$", "i"), needsContext: new RegExp("^" + N + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + N + "*((?:-\\d)?\\d*)" + N + "*\\)|)(?=[^-]|$)", "i") }, K = /^(?:input|select|textarea|button)$/i, X = /^h\d$/i, J = /^[^{]+\{\s*\[native \w/, Q = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, ee = /[+~]/, te = /'|\\/g, ne = new RegExp("\\\\([\\da-f]{1,6}" + N + "?|(" + N + ")|.)", "ig"), re = function (e, t, n) { var r = "0x" + t - 65536; return r != r || n ? t : r < 0 ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, 1023 & r | 56320) }, ie = function () { f() }; try { O.apply(A = D.call(w.childNodes), w.childNodes), A[w.childNodes.length].nodeType } catch (e) { O = { apply: A.length ? function (e, t) { R.apply(e, D.call(t)) } : function (e, t) { for (var n = e.length, r = 0; e[n++] = t[r++];); e.length = n - 1 } } } function Sizzle(e, t, r, i) { var o, s, u, c, d, p, v, y, x, C; if ((t ? t.ownerDocument || t : w) !== h && f(t), t = t || h, r = r || [], c = t.nodeType, "string" != typeof e || !e || 1 !== c && 9 !== c && 11 !== c) return r; if (!i && m) { if (11 !== c && (o = Q.exec(e))) if (u = o[1]) { if (9 === c) { if (!(s = t.getElementById(u)) || !s.parentNode) return r; if (s.id === u) return r.push(s), r } else if (t.ownerDocument && (s = t.ownerDocument.getElementById(u)) && _(t, s) && s.id === u) return r.push(s), r } else { if (o[2]) return O.apply(r, t.getElementsByTagName(e)), r; if ((u = o[3]) && n.getElementsByClassName) return O.apply(r, t.getElementsByClassName(u)), r } if (n.qsa && (!g || !g.test(e))) { if (y = v = b, x = t, C = 1 !== c && e, 1 === c && "object" !== t.nodeName.toLowerCase()) { for (p = a(e), (v = t.getAttribute("id")) ? y = v.replace(te, "\\$&") : t.setAttribute("id", y), y = "[id='" + y + "'] ", d = p.length; d--;)p[d] = y + toSelector(p[d]); x = ee.test(e) && testContext(t.parentNode) || t, C = p.join(",") } if (C) try { return O.apply(r, x.querySelectorAll(C)), r } catch (e) { } finally { v || t.removeAttribute("id") } } } return l(e.replace(q, "$1"), t, r, i) } function createCache() { var e = []; return function cache(t, n) { return e.push(t + " ") > r.cacheLength && delete cache[e.shift()], cache[t + " "] = n } } function markFunction(e) { return e[b] = !0, e } function assert(e) { var t = h.createElement("div"); try { return !!e(t) } catch (e) { return !1 } finally { t.parentNode && t.parentNode.removeChild(t), t = null } } function addHandle(e, t) { for (var n = e.split("|"), i = e.length; i--;)r.attrHandle[n[i]] = t } function siblingCheck(e, t) { var n = t && e, r = n && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || M) - (~e.sourceIndex || M); if (r) return r; if (n) for (; n = n.nextSibling;)if (n === t) return -1; return e ? 1 : -1 } function createInputPseudo(e) { return function (t) { return "input" === t.nodeName.toLowerCase() && t.type === e } } function createButtonPseudo(e) { return function (t) { var n = t.nodeName.toLowerCase(); return ("input" === n || "button" === n) && t.type === e } } function createPositionalPseudo(e) { return markFunction(function (t) { return t = +t, markFunction(function (n, r) { for (var i, o = e([], n.length, t), a = o.length; a--;)n[i = o[a]] && (n[i] = !(r[i] = n[i])) }) }) } function testContext(e) { return e && void 0 !== e.getElementsByTagName && e } for (t in n = Sizzle.support = {}, o = Sizzle.isXML = function (e) { var t = e && (e.ownerDocument || e).documentElement; return !!t && "HTML" !== t.nodeName }, f = Sizzle.setDocument = function (e) { var t, i, a = e ? e.ownerDocument || e : w; return a !== h && 9 === a.nodeType && a.documentElement ? (h = a, p = a.documentElement, (i = a.defaultView) && i !== i.top && (i.addEventListener ? i.addEventListener("unload", ie, !1) : i.attachEvent && i.attachEvent("onunload", ie)), m = !o(a), n.attributes = assert(function (e) { return e.className = "i", !e.getAttribute("className") }), n.getElementsByTagName = assert(function (e) { return e.appendChild(a.createComment("")), !e.getElementsByTagName("*").length }), n.getElementsByClassName = J.test(a.getElementsByClassName), n.getById = assert(function (e) { return p.appendChild(e).id = b, !a.getElementsByName || !a.getElementsByName(b).length }), n.getById ? (r.find.ID = function (e, t) { if (void 0 !== t.getElementById && m) { var n = t.getElementById(e); return n && n.parentNode ? [n] : [] } }, r.filter.ID = function (e) { var t = e.replace(ne, re); return function (e) { return e.getAttribute("id") === t } }) : (delete r.find.ID, r.filter.ID = function (e) { var t = e.replace(ne, re); return function (e) { var n = void 0 !== e.getAttributeNode && e.getAttributeNode("id"); return n && n.value === t } }), r.find.TAG = n.getElementsByTagName ? function (e, t) { return void 0 !== t.getElementsByTagName ? t.getElementsByTagName(e) : n.qsa ? t.querySelectorAll(e) : void 0 } : function (e, t) { var n, r = [], i = 0, o = t.getElementsByTagName(e); if ("*" === e) { for (; n = o[i++];)1 === n.nodeType && r.push(n); return r } return o }, r.find.CLASS = n.getElementsByClassName && function (e, t) { if (m) return t.getElementsByClassName(e) }, v = [], g = [], (n.qsa = J.test(a.querySelectorAll)) && (assert(function (e) { p.appendChild(e).innerHTML = "<a id='" + b + "'></a><select id='" + b + "-\f]' msallowcapture=''><option selected=''></option></select>", e.querySelectorAll("[msallowcapture^='']").length && g.push("[*^$]=" + N + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || g.push("\\[" + N + "*(?:value|" + I + ")"), e.querySelectorAll("[id~=" + b + "-]").length || g.push("~="), e.querySelectorAll(":checked").length || g.push(":checked"), e.querySelectorAll("a#" + b + "+*").length || g.push(".#.+[+~]") }), assert(function (e) { var t = a.createElement("input"); t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && g.push("name" + N + "*[*^$|!~]?="), e.querySelectorAll(":enabled").length || g.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), g.push(",.*:") })), (n.matchesSelector = J.test(y = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.oMatchesSelector || p.msMatchesSelector)) && assert(function (e) { n.disconnectedMatch = y.call(e, "div"), y.call(e, "[s!='']:x"), v.push("!=", j) }), g = g.length && new RegExp(g.join("|")), v = v.length && new RegExp(v.join("|")), t = J.test(p.compareDocumentPosition), _ = t || J.test(p.contains) ? function (e, t) { var n = 9 === e.nodeType ? e.documentElement : e, r = t && t.parentNode; return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r))) } : function (e, t) { if (t) for (; t = t.parentNode;)if (t === e) return !0; return !1 }, L = t ? function (e, t) { if (e === t) return d = !0, 0; var r = !e.compareDocumentPosition - !t.compareDocumentPosition; return r || (1 & (r = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1) || !n.sortDetached && t.compareDocumentPosition(e) === r ? e === a || e.ownerDocument === w && _(w, e) ? -1 : t === a || t.ownerDocument === w && _(w, t) ? 1 : c ? F(c, e) - F(c, t) : 0 : 4 & r ? -1 : 1) } : function (e, t) { if (e === t) return d = !0, 0; var n, r = 0, i = e.parentNode, o = t.parentNode, s = [e], l = [t]; if (!i || !o) return e === a ? -1 : t === a ? 1 : i ? -1 : o ? 1 : c ? F(c, e) - F(c, t) : 0; if (i === o) return siblingCheck(e, t); for (n = e; n = n.parentNode;)s.unshift(n); for (n = t; n = n.parentNode;)l.unshift(n); for (; s[r] === l[r];)r++; return r ? siblingCheck(s[r], l[r]) : s[r] === w ? -1 : l[r] === w ? 1 : 0 }, a) : h }, Sizzle.matches = function (e, t) { return Sizzle(e, null, null, t) }, Sizzle.matchesSelector = function (e, t) { if ((e.ownerDocument || e) !== h && f(e), t = t.replace(G, "='$1']"), n.matchesSelector && m && (!v || !v.test(t)) && (!g || !g.test(t))) try { var r = y.call(e, t); if (r || n.disconnectedMatch || e.document && 11 !== e.document.nodeType) return r } catch (e) { } return Sizzle(t, h, null, [e]).length > 0 }, Sizzle.contains = function (e, t) { return (e.ownerDocument || e) !== h && f(e), _(e, t) }, Sizzle.attr = function (e, t) { (e.ownerDocument || e) !== h && f(e); var i = r.attrHandle[t.toLowerCase()], o = i && E.call(r.attrHandle, t.toLowerCase()) ? i(e, t, !m) : void 0; return void 0 !== o ? o : n.attributes || !m ? e.getAttribute(t) : (o = e.getAttributeNode(t)) && o.specified ? o.value : null }, Sizzle.error = function (e) { throw new Error("Syntax error, unrecognized expression: " + e) }, Sizzle.uniqueSort = function (e) { var t, r = [], i = 0, o = 0; if (d = !n.detectDuplicates, c = !n.sortStable && e.slice(0), e.sort(L), d) { for (; t = e[o++];)t === e[o] && (i = r.push(o)); for (; i--;)e.splice(r[i], 1) } return c = null, e }, i = Sizzle.getText = function (e) { var t, n = "", r = 0, o = e.nodeType; if (o) { if (1 === o || 9 === o || 11 === o) { if ("string" == typeof e.textContent) return e.textContent; for (e = e.firstChild; e; e = e.nextSibling)n += i(e) } else if (3 === o || 4 === o) return e.nodeValue } else for (; t = e[r++];)n += i(t); return n }, (r = Sizzle.selectors = { cacheLength: 50, createPseudo: markFunction, match: Z, attrHandle: {}, find: {}, relative: { ">": { dir: "parentNode", first: !0 }, " ": { dir: "parentNode" }, "+": { dir: "previousSibling", first: !0 }, "~": { dir: "previousSibling" } }, preFilter: { ATTR: function (e) { return e[1] = e[1].replace(ne, re), e[3] = (e[3] || e[4] || e[5] || "").replace(ne, re), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4) }, CHILD: function (e) { return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || Sizzle.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && Sizzle.error(e[0]), e }, PSEUDO: function (e) { var t, n = !e[6] && e[2]; return Z.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : n && W.test(n) && (t = a(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3)) } }, filter: { TAG: function (e) { var t = e.replace(ne, re).toLowerCase(); return "*" === e ? function () { return !0 } : function (e) { return e.nodeName && e.nodeName.toLowerCase() === t } }, CLASS: function (e) { var t = S[e + " "]; return t || (t = new RegExp("(^|" + N + ")" + e + "(" + N + "|$)")) && S(e, function (e) { return t.test("string" == typeof e.className && e.className || void 0 !== e.getAttribute && e.getAttribute("class") || "") }) }, ATTR: function (e, t, n) { return function (r) { var i = Sizzle.attr(r, e); return null == i ? "!=" === t : !t || (i += "", "=" === t ? i === n : "!=" === t ? i !== n : "^=" === t ? n && 0 === i.indexOf(n) : "*=" === t ? n && i.indexOf(n) > -1 : "$=" === t ? n && i.slice(-n.length) === n : "~=" === t ? (" " + i.replace(U, " ") + " ").indexOf(n) > -1 : "|=" === t && (i === n || i.slice(0, n.length + 1) === n + "-")) } }, CHILD: function (e, t, n, r, i) { var o = "nth" !== e.slice(0, 3), a = "last" !== e.slice(-4), s = "of-type" === t; return 1 === r && 0 === i ? function (e) { return !!e.parentNode } : function (t, n, l) { var u, c, d, f, h, p, m = o !== a ? "nextSibling" : "previousSibling", g = t.parentNode, v = s && t.nodeName.toLowerCase(), y = !l && !s; if (g) { if (o) { for (; m;) { for (d = t; d = d[m];)if (s ? d.nodeName.toLowerCase() === v : 1 === d.nodeType) return !1; p = m = "only" === e && !p && "nextSibling" } return !0 } if (p = [a ? g.firstChild : g.lastChild], a && y) { for (h = (u = (c = g[b] || (g[b] = {}))[e] || [])[0] === x && u[1], f = u[0] === x && u[2], d = h && g.childNodes[h]; d = ++h && d && d[m] || (f = h = 0) || p.pop();)if (1 === d.nodeType && ++f && d === t) { c[e] = [x, h, f]; break } } else if (y && (u = (t[b] || (t[b] = {}))[e]) && u[0] === x) f = u[1]; else for (; (d = ++h && d && d[m] || (f = h = 0) || p.pop()) && ((s ? d.nodeName.toLowerCase() !== v : 1 !== d.nodeType) || !++f || (y && ((d[b] || (d[b] = {}))[e] = [x, f]), d !== t));); return (f -= i) === r || f % r == 0 && f / r >= 0 } } }, PSEUDO: function (e, t) { var n, i = r.pseudos[e] || r.setFilters[e.toLowerCase()] || Sizzle.error("unsupported pseudo: " + e); return i[b] ? i(t) : i.length > 1 ? (n = [e, e, "", t], r.setFilters.hasOwnProperty(e.toLowerCase()) ? markFunction(function (e, n) { for (var r, o = i(e, t), a = o.length; a--;)e[r = F(e, o[a])] = !(n[r] = o[a]) }) : function (e) { return i(e, 0, n) }) : i } }, pseudos: { not: markFunction(function (e) { var t = [], n = [], r = s(e.replace(q, "$1")); return r[b] ? markFunction(function (e, t, n, i) { for (var o, a = r(e, null, i, []), s = e.length; s--;)(o = a[s]) && (e[s] = !(t[s] = o)) }) : function (e, i, o) { return t[0] = e, r(t, null, o, n), t[0] = null, !n.pop() } }), has: markFunction(function (e) { return function (t) { return Sizzle(e, t).length > 0 } }), contains: markFunction(function (e) { return e = e.replace(ne, re), function (t) { return (t.textContent || t.innerText || i(t)).indexOf(e) > -1 } }), lang: markFunction(function (e) { return Y.test(e || "") || Sizzle.error("unsupported lang: " + e), e = e.replace(ne, re).toLowerCase(), function (t) { var n; do { if (n = m ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return (n = n.toLowerCase()) === e || 0 === n.indexOf(e + "-") } while ((t = t.parentNode) && 1 === t.nodeType); return !1 } }), target: function (t) { var n = e.location && e.location.hash; return n && n.slice(1) === t.id }, root: function (e) { return e === p }, focus: function (e) { return e === h.activeElement && (!h.hasFocus || h.hasFocus()) && !!(e.type || e.href || ~e.tabIndex) }, enabled: function (e) { return !1 === e.disabled }, disabled: function (e) { return !0 === e.disabled }, checked: function (e) { var t = e.nodeName.toLowerCase(); return "input" === t && !!e.checked || "option" === t && !!e.selected }, selected: function (e) { return e.parentNode && e.parentNode.selectedIndex, !0 === e.selected }, empty: function (e) { for (e = e.firstChild; e; e = e.nextSibling)if (e.nodeType < 6) return !1; return !0 }, parent: function (e) { return !r.pseudos.empty(e) }, header: function (e) { return X.test(e.nodeName) }, input: function (e) { return K.test(e.nodeName) }, button: function (e) { var t = e.nodeName.toLowerCase(); return "input" === t && "button" === e.type || "button" === t }, text: function (e) { var t; return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase()) }, first: createPositionalPseudo(function () { return [0] }), last: createPositionalPseudo(function (e, t) { return [t - 1] }), eq: createPositionalPseudo(function (e, t, n) { return [n < 0 ? n + t : n] }), even: createPositionalPseudo(function (e, t) { for (var n = 0; n < t; n += 2)e.push(n); return e }), odd: createPositionalPseudo(function (e, t) { for (var n = 1; n < t; n += 2)e.push(n); return e }), lt: createPositionalPseudo(function (e, t, n) { for (var r = n < 0 ? n + t : n; --r >= 0;)e.push(r); return e }), gt: createPositionalPseudo(function (e, t, n) { for (var r = n < 0 ? n + t : n; ++r < t;)e.push(r); return e }) } }).pseudos.nth = r.pseudos.eq, { radio: !0, checkbox: !0, file: !0, password: !0, image: !0 }) r.pseudos[t] = createInputPseudo(t); for (t in { submit: !0, reset: !0 }) r.pseudos[t] = createButtonPseudo(t); function setFilters() { } function toSelector(e) { for (var t = 0, n = e.length, r = ""; t < n; t++)r += e[t].value; return r } function addCombinator(e, t, n) { var r = t.dir, i = n && "parentNode" === r, o = C++; return t.first ? function (t, n, o) { for (; t = t[r];)if (1 === t.nodeType || i) return e(t, n, o) } : function (t, n, a) { var s, l, u = [x, o]; if (a) { for (; t = t[r];)if ((1 === t.nodeType || i) && e(t, n, a)) return !0 } else for (; t = t[r];)if (1 === t.nodeType || i) { if ((s = (l = t[b] || (t[b] = {}))[r]) && s[0] === x && s[1] === o) return u[2] = s[2]; if (l[r] = u, u[2] = e(t, n, a)) return !0 } } } function elementMatcher(e) { return e.length > 1 ? function (t, n, r) { for (var i = e.length; i--;)if (!e[i](t, n, r)) return !1; return !0 } : e[0] } function condense(e, t, n, r, i) { for (var o, a = [], s = 0, l = e.length, u = null != t; s < l; s++)(o = e[s]) && (n && !n(o, r, i) || (a.push(o), u && t.push(s))); return a } function setMatcher(e, t, n, r, i, o) { return r && !r[b] && (r = setMatcher(r)), i && !i[b] && (i = setMatcher(i, o)), markFunction(function (o, a, s, l) { var u, c, d, f = [], h = [], p = a.length, m = o || function multipleContexts(e, t, n) { for (var r = 0, i = t.length; r < i; r++)Sizzle(e, t[r], n); return n }(t || "*", s.nodeType ? [s] : s, []), g = !e || !o && t ? m : condense(m, f, e, s, l), v = n ? i || (o ? e : p || r) ? [] : a : g; if (n && n(g, v, s, l), r) for (u = condense(v, h), r(u, [], s, l), c = u.length; c--;)(d = u[c]) && (v[h[c]] = !(g[h[c]] = d)); if (o) { if (i || e) { if (i) { for (u = [], c = v.length; c--;)(d = v[c]) && u.push(g[c] = d); i(null, v = [], u, l) } for (c = v.length; c--;)(d = v[c]) && (u = i ? F(o, d) : f[c]) > -1 && (o[u] = !(a[u] = d)) } } else v = condense(v === a ? v.splice(p, v.length) : v), i ? i(null, a, v, l) : O.apply(a, v) }) } function matcherFromTokens(e) { for (var t, n, i, o = e.length, a = r.relative[e[0].type], s = a || r.relative[" "], l = a ? 1 : 0, c = addCombinator(function (e) { return e === t }, s, !0), d = addCombinator(function (e) { return F(t, e) > -1 }, s, !0), f = [function (e, n, r) { var i = !a && (r || n !== u) || ((t = n).nodeType ? c(e, n, r) : d(e, n, r)); return t = null, i }]; l < o; l++)if (n = r.relative[e[l].type]) f = [addCombinator(elementMatcher(f), n)]; else { if ((n = r.filter[e[l].type].apply(null, e[l].matches))[b]) { for (i = ++l; i < o && !r.relative[e[i].type]; i++); return setMatcher(l > 1 && elementMatcher(f), l > 1 && toSelector(e.slice(0, l - 1).concat({ value: " " === e[l - 2].type ? "*" : "" })).replace(q, "$1"), n, l < i && matcherFromTokens(e.slice(l, i)), i < o && matcherFromTokens(e = e.slice(i)), i < o && toSelector(e)) } f.push(n) } return elementMatcher(f) } return setFilters.prototype = r.filters = r.pseudos, r.setFilters = new setFilters, a = Sizzle.tokenize = function (e, t) { var n, i, o, a, s, l, u, c = k[e + " "]; if (c) return t ? 0 : c.slice(0); for (s = e, l = [], u = r.preFilter; s;) { for (a in n && !(i = H.exec(s)) || (i && (s = s.slice(i[0].length) || s), l.push(o = [])), n = !1, (i = V.exec(s)) && (n = i.shift(), o.push({ value: n, type: i[0].replace(q, " ") }), s = s.slice(n.length)), r.filter) !(i = Z[a].exec(s)) || u[a] && !(i = u[a](i)) || (n = i.shift(), o.push({ value: n, type: a, matches: i }), s = s.slice(n.length)); if (!n) break } return t ? s.length : s ? Sizzle.error(e) : k(e, l).slice(0) }, s = Sizzle.compile = function (e, t) { var n, i = [], o = [], s = T[e + " "]; if (!s) { for (t || (t = a(e)), n = t.length; n--;)(s = matcherFromTokens(t[n]))[b] ? i.push(s) : o.push(s); (s = T(e, function matcherFromGroupMatchers(e, t) { var n = t.length > 0, i = e.length > 0, o = function (o, a, s, l, c) { var d, f, p, m = 0, g = "0", v = o && [], y = [], _ = u, b = o || i && r.find.TAG("*", c), w = x += null == _ ? 1 : Math.random() || .1, C = b.length; for (c && (u = a !== h && a); g !== C && null != (d = b[g]); g++) { if (i && d) { for (f = 0; p = e[f++];)if (p(d, a, s)) { l.push(d); break } c && (x = w) } n && ((d = !p && d) && m--, o && v.push(d)) } if (m += g, n && g !== m) { for (f = 0; p = t[f++];)p(v, y, a, s); if (o) { if (m > 0) for (; g--;)v[g] || y[g] || (y[g] = P.call(l)); y = condense(y) } O.apply(l, y), c && !o && y.length > 0 && m + t.length > 1 && Sizzle.uniqueSort(l) } return c && (x = w, u = _), v }; return n ? markFunction(o) : o }(o, i))).selector = e } return s }, l = Sizzle.select = function (e, t, i, o) { var l, u, c, d, f, h = "function" == typeof e && e, p = !o && a(e = h.selector || e); if (i = i || [], 1 === p.length) { if ((u = p[0] = p[0].slice(0)).length > 2 && "ID" === (c = u[0]).type && n.getById && 9 === t.nodeType && m && r.relative[u[1].type]) { if (!(t = (r.find.ID(c.matches[0].replace(ne, re), t) || [])[0])) return i; h && (t = t.parentNode), e = e.slice(u.shift().value.length) } for (l = Z.needsContext.test(e) ? 0 : u.length; l-- && (c = u[l], !r.relative[d = c.type]);)if ((f = r.find[d]) && (o = f(c.matches[0].replace(ne, re), ee.test(u[0].type) && testContext(t.parentNode) || t))) { if (u.splice(l, 1), !(e = o.length && toSelector(u))) return O.apply(i, o), i; break } } return (h || s(e, p))(o, t, !m, i, ee.test(e) && testContext(t.parentNode) || t), i }, n.sortStable = b.split("").sort(L).join("") === b, n.detectDuplicates = !!d, f(), n.sortDetached = assert(function (e) { return 1 & e.compareDocumentPosition(h.createElement("div")) }), assert(function (e) { return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href") }) || addHandle("type|href|height|width", function (e, t, n) { if (!n) return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2) }), n.attributes && assert(function (e) { return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value") }) || addHandle("value", function (e, t, n) { if (!n && "input" === e.nodeName.toLowerCase()) return e.defaultValue }), assert(function (e) { return null == e.getAttribute("disabled") }) || addHandle(I, function (e, t, n) { var r; if (!n) return !0 === e[t] ? t.toLowerCase() : (r = e.getAttributeNode(t)) && r.specified ? r.value : null }), Sizzle }(n); m.find = b, m.expr = b.selectors, m.expr[":"] = m.expr.pseudos, m.unique = b.uniqueSort, m.text = b.getText, m.isXMLDoc = b.isXML, m.contains = b.contains; var w = m.expr.match.needsContext, x = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, C = /^.[^:#\[\.,]*$/; function winnow(e, t, n) { if (m.isFunction(t)) return m.grep(e, function (e, r) { return !!t.call(e, r, e) !== n }); if (t.nodeType) return m.grep(e, function (e) { return e === t !== n }); if ("string" == typeof t) { if (C.test(t)) return m.filter(t, e, n); t = m.filter(t, e) } return m.grep(e, function (e) { return u.call(t, e) >= 0 !== n }) } m.filter = function (e, t, n) { var r = t[0]; return n && (e = ":not(" + e + ")"), 1 === t.length && 1 === r.nodeType ? m.find.matchesSelector(r, e) ? [r] : [] : m.find.matches(e, m.grep(t, function (e) { return 1 === e.nodeType })) }, m.fn.extend({ find: function (e) { var t, n = this.length, r = [], i = this; if ("string" != typeof e) return this.pushStack(m(e).filter(function () { for (t = 0; t < n; t++)if (m.contains(i[t], this)) return !0 })); for (t = 0; t < n; t++)m.find(e, i[t], r); return (r = this.pushStack(n > 1 ? m.unique(r) : r)).selector = this.selector ? this.selector + " " + e : e, r }, filter: function (e) { return this.pushStack(winnow(this, e || [], !1)) }, not: function (e) { return this.pushStack(winnow(this, e || [], !0)) }, is: function (e) { return !!winnow(this, "string" == typeof e && w.test(e) ? m(e) : e || [], !1).length } }); var S, k = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/; (m.fn.init = function (e, t) { var n, r; if (!e) return this; if ("string" == typeof e) { if (!(n = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [null, e, null] : k.exec(e)) || !n[1] && t) return !t || t.jquery ? (t || S).find(e) : this.constructor(t).find(e); if (n[1]) { if (t = t instanceof m ? t[0] : t, m.merge(this, m.parseHTML(n[1], t && t.nodeType ? t.ownerDocument || t : p, !0)), x.test(n[1]) && m.isPlainObject(t)) for (n in t) m.isFunction(this[n]) ? this[n](t[n]) : this.attr(n, t[n]); return this } return (r = p.getElementById(n[2])) && r.parentNode && (this.length = 1, this[0] = r), this.context = p, this.selector = e, this } return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : m.isFunction(e) ? void 0 !== S.ready ? S.ready(e) : e(m) : (void 0 !== e.selector && (this.selector = e.selector, this.context = e.context), m.makeArray(e, this)) }).prototype = m.fn, S = m(p); var T = /^(?:parents|prev(?:Until|All))/, L = { children: !0, contents: !0, next: !0, prev: !0 }; function sibling(e, t) { for (; (e = e[t]) && 1 !== e.nodeType;); return e } m.extend({ dir: function (e, t, n) { for (var r = [], i = void 0 !== n; (e = e[t]) && 9 !== e.nodeType;)if (1 === e.nodeType) { if (i && m(e).is(n)) break; r.push(e) } return r }, sibling: function (e, t) { for (var n = []; e; e = e.nextSibling)1 === e.nodeType && e !== t && n.push(e); return n } }), m.fn.extend({ has: function (e) { var t = m(e, this), n = t.length; return this.filter(function () { for (var e = 0; e < n; e++)if (m.contains(this, t[e])) return !0 }) }, closest: function (e, t) { for (var n, r = 0, i = this.length, o = [], a = w.test(e) || "string" != typeof e ? m(e, t || this.context) : 0; r < i; r++)for (n = this[r]; n && n !== t; n = n.parentNode)if (n.nodeType < 11 && (a ? a.index(n) > -1 : 1 === n.nodeType && m.find.matchesSelector(n, e))) { o.push(n); break } return this.pushStack(o.length > 1 ? m.unique(o) : o) }, index: function (e) { return e ? "string" == typeof e ? u.call(m(e), this[0]) : u.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1 }, add: function (e, t) { return this.pushStack(m.unique(m.merge(this.get(), m(e, t)))) }, addBack: function (e) { return this.add(null == e ? this.prevObject : this.prevObject.filter(e)) } }), m.each({ parent: function (e) { var t = e.parentNode; return t && 11 !== t.nodeType ? t : null }, parents: function (e) { return m.dir(e, "parentNode") }, parentsUntil: function (e, t, n) { return m.dir(e, "parentNode", n) }, next: function (e) { return sibling(e, "nextSibling") }, prev: function (e) { return sibling(e, "previousSibling") }, nextAll: function (e) { return m.dir(e, "nextSibling") }, prevAll: function (e) { return m.dir(e, "previousSibling") }, nextUntil: function (e, t, n) { return m.dir(e, "nextSibling", n) }, prevUntil: function (e, t, n) { return m.dir(e, "previousSibling", n) }, siblings: function (e) { return m.sibling((e.parentNode || {}).firstChild, e) }, children: function (e) { return m.sibling(e.firstChild) }, contents: function (e) { return e.contentDocument || m.merge([], e.childNodes) } }, function (e, t) { m.fn[e] = function (n, r) { var i = m.map(this, t, n); return "Until" !== e.slice(-5) && (r = n), r && "string" == typeof r && (i = m.filter(r, i)), this.length > 1 && (L[e] || m.unique(i), T.test(e) && i.reverse()), this.pushStack(i) } }); var M, E = /\S+/g, A = {}; function completed() { p.removeEventListener("DOMContentLoaded", completed, !1), n.removeEventListener("load", completed, !1), m.ready() } m.Callbacks = function (e) { var t, n, r, i, o, a, s = [], l = !(e = "string" == typeof e ? A[e] || function createOptions(e) { var t = A[e] = {}; return m.each(e.match(E) || [], function (e, n) { t[n] = !0 }), t }(e) : m.extend({}, e)).once && [], u = function (d) { for (t = e.memory && d, n = !0, a = i || 0, i = 0, o = s.length, r = !0; s && a < o; a++)if (!1 === s[a].apply(d[0], d[1]) && e.stopOnFalse) { t = !1; break } r = !1, s && (l ? l.length && u(l.shift()) : t ? s = [] : c.disable()) }, c = { add: function () { if (s) { var n = s.length; !function add(t) { m.each(t, function (t, n) { var r = m.type(n); "function" === r ? e.unique && c.has(n) || s.push(n) : n && n.length && "string" !== r && add(n) }) }(arguments), r ? o = s.length : t && (i = n, u(t)) } return this }, remove: function () { return s && m.each(arguments, function (e, t) { for (var n; (n = m.inArray(t, s, n)) > -1;)s.splice(n, 1), r && (n <= o && o--, n <= a && a--) }), this }, has: function (e) { return e ? m.inArray(e, s) > -1 : !(!s || !s.length) }, empty: function () { return s = [], o = 0, this }, disable: function () { return s = l = t = void 0, this }, disabled: function () { return !s }, lock: function () { return l = void 0, t || c.disable(), this }, locked: function () { return !l }, fireWith: function (e, t) { return !s || n && !l || (t = [e, (t = t || []).slice ? t.slice() : t], r ? l.push(t) : u(t)), this }, fire: function () { return c.fireWith(this, arguments), this }, fired: function () { return !!n } }; return c }, m.extend({ Deferred: function (e) { var t = [["resolve", "done", m.Callbacks("once memory"), "resolved"], ["reject", "fail", m.Callbacks("once memory"), "rejected"], ["notify", "progress", m.Callbacks("memory")]], n = "pending", r = { state: function () { return n }, always: function () { return i.done(arguments).fail(arguments), this }, then: function () { var e = arguments; return m.Deferred(function (n) { m.each(t, function (t, o) { var a = m.isFunction(e[t]) && e[t]; i[o[1]](function () { var e = a && a.apply(this, arguments); e && m.isFunction(e.promise) ? e.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[o[0] + "With"](this === r ? n.promise() : this, a ? [e] : arguments) }) }), e = null }).promise() }, promise: function (e) { return null != e ? m.extend(e, r) : r } }, i = {}; return r.pipe = r.then, m.each(t, function (e, o) { var a = o[2], s = o[3]; r[o[1]] = a.add, s && a.add(function () { n = s }, t[1 ^ e][2].disable, t[2][2].lock), i[o[0]] = function () { return i[o[0] + "With"](this === i ? r : this, arguments), this }, i[o[0] + "With"] = a.fireWith }), r.promise(i), e && e.call(i, i), i }, when: function (e) { var t, n, r, i = 0, o = a.call(arguments), s = o.length, l = 1 !== s || e && m.isFunction(e.promise) ? s : 0, u = 1 === l ? e : m.Deferred(), c = function (e, n, r) { return function (i) { n[e] = this, r[e] = arguments.length > 1 ? a.call(arguments) : i, r === t ? u.notifyWith(n, r) : --l || u.resolveWith(n, r) } }; if (s > 1) for (t = new Array(s), n = new Array(s), r = new Array(s); i < s; i++)o[i] && m.isFunction(o[i].promise) ? o[i].promise().done(c(i, r, o)).fail(u.reject).progress(c(i, n, t)) : --l; return l || u.resolveWith(r, o), u.promise() } }), m.fn.ready = function (e) { return m.ready.promise().done(e), this }, m.extend({ isReady: !1, readyWait: 1, holdReady: function (e) { e ? m.readyWait++ : m.ready(!0) }, ready: function (e) { (!0 === e ? --m.readyWait : m.isReady) || (m.isReady = !0, !0 !== e && --m.readyWait > 0 || (M.resolveWith(p, [m]), m.fn.triggerHandler && (m(p).triggerHandler("ready"), m(p).off("ready")))) } }), m.ready.promise = function (e) { return M || (M = m.Deferred(), "complete" === p.readyState ? setTimeout(m.ready) : (p.addEventListener("DOMContentLoaded", completed, !1), n.addEventListener("load", completed, !1))), M.promise(e) }, m.ready.promise(); var P = m.access = function (e, t, n, r, i, o, a) { var s = 0, l = e.length, u = null == n; if ("object" === m.type(n)) for (s in i = !0, n) m.access(e, t, s, n[s], !0, o, a); else if (void 0 !== r && (i = !0, m.isFunction(r) || (a = !0), u && (a ? (t.call(e, r), t = null) : (u = t, t = function (e, t, n) { return u.call(m(e), n) })), t)) for (; s < l; s++)t(e[s], n, a ? r : r.call(e[s], s, t(e[s], n))); return i ? e : u ? t.call(e) : l ? t(e[0], n) : o }; function Data() { Object.defineProperty(this.cache = {}, 0, { get: function () { return {} } }), this.expando = m.expando + Data.uid++ } m.acceptData = function (e) { return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType }, Data.uid = 1, Data.accepts = m.acceptData, Data.prototype = { key: function (e) { if (!Data.accepts(e)) return 0; var t = {}, n = e[this.expando]; if (!n) { n = Data.uid++; try { t[this.expando] = { value: n }, Object.defineProperties(e, t) } catch (r) { t[this.expando] = n, m.extend(e, t) } } return this.cache[n] || (this.cache[n] = {}), n }, set: function (e, t, n) { var r, i = this.key(e), o = this.cache[i]; if ("string" == typeof t) o[t] = n; else if (m.isEmptyObject(o)) m.extend(this.cache[i], t); else for (r in t) o[r] = t[r]; return o }, get: function (e, t) { var n = this.cache[this.key(e)]; return void 0 === t ? n : n[t] }, access: function (e, t, n) { var r; return void 0 === t || t && "string" == typeof t && void 0 === n ? void 0 !== (r = this.get(e, t)) ? r : this.get(e, m.camelCase(t)) : (this.set(e, t, n), void 0 !== n ? n : t) }, remove: function (e, t) { var n, r, i, o = this.key(e), a = this.cache[o]; if (void 0 === t) this.cache[o] = {}; else { m.isArray(t) ? r = t.concat(t.map(m.camelCase)) : (i = m.camelCase(t), r = t in a ? [t, i] : (r = i) in a ? [r] : r.match(E) || []), n = r.length; for (; n--;)delete a[r[n]] } }, hasData: function (e) { return !m.isEmptyObject(this.cache[e[this.expando]] || {}) }, discard: function (e) { e[this.expando] && delete this.cache[e[this.expando]] } }; var R = new Data, O = new Data, D = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, F = /([A-Z])/g; function dataAttr(e, t, n) { var r; if (void 0 === n && 1 === e.nodeType) if (r = "data-" + t.replace(F, "-$1").toLowerCase(), "string" == typeof (n = e.getAttribute(r))) { try { n = "true" === n || "false" !== n && ("null" === n ? null : +n + "" === n ? +n : D.test(n) ? m.parseJSON(n) : n) } catch (e) { } O.set(e, t, n) } else n = void 0; return n } m.extend({ hasData: function (e) { return O.hasData(e) || R.hasData(e) }, data: function (e, t, n) { return O.access(e, t, n) }, removeData: function (e, t) { O.remove(e, t) }, _data: function (e, t, n) { return R.access(e, t, n) }, _removeData: function (e, t) { R.remove(e, t) } }), m.fn.extend({ data: function (e, t) { var n, r, i, o = this[0], a = o && o.attributes; if (void 0 === e) { if (this.length && (i = O.get(o), 1 === o.nodeType && !R.get(o, "hasDataAttrs"))) { for (n = a.length; n--;)a[n] && 0 === (r = a[n].name).indexOf("data-") && (r = m.camelCase(r.slice(5)), dataAttr(o, r, i[r])); R.set(o, "hasDataAttrs", !0) } return i } return "object" == typeof e ? this.each(function () { O.set(this, e) }) : P(this, function (t) { var n, r = m.camelCase(e); if (o && void 0 === t) return void 0 !== (n = O.get(o, e)) ? n : void 0 !== (n = O.get(o, r)) ? n : void 0 !== (n = dataAttr(o, r, void 0)) ? n : void 0; this.each(function () { var n = O.get(this, r); O.set(this, r, t), -1 !== e.indexOf("-") && void 0 !== n && O.set(this, e, t) }) }, null, t, arguments.length > 1, null, !0) }, removeData: function (e) { return this.each(function () { O.remove(this, e) }) } }), m.extend({ queue: function (e, t, n) { var r; if (e) return t = (t || "fx") + "queue", r = R.get(e, t), n && (!r || m.isArray(n) ? r = R.access(e, t, m.makeArray(n)) : r.push(n)), r || [] }, dequeue: function (e, t) { t = t || "fx"; var n = m.queue(e, t), r = n.length, i = n.shift(), o = m._queueHooks(e, t); "inprogress" === i && (i = n.shift(), r--), i && ("fx" === t && n.unshift("inprogress"), delete o.stop, i.call(e, function () { m.dequeue(e, t) }, o)), !r && o && o.empty.fire() }, _queueHooks: function (e, t) { var n = t + "queueHooks"; return R.get(e, n) || R.access(e, n, { empty: m.Callbacks("once memory").add(function () { R.remove(e, [t + "queue", n]) }) }) } }), m.fn.extend({ queue: function (e, t) { var n = 2; return "string" != typeof e && (t = e, e = "fx", n--), arguments.length < n ? m.queue(this[0], e) : void 0 === t ? this : this.each(function () { var n = m.queue(this, e, t); m._queueHooks(this, e), "fx" === e && "inprogress" !== n[0] && m.dequeue(this, e) }) }, dequeue: function (e) { return this.each(function () { m.dequeue(this, e) }) }, clearQueue: function (e) { return this.queue(e || "fx", []) }, promise: function (e, t) { var n, r = 1, i = m.Deferred(), o = this, a = this.length, s = function () { --r || i.resolveWith(o, [o]) }; for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; a--;)(n = R.get(o[a], e + "queueHooks")) && n.empty && (r++, n.empty.add(s)); return s(), i.promise(t) } }); var I, N, $ = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, B = ["Top", "Right", "Bottom", "Left"], z = function (e, t) { return e = t || e, "none" === m.css(e, "display") || !m.contains(e.ownerDocument, e) }, j = /^(?:checkbox|radio)$/i; I = p.createDocumentFragment().appendChild(p.createElement("div")), (N = p.createElement("input")).setAttribute("type", "radio"), N.setAttribute("checked", "checked"), N.setAttribute("name", "t"), I.appendChild(N), h.checkClone = I.cloneNode(!0).cloneNode(!0).lastChild.checked, I.innerHTML = "<textarea>x</textarea>", h.noCloneChecked = !!I.cloneNode(!0).lastChild.defaultValue; h.focusinBubbles = "onfocusin" in n; var U = /^key/, q = /^(?:mouse|pointer|contextmenu)|click/, H = /^(?:focusinfocus|focusoutblur)$/, V = /^([^.]*)(?:\.(.+)|)$/; function returnTrue() { return !0 } function returnFalse() { return !1 } function safeActiveElement() { try { return p.activeElement } catch (e) { } } m.event = { global: {}, add: function (e, t, n, r, i) { var o, a, s, l, u, c, d, f, h, p, g, v = R.get(e); if (v) for (n.handler && (n = (o = n).handler, i = o.selector), n.guid || (n.guid = m.guid++), (l = v.events) || (l = v.events = {}), (a = v.handle) || (a = v.handle = function (t) { return void 0 !== m && m.event.triggered !== t.type ? m.event.dispatch.apply(e, arguments) : void 0 }), u = (t = (t || "").match(E) || [""]).length; u--;)h = g = (s = V.exec(t[u]) || [])[1], p = (s[2] || "").split(".").sort(), h && (d = m.event.special[h] || {}, h = (i ? d.delegateType : d.bindType) || h, d = m.event.special[h] || {}, c = m.extend({ type: h, origType: g, data: r, handler: n, guid: n.guid, selector: i, needsContext: i && m.expr.match.needsContext.test(i), namespace: p.join(".") }, o), (f = l[h]) || ((f = l[h] = []).delegateCount = 0, d.setup && !1 !== d.setup.call(e, r, p, a) || e.addEventListener && e.addEventListener(h, a, !1)), d.add && (d.add.call(e, c), c.handler.guid || (c.handler.guid = n.guid)), i ? f.splice(f.delegateCount++, 0, c) : f.push(c), m.event.global[h] = !0) }, remove: function (e, t, n, r, i) { var o, a, s, l, u, c, d, f, h, p, g, v = R.hasData(e) && R.get(e); if (v && (l = v.events)) { for (u = (t = (t || "").match(E) || [""]).length; u--;)if (h = g = (s = V.exec(t[u]) || [])[1], p = (s[2] || "").split(".").sort(), h) { for (d = m.event.special[h] || {}, f = l[h = (r ? d.delegateType : d.bindType) || h] || [], s = s[2] && new RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)"), a = o = f.length; o--;)c = f[o], !i && g !== c.origType || n && n.guid !== c.guid || s && !s.test(c.namespace) || r && r !== c.selector && ("**" !== r || !c.selector) || (f.splice(o, 1), c.selector && f.delegateCount--, d.remove && d.remove.call(e, c)); a && !f.length && (d.teardown && !1 !== d.teardown.call(e, p, v.handle) || m.removeEvent(e, h, v.handle), delete l[h]) } else for (h in l) m.event.remove(e, h + t[u], n, r, !0); m.isEmptyObject(l) && (delete v.handle, R.remove(e, "events")) } }, trigger: function (e, t, r, i) { var o, a, s, l, u, c, d, h = [r || p], g = f.call(e, "type") ? e.type : e, v = f.call(e, "namespace") ? e.namespace.split(".") : []; if (a = s = r = r || p, 3 !== r.nodeType && 8 !== r.nodeType && !H.test(g + m.event.triggered) && (g.indexOf(".") >= 0 && (g = (v = g.split(".")).shift(), v.sort()), u = g.indexOf(":") < 0 && "on" + g, (e = e[m.expando] ? e : new m.Event(g, "object" == typeof e && e)).isTrigger = i ? 2 : 3, e.namespace = v.join("."), e.namespace_re = e.namespace ? new RegExp("(^|\\.)" + v.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, e.result = void 0, e.target || (e.target = r), t = null == t ? [e] : m.makeArray(t, [e]), d = m.event.special[g] || {}, i || !d.trigger || !1 !== d.trigger.apply(r, t))) { if (!i && !d.noBubble && !m.isWindow(r)) { for (l = d.delegateType || g, H.test(l + g) || (a = a.parentNode); a; a = a.parentNode)h.push(a), s = a; s === (r.ownerDocument || p) && h.push(s.defaultView || s.parentWindow || n) } for (o = 0; (a = h[o++]) && !e.isPropagationStopped();)e.type = o > 1 ? l : d.bindType || g, (c = (R.get(a, "events") || {})[e.type] && R.get(a, "handle")) && c.apply(a, t), (c = u && a[u]) && c.apply && m.acceptData(a) && (e.result = c.apply(a, t), !1 === e.result && e.preventDefault()); return e.type = g, i || e.isDefaultPrevented() || d._default && !1 !== d._default.apply(h.pop(), t) || !m.acceptData(r) || u && m.isFunction(r[g]) && !m.isWindow(r) && ((s = r[u]) && (r[u] = null), m.event.triggered = g, r[g](), m.event.triggered = void 0, s && (r[u] = s)), e.result } }, dispatch: function (e) { e = m.event.fix(e); var t, n, r, i, o, s, l = a.call(arguments), u = (R.get(this, "events") || {})[e.type] || [], c = m.event.special[e.type] || {}; if (l[0] = e, e.delegateTarget = this, !c.preDispatch || !1 !== c.preDispatch.call(this, e)) { for (s = m.event.handlers.call(this, e, u), t = 0; (i = s[t++]) && !e.isPropagationStopped();)for (e.currentTarget = i.elem, n = 0; (o = i.handlers[n++]) && !e.isImmediatePropagationStopped();)e.namespace_re && !e.namespace_re.test(o.namespace) || (e.handleObj = o, e.data = o.data, void 0 !== (r = ((m.event.special[o.origType] || {}).handle || o.handler).apply(i.elem, l)) && !1 === (e.result = r) && (e.preventDefault(), e.stopPropagation())); return c.postDispatch && c.postDispatch.call(this, e), e.result } }, handlers: function (e, t) { var n, r, i, o, a = [], s = t.delegateCount, l = e.target; if (s && l.nodeType && (!e.button || "click" !== e.type)) for (; l !== this; l = l.parentNode || this)if (!0 !== l.disabled || "click" !== e.type) { for (r = [], n = 0; n < s; n++)void 0 === r[i = (o = t[n]).selector + " "] && (r[i] = o.needsContext ? m(i, this).index(l) >= 0 : m.find(i, this, null, [l]).length), r[i] && r.push(o); r.length && a.push({ elem: l, handlers: r }) } return s < t.length && a.push({ elem: this, handlers: t.slice(s) }), a }, props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "), fixHooks: {}, keyHooks: { props: "char charCode key keyCode".split(" "), filter: function (e, t) { return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e } }, mouseHooks: { props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "), filter: function (e, t) { var n, r, i, o = t.button; return null == e.pageX && null != t.clientX && (r = (n = e.target.ownerDocument || p).documentElement, i = n.body, e.pageX = t.clientX + (r && r.scrollLeft || i && i.scrollLeft || 0) - (r && r.clientLeft || i && i.clientLeft || 0), e.pageY = t.clientY + (r && r.scrollTop || i && i.scrollTop || 0) - (r && r.clientTop || i && i.clientTop || 0)), e.which || void 0 === o || (e.which = 1 & o ? 1 : 2 & o ? 3 : 4 & o ? 2 : 0), e } }, fix: function (e) { if (e[m.expando]) return e; var t, n, r, i = e.type, o = e, a = this.fixHooks[i]; for (a || (this.fixHooks[i] = a = q.test(i) ? this.mouseHooks : U.test(i) ? this.keyHooks : {}), r = a.props ? this.props.concat(a.props) : this.props, e = new m.Event(o), t = r.length; t--;)e[n = r[t]] = o[n]; return e.target || (e.target = p), 3 === e.target.nodeType && (e.target = e.target.parentNode), a.filter ? a.filter(e, o) : e }, special: { load: { noBubble: !0 }, focus: { trigger: function () { if (this !== safeActiveElement() && this.focus) return this.focus(), !1 }, delegateType: "focusin" }, blur: { trigger: function () { if (this === safeActiveElement() && this.blur) return this.blur(), !1 }, delegateType: "focusout" }, click: { trigger: function () { if ("checkbox" === this.type && this.click && m.nodeName(this, "input")) return this.click(), !1 }, _default: function (e) { return m.nodeName(e.target, "a") } }, beforeunload: { postDispatch: function (e) { void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result) } } }, simulate: function (e, t, n, r) { var i = m.extend(new m.Event, n, { type: e, isSimulated: !0, originalEvent: {} }); r ? m.event.trigger(i, null, t) : m.event.dispatch.call(t, i), i.isDefaultPrevented() && n.preventDefault() } }, m.removeEvent = function (e, t, n) { e.removeEventListener && e.removeEventListener(t, n, !1) }, m.Event = function (e, t) { if (!(this instanceof m.Event)) return new m.Event(e, t); e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && !1 === e.returnValue ? returnTrue : returnFalse) : this.type = e, t && m.extend(this, t), this.timeStamp = e && e.timeStamp || m.now(), this[m.expando] = !0 }, m.Event.prototype = { isDefaultPrevented: returnFalse, isPropagationStopped: returnFalse, isImmediatePropagationStopped: returnFalse, preventDefault: function () { var e = this.originalEvent; this.isDefaultPrevented = returnTrue, e && e.preventDefault && e.preventDefault() }, stopPropagation: function () { var e = this.originalEvent; this.isPropagationStopped = returnTrue, e && e.stopPropagation && e.stopPropagation() }, stopImmediatePropagation: function () { var e = this.originalEvent; this.isImmediatePropagationStopped = returnTrue, e && e.stopImmediatePropagation && e.stopImmediatePropagation(), this.stopPropagation() } }, m.each({ mouseenter: "mouseover", mouseleave: "mouseout", pointerenter: "pointerover", pointerleave: "pointerout" }, function (e, t) { m.event.special[e] = { delegateType: t, bindType: t, handle: function (e) { var n, r = e.relatedTarget, i = e.handleObj; return r && (r === this || m.contains(this, r)) || (e.type = i.origType, n = i.handler.apply(this, arguments), e.type = t), n } } }), h.focusinBubbles || m.each({ focus: "focusin", blur: "focusout" }, function (e, t) { var n = function (e) { m.event.simulate(t, e.target, m.event.fix(e), !0) }; m.event.special[t] = { setup: function () { var r = this.ownerDocument || this, i = R.access(r, t); i || r.addEventListener(e, n, !0), R.access(r, t, (i || 0) + 1) }, teardown: function () { var r = this.ownerDocument || this, i = R.access(r, t) - 1; i ? R.access(r, t, i) : (r.removeEventListener(e, n, !0), R.remove(r, t)) } } }), m.fn.extend({ on: function (e, t, n, r, i) { var o, a; if ("object" == typeof e) { for (a in "string" != typeof t && (n = n || t, t = void 0), e) this.on(a, t, n, e[a], i); return this } if (null == n && null == r ? (r = t, n = t = void 0) : null == r && ("string" == typeof t ? (r = n, n = void 0) : (r = n, n = t, t = void 0)), !1 === r) r = returnFalse; else if (!r) return this; return 1 === i && (o = r, (r = function (e) { return m().off(e), o.apply(this, arguments) }).guid = o.guid || (o.guid = m.guid++)), this.each(function () { m.event.add(this, e, r, n, t) }) }, one: function (e, t, n, r) { return this.on(e, t, n, r, 1) }, off: function (e, t, n) { var r, i; if (e && e.preventDefault && e.handleObj) return r = e.handleObj, m(e.delegateTarget).off(r.namespace ? r.origType + "." + r.namespace : r.origType, r.selector, r.handler), this; if ("object" == typeof e) { for (i in e) this.off(i, t, e[i]); return this } return !1 !== t && "function" != typeof t || (n = t, t = void 0), !1 === n && (n = returnFalse), this.each(function () { m.event.remove(this, e, n, t) }) }, trigger: function (e, t) { return this.each(function () { m.event.trigger(e, t, this) }) }, triggerHandler: function (e, t) { var n = this[0]; if (n) return m.event.trigger(e, t, n, !0) } }); var G = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, W = /<([\w:]+)/, Y = /<|&#?\w+;/, Z = /<(?:script|style|link)/i, K = /checked\s*(?:[^=]|=\s*.checked.)/i, X = /^$|\/(?:java|ecma)script/i, J = /^true\/(.*)/, Q = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, ee = { option: [1, "<select multiple='multiple'>", "</select>"], thead: [1, "<table>", "</table>"], col: [2, "<table><colgroup>", "</colgroup></table>"], tr: [2, "<table><tbody>", "</tbody></table>"], td: [3, "<table><tbody><tr>", "</tr></tbody></table>"], _default: [0, "", ""] }; function manipulationTarget(e, t) { return m.nodeName(e, "table") && m.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e } function disableScript(e) { return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e } function restoreScript(e) { var t = J.exec(e.type); return t ? e.type = t[1] : e.removeAttribute("type"), e } function setGlobalEval(e, t) { for (var n = 0, r = e.length; n < r; n++)R.set(e[n], "globalEval", !t || R.get(t[n], "globalEval")) } function cloneCopyEvent(e, t) { var n, r, i, o, a, s, l, u; if (1 === t.nodeType) { if (R.hasData(e) && (o = R.access(e), a = R.set(t, o), u = o.events)) for (i in delete a.handle, a.events = {}, u) for (n = 0, r = u[i].length; n < r; n++)m.event.add(t, i, u[i][n]); O.hasData(e) && (s = O.access(e), l = m.extend({}, s), O.set(t, l)) } } function getAll(e, t) { var n = e.getElementsByTagName ? e.getElementsByTagName(t || "*") : e.querySelectorAll ? e.querySelectorAll(t || "*") : []; return void 0 === t || t && m.nodeName(e, t) ? m.merge([e], n) : n } ee.optgroup = ee.option, ee.tbody = ee.tfoot = ee.colgroup = ee.caption = ee.thead, ee.th = ee.td, m.extend({ clone: function (e, t, n) { var r, i, o, a, s, l, u, c = e.cloneNode(!0), d = m.contains(e.ownerDocument, e); if (!(h.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || m.isXMLDoc(e))) for (a = getAll(c), r = 0, i = (o = getAll(e)).length; r < i; r++)s = o[r], l = a[r], void 0, "input" === (u = l.nodeName.toLowerCase()) && j.test(s.type) ? l.checked = s.checked : "input" !== u && "textarea" !== u || (l.defaultValue = s.defaultValue); if (t) if (n) for (o = o || getAll(e), a = a || getAll(c), r = 0, i = o.length; r < i; r++)cloneCopyEvent(o[r], a[r]); else cloneCopyEvent(e, c); return (a = getAll(c, "script")).length > 0 && setGlobalEval(a, !d && getAll(e, "script")), c }, buildFragment: function (e, t, n, r) { for (var i, o, a, s, l, u, c = t.createDocumentFragment(), d = [], f = 0, h = e.length; f < h; f++)if ((i = e[f]) || 0 === i) if ("object" === m.type(i)) m.merge(d, i.nodeType ? [i] : i); else if (Y.test(i)) { for (o = o || c.appendChild(t.createElement("div")), a = (W.exec(i) || ["", ""])[1].toLowerCase(), s = ee[a] || ee._default, o.innerHTML = s[1] + i.replace(G, "<$1></$2>") + s[2], u = s[0]; u--;)o = o.lastChild; m.merge(d, o.childNodes), (o = c.firstChild).textContent = "" } else d.push(t.createTextNode(i)); for (c.textContent = "", f = 0; i = d[f++];)if ((!r || -1 === m.inArray(i, r)) && (l = m.contains(i.ownerDocument, i), o = getAll(c.appendChild(i), "script"), l && setGlobalEval(o), n)) for (u = 0; i = o[u++];)X.test(i.type || "") && n.push(i); return c }, cleanData: function (e) { for (var t, n, r, i, o = m.event.special, a = 0; void 0 !== (n = e[a]); a++) { if (m.acceptData(n) && (i = n[R.expando]) && (t = R.cache[i])) { if (t.events) for (r in t.events) o[r] ? m.event.remove(n, r) : m.removeEvent(n, r, t.handle); R.cache[i] && delete R.cache[i] } delete O.cache[n[O.expando]] } } }), m.fn.extend({ text: function (e) { return P(this, function (e) { return void 0 === e ? m.text(this) : this.empty().each(function () { 1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e) }) }, null, e, arguments.length) }, append: function () { return this.domManip(arguments, function (e) { 1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || manipulationTarget(this, e).appendChild(e) }) }, prepend: function () { return this.domManip(arguments, function (e) { if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) { var t = manipulationTarget(this, e); t.insertBefore(e, t.firstChild) } }) }, before: function () { return this.domManip(arguments, function (e) { this.parentNode && this.parentNode.insertBefore(e, this) }) }, after: function () { return this.domManip(arguments, function (e) { this.parentNode && this.parentNode.insertBefore(e, this.nextSibling) }) }, remove: function (e, t) { for (var n, r = e ? m.filter(e, this) : this, i = 0; null != (n = r[i]); i++)t || 1 !== n.nodeType || m.cleanData(getAll(n)), n.parentNode && (t && m.contains(n.ownerDocument, n) && setGlobalEval(getAll(n, "script")), n.parentNode.removeChild(n)); return this }, empty: function () { for (var e, t = 0; null != (e = this[t]); t++)1 === e.nodeType && (m.cleanData(getAll(e, !1)), e.textContent = ""); return this }, clone: function (e, t) { return e = null != e && e, t = null == t ? e : t, this.map(function () { return m.clone(this, e, t) }) }, html: function (e) { return P(this, function (e) { var t = this[0] || {}, n = 0, r = this.length; if (void 0 === e && 1 === t.nodeType) return t.innerHTML; if ("string" == typeof e && !Z.test(e) && !ee[(W.exec(e) || ["", ""])[1].toLowerCase()]) { e = e.replace(G, "<$1></$2>"); try { for (; n < r; n++)1 === (t = this[n] || {}).nodeType && (m.cleanData(getAll(t, !1)), t.innerHTML = e); t = 0 } catch (e) { } } t && this.empty().append(e) }, null, e, arguments.length) }, replaceWith: function () { var e = arguments[0]; return this.domManip(arguments, function (t) { e = this.parentNode, m.cleanData(getAll(this)), e && e.replaceChild(t, this) }), e && (e.length || e.nodeType) ? this : this.remove() }, detach: function (e) { return this.remove(e, !0) }, domManip: function (e, t) { e = s.apply([], e); var n, r, i, o, a, l, u = 0, c = this.length, d = this, f = c - 1, p = e[0], g = m.isFunction(p); if (g || c > 1 && "string" == typeof p && !h.checkClone && K.test(p)) return this.each(function (n) { var r = d.eq(n); g && (e[0] = p.call(this, n, r.html())), r.domManip(e, t) }); if (c && (r = (n = m.buildFragment(e, this[0].ownerDocument, !1, this)).firstChild, 1 === n.childNodes.length && (n = r), r)) { for (o = (i = m.map(getAll(n, "script"), disableScript)).length; u < c; u++)a = n, u !== f && (a = m.clone(a, !0, !0), o && m.merge(i, getAll(a, "script"))), t.call(this[u], a, u); if (o) for (l = i[i.length - 1].ownerDocument, m.map(i, restoreScript), u = 0; u < o; u++)a = i[u], X.test(a.type || "") && !R.access(a, "globalEval") && m.contains(l, a) && (a.src ? m._evalUrl && m._evalUrl(a.src) : m.globalEval(a.textContent.replace(Q, ""))) } return this } }), m.each({ appendTo: "append", prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith" }, function (e, t) { m.fn[e] = function (e) { for (var n, r = [], i = m(e), o = i.length - 1, a = 0; a <= o; a++)n = a === o ? this : this.clone(!0), m(i[a])[t](n), l.apply(r, n.get()); return this.pushStack(r) } }); var te, ne = {}; function actualDisplay(e, t) { var r, i = m(t.createElement(e)).appendTo(t.body), o = n.getDefaultComputedStyle && (r = n.getDefaultComputedStyle(i[0])) ? r.display : m.css(i[0], "display"); return i.detach(), o } function defaultDisplay(e) { var t = p, n = ne[e]; return n || ("none" !== (n = actualDisplay(e, t)) && n || ((t = (te = (te || m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(), t.close(), n = actualDisplay(e, t), te.detach()), ne[e] = n), n } var re = /^margin/, ie = new RegExp("^(" + $ + ")(?!px)[a-z%]+$", "i"), oe = function (e) { return e.ownerDocument.defaultView.opener ? e.ownerDocument.defaultView.getComputedStyle(e, null) : n.getComputedStyle(e, null) }; function curCSS(e, t, n) { var r, i, o, a, s = e.style; return (n = n || oe(e)) && (a = n.getPropertyValue(t) || n[t]), n && ("" !== a || m.contains(e.ownerDocument, e) || (a = m.style(e, t)), ie.test(a) && re.test(t) && (r = s.width, i = s.minWidth, o = s.maxWidth, s.minWidth = s.maxWidth = s.width = a, a = n.width, s.width = r, s.minWidth = i, s.maxWidth = o)), void 0 !== a ? a + "" : a } function addGetHookIf(e, t) { return { get: function () { if (!e()) return (this.get = t).apply(this, arguments); delete this.get } } } !function () { var e, t, r = p.documentElement, i = p.createElement("div"), o = p.createElement("div"); function computePixelPositionAndBoxSizingReliable() { o.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", o.innerHTML = "", r.appendChild(i); var a = n.getComputedStyle(o, null); e = "1%" !== a.top, t = "4px" === a.width, r.removeChild(i) } o.style && (o.style.backgroundClip = "content-box", o.cloneNode(!0).style.backgroundClip = "", h.clearCloneStyle = "content-box" === o.style.backgroundClip, i.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute", i.appendChild(o), n.getComputedStyle && m.extend(h, { pixelPosition: function () { return computePixelPositionAndBoxSizingReliable(), e }, boxSizingReliable: function () { return null == t && computePixelPositionAndBoxSizingReliable(), t }, reliableMarginRight: function () { var e, t = o.appendChild(p.createElement("div")); return t.style.cssText = o.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", t.style.marginRight = t.style.width = "0", o.style.width = "1px", r.appendChild(i), e = !parseFloat(n.getComputedStyle(t, null).marginRight), r.removeChild(i), o.removeChild(t), e } })) }(), m.swap = function (e, t, n, r) { var i, o, a = {}; for (o in t) a[o] = e.style[o], e.style[o] = t[o]; for (o in i = n.apply(e, r || []), t) e.style[o] = a[o]; return i }; var ae = /^(none|table(?!-c[ea]).+)/, se = new RegExp("^(" + $ + ")(.*)$", "i"), le = new RegExp("^([+-])=(" + $ + ")", "i"), ue = { position: "absolute", visibility: "hidden", display: "block" }, ce = { letterSpacing: "0", fontWeight: "400" }, de = ["Webkit", "O", "Moz", "ms"]; function vendorPropName(e, t) { if (t in e) return t; for (var n = t[0].toUpperCase() + t.slice(1), r = t, i = de.length; i--;)if ((t = de[i] + n) in e) return t; return r } function setPositiveNumber(e, t, n) { var r = se.exec(t); return r ? Math.max(0, r[1] - (n || 0)) + (r[2] || "px") : t } function augmentWidthOrHeight(e, t, n, r, i) { for (var o = n === (r ? "border" : "content") ? 4 : "width" === t ? 1 : 0, a = 0; o < 4; o += 2)"margin" === n && (a += m.css(e, n + B[o], !0, i)), r ? ("content" === n && (a -= m.css(e, "padding" + B[o], !0, i)), "margin" !== n && (a -= m.css(e, "border" + B[o] + "Width", !0, i))) : (a += m.css(e, "padding" + B[o], !0, i), "padding" !== n && (a += m.css(e, "border" + B[o] + "Width", !0, i))); return a } function getWidthOrHeight(e, t, n) { var r = !0, i = "width" === t ? e.offsetWidth : e.offsetHeight, o = oe(e), a = "border-box" === m.css(e, "boxSizing", !1, o); if (i <= 0 || null == i) { if (((i = curCSS(e, t, o)) < 0 || null == i) && (i = e.style[t]), ie.test(i)) return i; r = a && (h.boxSizingReliable() || i === e.style[t]), i = parseFloat(i) || 0 } return i + augmentWidthOrHeight(e, t, n || (a ? "border" : "content"), r, o) + "px" } function showHide(e, t) { for (var n, r, i, o = [], a = 0, s = e.length; a < s; a++)(r = e[a]).style && (o[a] = R.get(r, "olddisplay"), n = r.style.display, t ? (o[a] || "none" !== n || (r.style.display = ""), "" === r.style.display && z(r) && (o[a] = R.access(r, "olddisplay", defaultDisplay(r.nodeName)))) : (i = z(r), "none" === n && i || R.set(r, "olddisplay", i ? n : m.css(r, "display")))); for (a = 0; a < s; a++)(r = e[a]).style && (t && "none" !== r.style.display && "" !== r.style.display || (r.style.display = t ? o[a] || "" : "none")); return e } function Tween(e, t, n, r, i) { return new Tween.prototype.init(e, t, n, r, i) } m.extend({ cssHooks: { opacity: { get: function (e, t) { if (t) { var n = curCSS(e, "opacity"); return "" === n ? "1" : n } } } }, cssNumber: { columnCount: !0, fillOpacity: !0, flexGrow: !0, flexShrink: !0, fontWeight: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, widows: !0, zIndex: !0, zoom: !0 }, cssProps: { float: "cssFloat" }, style: function (e, t, n, r) { if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) { var i, o, a, s = m.camelCase(t), l = e.style; if (t = m.cssProps[s] || (m.cssProps[s] = vendorPropName(l, s)), a = m.cssHooks[t] || m.cssHooks[s], void 0 === n) return a && "get" in a && void 0 !== (i = a.get(e, !1, r)) ? i : l[t]; "string" === (o = typeof n) && (i = le.exec(n)) && (n = (i[1] + 1) * i[2] + parseFloat(m.css(e, t)), o = "number"), null != n && n == n && ("number" !== o || m.cssNumber[s] || (n += "px"), h.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (l[t] = "inherit"), a && "set" in a && void 0 === (n = a.set(e, n, r)) || (l[t] = n)) } }, css: function (e, t, n, r) { var i, o, a, s = m.camelCase(t); return t = m.cssProps[s] || (m.cssProps[s] = vendorPropName(e.style, s)), (a = m.cssHooks[t] || m.cssHooks[s]) && "get" in a && (i = a.get(e, !0, n)), void 0 === i && (i = curCSS(e, t, r)), "normal" === i && t in ce && (i = ce[t]), "" === n || n ? (o = parseFloat(i), !0 === n || m.isNumeric(o) ? o || 0 : i) : i } }), m.each(["height", "width"], function (e, t) { m.cssHooks[t] = { get: function (e, n, r) { if (n) return ae.test(m.css(e, "display")) && 0 === e.offsetWidth ? m.swap(e, ue, function () { return getWidthOrHeight(e, t, r) }) : getWidthOrHeight(e, t, r) }, set: function (e, n, r) { var i = r && oe(e); return setPositiveNumber(0, n, r ? augmentWidthOrHeight(e, t, r, "border-box" === m.css(e, "boxSizing", !1, i), i) : 0) } } }), m.cssHooks.marginRight = addGetHookIf(h.reliableMarginRight, function (e, t) { if (t) return m.swap(e, { display: "inline-block" }, curCSS, [e, "marginRight"]) }), m.each({ margin: "", padding: "", border: "Width" }, function (e, t) { m.cssHooks[e + t] = { expand: function (n) { for (var r = 0, i = {}, o = "string" == typeof n ? n.split(" ") : [n]; r < 4; r++)i[e + B[r] + t] = o[r] || o[r - 2] || o[0]; return i } }, re.test(e) || (m.cssHooks[e + t].set = setPositiveNumber) }), m.fn.extend({ css: function (e, t) { return P(this, function (e, t, n) { var r, i, o = {}, a = 0; if (m.isArray(t)) { for (r = oe(e), i = t.length; a < i; a++)o[t[a]] = m.css(e, t[a], !1, r); return o } return void 0 !== n ? m.style(e, t, n) : m.css(e, t) }, e, t, arguments.length > 1) }, show: function () { return showHide(this, !0) }, hide: function () { return showHide(this) }, toggle: function (e) { return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function () { z(this) ? m(this).show() : m(this).hide() }) } }), m.Tween = Tween, Tween.prototype = { constructor: Tween, init: function (e, t, n, r, i, o) { this.elem = e, this.prop = n, this.easing = i || "swing", this.options = t, this.start = this.now = this.cur(), this.end = r, this.unit = o || (m.cssNumber[n] ? "" : "px") }, cur: function () { var e = Tween.propHooks[this.prop]; return e && e.get ? e.get(this) : Tween.propHooks._default.get(this) }, run: function (e) { var t, n = Tween.propHooks[this.prop]; return this.options.duration ? this.pos = t = m.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : Tween.propHooks._default.set(this), this } }, Tween.prototype.init.prototype = Tween.prototype, Tween.propHooks = { _default: { get: function (e) { var t; return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = m.css(e.elem, e.prop, "")) && "auto" !== t ? t : 0 : e.elem[e.prop] }, set: function (e) { m.fx.step[e.prop] ? m.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[m.cssProps[e.prop]] || m.cssHooks[e.prop]) ? m.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now } } }, Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = { set: function (e) { e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now) } }, m.easing = { linear: function (e) { return e }, swing: function (e) { return .5 - Math.cos(e * Math.PI) / 2 } }, m.fx = Tween.prototype.init, m.fx.step = {}; var fe, he, pe = /^(?:toggle|show|hide)$/, me = new RegExp("^(?:([+-])=|)(" + $ + ")([a-z%]*)$", "i"), ge = /queueHooks$/, ve = [function defaultPrefilter(e, t, n) { var r, i, o, a, s, l, u, c = this, d = {}, f = e.style, h = e.nodeType && z(e), p = R.get(e, "fxshow"); n.queue || (null == (s = m._queueHooks(e, "fx")).unqueued && (s.unqueued = 0, l = s.empty.fire, s.empty.fire = function () { s.unqueued || l() }), s.unqueued++, c.always(function () { c.always(function () { s.unqueued--, m.queue(e, "fx").length || s.empty.fire() }) })); 1 === e.nodeType && ("height" in t || "width" in t) && (n.overflow = [f.overflow, f.overflowX, f.overflowY], u = m.css(e, "display"), "inline" === ("none" === u ? R.get(e, "olddisplay") || defaultDisplay(e.nodeName) : u) && "none" === m.css(e, "float") && (f.display = "inline-block")); n.overflow && (f.overflow = "hidden", c.always(function () { f.overflow = n.overflow[0], f.overflowX = n.overflow[1], f.overflowY = n.overflow[2] })); for (r in t) if (i = t[r], pe.exec(i)) { if (delete t[r], o = o || "toggle" === i, i === (h ? "hide" : "show")) { if ("show" !== i || !p || void 0 === p[r]) continue; h = !0 } d[r] = p && p[r] || m.style(e, r) } else u = void 0; if (m.isEmptyObject(d)) "inline" === ("none" === u ? defaultDisplay(e.nodeName) : u) && (f.display = u); else for (r in p ? "hidden" in p && (h = p.hidden) : p = R.access(e, "fxshow", {}), o && (p.hidden = !h), h ? m(e).show() : c.done(function () { m(e).hide() }), c.done(function () { var t; for (t in R.remove(e, "fxshow"), d) m.style(e, t, d[t]) }), d) a = createTween(h ? p[r] : 0, r, c), r in p || (p[r] = a.start, h && (a.end = a.start, a.start = "width" === r || "height" === r ? 1 : 0)) }], ye = { "*": [function (e, t) { var n = this.createTween(e, t), r = n.cur(), i = me.exec(t), o = i && i[3] || (m.cssNumber[e] ? "" : "px"), a = (m.cssNumber[e] || "px" !== o && +r) && me.exec(m.css(n.elem, e)), s = 1, l = 20; if (a && a[3] !== o) { o = o || a[3], i = i || [], a = +r || 1; do { a /= s = s || ".5", m.style(n.elem, e, a + o) } while (s !== (s = n.cur() / r) && 1 !== s && --l) } return i && (a = n.start = +a || +r || 0, n.unit = o, n.end = i[1] ? a + (i[1] + 1) * i[2] : +i[2]), n }] }; function createFxNow() { return setTimeout(function () { fe = void 0 }), fe = m.now() } function genFx(e, t) { var n, r = 0, i = { height: e }; for (t = t ? 1 : 0; r < 4; r += 2 - t)i["margin" + (n = B[r])] = i["padding" + n] = e; return t && (i.opacity = i.width = e), i } function createTween(e, t, n) { for (var r, i = (ye[t] || []).concat(ye["*"]), o = 0, a = i.length; o < a; o++)if (r = i[o].call(n, t, e)) return r } function Animation(e, t, n) { var r, i, o = 0, a = ve.length, s = m.Deferred().always(function () { delete l.elem }), l = function () { if (i) return !1; for (var t = fe || createFxNow(), n = Math.max(0, u.startTime + u.duration - t), r = 1 - (n / u.duration || 0), o = 0, a = u.tweens.length; o < a; o++)u.tweens[o].run(r); return s.notifyWith(e, [u, r, n]), r < 1 && a ? n : (s.resolveWith(e, [u]), !1) }, u = s.promise({ elem: e, props: m.extend({}, t), opts: m.extend(!0, { specialEasing: {} }, n), originalProperties: t, originalOptions: n, startTime: fe || createFxNow(), duration: n.duration, tweens: [], createTween: function (t, n) { var r = m.Tween(e, u.opts, t, n, u.opts.specialEasing[t] || u.opts.easing); return u.tweens.push(r), r }, stop: function (t) { var n = 0, r = t ? u.tweens.length : 0; if (i) return this; for (i = !0; n < r; n++)u.tweens[n].run(1); return t ? s.resolveWith(e, [u, t]) : s.rejectWith(e, [u, t]), this } }), c = u.props; for (!function propFilter(e, t) { var n, r, i, o, a; for (n in e) if (i = t[r = m.camelCase(n)], o = e[n], m.isArray(o) && (i = o[1], o = e[n] = o[0]), n !== r && (e[r] = o, delete e[n]), (a = m.cssHooks[r]) && "expand" in a) for (n in o = a.expand(o), delete e[r], o) n in e || (e[n] = o[n], t[n] = i); else t[r] = i }(c, u.opts.specialEasing); o < a; o++)if (r = ve[o].call(u, e, c, u.opts)) return r; return m.map(c, createTween, u), m.isFunction(u.opts.start) && u.opts.start.call(e, u), m.fx.timer(m.extend(l, { elem: e, anim: u, queue: u.opts.queue })), u.progress(u.opts.progress).done(u.opts.done, u.opts.complete).fail(u.opts.fail).always(u.opts.always) } m.Animation = m.extend(Animation, { tweener: function (e, t) { m.isFunction(e) ? (t = e, e = ["*"]) : e = e.split(" "); for (var n, r = 0, i = e.length; r < i; r++)n = e[r], ye[n] = ye[n] || [], ye[n].unshift(t) }, prefilter: function (e, t) { t ? ve.unshift(e) : ve.push(e) } }), m.speed = function (e, t, n) { var r = e && "object" == typeof e ? m.extend({}, e) : { complete: n || !n && t || m.isFunction(e) && e, duration: e, easing: n && t || t && !m.isFunction(t) && t }; return r.duration = m.fx.off ? 0 : "number" == typeof r.duration ? r.duration : r.duration in m.fx.speeds ? m.fx.speeds[r.duration] : m.fx.speeds._default, null != r.queue && !0 !== r.queue || (r.queue = "fx"), r.old = r.complete, r.complete = function () { m.isFunction(r.old) && r.old.call(this), r.queue && m.dequeue(this, r.queue) }, r }, m.fn.extend({ fadeTo: function (e, t, n, r) { return this.filter(z).css("opacity", 0).show().end().animate({ opacity: t }, e, n, r) }, animate: function (e, t, n, r) { var i = m.isEmptyObject(e), o = m.speed(t, n, r), a = function () { var t = Animation(this, m.extend({}, e), o); (i || R.get(this, "finish")) && t.stop(!0) }; return a.finish = a, i || !1 === o.queue ? this.each(a) : this.queue(o.queue, a) }, stop: function (e, t, n) { var r = function (e) { var t = e.stop; delete e.stop, t(n) }; return "string" != typeof e && (n = t, t = e, e = void 0), t && !1 !== e && this.queue(e || "fx", []), this.each(function () { var t = !0, i = null != e && e + "queueHooks", o = m.timers, a = R.get(this); if (i) a[i] && a[i].stop && r(a[i]); else for (i in a) a[i] && a[i].stop && ge.test(i) && r(a[i]); for (i = o.length; i--;)o[i].elem !== this || null != e && o[i].queue !== e || (o[i].anim.stop(n), t = !1, o.splice(i, 1)); !t && n || m.dequeue(this, e) }) }, finish: function (e) { return !1 !== e && (e = e || "fx"), this.each(function () { var t, n = R.get(this), r = n[e + "queue"], i = n[e + "queueHooks"], o = m.timers, a = r ? r.length : 0; for (n.finish = !0, m.queue(this, e, []), i && i.stop && i.stop.call(this, !0), t = o.length; t--;)o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0), o.splice(t, 1)); for (t = 0; t < a; t++)r[t] && r[t].finish && r[t].finish.call(this); delete n.finish }) } }), m.each(["toggle", "show", "hide"], function (e, t) { var n = m.fn[t]; m.fn[t] = function (e, r, i) { return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate(genFx(t, !0), e, r, i) } }), m.each({ slideDown: genFx("show"), slideUp: genFx("hide"), slideToggle: genFx("toggle"), fadeIn: { opacity: "show" }, fadeOut: { opacity: "hide" }, fadeToggle: { opacity: "toggle" } }, function (e, t) { m.fn[e] = function (e, n, r) { return this.animate(t, e, n, r) } }), m.timers = [], m.fx.tick = function () { var e, t = 0, n = m.timers; for (fe = m.now(); t < n.length; t++)(e = n[t])() || n[t] !== e || n.splice(t--, 1); n.length || m.fx.stop(), fe = void 0 }, m.fx.timer = function (e) { m.timers.push(e), e() ? m.fx.start() : m.timers.pop() }, m.fx.interval = 13, m.fx.start = function () { he || (he = setInterval(m.fx.tick, m.fx.interval)) }, m.fx.stop = function () { clearInterval(he), he = null }, m.fx.speeds = { slow: 600, fast: 200, _default: 400 }, m.fn.delay = function (e, t) { return e = m.fx && m.fx.speeds[e] || e, t = t || "fx", this.queue(t, function (t, n) { var r = setTimeout(t, e); n.stop = function () { clearTimeout(r) } }) }, function () { var e = p.createElement("input"), t = p.createElement("select"), n = t.appendChild(p.createElement("option")); e.type = "checkbox", h.checkOn = "" !== e.value, h.optSelected = n.selected, t.disabled = !0, h.optDisabled = !n.disabled, (e = p.createElement("input")).value = "t", e.type = "radio", h.radioValue = "t" === e.value }(); var _e, be = m.expr.attrHandle; m.fn.extend({ attr: function (e, t) { return P(this, m.attr, e, t, arguments.length > 1) }, removeAttr: function (e) { return this.each(function () { m.removeAttr(this, e) }) } }), m.extend({ attr: function (e, t, n) { var r, i, o = e.nodeType; if (e && 3 !== o && 8 !== o && 2 !== o) return void 0 === e.getAttribute ? m.prop(e, t, n) : (1 === o && m.isXMLDoc(e) || (t = t.toLowerCase(), r = m.attrHooks[t] || (m.expr.match.bool.test(t) ? _e : void 0)), void 0 === n ? r && "get" in r && null !== (i = r.get(e, t)) ? i : null == (i = m.find.attr(e, t)) ? void 0 : i : null !== n ? r && "set" in r && void 0 !== (i = r.set(e, n, t)) ? i : (e.setAttribute(t, n + ""), n) : void m.removeAttr(e, t)) }, removeAttr: function (e, t) { var n, r, i = 0, o = t && t.match(E); if (o && 1 === e.nodeType) for (; n = o[i++];)r = m.propFix[n] || n, m.expr.match.bool.test(n) && (e[r] = !1), e.removeAttribute(n) }, attrHooks: { type: { set: function (e, t) { if (!h.radioValue && "radio" === t && m.nodeName(e, "input")) { var n = e.value; return e.setAttribute("type", t), n && (e.value = n), t } } } } }), _e = { set: function (e, t, n) { return !1 === t ? m.removeAttr(e, n) : e.setAttribute(n, n), n } }, m.each(m.expr.match.bool.source.match(/\w+/g), function (e, t) { var n = be[t] || m.find.attr; be[t] = function (e, t, r) { var i, o; return r || (o = be[t], be[t] = i, i = null != n(e, t, r) ? t.toLowerCase() : null, be[t] = o), i } }); var we = /^(?:input|select|textarea|button)$/i; m.fn.extend({ prop: function (e, t) { return P(this, m.prop, e, t, arguments.length > 1) }, removeProp: function (e) { return this.each(function () { delete this[m.propFix[e] || e] }) } }), m.extend({ propFix: { for: "htmlFor", class: "className" }, prop: function (e, t, n) { var r, i, o = e.nodeType; if (e && 3 !== o && 8 !== o && 2 !== o) return (1 !== o || !m.isXMLDoc(e)) && (t = m.propFix[t] || t, i = m.propHooks[t]), void 0 !== n ? i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r : e[t] = n : i && "get" in i && null !== (r = i.get(e, t)) ? r : e[t] }, propHooks: { tabIndex: { get: function (e) { return e.hasAttribute("tabindex") || we.test(e.nodeName) || e.href ? e.tabIndex : -1 } } } }), h.optSelected || (m.propHooks.selected = { get: function (e) { var t = e.parentNode; return t && t.parentNode && t.parentNode.selectedIndex, null } }), m.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () { m.propFix[this.toLowerCase()] = this }); var xe = /[\t\r\n\f]/g; m.fn.extend({ addClass: function (e) { var t, n, r, i, o, a, s = "string" == typeof e && e, l = 0, u = this.length; if (m.isFunction(e)) return this.each(function (t) { m(this).addClass(e.call(this, t, this.className)) }); if (s) for (t = (e || "").match(E) || []; l < u; l++)if (r = 1 === (n = this[l]).nodeType && (n.className ? (" " + n.className + " ").replace(xe, " ") : " ")) { for (o = 0; i = t[o++];)r.indexOf(" " + i + " ") < 0 && (r += i + " "); a = m.trim(r), n.className !== a && (n.className = a) } return this }, removeClass: function (e) { var t, n, r, i, o, a, s = 0 === arguments.length || "string" == typeof e && e, l = 0, u = this.length; if (m.isFunction(e)) return this.each(function (t) { m(this).removeClass(e.call(this, t, this.className)) }); if (s) for (t = (e || "").match(E) || []; l < u; l++)if (r = 1 === (n = this[l]).nodeType && (n.className ? (" " + n.className + " ").replace(xe, " ") : "")) { for (o = 0; i = t[o++];)for (; r.indexOf(" " + i + " ") >= 0;)r = r.replace(" " + i + " ", " "); a = e ? m.trim(r) : "", n.className !== a && (n.className = a) } return this }, toggleClass: function (e, t) { var n = typeof e; return "boolean" == typeof t && "string" === n ? t ? this.addClass(e) : this.removeClass(e) : m.isFunction(e) ? this.each(function (n) { m(this).toggleClass(e.call(this, n, this.className, t), t) }) : this.each(function () { if ("string" === n) for (var t, r = 0, i = m(this), o = e.match(E) || []; t = o[r++];)i.hasClass(t) ? i.removeClass(t) : i.addClass(t); else "undefined" !== n && "boolean" !== n || (this.className && R.set(this, "__className__", this.className), this.className = this.className || !1 === e ? "" : R.get(this, "__className__") || "") }) }, hasClass: function (e) { for (var t = " " + e + " ", n = 0, r = this.length; n < r; n++)if (1 === this[n].nodeType && (" " + this[n].className + " ").replace(xe, " ").indexOf(t) >= 0) return !0; return !1 } }); var Ce = /\r/g; m.fn.extend({ val: function (e) { var t, n, r, i = this[0]; return arguments.length ? (r = m.isFunction(e), this.each(function (n) { var i; 1 === this.nodeType && (null == (i = r ? e.call(this, n, m(this).val()) : e) ? i = "" : "number" == typeof i ? i += "" : m.isArray(i) && (i = m.map(i, function (e) { return null == e ? "" : e + "" })), (t = m.valHooks[this.type] || m.valHooks[this.nodeName.toLowerCase()]) && "set" in t && void 0 !== t.set(this, i, "value") || (this.value = i)) })) : i ? (t = m.valHooks[i.type] || m.valHooks[i.nodeName.toLowerCase()]) && "get" in t && void 0 !== (n = t.get(i, "value")) ? n : "string" == typeof (n = i.value) ? n.replace(Ce, "") : null == n ? "" : n : void 0 } }), m.extend({ valHooks: { option: { get: function (e) { var t = m.find.attr(e, "value"); return null != t ? t : m.trim(m.text(e)) } }, select: { get: function (e) { for (var t, n, r = e.options, i = e.selectedIndex, o = "select-one" === e.type || i < 0, a = o ? null : [], s = o ? i + 1 : r.length, l = i < 0 ? s : o ? i : 0; l < s; l++)if (((n = r[l]).selected || l === i) && (h.optDisabled ? !n.disabled : null === n.getAttribute("disabled")) && (!n.parentNode.disabled || !m.nodeName(n.parentNode, "optgroup"))) { if (t = m(n).val(), o) return t; a.push(t) } return a }, set: function (e, t) { for (var n, r, i = e.options, o = m.makeArray(t), a = i.length; a--;)((r = i[a]).selected = m.inArray(r.value, o) >= 0) && (n = !0); return n || (e.selectedIndex = -1), o } } } }), m.each(["radio", "checkbox"], function () { m.valHooks[this] = { set: function (e, t) { if (m.isArray(t)) return e.checked = m.inArray(m(e).val(), t) >= 0 } }, h.checkOn || (m.valHooks[this].get = function (e) { return null === e.getAttribute("value") ? "on" : e.value }) }), m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (e, t) { m.fn[t] = function (e, n) { return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t) } }), m.fn.extend({ hover: function (e, t) { return this.mouseenter(e).mouseleave(t || e) }, bind: function (e, t, n) { return this.on(e, null, t, n) }, unbind: function (e, t) { return this.off(e, null, t) }, delegate: function (e, t, n, r) { return this.on(t, e, n, r) }, undelegate: function (e, t, n) { return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n) } }); var Se = m.now(), ke = /\?/; m.parseJSON = function (e) { return JSON.parse(e + "") }, m.parseXML = function (e) { var t; if (!e || "string" != typeof e) return null; try { t = (new DOMParser).parseFromString(e, "text/xml") } catch (e) { t = void 0 } return t && !t.getElementsByTagName("parsererror").length || m.error("Invalid XML: " + e), t }; var Te = /#.*$/, Le = /([?&])_=[^&]*/, Me = /^(.*?):[ \t]*([^\r\n]*)$/gm, Ee = /^(?:GET|HEAD)$/, Ae = /^\/\//, Pe = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/, Re = {}, Oe = {}, De = "*/".concat("*"), Fe = n.location.href, Ie = Pe.exec(Fe.toLowerCase()) || []; function addToPrefiltersOrTransports(e) { return function (t, n) { "string" != typeof t && (n = t, t = "*"); var r, i = 0, o = t.toLowerCase().match(E) || []; if (m.isFunction(n)) for (; r = o[i++];)"+" === r[0] ? (r = r.slice(1) || "*", (e[r] = e[r] || []).unshift(n)) : (e[r] = e[r] || []).push(n) } } function inspectPrefiltersOrTransports(e, t, n, r) { var i = {}, o = e === Oe; function inspect(a) { var s; return i[a] = !0, m.each(e[a] || [], function (e, a) { var l = a(t, n, r); return "string" != typeof l || o || i[l] ? o ? !(s = l) : void 0 : (t.dataTypes.unshift(l), inspect(l), !1) }), s } return inspect(t.dataTypes[0]) || !i["*"] && inspect("*") } function ajaxExtend(e, t) { var n, r, i = m.ajaxSettings.flatOptions || {}; for (n in t) void 0 !== t[n] && ((i[n] ? e : r || (r = {}))[n] = t[n]); return r && m.extend(!0, e, r), e } m.extend({ active: 0, lastModified: {}, etag: {}, ajaxSettings: { url: Fe, type: "GET", isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ie[1]), global: !0, processData: !0, async: !0, contentType: "application/x-www-form-urlencoded; charset=UTF-8", accepts: { "*": De, text: "text/plain", html: "text/html", xml: "application/xml, text/xml", json: "application/json, text/javascript" }, contents: { xml: /xml/, html: /html/, json: /json/ }, responseFields: { xml: "responseXML", text: "responseText", json: "responseJSON" }, converters: { "* text": String, "text html": !0, "text json": m.parseJSON, "text xml": m.parseXML }, flatOptions: { url: !0, context: !0 } }, ajaxSetup: function (e, t) { return t ? ajaxExtend(ajaxExtend(e, m.ajaxSettings), t) : ajaxExtend(m.ajaxSettings, e) }, ajaxPrefilter: addToPrefiltersOrTransports(Re), ajaxTransport: addToPrefiltersOrTransports(Oe), ajax: function (e, t) { "object" == typeof e && (t = e, e = void 0), t = t || {}; var n, r, i, o, a, s, l, u, c = m.ajaxSetup({}, t), d = c.context || c, f = c.context && (d.nodeType || d.jquery) ? m(d) : m.event, h = m.Deferred(), p = m.Callbacks("once memory"), g = c.statusCode || {}, v = {}, y = {}, _ = 0, b = "canceled", w = { readyState: 0, getResponseHeader: function (e) { var t; if (2 === _) { if (!o) for (o = {}; t = Me.exec(i);)o[t[1].toLowerCase()] = t[2]; t = o[e.toLowerCase()] } return null == t ? null : t }, getAllResponseHeaders: function () { return 2 === _ ? i : null }, setRequestHeader: function (e, t) { var n = e.toLowerCase(); return _ || (e = y[n] = y[n] || e, v[e] = t), this }, overrideMimeType: function (e) { return _ || (c.mimeType = e), this }, statusCode: function (e) { var t; if (e) if (_ < 2) for (t in e) g[t] = [g[t], e[t]]; else w.always(e[w.status]); return this }, abort: function (e) { var t = e || b; return n && n.abort(t), done(0, t), this } }; if (h.promise(w).complete = p.add, w.success = w.done, w.error = w.fail, c.url = ((e || c.url || Fe) + "").replace(Te, "").replace(Ae, Ie[1] + "//"), c.type = t.method || t.type || c.method || c.type, c.dataTypes = m.trim(c.dataType || "*").toLowerCase().match(E) || [""], null == c.crossDomain && (s = Pe.exec(c.url.toLowerCase()), c.crossDomain = !(!s || s[1] === Ie[1] && s[2] === Ie[2] && (s[3] || ("http:" === s[1] ? "80" : "443")) === (Ie[3] || ("http:" === Ie[1] ? "80" : "443")))), c.data && c.processData && "string" != typeof c.data && (c.data = m.param(c.data, c.traditional)), inspectPrefiltersOrTransports(Re, c, t, w), 2 === _) return w; for (u in (l = m.event && c.global) && 0 == m.active++ && m.event.trigger("ajaxStart"), c.type = c.type.toUpperCase(), c.hasContent = !Ee.test(c.type), r = c.url, c.hasContent || (c.data && (r = c.url += (ke.test(r) ? "&" : "?") + c.data, delete c.data), !1 === c.cache && (c.url = Le.test(r) ? r.replace(Le, "$1_=" + Se++) : r + (ke.test(r) ? "&" : "?") + "_=" + Se++)), c.ifModified && (m.lastModified[r] && w.setRequestHeader("If-Modified-Since", m.lastModified[r]), m.etag[r] && w.setRequestHeader("If-None-Match", m.etag[r])), (c.data && c.hasContent && !1 !== c.contentType || t.contentType) && w.setRequestHeader("Content-Type", c.contentType), w.setRequestHeader("Accept", c.dataTypes[0] && c.accepts[c.dataTypes[0]] ? c.accepts[c.dataTypes[0]] + ("*" !== c.dataTypes[0] ? ", " + De + "; q=0.01" : "") : c.accepts["*"]), c.headers) w.setRequestHeader(u, c.headers[u]); if (c.beforeSend && (!1 === c.beforeSend.call(d, w, c) || 2 === _)) return w.abort(); for (u in b = "abort", { success: 1, error: 1, complete: 1 }) w[u](c[u]); if (n = inspectPrefiltersOrTransports(Oe, c, t, w)) { w.readyState = 1, l && f.trigger("ajaxSend", [w, c]), c.async && c.timeout > 0 && (a = setTimeout(function () { w.abort("timeout") }, c.timeout)); try { _ = 1, n.send(v, done) } catch (e) { if (!(_ < 2)) throw e; done(-1, e) } } else done(-1, "No Transport"); function done(e, t, o, s) { var u, v, y, b, x, C = t; 2 !== _ && (_ = 2, a && clearTimeout(a), n = void 0, i = s || "", w.readyState = e > 0 ? 4 : 0, u = e >= 200 && e < 300 || 304 === e, o && (b = function ajaxHandleResponses(e, t, n) { for (var r, i, o, a, s = e.contents, l = e.dataTypes; "*" === l[0];)l.shift(), void 0 === r && (r = e.mimeType || t.getResponseHeader("Content-Type")); if (r) for (i in s) if (s[i] && s[i].test(r)) { l.unshift(i); break } if (l[0] in n) o = l[0]; else { for (i in n) { if (!l[0] || e.converters[i + " " + l[0]]) { o = i; break } a || (a = i) } o = o || a } if (o) return o !== l[0] && l.unshift(o), n[o] }(c, w, o)), b = function ajaxConvert(e, t, n, r) { var i, o, a, s, l, u = {}, c = e.dataTypes.slice(); if (c[1]) for (a in e.converters) u[a.toLowerCase()] = e.converters[a]; for (o = c.shift(); o;)if (e.responseFields[o] && (n[e.responseFields[o]] = t), !l && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)), l = o, o = c.shift()) if ("*" === o) o = l; else if ("*" !== l && l !== o) { if (!(a = u[l + " " + o] || u["* " + o])) for (i in u) if ((s = i.split(" "))[1] === o && (a = u[l + " " + s[0]] || u["* " + s[0]])) { !0 === a ? a = u[i] : !0 !== u[i] && (o = s[0], c.unshift(s[1])); break } if (!0 !== a) if (a && e.throws) t = a(t); else try { t = a(t) } catch (e) { return { state: "parsererror", error: a ? e : "No conversion from " + l + " to " + o } } } return { state: "success", data: t } }(c, b, w, u), u ? (c.ifModified && ((x = w.getResponseHeader("Last-Modified")) && (m.lastModified[r] = x), (x = w.getResponseHeader("etag")) && (m.etag[r] = x)), 204 === e || "HEAD" === c.type ? C = "nocontent" : 304 === e ? C = "notmodified" : (C = b.state, v = b.data, u = !(y = b.error))) : (y = C, !e && C || (C = "error", e < 0 && (e = 0))), w.status = e, w.statusText = (t || C) + "", u ? h.resolveWith(d, [v, C, w]) : h.rejectWith(d, [w, C, y]), w.statusCode(g), g = void 0, l && f.trigger(u ? "ajaxSuccess" : "ajaxError", [w, c, u ? v : y]), p.fireWith(d, [w, C]), l && (f.trigger("ajaxComplete", [w, c]), --m.active || m.event.trigger("ajaxStop"))) } return w }, getJSON: function (e, t, n) { return m.get(e, t, n, "json") }, getScript: function (e, t) { return m.get(e, void 0, t, "script") } }), m.each(["get", "post"], function (e, t) { m[t] = function (e, n, r, i) { return m.isFunction(n) && (i = i || r, r = n, n = void 0), m.ajax({ url: e, type: t, dataType: i, data: n, success: r }) } }), m._evalUrl = function (e) { return m.ajax({ url: e, type: "GET", dataType: "script", async: !1, global: !1, throws: !0 }) }, m.fn.extend({ wrapAll: function (e) { var t; return m.isFunction(e) ? this.each(function (t) { m(this).wrapAll(e.call(this, t)) }) : (this[0] && (t = m(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map(function () { for (var e = this; e.firstElementChild;)e = e.firstElementChild; return e }).append(this)), this) }, wrapInner: function (e) { return m.isFunction(e) ? this.each(function (t) { m(this).wrapInner(e.call(this, t)) }) : this.each(function () { var t = m(this), n = t.contents(); n.length ? n.wrapAll(e) : t.append(e) }) }, wrap: function (e) { var t = m.isFunction(e); return this.each(function (n) { m(this).wrapAll(t ? e.call(this, n) : e) }) }, unwrap: function () { return this.parent().each(function () { m.nodeName(this, "body") || m(this).replaceWith(this.childNodes) }).end() } }), m.expr.filters.hidden = function (e) { return e.offsetWidth <= 0 && e.offsetHeight <= 0 }, m.expr.filters.visible = function (e) { return !m.expr.filters.hidden(e) }; var Ne = /%20/g, $e = /\[\]$/, Be = /\r?\n/g, ze = /^(?:submit|button|image|reset|file)$/i, je = /^(?:input|select|textarea|keygen)/i; function buildParams(e, t, n, r) { var i; if (m.isArray(t)) m.each(t, function (t, i) { n || $e.test(e) ? r(e, i) : buildParams(e + "[" + ("object" == typeof i ? t : "") + "]", i, n, r) }); else if (n || "object" !== m.type(t)) r(e, t); else for (i in t) buildParams(e + "[" + i + "]", t[i], n, r) } m.param = function (e, t) { var n, r = [], i = function (e, t) { t = m.isFunction(t) ? t() : null == t ? "" : t, r[r.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t) }; if (void 0 === t && (t = m.ajaxSettings && m.ajaxSettings.traditional), m.isArray(e) || e.jquery && !m.isPlainObject(e)) m.each(e, function () { i(this.name, this.value) }); else for (n in e) buildParams(n, e[n], t, i); return r.join("&").replace(Ne, "+") }, m.fn.extend({ serialize: function () { return m.param(this.serializeArray()) }, serializeArray: function () { return this.map(function () { var e = m.prop(this, "elements"); return e ? m.makeArray(e) : this }).filter(function () { var e = this.type; return this.name && !m(this).is(":disabled") && je.test(this.nodeName) && !ze.test(e) && (this.checked || !j.test(e)) }).map(function (e, t) { var n = m(this).val(); return null == n ? null : m.isArray(n) ? m.map(n, function (e) { return { name: t.name, value: e.replace(Be, "\r\n") } }) : { name: t.name, value: n.replace(Be, "\r\n") } }).get() } }), m.ajaxSettings.xhr = function () { try { return new XMLHttpRequest } catch (e) { } }; var Ue = 0, qe = {}, He = { 0: 200, 1223: 204 }, Ve = m.ajaxSettings.xhr(); n.attachEvent && n.attachEvent("onunload", function () { for (var e in qe) qe[e]() }), h.cors = !!Ve && "withCredentials" in Ve, h.ajax = Ve = !!Ve, m.ajaxTransport(function (e) { var t; if (h.cors || Ve && !e.crossDomain) return { send: function (n, r) { var i, o = e.xhr(), a = ++Ue; if (o.open(e.type, e.url, e.async, e.username, e.password), e.xhrFields) for (i in e.xhrFields) o[i] = e.xhrFields[i]; for (i in e.mimeType && o.overrideMimeType && o.overrideMimeType(e.mimeType), e.crossDomain || n["X-Requested-With"] || (n["X-Requested-With"] = "XMLHttpRequest"), n) o.setRequestHeader(i, n[i]); t = function (e) { return function () { t && (delete qe[a], t = o.onload = o.onerror = null, "abort" === e ? o.abort() : "error" === e ? r(o.status, o.statusText) : r(He[o.status] || o.status, o.statusText, "string" == typeof o.responseText ? { text: o.responseText } : void 0, o.getAllResponseHeaders())) } }, o.onload = t(), o.onerror = t("error"), t = qe[a] = t("abort"); try { o.send(e.hasContent && e.data || null) } catch (e) { if (t) throw e } }, abort: function () { t && t() } } }), m.ajaxSetup({ accepts: { script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript" }, contents: { script: /(?:java|ecma)script/ }, converters: { "text script": function (e) { return m.globalEval(e), e } } }), m.ajaxPrefilter("script", function (e) { void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET") }), m.ajaxTransport("script", function (e) { var t, n; if (e.crossDomain) return { send: function (r, i) { t = m("<script>").prop({ async: !0, charset: e.scriptCharset, src: e.url }).on("load error", n = function (e) { t.remove(), n = null, e && i("error" === e.type ? 404 : 200, e.type) }), p.head.appendChild(t[0]) }, abort: function () { n && n() } } }); var Ge = [], We = /(=)\?(?=&|$)|\?\?/; m.ajaxSetup({ jsonp: "callback", jsonpCallback: function () { var e = Ge.pop() || m.expando + "_" + Se++; return this[e] = !0, e } }), m.ajaxPrefilter("json jsonp", function (e, t, r) { var i, o, a, s = !1 !== e.jsonp && (We.test(e.url) ? "url" : "string" == typeof e.data && !(e.contentType || "").indexOf("application/x-www-form-urlencoded") && We.test(e.data) && "data"); if (s || "jsonp" === e.dataTypes[0]) return i = e.jsonpCallback = m.isFunction(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback, s ? e[s] = e[s].replace(We, "$1" + i) : !1 !== e.jsonp && (e.url += (ke.test(e.url) ? "&" : "?") + e.jsonp + "=" + i), e.converters["script json"] = function () { return a || m.error(i + " was not called"), a[0] }, e.dataTypes[0] = "json", o = n[i], n[i] = function () { a = arguments }, r.always(function () { n[i] = o, e[i] && (e.jsonpCallback = t.jsonpCallback, Ge.push(i)), a && m.isFunction(o) && o(a[0]), a = o = void 0 }), "script" }), m.parseHTML = function (e, t, n) { if (!e || "string" != typeof e) return null; "boolean" == typeof t && (n = t, t = !1), t = t || p; var r = x.exec(e), i = !n && []; return r ? [t.createElement(r[1])] : (r = m.buildFragment([e], t, i), i && i.length && m(i).remove(), m.merge([], r.childNodes)) }; var Ye = m.fn.load; m.fn.load = function (e, t, n) { if ("string" != typeof e && Ye) return Ye.apply(this, arguments); var r, i, o, a = this, s = e.indexOf(" "); return s >= 0 && (r = m.trim(e.slice(s)), e = e.slice(0, s)), m.isFunction(t) ? (n = t, t = void 0) : t && "object" == typeof t && (i = "POST"), a.length > 0 && m.ajax({ url: e, type: i, dataType: "html", data: t }).done(function (e) { o = arguments, a.html(r ? m("<div>").append(m.parseHTML(e)).find(r) : e) }).complete(n && function (e, t) { a.each(n, o || [e.responseText, t, e]) }), this }, m.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (e, t) { m.fn[t] = function (e) { return this.on(t, e) } }), m.expr.filters.animated = function (e) { return m.grep(m.timers, function (t) { return e === t.elem }).length }; var Ze = n.document.documentElement; function getWindow(e) { return m.isWindow(e) ? e : 9 === e.nodeType && e.defaultView } m.offset = { setOffset: function (e, t, n) { var r, i, o, a, s, l, u = m.css(e, "position"), c = m(e), d = {}; "static" === u && (e.style.position = "relative"), s = c.offset(), o = m.css(e, "top"), l = m.css(e, "left"), ("absolute" === u || "fixed" === u) && (o + l).indexOf("auto") > -1 ? (a = (r = c.position()).top, i = r.left) : (a = parseFloat(o) || 0, i = parseFloat(l) || 0), m.isFunction(t) && (t = t.call(e, n, s)), null != t.top && (d.top = t.top - s.top + a), null != t.left && (d.left = t.left - s.left + i), "using" in t ? t.using.call(e, d) : c.css(d) } }, m.fn.extend({ offset: function (e) { if (arguments.length) return void 0 === e ? this : this.each(function (t) { m.offset.setOffset(this, e, t) }); var t, n, r = this[0], i = { top: 0, left: 0 }, o = r && r.ownerDocument; return o ? (t = o.documentElement, m.contains(t, r) ? (void 0 !== r.getBoundingClientRect && (i = r.getBoundingClientRect()), n = getWindow(o), { top: i.top + n.pageYOffset - t.clientTop, left: i.left + n.pageXOffset - t.clientLeft }) : i) : void 0 }, position: function () { if (this[0]) { var e, t, n = this[0], r = { top: 0, left: 0 }; return "fixed" === m.css(n, "position") ? t = n.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), m.nodeName(e[0], "html") || (r = e.offset()), r.top += m.css(e[0], "borderTopWidth", !0), r.left += m.css(e[0], "borderLeftWidth", !0)), { top: t.top - r.top - m.css(n, "marginTop", !0), left: t.left - r.left - m.css(n, "marginLeft", !0) } } }, offsetParent: function () { return this.map(function () { for (var e = this.offsetParent || Ze; e && !m.nodeName(e, "html") && "static" === m.css(e, "position");)e = e.offsetParent; return e || Ze }) } }), m.each({ scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function (e, t) { var r = "pageYOffset" === t; m.fn[e] = function (i) { return P(this, function (e, i, o) { var a = getWindow(e); if (void 0 === o) return a ? a[t] : e[i]; a ? a.scrollTo(r ? n.pageXOffset : o, r ? o : n.pageYOffset) : e[i] = o }, e, i, arguments.length, null) } }), m.each(["top", "left"], function (e, t) { m.cssHooks[t] = addGetHookIf(h.pixelPosition, function (e, n) { if (n) return n = curCSS(e, t), ie.test(n) ? m(e).position()[t] + "px" : n }) }), m.each({ Height: "height", Width: "width" }, function (e, t) { m.each({ padding: "inner" + e, content: t, "": "outer" + e }, function (n, r) { m.fn[r] = function (r, i) { var o = arguments.length && (n || "boolean" != typeof r), a = n || (!0 === r || !0 === i ? "margin" : "border"); return P(this, function (t, n, r) { var i; return m.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (i = t.documentElement, Math.max(t.body["scroll" + e], i["scroll" + e], t.body["offset" + e], i["offset" + e], i["client" + e])) : void 0 === r ? m.css(t, n, a) : m.style(t, n, r, a) }, t, o ? r : void 0, o, null) } }) }), m.fn.size = function () { return this.length }, m.fn.andSelf = m.fn.addBack, void 0 === (r = function () { return m }.apply(t, [])) || (e.exports = r); var Ke = n.jQuery, Xe = n.$; return m.noConflict = function (e) { return n.$ === m && (n.$ = Xe), e && n.jQuery === m && (n.jQuery = Ke), m }, void 0 === i && (n.jQuery = n.$ = m), m }, "object" == typeof e && "object" == typeof e.exports ? e.exports = i.document ? o(i, !0) : function (e) { if (!e.document) throw new Error("jQuery requires a window with a document"); return o(e) } : o(i) }, function (e, t, n) { e.exports = n(3531) }, function (e, t, n) { e.exports = n(3516) }, function (e, t, n) { e.exports = n(3526) }, function (e, t, n) { e.exports = n(3403) }, function (e, t, n) { e.exports = n(3400) }, function (e, t, n) { e.exports = n(3406) }, function (e, t, n) { "use strict"; var r = n(133), i = n(636); r({ target: "RegExp", proto: !0, forced: /./.exec !== i }, { exec: i }) }, function (e, t, n) { e.exports = n(3528) }, function (e, t, n) { e.exports = n(3558) }, function (e, t, n) { e.exports = n(3583) }, function (e, t, n) { var r = n(1508); e.exports = function _defineProperty(e, t, n) { return t in e ? r(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } }, function (e, t, n) { e.exports = n(3346) }, function (e, t, n) { var r = n(3321), i = n(898), o = 36e5, a = 6e4, s = 2, l = /[T ]/, u = /:/, c = /^(\d{2})$/, d = [/^([+-]\d{2})$/, /^([+-]\d{3})$/, /^([+-]\d{4})$/], f = /^(\d{4})/, h = [/^([+-]\d{4})/, /^([+-]\d{5})/, /^([+-]\d{6})/], p = /^-(\d{2})$/, m = /^-?(\d{3})$/, g = /^-?(\d{2})-?(\d{2})$/, v = /^-?W(\d{2})$/, y = /^-?W(\d{2})-?(\d{1})$/, _ = /^(\d{2}([.,]\d*)?)$/, b = /^(\d{2}):?(\d{2}([.,]\d*)?)$/, w = /^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/, x = /([Z+-].*)$/, C = /^(Z)$/, S = /^([+-])(\d{2})$/, k = /^([+-])(\d{2}):?(\d{2})$/; function dayOfISOYear(e, t, n) { t = t || 0, n = n || 0; var r = new Date(0); r.setUTCFullYear(e, 0, 4); var i = 7 * t + n + 1 - (r.getUTCDay() || 7); return r.setUTCDate(r.getUTCDate() + i), r } e.exports = function parse(e, t) { if (i(e)) return new Date(e.getTime()); if ("string" != typeof e) return new Date(e); var n = (t || {}).additionalDigits; n = null == n ? s : Number(n); var T = function splitDateString(e) { var t, n = {}, r = e.split(l); if (u.test(r[0]) ? (n.date = null, t = r[0]) : (n.date = r[0], t = r[1]), t) { var i = x.exec(t); i ? (n.time = t.replace(i[1], ""), n.timezone = i[1]) : n.time = t } return n }(e), L = function parseYear(e, t) { var n, r = d[t], i = h[t]; if (n = f.exec(e) || i.exec(e)) { var o = n[1]; return { year: parseInt(o, 10), restDateString: e.slice(o.length) } } if (n = c.exec(e) || r.exec(e)) { var a = n[1]; return { year: 100 * parseInt(a, 10), restDateString: e.slice(a.length) } } return { year: null } }(T.date, n), M = L.year, E = function parseDate(e, t) { if (null === t) return null; var n, r, i, o; if (0 === e.length) return (r = new Date(0)).setUTCFullYear(t), r; if (n = p.exec(e)) return r = new Date(0), i = parseInt(n[1], 10) - 1, r.setUTCFullYear(t, i), r; if (n = m.exec(e)) { r = new Date(0); var a = parseInt(n[1], 10); return r.setUTCFullYear(t, 0, a), r } if (n = g.exec(e)) { r = new Date(0), i = parseInt(n[1], 10) - 1; var s = parseInt(n[2], 10); return r.setUTCFullYear(t, i, s), r } if (n = v.exec(e)) return o = parseInt(n[1], 10) - 1, dayOfISOYear(t, o); if (n = y.exec(e)) { o = parseInt(n[1], 10) - 1; var l = parseInt(n[2], 10) - 1; return dayOfISOYear(t, o, l) } return null }(L.restDateString, M); if (E) { var A, P = E.getTime(), R = 0; if (T.time && (R = function parseTime(e) { var t, n, r; if (t = _.exec(e)) return (n = parseFloat(t[1].replace(",", "."))) % 24 * o; if (t = b.exec(e)) return n = parseInt(t[1], 10), r = parseFloat(t[2].replace(",", ".")), n % 24 * o + r * a; if (t = w.exec(e)) { n = parseInt(t[1], 10), r = parseInt(t[2], 10); var i = parseFloat(t[3].replace(",", ".")); return n % 24 * o + r * a + 1e3 * i } return null }(T.time)), T.timezone) A = function parseTimezone(e) { var t, n; return (t = C.exec(e)) ? 0 : (t = S.exec(e)) ? (n = 60 * parseInt(t[2], 10), "+" === t[1] ? -n : n) : (t = k.exec(e)) ? (n = 60 * parseInt(t[2], 10) + parseInt(t[3], 10), "+" === t[1] ? -n : n) : 0 }(T.timezone) * a; else { var O = P + R, D = new Date(O); A = r(D); var F = new Date(O); F.setDate(D.getDate() + 1); var I = r(F) - r(D); I > 0 && (A += I) } return new Date(P + R + A) } return new Date(e) } }, function (e, t, n) { "use strict"; var r = n(133), i = n(459), o = n(308), a = n(927), s = [].join, l = i != Object, u = a("join", ","); r({ target: "Array", proto: !0, forced: l || !u }, { join: function join(e) { return s.call(o(this), void 0 === e ? "," : e) } }) }, function (e, t, n) { var r = n(146), i = n(154).f, o = Function.prototype, a = o.toString, s = /^\s*function ([^ (]*)/; !r || "name" in o || i(o, "name", { configurable: !0, get: function () { try { return a.call(this).match(s)[1] } catch (e) { return "" } } }) }, function (e, t, n) { "use strict"; var r = n(635), i = n(139), o = n(238), a = n(145), s = n(249), l = n(251), u = n(921), c = n(634), d = Math.max, f = Math.min, h = Math.floor, p = /\$([$&'`]|\d\d?|<[^>]*>)/g, m = /\$([$&'`]|\d\d?)/g; r("replace", 2, function (e, t, n, r) { var g = r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE, v = r.REPLACE_KEEPS_$0, y = g ? "$" : "$0"; return [function replace(n, r) { var i = l(this), o = void 0 == n ? void 0 : n[e]; return void 0 !== o ? o.call(n, i, r) : t.call(String(i), n, r) }, function (e, r) { if (!g && v || "string" == typeof r && -1 === r.indexOf(y)) { var o = n(t, e, this, r); if (o.done) return o.value } var l = i(e), h = String(this), p = "function" == typeof r; p || (r = String(r)); var m = l.global; if (m) { var _ = l.unicode; l.lastIndex = 0 } for (var b = []; ;) { var w = c(l, h); if (null === w) break; if (b.push(w), !m) break; "" === String(w[0]) && (l.lastIndex = u(h, a(l.lastIndex), _)) } for (var x, C = "", S = 0, k = 0; k < b.length; k++) { w = b[k]; for (var T = String(w[0]), L = d(f(s(w.index), h.length), 0), M = [], E = 1; E < w.length; E++)M.push(void 0 === (x = w[E]) ? x : String(x)); var A = w.groups; if (p) { var P = [T].concat(M, L, h); void 0 !== A && P.push(A); var R = String(r.apply(void 0, P)) } else R = getSubstitution(T, h, L, M, A, r); L >= S && (C += h.slice(S, L) + R, S = L + T.length) } return C + h.slice(S) }]; function getSubstitution(e, n, r, i, a, s) { var l = r + e.length, u = i.length, c = m; return void 0 !== a && (a = o(a), c = p), t.call(s, c, function (t, o) { var s; switch (o.charAt(0)) { case "$": return "$"; case "&": return e; case "`": return n.slice(0, r); case "'": return n.slice(l); case "<": s = a[o.slice(1, -1)]; break; default: var c = +o; if (0 === c) return t; if (c > u) { var d = h(c / 10); return 0 === d ? t : d <= u ? void 0 === i[d - 1] ? o.charAt(1) : i[d - 1] + o.charAt(1) : t } s = i[c - 1] }return void 0 === s ? "" : s }) } }) }, function (e, t, n) { e.exports = n(3510) }, function (e, t, n) { e.exports = n(3580) }, function (e, t, n) { e.exports = n(3407) }, function (e, t, n) { var r = n(924), i = n(213), o = n(3584); r || i(Object.prototype, "toString", o, { unsafe: !0 }) }, function (e, t, n) { e.exports = n(3513) }, , function (e, t, n) { "use strict"; n(133)({ target: "URL", proto: !0, enumerable: !0 }, { toJSON: function toJSON() { return URL.prototype.toString.call(this) } }) }, , function (e, t, n) { "use strict"; var r = n(119), i = n(384).f, o = n(1536), a = n(52), s = n(343), l = n(236), u = n(212), c = function (e) { var t = function (t, n, r) { if (this instanceof e) { switch (arguments.length) { case 0: return new e; case 1: return new e(t); case 2: return new e(t, n) }return new e(t, n, r) } return e.apply(this, arguments) }; return t.prototype = e.prototype, t }; e.exports = function (e, t) { var n, d, f, h, p, m, g, v, y = e.target, _ = e.global, b = e.stat, w = e.proto, x = _ ? r : b ? r[y] : (r[y] || {}).prototype, C = _ ? a : a[y] || (a[y] = {}), S = C.prototype; for (f in t) n = !o(_ ? f : y + (b ? "." : "#") + f, e.forced) && x && u(x, f), p = C[f], n && (m = e.noTargetGet ? (v = i(x, f)) && v.value : x[f]), h = n && m ? m : t[f], n && typeof p == typeof h || (g = e.bind && n ? s(h, r) : e.wrap && n ? c(h) : w && "function" == typeof h ? s(Function.call, h) : h, (e.sham || h && h.sham || p && p.sham) && l(g, "sham", !0), C[f] = g, w && (u(a, d = y + "Prototype") || l(a, d, {}), a[d][f] = h, e.real && S && !S[f] && l(S, f, h))) } }, function (e, t, n) { "use strict"; var r = n(635), i = n(1538), o = n(139), a = n(251), s = n(385), l = n(921), u = n(145), c = n(634), d = n(636), f = n(109), h = [].push, p = Math.min, m = !f(function () { return !RegExp(4294967295, "y") }); r("split", 2, function (e, t, n) { var r; return r = "c" == "abbc".split(/(b)*/)[1] || 4 != "test".split(/(?:)/, -1).length || 2 != "ab".split(/(?:ab)*/).length || 4 != ".".split(/(.?)(.?)/).length || ".".split(/()()/).length > 1 || "".split(/.?/).length ? function (e, n) { var r = String(a(this)), o = void 0 === n ? 4294967295 : n >>> 0; if (0 === o) return []; if (void 0 === e) return [r]; if (!i(e)) return t.call(r, e, o); for (var s, l, u, c = [], f = (e.ignoreCase ? "i" : "") + (e.multiline ? "m" : "") + (e.unicode ? "u" : "") + (e.sticky ? "y" : ""), p = 0, m = new RegExp(e.source, f + "g"); (s = d.call(m, r)) && !((l = m.lastIndex) > p && (c.push(r.slice(p, s.index)), s.length > 1 && s.index < r.length && h.apply(c, s.slice(1)), u = s[0].length, p = l, c.length >= o));)m.lastIndex === s.index && m.lastIndex++; return p === r.length ? !u && m.test("") || c.push("") : c.push(r.slice(p)), c.length > o ? c.slice(0, o) : c } : "0".split(void 0, 0).length ? function (e, n) { return void 0 === e && 0 === n ? [] : t.call(this, e, n) } : t, [function split(t, n) { var i = a(this), o = void 0 == t ? void 0 : t[e]; return void 0 !== o ? o.call(t, i, n) : r.call(String(i), t, n) }, function (e, i) { var a = n(r, e, this, i, r !== t); if (a.done) return a.value; var d = o(e), f = String(this), h = s(d, RegExp), g = d.unicode, v = (d.ignoreCase ? "i" : "") + (d.multiline ? "m" : "") + (d.unicode ? "u" : "") + (m ? "y" : "g"), y = new h(m ? d : "^(?:" + d.source + ")", v), _ = void 0 === i ? 4294967295 : i >>> 0; if (0 === _) return []; if (0 === f.length) return null === c(y, f) ? [f] : []; for (var b = 0, w = 0, x = []; w < f.length;) { y.lastIndex = m ? w : 0; var C, S = c(y, m ? f : f.slice(w)); if (null === S || (C = p(u(y.lastIndex + (m ? 0 : w)), f.length)) === b) w = l(f, w, g); else { if (x.push(f.slice(b, w)), x.length === _) return x; for (var k = 1; k <= S.length - 1; k++)if (x.push(S[k]), x.length === _) return x; w = b = C } } return x.push(f.slice(b)), x }] }, !m) }, function (e, t, n) { e.exports = n(3549) }, function (e, t, n) { e.exports = n(3375) }, function (e, t, n) { e.exports = n(3551) }, , function (e, t, n) { e.exports = n(3427) }, function (e, t, n) { var r = n(3435), i = n(1471), o = n(900), a = n(3428); e.exports = function _toConsumableArray(e) { return r(e) || i(e) || o(e) || a() } }, function (e, t, n) { (function (e) { e.exports = function () { "use strict"; var t; function hooks() { return t.apply(null, arguments) } function isArray(e) { return e instanceof Array || "[object Array]" === Object.prototype.toString.call(e) } function isObject(e) { return null != e && "[object Object]" === Object.prototype.toString.call(e) } function isUndefined(e) { return void 0 === e } function isNumber(e) { return "number" == typeof e || "[object Number]" === Object.prototype.toString.call(e) } function isDate(e) { return e instanceof Date || "[object Date]" === Object.prototype.toString.call(e) } function map(e, t) { var n, r = []; for (n = 0; n < e.length; ++n)r.push(t(e[n], n)); return r } function hasOwnProp(e, t) { return Object.prototype.hasOwnProperty.call(e, t) } function extend(e, t) { for (var n in t) hasOwnProp(t, n) && (e[n] = t[n]); return hasOwnProp(t, "toString") && (e.toString = t.toString), hasOwnProp(t, "valueOf") && (e.valueOf = t.valueOf), e } function createUTC(e, t, n, r) { return createLocalOrUTC(e, t, n, r, !0).utc() } function getParsingFlags(e) { return null == e._pf && (e._pf = { empty: !1, unusedTokens: [], unusedInput: [], overflow: -2, charsLeftOver: 0, nullInput: !1, invalidMonth: null, invalidFormat: !1, userInvalidated: !1, iso: !1, parsedDateParts: [], meridiem: null, rfc2822: !1, weekdayMismatch: !1 }), e._pf } var r = Array.prototype.some ? Array.prototype.some : function (e) { for (var t = Object(this), n = t.length >>> 0, r = 0; r < n; r++)if (r in t && e.call(this, t[r], r, t)) return !0; return !1 }; function isValid(e) { if (null == e._isValid) { var t = getParsingFlags(e), n = r.call(t.parsedDateParts, function (e) { return null != e }), i = !isNaN(e._d.getTime()) && t.overflow < 0 && !t.empty && !t.invalidMonth && !t.invalidWeekday && !t.nullInput && !t.invalidFormat && !t.userInvalidated && (!t.meridiem || t.meridiem && n); if (e._strict && (i = i && 0 === t.charsLeftOver && 0 === t.unusedTokens.length && void 0 === t.bigHour), null != Object.isFrozen && Object.isFrozen(e)) return i; e._isValid = i } return e._isValid } function createInvalid(e) { var t = createUTC(NaN); return null != e ? extend(getParsingFlags(t), e) : getParsingFlags(t).userInvalidated = !0, t } var i = hooks.momentProperties = []; function copyConfig(e, t) { var n, r, o; if (isUndefined(t._isAMomentObject) || (e._isAMomentObject = t._isAMomentObject), isUndefined(t._i) || (e._i = t._i), isUndefined(t._f) || (e._f = t._f), isUndefined(t._l) || (e._l = t._l), isUndefined(t._strict) || (e._strict = t._strict), isUndefined(t._tzm) || (e._tzm = t._tzm), isUndefined(t._isUTC) || (e._isUTC = t._isUTC), isUndefined(t._offset) || (e._offset = t._offset), isUndefined(t._pf) || (e._pf = getParsingFlags(t)), isUndefined(t._locale) || (e._locale = t._locale), i.length > 0) for (n = 0; n < i.length; n++)r = i[n], isUndefined(o = t[r]) || (e[r] = o); return e } var o = !1; function Moment(e) { copyConfig(this, e), this._d = new Date(null != e._d ? e._d.getTime() : NaN), this.isValid() || (this._d = new Date(NaN)), !1 === o && (o = !0, hooks.updateOffset(this), o = !1) } function isMoment(e) { return e instanceof Moment || null != e && null != e._isAMomentObject } function absFloor(e) { return e < 0 ? Math.ceil(e) || 0 : Math.floor(e) } function toInt(e) { var t = +e, n = 0; return 0 !== t && isFinite(t) && (n = absFloor(t)), n } function compareArrays(e, t, n) { var r, i = Math.min(e.length, t.length), o = Math.abs(e.length - t.length), a = 0; for (r = 0; r < i; r++)(n && e[r] !== t[r] || !n && toInt(e[r]) !== toInt(t[r])) && a++; return a + o } function warn(e) { !1 === hooks.suppressDeprecationWarnings && "undefined" != typeof console && console.warn && console.warn("Deprecation warning: " + e) } function deprecate(e, t) { var n = !0; return extend(function () { if (null != hooks.deprecationHandler && hooks.deprecationHandler(null, e), n) { for (var r, i = [], o = 0; o < arguments.length; o++) { if (r = "", "object" == typeof arguments[o]) { for (var a in r += "\n[" + o + "] ", arguments[0]) r += a + ": " + arguments[0][a] + ", "; r = r.slice(0, -2) } else r = arguments[o]; i.push(r) } warn(e + "\nArguments: " + Array.prototype.slice.call(i).join("") + "\n" + (new Error).stack), n = !1 } return t.apply(this, arguments) }, t) } var a = {}; function deprecateSimple(e, t) { null != hooks.deprecationHandler && hooks.deprecationHandler(e, t), a[e] || (warn(t), a[e] = !0) } function isFunction(e) { return e instanceof Function || "[object Function]" === Object.prototype.toString.call(e) } function mergeConfigs(e, t) { var n, r = extend({}, e); for (n in t) hasOwnProp(t, n) && (isObject(e[n]) && isObject(t[n]) ? (r[n] = {}, extend(r[n], e[n]), extend(r[n], t[n])) : null != t[n] ? r[n] = t[n] : delete r[n]); for (n in e) hasOwnProp(e, n) && !hasOwnProp(t, n) && isObject(e[n]) && (r[n] = extend({}, r[n])); return r } function Locale(e) { null != e && this.set(e) } hooks.suppressDeprecationWarnings = !1, hooks.deprecationHandler = null; var s = Object.keys ? Object.keys : function (e) { var t, n = []; for (t in e) hasOwnProp(e, t) && n.push(t); return n }, l = {}; function addUnitAlias(e, t) { var n = e.toLowerCase(); l[n] = l[n + "s"] = l[t] = e } function normalizeUnits(e) { return "string" == typeof e ? l[e] || l[e.toLowerCase()] : void 0 } function normalizeObjectUnits(e) { var t, n, r = {}; for (n in e) hasOwnProp(e, n) && (t = normalizeUnits(n)) && (r[t] = e[n]); return r } var u = {}; function addUnitPriority(e, t) { u[e] = t } function makeGetSet(e, t) { return function (n) { return null != n ? (set$1(this, e, n), hooks.updateOffset(this, t), this) : get(this, e) } } function get(e, t) { return e.isValid() ? e._d["get" + (e._isUTC ? "UTC" : "") + t]() : NaN } function set$1(e, t, n) { e.isValid() && e._d["set" + (e._isUTC ? "UTC" : "") + t](n) } function zeroFill(e, t, n) { var r = "" + Math.abs(e), i = t - r.length, o = e >= 0; return (o ? n ? "+" : "" : "-") + Math.pow(10, Math.max(0, i)).toString().substr(1) + r } var c = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g, d = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g, f = {}, h = {}; function addFormatToken(e, t, n, r) { var i = r; "string" == typeof r && (i = function () { return this[r]() }), e && (h[e] = i), t && (h[t[0]] = function () { return zeroFill(i.apply(this, arguments), t[1], t[2]) }), n && (h[n] = function () { return this.localeData().ordinal(i.apply(this, arguments), e) }) } function formatMoment(e, t) { return e.isValid() ? (t = expandFormat(t, e.localeData()), f[t] = f[t] || function makeFormatFunction(e) { var t, n, r, i = e.match(c); for (t = 0, n = i.length; t < n; t++)h[i[t]] ? i[t] = h[i[t]] : i[t] = (r = i[t]).match(/\[[\s\S]/) ? r.replace(/^\[|\]$/g, "") : r.replace(/\\/g, ""); return function (t) { var r, o = ""; for (r = 0; r < n; r++)o += isFunction(i[r]) ? i[r].call(t, e) : i[r]; return o } }(t), f[t](e)) : e.localeData().invalidDate() } function expandFormat(e, t) { var n = 5; function replaceLongDateFormatTokens(e) { return t.longDateFormat(e) || e } for (d.lastIndex = 0; n >= 0 && d.test(e);)e = e.replace(d, replaceLongDateFormatTokens), d.lastIndex = 0, n -= 1; return e } var p = /\d/, m = /\d\d/, g = /\d{3}/, v = /\d{4}/, y = /[+-]?\d{6}/, _ = /\d\d?/, b = /\d\d\d\d?/, w = /\d\d\d\d\d\d?/, x = /\d{1,3}/, C = /\d{1,4}/, S = /[+-]?\d{1,6}/, k = /\d+/, T = /[+-]?\d+/, L = /Z|[+-]\d\d:?\d\d/gi, M = /Z|[+-]\d\d(?::?\d\d)?/gi, E = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i, A = {}; function addRegexToken(e, t, n) { A[e] = isFunction(t) ? t : function (e, r) { return e && n ? n : t } } function getParseRegexForToken(e, t) { return hasOwnProp(A, e) ? A[e](t._strict, t._locale) : new RegExp(function unescapeFormat(e) { return regexEscape(e.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (e, t, n, r, i) { return t || n || r || i })) }(e)) } function regexEscape(e) { return e.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&") } var P = {}; function addParseToken(e, t) { var n, r = t; for ("string" == typeof e && (e = [e]), isNumber(t) && (r = function (e, n) { n[t] = toInt(e) }), n = 0; n < e.length; n++)P[e[n]] = r } function addWeekParseToken(e, t) { addParseToken(e, function (e, n, r, i) { r._w = r._w || {}, t(e, r._w, r, i) }) } function addTimeToArrayFromToken(e, t, n) { null != t && hasOwnProp(P, e) && P[e](t, n._a, n, e) } var R = 0, O = 1, D = 2, F = 3, I = 4, N = 5, $ = 6, B = 7, z = 8, j = Array.prototype.indexOf ? Array.prototype.indexOf : function (e) { var t; for (t = 0; t < this.length; ++t)if (this[t] === e) return t; return -1 }; function daysInMonth(e, t) { return new Date(Date.UTC(e, t + 1, 0)).getUTCDate() } addFormatToken("M", ["MM", 2], "Mo", function () { return this.month() + 1 }), addFormatToken("MMM", 0, 0, function (e) { return this.localeData().monthsShort(this, e) }), addFormatToken("MMMM", 0, 0, function (e) { return this.localeData().months(this, e) }), addUnitAlias("month", "M"), addUnitPriority("month", 8), addRegexToken("M", _), addRegexToken("MM", _, m), addRegexToken("MMM", function (e, t) { return t.monthsShortRegex(e) }), addRegexToken("MMMM", function (e, t) { return t.monthsRegex(e) }), addParseToken(["M", "MM"], function (e, t) { t[O] = toInt(e) - 1 }), addParseToken(["MMM", "MMMM"], function (e, t, n, r) { var i = n._locale.monthsParse(e, r, n._strict); null != i ? t[O] = i : getParsingFlags(n).invalidMonth = e }); var U = /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/, q = "January_February_March_April_May_June_July_August_September_October_November_December".split("_"), H = "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"); function setMonth(e, t) { var n; if (!e.isValid()) return e; if ("string" == typeof t) if (/^\d+$/.test(t)) t = toInt(t); else if (!isNumber(t = e.localeData().monthsParse(t))) return e; return n = Math.min(e.date(), daysInMonth(e.year(), t)), e._d["set" + (e._isUTC ? "UTC" : "") + "Month"](t, n), e } function getSetMonth(e) { return null != e ? (setMonth(this, e), hooks.updateOffset(this, !0), this) : get(this, "Month") } var V = E, G = E; function computeMonthsParse() { function cmpLenRev(e, t) { return t.length - e.length } var e, t, n = [], r = [], i = []; for (e = 0; e < 12; e++)t = createUTC([2e3, e]), n.push(this.monthsShort(t, "")), r.push(this.months(t, "")), i.push(this.months(t, "")), i.push(this.monthsShort(t, "")); for (n.sort(cmpLenRev), r.sort(cmpLenRev), i.sort(cmpLenRev), e = 0; e < 12; e++)n[e] = regexEscape(n[e]), r[e] = regexEscape(r[e]); for (e = 0; e < 24; e++)i[e] = regexEscape(i[e]); this._monthsRegex = new RegExp("^(" + i.join("|") + ")", "i"), this._monthsShortRegex = this._monthsRegex, this._monthsStrictRegex = new RegExp("^(" + r.join("|") + ")", "i"), this._monthsShortStrictRegex = new RegExp("^(" + n.join("|") + ")", "i") } function daysInYear(e) { return isLeapYear(e) ? 366 : 365 } function isLeapYear(e) { return e % 4 == 0 && e % 100 != 0 || e % 400 == 0 } addFormatToken("Y", 0, 0, function () { var e = this.year(); return e <= 9999 ? "" + e : "+" + e }), addFormatToken(0, ["YY", 2], 0, function () { return this.year() % 100 }), addFormatToken(0, ["YYYY", 4], 0, "year"), addFormatToken(0, ["YYYYY", 5], 0, "year"), addFormatToken(0, ["YYYYYY", 6, !0], 0, "year"), addUnitAlias("year", "y"), addUnitPriority("year", 1), addRegexToken("Y", T), addRegexToken("YY", _, m), addRegexToken("YYYY", C, v), addRegexToken("YYYYY", S, y), addRegexToken("YYYYYY", S, y), addParseToken(["YYYYY", "YYYYYY"], R), addParseToken("YYYY", function (e, t) { t[R] = 2 === e.length ? hooks.parseTwoDigitYear(e) : toInt(e) }), addParseToken("YY", function (e, t) { t[R] = hooks.parseTwoDigitYear(e) }), addParseToken("Y", function (e, t) { t[R] = parseInt(e, 10) }), hooks.parseTwoDigitYear = function (e) { return toInt(e) + (toInt(e) > 68 ? 1900 : 2e3) }; var W = makeGetSet("FullYear", !0); function createUTCDate(e) { var t = new Date(Date.UTC.apply(null, arguments)); return e < 100 && e >= 0 && isFinite(t.getUTCFullYear()) && t.setUTCFullYear(e), t } function firstWeekOffset(e, t, n) { var r = 7 + t - n, i = (7 + createUTCDate(e, 0, r).getUTCDay() - t) % 7; return -i + r - 1 } function dayOfYearFromWeeks(e, t, n, r, i) { var o, a, s = (7 + n - r) % 7, l = firstWeekOffset(e, r, i), u = 1 + 7 * (t - 1) + s + l; return u <= 0 ? a = daysInYear(o = e - 1) + u : u > daysInYear(e) ? (o = e + 1, a = u - daysInYear(e)) : (o = e, a = u), { year: o, dayOfYear: a } } function weekOfYear(e, t, n) { var r, i, o = firstWeekOffset(e.year(), t, n), a = Math.floor((e.dayOfYear() - o - 1) / 7) + 1; return a < 1 ? (i = e.year() - 1, r = a + weeksInYear(i, t, n)) : a > weeksInYear(e.year(), t, n) ? (r = a - weeksInYear(e.year(), t, n), i = e.year() + 1) : (i = e.year(), r = a), { week: r, year: i } } function weeksInYear(e, t, n) { var r = firstWeekOffset(e, t, n), i = firstWeekOffset(e + 1, t, n); return (daysInYear(e) - r + i) / 7 } addFormatToken("w", ["ww", 2], "wo", "week"), addFormatToken("W", ["WW", 2], "Wo", "isoWeek"), addUnitAlias("week", "w"), addUnitAlias("isoWeek", "W"), addUnitPriority("week", 5), addUnitPriority("isoWeek", 5), addRegexToken("w", _), addRegexToken("ww", _, m), addRegexToken("W", _), addRegexToken("WW", _, m), addWeekParseToken(["w", "ww", "W", "WW"], function (e, t, n, r) { t[r.substr(0, 1)] = toInt(e) }), addFormatToken("d", 0, "do", "day"), addFormatToken("dd", 0, 0, function (e) { return this.localeData().weekdaysMin(this, e) }), addFormatToken("ddd", 0, 0, function (e) { return this.localeData().weekdaysShort(this, e) }), addFormatToken("dddd", 0, 0, function (e) { return this.localeData().weekdays(this, e) }), addFormatToken("e", 0, 0, "weekday"), addFormatToken("E", 0, 0, "isoWeekday"), addUnitAlias("day", "d"), addUnitAlias("weekday", "e"), addUnitAlias("isoWeekday", "E"), addUnitPriority("day", 11), addUnitPriority("weekday", 11), addUnitPriority("isoWeekday", 11), addRegexToken("d", _), addRegexToken("e", _), addRegexToken("E", _), addRegexToken("dd", function (e, t) { return t.weekdaysMinRegex(e) }), addRegexToken("ddd", function (e, t) { return t.weekdaysShortRegex(e) }), addRegexToken("dddd", function (e, t) { return t.weekdaysRegex(e) }), addWeekParseToken(["dd", "ddd", "dddd"], function (e, t, n, r) { var i = n._locale.weekdaysParse(e, r, n._strict); null != i ? t.d = i : getParsingFlags(n).invalidWeekday = e }), addWeekParseToken(["d", "e", "E"], function (e, t, n, r) { t[r] = toInt(e) }); var Y = "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), Z = "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"), K = "Su_Mo_Tu_We_Th_Fr_Sa".split("_"), X = E, J = E, Q = E; function computeWeekdaysParse() { function cmpLenRev(e, t) { return t.length - e.length } var e, t, n, r, i, o = [], a = [], s = [], l = []; for (e = 0; e < 7; e++)t = createUTC([2e3, 1]).day(e), n = this.weekdaysMin(t, ""), r = this.weekdaysShort(t, ""), i = this.weekdays(t, ""), o.push(n), a.push(r), s.push(i), l.push(n), l.push(r), l.push(i); for (o.sort(cmpLenRev), a.sort(cmpLenRev), s.sort(cmpLenRev), l.sort(cmpLenRev), e = 0; e < 7; e++)a[e] = regexEscape(a[e]), s[e] = regexEscape(s[e]), l[e] = regexEscape(l[e]); this._weekdaysRegex = new RegExp("^(" + l.join("|") + ")", "i"), this._weekdaysShortRegex = this._weekdaysRegex, this._weekdaysMinRegex = this._weekdaysRegex, this._weekdaysStrictRegex = new RegExp("^(" + s.join("|") + ")", "i"), this._weekdaysShortStrictRegex = new RegExp("^(" + a.join("|") + ")", "i"), this._weekdaysMinStrictRegex = new RegExp("^(" + o.join("|") + ")", "i") } function hFormat() { return this.hours() % 12 || 12 } function meridiem(e, t) { addFormatToken(e, 0, 0, function () { return this.localeData().meridiem(this.hours(), this.minutes(), t) }) } function matchMeridiem(e, t) { return t._meridiemParse } addFormatToken("H", ["HH", 2], 0, "hour"), addFormatToken("h", ["hh", 2], 0, hFormat), addFormatToken("k", ["kk", 2], 0, function kFormat() { return this.hours() || 24 }), addFormatToken("hmm", 0, 0, function () { return "" + hFormat.apply(this) + zeroFill(this.minutes(), 2) }), addFormatToken("hmmss", 0, 0, function () { return "" + hFormat.apply(this) + zeroFill(this.minutes(), 2) + zeroFill(this.seconds(), 2) }), addFormatToken("Hmm", 0, 0, function () { return "" + this.hours() + zeroFill(this.minutes(), 2) }), addFormatToken("Hmmss", 0, 0, function () { return "" + this.hours() + zeroFill(this.minutes(), 2) + zeroFill(this.seconds(), 2) }), meridiem("a", !0), meridiem("A", !1), addUnitAlias("hour", "h"), addUnitPriority("hour", 13), addRegexToken("a", matchMeridiem), addRegexToken("A", matchMeridiem), addRegexToken("H", _), addRegexToken("h", _), addRegexToken("k", _), addRegexToken("HH", _, m), addRegexToken("hh", _, m), addRegexToken("kk", _, m), addRegexToken("hmm", b), addRegexToken("hmmss", w), addRegexToken("Hmm", b), addRegexToken("Hmmss", w), addParseToken(["H", "HH"], F), addParseToken(["k", "kk"], function (e, t, n) { var r = toInt(e); t[F] = 24 === r ? 0 : r }), addParseToken(["a", "A"], function (e, t, n) { n._isPm = n._locale.isPM(e), n._meridiem = e }), addParseToken(["h", "hh"], function (e, t, n) { t[F] = toInt(e), getParsingFlags(n).bigHour = !0 }), addParseToken("hmm", function (e, t, n) { var r = e.length - 2; t[F] = toInt(e.substr(0, r)), t[I] = toInt(e.substr(r)), getParsingFlags(n).bigHour = !0 }), addParseToken("hmmss", function (e, t, n) { var r = e.length - 4, i = e.length - 2; t[F] = toInt(e.substr(0, r)), t[I] = toInt(e.substr(r, 2)), t[N] = toInt(e.substr(i)), getParsingFlags(n).bigHour = !0 }), addParseToken("Hmm", function (e, t, n) { var r = e.length - 2; t[F] = toInt(e.substr(0, r)), t[I] = toInt(e.substr(r)) }), addParseToken("Hmmss", function (e, t, n) { var r = e.length - 4, i = e.length - 2; t[F] = toInt(e.substr(0, r)), t[I] = toInt(e.substr(r, 2)), t[N] = toInt(e.substr(i)) }); var ee, te = makeGetSet("Hours", !0), ne = { calendar: { sameDay: "[Today at] LT", nextDay: "[Tomorrow at] LT", nextWeek: "dddd [at] LT", lastDay: "[Yesterday at] LT", lastWeek: "[Last] dddd [at] LT", sameElse: "L" }, longDateFormat: { LTS: "h:mm:ss A", LT: "h:mm A", L: "MM/DD/YYYY", LL: "MMMM D, YYYY", LLL: "MMMM D, YYYY h:mm A", LLLL: "dddd, MMMM D, YYYY h:mm A" }, invalidDate: "Invalid date", ordinal: "%d", dayOfMonthOrdinalParse: /\d{1,2}/, relativeTime: { future: "in %s", past: "%s ago", s: "a few seconds", ss: "%d seconds", m: "a minute", mm: "%d minutes", h: "an hour", hh: "%d hours", d: "a day", dd: "%d days", M: "a month", MM: "%d months", y: "a year", yy: "%d years" }, months: q, monthsShort: H, week: { dow: 0, doy: 6 }, weekdays: Y, weekdaysMin: K, weekdaysShort: Z, meridiemParse: /[ap]\.?m?\.?/i }, re = {}, ie = {}; function normalizeLocale(e) { return e ? e.toLowerCase().replace("_", "-") : e } function loadLocale(t) { var r = null; if (!re[t] && void 0 !== e && e && e.exports) try { r = ee._abbr, n(137)("./" + t), getSetGlobalLocale(r) } catch (e) { } return re[t] } function getSetGlobalLocale(e, t) { var n; return e && (n = isUndefined(t) ? getLocale(e) : defineLocale(e, t)) && (ee = n), ee._abbr } function defineLocale(e, t) { if (null !== t) { var n = ne; if (t.abbr = e, null != re[e]) deprecateSimple("defineLocaleOverride", "use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."), n = re[e]._config; else if (null != t.parentLocale) { if (null == re[t.parentLocale]) return ie[t.parentLocale] || (ie[t.parentLocale] = []), ie[t.parentLocale].push({ name: e, config: t }), null; n = re[t.parentLocale]._config } return re[e] = new Locale(mergeConfigs(n, t)), ie[e] && ie[e].forEach(function (e) { defineLocale(e.name, e.config) }), getSetGlobalLocale(e), re[e] } return delete re[e], null } function getLocale(e) { var t; if (e && e._locale && e._locale._abbr && (e = e._locale._abbr), !e) return ee; if (!isArray(e)) { if (t = loadLocale(e)) return t; e = [e] } return function chooseLocale(e) { for (var t, n, r, i, o = 0; o < e.length;) { for (i = normalizeLocale(e[o]).split("-"), t = i.length, n = (n = normalizeLocale(e[o + 1])) ? n.split("-") : null; t > 0;) { if (r = loadLocale(i.slice(0, t).join("-"))) return r; if (n && n.length >= t && compareArrays(i, n, !0) >= t - 1) break; t-- } o++ } return null }(e) } function checkOverflow(e) { var t, n = e._a; return n && -2 === getParsingFlags(e).overflow && (t = n[O] < 0 || n[O] > 11 ? O : n[D] < 1 || n[D] > daysInMonth(n[R], n[O]) ? D : n[F] < 0 || n[F] > 24 || 24 === n[F] && (0 !== n[I] || 0 !== n[N] || 0 !== n[$]) ? F : n[I] < 0 || n[I] > 59 ? I : n[N] < 0 || n[N] > 59 ? N : n[$] < 0 || n[$] > 999 ? $ : -1, getParsingFlags(e)._overflowDayOfYear && (t < R || t > D) && (t = D), getParsingFlags(e)._overflowWeeks && -1 === t && (t = B), getParsingFlags(e)._overflowWeekday && -1 === t && (t = z), getParsingFlags(e).overflow = t), e } var oe = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/, ae = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/, se = /Z|[+-]\d\d(?::?\d\d)?/, le = [["YYYYYY-MM-DD", /[+-]\d{6}-\d\d-\d\d/], ["YYYY-MM-DD", /\d{4}-\d\d-\d\d/], ["GGGG-[W]WW-E", /\d{4}-W\d\d-\d/], ["GGGG-[W]WW", /\d{4}-W\d\d/, !1], ["YYYY-DDD", /\d{4}-\d{3}/], ["YYYY-MM", /\d{4}-\d\d/, !1], ["YYYYYYMMDD", /[+-]\d{10}/], ["YYYYMMDD", /\d{8}/], ["GGGG[W]WWE", /\d{4}W\d{3}/], ["GGGG[W]WW", /\d{4}W\d{2}/, !1], ["YYYYDDD", /\d{7}/]], ue = [["HH:mm:ss.SSSS", /\d\d:\d\d:\d\d\.\d+/], ["HH:mm:ss,SSSS", /\d\d:\d\d:\d\d,\d+/], ["HH:mm:ss", /\d\d:\d\d:\d\d/], ["HH:mm", /\d\d:\d\d/], ["HHmmss.SSSS", /\d\d\d\d\d\d\.\d+/], ["HHmmss,SSSS", /\d\d\d\d\d\d,\d+/], ["HHmmss", /\d\d\d\d\d\d/], ["HHmm", /\d\d\d\d/], ["HH", /\d\d/]], ce = /^\/?Date\((\-?\d+)/i; function configFromISO(e) { var t, n, r, i, o, a, s = e._i, l = oe.exec(s) || ae.exec(s); if (l) { for (getParsingFlags(e).iso = !0, t = 0, n = le.length; t < n; t++)if (le[t][1].exec(l[1])) { i = le[t][0], r = !1 !== le[t][2]; break } if (null == i) return void (e._isValid = !1); if (l[3]) { for (t = 0, n = ue.length; t < n; t++)if (ue[t][1].exec(l[3])) { o = (l[2] || " ") + ue[t][0]; break } if (null == o) return void (e._isValid = !1) } if (!r && null != o) return void (e._isValid = !1); if (l[4]) { if (!se.exec(l[4])) return void (e._isValid = !1); a = "Z" } e._f = i + (o || "") + (a || ""), configFromStringAndFormat(e) } else e._isValid = !1 } var de = /^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/; function configFromRFC2822(e) { var t, n, r, i, o, a, s, l, u = { " GMT": " +0000", " EDT": " -0400", " EST": " -0500", " CDT": " -0500", " CST": " -0600", " MDT": " -0600", " MST": " -0700", " PDT": " -0700", " PST": " -0800" }; if (t = e._i.replace(/\([^\)]*\)|[\n\t]/g, " ").replace(/(\s\s+)/g, " ").replace(/^\s|\s$/g, ""), n = de.exec(t)) { if (r = n[1] ? "ddd" + (5 === n[1].length ? ", " : " ") : "", i = "D MMM " + (n[2].length > 10 ? "YYYY " : "YY "), o = "HH:mm" + (n[4] ? ":ss" : ""), n[1]) { var c = new Date(n[2]), d = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][c.getDay()]; if (n[1].substr(0, 3) !== d) return getParsingFlags(e).weekdayMismatch = !0, void (e._isValid = !1) } switch (n[5].length) { case 2: 0 === l ? s = " +0000" : (l = "YXWVUTSRQPONZABCDEFGHIKLM".indexOf(n[5][1].toUpperCase()) - 12, s = (l < 0 ? " -" : " +") + ("" + l).replace(/^-?/, "0").match(/..$/)[0] + "00"); break; case 4: s = u[n[5]]; break; default: s = u[" GMT"] }n[5] = s, e._i = n.splice(1).join(""), a = " ZZ", e._f = r + i + o + a, configFromStringAndFormat(e), getParsingFlags(e).rfc2822 = !0 } else e._isValid = !1 } function defaults(e, t, n) { return null != e ? e : null != t ? t : n } function configFromArray(e) { var t, n, r, i, o = []; if (!e._d) { for (r = function currentDateArray(e) { var t = new Date(hooks.now()); return e._useUTC ? [t.getUTCFullYear(), t.getUTCMonth(), t.getUTCDate()] : [t.getFullYear(), t.getMonth(), t.getDate()] }(e), e._w && null == e._a[D] && null == e._a[O] && function dayOfYearFromWeekInfo(e) { var t, n, r, i, o, a, s, l; if (null != (t = e._w).GG || null != t.W || null != t.E) o = 1, a = 4, n = defaults(t.GG, e._a[R], weekOfYear(createLocal(), 1, 4).year), r = defaults(t.W, 1), ((i = defaults(t.E, 1)) < 1 || i > 7) && (l = !0); else { o = e._locale._week.dow, a = e._locale._week.doy; var u = weekOfYear(createLocal(), o, a); n = defaults(t.gg, e._a[R], u.year), r = defaults(t.w, u.week), null != t.d ? ((i = t.d) < 0 || i > 6) && (l = !0) : null != t.e ? (i = t.e + o, (t.e < 0 || t.e > 6) && (l = !0)) : i = o } r < 1 || r > weeksInYear(n, o, a) ? getParsingFlags(e)._overflowWeeks = !0 : null != l ? getParsingFlags(e)._overflowWeekday = !0 : (s = dayOfYearFromWeeks(n, r, i, o, a), e._a[R] = s.year, e._dayOfYear = s.dayOfYear) }(e), null != e._dayOfYear && (i = defaults(e._a[R], r[R]), (e._dayOfYear > daysInYear(i) || 0 === e._dayOfYear) && (getParsingFlags(e)._overflowDayOfYear = !0), n = createUTCDate(i, 0, e._dayOfYear), e._a[O] = n.getUTCMonth(), e._a[D] = n.getUTCDate()), t = 0; t < 3 && null == e._a[t]; ++t)e._a[t] = o[t] = r[t]; for (; t < 7; t++)e._a[t] = o[t] = null == e._a[t] ? 2 === t ? 1 : 0 : e._a[t]; 24 === e._a[F] && 0 === e._a[I] && 0 === e._a[N] && 0 === e._a[$] && (e._nextDay = !0, e._a[F] = 0), e._d = (e._useUTC ? createUTCDate : function createDate(e, t, n, r, i, o, a) { var s = new Date(e, t, n, r, i, o, a); return e < 100 && e >= 0 && isFinite(s.getFullYear()) && s.setFullYear(e), s }).apply(null, o), null != e._tzm && e._d.setUTCMinutes(e._d.getUTCMinutes() - e._tzm), e._nextDay && (e._a[F] = 24) } } function configFromStringAndFormat(e) { if (e._f !== hooks.ISO_8601) if (e._f !== hooks.RFC_2822) { e._a = [], getParsingFlags(e).empty = !0; var t, n, r, i, o, a = "" + e._i, s = a.length, l = 0; for (r = expandFormat(e._f, e._locale).match(c) || [], t = 0; t < r.length; t++)i = r[t], (n = (a.match(getParseRegexForToken(i, e)) || [])[0]) && ((o = a.substr(0, a.indexOf(n))).length > 0 && getParsingFlags(e).unusedInput.push(o), a = a.slice(a.indexOf(n) + n.length), l += n.length), h[i] ? (n ? getParsingFlags(e).empty = !1 : getParsingFlags(e).unusedTokens.push(i), addTimeToArrayFromToken(i, n, e)) : e._strict && !n && getParsingFlags(e).unusedTokens.push(i); getParsingFlags(e).charsLeftOver = s - l, a.length > 0 && getParsingFlags(e).unusedInput.push(a), e._a[F] <= 12 && !0 === getParsingFlags(e).bigHour && e._a[F] > 0 && (getParsingFlags(e).bigHour = void 0), getParsingFlags(e).parsedDateParts = e._a.slice(0), getParsingFlags(e).meridiem = e._meridiem, e._a[F] = function meridiemFixWrap(e, t, n) { var r; return null == n ? t : null != e.meridiemHour ? e.meridiemHour(t, n) : null != e.isPM ? ((r = e.isPM(n)) && t < 12 && (t += 12), r || 12 !== t || (t = 0), t) : t }(e._locale, e._a[F], e._meridiem), configFromArray(e), checkOverflow(e) } else configFromRFC2822(e); else configFromISO(e) } function prepareConfig(e) { var t = e._i, n = e._f; return e._locale = e._locale || getLocale(e._l), null === t || void 0 === n && "" === t ? createInvalid({ nullInput: !0 }) : ("string" == typeof t && (e._i = t = e._locale.preparse(t)), isMoment(t) ? new Moment(checkOverflow(t)) : (isDate(t) ? e._d = t : isArray(n) ? function configFromStringAndArray(e) { var t, n, r, i, o; if (0 === e._f.length) return getParsingFlags(e).invalidFormat = !0, void (e._d = new Date(NaN)); for (i = 0; i < e._f.length; i++)o = 0, t = copyConfig({}, e), null != e._useUTC && (t._useUTC = e._useUTC), t._f = e._f[i], configFromStringAndFormat(t), isValid(t) && (o += getParsingFlags(t).charsLeftOver, o += 10 * getParsingFlags(t).unusedTokens.length, getParsingFlags(t).score = o, (null == r || o < r) && (r = o, n = t)); extend(e, n || t) }(e) : n ? configFromStringAndFormat(e) : function configFromInput(e) { var t = e._i; isUndefined(t) ? e._d = new Date(hooks.now()) : isDate(t) ? e._d = new Date(t.valueOf()) : "string" == typeof t ? function configFromString(e) { var t = ce.exec(e._i); null === t ? (configFromISO(e), !1 === e._isValid && (delete e._isValid, configFromRFC2822(e), !1 === e._isValid && (delete e._isValid, hooks.createFromInputFallback(e)))) : e._d = new Date(+t[1]) }(e) : isArray(t) ? (e._a = map(t.slice(0), function (e) { return parseInt(e, 10) }), configFromArray(e)) : isObject(t) ? function configFromObject(e) { if (!e._d) { var t = normalizeObjectUnits(e._i); e._a = map([t.year, t.month, t.day || t.date, t.hour, t.minute, t.second, t.millisecond], function (e) { return e && parseInt(e, 10) }), configFromArray(e) } }(e) : isNumber(t) ? e._d = new Date(t) : hooks.createFromInputFallback(e) }(e), isValid(e) || (e._d = null), e)) } function createLocalOrUTC(e, t, n, r, i) { var o = {}; return !0 !== n && !1 !== n || (r = n, n = void 0), (isObject(e) && function isObjectEmpty(e) { var t; for (t in e) return !1; return !0 }(e) || isArray(e) && 0 === e.length) && (e = void 0), o._isAMomentObject = !0, o._useUTC = o._isUTC = i, o._l = n, o._i = e, o._f = t, o._strict = r, function createFromConfig(e) { var t = new Moment(checkOverflow(prepareConfig(e))); return t._nextDay && (t.add(1, "d"), t._nextDay = void 0), t }(o) } function createLocal(e, t, n, r) { return createLocalOrUTC(e, t, n, r, !1) } hooks.createFromInputFallback = deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.", function (e) { e._d = new Date(e._i + (e._useUTC ? " UTC" : "")) }), hooks.ISO_8601 = function () { }, hooks.RFC_2822 = function () { }; var fe = deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/", function () { var e = createLocal.apply(null, arguments); return this.isValid() && e.isValid() ? e < this ? this : e : createInvalid() }), he = deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/", function () { var e = createLocal.apply(null, arguments); return this.isValid() && e.isValid() ? e > this ? this : e : createInvalid() }); function pickBy(e, t) { var n, r; if (1 === t.length && isArray(t[0]) && (t = t[0]), !t.length) return createLocal(); for (n = t[0], r = 1; r < t.length; ++r)t[r].isValid() && !t[r][e](n) || (n = t[r]); return n } var pe = ["year", "quarter", "month", "week", "day", "hour", "minute", "second", "millisecond"]; function Duration(e) { var t = normalizeObjectUnits(e), n = t.year || 0, r = t.quarter || 0, i = t.month || 0, o = t.week || 0, a = t.day || 0, s = t.hour || 0, l = t.minute || 0, u = t.second || 0, c = t.millisecond || 0; this._isValid = function isDurationValid(e) { for (var t in e) if (-1 === pe.indexOf(t) || null != e[t] && isNaN(e[t])) return !1; for (var n = !1, r = 0; r < pe.length; ++r)if (e[pe[r]]) { if (n) return !1; parseFloat(e[pe[r]]) !== toInt(e[pe[r]]) && (n = !0) } return !0 }(t), this._milliseconds = +c + 1e3 * u + 6e4 * l + 1e3 * s * 60 * 60, this._days = +a + 7 * o, this._months = +i + 3 * r + 12 * n, this._data = {}, this._locale = getLocale(), this._bubble() } function isDuration(e) { return e instanceof Duration } function absRound(e) { return e < 0 ? -1 * Math.round(-1 * e) : Math.round(e) } function offset(e, t) { addFormatToken(e, 0, 0, function () { var e = this.utcOffset(), n = "+"; return e < 0 && (e = -e, n = "-"), n + zeroFill(~~(e / 60), 2) + t + zeroFill(~~e % 60, 2) }) } offset("Z", ":"), offset("ZZ", ""), addRegexToken("Z", M), addRegexToken("ZZ", M), addParseToken(["Z", "ZZ"], function (e, t, n) { n._useUTC = !0, n._tzm = offsetFromString(M, e) }); var me = /([\+\-]|\d\d)/gi; function offsetFromString(e, t) { var n = (t || "").match(e); if (null === n) return null; var r = n[n.length - 1] || [], i = (r + "").match(me) || ["-", 0, 0], o = 60 * i[1] + toInt(i[2]); return 0 === o ? 0 : "+" === i[0] ? o : -o } function cloneWithOffset(e, t) { var n, r; return t._isUTC ? (n = t.clone(), r = (isMoment(e) || isDate(e) ? e.valueOf() : createLocal(e).valueOf()) - n.valueOf(), n._d.setTime(n._d.valueOf() + r), hooks.updateOffset(n, !1), n) : createLocal(e).local() } function getDateOffset(e) { return 15 * -Math.round(e._d.getTimezoneOffset() / 15) } function isUtc() { return !!this.isValid() && this._isUTC && 0 === this._offset } hooks.updateOffset = function () { }; var ge = /^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/, ve = /^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/; function createDuration(e, t) { var n, r, i, o = e, a = null; return isDuration(e) ? o = { ms: e._milliseconds, d: e._days, M: e._months } : isNumber(e) ? (o = {}, t ? o[t] = e : o.milliseconds = e) : (a = ge.exec(e)) ? (n = "-" === a[1] ? -1 : 1, o = { y: 0, d: toInt(a[D]) * n, h: toInt(a[F]) * n, m: toInt(a[I]) * n, s: toInt(a[N]) * n, ms: toInt(absRound(1e3 * a[$])) * n }) : (a = ve.exec(e)) ? (n = "-" === a[1] ? -1 : 1, o = { y: parseIso(a[2], n), M: parseIso(a[3], n), w: parseIso(a[4], n), d: parseIso(a[5], n), h: parseIso(a[6], n), m: parseIso(a[7], n), s: parseIso(a[8], n) }) : null == o ? o = {} : "object" == typeof o && ("from" in o || "to" in o) && (i = function momentsDifference(e, t) { var n; return e.isValid() && t.isValid() ? (t = cloneWithOffset(t, e), e.isBefore(t) ? n = positiveMomentsDifference(e, t) : ((n = positiveMomentsDifference(t, e)).milliseconds = -n.milliseconds, n.months = -n.months), n) : { milliseconds: 0, months: 0 } }(createLocal(o.from), createLocal(o.to)), (o = {}).ms = i.milliseconds, o.M = i.months), r = new Duration(o), isDuration(e) && hasOwnProp(e, "_locale") && (r._locale = e._locale), r } function parseIso(e, t) { var n = e && parseFloat(e.replace(",", ".")); return (isNaN(n) ? 0 : n) * t } function positiveMomentsDifference(e, t) { var n = { milliseconds: 0, months: 0 }; return n.months = t.month() - e.month() + 12 * (t.year() - e.year()), e.clone().add(n.months, "M").isAfter(t) && --n.months, n.milliseconds = +t - +e.clone().add(n.months, "M"), n } function createAdder(e, t) { return function (n, r) { var i; return null === r || isNaN(+r) || (deprecateSimple(t, "moment()." + t + "(period, number) is deprecated. Please use moment()." + t + "(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."), i = n, n = r, r = i), addSubtract(this, createDuration(n = "string" == typeof n ? +n : n, r), e), this } } function addSubtract(e, t, n, r) { var i = t._milliseconds, o = absRound(t._days), a = absRound(t._months); e.isValid() && (r = null == r || r, i && e._d.setTime(e._d.valueOf() + i * n), o && set$1(e, "Date", get(e, "Date") + o * n), a && setMonth(e, get(e, "Month") + a * n), r && hooks.updateOffset(e, o || a)) } createDuration.fn = Duration.prototype, createDuration.invalid = function createInvalid$1() { return createDuration(NaN) }; var ye = createAdder(1, "add"), _e = createAdder(-1, "subtract"); function locale(e) { var t; return void 0 === e ? this._locale._abbr : (null != (t = getLocale(e)) && (this._locale = t), this) } hooks.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ", hooks.defaultFormatUtc = "YYYY-MM-DDTHH:mm:ss[Z]"; var be = deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function (e) { return void 0 === e ? this.localeData() : this.locale(e) }); function localeData() { return this._locale } function addWeekYearFormatToken(e, t) { addFormatToken(0, [e, e.length], 0, t) } function getSetWeekYearHelper(e, t, n, r, i) { var o; return null == e ? weekOfYear(this, r, i).year : (o = weeksInYear(e, r, i), t > o && (t = o), function setWeekAll(e, t, n, r, i) { var o = dayOfYearFromWeeks(e, t, n, r, i), a = createUTCDate(o.year, 0, o.dayOfYear); return this.year(a.getUTCFullYear()), this.month(a.getUTCMonth()), this.date(a.getUTCDate()), this }.call(this, e, t, n, r, i)) } addFormatToken(0, ["gg", 2], 0, function () { return this.weekYear() % 100 }), addFormatToken(0, ["GG", 2], 0, function () { return this.isoWeekYear() % 100 }), addWeekYearFormatToken("gggg", "weekYear"), addWeekYearFormatToken("ggggg", "weekYear"), addWeekYearFormatToken("GGGG", "isoWeekYear"), addWeekYearFormatToken("GGGGG", "isoWeekYear"), addUnitAlias("weekYear", "gg"), addUnitAlias("isoWeekYear", "GG"), addUnitPriority("weekYear", 1), addUnitPriority("isoWeekYear", 1), addRegexToken("G", T), addRegexToken("g", T), addRegexToken("GG", _, m), addRegexToken("gg", _, m), addRegexToken("GGGG", C, v), addRegexToken("gggg", C, v), addRegexToken("GGGGG", S, y), addRegexToken("ggggg", S, y), addWeekParseToken(["gggg", "ggggg", "GGGG", "GGGGG"], function (e, t, n, r) { t[r.substr(0, 2)] = toInt(e) }), addWeekParseToken(["gg", "GG"], function (e, t, n, r) { t[r] = hooks.parseTwoDigitYear(e) }), addFormatToken("Q", 0, "Qo", "quarter"), addUnitAlias("quarter", "Q"), addUnitPriority("quarter", 7), addRegexToken("Q", p), addParseToken("Q", function (e, t) { t[O] = 3 * (toInt(e) - 1) }), addFormatToken("D", ["DD", 2], "Do", "date"), addUnitAlias("date", "D"), addUnitPriority("date", 9), addRegexToken("D", _), addRegexToken("DD", _, m), addRegexToken("Do", function (e, t) { return e ? t._dayOfMonthOrdinalParse || t._ordinalParse : t._dayOfMonthOrdinalParseLenient }), addParseToken(["D", "DD"], D), addParseToken("Do", function (e, t) { t[D] = toInt(e.match(_)[0]) }); var we = makeGetSet("Date", !0); addFormatToken("DDD", ["DDDD", 3], "DDDo", "dayOfYear"), addUnitAlias("dayOfYear", "DDD"), addUnitPriority("dayOfYear", 4), addRegexToken("DDD", x), addRegexToken("DDDD", g), addParseToken(["DDD", "DDDD"], function (e, t, n) { n._dayOfYear = toInt(e) }), addFormatToken("m", ["mm", 2], 0, "minute"), addUnitAlias("minute", "m"), addUnitPriority("minute", 14), addRegexToken("m", _), addRegexToken("mm", _, m), addParseToken(["m", "mm"], I); var xe = makeGetSet("Minutes", !1); addFormatToken("s", ["ss", 2], 0, "second"), addUnitAlias("second", "s"), addUnitPriority("second", 15), addRegexToken("s", _), addRegexToken("ss", _, m), addParseToken(["s", "ss"], N); var Ce, Se = makeGetSet("Seconds", !1); for (addFormatToken("S", 0, 0, function () { return ~~(this.millisecond() / 100) }), addFormatToken(0, ["SS", 2], 0, function () { return ~~(this.millisecond() / 10) }), addFormatToken(0, ["SSS", 3], 0, "millisecond"), addFormatToken(0, ["SSSS", 4], 0, function () { return 10 * this.millisecond() }), addFormatToken(0, ["SSSSS", 5], 0, function () { return 100 * this.millisecond() }), addFormatToken(0, ["SSSSSS", 6], 0, function () { return 1e3 * this.millisecond() }), addFormatToken(0, ["SSSSSSS", 7], 0, function () { return 1e4 * this.millisecond() }), addFormatToken(0, ["SSSSSSSS", 8], 0, function () { return 1e5 * this.millisecond() }), addFormatToken(0, ["SSSSSSSSS", 9], 0, function () { return 1e6 * this.millisecond() }), addUnitAlias("millisecond", "ms"), addUnitPriority("millisecond", 16), addRegexToken("S", x, p), addRegexToken("SS", x, m), addRegexToken("SSS", x, g), Ce = "SSSS"; Ce.length <= 9; Ce += "S")addRegexToken(Ce, k); function parseMs(e, t) { t[$] = toInt(1e3 * ("0." + e)) } for (Ce = "S"; Ce.length <= 9; Ce += "S")addParseToken(Ce, parseMs); var ke = makeGetSet("Milliseconds", !1); addFormatToken("z", 0, 0, "zoneAbbr"), addFormatToken("zz", 0, 0, "zoneName"); var Te = Moment.prototype; function preParsePostFormat(e) { return e } Te.add = ye, Te.calendar = function calendar$1(e, t) { var n = e || createLocal(), r = cloneWithOffset(n, this).startOf("day"), i = hooks.calendarFormat(this, r) || "sameElse", o = t && (isFunction(t[i]) ? t[i].call(this, n) : t[i]); return this.format(o || this.localeData().calendar(i, this, createLocal(n))) }, Te.clone = function clone() { return new Moment(this) }, Te.diff = function diff(e, t, n) { var r, i, o, a; return this.isValid() && (r = cloneWithOffset(e, this)).isValid() ? (i = 6e4 * (r.utcOffset() - this.utcOffset()), "year" === (t = normalizeUnits(t)) || "month" === t || "quarter" === t ? (a = function monthDiff(e, t) { var n, r, i = 12 * (t.year() - e.year()) + (t.month() - e.month()), o = e.clone().add(i, "months"); return t - o < 0 ? (n = e.clone().add(i - 1, "months"), r = (t - o) / (o - n)) : (n = e.clone().add(i + 1, "months"), r = (t - o) / (n - o)), -(i + r) || 0 }(this, r), "quarter" === t ? a /= 3 : "year" === t && (a /= 12)) : (o = this - r, a = "second" === t ? o / 1e3 : "minute" === t ? o / 6e4 : "hour" === t ? o / 36e5 : "day" === t ? (o - i) / 864e5 : "week" === t ? (o - i) / 6048e5 : o), n ? a : absFloor(a)) : NaN }, Te.endOf = function endOf(e) { return void 0 === (e = normalizeUnits(e)) || "millisecond" === e ? this : ("date" === e && (e = "day"), this.startOf(e).add(1, "isoWeek" === e ? "week" : e).subtract(1, "ms")) }, Te.format = function format(e) { e || (e = this.isUtc() ? hooks.defaultFormatUtc : hooks.defaultFormat); var t = formatMoment(this, e); return this.localeData().postformat(t) }, Te.from = function from(e, t) { return this.isValid() && (isMoment(e) && e.isValid() || createLocal(e).isValid()) ? createDuration({ to: this, from: e }).locale(this.locale()).humanize(!t) : this.localeData().invalidDate() }, Te.fromNow = function fromNow(e) { return this.from(createLocal(), e) }, Te.to = function to(e, t) { return this.isValid() && (isMoment(e) && e.isValid() || createLocal(e).isValid()) ? createDuration({ from: this, to: e }).locale(this.locale()).humanize(!t) : this.localeData().invalidDate() }, Te.toNow = function toNow(e) { return this.to(createLocal(), e) }, Te.get = function stringGet(e) { return isFunction(this[e = normalizeUnits(e)]) ? this[e]() : this }, Te.invalidAt = function invalidAt() { return getParsingFlags(this).overflow }, Te.isAfter = function isAfter(e, t) { var n = isMoment(e) ? e : createLocal(e); return !(!this.isValid() || !n.isValid()) && ("millisecond" === (t = normalizeUnits(isUndefined(t) ? "millisecond" : t)) ? this.valueOf() > n.valueOf() : n.valueOf() < this.clone().startOf(t).valueOf()) }, Te.isBefore = function isBefore(e, t) { var n = isMoment(e) ? e : createLocal(e); return !(!this.isValid() || !n.isValid()) && ("millisecond" === (t = normalizeUnits(isUndefined(t) ? "millisecond" : t)) ? this.valueOf() < n.valueOf() : this.clone().endOf(t).valueOf() < n.valueOf()) }, Te.isBetween = function isBetween(e, t, n, r) { return ("(" === (r = r || "()")[0] ? this.isAfter(e, n) : !this.isBefore(e, n)) && (")" === r[1] ? this.isBefore(t, n) : !this.isAfter(t, n)) }, Te.isSame = function isSame(e, t) { var n, r = isMoment(e) ? e : createLocal(e); return !(!this.isValid() || !r.isValid()) && ("millisecond" === (t = normalizeUnits(t || "millisecond")) ? this.valueOf() === r.valueOf() : (n = r.valueOf(), this.clone().startOf(t).valueOf() <= n && n <= this.clone().endOf(t).valueOf())) }, Te.isSameOrAfter = function isSameOrAfter(e, t) { return this.isSame(e, t) || this.isAfter(e, t) }, Te.isSameOrBefore = function isSameOrBefore(e, t) { return this.isSame(e, t) || this.isBefore(e, t) }, Te.isValid = function isValid$2() { return isValid(this) }, Te.lang = be, Te.locale = locale, Te.localeData = localeData, Te.max = he, Te.min = fe, Te.parsingFlags = function parsingFlags() { return extend({}, getParsingFlags(this)) }, Te.set = function stringSet(e, t) { if ("object" == typeof e) for (var n = function getPrioritizedUnits(e) { var t = []; for (var n in e) t.push({ unit: n, priority: u[n] }); return t.sort(function (e, t) { return e.priority - t.priority }), t }(e = normalizeObjectUnits(e)), r = 0; r < n.length; r++)this[n[r].unit](e[n[r].unit]); else if (isFunction(this[e = normalizeUnits(e)])) return this[e](t); return this }, Te.startOf = function startOf(e) { switch (e = normalizeUnits(e)) { case "year": this.month(0); case "quarter": case "month": this.date(1); case "week": case "isoWeek": case "day": case "date": this.hours(0); case "hour": this.minutes(0); case "minute": this.seconds(0); case "second": this.milliseconds(0) }return "week" === e && this.weekday(0), "isoWeek" === e && this.isoWeekday(1), "quarter" === e && this.month(3 * Math.floor(this.month() / 3)), this }, Te.subtract = _e, Te.toArray = function toArray() { var e = this; return [e.year(), e.month(), e.date(), e.hour(), e.minute(), e.second(), e.millisecond()] }, Te.toObject = function toObject() { var e = this; return { years: e.year(), months: e.month(), date: e.date(), hours: e.hours(), minutes: e.minutes(), seconds: e.seconds(), milliseconds: e.milliseconds() } }, Te.toDate = function toDate() { return new Date(this.valueOf()) }, Te.toISOString = function toISOString() { if (!this.isValid()) return null; var e = this.clone().utc(); return e.year() < 0 || e.year() > 9999 ? formatMoment(e, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]") : isFunction(Date.prototype.toISOString) ? this.toDate().toISOString() : formatMoment(e, "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]") }, Te.inspect = function inspect() { if (!this.isValid()) return "moment.invalid(/* " + this._i + " */)"; var e = "moment", t = ""; this.isLocal() || (e = 0 === this.utcOffset() ? "moment.utc" : "moment.parseZone", t = "Z"); var n = "[" + e + '("]', r = 0 <= this.year() && this.year() <= 9999 ? "YYYY" : "YYYYYY", i = t + '[")]'; return this.format(n + r + "-MM-DD[T]HH:mm:ss.SSS" + i) }, Te.toJSON = function toJSON() { return this.isValid() ? this.toISOString() : null }, Te.toString = function toString() { return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ") }, Te.unix = function unix() { return Math.floor(this.valueOf() / 1e3) }, Te.valueOf = function valueOf() { return this._d.valueOf() - 6e4 * (this._offset || 0) }, Te.creationData = function creationData() { return { input: this._i, format: this._f, locale: this._locale, isUTC: this._isUTC, strict: this._strict } }, Te.year = W, Te.isLeapYear = function getIsLeapYear() { return isLeapYear(this.year()) }, Te.weekYear = function getSetWeekYear(e) { return getSetWeekYearHelper.call(this, e, this.week(), this.weekday(), this.localeData()._week.dow, this.localeData()._week.doy) }, Te.isoWeekYear = function getSetISOWeekYear(e) { return getSetWeekYearHelper.call(this, e, this.isoWeek(), this.isoWeekday(), 1, 4) }, Te.quarter = Te.quarters = function getSetQuarter(e) { return null == e ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (e - 1) + this.month() % 3) }, Te.month = getSetMonth, Te.daysInMonth = function getDaysInMonth() { return daysInMonth(this.year(), this.month()) }, Te.week = Te.weeks = function getSetWeek(e) { var t = this.localeData().week(this); return null == e ? t : this.add(7 * (e - t), "d") }, Te.isoWeek = Te.isoWeeks = function getSetISOWeek(e) { var t = weekOfYear(this, 1, 4).week; return null == e ? t : this.add(7 * (e - t), "d") }, Te.weeksInYear = function getWeeksInYear() { var e = this.localeData()._week; return weeksInYear(this.year(), e.dow, e.doy) }, Te.isoWeeksInYear = function getISOWeeksInYear() { return weeksInYear(this.year(), 1, 4) }, Te.date = we, Te.day = Te.days = function getSetDayOfWeek(e) { if (!this.isValid()) return null != e ? this : NaN; var t = this._isUTC ? this._d.getUTCDay() : this._d.getDay(); return null != e ? (e = function parseWeekday(e, t) { return "string" != typeof e ? e : isNaN(e) ? "number" == typeof (e = t.weekdaysParse(e)) ? e : null : parseInt(e, 10) }(e, this.localeData()), this.add(e - t, "d")) : t }, Te.weekday = function getSetLocaleDayOfWeek(e) { if (!this.isValid()) return null != e ? this : NaN; var t = (this.day() + 7 - this.localeData()._week.dow) % 7; return null == e ? t : this.add(e - t, "d") }, Te.isoWeekday = function getSetISODayOfWeek(e) { if (!this.isValid()) return null != e ? this : NaN; if (null != e) { var t = function parseIsoWeekday(e, t) { return "string" == typeof e ? t.weekdaysParse(e) % 7 || 7 : isNaN(e) ? null : e }(e, this.localeData()); return this.day(this.day() % 7 ? t : t - 7) } return this.day() || 7 }, Te.dayOfYear = function getSetDayOfYear(e) { var t = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) / 864e5) + 1; return null == e ? t : this.add(e - t, "d") }, Te.hour = Te.hours = te, Te.minute = Te.minutes = xe, Te.second = Te.seconds = Se, Te.millisecond = Te.milliseconds = ke, Te.utcOffset = function getSetOffset(e, t, n) { var r, i = this._offset || 0; if (!this.isValid()) return null != e ? this : NaN; if (null != e) { if ("string" == typeof e) { if (null === (e = offsetFromString(M, e))) return this } else Math.abs(e) < 16 && !n && (e *= 60); return !this._isUTC && t && (r = getDateOffset(this)), this._offset = e, this._isUTC = !0, null != r && this.add(r, "m"), i !== e && (!t || this._changeInProgress ? addSubtract(this, createDuration(e - i, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0, hooks.updateOffset(this, !0), this._changeInProgress = null)), this } return this._isUTC ? i : getDateOffset(this) }, Te.utc = function setOffsetToUTC(e) { return this.utcOffset(0, e) }, Te.local = function setOffsetToLocal(e) { return this._isUTC && (this.utcOffset(0, e), this._isUTC = !1, e && this.subtract(getDateOffset(this), "m")), this }, Te.parseZone = function setOffsetToParsedOffset() { if (null != this._tzm) this.utcOffset(this._tzm, !1, !0); else if ("string" == typeof this._i) { var e = offsetFromString(L, this._i); null != e ? this.utcOffset(e) : this.utcOffset(0, !0) } return this }, Te.hasAlignedHourOffset = function hasAlignedHourOffset(e) { return !!this.isValid() && (e = e ? createLocal(e).utcOffset() : 0, (this.utcOffset() - e) % 60 == 0) }, Te.isDST = function isDaylightSavingTime() { return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset() }, Te.isLocal = function isLocal() { return !!this.isValid() && !this._isUTC }, Te.isUtcOffset = function isUtcOffset() { return !!this.isValid() && this._isUTC }, Te.isUtc = isUtc, Te.isUTC = isUtc, Te.zoneAbbr = function getZoneAbbr() { return this._isUTC ? "UTC" : "" }, Te.zoneName = function getZoneName() { return this._isUTC ? "Coordinated Universal Time" : "" }, Te.dates = deprecate("dates accessor is deprecated. Use date instead.", we), Te.months = deprecate("months accessor is deprecated. Use month instead", getSetMonth), Te.years = deprecate("years accessor is deprecated. Use year instead", W), Te.zone = deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/", function getSetZone(e, t) { return null != e ? ("string" != typeof e && (e = -e), this.utcOffset(e, t), this) : -this.utcOffset() }), Te.isDSTShifted = deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information", function isDaylightSavingTimeShifted() { if (!isUndefined(this._isDSTShifted)) return this._isDSTShifted; var e = {}; if (copyConfig(e, this), (e = prepareConfig(e))._a) { var t = e._isUTC ? createUTC(e._a) : createLocal(e._a); this._isDSTShifted = this.isValid() && compareArrays(e._a, t.toArray()) > 0 } else this._isDSTShifted = !1; return this._isDSTShifted }); var Le = Locale.prototype; function get$1(e, t, n, r) { var i = getLocale(), o = createUTC().set(r, t); return i[n](o, e) } function listMonthsImpl(e, t, n) { if (isNumber(e) && (t = e, e = void 0), e = e || "", null != t) return get$1(e, t, n, "month"); var r, i = []; for (r = 0; r < 12; r++)i[r] = get$1(e, r, n, "month"); return i } function listWeekdaysImpl(e, t, n, r) { "boolean" == typeof e ? (isNumber(t) && (n = t, t = void 0), t = t || "") : (n = t = e, e = !1, isNumber(t) && (n = t, t = void 0), t = t || ""); var i, o = getLocale(), a = e ? o._week.dow : 0; if (null != n) return get$1(t, (n + a) % 7, r, "day"); var s = []; for (i = 0; i < 7; i++)s[i] = get$1(t, (i + a) % 7, r, "day"); return s } Le.calendar = function calendar(e, t, n) { var r = this._calendar[e] || this._calendar.sameElse; return isFunction(r) ? r.call(t, n) : r }, Le.longDateFormat = function longDateFormat(e) { var t = this._longDateFormat[e], n = this._longDateFormat[e.toUpperCase()]; return t || !n ? t : (this._longDateFormat[e] = n.replace(/MMMM|MM|DD|dddd/g, function (e) { return e.slice(1) }), this._longDateFormat[e]) }, Le.invalidDate = function invalidDate() { return this._invalidDate }, Le.ordinal = function ordinal(e) { return this._ordinal.replace("%d", e) }, Le.preparse = preParsePostFormat, Le.postformat = preParsePostFormat, Le.relativeTime = function relativeTime(e, t, n, r) { var i = this._relativeTime[n]; return isFunction(i) ? i(e, t, n, r) : i.replace(/%d/i, e) }, Le.pastFuture = function pastFuture(e, t) { var n = this._relativeTime[e > 0 ? "future" : "past"]; return isFunction(n) ? n(t) : n.replace(/%s/i, t) }, Le.set = function set(e) { var t, n; for (n in e) isFunction(t = e[n]) ? this[n] = t : this["_" + n] = t; this._config = e, this._dayOfMonthOrdinalParseLenient = new RegExp((this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) + "|" + /\d{1,2}/.source) }, Le.months = function localeMonths(e, t) { return e ? isArray(this._months) ? this._months[e.month()] : this._months[(this._months.isFormat || U).test(t) ? "format" : "standalone"][e.month()] : isArray(this._months) ? this._months : this._months.standalone }, Le.monthsShort = function localeMonthsShort(e, t) { return e ? isArray(this._monthsShort) ? this._monthsShort[e.month()] : this._monthsShort[U.test(t) ? "format" : "standalone"][e.month()] : isArray(this._monthsShort) ? this._monthsShort : this._monthsShort.standalone }, Le.monthsParse = function localeMonthsParse(e, t, n) { var r, i, o; if (this._monthsParseExact) return function handleStrictParse(e, t, n) { var r, i, o, a = e.toLocaleLowerCase(); if (!this._monthsParse) for (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = [], r = 0; r < 12; ++r)o = createUTC([2e3, r]), this._shortMonthsParse[r] = this.monthsShort(o, "").toLocaleLowerCase(), this._longMonthsParse[r] = this.months(o, "").toLocaleLowerCase(); return n ? "MMM" === t ? -1 !== (i = j.call(this._shortMonthsParse, a)) ? i : null : -1 !== (i = j.call(this._longMonthsParse, a)) ? i : null : "MMM" === t ? -1 !== (i = j.call(this._shortMonthsParse, a)) ? i : -1 !== (i = j.call(this._longMonthsParse, a)) ? i : null : -1 !== (i = j.call(this._longMonthsParse, a)) ? i : -1 !== (i = j.call(this._shortMonthsParse, a)) ? i : null }.call(this, e, t, n); for (this._monthsParse || (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = []), r = 0; r < 12; r++) { if (i = createUTC([2e3, r]), n && !this._longMonthsParse[r] && (this._longMonthsParse[r] = new RegExp("^" + this.months(i, "").replace(".", "") + "$", "i"), this._shortMonthsParse[r] = new RegExp("^" + this.monthsShort(i, "").replace(".", "") + "$", "i")), n || this._monthsParse[r] || (o = "^" + this.months(i, "") + "|^" + this.monthsShort(i, ""), this._monthsParse[r] = new RegExp(o.replace(".", ""), "i")), n && "MMMM" === t && this._longMonthsParse[r].test(e)) return r; if (n && "MMM" === t && this._shortMonthsParse[r].test(e)) return r; if (!n && this._monthsParse[r].test(e)) return r } }, Le.monthsRegex = function monthsRegex(e) { return this._monthsParseExact ? (hasOwnProp(this, "_monthsRegex") || computeMonthsParse.call(this), e ? this._monthsStrictRegex : this._monthsRegex) : (hasOwnProp(this, "_monthsRegex") || (this._monthsRegex = G), this._monthsStrictRegex && e ? this._monthsStrictRegex : this._monthsRegex) }, Le.monthsShortRegex = function monthsShortRegex(e) { return this._monthsParseExact ? (hasOwnProp(this, "_monthsRegex") || computeMonthsParse.call(this), e ? this._monthsShortStrictRegex : this._monthsShortRegex) : (hasOwnProp(this, "_monthsShortRegex") || (this._monthsShortRegex = V), this._monthsShortStrictRegex && e ? this._monthsShortStrictRegex : this._monthsShortRegex) }, Le.week = function localeWeek(e) { return weekOfYear(e, this._week.dow, this._week.doy).week }, Le.firstDayOfYear = function localeFirstDayOfYear() { return this._week.doy }, Le.firstDayOfWeek = function localeFirstDayOfWeek() { return this._week.dow }, Le.weekdays = function localeWeekdays(e, t) { return e ? isArray(this._weekdays) ? this._weekdays[e.day()] : this._weekdays[this._weekdays.isFormat.test(t) ? "format" : "standalone"][e.day()] : isArray(this._weekdays) ? this._weekdays : this._weekdays.standalone }, Le.weekdaysMin = function localeWeekdaysMin(e) { return e ? this._weekdaysMin[e.day()] : this._weekdaysMin }, Le.weekdaysShort = function localeWeekdaysShort(e) { return e ? this._weekdaysShort[e.day()] : this._weekdaysShort }, Le.weekdaysParse = function localeWeekdaysParse(e, t, n) { var r, i, o; if (this._weekdaysParseExact) return function handleStrictParse$1(e, t, n) { var r, i, o, a = e.toLocaleLowerCase(); if (!this._weekdaysParse) for (this._weekdaysParse = [], this._shortWeekdaysParse = [], this._minWeekdaysParse = [], r = 0; r < 7; ++r)o = createUTC([2e3, 1]).day(r), this._minWeekdaysParse[r] = this.weekdaysMin(o, "").toLocaleLowerCase(), this._shortWeekdaysParse[r] = this.weekdaysShort(o, "").toLocaleLowerCase(), this._weekdaysParse[r] = this.weekdays(o, "").toLocaleLowerCase(); return n ? "dddd" === t ? -1 !== (i = j.call(this._weekdaysParse, a)) ? i : null : "ddd" === t ? -1 !== (i = j.call(this._shortWeekdaysParse, a)) ? i : null : -1 !== (i = j.call(this._minWeekdaysParse, a)) ? i : null : "dddd" === t ? -1 !== (i = j.call(this._weekdaysParse, a)) ? i : -1 !== (i = j.call(this._shortWeekdaysParse, a)) ? i : -1 !== (i = j.call(this._minWeekdaysParse, a)) ? i : null : "ddd" === t ? -1 !== (i = j.call(this._shortWeekdaysParse, a)) ? i : -1 !== (i = j.call(this._weekdaysParse, a)) ? i : -1 !== (i = j.call(this._minWeekdaysParse, a)) ? i : null : -1 !== (i = j.call(this._minWeekdaysParse, a)) ? i : -1 !== (i = j.call(this._weekdaysParse, a)) ? i : -1 !== (i = j.call(this._shortWeekdaysParse, a)) ? i : null }.call(this, e, t, n); for (this._weekdaysParse || (this._weekdaysParse = [], this._minWeekdaysParse = [], this._shortWeekdaysParse = [], this._fullWeekdaysParse = []), r = 0; r < 7; r++) { if (i = createUTC([2e3, 1]).day(r), n && !this._fullWeekdaysParse[r] && (this._fullWeekdaysParse[r] = new RegExp("^" + this.weekdays(i, "").replace(".", ".?") + "$", "i"), this._shortWeekdaysParse[r] = new RegExp("^" + this.weekdaysShort(i, "").replace(".", ".?") + "$", "i"), this._minWeekdaysParse[r] = new RegExp("^" + this.weekdaysMin(i, "").replace(".", ".?") + "$", "i")), this._weekdaysParse[r] || (o = "^" + this.weekdays(i, "") + "|^" + this.weekdaysShort(i, "") + "|^" + this.weekdaysMin(i, ""), this._weekdaysParse[r] = new RegExp(o.replace(".", ""), "i")), n && "dddd" === t && this._fullWeekdaysParse[r].test(e)) return r; if (n && "ddd" === t && this._shortWeekdaysParse[r].test(e)) return r; if (n && "dd" === t && this._minWeekdaysParse[r].test(e)) return r; if (!n && this._weekdaysParse[r].test(e)) return r } }, Le.weekdaysRegex = function weekdaysRegex(e) { return this._weekdaysParseExact ? (hasOwnProp(this, "_weekdaysRegex") || computeWeekdaysParse.call(this), e ? this._weekdaysStrictRegex : this._weekdaysRegex) : (hasOwnProp(this, "_weekdaysRegex") || (this._weekdaysRegex = X), this._weekdaysStrictRegex && e ? this._weekdaysStrictRegex : this._weekdaysRegex) }, Le.weekdaysShortRegex = function weekdaysShortRegex(e) { return this._weekdaysParseExact ? (hasOwnProp(this, "_weekdaysRegex") || computeWeekdaysParse.call(this), e ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex) : (hasOwnProp(this, "_weekdaysShortRegex") || (this._weekdaysShortRegex = J), this._weekdaysShortStrictRegex && e ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex) }, Le.weekdaysMinRegex = function weekdaysMinRegex(e) { return this._weekdaysParseExact ? (hasOwnProp(this, "_weekdaysRegex") || computeWeekdaysParse.call(this), e ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex) : (hasOwnProp(this, "_weekdaysMinRegex") || (this._weekdaysMinRegex = Q), this._weekdaysMinStrictRegex && e ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex) }, Le.isPM = function localeIsPM(e) { return "p" === (e + "").toLowerCase().charAt(0) }, Le.meridiem = function localeMeridiem(e, t, n) { return e > 11 ? n ? "pm" : "PM" : n ? "am" : "AM" }, getSetGlobalLocale("en", { dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/, ordinal: function (e) { var t = e % 10, n = 1 === toInt(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th"; return e + n } }), hooks.lang = deprecate("moment.lang is deprecated. Use moment.locale instead.", getSetGlobalLocale), hooks.langData = deprecate("moment.langData is deprecated. Use moment.localeData instead.", getLocale); var Me = Math.abs; function addSubtract$1(e, t, n, r) { var i = createDuration(t, n); return e._milliseconds += r * i._milliseconds, e._days += r * i._days, e._months += r * i._months, e._bubble() } function absCeil(e) { return e < 0 ? Math.floor(e) : Math.ceil(e) } function daysToMonths(e) { return 4800 * e / 146097 } function monthsToDays(e) { return 146097 * e / 4800 } function makeAs(e) { return function () { return this.as(e) } } var Ee = makeAs("ms"), Ae = makeAs("s"), Pe = makeAs("m"), Re = makeAs("h"), Oe = makeAs("d"), De = makeAs("w"), Fe = makeAs("M"), Ie = makeAs("y"); function makeGetter(e) { return function () { return this.isValid() ? this._data[e] : NaN } } var Ne = makeGetter("milliseconds"), $e = makeGetter("seconds"), Be = makeGetter("minutes"), ze = makeGetter("hours"), je = makeGetter("days"), Ue = makeGetter("months"), qe = makeGetter("years"), He = Math.round, Ve = { ss: 44, s: 45, m: 45, h: 22, d: 26, M: 11 }, Ge = Math.abs; function toISOString$1() { if (!this.isValid()) return this.localeData().invalidDate(); var e, t, n = Ge(this._milliseconds) / 1e3, r = Ge(this._days), i = Ge(this._months); e = absFloor(n / 60), t = absFloor(e / 60), n %= 60, e %= 60; var o = absFloor(i / 12), a = i %= 12, s = r, l = t, u = e, c = n, d = this.asSeconds(); return d ? (d < 0 ? "-" : "") + "P" + (o ? o + "Y" : "") + (a ? a + "M" : "") + (s ? s + "D" : "") + (l || u || c ? "T" : "") + (l ? l + "H" : "") + (u ? u + "M" : "") + (c ? c + "S" : "") : "P0D" } var We = Duration.prototype; return We.isValid = function isValid$1() { return this._isValid }, We.abs = function abs() { var e = this._data; return this._milliseconds = Me(this._milliseconds), this._days = Me(this._days), this._months = Me(this._months), e.milliseconds = Me(e.milliseconds), e.seconds = Me(e.seconds), e.minutes = Me(e.minutes), e.hours = Me(e.hours), e.months = Me(e.months), e.years = Me(e.years), this }, We.add = function add$1(e, t) { return addSubtract$1(this, e, t, 1) }, We.subtract = function subtract$1(e, t) { return addSubtract$1(this, e, t, -1) }, We.as = function as(e) { if (!this.isValid()) return NaN; var t, n, r = this._milliseconds; if ("month" === (e = normalizeUnits(e)) || "year" === e) return t = this._days + r / 864e5, n = this._months + daysToMonths(t), "month" === e ? n : n / 12; switch (t = this._days + Math.round(monthsToDays(this._months)), e) { case "week": return t / 7 + r / 6048e5; case "day": return t + r / 864e5; case "hour": return 24 * t + r / 36e5; case "minute": return 1440 * t + r / 6e4; case "second": return 86400 * t + r / 1e3; case "millisecond": return Math.floor(864e5 * t) + r; default: throw new Error("Unknown unit " + e) } }, We.asMilliseconds = Ee, We.asSeconds = Ae, We.asMinutes = Pe, We.asHours = Re, We.asDays = Oe, We.asWeeks = De, We.asMonths = Fe, We.asYears = Ie, We.valueOf = function valueOf$1() { return this.isValid() ? this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * toInt(this._months / 12) : NaN }, We._bubble = function bubble() { var e, t, n, r, i, o = this._milliseconds, a = this._days, s = this._months, l = this._data; return o >= 0 && a >= 0 && s >= 0 || o <= 0 && a <= 0 && s <= 0 || (o += 864e5 * absCeil(monthsToDays(s) + a), a = 0, s = 0), l.milliseconds = o % 1e3, e = absFloor(o / 1e3), l.seconds = e % 60, t = absFloor(e / 60), l.minutes = t % 60, n = absFloor(t / 60), l.hours = n % 24, a += absFloor(n / 24), i = absFloor(daysToMonths(a)), s += i, a -= absCeil(monthsToDays(i)), r = absFloor(s / 12), s %= 12, l.days = a, l.months = s, l.years = r, this }, We.get = function get$2(e) { return e = normalizeUnits(e), this.isValid() ? this[e + "s"]() : NaN }, We.milliseconds = Ne, We.seconds = $e, We.minutes = Be, We.hours = ze, We.days = je, We.weeks = function weeks() { return absFloor(this.days() / 7) }, We.months = Ue, We.years = qe, We.humanize = function humanize(e) { if (!this.isValid()) return this.localeData().invalidDate(); var t = this.localeData(), n = function relativeTime$1(e, t, n) { var r = createDuration(e).abs(), i = He(r.as("s")), o = He(r.as("m")), a = He(r.as("h")), s = He(r.as("d")), l = He(r.as("M")), u = He(r.as("y")), c = i <= Ve.ss && ["s", i] || i < Ve.s && ["ss", i] || o <= 1 && ["m"] || o < Ve.m && ["mm", o] || a <= 1 && ["h"] || a < Ve.h && ["hh", a] || s <= 1 && ["d"] || s < Ve.d && ["dd", s] || l <= 1 && ["M"] || l < Ve.M && ["MM", l] || u <= 1 && ["y"] || ["yy", u]; return c[2] = t, c[3] = +e > 0, c[4] = n, function substituteTimeAgo(e, t, n, r, i) { return i.relativeTime(t || 1, !!n, e, r) }.apply(null, c) }(this, !e, t); return e && (n = t.pastFuture(+this, n)), t.postformat(n) }, We.toISOString = toISOString$1, We.toString = toISOString$1, We.toJSON = toISOString$1, We.locale = locale, We.localeData = localeData, We.toIsoString = deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", toISOString$1), We.lang = be, addFormatToken("X", 0, 0, "unix"), addFormatToken("x", 0, 0, "valueOf"), addRegexToken("x", T), addRegexToken("X", /[+-]?\d+(\.\d{1,3})?/), addParseToken("X", function (e, t, n) { n._d = new Date(1e3 * parseFloat(e, 10)) }), addParseToken("x", function (e, t, n) { n._d = new Date(toInt(e)) }), hooks.version = "2.18.1", function setHookCallback(e) { t = e }(createLocal), hooks.fn = Te, hooks.min = function min() { return pickBy("isBefore", [].slice.call(arguments, 0)) }, hooks.max = function max() { return pickBy("isAfter", [].slice.call(arguments, 0)) }, hooks.now = function () { return Date.now ? Date.now() : +new Date }, hooks.utc = createUTC, hooks.unix = function createUnix(e) { return createLocal(1e3 * e) }, hooks.months = function listMonths(e, t) { return listMonthsImpl(e, t, "months") }, hooks.isDate = isDate, hooks.locale = getSetGlobalLocale, hooks.invalid = createInvalid, hooks.duration = createDuration, hooks.isMoment = isMoment, hooks.weekdays = function listWeekdays(e, t, n) { return listWeekdaysImpl(e, t, n, "weekdays") }, hooks.parseZone = function createInZone() { return createLocal.apply(null, arguments).parseZone() }, hooks.localeData = getLocale, hooks.isDuration = isDuration, hooks.monthsShort = function listMonthsShort(e, t) { return listMonthsImpl(e, t, "monthsShort") }, hooks.weekdaysMin = function listWeekdaysMin(e, t, n) { return listWeekdaysImpl(e, t, n, "weekdaysMin") }, hooks.defineLocale = defineLocale, hooks.updateLocale = function updateLocale(e, t) { if (null != t) { var n, r = ne; null != re[e] && (r = re[e]._config), t = mergeConfigs(r, t), (n = new Locale(t)).parentLocale = re[e], re[e] = n, getSetGlobalLocale(e) } else null != re[e] && (null != re[e].parentLocale ? re[e] = re[e].parentLocale : null != re[e] && delete re[e]); return re[e] }, hooks.locales = function listLocales() { return s(re) }, hooks.weekdaysShort = function listWeekdaysShort(e, t, n) { return listWeekdaysImpl(e, t, n, "weekdaysShort") }, hooks.normalizeUnits = normalizeUnits, hooks.relativeTimeRounding = function getSetRelativeTimeRounding(e) { return void 0 === e ? He : "function" == typeof e && (He = e, !0) }, hooks.relativeTimeThreshold = function getSetRelativeTimeThreshold(e, t) { return void 0 !== Ve[e] && (void 0 === t ? Ve[e] : (Ve[e] = t, "s" === e && (Ve.ss = t - 1), !0)) }, hooks.calendarFormat = function getCalendarFormat(e, t) { var n = e.diff(t, "days", !0); return n < -6 ? "sameElse" : n < -1 ? "lastWeek" : n < 0 ? "lastDay" : n < 1 ? "sameDay" : n < 2 ? "nextDay" : n < 7 ? "nextWeek" : "sameElse" }, hooks.prototype = Te, hooks }() }).call(this, n(624)(e)) }, function (e, t, n) { var r = n(3508), i = n(906); function _typeof(t) { "@babel/helpers - typeof"; return e.exports = _typeof = "function" == typeof i && "symbol" == typeof r ? function _typeof(e) { return typeof e } : function _typeof(e) { return e && "function" == typeof i && e.constructor === i && e !== i.prototype ? "symbol" : typeof e }, _typeof(t) } e.exports = _typeof }, , function (e, t, n) { e.exports = n(3566) }, function (e, t, n) { "use strict"; var r, i, o, a, s = n(133), l = n(387), u = n(59), c = n(348), d = n(3476), f = n(213), h = n(904), p = n(339), m = n(623), g = n(165), v = n(456), y = n(445), _ = n(252), b = n(932), w = n(3475), x = n(1505), C = n(385), S = n(1504).set, k = n(3474), T = n(3473), L = n(3472), M = n(1501), E = n(3471), A = n(250), P = n(637), R = n(114), O = n(1500), D = R("species"), F = "Promise", I = A.get, N = A.set, $ = A.getterFor(F), B = d, z = u.TypeError, j = u.document, U = u.process, q = c("fetch"), H = M.f, V = H, G = "process" == _(U), W = !!(j && j.createEvent && u.dispatchEvent), Y = P(F, function () { if (!(b(B) !== String(B))) { if (66 === O) return !0; if (!G && "function" != typeof PromiseRejectionEvent) return !0 } if (l && !B.prototype.finally) return !0; if (O >= 51 && /native code/.test(B)) return !1; var e = B.resolve(1), t = function (e) { e(function () { }, function () { }) }; return (e.constructor = {})[D] = t, !(e.then(function () { }) instanceof t) }), Z = Y || !x(function (e) { B.all(e).catch(function () { }) }), K = function (e) { var t; return !(!g(e) || "function" != typeof (t = e.then)) && t }, X = function (e, t, n) { if (!t.notified) { t.notified = !0; var r = t.reactions; k(function () { for (var i = t.value, o = 1 == t.state, a = 0; r.length > a;) { var s, l, u, c = r[a++], d = o ? c.ok : c.fail, f = c.resolve, h = c.reject, p = c.domain; try { d ? (o || (2 === t.rejection && te(e, t), t.rejection = 1), !0 === d ? s = i : (p && p.enter(), s = d(i), p && (p.exit(), u = !0)), s === c.promise ? h(z("Promise-chain cycle")) : (l = K(s)) ? l.call(s, f, h) : f(s)) : h(i) } catch (e) { p && !u && p.exit(), h(e) } } t.reactions = [], t.notified = !1, n && !t.rejection && Q(e, t) }) } }, J = function (e, t, n) { var r, i; W ? ((r = j.createEvent("Event")).promise = t, r.reason = n, r.initEvent(e, !1, !0), u.dispatchEvent(r)) : r = { promise: t, reason: n }, (i = u["on" + e]) ? i(r) : "unhandledrejection" === e && L("Unhandled promise rejection", n) }, Q = function (e, t) { S.call(u, function () { var n, r = t.value; if (ee(t) && (n = E(function () { G ? U.emit("unhandledRejection", r, e) : J("unhandledrejection", e, r) }), t.rejection = G || ee(t) ? 2 : 1, n.error)) throw n.value }) }, ee = function (e) { return 1 !== e.rejection && !e.parent }, te = function (e, t) { S.call(u, function () { G ? U.emit("rejectionHandled", e) : J("rejectionhandled", e, t.value) }) }, ne = function (e, t, n, r) { return function (i) { e(t, n, i, r) } }, re = function (e, t, n, r) { t.done || (t.done = !0, r && (t = r), t.value = n, t.state = 2, X(e, t, !0)) }, ie = function (e, t, n, r) { if (!t.done) { t.done = !0, r && (t = r); try { if (e === n) throw z("Promise can't be resolved itself"); var i = K(n); i ? k(function () { var r = { done: !1 }; try { i.call(n, ne(ie, e, r, t), ne(re, e, r, t)) } catch (n) { re(e, r, n, t) } }) : (t.value = n, t.state = 1, X(e, t, !1)) } catch (n) { re(e, { done: !1 }, n, t) } } }; Y && (B = function Promise(e) { y(this, B, F), v(e), r.call(this); var t = I(this); try { e(ne(ie, this, t), ne(re, this, t)) } catch (e) { re(this, t, e) } }, (r = function Promise(e) { N(this, { type: F, done: !1, notified: !1, parent: !1, reactions: [], rejection: !1, state: 0, value: void 0 }) }).prototype = h(B.prototype, { then: function then(e, t) { var n = $(this), r = H(C(this, B)); return r.ok = "function" != typeof e || e, r.fail = "function" == typeof t && t, r.domain = G ? U.domain : void 0, n.parent = !0, n.reactions.push(r), 0 != n.state && X(this, n, !1), r.promise }, catch: function (e) { return this.then(void 0, e) } }), i = function () { var e = new r, t = I(e); this.promise = e, this.resolve = ne(ie, e, t), this.reject = ne(re, e, t) }, M.f = H = function (e) { return e === B || e === o ? new i(e) : V(e) }, l || "function" != typeof d || (a = d.prototype.then, f(d.prototype, "then", function then(e, t) { var n = this; return new B(function (e, t) { a.call(n, e, t) }).then(e, t) }, { unsafe: !0 }), "function" == typeof q && s({ global: !0, enumerable: !0, forced: !0 }, { fetch: function fetch(e) { return T(B, q.apply(u, arguments)) } }))), s({ global: !0, wrap: !0, forced: Y }, { Promise: B }), p(B, F, !1, !0), m(F), o = c(F), s({ target: F, stat: !0, forced: Y }, { reject: function reject(e) { var t = H(this); return t.reject.call(void 0, e), t.promise } }), s({ target: F, stat: !0, forced: l || Y }, { resolve: function resolve(e) { return T(l && this === o ? B : this, e) } }), s({ target: F, stat: !0, forced: Z }, { all: function all(e) { var t = this, n = H(t), r = n.resolve, i = n.reject, o = E(function () { var n = v(t.resolve), o = [], a = 0, s = 1; w(e, function (e) { var l = a++, u = !1; o.push(void 0), s++, n.call(t, e).then(function (e) { u || (u = !0, o[l] = e, --s || r(o)) }, i) }), --s || r(o) }); return o.error && i(o.value), n.promise }, race: function race(e) { var t = this, n = H(t), r = n.reject, i = E(function () { var i = v(t.resolve); w(e, function (e) { i.call(t, e).then(n.resolve, r) }) }); return i.error && r(i.value), n.promise } }) }, function (e, t, n) { n(29), n(46), n(886); var r = n(612); window.Promise || (window.Promise = r); var i = n(3169); e.exports = i }, function (e, t) { var n; n = function () { return this }(); try { n = n || Function("return this")() || (0, eval)("this") } catch (e) { "object" == typeof window && (n = window) } e.exports = n }, function (e, t, n) { "use strict"; n.d(t, "c", function () { return c }), n.d(t, "b", function () { return f }); var r = "undefined" != typeof window && window.__VUE_DEVTOOLS_GLOBAL_HOOK__; function forEachValue(e, t) { Object.keys(e).forEach(function (n) { return t(e[n], n) }) } var i = function Module(e, t) { this.runtime = t, this._children = Object.create(null), this._rawModule = e; var n = e.state; this.state = ("function" == typeof n ? n() : n) || {} }, o = { namespaced: { configurable: !0 } }; o.namespaced.get = function () { return !!this._rawModule.namespaced }, i.prototype.addChild = function addChild(e, t) { this._children[e] = t }, i.prototype.removeChild = function removeChild(e) { delete this._children[e] }, i.prototype.getChild = function getChild(e) { return this._children[e] }, i.prototype.update = function update(e) { this._rawModule.namespaced = e.namespaced, e.actions && (this._rawModule.actions = e.actions), e.mutations && (this._rawModule.mutations = e.mutations), e.getters && (this._rawModule.getters = e.getters) }, i.prototype.forEachChild = function forEachChild(e) { forEachValue(this._children, e) }, i.prototype.forEachGetter = function forEachGetter(e) { this._rawModule.getters && forEachValue(this._rawModule.getters, e) }, i.prototype.forEachAction = function forEachAction(e) { this._rawModule.actions && forEachValue(this._rawModule.actions, e) }, i.prototype.forEachMutation = function forEachMutation(e) { this._rawModule.mutations && forEachValue(this._rawModule.mutations, e) }, Object.defineProperties(i.prototype, o); var a = function ModuleCollection(e) { this.register([], e, !1) }; a.prototype.get = function get(e) { return e.reduce(function (e, t) { return e.getChild(t) }, this.root) }, a.prototype.getNamespace = function getNamespace(e) { var t = this.root; return e.reduce(function (e, n) { return e + ((t = t.getChild(n)).namespaced ? n + "/" : "") }, "") }, a.prototype.update = function update$1(e) { !function update(e, t, n) { 0; t.update(n); if (n.modules) for (var r in n.modules) { if (!t.getChild(r)) return void 0; update(e.concat(r), t.getChild(r), n.modules[r]) } }([], this.root, e) }, a.prototype.register = function register(e, t, n) { var r = this; void 0 === n && (n = !0); var o = new i(t, n); 0 === e.length ? this.root = o : this.get(e.slice(0, -1)).addChild(e[e.length - 1], o); t.modules && forEachValue(t.modules, function (t, i) { r.register(e.concat(i), t, n) }) }, a.prototype.unregister = function unregister(e) { var t = this.get(e.slice(0, -1)), n = e[e.length - 1]; t.getChild(n).runtime && t.removeChild(n) }; var s; var l = function Store(e) { var t = this; void 0 === e && (e = {}), !s && "undefined" != typeof window && window.Vue && install(window.Vue); var n = e.plugins; void 0 === n && (n = []); var i = e.strict; void 0 === i && (i = !1), this._committing = !1, this._actions = Object.create(null), this._actionSubscribers = [], this._mutations = Object.create(null), this._wrappedGetters = Object.create(null), this._modules = new a(e), this._modulesNamespaceMap = Object.create(null), this._subscribers = [], this._watcherVM = new s; var o = this, l = this.dispatch, u = this.commit; this.dispatch = function boundDispatch(e, t) { return l.call(o, e, t) }, this.commit = function boundCommit(e, t, n) { return u.call(o, e, t, n) }, this.strict = i; var c = this._modules.root.state; installModule(this, c, [], this._modules.root), resetStoreVM(this, c), n.forEach(function (e) { return e(t) }), (void 0 !== e.devtools ? e.devtools : s.config.devtools) && function devtoolPlugin(e) { r && (e._devtoolHook = r, r.emit("vuex:init", e), r.on("vuex:travel-to-state", function (t) { e.replaceState(t) }), e.subscribe(function (e, t) { r.emit("vuex:mutation", e, t) })) }(this) }, u = { state: { configurable: !0 } }; function genericSubscribe(e, t) { return t.indexOf(e) < 0 && t.push(e), function () { var n = t.indexOf(e); n > -1 && t.splice(n, 1) } } function resetStore(e, t) { e._actions = Object.create(null), e._mutations = Object.create(null), e._wrappedGetters = Object.create(null), e._modulesNamespaceMap = Object.create(null); var n = e.state; installModule(e, n, [], e._modules.root, !0), resetStoreVM(e, n, t) } function resetStoreVM(e, t, n) { var r = e._vm; e.getters = {}; var i = {}; forEachValue(e._wrappedGetters, function (t, n) { i[n] = function () { return t(e) }, Object.defineProperty(e.getters, n, { get: function () { return e._vm[n] }, enumerable: !0 }) }); var o = s.config.silent; s.config.silent = !0, e._vm = new s({ data: { $$state: t }, computed: i }), s.config.silent = o, e.strict && function enableStrictMode(e) { e._vm.$watch(function () { return this._data.$$state }, function () { 0 }, { deep: !0, sync: !0 }) }(e), r && (n && e._withCommit(function () { r._data.$$state = null }), s.nextTick(function () { return r.$destroy() })) } function installModule(e, t, n, r, i) { var o = !n.length, a = e._modules.getNamespace(n); if (r.namespaced && (e._modulesNamespaceMap[a] = r), !o && !i) { var l = getNestedState(t, n.slice(0, -1)), u = n[n.length - 1]; e._withCommit(function () { s.set(l, u, r.state) }) } var c = r.context = function makeLocalContext(e, t, n) { var r = "" === t, i = { dispatch: r ? e.dispatch : function (n, r, i) { var o = unifyObjectStyle(n, r, i), a = o.payload, s = o.options, l = o.type; return s && s.root || (l = t + l), e.dispatch(l, a) }, commit: r ? e.commit : function (n, r, i) { var o = unifyObjectStyle(n, r, i), a = o.payload, s = o.options, l = o.type; s && s.root || (l = t + l), e.commit(l, a, s) } }; return Object.defineProperties(i, { getters: { get: r ? function () { return e.getters } : function () { return function makeLocalGetters(e, t) { var n = {}, r = t.length; return Object.keys(e.getters).forEach(function (i) { if (i.slice(0, r) === t) { var o = i.slice(r); Object.defineProperty(n, o, { get: function () { return e.getters[i] }, enumerable: !0 }) } }), n }(e, t) } }, state: { get: function () { return getNestedState(e.state, n) } } }), i }(e, a, n); r.forEachMutation(function (t, n) { !function registerMutation(e, t, n, r) { (e._mutations[t] || (e._mutations[t] = [])).push(function wrappedMutationHandler(t) { n.call(e, r.state, t) }) }(e, a + n, t, c) }), r.forEachAction(function (t, n) { var r = t.root ? n : a + n, i = t.handler || t; !function registerAction(e, t, n, r) { (e._actions[t] || (e._actions[t] = [])).push(function wrappedActionHandler(t, i) { var o = n.call(e, { dispatch: r.dispatch, commit: r.commit, getters: r.getters, state: r.state, rootGetters: e.getters, rootState: e.state }, t, i); return function isPromise(e) { return e && "function" == typeof e.then }(o) || (o = Promise.resolve(o)), e._devtoolHook ? o.catch(function (t) { throw e._devtoolHook.emit("vuex:error", t), t }) : o }) }(e, r, i, c) }), r.forEachGetter(function (t, n) { !function registerGetter(e, t, n, r) { if (e._wrappedGetters[t]) return void 0; e._wrappedGetters[t] = function wrappedGetter(e) { return n(r.state, r.getters, e.state, e.getters) } }(e, a + n, t, c) }), r.forEachChild(function (r, o) { installModule(e, t, n.concat(o), r, i) }) } function getNestedState(e, t) { return t.length ? t.reduce(function (e, t) { return e[t] }, e) : e } function unifyObjectStyle(e, t, n) { return function isObject(e) { return null !== e && "object" == typeof e }(e) && e.type && (n = t, t = e, e = e.type), { type: e, payload: t, options: n } } function install(e) { s && e === s || function applyMixin(e) { if (Number(e.version.split(".")[0]) >= 2) e.mixin({ beforeCreate: vuexInit }); else { var t = e.prototype._init; e.prototype._init = function (e) { void 0 === e && (e = {}), e.init = e.init ? [vuexInit].concat(e.init) : vuexInit, t.call(this, e) } } function vuexInit() { var e = this.$options; e.store ? this.$store = "function" == typeof e.store ? e.store() : e.store : e.parent && e.parent.$store && (this.$store = e.parent.$store) } }(s = e) } u.state.get = function () { return this._vm._data.$$state }, u.state.set = function (e) { 0 }, l.prototype.commit = function commit(e, t, n) { var r = this, i = unifyObjectStyle(e, t, n), o = i.type, a = i.payload, s = (i.options, { type: o, payload: a }), l = this._mutations[o]; l && (this._withCommit(function () { l.forEach(function commitIterator(e) { e(a) }) }), this._subscribers.forEach(function (e) { return e(s, r.state) })) }, l.prototype.dispatch = function dispatch(e, t) { var n = this, r = unifyObjectStyle(e, t), i = r.type, o = r.payload, a = { type: i, payload: o }, s = this._actions[i]; if (s) { try { this._actionSubscribers.filter(function (e) { return e.before }).forEach(function (e) { return e.before(a, n.state) }) } catch (e) { 0 } return (s.length > 1 ? Promise.all(s.map(function (e) { return e(o) })) : s[0](o)).then(function (e) { try { n._actionSubscribers.filter(function (e) { return e.after }).forEach(function (e) { return e.after(a, n.state) }) } catch (e) { 0 } return e }) } }, l.prototype.subscribe = function subscribe(e) { return genericSubscribe(e, this._subscribers) }, l.prototype.subscribeAction = function subscribeAction(e) { return genericSubscribe("function" == typeof e ? { before: e } : e, this._actionSubscribers) }, l.prototype.watch = function watch(e, t, n) { var r = this; return this._watcherVM.$watch(function () { return e(r.state, r.getters) }, t, n) }, l.prototype.replaceState = function replaceState(e) { var t = this; this._withCommit(function () { t._vm._data.$$state = e }) }, l.prototype.registerModule = function registerModule(e, t, n) { void 0 === n && (n = {}), "string" == typeof e && (e = [e]), this._modules.register(e, t), installModule(this, this.state, e, this._modules.get(e), n.preserveState), resetStoreVM(this, this.state) }, l.prototype.unregisterModule = function unregisterModule(e) { var t = this; "string" == typeof e && (e = [e]), this._modules.unregister(e), this._withCommit(function () { var n = getNestedState(t.state, e.slice(0, -1)); s.delete(n, e[e.length - 1]) }), resetStore(this) }, l.prototype.hotUpdate = function hotUpdate(e) { this._modules.update(e), resetStore(this, !0) }, l.prototype._withCommit = function _withCommit(e) { var t = this._committing; this._committing = !0, e(), this._committing = t }, Object.defineProperties(l.prototype, u); var c = normalizeNamespace(function (e, t) { var n = {}; return normalizeMap(t).forEach(function (t) { var r = t.key, i = t.val; n[r] = function mappedState() { var t = this.$store.state, n = this.$store.getters; if (e) { var r = getModuleByNamespace(this.$store, "mapState", e); if (!r) return; t = r.context.state, n = r.context.getters } return "function" == typeof i ? i.call(this, t, n) : t[i] }, n[r].vuex = !0 }), n }), d = normalizeNamespace(function (e, t) { var n = {}; return normalizeMap(t).forEach(function (t) { var r = t.key, i = t.val; n[r] = function mappedMutation() { for (var t = [], n = arguments.length; n--;)t[n] = arguments[n]; var r = this.$store.commit; if (e) { var o = getModuleByNamespace(this.$store, "mapMutations", e); if (!o) return; r = o.context.commit } return "function" == typeof i ? i.apply(this, [r].concat(t)) : r.apply(this.$store, [i].concat(t)) } }), n }), f = normalizeNamespace(function (e, t) { var n = {}; return normalizeMap(t).forEach(function (t) { var r = t.key, i = t.val; i = e + i, n[r] = function mappedGetter() { if (!e || getModuleByNamespace(this.$store, "mapGetters", e)) return this.$store.getters[i] }, n[r].vuex = !0 }), n }), h = normalizeNamespace(function (e, t) { var n = {}; return normalizeMap(t).forEach(function (t) { var r = t.key, i = t.val; n[r] = function mappedAction() { for (var t = [], n = arguments.length; n--;)t[n] = arguments[n]; var r = this.$store.dispatch; if (e) { var o = getModuleByNamespace(this.$store, "mapActions", e); if (!o) return; r = o.context.dispatch } return "function" == typeof i ? i.apply(this, [r].concat(t)) : r.apply(this.$store, [i].concat(t)) } }), n }); function normalizeMap(e) { return Array.isArray(e) ? e.map(function (e) { return { key: e, val: e } }) : Object.keys(e).map(function (t) { return { key: t, val: e[t] } }) } function normalizeNamespace(e) { return function (t, n) { return "string" != typeof t ? (n = t, t = "") : "/" !== t.charAt(t.length - 1) && (t += "/"), e(t, n) } } function getModuleByNamespace(e, t, n) { return e._modulesNamespaceMap[n] } var p = { Store: l, install: install, version: "3.1.0", mapState: c, mapMutations: d, mapGetters: f, mapActions: h, createNamespacedHelpers: function (e) { return { mapState: c.bind(null, e), mapGetters: f.bind(null, e), mapMutations: d.bind(null, e), mapActions: h.bind(null, e) } } }; t.a = p }, , function (e, t, n) { "use strict"; var r = n(213), i = n(139), o = n(109), a = n(922), s = RegExp.prototype, l = s.toString, u = o(function () { return "/a/b" != l.call({ source: "a", flags: "b" }) }), c = "toString" != l.name; (u || c) && r(RegExp.prototype, "toString", function toString() { var e = i(this), t = String(e.source), n = e.flags; return "/" + t + "/" + String(void 0 === n && e instanceof RegExp && !("flags" in s) ? a.call(e) : n) }, { unsafe: !0 }) }, function (e, t) { e.exports = {} }, , , function (e, t, n) { e.exports = n(3555) }, function (e, t, n) { e.exports.find = function (e, t) { for (var n, r = 0; r < e.length; r++)if (n = t.call(e, e[r])) return n; return null } }, function (e, t, n) { e.exports.find = function (e, t) { for (var n, r = 0; r < e.length; r++)if (n = t.call(e, e[r])) return n; return null } }, , function (e, t, n) { (function (t) { var n = function (e) { return e && e.Math == Math && e }; e.exports = n("object" == typeof globalThis && globalThis) || n("object" == typeof window && window) || n("object" == typeof self && self) || n("object" == typeof t && t) || Function("return this")() }).call(this, n(48)) }, function (e, t, n) { !function (e) { "use strict"; e.defineLocale("en-nz", { months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"), monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"), weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), weekdaysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"), weekdaysMin: "Su_Mo_Tu_We_Th_Fr_Sa".split("_"), longDateFormat: { LT: "h:mm A", LTS: "h:mm:ss A", L: "DD/MM/YYYY", LL: "D MMMM YYYY", LLL: "D MMMM YYYY h:mm A", LLLL: "dddd, D MMMM YYYY h:mm A" }, calendar: { sameDay: "[Today at] LT", nextDay: "[Tomorrow at] LT", nextWeek: "dddd [at] LT", lastDay: "[Yesterday at] LT", lastWeek: "[Last] dddd [at] LT", sameElse: "L" }, relativeTime: { future: "in %s", past: "%s ago", s: "a few seconds", m: "a minute", mm: "%d minutes", h: "an hour", hh: "%d hours", d: "a day", dd: "%d days", M: "a month", MM: "%d months", y: "a year", yy: "%d years" }, dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/, ordinal: function (e) { var t = e % 10, n = 1 == ~~(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th"; return e + n }, week: { dow: 1, doy: 4 } }) }(n(42)) }, function (e, t, n) { !function (e) { "use strict"; e.defineLocale("en-ie", { months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"), monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"), weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), weekdaysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"), weekdaysMin: "Su_Mo_Tu_We_Th_Fr_Sa".split("_"), longDateFormat: { LT: "HH:mm", LTS: "HH:mm:ss", L: "DD-MM-YYYY", LL: "D MMMM YYYY", LLL: "D MMMM YYYY HH:mm", LLLL: "dddd D MMMM YYYY HH:mm" }, calendar: { sameDay: "[Today at] LT", nextDay: "[Tomorrow at] LT", nextWeek: "dddd [at] LT", lastDay: "[Yesterday at] LT", lastWeek: "[Last] dddd [at] LT", sameElse: "L" }, relativeTime: { future: "in %s", past: "%s ago", s: "a few seconds", m: "a minute", mm: "%d minutes", h: "an hour", hh: "%d hours", d: "a day", dd: "%d days", M: "a month", MM: "%d months", y: "a year", yy: "%d years" }, dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/, ordinal: function (e) { var t = e % 10, n = 1 == ~~(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th"; return e + n }, week: { dow: 1, doy: 4 } }) }(n(42)) }, function (e, t, n) { !function (e) { "use strict"; e.defineLocale("en-gb", { months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"), monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"), weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), weekdaysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"), weekdaysMin: "Su_Mo_Tu_We_Th_Fr_Sa".split("_"), longDateFormat: { LT: "HH:mm", LTS: "HH:mm:ss", L: "DD/MM/YYYY", LL: "D MMMM YYYY", LLL: "D MMMM YYYY HH:mm", LLLL: "dddd, D MMMM YYYY HH:mm" }, calendar: { sameDay: "[Today at] LT", nextDay: "[Tomorrow at] LT", nextWeek: "dddd [at] LT", lastDay: "[Yesterday at] LT", lastWeek: "[Last] dddd [at] LT", sameElse: "L" }, relativeTime: { future: "in %s", past: "%s ago", s: "a few seconds", m: "a minute", mm: "%d minutes", h: "an hour", hh: "%d hours", d: "a day", dd: "%d days", M: "a month", MM: "%d months", y: "a year", yy: "%d years" }, dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/, ordinal: function (e) { var t = e % 10, n = 1 == ~~(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th"; return e + n }, week: { dow: 1, doy: 4 } }) }(n(42)) }, function (e, t, n) { !function (e) { "use strict"; e.defineLocale("en-ca", { months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"), monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"), weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), weekdaysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"), weekdaysMin: "Su_Mo_Tu_We_Th_Fr_Sa".split("_"), longDateFormat: { LT: "h:mm A", LTS: "h:mm:ss A", L: "YYYY-MM-DD", LL: "MMMM D, YYYY", LLL: "MMMM D, YYYY h:mm A", LLLL: "dddd, MMMM D, YYYY h:mm A" }, calendar: { sameDay: "[Today at] LT", nextDay: "[Tomorrow at] LT", nextWeek: "dddd [at] LT", lastDay: "[Yesterday at] LT", lastWeek: "[Last] dddd [at] LT", sameElse: "L" }, relativeTime: { future: "in %s", past: "%s ago", s: "a few seconds", m: "a minute", mm: "%d minutes", h: "an hour", hh: "%d hours", d: "a day", dd: "%d days", M: "a month", MM: "%d months", y: "a year", yy: "%d years" }, dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/, ordinal: function (e) { var t = e % 10, n = 1 == ~~(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th"; return e + n } }) }(n(42)) }, function (e, t, n) { !function (e) { "use strict"; e.defineLocale("en-au", { months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"), monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"), weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), weekdaysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"), weekdaysMin: "Su_Mo_Tu_We_Th_Fr_Sa".split("_"), longDateFormat: { LT: "h:mm A", LTS: "h:mm:ss A", L: "DD/MM/YYYY", LL: "D MMMM YYYY", LLL: "D MMMM YYYY h:mm A", LLLL: "dddd, D MMMM YYYY h:mm A" }, calendar: { sameDay: "[Today at] LT", nextDay: "[Tomorrow at] LT", nextWeek: "dddd [at] LT", lastDay: "[Yesterday at] LT", lastWeek: "[Last] dddd [at] LT", sameElse: "L" }, relativeTime: { future: "in %s", past: "%s ago", s: "a few seconds", m: "a minute", mm: "%d minutes", h: "an hour", hh: "%d hours", d: "a day", dd: "%d days", M: "a month", MM: "%d months", y: "a year", yy: "%d years" }, dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/, ordinal: function (e) { var t = e % 10, n = 1 == ~~(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th"; return e + n }, week: { dow: 1, doy: 4 } }) }(n(42)) }, function (e, t, n) { e.exports = n(3388) }, function (e, t, n) { "use strict"; (function (e, n) { var r = Object.freeze({}); function isUndef(e) { return void 0 === e || null === e } function isDef(e) { return void 0 !== e && null !== e } function isTrue(e) { return !0 === e } function isPrimitive(e) { return "string" == typeof e || "number" == typeof e || "symbol" == typeof e || "boolean" == typeof e } function isObject(e) { return null !== e && "object" == typeof e } var i = Object.prototype.toString; function isPlainObject(e) { return "[object Object]" === i.call(e) } function isRegExp(e) { return "[object RegExp]" === i.call(e) } function isValidArrayIndex(e) { var t = parseFloat(String(e)); return t >= 0 && Math.floor(t) === t && isFinite(e) } function isPromise(e) { return isDef(e) && "function" == typeof e.then && "function" == typeof e.catch } function toString(e) { return null == e ? "" : Array.isArray(e) || isPlainObject(e) && e.toString === i ? JSON.stringify(e, null, 2) : String(e) } function toNumber(e) { var t = parseFloat(e); return isNaN(t) ? e : t } function makeMap(e, t) { for (var n = Object.create(null), r = e.split(","), i = 0; i < r.length; i++)n[r[i]] = !0; return t ? function (e) { return n[e.toLowerCase()] } : function (e) { return n[e] } } var o = makeMap("slot,component", !0), a = makeMap("key,ref,slot,slot-scope,is"); function remove(e, t) { if (e.length) { var n = e.indexOf(t); if (n > -1) return e.splice(n, 1) } } var s = Object.prototype.hasOwnProperty; function hasOwn(e, t) { return s.call(e, t) } function cached(e) { var t = Object.create(null); return function cachedFn(n) { return t[n] || (t[n] = e(n)) } } var l = /-(\w)/g, u = cached(function (e) { return e.replace(l, function (e, t) { return t ? t.toUpperCase() : "" }) }), c = cached(function (e) { return e.charAt(0).toUpperCase() + e.slice(1) }), d = /\B([A-Z])/g, f = cached(function (e) { return e.replace(d, "-$1").toLowerCase() }); var h = Function.prototype.bind ? function nativeBind(e, t) { return e.bind(t) } : function polyfillBind(e, t) { function boundFn(n) { var r = arguments.length; return r ? r > 1 ? e.apply(t, arguments) : e.call(t, n) : e.call(t) } return boundFn._length = e.length, boundFn }; function toArray(e, t) { t = t || 0; for (var n = e.length - t, r = new Array(n); n--;)r[n] = e[n + t]; return r } function extend(e, t) { for (var n in t) e[n] = t[n]; return e } function toObject(e) { for (var t = {}, n = 0; n < e.length; n++)e[n] && extend(t, e[n]); return t } function noop(e, t, n) { } var p = function (e, t, n) { return !1 }, m = function (e) { return e }; function looseEqual(e, t) { if (e === t) return !0; var n = isObject(e), r = isObject(t); if (!n || !r) return !n && !r && String(e) === String(t); try { var i = Array.isArray(e), o = Array.isArray(t); if (i && o) return e.length === t.length && e.every(function (e, n) { return looseEqual(e, t[n]) }); if (e instanceof Date && t instanceof Date) return e.getTime() === t.getTime(); if (i || o) return !1; var a = Object.keys(e), s = Object.keys(t); return a.length === s.length && a.every(function (n) { return looseEqual(e[n], t[n]) }) } catch (e) { return !1 } } function looseIndexOf(e, t) { for (var n = 0; n < e.length; n++)if (looseEqual(e[n], t)) return n; return -1 } function once(e) { var t = !1; return function () { t || (t = !0, e.apply(this, arguments)) } } var g = "data-server-rendered", v = ["component", "directive", "filter"], y = ["beforeCreate", "created", "beforeMount", "mounted", "beforeUpdate", "updated", "beforeDestroy", "destroyed", "activated", "deactivated", "errorCaptured", "serverPrefetch"], _ = { optionMergeStrategies: Object.create(null), silent: !1, productionTip: !1, devtools: !1, performance: !1, errorHandler: null, warnHandler: null, ignoredElements: [], keyCodes: Object.create(null), isReservedTag: p, isReservedAttr: p, isUnknownElement: p, getTagNamespace: noop, parsePlatformTagName: m, mustUseProp: p, async: !0, _lifecycleHooks: y }, b = "a-zA-Z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd"; function def(e, t, n, r) { Object.defineProperty(e, t, { value: n, enumerable: !!r, writable: !0, configurable: !0 }) } var w = new RegExp("[^" + b + ".$_\\d]"); var x, C = "__proto__" in {}, S = "undefined" != typeof window, k = "undefined" != typeof WXEnvironment && !!WXEnvironment.platform, T = k && WXEnvironment.platform.toLowerCase(), L = S && window.navigator.userAgent.toLowerCase(), M = L && /msie|trident/.test(L), E = L && L.indexOf("msie 9.0") > 0, A = L && L.indexOf("edge/") > 0, P = (L && L.indexOf("android"), L && /iphone|ipad|ipod|ios/.test(L) || "ios" === T), R = (L && /chrome\/\d+/.test(L), L && /phantomjs/.test(L), L && L.match(/firefox\/(\d+)/)), O = {}.watch, D = !1; if (S) try { var F = {}; Object.defineProperty(F, "passive", { get: function get() { D = !0 } }), window.addEventListener("test-passive", null, F) } catch (e) { } var I = function () { return void 0 === x && (x = !S && !k && void 0 !== e && (e.process && "server" === e.process.env.VUE_ENV)), x }, N = S && window.__VUE_DEVTOOLS_GLOBAL_HOOK__; function isNative(e) { return "function" == typeof e && /native code/.test(e.toString()) } var $, B = "undefined" != typeof Symbol && isNative(Symbol) && "undefined" != typeof Reflect && isNative(Reflect.ownKeys); $ = "undefined" != typeof Set && isNative(Set) ? Set : function () { function Set() { this.set = Object.create(null) } return Set.prototype.has = function has(e) { return !0 === this.set[e] }, Set.prototype.add = function add(e) { this.set[e] = !0 }, Set.prototype.clear = function clear() { this.set = Object.create(null) }, Set }(); var z = noop, j = 0, U = function Dep() { this.id = j++, this.subs = [] }; U.prototype.addSub = function addSub(e) { this.subs.push(e) }, U.prototype.removeSub = function removeSub(e) { remove(this.subs, e) }, U.prototype.depend = function depend() { U.target && U.target.addDep(this) }, U.prototype.notify = function notify() { var e = this.subs.slice(); for (var t = 0, n = e.length; t < n; t++)e[t].update() }, U.target = null; var q = []; function pushTarget(e) { q.push(e), U.target = e } function popTarget() { q.pop(), U.target = q[q.length - 1] } var H = function VNode(e, t, n, r, i, o, a, s) { this.tag = e, this.data = t, this.children = n, this.text = r, this.elm = i, this.ns = void 0, this.context = o, this.fnContext = void 0, this.fnOptions = void 0, this.fnScopeId = void 0, this.key = t && t.key, this.componentOptions = a, this.componentInstance = void 0, this.parent = void 0, this.raw = !1, this.isStatic = !1, this.isRootInsert = !0, this.isComment = !1, this.isCloned = !1, this.isOnce = !1, this.asyncFactory = s, this.asyncMeta = void 0, this.isAsyncPlaceholder = !1 }, V = { child: { configurable: !0 } }; V.child.get = function () { return this.componentInstance }, Object.defineProperties(H.prototype, V); var G = function (e) { void 0 === e && (e = ""); var t = new H; return t.text = e, t.isComment = !0, t }; function createTextVNode(e) { return new H(void 0, void 0, void 0, String(e)) } function cloneVNode(e) { var t = new H(e.tag, e.data, e.children && e.children.slice(), e.text, e.elm, e.context, e.componentOptions, e.asyncFactory); return t.ns = e.ns, t.isStatic = e.isStatic, t.key = e.key, t.isComment = e.isComment, t.fnContext = e.fnContext, t.fnOptions = e.fnOptions, t.fnScopeId = e.fnScopeId, t.asyncMeta = e.asyncMeta, t.isCloned = !0, t } var W = Array.prototype, Y = Object.create(W);["push", "pop", "shift", "unshift", "splice", "sort", "reverse"].forEach(function (e) { var t = W[e]; def(Y, e, function mutator() { for (var n = [], r = arguments.length; r--;)n[r] = arguments[r]; var i, o = t.apply(this, n), a = this.__ob__; switch (e) { case "push": case "unshift": i = n; break; case "splice": i = n.slice(2) }return i && a.observeArray(i), a.dep.notify(), o }) }); var Z = Object.getOwnPropertyNames(Y), K = !0; function toggleObserving(e) { K = e } var X = function Observer(e) { this.value = e, this.dep = new U, this.vmCount = 0, def(e, "__ob__", this), Array.isArray(e) ? (C ? function protoAugment(e, t) { e.__proto__ = t }(e, Y) : function copyAugment(e, t, n) { for (var r = 0, i = n.length; r < i; r++) { var o = n[r]; def(e, o, t[o]) } }(e, Y, Z), this.observeArray(e)) : this.walk(e) }; function observe(e, t) { var n; if (isObject(e) && !(e instanceof H)) return hasOwn(e, "__ob__") && e.__ob__ instanceof X ? n = e.__ob__ : K && !I() && (Array.isArray(e) || isPlainObject(e)) && Object.isExtensible(e) && !e._isVue && (n = new X(e)), t && n && n.vmCount++, n } function defineReactive$$1(e, t, n, r, i) { var o = new U, a = Object.getOwnPropertyDescriptor(e, t); if (!a || !1 !== a.configurable) { var s = a && a.get, l = a && a.set; s && !l || 2 !== arguments.length || (n = e[t]); var u = !i && observe(n); Object.defineProperty(e, t, { enumerable: !0, configurable: !0, get: function reactiveGetter() { var t = s ? s.call(e) : n; return U.target && (o.depend(), u && (u.dep.depend(), Array.isArray(t) && function dependArray(e) { for (var t = void 0, n = 0, r = e.length; n < r; n++)(t = e[n]) && t.__ob__ && t.__ob__.dep.depend(), Array.isArray(t) && dependArray(t) }(t))), t }, set: function reactiveSetter(t) { var r = s ? s.call(e) : n; t === r || t != t && r != r || s && !l || (l ? l.call(e, t) : n = t, u = !i && observe(t), o.notify()) } }) } } function set(e, t, n) { if (Array.isArray(e) && isValidArrayIndex(t)) return e.length = Math.max(e.length, t), e.splice(t, 1, n), n; if (t in e && !(t in Object.prototype)) return e[t] = n, n; var r = e.__ob__; return e._isVue || r && r.vmCount ? n : r ? (defineReactive$$1(r.value, t, n), r.dep.notify(), n) : (e[t] = n, n) } function del(e, t) { if (Array.isArray(e) && isValidArrayIndex(t)) e.splice(t, 1); else { var n = e.__ob__; e._isVue || n && n.vmCount || hasOwn(e, t) && (delete e[t], n && n.dep.notify()) } } X.prototype.walk = function walk(e) { for (var t = Object.keys(e), n = 0; n < t.length; n++)defineReactive$$1(e, t[n]) }, X.prototype.observeArray = function observeArray(e) { for (var t = 0, n = e.length; t < n; t++)observe(e[t]) }; var J = _.optionMergeStrategies; function mergeData(e, t) { if (!t) return e; for (var n, r, i, o = B ? Reflect.ownKeys(t) : Object.keys(t), a = 0; a < o.length; a++)"__ob__" !== (n = o[a]) && (r = e[n], i = t[n], hasOwn(e, n) ? r !== i && isPlainObject(r) && isPlainObject(i) && mergeData(r, i) : set(e, n, i)); return e } function mergeDataOrFn(e, t, n) { return n ? function mergedInstanceDataFn() { var r = "function" == typeof t ? t.call(n, n) : t, i = "function" == typeof e ? e.call(n, n) : e; return r ? mergeData(r, i) : i } : t ? e ? function mergedDataFn() { return mergeData("function" == typeof t ? t.call(this, this) : t, "function" == typeof e ? e.call(this, this) : e) } : t : e } function mergeHook(e, t) { var n = t ? e ? e.concat(t) : Array.isArray(t) ? t : [t] : e; return n ? function dedupeHooks(e) { for (var t = [], n = 0; n < e.length; n++)-1 === t.indexOf(e[n]) && t.push(e[n]); return t }(n) : n } function mergeAssets(e, t, n, r) { var i = Object.create(e || null); return t ? extend(i, t) : i } J.data = function (e, t, n) { return n ? mergeDataOrFn(e, t, n) : t && "function" != typeof t ? e : mergeDataOrFn(e, t) }, y.forEach(function (e) { J[e] = mergeHook }), v.forEach(function (e) { J[e + "s"] = mergeAssets }), J.watch = function (e, t, n, r) { if (e === O && (e = void 0), t === O && (t = void 0), !t) return Object.create(e || null); if (!e) return t; var i = {}; for (var o in extend(i, e), t) { var a = i[o], s = t[o]; a && !Array.isArray(a) && (a = [a]), i[o] = a ? a.concat(s) : Array.isArray(s) ? s : [s] } return i }, J.props = J.methods = J.inject = J.computed = function (e, t, n, r) { if (!e) return t; var i = Object.create(null); return extend(i, e), t && extend(i, t), i }, J.provide = mergeDataOrFn; var Q = function (e, t) { return void 0 === t ? e : t }; function mergeOptions(e, t, n) { if ("function" == typeof t && (t = t.options), function normalizeProps(e, t) { var n = e.props; if (n) { var r, i, o = {}; if (Array.isArray(n)) for (r = n.length; r--;)"string" == typeof (i = n[r]) && (o[u(i)] = { type: null }); else if (isPlainObject(n)) for (var a in n) i = n[a], o[u(a)] = isPlainObject(i) ? i : { type: i }; e.props = o } }(t), function normalizeInject(e, t) { var n = e.inject; if (n) { var r = e.inject = {}; if (Array.isArray(n)) for (var i = 0; i < n.length; i++)r[n[i]] = { from: n[i] }; else if (isPlainObject(n)) for (var o in n) { var a = n[o]; r[o] = isPlainObject(a) ? extend({ from: o }, a) : { from: a } } } }(t), function normalizeDirectives(e) { var t = e.directives; if (t) for (var n in t) { var r = t[n]; "function" == typeof r && (t[n] = { bind: r, update: r }) } }(t), !t._base && (t.extends && (e = mergeOptions(e, t.extends, n)), t.mixins)) for (var r = 0, i = t.mixins.length; r < i; r++)e = mergeOptions(e, t.mixins[r], n); var o, a = {}; for (o in e) mergeField(o); for (o in t) hasOwn(e, o) || mergeField(o); function mergeField(r) { var i = J[r] || Q; a[r] = i(e[r], t[r], n, r) } return a } function resolveAsset(e, t, n, r) { if ("string" == typeof n) { var i = e[t]; if (hasOwn(i, n)) return i[n]; var o = u(n); if (hasOwn(i, o)) return i[o]; var a = c(o); return hasOwn(i, a) ? i[a] : i[n] || i[o] || i[a] } } function validateProp(e, t, n, r) { var i = t[e], o = !hasOwn(n, e), a = n[e], s = getTypeIndex(Boolean, i.type); if (s > -1) if (o && !hasOwn(i, "default")) a = !1; else if ("" === a || a === f(e)) { var l = getTypeIndex(String, i.type); (l < 0 || s < l) && (a = !0) } if (void 0 === a) { a = function getPropDefaultValue(e, t, n) { if (!hasOwn(t, "default")) return; var r = t.default; 0; if (e && e.$options.propsData && void 0 === e.$options.propsData[n] && void 0 !== e._props[n]) return e._props[n]; return "function" == typeof r && "Function" !== getType(t.type) ? r.call(e) : r }(r, i, e); var u = K; toggleObserving(!0), observe(a), toggleObserving(u) } return a } function getType(e) { var t = e && e.toString().match(/^\s*function (\w+)/); return t ? t[1] : "" } function isSameType(e, t) { return getType(e) === getType(t) } function getTypeIndex(e, t) { if (!Array.isArray(t)) return isSameType(t, e) ? 0 : -1; for (var n = 0, r = t.length; n < r; n++)if (isSameType(t[n], e)) return n; return -1 } function handleError(e, t, n) { pushTarget(); try { if (t) for (var r = t; r = r.$parent;) { var i = r.$options.errorCaptured; if (i) for (var o = 0; o < i.length; o++)try { if (!1 === i[o].call(r, e, t, n)) return } catch (e) { globalHandleError(e, r, "errorCaptured hook") } } globalHandleError(e, t, n) } finally { popTarget() } } function invokeWithErrorHandling(e, t, n, r, i) { var o; try { (o = n ? e.apply(t, n) : e.call(t)) && !o._isVue && isPromise(o) && (o = o.catch(function (e) { return handleError(e, r, i + " (Promise/async)") })) } catch (e) { handleError(e, r, i) } return o } function globalHandleError(e, t, n) { if (_.errorHandler) try { return _.errorHandler.call(null, e, t, n) } catch (t) { t !== e && logError(t, null, "config.errorHandler") } logError(e, t, n) } function logError(e, t, n) { if (!S && !k || "undefined" == typeof console) throw e; console.error(e) } var ee, te = !1, ne = [], re = !1; function flushCallbacks() { re = !1; var e = ne.slice(0); ne.length = 0; for (var t = 0; t < e.length; t++)e[t]() } if ("undefined" != typeof Promise && isNative(Promise)) { var ie = Promise.resolve(); ee = function () { ie.then(flushCallbacks), P && setTimeout(noop) }, te = !0 } else if (M || "undefined" == typeof MutationObserver || !isNative(MutationObserver) && "[object MutationObserverConstructor]" !== MutationObserver.toString()) ee = void 0 !== n && isNative(n) ? function () { n(flushCallbacks) } : function () { setTimeout(flushCallbacks, 0) }; else { var oe = 1, ae = new MutationObserver(flushCallbacks), se = document.createTextNode(String(oe)); ae.observe(se, { characterData: !0 }), ee = function () { oe = (oe + 1) % 2, se.data = String(oe) }, te = !0 } function nextTick(e, t) { var n; if (ne.push(function () { if (e) try { e.call(t) } catch (e) { handleError(e, t, "nextTick") } else n && n(t) }), re || (re = !0, ee()), !e && "undefined" != typeof Promise) return new Promise(function (e) { n = e }) } var le = new $; function traverse(e) { !function _traverse(e, t) { var n, r; var i = Array.isArray(e); if (!i && !isObject(e) || Object.isFrozen(e) || e instanceof H) return; if (e.__ob__) { var o = e.__ob__.dep.id; if (t.has(o)) return; t.add(o) } if (i) for (n = e.length; n--;)_traverse(e[n], t); else for (r = Object.keys(e), n = r.length; n--;)_traverse(e[r[n]], t) }(e, le), le.clear() } var ue = cached(function (e) { var t = "&" === e.charAt(0), n = "~" === (e = t ? e.slice(1) : e).charAt(0), r = "!" === (e = n ? e.slice(1) : e).charAt(0); return { name: e = r ? e.slice(1) : e, once: n, capture: r, passive: t } }); function createFnInvoker(e, t) { function invoker() { var e = arguments, n = invoker.fns; if (!Array.isArray(n)) return invokeWithErrorHandling(n, null, arguments, t, "v-on handler"); for (var r = n.slice(), i = 0; i < r.length; i++)invokeWithErrorHandling(r[i], null, e, t, "v-on handler") } return invoker.fns = e, invoker } function updateListeners(e, t, n, r, i, o) { var a, s, l, u; for (a in e) s = e[a], l = t[a], u = ue(a), isUndef(s) || (isUndef(l) ? (isUndef(s.fns) && (s = e[a] = createFnInvoker(s, o)), isTrue(u.once) && (s = e[a] = i(u.name, s, u.capture)), n(u.name, s, u.capture, u.passive, u.params)) : s !== l && (l.fns = s, e[a] = l)); for (a in t) isUndef(e[a]) && r((u = ue(a)).name, t[a], u.capture) } function mergeVNodeHook(e, t, n) { var r; e instanceof H && (e = e.data.hook || (e.data.hook = {})); var i = e[t]; function wrappedHook() { n.apply(this, arguments), remove(r.fns, wrappedHook) } isUndef(i) ? r = createFnInvoker([wrappedHook]) : isDef(i.fns) && isTrue(i.merged) ? (r = i).fns.push(wrappedHook) : r = createFnInvoker([i, wrappedHook]), r.merged = !0, e[t] = r } function checkProp(e, t, n, r, i) { if (isDef(t)) { if (hasOwn(t, n)) return e[n] = t[n], i || delete t[n], !0; if (hasOwn(t, r)) return e[n] = t[r], i || delete t[r], !0 } return !1 } function normalizeChildren(e) { return isPrimitive(e) ? [createTextVNode(e)] : Array.isArray(e) ? function normalizeArrayChildren(e, t) { var n = []; var r, i, o, a; for (r = 0; r < e.length; r++)isUndef(i = e[r]) || "boolean" == typeof i || (o = n.length - 1, a = n[o], Array.isArray(i) ? i.length > 0 && (isTextNode((i = normalizeArrayChildren(i, (t || "") + "_" + r))[0]) && isTextNode(a) && (n[o] = createTextVNode(a.text + i[0].text), i.shift()), n.push.apply(n, i)) : isPrimitive(i) ? isTextNode(a) ? n[o] = createTextVNode(a.text + i) : "" !== i && n.push(createTextVNode(i)) : isTextNode(i) && isTextNode(a) ? n[o] = createTextVNode(a.text + i.text) : (isTrue(e._isVList) && isDef(i.tag) && isUndef(i.key) && isDef(t) && (i.key = "__vlist" + t + "_" + r + "__"), n.push(i))); return n }(e) : void 0 } function isTextNode(e) { return isDef(e) && isDef(e.text) && function isFalse(e) { return !1 === e }(e.isComment) } function resolveInject(e, t) { if (e) { for (var n = Object.create(null), r = B ? Reflect.ownKeys(e) : Object.keys(e), i = 0; i < r.length; i++) { var o = r[i]; if ("__ob__" !== o) { for (var a = e[o].from, s = t; s;) { if (s._provided && hasOwn(s._provided, a)) { n[o] = s._provided[a]; break } s = s.$parent } if (!s) if ("default" in e[o]) { var l = e[o].default; n[o] = "function" == typeof l ? l.call(t) : l } else 0 } } return n } } function resolveSlots(e, t) { if (!e || !e.length) return {}; for (var n = {}, r = 0, i = e.length; r < i; r++) { var o = e[r], a = o.data; if (a && a.attrs && a.attrs.slot && delete a.attrs.slot, o.context !== t && o.fnContext !== t || !a || null == a.slot) (n.default || (n.default = [])).push(o); else { var s = a.slot, l = n[s] || (n[s] = []); "template" === o.tag ? l.push.apply(l, o.children || []) : l.push(o) } } for (var u in n) n[u].every(isWhitespace) && delete n[u]; return n } function isWhitespace(e) { return e.isComment && !e.asyncFactory || " " === e.text } function normalizeScopedSlots(e, t, n) { var i, o = !e || !!e.$stable, a = e && e.$key; if (e) { if (e._normalized) return e._normalized; if (o && n && n !== r && a === n.$key && 0 === Object.keys(t).length) return n; for (var s in i = {}, e) e[s] && "$" !== s[0] && (i[s] = normalizeScopedSlot(t, s, e[s])) } else i = {}; for (var l in t) l in i || (i[l] = proxyNormalSlot(t, l)); return e && Object.isExtensible(e) && (e._normalized = i), def(i, "$stable", o), def(i, "$key", a), i } function normalizeScopedSlot(e, t, n) { var r = function () { var e = arguments.length ? n.apply(null, arguments) : n({}); return (e = e && "object" == typeof e && !Array.isArray(e) ? [e] : normalizeChildren(e)) && 0 === e.length ? void 0 : e }; return n.proxy && Object.defineProperty(e, t, { get: r, enumerable: !0, configurable: !0 }), r } function proxyNormalSlot(e, t) { return function () { return e[t] } } function renderList(e, t) { var n, r, i, o, a; if (Array.isArray(e) || "string" == typeof e) for (n = new Array(e.length), r = 0, i = e.length; r < i; r++)n[r] = t(e[r], r); else if ("number" == typeof e) for (n = new Array(e), r = 0; r < e; r++)n[r] = t(r + 1, r); else if (isObject(e)) if (B && e[Symbol.iterator]) { n = []; for (var s = e[Symbol.iterator](), l = s.next(); !l.done;)n.push(t(l.value, n.length)), l = s.next() } else for (o = Object.keys(e), n = new Array(o.length), r = 0, i = o.length; r < i; r++)a = o[r], n[r] = t(e[a], a, r); return isDef(n) || (n = []), n._isVList = !0, n } function renderSlot(e, t, n, r) { var i, o = this.$scopedSlots[e]; o ? (n = n || {}, r && (n = extend(extend({}, r), n)), i = o(n) || t) : i = this.$slots[e] || t; var a = n && n.slot; return a ? this.$createElement("template", { slot: a }, i) : i } function resolveFilter(e) { return resolveAsset(this.$options, "filters", e) || m } function isKeyNotMatch(e, t) { return Array.isArray(e) ? -1 === e.indexOf(t) : e !== t } function checkKeyCodes(e, t, n, r, i) { var o = _.keyCodes[t] || n; return i && r && !_.keyCodes[t] ? isKeyNotMatch(i, r) : o ? isKeyNotMatch(o, e) : r ? f(r) !== t : void 0 } function bindObjectProps(e, t, n, r, i) { if (n) if (isObject(n)) { var o; Array.isArray(n) && (n = toObject(n)); var s = function (s) { if ("class" === s || "style" === s || a(s)) o = e; else { var l = e.attrs && e.attrs.type; o = r || _.mustUseProp(t, l, s) ? e.domProps || (e.domProps = {}) : e.attrs || (e.attrs = {}) } var c = u(s); s in o || c in o || (o[s] = n[s], i && ((e.on || (e.on = {}))["update:" + c] = function (e) { n[s] = e })) }; for (var l in n) s(l) } else; return e } function renderStatic(e, t) { var n = this._staticTrees || (this._staticTrees = []), r = n[e]; return r && !t ? r : (markStatic(r = n[e] = this.$options.staticRenderFns[e].call(this._renderProxy, null, this), "__static__" + e, !1), r) } function markOnce(e, t, n) { return markStatic(e, "__once__" + t + (n ? "_" + n : ""), !0), e } function markStatic(e, t, n) { if (Array.isArray(e)) for (var r = 0; r < e.length; r++)e[r] && "string" != typeof e[r] && markStaticNode(e[r], t + "_" + r, n); else markStaticNode(e, t, n) } function markStaticNode(e, t, n) { e.isStatic = !0, e.key = t, e.isOnce = n } function bindObjectListeners(e, t) { if (t) if (isPlainObject(t)) { var n = e.on = e.on ? extend({}, e.on) : {}; for (var r in t) { var i = n[r], o = t[r]; n[r] = i ? [].concat(i, o) : o } } else; return e } function resolveScopedSlots(e, t, n, r) { t = t || { $stable: !n }; for (var i = 0; i < e.length; i++) { var o = e[i]; Array.isArray(o) ? resolveScopedSlots(o, t, n) : o && (o.proxy && (o.fn.proxy = !0), t[o.key] = o.fn) } return r && (t.$key = r), t } function bindDynamicKeys(e, t) { for (var n = 0; n < t.length; n += 2) { var r = t[n]; "string" == typeof r && r && (e[t[n]] = t[n + 1]) } return e } function prependModifier(e, t) { return "string" == typeof e ? t + e : e } function installRenderHelpers(e) { e._o = markOnce, e._n = toNumber, e._s = toString, e._l = renderList, e._t = renderSlot, e._q = looseEqual, e._i = looseIndexOf, e._m = renderStatic, e._f = resolveFilter, e._k = checkKeyCodes, e._b = bindObjectProps, e._v = createTextVNode, e._e = G, e._u = resolveScopedSlots, e._g = bindObjectListeners, e._d = bindDynamicKeys, e._p = prependModifier } function FunctionalRenderContext(e, t, n, i, o) { var a, s = this, l = o.options; hasOwn(i, "_uid") ? (a = Object.create(i))._original = i : (a = i, i = i._original); var u = isTrue(l._compiled), c = !u; this.data = e, this.props = t, this.children = n, this.parent = i, this.listeners = e.on || r, this.injections = resolveInject(l.inject, i), this.slots = function () { return s.$slots || normalizeScopedSlots(e.scopedSlots, s.$slots = resolveSlots(n, i)), s.$slots }, Object.defineProperty(this, "scopedSlots", { enumerable: !0, get: function get() { return normalizeScopedSlots(e.scopedSlots, this.slots()) } }), u && (this.$options = l, this.$slots = this.slots(), this.$scopedSlots = normalizeScopedSlots(e.scopedSlots, this.$slots)), l._scopeId ? this._c = function (e, t, n, r) { var o = createElement(a, e, t, n, r, c); return o && !Array.isArray(o) && (o.fnScopeId = l._scopeId, o.fnContext = i), o } : this._c = function (e, t, n, r) { return createElement(a, e, t, n, r, c) } } function cloneAndMarkFunctionalResult(e, t, n, r, i) { var o = cloneVNode(e); return o.fnContext = n, o.fnOptions = r, t.slot && ((o.data || (o.data = {})).slot = t.slot), o } function mergeProps(e, t) { for (var n in t) e[u(n)] = t[n] } installRenderHelpers(FunctionalRenderContext.prototype); var ce = { init: function init(e, t) { if (e.componentInstance && !e.componentInstance._isDestroyed && e.data.keepAlive) { var n = e; ce.prepatch(n, n) } else { (e.componentInstance = function createComponentInstanceForVnode(e, t) { var n = { _isComponent: !0, _parentVnode: e, parent: t }, r = e.data.inlineTemplate; isDef(r) && (n.render = r.render, n.staticRenderFns = r.staticRenderFns); return new e.componentOptions.Ctor(n) }(e, ge)).$mount(t ? e.elm : void 0, t) } }, prepatch: function prepatch(e, t) { var n = t.componentOptions; !function updateChildComponent(e, t, n, i, o) { 0; var a = i.data.scopedSlots, s = e.$scopedSlots, l = !!(a && !a.$stable || s !== r && !s.$stable || a && e.$scopedSlots.$key !== a.$key), u = !!(o || e.$options._renderChildren || l); e.$options._parentVnode = i, e.$vnode = i, e._vnode && (e._vnode.parent = i); if (e.$options._renderChildren = o, e.$attrs = i.data.attrs || r, e.$listeners = n || r, t && e.$options.props) { toggleObserving(!1); for (var c = e._props, d = e.$options._propKeys || [], f = 0; f < d.length; f++) { var h = d[f], p = e.$options.props; c[h] = validateProp(h, p, t, e) } toggleObserving(!0), e.$options.propsData = t } n = n || r; var m = e.$options._parentListeners; e.$options._parentListeners = n, updateComponentListeners(e, n, m), u && (e.$slots = resolveSlots(o, i.context), e.$forceUpdate()); 0 }(t.componentInstance = e.componentInstance, n.propsData, n.listeners, t, n.children) }, insert: function insert(e) { var t = e.context, n = e.componentInstance; n._isMounted || (n._isMounted = !0, callHook(n, "mounted")), e.data.keepAlive && (t._isMounted ? function queueActivatedComponent(e) { e._inactive = !1, ye.push(e) }(n) : activateChildComponent(n, !0)) }, destroy: function destroy(e) { var t = e.componentInstance; t._isDestroyed || (e.data.keepAlive ? function deactivateChildComponent(e, t) { if (t && (e._directInactive = !0, isInInactiveTree(e))) return; if (!e._inactive) { e._inactive = !0; for (var n = 0; n < e.$children.length; n++)deactivateChildComponent(e.$children[n]); callHook(e, "deactivated") } }(t, !0) : t.$destroy()) } }, de = Object.keys(ce); function createComponent(e, t, n, i, o) { if (!isUndef(e)) { var a = n.$options._base; if (isObject(e) && (e = a.extend(e)), "function" == typeof e) { var s; if (isUndef(e.cid) && void 0 === (e = function resolveAsyncComponent(e, t) { if (isTrue(e.error) && isDef(e.errorComp)) return e.errorComp; if (isDef(e.resolved)) return e.resolved; if (isTrue(e.loading) && isDef(e.loadingComp)) return e.loadingComp; var n = me; if (!isDef(e.owners)) { var r = e.owners = [n], i = !0, o = function (e) { for (var t = 0, n = r.length; t < n; t++)r[t].$forceUpdate(); e && (r.length = 0) }, a = once(function (n) { e.resolved = ensureCtor(n, t), i ? r.length = 0 : o(!0) }), s = once(function (t) { isDef(e.errorComp) && (e.error = !0, o(!0)) }), l = e(a, s); return isObject(l) && (isPromise(l) ? isUndef(e.resolved) && l.then(a, s) : isPromise(l.component) && (l.component.then(a, s), isDef(l.error) && (e.errorComp = ensureCtor(l.error, t)), isDef(l.loading) && (e.loadingComp = ensureCtor(l.loading, t), 0 === l.delay ? e.loading = !0 : setTimeout(function () { isUndef(e.resolved) && isUndef(e.error) && (e.loading = !0, o(!1)) }, l.delay || 200)), isDef(l.timeout) && setTimeout(function () { isUndef(e.resolved) && s(null) }, l.timeout))), i = !1, e.loading ? e.loadingComp : e.resolved } e.owners.push(n) }(s = e, a))) return function createAsyncPlaceholder(e, t, n, r, i) { var o = G(); return o.asyncFactory = e, o.asyncMeta = { data: t, context: n, children: r, tag: i }, o }(s, t, n, i, o); t = t || {}, resolveConstructorOptions(e), isDef(t.model) && function transformModel(e, t) { var n = e.model && e.model.prop || "value", r = e.model && e.model.event || "input"; (t.attrs || (t.attrs = {}))[n] = t.model.value; var i = t.on || (t.on = {}), o = i[r], a = t.model.callback; isDef(o) ? (Array.isArray(o) ? -1 === o.indexOf(a) : o !== a) && (i[r] = [a].concat(o)) : i[r] = a }(e.options, t); var l = function extractPropsFromVNodeData(e, t, n) { var r = t.options.props; if (!isUndef(r)) { var i = {}, o = e.attrs, a = e.props; if (isDef(o) || isDef(a)) for (var s in r) { var l = f(s); checkProp(i, a, s, l, !0) || checkProp(i, o, s, l, !1) } return i } }(t, e); if (isTrue(e.options.functional)) return function createFunctionalComponent(e, t, n, i, o) { var a = e.options, s = {}, l = a.props; if (isDef(l)) for (var u in l) s[u] = validateProp(u, l, t || r); else isDef(n.attrs) && mergeProps(s, n.attrs), isDef(n.props) && mergeProps(s, n.props); var c = new FunctionalRenderContext(n, s, o, i, e), d = a.render.call(null, c._c, c); if (d instanceof H) return cloneAndMarkFunctionalResult(d, n, c.parent, a); if (Array.isArray(d)) { for (var f = normalizeChildren(d) || [], h = new Array(f.length), p = 0; p < f.length; p++)h[p] = cloneAndMarkFunctionalResult(f[p], n, c.parent, a); return h } }(e, l, t, n, i); var u = t.on; if (t.on = t.nativeOn, isTrue(e.options.abstract)) { var c = t.slot; t = {}, c && (t.slot = c) } !function installComponentHooks(e) { for (var t = e.hook || (e.hook = {}), n = 0; n < de.length; n++) { var r = de[n], i = t[r], o = ce[r]; i === o || i && i._merged || (t[r] = i ? mergeHook$1(o, i) : o) } }(t); var d = e.options.name || o; return new H("vue-component-" + e.cid + (d ? "-" + d : ""), t, void 0, void 0, void 0, n, { Ctor: e, propsData: l, listeners: u, tag: o, children: i }, s) } } } function mergeHook$1(e, t) { var n = function (n, r) { e(n, r), t(n, r) }; return n._merged = !0, n } var fe = 1, he = 2; function createElement(e, t, n, r, i, o) { return (Array.isArray(n) || isPrimitive(n)) && (i = r, r = n, n = void 0), isTrue(o) && (i = he), function _createElement(e, t, n, r, i) { if (isDef(n) && isDef(n.__ob__)) return G(); isDef(n) && isDef(n.is) && (t = n.is); if (!t) return G(); 0; Array.isArray(r) && "function" == typeof r[0] && ((n = n || {}).scopedSlots = { default: r[0] }, r.length = 0); i === he ? r = normalizeChildren(r) : i === fe && (r = function simpleNormalizeChildren(e) { for (var t = 0; t < e.length; t++)if (Array.isArray(e[t])) return Array.prototype.concat.apply([], e); return e }(r)); var o, a; if ("string" == typeof t) { var s; a = e.$vnode && e.$vnode.ns || _.getTagNamespace(t), o = _.isReservedTag(t) ? new H(_.parsePlatformTagName(t), n, r, void 0, void 0, e) : n && n.pre || !isDef(s = resolveAsset(e.$options, "components", t)) ? new H(t, n, r, void 0, void 0, e) : createComponent(s, n, e, r, t) } else o = createComponent(t, n, e, r); return Array.isArray(o) ? o : isDef(o) ? (isDef(a) && function applyNS(e, t, n) { e.ns = t; "foreignObject" === e.tag && (t = void 0, n = !0); if (isDef(e.children)) for (var r = 0, i = e.children.length; r < i; r++) { var o = e.children[r]; isDef(o.tag) && (isUndef(o.ns) || isTrue(n) && "svg" !== o.tag) && applyNS(o, t, n) } }(o, a), isDef(n) && function registerDeepBindings(e) { isObject(e.style) && traverse(e.style); isObject(e.class) && traverse(e.class) }(n), o) : G() }(e, t, n, r, i) } var pe, me = null; function ensureCtor(e, t) { return (e.__esModule || B && "Module" === e[Symbol.toStringTag]) && (e = e.default), isObject(e) ? t.extend(e) : e } function isAsyncPlaceholder(e) { return e.isComment && e.asyncFactory } function getFirstComponentChild(e) { if (Array.isArray(e)) for (var t = 0; t < e.length; t++) { var n = e[t]; if (isDef(n) && (isDef(n.componentOptions) || isAsyncPlaceholder(n))) return n } } function add(e, t) { pe.$on(e, t) } function remove$1(e, t) { pe.$off(e, t) } function createOnceHandler(e, t) { var n = pe; return function onceHandler() { null !== t.apply(null, arguments) && n.$off(e, onceHandler) } } function updateComponentListeners(e, t, n) { pe = e, updateListeners(t, n || {}, add, remove$1, createOnceHandler, e), pe = void 0 } var ge = null; function setActiveInstance(e) { var t = ge; return ge = e, function () { ge = t } } function isInInactiveTree(e) { for (; e && (e = e.$parent);)if (e._inactive) return !0; return !1 } function activateChildComponent(e, t) { if (t) { if (e._directInactive = !1, isInInactiveTree(e)) return } else if (e._directInactive) return; if (e._inactive || null === e._inactive) { e._inactive = !1; for (var n = 0; n < e.$children.length; n++)activateChildComponent(e.$children[n]); callHook(e, "activated") } } function callHook(e, t) { pushTarget(); var n = e.$options[t], r = t + " hook"; if (n) for (var i = 0, o = n.length; i < o; i++)invokeWithErrorHandling(n[i], e, null, e, r); e._hasHookEvent && e.$emit("hook:" + t), popTarget() } var ve = [], ye = [], _e = {}, be = !1, we = !1, xe = 0; var Ce = 0, Se = Date.now; function flushSchedulerQueue() { var e, t; for (Ce = Se(), we = !0, ve.sort(function (e, t) { return e.id - t.id }), xe = 0; xe < ve.length; xe++)(e = ve[xe]).before && e.before(), t = e.id, _e[t] = null, e.run(); var n = ye.slice(), r = ve.slice(); !function resetSchedulerState() { xe = ve.length = ye.length = 0, _e = {}, be = we = !1 }(), function callActivatedHooks(e) { for (var t = 0; t < e.length; t++)e[t]._inactive = !0, activateChildComponent(e[t], !0) }(n), function callUpdatedHooks(e) { var t = e.length; for (; t--;) { var n = e[t], r = n.vm; r._watcher === n && r._isMounted && !r._isDestroyed && callHook(r, "updated") } }(r), N && _.devtools && N.emit("flush") } S && Se() > document.createEvent("Event").timeStamp && (Se = function () { return performance.now() }); var ke = 0, Te = function Watcher(e, t, n, r, i) { this.vm = e, i && (e._watcher = this), e._watchers.push(this), r ? (this.deep = !!r.deep, this.user = !!r.user, this.lazy = !!r.lazy, this.sync = !!r.sync, this.before = r.before) : this.deep = this.user = this.lazy = this.sync = !1, this.cb = n, this.id = ++ke, this.active = !0, this.dirty = this.lazy, this.deps = [], this.newDeps = [], this.depIds = new $, this.newDepIds = new $, this.expression = "", "function" == typeof t ? this.getter = t : (this.getter = function parsePath(e) { if (!w.test(e)) { var t = e.split("."); return function (e) { for (var n = 0; n < t.length; n++) { if (!e) return; e = e[t[n]] } return e } } }(t), this.getter || (this.getter = noop)), this.value = this.lazy ? void 0 : this.get() }; Te.prototype.get = function get() { var e; pushTarget(this); var t = this.vm; try { e = this.getter.call(t, t) } catch (e) { if (!this.user) throw e; handleError(e, t, 'getter for watcher "' + this.expression + '"') } finally { this.deep && traverse(e), popTarget(), this.cleanupDeps() } return e }, Te.prototype.addDep = function addDep(e) { var t = e.id; this.newDepIds.has(t) || (this.newDepIds.add(t), this.newDeps.push(e), this.depIds.has(t) || e.addSub(this)) }, Te.prototype.cleanupDeps = function cleanupDeps() { for (var e = this.deps.length; e--;) { var t = this.deps[e]; this.newDepIds.has(t.id) || t.removeSub(this) } var n = this.depIds; this.depIds = this.newDepIds, this.newDepIds = n, this.newDepIds.clear(), n = this.deps, this.deps = this.newDeps, this.newDeps = n, this.newDeps.length = 0 }, Te.prototype.update = function update() { this.lazy ? this.dirty = !0 : this.sync ? this.run() : function queueWatcher(e) { var t = e.id; if (null == _e[t]) { if (_e[t] = !0, we) { for (var n = ve.length - 1; n > xe && ve[n].id > e.id;)n--; ve.splice(n + 1, 0, e) } else ve.push(e); be || (be = !0, nextTick(flushSchedulerQueue)) } }(this) }, Te.prototype.run = function run() { if (this.active) { var e = this.get(); if (e !== this.value || isObject(e) || this.deep) { var t = this.value; if (this.value = e, this.user) try { this.cb.call(this.vm, e, t) } catch (e) { handleError(e, this.vm, 'callback for watcher "' + this.expression + '"') } else this.cb.call(this.vm, e, t) } } }, Te.prototype.evaluate = function evaluate() { this.value = this.get(), this.dirty = !1 }, Te.prototype.depend = function depend() { for (var e = this.deps.length; e--;)this.deps[e].depend() }, Te.prototype.teardown = function teardown() { if (this.active) { this.vm._isBeingDestroyed || remove(this.vm._watchers, this); for (var e = this.deps.length; e--;)this.deps[e].removeSub(this); this.active = !1 } }; var Le = { enumerable: !0, configurable: !0, get: noop, set: noop }; function proxy(e, t, n) { Le.get = function proxyGetter() { return this[t][n] }, Le.set = function proxySetter(e) { this[t][n] = e }, Object.defineProperty(e, n, Le) } function initState(e) { e._watchers = []; var t = e.$options; t.props && function initProps(e, t) { var n = e.$options.propsData || {}, r = e._props = {}, i = e.$options._propKeys = []; e.$parent && toggleObserving(!1); var o = function (o) { i.push(o); var a = validateProp(o, t, n, e); defineReactive$$1(r, o, a), o in e || proxy(e, "_props", o) }; for (var a in t) o(a); toggleObserving(!0) }(e, t.props), t.methods && function initMethods(e, t) { e.$options.props; for (var n in t) e[n] = "function" != typeof t[n] ? noop : h(t[n], e) }(e, t.methods), t.data ? function initData(e) { var t = e.$options.data; isPlainObject(t = e._data = "function" == typeof t ? function getData(e, t) { pushTarget(); try { return e.call(t, t) } catch (e) { return handleError(e, t, "data()"), {} } finally { popTarget() } }(t, e) : t || {}) || (t = {}); var n = Object.keys(t), r = e.$options.props, i = (e.$options.methods, n.length); for (; i--;) { var o = n[i]; 0, r && hasOwn(r, o) || (void 0, 36 !== (a = (o + "").charCodeAt(0)) && 95 !== a && proxy(e, "_data", o)) } var a; observe(t, !0) }(e) : observe(e._data = {}, !0), t.computed && function initComputed(e, t) { var n = e._computedWatchers = Object.create(null), r = I(); for (var i in t) { var o = t[i], a = "function" == typeof o ? o : o.get; 0, r || (n[i] = new Te(e, a || noop, noop, Me)), i in e || defineComputed(e, i, o) } }(e, t.computed), t.watch && t.watch !== O && function initWatch(e, t) { for (var n in t) { var r = t[n]; if (Array.isArray(r)) for (var i = 0; i < r.length; i++)createWatcher(e, n, r[i]); else createWatcher(e, n, r) } }(e, t.watch) } var Me = { lazy: !0 }; function defineComputed(e, t, n) { var r = !I(); "function" == typeof n ? (Le.get = r ? createComputedGetter(t) : createGetterInvoker(n), Le.set = noop) : (Le.get = n.get ? r && !1 !== n.cache ? createComputedGetter(t) : createGetterInvoker(n.get) : noop, Le.set = n.set || noop), Object.defineProperty(e, t, Le) } function createComputedGetter(e) { return function computedGetter() { var t = this._computedWatchers && this._computedWatchers[e]; if (t) return t.dirty && t.evaluate(), U.target && t.depend(), t.value } } function createGetterInvoker(e) { return function computedGetter() { return e.call(this, this) } } function createWatcher(e, t, n, r) { return isPlainObject(n) && (r = n, n = n.handler), "string" == typeof n && (n = e[n]), e.$watch(t, n, r) } var Ee = 0; function resolveConstructorOptions(e) { var t = e.options; if (e.super) { var n = resolveConstructorOptions(e.super); if (n !== e.superOptions) { e.superOptions = n; var r = function resolveModifiedOptions(e) { var t, n = e.options, r = e.sealedOptions; for (var i in n) n[i] !== r[i] && (t || (t = {}), t[i] = n[i]); return t }(e); r && extend(e.extendOptions, r), (t = e.options = mergeOptions(n, e.extendOptions)).name && (t.components[t.name] = e) } } return t } function Vue(e) { this._init(e) } function initExtend(e) { e.cid = 0; var t = 1; e.extend = function (e) { e = e || {}; var n = this, r = n.cid, i = e._Ctor || (e._Ctor = {}); if (i[r]) return i[r]; var o = e.name || n.options.name; var a = function VueComponent(e) { this._init(e) }; return (a.prototype = Object.create(n.prototype)).constructor = a, a.cid = t++, a.options = mergeOptions(n.options, e), a.super = n, a.options.props && function initProps$1(e) { var t = e.options.props; for (var n in t) proxy(e.prototype, "_props", n) }(a), a.options.computed && function initComputed$1(e) { var t = e.options.computed; for (var n in t) defineComputed(e.prototype, n, t[n]) }(a), a.extend = n.extend, a.mixin = n.mixin, a.use = n.use, v.forEach(function (e) { a[e] = n[e] }), o && (a.options.components[o] = a), a.superOptions = n.options, a.extendOptions = e, a.sealedOptions = extend({}, a.options), i[r] = a, a } } function getComponentName(e) { return e && (e.Ctor.options.name || e.tag) } function matches(e, t) { return Array.isArray(e) ? e.indexOf(t) > -1 : "string" == typeof e ? e.split(",").indexOf(t) > -1 : !!isRegExp(e) && e.test(t) } function pruneCache(e, t) { var n = e.cache, r = e.keys, i = e._vnode; for (var o in n) { var a = n[o]; if (a) { var s = getComponentName(a.componentOptions); s && !t(s) && pruneCacheEntry(n, o, r, i) } } } function pruneCacheEntry(e, t, n, r) { var i = e[t]; !i || r && i.tag === r.tag || i.componentInstance.$destroy(), e[t] = null, remove(n, t) } !function initMixin(e) { e.prototype._init = function (e) { var t = this; t._uid = Ee++, t._isVue = !0, e && e._isComponent ? function initInternalComponent(e, t) { var n = e.$options = Object.create(e.constructor.options), r = t._parentVnode; n.parent = t.parent, n._parentVnode = r; var i = r.componentOptions; n.propsData = i.propsData, n._parentListeners = i.listeners, n._renderChildren = i.children, n._componentTag = i.tag, t.render && (n.render = t.render, n.staticRenderFns = t.staticRenderFns) }(t, e) : t.$options = mergeOptions(resolveConstructorOptions(t.constructor), e || {}, t), t._renderProxy = t, t._self = t, function initLifecycle(e) { var t = e.$options, n = t.parent; if (n && !t.abstract) { for (; n.$options.abstract && n.$parent;)n = n.$parent; n.$children.push(e) } e.$parent = n, e.$root = n ? n.$root : e, e.$children = [], e.$refs = {}, e._watcher = null, e._inactive = null, e._directInactive = !1, e._isMounted = !1, e._isDestroyed = !1, e._isBeingDestroyed = !1 }(t), function initEvents(e) { e._events = Object.create(null), e._hasHookEvent = !1; var t = e.$options._parentListeners; t && updateComponentListeners(e, t) }(t), function initRender(e) { e._vnode = null, e._staticTrees = null; var t = e.$options, n = e.$vnode = t._parentVnode, i = n && n.context; e.$slots = resolveSlots(t._renderChildren, i), e.$scopedSlots = r, e._c = function (t, n, r, i) { return createElement(e, t, n, r, i, !1) }, e.$createElement = function (t, n, r, i) { return createElement(e, t, n, r, i, !0) }; var o = n && n.data; defineReactive$$1(e, "$attrs", o && o.attrs || r, null, !0), defineReactive$$1(e, "$listeners", t._parentListeners || r, null, !0) }(t), callHook(t, "beforeCreate"), function initInjections(e) { var t = resolveInject(e.$options.inject, e); t && (toggleObserving(!1), Object.keys(t).forEach(function (n) { defineReactive$$1(e, n, t[n]) }), toggleObserving(!0)) }(t), initState(t), function initProvide(e) { var t = e.$options.provide; t && (e._provided = "function" == typeof t ? t.call(e) : t) }(t), callHook(t, "created"), t.$options.el && t.$mount(t.$options.el) } }(Vue), function stateMixin(e) { var t = { get: function () { return this._data } }, n = { get: function () { return this._props } }; Object.defineProperty(e.prototype, "$data", t), Object.defineProperty(e.prototype, "$props", n), e.prototype.$set = set, e.prototype.$delete = del, e.prototype.$watch = function (e, t, n) { if (isPlainObject(t)) return createWatcher(this, e, t, n); (n = n || {}).user = !0; var r = new Te(this, e, t, n); if (n.immediate) try { t.call(this, r.value) } catch (e) { handleError(e, this, 'callback for immediate watcher "' + r.expression + '"') } return function unwatchFn() { r.teardown() } } }(Vue), function eventsMixin(e) { var t = /^hook:/; e.prototype.$on = function (e, n) { var r = this; if (Array.isArray(e)) for (var i = 0, o = e.length; i < o; i++)r.$on(e[i], n); else (r._events[e] || (r._events[e] = [])).push(n), t.test(e) && (r._hasHookEvent = !0); return r }, e.prototype.$once = function (e, t) { var n = this; function on() { n.$off(e, on), t.apply(n, arguments) } return on.fn = t, n.$on(e, on), n }, e.prototype.$off = function (e, t) { var n = this; if (!arguments.length) return n._events = Object.create(null), n; if (Array.isArray(e)) { for (var r = 0, i = e.length; r < i; r++)n.$off(e[r], t); return n } var o, a = n._events[e]; if (!a) return n; if (!t) return n._events[e] = null, n; for (var s = a.length; s--;)if ((o = a[s]) === t || o.fn === t) { a.splice(s, 1); break } return n }, e.prototype.$emit = function (e) { var t = this._events[e]; if (t) { t = t.length > 1 ? toArray(t) : t; for (var n = toArray(arguments, 1), r = 'event handler for "' + e + '"', i = 0, o = t.length; i < o; i++)invokeWithErrorHandling(t[i], this, n, this, r) } return this } }(Vue), function lifecycleMixin(e) { e.prototype._update = function (e, t) { var n = this, r = n.$el, i = n._vnode, o = setActiveInstance(n); n._vnode = e, n.$el = i ? n.__patch__(i, e) : n.__patch__(n.$el, e, t, !1), o(), r && (r.__vue__ = null), n.$el && (n.$el.__vue__ = n), n.$vnode && n.$parent && n.$vnode === n.$parent._vnode && (n.$parent.$el = n.$el) }, e.prototype.$forceUpdate = function () { this._watcher && this._watcher.update() }, e.prototype.$destroy = function () { var e = this; if (!e._isBeingDestroyed) { callHook(e, "beforeDestroy"), e._isBeingDestroyed = !0; var t = e.$parent; !t || t._isBeingDestroyed || e.$options.abstract || remove(t.$children, e), e._watcher && e._watcher.teardown(); for (var n = e._watchers.length; n--;)e._watchers[n].teardown(); e._data.__ob__ && e._data.__ob__.vmCount--, e._isDestroyed = !0, e.__patch__(e._vnode, null), callHook(e, "destroyed"), e.$off(), e.$el && (e.$el.__vue__ = null), e.$vnode && (e.$vnode.parent = null) } } }(Vue), function renderMixin(e) { installRenderHelpers(e.prototype), e.prototype.$nextTick = function (e) { return nextTick(e, this) }, e.prototype._render = function () { var e, t = this, n = t.$options, r = n.render, i = n._parentVnode; i && (t.$scopedSlots = normalizeScopedSlots(i.data.scopedSlots, t.$slots, t.$scopedSlots)), t.$vnode = i; try { me = t, e = r.call(t._renderProxy, t.$createElement) } catch (n) { handleError(n, t, "render"), e = t._vnode } finally { me = null } return Array.isArray(e) && 1 === e.length && (e = e[0]), e instanceof H || (e = G()), e.parent = i, e } }(Vue); var Ae = [String, RegExp, Array], Pe = { KeepAlive: { name: "keep-alive", abstract: !0, props: { include: Ae, exclude: Ae, max: [String, Number] }, created: function created() { this.cache = Object.create(null), this.keys = [] }, destroyed: function destroyed() { for (var e in this.cache) pruneCacheEntry(this.cache, e, this.keys) }, mounted: function mounted() { var e = this; this.$watch("include", function (t) { pruneCache(e, function (e) { return matches(t, e) }) }), this.$watch("exclude", function (t) { pruneCache(e, function (e) { return !matches(t, e) }) }) }, render: function render() { var e = this.$slots.default, t = getFirstComponentChild(e), n = t && t.componentOptions; if (n) { var r = getComponentName(n), i = this.include, o = this.exclude; if (i && (!r || !matches(i, r)) || o && r && matches(o, r)) return t; var a = this.cache, s = this.keys, l = null == t.key ? n.Ctor.cid + (n.tag ? "::" + n.tag : "") : t.key; a[l] ? (t.componentInstance = a[l].componentInstance, remove(s, l), s.push(l)) : (a[l] = t, s.push(l), this.max && s.length > parseInt(this.max) && pruneCacheEntry(a, s[0], s, this._vnode)), t.data.keepAlive = !0 } return t || e && e[0] } } }; !function initGlobalAPI(e) { var t = { get: function () { return _ } }; Object.defineProperty(e, "config", t), e.util = { warn: z, extend: extend, mergeOptions: mergeOptions, defineReactive: defineReactive$$1 }, e.set = set, e.delete = del, e.nextTick = nextTick, e.observable = function (e) { return observe(e), e }, e.options = Object.create(null), v.forEach(function (t) { e.options[t + "s"] = Object.create(null) }), e.options._base = e, extend(e.options.components, Pe), function initUse(e) { e.use = function (e) { var t = this._installedPlugins || (this._installedPlugins = []); if (t.indexOf(e) > -1) return this; var n = toArray(arguments, 1); return n.unshift(this), "function" == typeof e.install ? e.install.apply(e, n) : "function" == typeof e && e.apply(null, n), t.push(e), this } }(e), function initMixin$1(e) { e.mixin = function (e) { return this.options = mergeOptions(this.options, e), this } }(e), initExtend(e), function initAssetRegisters(e) { v.forEach(function (t) { e[t] = function (e, n) { return n ? ("component" === t && isPlainObject(n) && (n.name = n.name || e, n = this.options._base.extend(n)), "directive" === t && "function" == typeof n && (n = { bind: n, update: n }), this.options[t + "s"][e] = n, n) : this.options[t + "s"][e] } }) }(e) }(Vue), Object.defineProperty(Vue.prototype, "$isServer", { get: I }), Object.defineProperty(Vue.prototype, "$ssrContext", { get: function get() { return this.$vnode && this.$vnode.ssrContext } }), Object.defineProperty(Vue, "FunctionalRenderContext", { value: FunctionalRenderContext }), Vue.version = "2.6.7"; var Re = makeMap("style,class"), Oe = makeMap("input,textarea,option,select,progress"), De = function (e, t, n) { return "value" === n && Oe(e) && "button" !== t || "selected" === n && "option" === e || "checked" === n && "input" === e || "muted" === n && "video" === e }, Fe = makeMap("contenteditable,draggable,spellcheck"), Ie = makeMap("events,caret,typing,plaintext-only"), Ne = function (e, t) { return Ue(t) || "false" === t ? "false" : "contenteditable" === e && Ie(t) ? t : "true" }, $e = makeMap("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"), Be = "http://www.w3.org/1999/xlink", ze = function (e) { return ":" === e.charAt(5) && "xlink" === e.slice(0, 5) }, je = function (e) { return ze(e) ? e.slice(6, e.length) : "" }, Ue = function (e) { return null == e || !1 === e }; function genClassForVnode(e) { for (var t = e.data, n = e, r = e; isDef(r.componentInstance);)(r = r.componentInstance._vnode) && r.data && (t = mergeClassData(r.data, t)); for (; isDef(n = n.parent);)n && n.data && (t = mergeClassData(t, n.data)); return function renderClass(e, t) { if (isDef(e) || isDef(t)) return concat(e, stringifyClass(t)); return "" }(t.staticClass, t.class) } function mergeClassData(e, t) { return { staticClass: concat(e.staticClass, t.staticClass), class: isDef(e.class) ? [e.class, t.class] : t.class } } function concat(e, t) { return e ? t ? e + " " + t : e : t || "" } function stringifyClass(e) { return Array.isArray(e) ? function stringifyArray(e) { for (var t, n = "", r = 0, i = e.length; r < i; r++)isDef(t = stringifyClass(e[r])) && "" !== t && (n && (n += " "), n += t); return n }(e) : isObject(e) ? function stringifyObject(e) { var t = ""; for (var n in e) e[n] && (t && (t += " "), t += n); return t }(e) : "string" == typeof e ? e : "" } var qe = { svg: "http://www.w3.org/2000/svg", math: "http://www.w3.org/1998/Math/MathML" }, He = makeMap("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"), Ve = makeMap("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view", !0), Ge = function (e) { return He(e) || Ve(e) }; function getTagNamespace(e) { return Ve(e) ? "svg" : "math" === e ? "math" : void 0 } var We = Object.create(null); var Ye = makeMap("text,number,password,search,email,tel,url"); function query(e) { if ("string" == typeof e) { var t = document.querySelector(e); return t || document.createElement("div") } return e } var Ze = Object.freeze({ createElement: function createElement$1(e, t) { var n = document.createElement(e); return "select" !== e ? n : (t.data && t.data.attrs && void 0 !== t$ event.target.multiple ? $$ selectedVal: $$ selectedVal[0] "), addHandler (e," change ", r, null,! 0)} (e, r, i); else if (" input "=== o &&" checkbox " === a)! function genCheckboxModel (e, t, n) {var r = n && n.number, i = getBindingAttr (e, "value") || "null", o = getBindingAttr (e, "true - value" ) || "verdadero", a = getBindingAttr (e, "valor - falso") || "falso"; addProp (e, "marcado", "Array.isArray(" + t + ") ? _ i(" + t + ", "+ i +") > - 1 "+ (" verdadero "=== o?" : ("+ t +") ":": _ q("+ t +", "+ o +") ")), addHandler ( e, "cambiar", "var $$ a = " + t + ", $$ el = $ event.target, $$ c = $$ el.checked ? (" + o + ") : (" + a + "); if(Array.isArray($$ a)) { var $$ v = "+ (r?" _ n ("+ i +") ": i) +", e.getters && forEachValue(this._rawModule.getters, e) }, D.prototype.forEachAction = function forEachAction(e) { this._rawModule.actions && forEachValue(this._rawModule.actions, e) }, D.prototype.forEachMutation = function forEachMutation(e) { this._rawModule.mutations && forEachValue(this._rawModule.mutations, e) }, y()(D.prototype, F); var I = function ModuleCollection(e) { this.register([], e, !1) }; I.prototype.get = function get(e) { return g()(e).call(e, function (e, t) { return e.getChild(t) }, this.root) }, I.prototype.getNamespace = function getNamespace(e) { var t = this.root; return g()(e).call(e, function (e, n) { return e + ((t = t.getChild(n)).namespaced ? n + "/" : "") }, "") }, I.prototype.update = function update$1(e) { !function update(e, t, n) { 0; t.update(n); if (n.modules) for (var r in n.modules) { if (!t.getChild(r)) return void 0; update(R()(e).call(e, r), t.getChild(r), n.modules[r]) } }([], this.root, e) }, I.prototype.register = function register(e, t, n) { var r = this; void 0 === n && (n = !0); var i = new D(t, n); 0 === e.length ? this.root = i : this.get(p()(e).call(e, 0, -1)).addChild(e[e.length - 1], i); t.modules && forEachValue(t.modules, function (t, i) { r.register(R()(e).call(e, i), t, n) }) }, I.prototype.unregister = function unregister(e) { var t = this.get(p()(e).call(e, 0, -1)), n = e[e.length - 1], r = t.getChild(n); r && r.runtime && t.removeChild(n) }, I.prototype.isRegistered = function isRegistered(e) { var t = this.get(p()(e).call(e, 0, -1)), n = e[e.length - 1]; return t.hasChild(n) }; var N; var $ = function Store(e) { var t = this; void 0 === e && (e = {}), !N && "undefined" != typeof window && window.Vue && install(window.Vue); var n = e.plugins; void 0 === n && (n = []); var r = e.strict; void 0 === r && (r = !1), this._committing = !1, this._actions = b()(null), this._actionSubscribers = [], this._mutations = b()(null), this._wrappedGetters = b()(null), this._modules = new I(e), this._modulesNamespaceMap = b()(null), this._subscribers = [], this._watcherVM = new N, this._makeLocalGettersCache = b()(null); var i = this, o = this.dispatch, a = this.commit; this.dispatch = function boundDispatch(e, t) { return o.call(i, e, t) }, this.commit = function boundCommit(e, t, n) { return a.call(i, e, t, n) }, this.strict = r; var s = this._modules.root.state; installModule(this, s, [], this._modules.root), resetStoreVM(this, s), S()(n).call(n, function (e) { return e(t) }), (void 0 !== e.devtools ? e.devtools : N.config.devtools) && function devtoolPlugin(e) { O && (e._devtoolHook = O, O.emit("vuex:init", e), O.on("vuex:travel-to-state", function (t) { e.replaceState(t) }), e.subscribe(function (e, t) { O.emit("vuex:mutation", e, t) }, { prepend: !0 }), e.subscribeAction(function (e, t) { O.emit("vuex:action", e, t) }, { prepend: !0 })) }(this) }, B = { state: { configurable: !0 } }; function genericSubscribe(e, t, n) { return l()(t).call(t, e) < 0 && (n && n.prepend ? t.unshift(e) : t.push(e)), function () { var n = l()(t).call(t, e); n > -1 && a()(t).call(t, n, 1) } } function resetStore(e, t) { e._actions = b()(null), e._mutations = b()(null), e._wrappedGetters = b()(null), e._modulesNamespaceMap = b()(null); var n = e.state; installModule(e, n, [], e._modules.root, !0), resetStoreVM(e, n, t) } function resetStoreVM(e, t, n) { var r = e._vm; e.getters = {}, e._makeLocalGettersCache = b()(null); var o = {}; forEachValue(e._wrappedGetters, function (t, n) { o[n] = function partial(e, t) { return function () { return e(t) } }(t, e), i()(e.getters, n, { get: function get() { return e._vm[n] }, enumerable: !0 }) }); var a = N.config.silent; N.config.silent = !0, e._vm = new N({ data: { $$state: t }, computed: o }), N.config.silent = a, e.strict && function enableStrictMode(e) { e._vm.$watch(function () { return this._data.$$state }, function () { 0 }, { deep: !0, sync: !0 }) }(e), r && (n && e._withCommit(function () { r._data.$$state = null }), N.nextTick(function () { return r.$destroy() })) } function installModule(e, t, n, r, o) { var a = !n.length, s = e._modules.getNamespace(n); if (r.namespaced && (e._modulesNamespaceMap[s], e._modulesNamespaceMap[s] = r), !a && !o) { var l = getNestedState(t, p()(n).call(n, 0, -1)), u = n[n.length - 1]; e._withCommit(function () { N.set(l, u, r.state) }) } var c = r.context = function makeLocalContext(e, t, n) { var r = "" === t, o = { dispatch: r ? e.dispatch : function (n, r, i) { var o = unifyObjectStyle(n, r, i), a = o.payload, s = o.options, l = o.type; return s && s.root || (l = t + l), e.dispatch(l, a) }, commit: r ? e.commit : function (n, r, i) { var o = unifyObjectStyle(n, r, i), a = o.payload, s = o.options, l = o.type; s && s.root || (l = t + l), e.commit(l, a, s) } }; return y()(o, { getters: { get: r ? function () { return e.getters } : function () { return function makeLocalGetters(e, t) { if (!e._makeLocalGettersCache[t]) { var n, r = {}, o = t.length; S()(n = x()(e.getters)).call(n, function (n) { if (p()(n).call(n, 0, o) === t) { var a = p()(n).call(n, o); i()(r, a, { get: function get() { return e.getters[n] }, enumerable: !0 }) } }), e._makeLocalGettersCache[t] = r } return e._makeLocalGettersCache[t] }(e, t) } }, state: { get: function get() { return getNestedState(e.state, n) } } }), o }(e, s, n); r.forEachMutation(function (t, n) { !function registerMutation(e, t, n, r) { (e._mutations[t] || (e._mutations[t] = [])).push(function wrappedMutationHandler(t) { n.call(e, r.state, t) }) }(e, s + n, t, c) }), r.forEachAction(function (t, n) { var r = t.root ? n : s + n, i = t.handler || t; !function registerAction(e, t, n, r) { (e._actions[t] || (e._actions[t] = [])).push(function wrappedActionHandler(t) { var i = n.call(e, { dispatch: r.dispatch, commit: r.commit, getters: r.getters, state: r.state, rootGetters: e.getters, rootState: e.state }, t); return function isPromise(e) { return e && "function" == typeof e.then }(i) || (i = f.a.resolve(i)), e._devtoolHook ? i.catch(function (t) { throw e._devtoolHook.emit("vuex:error", t), t }) : i }) }(e, r, i, c) }), r.forEachGetter(function (t, n) { !function registerGetter(e, t, n, r) { if (e._wrappedGetters[t]) return void 0; e._wrappedGetters[t] = function wrappedGetter(e) { return n(r.state, r.getters, e.state, e.getters) } }(e, s + n, t, c) }), r.forEachChild(function (r, i) { installModule(e, t, R()(n).call(n, i), r, o) }) } function getNestedState(e, t) { return g()(t).call(t, function (e, t) { return e[t] }, e) } function unifyObjectStyle(e, t, n) { return isObject(e) && e.type && (n = t, t = e, e = e.type), { type: e, payload: t, options: n } } function install(e) { N && e === N || function applyMixin(e) { if (Number(e.version.split(".")[0]) >= 2) e.mixin({ beforeCreate: vuexInit }); else { var t = e.prototype._init; e.prototype._init = function (e) { var n; void 0 === e && (e = {}), e.init = e.init ? R()(n = [vuexInit]).call(n, e.init) : vuexInit, t.call(this, e) } } function vuexInit() { var e = this.$options; e.store ? this.$store = "function" == typeof e.store ? e.store() : e.store : e.parent && e.parent.$store && (this.$store = e.parent.$store) } }(N = e) } B.state.get = function () { return this._vm._data.$$state }, B.state.set = function (e) { 0 }, $.prototype.commit = function commit(e, t, n) { var r, i, o = this, a = unifyObjectStyle(e, t, n), s = a.type, l = a.payload, u = (a.options, { type: s, payload: l }), c = this._mutations[s]; c && (this._withCommit(function () { S()(c).call(c, function commitIterator(e) { e(l) }) }), S()(r = p()(i = this._subscribers).call(i)).call(r, function (e) { return e(u, o.state) })) }, $.prototype.dispatch = function dispatch(e, t) { var n = this, r = unifyObjectStyle(e, t), i = r.type, o = r.payload, a = { type: i, payload: o }, s = this._actions[i]; if (s) { try { var l, u, d; S()(l = A()(u = p()(d = this._actionSubscribers).call(d)).call(u, function (e) { return e.before })).call(l, function (e) { return e.before(a, n.state) }) } catch (e) { 0 } var h = s.length > 1 ? f.a.all(c()(s).call(s, function (e) { return e(o) })) : s[0](o); return new f.a(function (e, t) { h.then(function (t) { try { var r, i; S()(r = A()(i = n._actionSubscribers).call(i, function (e) { return e.after })).call(r, function (e) { return e.after(a, n.state) }) } catch (e) { 0 } e(t) }, function (e) { try { var r, i; S()(r = A()(i = n._actionSubscribers).call(i, function (e) { return e.error })).call(r, function (t) { return t.error(a, n.state, e) }) } catch (e) { 0 } t(e) }) }) } }, $.prototype.subscribe = function subscribe(e, t) { return genericSubscribe(e, this._subscribers, t) }, $.prototype.subscribeAction = function subscribeAction(e, t) { return genericSubscribe("function" == typeof e ? { before: e } : e, this._actionSubscribers, t) }, $.prototype.watch = function watch(e, t, n) { var r = this; return this._watcherVM.$watch(function () { return e(r.state, r.getters) }, t, n) }, $.prototype.replaceState = function replaceState(e) { var t = this; this._withCommit(function () { t._vm._data.$$state = e }) }, $.prototype.registerModule = function registerModule(e, t, n) { void 0 === n && (n = {}), "string" == typeof e && (e = [e]), this._modules.register(e, t), installModule(this, this.state, e, this._modules.get(e), n.preserveState), resetStoreVM(this, this.state) }, $.prototype.unregisterModule = function unregisterModule(e) { var t = this; "string" == typeof e && (e = [e]), this._modules.unregister(e), this._withCommit(function () { var n = getNestedState(t.state, p()(e).call(e, 0, -1)); N.delete(n, e[e.length - 1]) }), resetStore(this) }, $.prototype.hasModule = function hasModule(e) { return "string" == typeof e && (e = [e]), this._modules.isRegistered(e) }, $.prototype.hotUpdate = function hotUpdate(e) { this._modules.update(e), resetStore(this, !0) }, $.prototype._withCommit = function _withCommit(e) { var t = this._committing; this._committing = !0, e(), this._committing = t }, y()($.prototype, B); var z = normalizeNamespace(function (e, t) { var n, r = {}; return S()(n = normalizeMap(t)).call(n, function (t) { var n = t.key, i = t.val; r[n] = function mappedState() { var t = this.$store.state, n = this.$store.getters; if (e) { var r = getModuleByNamespace(this.$store, "mapState", e); if (!r) return; t = r.context.state, n = r.context.getters } return "function" == typeof i ? i.call(this, t, n) : t[i] }, r[n].vuex = !0 }), r }); normalizeNamespace(function (e, t) { var n, r = {}; return S()(n = normalizeMap(t)).call(n, function (t) { var n = t.key, i = t.val; r[n] = function mappedMutation() { for (var t, n, r = [], o = arguments.length; o--;)r[o] = arguments[o]; var a = this.$store.commit; if (e) { var s = getModuleByNamespace(this.$store, "mapMutations", e); if (!s) return; a = s.context.commit } return "function" == typeof i ? i.apply(this, R()(t = [a]).call(t, r)) : a.apply(this.$store, R()(n = [i]).call(n, r)) } }), r }), normalizeNamespace(function (e, t) { var n, r = {}; return S()(n = normalizeMap(t)).call(n, function (t) { var n = t.key, i = t.val; i = e + i, r[n] = function mappedGetter() { if (!e || getModuleByNamespace(this.$store, "mapGetters", e)) return this.$store.getters[i] }, r[n].vuex = !0 }), r }), normalizeNamespace(function (e, t) { var n, r = {}; return S()(n = normalizeMap(t)).call(n, function (t) { var n = t.key, i = t.val; r[n] = function mappedAction() { for (var t, n, r = [], o = arguments.length; o--;)r[o] = arguments[o]; var a = this.$store.dispatch; if (e) { var s = getModuleByNamespace(this.$store, "mapActions", e); if (!s) return; a = s.context.dispatch } return "function" == typeof i ? i.apply(this, R()(t = [a]).call(t, r)) : a.apply(this.$store, R()(n = [i]).call(n, r)) } }), r }); function normalizeMap(e) { var t; return function isValidMap(e) { return T()(e) || isObject(e) }(e) ? T()(e) ? c()(e).call(e, function (e) { return { key: e, val: e } }) : c()(t = x()(e)).call(t, function (t) { return { key: t, val: e[t] } }) : [] } function normalizeNamespace(e) { return function (t, n) { return "string" != typeof t ? (n = t, t = "") : "/" !== t.charAt(t.length - 1) && (t += "/"), e(t, n) } } function getModuleByNamespace(e, t, n) { return e._modulesNamespaceMap[n] } }).call(this, n(48))}, function(e, t, n) { var r = n(119), i = n(915), o = n(212), a = n(629), s = n(914), l = n(1531), u = i("wks"), c = r.Symbol, d = l ? c : c && c.withoutSetter || a; e.exports = function (e) { return o(u, e) || (s && o(c, e) ? u[e] = c[e] : u[e] = d("Symbol." + e)), u[e] } }, function(e, t, n) { (function (t) { var n = function (e) { return e && e.Math == Math && e }; e.exports = n("object" == typeof globalThis && globalThis) || n("object" == typeof window && window) || n("object" == typeof self && self) || n("object" == typeof t && t) || Function("return this")() }).call(this, n(48)) }, function(e, t, n) { var r = n(3575); function _extends() { return e.exports = _extends = r || function (e) { for (var t = 1; t < arguments.length; t++) { var n = arguments[t]; for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]) } return e }, _extends.apply(this, arguments) } e.exports = _extends },,,,,,, function(e, t, n) { "use strict"; var r = n(308), i = n(1480), o = n(444), a = n(250), s = n(1479), l = a.set, u = a.getterFor("Array Iterator"); e.exports = s(Array, "Array", function (e, t) { l(this, { type: "Array Iterator", target: r(e), index: 0, kind: t }) }, function () { var e = u(this), t = e.target, n = e.kind, r = e.index++; return !t || r >= t.length ? (e.target = void 0, { value: void 0, done: !0 }) : "keys" == n ? { value: r, done: !1 } : "values" == n ? { value: t[r], done: !1 } : { value: [r, t[r]], done: !1 } }, "values"), o.Arguments = o.Array, i("keys"), i("values"), i("entries") }, function(e, t, n) { "use strict"; var r = n(146), i = n(59), o = n(637), a = n(213), s = n(140), l = n(252), u = n(926), c = n(388), d = n(109), f = n(386), h = n(347).f, p = n(389).f, m = n(154).f, g = n(3586).trim, v = i.Number, y = v.prototype, _ = "Number" == l(f(y)), b = function (e) { var t, n, r, i, o, a, s, l, u = c(e, !1); if ("string" == typeof u && u.length > 2) if (43 === (t = (u = g(u)).charCodeAt(0)) || 45 === t) { if (88 === (n = u.charCodeAt(2)) || 120 === n) return NaN } else if (48 === t) { switch (u.charCodeAt(1)) { case 66: case 98: r = 2, i = 49; break; case 79: case 111: r = 8, i = 55; break; default: return +u }for (a = (o = u.slice(2)).length, s = 0; s < a; s++)if ((l = o.charCodeAt(s)) < 48 || l > i) return NaN; return parseInt(o, r) } return +u }; if (o("Number", !v(" 0o1") || !v("0b1") || v("+0x1"))) { for (var w, x = function Number(e) { var t = arguments.length < 1 ? 0 : e, n = this; return n instanceof x && (_ ? d(function () { y.valueOf.call(n) }) : "Number" != l(n)) ? u(new v(b(t)), n, x) : b(t) }, C = r ? h(v) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","), S = 0; C.length > S; S++)s(v, w = C[S]) && !s(x, w) && m(x, w, p(v, w)); x.prototype = y, y.constructor = x, a(i, "Number", x) } }, function(e, t) { e.exports = function (e) { return "object" == typeof e ? null !== e : "function" == typeof e } },,, function(e, t, n) { var r = n(52), i = n(212), o = n(625), a = n(222).f; e.exports = function (e) { var t = r.Symbol || (r.Symbol = {}); i(t, e) || a(t, e, { value: o.f(e) }) } }, function(e, t, n) { var r = n(59), i = n(389).f, o = n(214), a = n(213), s = n(933), l = n(1545), u = n(637); e.exports = function (e, t) { var n, c, d, f, h, p = e.target, m = e.global, g = e.stat; if (n = m ? r : g ? r[p] || s(p, {}) : (r[p] || {}).prototype) for (c in t) { if (f = t[c], d = e.noTargetGet ? (h = i(n, c)) && h.value : n[c], !u(m ? c : p + (g ? "." : "#") + c, e.forced) && void 0 !== d) { if (typeof f == typeof d) continue; l(f, d) } (e.sham || d && d.sham) && o(f, "sham", !0), a(n, c, f, e) } } },, function(e, t, n) { "use strict"; n.d(t, "k", function () { return setFetchingState }), n.d(t, "i", function () { return setDatasetsList }), n.d(t, "h", function () { return setDataset }), n.d(t, "m", function () { return setKeyVariables }), n.d(t, "r", function () { return setVariables }), n.d(t, "g", function () { return setAvailableFilters }), n.d(t, "l", function () { return setFilter }), n.d(t, "b", function () { return removeFilter }), n.d(t, "o", function () { return setSearchText }), n.d(t, "n", function () { return setPage }), n.d(t, "j", function () { return setDatasetsListCount }), n.d(t, "f", function () { return resetTagFilters }), n.d(t, "d", function () { return resetDatasetsList }), n.d(t, "c", function () { return resetDataset }), n.d(t, "q", function () { return setSubscriptionsList }), n.d(t, "p", function () { return setSubscriptionInfo }), n.d(t, "e", function () { return resetSubscriptionsList }), n.d(t, "a", function () { return addInterestedSubscriptions }); var r = n(17), i = n.n(r), o = n(19), a = n.n(o), s = n(15), l = n.n(s), u = n(7), c = n.n(u), d = n(13), f = n.n(d), h = n(14), p = n.n(h), m = n(12), g = n.n(m), v = n(120), y = n.n(v), _ = n(6), b = n.n(_), w = n(20), x = n.n(w), C = n(314), S = n.n(C), k = n(27), T = n.n(k), L = n(315); function ownKeys(e, t) { var n = g()(e); if (p.a) { var r = p()(e); t && (r = b()(r).call(r, function (t) { return f()(e, t).enumerable })), n.push.apply(n, r) } return n } function _objectSpread(e) { for (var t = 1; t < arguments.length; t++) { var n, r = null != arguments[t] ? arguments[t] : {}; if (t % 2) c()(n = ownKeys(Object(r), !0)).call(n, function (t) { x()(e, t, r[t]) }); else if (l.a) a()(e, l()(r)); else { var o; c()(o = ownKeys(Object(r))).call(o, function (t) { i()(e, t, f()(r, t)) }) } } return e } function setFetchingState(e) { e.isFetching = !0, e.hasError = !1 } function setDatasetsList(e, t) { e.datasetsList = t, e.isFetching = !1, e.hasError = !1 } function setDataset(e, t) { e.dataset = t, e.isFetching = !1, e.hasError = !1 } function setKeyVariables(e, t) { e.keyVariables = t, e.isFetching = !1, e.hasError = !1 } function setVariables(e, t) { e.variables = t, e.isFetching = !1, e.hasError = !1 } function setAvailableFilters(e, t) { var n = t.id, r = t.options, i = { glo: !0 }, o = T()(r).call(r, function (e, t) { return t.highlighted = i[t.id] || !1, e.set(t.id, t), e }, new S.a); e.filtersAvailable = _objectSpread({}, e.filtersAvailable, x()({}, n, o)), b()(e).categories[n] || (b()(e).categories[n] = []) } function setFilter(e, t) { var n = y()(_objectSpread({}, b()(e).categories), t); b()(e).categories = n, t.page || (b()(e).page = 0), Object(L.a)(e) } function removeFilter(e, t) { var n; b()(e).categories[t.id] = b()(n = b()(e).categories[t.id]).call(n, function (e) { return e.id !== t.value.id }), b()(e).page = 0, Object(L.a)(e) } function setSearchText(e, t) { b()(e).searchText = t, Object(L.a)(e) } function setPage(e, t) { b()(e).page = t, Object(L.a)(e) } function setDatasetsListCount(e, t) { e.datasetsListCount = t } function resetTagFilters(e) { for (var t in b()(e).categories) b()(e).categories[t] = []; b()(e).page = 0, Object(L.a)(e) } function resetDatasetsList(e) { e.datasetsList = [], e.datasetsListCount = 0 } function resetDataset(e) { e.dataset = {}, e.keyVariables = {}, e.variables = {} } function setSubscriptionsList(e, t) { e.subscriptionsList = t } function setSubscriptionInfo(e, t) { e.subscriptionInfo = t } function resetSubscriptionsList(e) { e.subscriptionsList = [] } function addInterestedSubscriptions(e, t) { e.interestedSubscriptions.push(t), localStorage.setItem("interestedSubscriptions", e.interestedSubscriptions) } },,, function(e, t, n) { var r = n(67); e.exports = !r(function () { return 7 != Object.defineProperty({}, 1, { get: function () { return 7 } })[1] }) }, function(e, t, n) { var r = n(165); e.exports = function (e) { if (!r(e)) throw TypeError(String(e) + " is not an object"); return e } }, function(e, t) { var n = {}.hasOwnProperty; e.exports = function (e, t) { return n.call(e, t) } },,, function(e, t, n) { var r = n(59), i = n(1476), o = n(127), a = n(214), s = n(114), l = s("iterator"), u = s("toStringTag"), c = o.values; for (var d in i) { var f = r[d], h = f && f.prototype; if (h) { if (h[l] !== c) try { a(h, l, c) } catch (e) { h[l] = c } if (h[u] || a(h, u, d), i[d]) for (var p in o) if (h[p] !== o[p]) try { a(h, p, o[p]) } catch (e) { h[p] = o[p] } } } }, function(e, t, n) { var r = n(1), i = n(9), o = n(0), a = n(3), s = a.Model.extend({ initialize: function initialize(e) { return o.bindAll(this, "fetch", "save", "retrigger"), a.Model.prototype.initialize.call(this, e) }, fetch: function fetch(e) { var t = this; this.trigger("loadModelStarted"), i.when(a.Model.prototype.fetch.call(this, e)).done(function (e) { t.trigger("loadModelCompleted", e, t) }).fail(function (e) { t.trigger("loadModelFailed", e, t) }) }, setIdAttribute: function setIdAttribute(e) { this.idAttribute = e }, retrigger: function retrigger(e, t, n) { n || (n = e); var i = this; r(t) && r(t).call(t, e, function () { i.trigger(n) }, i) }, save: function save(e, t) { var n = this; t && t.silent || this.trigger("saving"); var r = a.Model.prototype.save.apply(this, arguments); return i.when(r).done(function () { t && t.silent || n.trigger("saved") }).fail(function () { t && t.silent || n.trigger("errorSaving") }), r } }); e.exports = s }, function(e, t, n) { var r = n(249), i = Math.min; e.exports = function (e) { return e > 0 ? i(r(e), 9007199254740991) : 0 } }, function(e, t, n) { var r = n(109); e.exports = !r(function () { return 7 != Object.defineProperty({}, 1, { get: function () { return 7 } })[1] }) }, function(e, t, n) { "use strict"; var r = n(920).charAt, i = n(250), o = n(1479), a = i.set, s = i.getterFor("String Iterator"); o(String, "String", function (e) { a(this, { type: "String Iterator", string: String(e), index: 0 }) }, function next() { var e, t = s(this), n = t.string, i = t.index; return i >= n.length ? { value: void 0, done: !0 } : (e = r(n, i), t.index += e.length, { value: e, done: !1 }) }) },,, function(e, t, n) { "use strict"; var r = n(133), i = n(861); r({ target: "String", proto: !0, forced: n(860)("fixed") }, { fixed: function fixed() { return i(this, "tt", "", "") } }) },, function(e, t, n) { var r = n(1), i = n(0), o = n(3), a = n(1384), s = n(3164), l = o.View.extend({ classLabel: "cdb.core.View", constructor: function constructor(e) { this.options = i.defaults(e, this.options), this._models = [], this._subviews = {}, o.View.call(this, e), l.viewCount++, l.views[this.cid] = this, this._created_at = new Date, a.new_value("total_views", l.viewCount) }, add_related_model: function add_related_model(e) { if (!e) throw Error("added non valid model"); this._models.push(e) }, addView: function addView(e) { this._subviews[e.cid] = e, e._parent = this }, removeView: function removeView(e) { delete this._subviews[e.cid] }, clearSubViews: function clearSubViews() { i(this._subviews).each(function (e) { e.clean() }), this._subviews = {} }, clean: function clean() { var e = this; return this.trigger("clean"), this.clearSubViews(), this._parent && (this._parent.removeView(this), this._parent = null), this.remove(), this.unbind(), this.stopListening(), this.model && this.model.unbind && this.model.unbind(null, null, this), i(this._models).each(function (t) { t.unbind(null, null, e) }), this._models = [], l.viewCount--, delete l.views[this.cid], this }, getTemplate: function getTemplate(e) { return this.options.template ? i.template(this.options.template) : s.getTemplate(e) }, show: function show() { this.$el.show() }, hide: function hide() { this.$el.hide() }, retrigger: function retrigger(e, t, n) { n || (n = e); var i = this; r(t) && r(t).call(t, e, function () { i.trigger(n) }, i), this.add_related_model(t) }, killEvent: function killEvent(e) { e && e.preventDefault && e.preventDefault(), e && e.stopPropagation && e.stopPropagation() }, cleanTooltips: function cleanTooltips() { this.$(".tipsy").remove() } }, { viewCount: 0, views: {}, extendEvents: function extendEvents(e) { return function () { return i.extend(e, this.constructor.__super__.events) } }, runChecker: function runChecker() { i.each(l.views, function (e) { i.each(e, function (t, n) { "_parent" !== n && e.hasOwnProperty(n) && t instanceof l && void 0 === e._subviews[t.cid] && (console.log("========="), console.log("untracked view: "), console.log(t.el), console.log("parent"), console.log(e.el), console.log(" ")) }) }) } }); e.exports = l }, function(e, t, n) { "use strict"; var r = n(133), i = n(249), o = n(3358), a = n(3357), s = n(109), l = 1..toFixed, u = Math.floor, c = function (e, t, n) { return 0 === t ? n : t % 2 == 1 ? c(e, t - 1, n * e) : c(e * e, t / 2, n) }; r({ target: "Number", proto: !0, forced: l && ("0.000" !== 8e-5.toFixed(3) || "1" !== .9.toFixed(0) || "1.25" !== 1.255.toFixed(2) || "1000000000000000128" !== (0xde0b6b3a7640080).toFixed(0)) || !s(function () { l.call({}) }) }, { toFixed: function toFixed(e) { var t, n, r, s, l = o(this), d = i(e), f = [0, 0, 0, 0, 0, 0], h = "", p = "0", m = function (e, t) { for (var n = -1, r = t; ++n < 6;)r += e * f[n], f[n] = r % 1e7, r = u(r / 1e7) }, g = function (e) { for (var t = 6, n = 0; --t >= 0;)n += f[t], f[t] = u(n / e), n = n % e * 1e7 }, v = function () { for (var e = 6, t = ""; --e >= 0;)if ("" !== t || 0 === e || 0 !== f[e]) { var n = String(f[e]); t = "" === t ? n : t + a.call("0", 7 - n.length) + n } return t }; if (d < 0 || d > 20) throw RangeError("Incorrect fraction digits"); if (l != l) return "NaN"; if (l <= -1e21 || l >= 1e21) return String(l); if (l < 0 && (h = "-", l = -l), l > 1e-21) if (n = (t = function (e) { for (var t = 0, n = e; n >= 4096;)t += 12, n /= 4096; for (; n >= 2;)t += 1, n /= 2; return t }(l * c(2, 69, 1)) - 69) < 0 ? l * c(2, -t, 1) : l / c(2, t, 1), n *= 4503599627370496, (t = 52 - t) > 0) { for (m(0, n), r = d; r >= 7;)m(1e7, 0), r -= 7; for (m(c(10, r, 1), 0), r = t - 1; r >= 23;)g(1 << 23), r -= 23; g(1 << r), m(1, 1), g(2), p = v() } else m(0, n), m(1 << -t, 0), p = v() + a.call("0", d); return p = d > 0 ? h + ((s = p.length) <= d ? "0." + a.call("0", d - s) + p : p.slice(0, s - d) + "." + p.slice(s - d)) : h + p } }) }, function(e, t, n) { var r = n(146), i = n(1547), o = n(139), a = n(388), s = Object.defineProperty; t.f = r ? s : function defineProperty(e, t, n) { if (o(e), t = a(t, !0), o(n), i) try { return s(e, t, n) } catch (e) { } if ("get" in n || "set" in n) throw TypeError("Accessors not supported"); return "value" in n && (e[t] = n.value), e } },,,,,,,,,,, function(e, t) { e.exports = function (e) { return "object" == typeof e ? null !== e : "function" == typeof e } },,,,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { "use strict"; var r = n(247), i = n(607), o = n(3143), a = n(335), s = n(3142), l = n(3141), u = {}; function getId(e) { return e.getAttribute("data-ps-id") } t.add = function (e) { var t = l(); return function setId(e, t) { e.setAttribute("data-ps-id", t) }(e, t), u[t] = new function Instance(e) { var t, n, l = this; function focus() { i.add(e, "ps-focus") } function blur() { i.remove(e, "ps-focus") } l.settings = r.clone(o), l.containerWidth = null, l.containerHeight = null, l.contentWidth = null, l.contentHeight = null, l.isRtl = "rtl" === a.css(e, "direction"), l.isNegativeScroll = (n = e.scrollLeft, e.scrollLeft = -1, t = e.scrollLeft < 0, e.scrollLeft = n, t), l.negativeScrollAdjustment = l.isNegativeScroll ? e.scrollWidth - e.clientWidth : 0, l.event = new s, l.ownerDocument = e.ownerDocument || document, l.scrollbarXRail = a.appendTo(a.e("div", "ps-scrollbar-x-rail"), e), l.scrollbarX = a.appendTo(a.e("div", "ps-scrollbar-x"), l.scrollbarXRail), l.scrollbarX.setAttribute("tabindex", 0), l.event.bind(l.scrollbarX, "focus", focus), l.event.bind(l.scrollbarX, "blur", blur), l.scrollbarXActive = null, l.scrollbarXWidth = null, l.scrollbarXLeft = null, l.scrollbarXBottom = r.toInt(a.css(l.scrollbarXRail, "bottom")), l.isScrollbarXUsingBottom = l.scrollbarXBottom == l.scrollbarXBottom, l.scrollbarXTop = l.isScrollbarXUsingBottom ? null : r.toInt(a.css(l.scrollbarXRail, "top")), l.railBorderXWidth = r.toInt(a.css(l.scrollbarXRail, "borderLeftWidth")) + r.toInt(a.css(l.scrollbarXRail, "borderRightWidth")), a.css(l.scrollbarXRail, "display", "block"), l.railXMarginWidth = r.toInt(a.css(l.scrollbarXRail, "marginLeft")) + r.toInt(a.css(l.scrollbarXRail, "marginRight")), a.css(l.scrollbarXRail, "display", ""), l.railXWidth = null, l.railXRatio = null, l.scrollbarYRail = a.appendTo(a.e("div", "ps-scrollbar-y-rail"), e), l.scrollbarY = a.appendTo(a.e("div", "ps-scrollbar-y"), l.scrollbarYRail), l.scrollbarY.setAttribute("tabindex", 0), l.event.bind(l.scrollbarY, "focus", focus), l.event.bind(l.scrollbarY, "blur", blur), l.scrollbarYActive = null, l.scrollbarYHeight = null, l.scrollbarYTop = null, l.scrollbarYRight = r.toInt(a.css(l.scrollbarYRail, "right")), l.isScrollbarYUsingRight = l.scrollbarYRight == l.scrollbarYRight, l.scrollbarYLeft = l.isScrollbarYUsingRight ? null : r.toInt(a.css(l.scrollbarYRail, "left")), l.scrollbarYOuterWidth = l.isRtl ? r.outerWidth(l.scrollbarY) : null, l.railBorderYWidth = r.toInt(a.css(l.scrollbarYRail, "borderTopWidth")) + r.toInt(a.css(l.scrollbarYRail, "borderBottomWidth")), a.css(l.scrollbarYRail, "display", "block"), l.railYMarginHeight = r.toInt(a.css(l.scrollbarYRail, "marginTop")) + r.toInt(a.css(l.scrollbarYRail, "marginBottom")), a.css(l.scrollbarYRail, "display", ""), l.railYHeight = null, l.railYRatio = null }(e), u[t] }, t.remove = function (e) { delete u[getId(e)], function removeId(e) { e.removeAttribute("data-ps-id") }(e) }, t.get = function (e) { return u[getId(e)] } },, function(e, t, n) { var r = n(1386); e.exports = { error: function error() { console.error.apply(console, arguments) }, log: function log() { console.log.apply(console, arguments) }, info: function info() { console.log.apply(console, arguments) }, debug: function debug() { r.DEBUG && console.log.apply(console, arguments) } } },, function(e, t, n) { "use strict"; var r = n(133), i = n(146), o = n(59), a = n(140), s = n(165), l = n(154).f, u = n(1545), c = o.Symbol; if (i && "function" == typeof c && (!("description" in c.prototype) || void 0 !== c().description)) { var d = {}, f = function Symbol() { var e = arguments.length < 1 || void 0 === arguments[0] ? void 0 : String(arguments[0]), t = this instanceof f ? new c(e) : void 0 === e ? c() : c(e); return "" === e && (d[t] = !0), t }; u(f, c); var h = f.prototype = c.prototype; h.constructor = f; var p = h.toString, m = "Symbol(test)" == String(c("test")), g = /^Symbol\((.*)\)[^)]+$/; l(h, "description", { configurable: !0, get: function description() { var e = s(this) ? this.valueOf() : this, t = p.call(e); if (a(d, e)) return ""; var n = m ? t.slice(7, -1) : t.replace(g, "$1"); return "" === n ? void 0 : n } }), r({ global: !0, forced: !0 }, { Symbol: f }) } }, function(e, t, n) { "use strict"; var r = n(133), i = n(59), o = n(348), a = n(387), s = n(146), l = n(923), u = n(1540), c = n(109), d = n(140), f = n(1483), h = n(165), p = n(139), m = n(238), g = n(308), v = n(388), y = n(349), _ = n(386), b = n(925), w = n(347), x = n(3443), C = n(928), S = n(389), k = n(154), T = n(935), L = n(214), M = n(213), E = n(931), A = n(641), P = n(639), R = n(640), O = n(114), D = n(1482), F = n(1481), I = n(339), N = n(250), $ = n(219).forEach, B = A("hidden"), z = O("toPrimitive"), j = N.set, U = N.getterFor("Symbol"), q = Object.prototype, H = i.Symbol, V = o("JSON", "stringify"), G = S.f, W = k.f, Y = x.f, Z = T.f, K = E("symbols"), X = E("op-symbols"), J = E("string-to-symbol-registry"), Q = E("symbol-to-string-registry"), ee = E("wks"), te = i.QObject, ne = !te || !te.prototype || !te.prototype.findChild, re = s && c(function () { return 7 != _(W({}, "a", { get: function () { return W(this, "a", { value: 7 }).a } })).a }) ? function (e, t, n) { var r = G(q, t); r && delete q[t], W(e, t, n), r && e !== q && W(q, t, r) } : W, ie = function (e, t) { var n = K[e] = _(H.prototype); return j(n, { type: "Symbol", tag: e, description: t }), s || (n.description = t), n }, oe = u ? function (e) { return "symbol" == typeof e } : function (e) { return Object(e) instanceof H }, ae = function defineProperty(e, t, n) { e === q && ae(X, t, n), p(e); var r = v(t, !0); return p(n), d(K, r) ? (n.enumerable ? (d(e, B) && e[B][r] && (e[B][r] = !1), n = _(n, { enumerable: y(0, !1) })) : (d(e, B) || W(e, B, y(1, {})), e[B][r] = !0), re(e, r, n)) : W(e, r, n) }, se = function defineProperties(e, t) { p(e); var n = g(t), r = b(n).concat(de(n)); return $(r, function (t) { s && !le.call(n, t) || ae(e, t, n[t]) }), e }, le = function propertyIsEnumerable(e) { var t = v(e, !0), n = Z.call(this, t); return !(this === q && d(K, t) && !d(X, t)) && (!(n || !d(this, t) || !d(K, t) || d(this, B) && this[B][t]) || n) }, ue = function getOwnPropertyDescriptor(e, t) { var n = g(e), r = v(t, !0); if (n !== q || !d(K, r) || d(X, r)) { var i = G(n, r); return !i || !d(K, r) || d(n, B) && n[B][r] || (i.enumerable = !0), i } }, ce = function getOwnPropertyNames(e) { var t = Y(g(e)), n = []; return $(t, function (e) { d(K, e) || d(P, e) || n.push(e) }), n }, de = function getOwnPropertySymbols(e) { var t = e === q, n = Y(t ? X : g(e)), r = []; return $(n, function (e) { !d(K, e) || t && !d(q, e) || r.push(K[e]) }), r }; (l || (M((H = function Symbol() { if (this instanceof H) throw TypeError("Symbol is not a constructor"); var e = arguments.length && void 0 !== arguments[0] ? String(arguments[0]) : void 0, t = R(e), n = function (e) { this === q && n.call(X, e), d(this, B) && d(this[B], t) && (this[B][t] = !1), re(this, t, y(1, e)) }; return s && ne && re(q, t, { configurable: !0, set: n }), ie(t, e) }).prototype, "toString", function toString() { return U(this).tag }), M(H, "withoutSetter", function (e) { return ie(R(e), e) }), T.f = le, k.f = ae, S.f = ue, w.f = x.f = ce, C.f = de, D.f = function (e) { return ie(O(e), e) }, s && (W(H.prototype, "description", { configurable: !0, get: function description() { return U(this).description } }), a || M(q, "propertyIsEnumerable", le, { unsafe: !0 }))), r({ global: !0, wrap: !0, forced: !l, sham: !l }, { Symbol: H }), $(b(ee), function (e) { F(e) }), r({ target: "Symbol", stat: !0, forced: !l }, { for: function (e) { var t = String(e); if (d(J, t)) return J[t]; var n = H(t); return J[t] = n, Q[n] = t, n }, keyFor: function keyFor(e) { if (!oe(e)) throw TypeError(e + " is not a symbol"); if (d(Q, e)) return Q[e] }, useSetter: function () { ne = !0 }, useSimple: function () { ne = !1 } }), r({ target: "Object", stat: !0, forced: !l, sham: !s }, { create: function create(e, t) { return void 0 === t ? _(e) : se(_(e), t) }, defineProperty: ae, defineProperties: se, getOwnPropertyDescriptor: ue }), r({ target: "Object", stat: !0, forced: !l }, { getOwnPropertyNames: ce, getOwnPropertySymbols: de }), r({ target: "Object", stat: !0, forced: c(function () { C.f(1) }) }, { getOwnPropertySymbols: function getOwnPropertySymbols(e) { return C.f(m(e)) } }), V) && r({ target: "JSON", stat: !0, forced: !l || c(function () { var e = H(); return "[null]" != V([e]) || "{}" != V({ a: e }) || "{}" != V(Object(e)) }) }, { stringify: function stringify(e, t, n) { for (var r, i = [e], o = 1; arguments.length > o;)i.push(arguments[o++]); if (r = t, (h(t) || void 0 !== e) && !oe(e)) return f(t) || (t = function (e, t) { if ("function" == typeof r && (t = r.call(this, e, t)), !oe(t)) return t }), i[1] = t, V.apply(null, i) } }); H.prototype[z] || L(H.prototype, z, H.prototype.valueOf), I(H, "Symbol"), P[B] = !0 }, function(e, t) { var n, r, i = e.exports = {}; function defaultSetTimout() { throw new Error("setTimeout has not been defined") } function defaultClearTimeout() { throw new Error("clearTimeout has not been defined") } function runTimeout(e) { if (n === setTimeout) return setTimeout(e, 0); if ((n === defaultSetTimout || !n) && setTimeout) return n = setTimeout, setTimeout(e, 0); try { return n(e, 0) } catch (t) { try { return n.call(null, e, 0) } catch (t) { return n.call(this, e, 0) } } } !function () { try { n = "function" == typeof setTimeout ? setTimeout : defaultSetTimout } catch (e) { n = defaultSetTimout } try { r = "function" == typeof clearTimeout ? clearTimeout : defaultClearTimeout } catch (e) { r = defaultClearTimeout } }(); var o, a = [], s = !1, l = -1; function cleanUpNextTick() { s && o && (s = !1, o.length ? a = o.concat(a) : l = -1, a.length && drainQueue()) } function drainQueue() { if (!s) { var e = runTimeout(cleanUpNextTick); s = !0; for (var t = a.length; t;) { for (o = a, a = []; ++l < t;)o && o[l].run(); l = -1, t = a.length } o = null, s = !1, function runClearTimeout(e) { if (r === clearTimeout) return clearTimeout(e); if ((r === defaultClearTimeout || !r) && clearTimeout) return r = clearTimeout, clearTimeout(e); try { return r(e) } catch (t) { try { return r.call(null, e) } catch (t) { return r.call(this, e) } } }(e) } } function Item(e, t) { this.fun = e, this.array = t } function noop() { } i.nextTick = function (e) { var t = new Array(arguments.length - 1); if (arguments.length > 1) for (var n = 1; n < arguments.length; n++)t[n - 1] = arguments[n]; a.push(new Item(e, t)), 1 !== a.length || s || runTimeout(drainQueue) }, Item.prototype.run = function () { this.fun.apply(null, this.array) }, i.title = "browser", i.browser = !0, i.env = {}, i.argv = [], i.version = "", i.versions = {}, i.on = noop, i.addListener = noop, i.once = noop, i.off = noop, i.removeListener = noop, i.removeAllListeners = noop, i.emit = noop, i.prependListener = noop, i.prependOnceListener = noop, i.listeners = function (e) { return [] }, i.binding = function (e) { throw new Error("process.binding is not supported") }, i.cwd = function () { return "/" }, i.chdir = function (e) { throw new Error("process.chdir is not supported") }, i.umask = function () { return 0 } }, function(e, t, n) { e.exports = n(3342) },,,, function(e, t, n) { var r = n(3467); function asyncGeneratorStep(e, t, n, i, o, a, s) { try { var l = e[a](s), u = l.value } catch (e) { return void n(e) } l.done ? t(u) : r.resolve(u).then(i, o) } e.exports = function _asyncToGenerator(e) { return function () { var t = this, n = arguments; return new r(function (r, i) { var o = e.apply(t, n); function _next(e) { asyncGeneratorStep(o, r, i, _next, _throw, "next", e) } function _throw(e) { asyncGeneratorStep(o, r, i, _next, _throw, "throw", e) } _next(void 0) }) } } }, function(e, t, n) { "use strict"; n.d(t, "a", function () { return r }); var r = { category: { label: "Categories", order: 2 }, country: { label: "Countries", order: 1 }, license: { label: "Licenses", order: 3 }, provider: { label: "Sources", order: 4 }, placetype: { label: "Placetype", order: 5 } } }, function(e, t, n) { "use strict"; (function (e) { n.d(t, "j", function () { return initFilter }), n.d(t, "d", function () { return fetchDatasetsList }), n.d(t, "c", function () { return fetchDataset }), n.d(t, "e", function () { return fetchKeyVariables }), n.d(t, "i", function () { return fetchVariables }), n.d(t, "m", function () { return setSearchText }), n.d(t, "l", function () { return setPage }), n.d(t, "a", function () { return clearTagFilters }), n.d(t, "g", function () { return fetchSubscriptionsList }), n.d(t, "f", function () { return fetchSubscribe }), n.d(t, "h", function () { return fetchUnSubscribe }), n.d(t, "b", function () { return downloadNotebook }), n.d(t, "k", function () { return requestDataset }); n(436), n(23), n(24), n(29), n(46), n(16), n(205), n(35); var r = n(17), i = n.n(r), o = n(19), a = n.n(o), s = n(15), l = n.n(s), u = n(13), c = n.n(u), d = n(14), f = n.n(d), h = n(12), p = n.n(h), m = n(21), g = n.n(m), v = n(20), y = n.n(v), _ = n(112), b = n.n(_), w = n(6), x = n.n(w), C = (n(404), n(30)), S = n.n(C), k = n(28), T = n.n(k), L = n(10), M = n.n(L), E = n(202), A = n.n(E), P = n(55), R = n.n(P), O = n(5), D = n.n(O), F = n(7), I = n.n(F), N = (n(3199), n(315)); function ownKeys(e, t) { var n = p()(e); if (f.a) { var r = f()(e); t && (r = x()(r).call(r, function (t) { return c()(e, t).enumerable })), n.push.apply(n, r) } return n } function _objectSpread(e) { for (var t = 1; t < arguments.length; t++) { var n, r = null != arguments[t] ? arguments[t] : {}; if (t % 2) I()(n = ownKeys(Object(r), !0)).call(n, function (t) { y()(e, t, r[t]) }); else if (l.a) a()(e, l()(r)); else { var o; I()(o = ownKeys(Object(r))).call(o, function (t) { i()(e, t, c()(r, t)) }) } } return e } var $ = " https://public.carto.com/api/v4/", B = "data/observatory/metadata/entities", z = "data/observatory/metadata/datasets", j = "data/observatory/metadata/geographies", U = "do/subscriptions"; function initFilter(t, n) { var r = { searchText: "", limit: e.env.VUE_APP_PAGE_SIZE || 10, page: 0, categories: {} }, i = ["country", "category", "license", "provider", "placetype"]; I()(i).call(i, function (e) { var t; e in n && (r.categories[e] = D()(t = n[e].split(",")).call(t, function (e) { return { id: e } })) }), "search" in n && (r.searchText = n.search), "page" in n && (r.page = R()(n.page) - 1), t.state.filter = r } function fetchDatasetsList(e) { return _fetchDatasetsList.apply(this, arguments) } function _fetchDatasetsList() { return (_fetchDatasetsList = A()(b.a.mark(function _callee(e) { var t, n, r, i; return b.a.wrap(function _callee$(o) { for (; ;)switch (o.prev = o.next) { case 0: return Object(N.a)(e.state), e.commit("resetDatasetsList"), e.commit("setFetchingState"), t = $ + B + filtersToPayload(x()(e.state)), o.prev = 4, o.next = 7, fetch(t); case 7: return n = o.sent, o.next = 10, n.json(); case 10: for (i in r = o.sent, e.commit("setDatasetsList", r.results), e.commit("setDatasetsListCount", r.total_results), r.filters) e.commit("setAvailableFilters", { id: i, options: r.filters[i] }); o.next = 19; break; case 16: o.prev = 16, o.t0 = o.catch(4), console.error("ERROR: ".concat(o.t0)); case 19: case "end": return o.stop() } }, _callee, null, [[4, 16]]) }))).apply(this, arguments) } function fetchDataset(e, t) { return _fetchDataset.apply(this, arguments) } function _fetchDataset() { return (_fetchDataset = A()(b.a.mark(function _callee2(e, t) { var n, r, i, o, a; return b.a.wrap(function _callee2$(s) { for (; ;)switch (s.prev = s.next) { case 0: return n = t.id, r = t.type, e.commit("resetDataset"), e.commit("setFetchingState"), i = $, i += "dataset" === r ? z + "/" + n : j + "/" + n, s.prev = 5, s.next = 8, fetch(i); case 8: return o = s.sent, s.next = 11, o.json(); case 11: a = s.sent, e.commit("setDataset", _objectSpread({}, a)), s.next = 18; break; case 15: s.prev = 15, s.t0 = s.catch(5), console.error("ERROR: ".concat(s.t0)); case 18: case "end": return s.stop() } }, _callee2, null, [[5, 15]]) }))).apply(this, arguments) } function fetchKeyVariables(e, t) { return _fetchKeyVariables.apply(this, arguments) } function _fetchKeyVariables() { return (_fetchKeyVariables = A()(b.a.mark(function _callee3(e, t) { var n, r, i, o, a; return b.a.wrap(function _callee3$(s) { for (; ;)switch (s.prev = s.next) { case 0: return n = t.id, r = t.type, i = $, i += "dataset" === r ? z + "/" + n + "/key_variables" : j + "/" + n + "/variables?minimal=true", s.prev = 3, s.next = 6, fetch(i); case 6: return o = s.sent, s.next = 9, o.json(); case 9: a = s.sent, e.commit("setKeyVariables", a), s.next = 16; break; case 13: s.prev = 13, s.t0 = s.catch(3), console.error("ERROR: ".concat(s.t0)); case 16: case "end": return s.stop() } }, _callee3, null, [[3, 13]]) }))).apply(this, arguments) } function fetchVariables(e, t) { return _fetchVariables.apply(this, arguments) } function _fetchVariables() { return (_fetchVariables = A()(b.a.mark(function _callee4(e, t) { var n, r, i, o, a; return b.a.wrap(function _callee4$(s) { for (; ;)switch (s.prev = s.next) { case 0: return n = t.id, r = t.type, i = $, i += "dataset" === r ? z + "/" + n + "/variables?minimal=true" : j + "/" + n + "/variables?minimal=true", s.prev = 3, s.next = 6, fetch(i); case 6: return o = s.sent, s.next = 9, o.json(); case 9: a = s.sent, e.commit("setVariables", a), s.next = 16; break; case 13: s.prev = 13, s.t0 = s.catch(3), console.error("ERROR: ".concat(s.t0)); case 16: case "end": return s.stop() } }, _callee4, null, [[3, 13]]) }))).apply(this, arguments) } function setSearchText(e, t) { e.commit("setSearchText", t) } function setPage(e, t) { e.commit("setPage", t) } function clearTagFilters(e) { e.commit("resetTagFilters") } function fetchSubscriptionsList(e) { return _fetchSubscriptionsList.apply(this, arguments) } function _fetchSubscriptionsList() { return (_fetchSubscriptionsList = A()(b.a.mark(function _callee5(e) { var t, n, r, i, o, a, s, l, u, c, d = arguments; return b.a.wrap(function _callee5$(f) { for (; ;)switch (f.prev = f.next) { case 0: return r = d.length > 1 && void 0 !== d[1] && d[1], i = M()(t = M()(n = "".concat(e.rootState.user.base_url, "/api/v4/")).call(n, U, "?api_key=")).call(t, e.rootState.user.api_key), f.prev = 2, f.next = 5, fetch(i); case 5: return o = f.sent, f.next = 8, o.json(); case 8: if (a = f.sent, !(r && a.subscriptions && a.subscriptions.length > 0)) { f.next = 27; break } return i = $ + B + "?id=".concat(D()(s = a.subscriptions).call(s, function (e) { return e.id }).join("&id=")), f.prev = 11, f.next = 14, fetch(i); case 14: return o = f.sent, f.next = 17, o.json(); case 17: u = f.sent, c = D()(l = a.subscriptions).call(l, function (e) { var t; return _objectSpread({}, e, {}, g()(t = u.results).call(t, function (t) { return t.id === e.id })) }), e.commit("setSubscriptionsList", c), f.next = 25; break; case 22: f.prev = 22, f.t0 = f.catch(11), console.error("ERROR: ".concat(f.t0)); case 25: f.next = 28; break; case 27: e.commit("setSubscriptionsList", a.subscriptions || []); case 28: f.next = 33; break; case 30: f.prev = 30, f.t1 = f.catch(2), console.error("ERROR: ".concat(f.t1)); case 33: case "end": return f.stop() } }, _callee5, null, [[2, 30], [11, 22]]) }))).apply(this, arguments) } function fetchSubscribe(e, t) { return _fetchSubscribe.apply(this, arguments) } function _fetchSubscribe() { return (_fetchSubscribe = A()(b.a.mark(function _callee6(e, t) { var n, r, i, o, a, s, l, u; return b.a.wrap(function _callee6$(c) { for (; ;)switch (c.prev = c.next) { case 0: return a = t.id, s = t.type, l = M()(n = M()(r = M()(i = M()(o = "".concat(e.rootState.user.base_url, "/api/v4/")).call(o, U, "?id=")).call(i, a, "&type=")).call(r, s, "&api_key=")).call(n, e.rootState.user.api_key), c.prev = 2, c.next = 5, fetch(l, { method: "POST" }); case 5: return u = c.sent, c.abrupt("return", 200 === u.status || 204 === u.status); case 9: return c.prev = 9, c.t0 = c.catch(2), c.abrupt("return", !1); case 12: case "end": return c.stop() } }, _callee6, null, [[2, 9]]) }))).apply(this, arguments) } function fetchUnSubscribe(e, t) { return _fetchUnSubscribe.apply(this, arguments) } function _fetchUnSubscribe() { return (_fetchUnSubscribe = A()(b.a.mark(function _callee7(e, t) { var n, r, i, o, a, s, l, u; return b.a.wrap(function _callee7$(c) { for (; ;)switch (c.prev = c.next) { case 0: return a = t.id, s = t.type, l = M()(n = M()(r = M()(i = M()(o = "".concat(e.rootState.user.base_url, "/api/v4/")).call(o, U, "?id=")).call(i, a, "&type=")).call(r, s, "&api_key=")).call(n, e.rootState.user.api_key), c.prev = 2, c.next = 5, fetch(l, { method: "DELETE" }); case 5: return u = c.sent, c.abrupt("return", 200 === u.status || 204 === u.status); case 9: return c.prev = 9, c.t0 = c.catch(2), c.abrupt("return", !1); case 12: case "end": return c.stop() } }, _callee7, null, [[2, 9]]) }))).apply(this, arguments) } function downloadNotebook(e, t) { return _downloadNotebook.apply(this, arguments) } function _downloadNotebook() { return (_downloadNotebook = A()(b.a.mark(function _callee8(e, t) { var n, r; return b.a.wrap(function _callee8$(e) { for (; ;)switch (e.prev = e.next) { case 0: n = $ + "data/observatory/templates/notebooks/explore?slug_id=".concat(t), (r = document.createElement("a")).href = n, r.click(); case 4: case "end": return e.stop() } }, _callee8) }))).apply(this, arguments) } function requestDataset(e, t) { var n, r = t.user, i = t.dataset, o = [M()(n = "submissions/v3/integration/submit/".concat("474999", "/")).call(n, "507ead6f-06d9-434a-95e1-a9616c576796")], a = { data: function getFormData(e, t) { return S()({ fields: [{ name: "email", value: e.email }, { name: "lastname", value: e.last_name || "no_last_name" }, { name: "firstname", value: e.name || "no_firstname" }, { name: "jobtitle", value: e.job_role || "no_jobtitle" }, { name: "company", value: e.company || (e.organization ? e.organization.display_name || e.organization.name : "no_company") }, { name: "phone", value: e.phone || "no_phone" }, { name: "country_data", value: t.country_name || "" }, { name: "data_category", value: t.category_name || "Geography" }, { name: "datastream_name", value: t.data_source_name || "" }, { name: "provider", value: t.provider_name || "" }, { name: "datastream_license", value: t.license_name || "" }, { name: "data_purpose", value: "no_data_purpose" }], context: { pageUri: "www.carto.com/dashboard/spatial-data-catalog", pageName: "Spatial Data Catalog page in Dashboard" } }) }(r, i), baseUrl: "https://api.hsforms.com" }; return new T.a(function (t, n) { e.rootState.client.post([o], a, function (r) { if (r) return n(r); e.commit("addInterestedSubscriptions", i.id), t() }) }) } function filtersToPayload(e) { var t = [], n = e.searchText, r = e.limit, i = e.page, o = e.categories, a = i * r, s = function _loop(e) { var n; o[e].length && (t = M()(t).call(t, D()(n = o[e]).call(n, function (t) { var n; return M()(n = "".concat(e, "=")).call(n, t.id) }))) }; for (var l in o) s(l); return n && t.push("searchtext=".concat(encodeURIComponent(n))), t.push("limit=".concat(r)), t.push("offset=".concat(a)), "?".concat(t.join("&")) } }).call(this, n(197)) }, function(e, t, n) { "use strict"; var r = n(635), i = n(139), o = n(251), a = n(3356), s = n(634); r("search", 1, function (e, t, n) { return [function search(t) { var n = o(this), r = void 0 == t ? void 0 : t[e]; return void 0 !== r ? r.call(t, n) : new RegExp(t)[e](String(n)) }, function (e) { var r = n(t, e, this); if (r.done) return r.value; var o = i(e), l = String(this), u = o.lastIndex; a(u, 0) || (o.lastIndex = 0); var c = s(o, l); return a(o.lastIndex, u) || (o.lastIndex = u), null === c ? -1 : c.index }] }) },,, function(e, t, n) { e.exports = n(1359), e.exports.Animator = n(3093), e.exports.cartocss_reference = n(3091), e.exports.common = n(3090), e.exports.math = n(3055), e.exports.Mercator = n(3054), e.exports.net = n(3053), e.exports.renderer = n(3052), e.exports.providers = n(3001), n(2996); var r = n(2992); e.exports.GMapsTileLoader = r.GMapsTileLoader, e.exports.GMapsTorqueLayer = r.GMapsTorqueLayer, e.exports.GMapsTiledTorqueLayer = r.GMapsTiledTorqueLayer, n(2988) }, function(e, t, n) { "use strict"; var r = n(133), i = n(219).map, o = n(1423), a = n(613), s = o("map"), l = a("map"); r({ target: "Array", proto: !0, forced: !s || !l }, { map: function map(e) { return i(this, e, arguments.length > 1 ? arguments[1] : void 0) } }) }, function(e, t, n) { var r = n(138), i = n(67), o = n(212), a = Object.defineProperty, s = {}, l = function (e) { throw e }; e.exports = function (e, t) { if (o(s, e)) return s[e]; t || (t = {}); var n = [][e], u = !!o(t, "ACCESSORS") && t.ACCESSORS, c = o(t, 0) ? t[0] : l, d = o(t, 1) ? t[1] : void 0; return s[e] = !!n && !i(function () { if (u && !r) return !0; var e = { length: -1 }; u ? a(e, 1, { enumerable: !0, get: l }) : e[1] = 1, n.call(e, c, d) }) } }, function(e, t, n) { var r = n(129); e.exports = function (e) { if (!r(e)) throw TypeError(String(e) + " is not an object"); return e } }, function(e, t) { var n = {}.hasOwnProperty; e.exports = function (e, t) { return n.call(e, t) } }, function(e, t, n) { var r = n(59), i = n(214), o = n(140), a = n(933), s = n(932), l = n(250), u = l.get, c = l.enforce, d = String(String).split("String"); (e.exports = function (e, t, n, s) { var l = !!s && !!s.unsafe, u = !!s && !!s.enumerable, f = !!s && !!s.noTargetGet; "function" == typeof n && ("string" != typeof t || o(n, "name") || i(n, "name", t), c(n).source = d.join("string" == typeof t ? t : "")), e !== r ? (l ? !f && e[t] && (u = !0) : delete e[t], u ? e[t] = n : i(e, t, n)) : u ? e[t] = n : a(t, n) })(Function.prototype, "toString", function toString() { return "function" == typeof this && u(this).source || s(this) }) }, function(e, t, n) { var r = n(146), i = n(154), o = n(349); e.exports = r ? function (e, t, n) { return i.f(e, t, o(1, n)) } : function (e, t, n) { return e[t] = n, e } },, function(e, t, n) { e.exports = n(3362) },,, function(e, t, n) { var r = n(380), i = n(459), o = n(238), a = n(145), s = n(3442), l = [].push, u = function (e) { var t = 1 == e, n = 2 == e, u = 3 == e, c = 4 == e, d = 6 == e, f = 5 == e || d; return function (h, p, m, g) { for (var v, y, _ = o(h), b = i(_), w = r(p, m, 3), x = a(b.length), C = 0, S = g || s, k = t ? S(h, x) : n ? S(h, 0) : void 0; x > C; C++)if ((f || C in b) && (y = w(v = b[C], C, _), e)) if (t) k[C] = y; else if (y) switch (e) { case 3: return !0; case 5: return v; case 6: return C; case 2: l.call(k, v) } else if (c) return !1; return d ? -1 : u || c ? c : k } }; e.exports = { forEach: u(0), map: u(1), filter: u(2), some: u(3), every: u(4), find: u(5), findIndex: u(6) } },, function(e, t, n) { var r = n(344); e.exports = function (e) { return Object(r(e)) } }, function(e, t, n) { var r = n(138), i = n(1537), o = n(211), a = n(631), s = Object.defineProperty; t.f = r ? s : function defineProperty(e, t, n) { if (o(e), t = a(t, !0), o(n), i) try { return s(e, t, n) } catch (e) { } if ("get" in n || "set" in n) throw TypeError("Accessors not supported"); return "value" in n && (e[t] = n.value), e } },,,, function(e, t, n) { e.exports = n(2540) },,,, function(e, t, n) { (function (r, i) { var o; (function () { "use strict"; function lib$es6$promise$utils$$isFunction(e) { return "function" == typeof e } var a, s, l = Array.isArray ? Array.isArray : function (e) { return "[object Array]" === Object.prototype.toString.call(e) }, u = 0, c = function asap(e, t) { v[u] = e, v[u + 1] = t, 2 === (u += 2) && (s ? s(lib$es6$promise$asap$$flush) : g()) }; var d = "undefined" != typeof window ? window : void 0, f = d || {}, h = f.MutationObserver || f.WebKitMutationObserver, p = void 0 !== r && "[object process]" === {}.toString.call(r), m = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel; function lib$es6$promise$asap$$useSetTimeout() { return function () { setTimeout(lib$es6$promise$asap$$flush, 1) } } var g, v = new Array(1e3); function lib$es6$promise$asap$$flush() { for (var e = 0; e < u; e += 2) { (0, v[e])(v[e + 1]), v[e] = void 0, v[e + 1] = void 0 } u = 0 } g = p ? function lib$es6$promise$asap$$useNextTick() { return function () { r.nextTick(lib$es6$promise$asap$$flush) } }() : h ? function lib$es6$promise$asap$$useMutationObserver() { var e = 0, t = new h(lib$es6$promise$asap$$flush), n = document.createTextNode(""); return t.observe(n, { characterData: !0 }), function () { n.data = e = ++e % 2 } }() : m ? function lib$es6$promise$asap$$useMessageChannel() { var e = new MessageChannel; return e.port1.onmessage = lib$es6$promise$asap$$flush, function () { e.port2.postMessage(0) } }() : void 0 === d ? function lib$es6$promise$asap$$attemptVertx() { try { var e = n(189); return a = e.runOnLoop || e.runOnContext, function lib$es6$promise$asap$$useVertxTimer() { return function () { a(lib$es6$promise$asap$$flush) } }() } catch (e) { return lib$es6$promise$asap$$useSetTimeout() } }() : lib$es6$promise$asap$$useSetTimeout(); var y = function lib$es6$promise$then$$then(e, t) { var n = this._state; if (n === w && !e || n === x && !t) return this; var r = new this.constructor(lib$es6$promise$$internal$$noop), i = this._result; if (n) { var o = arguments[n - 1]; c(function () { lib$es6$promise$$internal$$invokeCallback(n, r, o, i) }) } else lib$es6$promise$$internal$$subscribe(this, r, e, t); return r }; var _ = function lib$es6$promise$promise$resolve$$resolve(e) { if (e && "object" == typeof e && e.constructor === this) return e; var t = new this(lib$es6$promise$$internal$$noop); return lib$es6$promise$$internal$$resolve(t, e), t }; function lib$es6$promise$$internal$$noop() { } var b = void 0, w = 1, x = 2, C = new lib$es6$promise$$internal$$ErrorObject; function lib$es6$promise$$internal$$getThen(e) { try { return e.then } catch (e) { return C.error = e, C } } function lib$es6$promise$$internal$$handleMaybeThenable(e, t, n) { t.constructor === e.constructor && n === y && constructor.resolve === _ ? function lib$es6$promise$$internal$$handleOwnThenable(e, t) { t._state === w ? lib$es6$promise$$internal$$fulfill(e, t._result) : t._state === x ? lib$es6$promise$$internal$$reject(e, t._result) : lib$es6$promise$$internal$$subscribe(t, void 0, function (t) { lib$es6$promise$$internal$$resolve(e, t) }, function (t) { lib$es6$promise$$internal$$reject(e, t) }) }(e, t) : n === C ? lib$es6$promise$$internal$$reject(e, C.error) : void 0 === n ? lib$es6$promise$$internal$$fulfill(e, t) : lib$es6$promise$utils$$isFunction(n) ? function lib$es6$promise$$internal$$handleForeignThenable(e, t, n) { c(function (e) { var r = !1, i = function lib$es6$promise$$internal$$tryThen(e, t, n, r) { try { e.call(t, n, r) } catch (e) { return e } }(n, t, function (n) { r || (r = !0, t !== n ? lib$es6$promise$$internal$$resolve(e, n) : lib$es6$promise$$internal$$fulfill(e, n)) }, function (t) { r || (r = !0, lib$es6$promise$$internal$$reject(e, t)) }, e._label); !r && i && (r = !0, lib$es6$promise$$internal$$reject(e, i)) }, e) }(e, t, n) : lib$es6$promise$$internal$$fulfill(e, t) } function lib$es6$promise$$internal$$resolve(e, t) { e === t ? lib$es6$promise$$internal$$reject(e, function lib$es6$promise$$internal$$selfFulfillment() { return new TypeError("You cannot resolve a promise with itself") }()) : !function lib$es6$promise$utils$$objectOrFunction(e) { return "function" == typeof e || "object" == typeof e && null !== e }(t) ? lib$es6$promise$$internal$$fulfill(e, t) : lib$es6$promise$$internal$$handleMaybeThenable(e, t, lib$es6$promise$$internal$$getThen(t)) } function lib$es6$promise$$internal$$publishRejection(e) { e._onerror && e._onerror(e._result), lib$es6$promise$$internal$$publish(e) } function lib$es6$promise$$internal$$fulfill(e, t) { e._state === b && (e._result = t, e._state = w, 0 !== e._subscribers.length && c(lib$es6$promise$$internal$$publish, e)) } function lib$es6$promise$$internal$$reject(e, t) { e._state === b && (e._state = x, e._result = t, c(lib$es6$promise$$internal$$publishRejection, e)) } function lib$es6$promise$$internal$$subscribe(e, t, n, r) { var i = e._subscribers, o = i.length; e._onerror = null, i[o] = t, i[o + w] = n, i[o + x] = r, 0 === o && e._state && c(lib$es6$promise$$internal$$publish, e) } function lib$es6$promise$$internal$$publish(e) { var t = e._subscribers, n = e._state; if (0 !== t.length) { for (var r, i, o = e._result, a = 0; a < t.length; a += 3)r = t[a], i = t[a + n], r ? lib$es6$promise$$internal$$invokeCallback(n, r, i, o) : i(o); e._subscribers.length = 0 } } function lib$es6$promise$$internal$$ErrorObject() { this.error = null } var S = new lib$es6$promise$$internal$$ErrorObject; function lib$es6$promise$$internal$$invokeCallback(e, t, n, r) { var i, o, a, s, l = lib$es6$promise$utils$$isFunction(n); if (l) { if ((i = function lib$es6$promise$$internal$$tryCatch(e, t) { try { return e(t) } catch (e) { return S.error = e, S } }(n, r)) === S ? (s = !0, o = i.error, i = null) : a = !0, t === i) return void lib$es6$promise$$internal$$reject(t, function lib$es6$promise$$internal$$cannotReturnOwn() { return new TypeError("A promises callback cannot return that same promise.") }()) } else i = r, a = !0; t._state !== b || (l && a ? lib$es6$promise$$internal$$resolve(t, i) : s ? lib$es6$promise$$internal$$reject(t, o) : e === w ? lib$es6$promise$$internal$$fulfill(t, i) : e === x && lib$es6$promise$$internal$$reject(t, i)) } var k = function lib$es6$promise$promise$all$$all(e) { return new A(this, e).promise }; var T = function lib$es6$promise$promise$race$$race(e) { var t = new this(lib$es6$promise$$internal$$noop); if (!l(e)) return lib$es6$promise$$internal$$reject(t, new TypeError("You must pass an array to race.")), t; var n = e.length; function onFulfillment(e) { lib$es6$promise$$internal$$resolve(t, e) } function onRejection(e) { lib$es6$promise$$internal$$reject(t, e) } for (var r = 0; t._state === b && r < n; r++)lib$es6$promise$$internal$$subscribe(this.resolve(e[r]), void 0, onFulfillment, onRejection); return t }; var L = function lib$es6$promise$promise$reject$$reject(e) { var t = new this(lib$es6$promise$$internal$$noop); return lib$es6$promise$$internal$$reject(t, e), t }, M = 0; var E = lib$es6$promise$promise$$Promise; function lib$es6$promise$promise$$Promise(e) { this._id = M++, this._state = void 0, this._result = void 0, this._subscribers = [], lib$es6$promise$$internal$$noop !== e && ("function" != typeof e && function lib$es6$promise$promise$$needsResolver() { throw new TypeError("You must pass a resolver function as the first argument to the promise constructor") }(), this instanceof lib$es6$promise$promise$$Promise ? function lib$es6$promise$$internal$$initializePromise(e, t) { try { t(function resolvePromise(t) { lib$es6$promise$$internal$$resolve(e, t) }, function rejectPromise(t) { lib$es6$promise$$internal$$reject(e, t) }) } catch (t) { lib$es6$promise$$internal$$reject(e, t) } }(this, e) : function lib$es6$promise$promise$$needsNew() { throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.") }()) } lib$es6$promise$promise$$Promise.all = k, lib$es6$promise$promise$$Promise.race = T, lib$es6$promise$promise$$Promise.resolve = _, lib$es6$promise$promise$$Promise.reject = L, lib$es6$promise$promise$$Promise._setScheduler = function lib$es6$promise$asap$$setScheduler(e) { s = e }, lib$es6$promise$promise$$Promise._setAsap = function lib$es6$promise$asap$$setAsap(e) { c = e }, lib$es6$promise$promise$$Promise._asap = c, lib$es6$promise$promise$$Promise.prototype = { constructor: lib$es6$promise$promise$$Promise, then: y, catch: function (e) { return this.then(null, e) } }; var A = lib$es6$promise$enumerator$$Enumerator; function lib$es6$promise$enumerator$$Enumerator(e, t) { this._instanceConstructor = e, this.promise = new e(lib$es6$promise$$internal$$noop), Array.isArray(t) ? (this._input = t, this.length = t.length, this._remaining = t.length, this._result = new Array(this.length), 0 === this.length ? lib$es6$promise$$internal$$fulfill(this.promise, this._result) : (this.length = this.length || 0, this._enumerate(), 0 === this._remaining && lib$es6$promise$$internal$$fulfill(this.promise, this._result))) : lib$es6$promise$$internal$$reject(this.promise, this._validationError()) } lib$es6$promise$enumerator$$Enumerator.prototype._validationError = function () { return new Error("Array Methods must be provided an Array") }, lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function () { for (var e = this.length, t = this._input, n = 0; this._state === b && n < e; n++)this._eachEntry(t[n], n) }, lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function (e, t) { var n = this._instanceConstructor, r = n.resolve; if (r === _) { var i = lib$es6$promise$$internal$$getThen(e); if (i === y && e._state !== b) this._settledAt(e._state, t, e._result); else if ("function" != typeof i) this._remaining--, this._result[t] = e; else if (n === E) { var o = new n(lib$es6$promise$$internal$$noop); lib$es6$promise$$internal$$handleMaybeThenable(o, e, i), this._willSettleAt(o, t) } else this._willSettleAt(new n(function (t) { t(e) }), t) } else this._willSettleAt(r(e), t) }, lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function (e, t, n) { var r = this.promise; r._state === b && (this._remaining--, e === x ? lib$es6$promise$$internal$$reject(r, n) : this._result[t] = n), 0 === this._remaining && lib$es6$promise$$internal$$fulfill(r, this._result) }, lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function (e, t) { var n = this; lib$es6$promise$$internal$$subscribe(e, void 0, function (e) { n._settledAt(w, t, e) }, function (e) { n._settledAt(x, t, e) }) }; var P = function lib$es6$promise$polyfill$$polyfill() { var e; if (void 0 !== i) e = i; else if ("undefined" != typeof self) e = self; else try { e = Function("return this")() } catch (e) { throw new Error("polyfill failed because global object is unavailable in this environment") } var t = e.Promise; t && "[object Promise]" === Object.prototype.toString.call(t.resolve()) && !t.cast || (e.Promise = E) }, R = { Promise: E, polyfill: P }; void 0 === (o = function () { return R }.call(t, n, t, e)) || (e.exports = o), P() }).call(this) }).call(this, n(197), n(48)) }, function(e, t, n) { n(23); var r = n(11), i = n(18), o = n(0), a = { isCORSSupported: function () { return "withCredentials" in new XMLHttpRequest }, array2hex: function (e) { for (var t = [], n = 0; n < e.length; ++n)t.push(String.fromCharCode(e[n] + 128)); return a.btoa(t.join("")) }, btoa: function (e) { return "function" == typeof window.btoa ? a.encodeBase64Native(e) : a.encodeBase64(e) }, encodeBase64Native: function (e) { return btoa(e) }, encodeBase64: function (e) { var t, n, r, o, a, s, l, u = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", c = 0, d = 0, f = []; if (!e) return e; do { n = (s = e.charCodeAt(c++) << 16 | e.charCodeAt(c++) << 8 | e.charCodeAt(c++)) >> 18 & 63, r = s >> 12 & 63, o = s >> 6 & 63, a = 63 & s, f[d++] = u.charAt(n) + u.charAt(r) + u.charAt(o) + u.charAt(a) } while (c < e.length); l = f.join(""); var h = e.length % 3; return (h ? i(l).call(l, 0, h - 3) : l) + i(t = "===").call(t, h || 3) }, uniqueCallbackName: function (e) { return a._callback_c = a._callback_c || 0, ++a._callback_c, a.crc32(e) + "_" + a._callback_c }, crc32: function (e) { for (var t = a._crcTable || (a._crcTable = a._makeCRCTable()), n = -1, r = 0, i = e.length; r < i; ++r)n = n >>> 8 ^ t[255 & (n ^ e.charCodeAt(r))]; return (-1 ^ n) >>> 0 }, _makeCRCTable: function () { for (var e, t = [], n = 0; n < 256; ++n) { e = n; for (var r = 0; r < 8; ++r)e = 1 & e ? 3988292384 ^ e >>> 1 : e >>> 1; t[n] = e } return t }, _inferBrowser: function (e) { var t = {}; return e = e || "undefined" != typeof window && window.navigator.userAgent || "", !function detectIE() { var t = r(e).call(e, "MSIE "), n = r(e).call(e, "Trident/"); return t > -1 || n > -1 }() ? r(e).call(e, "Edge/") > -1 ? t.edge = e : r(e).call(e, "Chrome") > -1 ? t.chrome = e : r(e).call(e, "Firefox") > -1 ? t.firefox = e : r(e).call(e, "Opera") > -1 ? t.opera = e : r(e).call(e, "Safari") > -1 && (t.safari = e) : t.ie = { version: function getIEVersion() { return document.compatMode ? window.XMLHttpRequest ? document.querySelector ? document.addEventListener ? window.atob ? document.all ? 10 : 11 : 9 : 8 : 7 : 6 : 5 }() }, t } }; a.browser = a._inferBrowser(), a.isMobileDevice = function () { return /Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) }, a.supportsTouch = function () { return "ontouchstart" in window || navigator.msMaxTouchPoints }; var s = null; a.isWebGLSupported = function () { if (null === s) { var e = document.createElement("canvas"); s = !(!window.WebGLRenderingContext || !e.getContext("webgl") && !e.getContext("experimental-webgl")) } return s }, a.endsWith = function (e, t) { return -1 !== r(e).call(e, t, e.length - t.length) }, a.checkRequiredOpts = function (e, t, n) { o.each(t, function (t) { if (o.isUndefined(e[t])) throw new Error(t + " is required" + (n ? " to initialize " + n : "")) }) }, a.isLeafletLoaded = function () { if (!window.L) throw new Error("Leaflet is required"); if (window.L.version < "1.0.0") throw new Error("Leaflet +1.0 is required") }, a.isGoogleMapsLoaded = function () { if (!window.google) throw new Error("Google Maps is required"); if (!window.google.maps) throw new Error("Google Maps is required"); if (window.google.maps.version < "3.31.0") throw new Error("Google Maps version should be >= 3.31") }, e.exports = a }, function(e, t, n) { e.exports = n(3482) }, function(e, t, n) { n(450); var r = n(3536), i = n(119), o = n(271), a = n(236), s = n(340), l = n(118)("toStringTag"); for (var u in r) { var c = i[u], d = c && c.prototype; d && o(d) !== l && a(d, l, u), s[u] = s.Array } }, function(e, t, n) { var r = n(52), i = n(119), o = function (e) { return "function" == typeof e ? e : void 0 }; e.exports = function (e, t) { return arguments.length < 2 ? o(r[e]) || o(i[e]) : r[e] && r[e][t] || i[e] && i[e][t] } }, function(e, t, n) { var r = n(383), i = Math.min; e.exports = function (e) { return e > 0 ? i(r(e), 9007199254740991) : 0 } }, function(e, t, n) { var r = n(138), i = n(222), o = n(346); e.exports = r ? function (e, t, n) { return i.f(e, t, o(1, n)) } : function (e, t, n) { return e[t] = n, e } }, function(e, t, n) { var r = n(632), i = n(344); e.exports = function (e) { return r(i(e)) } }, function(e, t, n) { var r = n(251); e.exports = function (e) { return Object(r(e)) } }, function(e, t, n) { e.exports = n(3570) },,, function(e, t, n) { e.exports = n(2698) },,, function(e, t, n) { e.exports = n(3015) }, function(e, t, n) { (function (e) { function normalizeArray(e, t) { for (var n = 0, r = e.length - 1; r >= 0; r--) { var i = e[r]; "." === i ? e.splice(r, 1) : ".." === i ? (e.splice(r, 1), n++) : n && (e.splice(r, 1), n--) } if (t) for (; n--; n)e.unshift(".."); return e } var n = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/, r = function (e) { return n.exec(e).slice(1) }; function filter(e, t) { if (e.filter) return e.filter(t); for (var n = [], r = 0; r < e.length; r++)t(e[r], r, e) && n.push(e[r]); return n } t.resolve = function () { for (var t = "", n = !1, r = arguments.length - 1; r >= -1 && !n; r--) { var i = r >= 0 ? arguments[r] : e.cwd(); if ("string" != typeof i) throw new TypeError("Arguments to path.resolve must be strings"); i && (t = i + "/" + t, n = "/" === i.charAt(0)) } return t = normalizeArray(filter(t.split("/"), function (e) { return !!e }), !n).join("/"), (n ? "/" : "") + t || "." }, t.normalize = function (e) { var n = t.isAbsolute(e), r = "/" === i(e, -1); return (e = normalizeArray(filter(e.split("/"), function (e) { return !!e }), !n).join("/")) || n || (e = "."), e && r && (e += "/"), (n ? "/" : "") + e }, t.isAbsolute = function (e) { return "/" === e.charAt(0) }, t.join = function () { var e = Array.prototype.slice.call(arguments, 0); return t.normalize(filter(e, function (e, t) { if ("string" != typeof e) throw new TypeError("Arguments to path.join must be strings"); return e }).join("/")) }, t.relative = function (e, n) { function trim(e) { for (var t = 0; t < e.length && "" === e[t]; t++); for (var n = e.length - 1; n >= 0 && "" === e[n]; n--); return t > n ? [] : e.slice(t, n - t + 1) } e = t.resolve(e).substr(1), n = t.resolve(n).substr(1); for (var r = trim(e.split("/")), i = trim(n.split("/")), o = Math.min(r.length, i.length), a = o, s = 0; s < o; s++)if (r[s] !== i[s]) { a = s; break } var l = []; for (s = a; s < r.length; s++)l.push(".."); return (l = l.concat(i.slice(a))).join("/") }, t.sep = "/", t.delimiter = ":", t.dirname = function (e) { var t = r(e), n = t[0], i = t[1]; return n || i ? (i && (i = i.substr(0, i.length - 1)), n + i) : "." }, t.basename = function (e, t) { var n = r(e)[2]; return t && n.substr(-1 * t.length) === t && (n = n.substr(0, n.length - t.length)), n }, t.extname = function (e) { return r(e)[3] }; var i = "b" === "ab".substr(-1) ? function (e, t, n) { return e.substr(t, n) } : function (e, t, n) { return t < 0 && (t = e.length + t), e.substr(t, n) } }).call(this, n(197)) }, function(e, t, n) { "use strict"; var r = n(607), i = n(335), o = t.toInt = function (e) { return parseInt(e, 10) || 0 }, a = t.clone = function (e) { if (e) { if (Array.isArray(e)) return e.map(a); if ("object" == typeof e) { var t = {}; for (var n in e) t[n] = a(e[n]); return t } return e } return null }; t.debounce = function (e, t, n) { var r; return function () { var i = this, o = arguments, a = n && !r; clearTimeout(r), r = setTimeout(function () { r = null, n || e.apply(i, o) }, t), a && e.apply(i, o) } }, t.extend = function (e, t) { var n = a(e); for (var r in t) n[r] = a(t[r]); return n }, t.isEditable = function (e) { return i.matches(e, "input,[contenteditable]") || i.matches(e, "select,[contenteditable]") || i.matches(e, "textarea,[contenteditable]") || i.matches(e, "button,[contenteditable]") }, t.removePsClasses = function (e) { for (var t = r.list(e), n = 0; n < t.length; n++) { var i = t[n]; 0 === i.indexOf("ps-") && r.remove(e, i) } }, t.outerWidth = function (e) { return o(i.css(e, "width")) + o(i.css(e, "paddingLeft")) + o(i.css(e, "paddingRight")) + o(i.css(e, "borderLeftWidth")) + o(i.css(e, "borderRightWidth")) }, t.startScrolling = function (e, t) { r.add(e, "ps-in-scrolling"), void 0 !== t ? r.add(e, "ps-" + t) : (r.add(e, "ps-x"), r.add(e, "ps-y")) }, t.stopScrolling = function (e, t) { r.remove(e, "ps-in-scrolling"), void 0 !== t ? r.remove(e, "ps-" + t) : (r.remove(e, "ps-x"), r.remove(e, "ps-y")) }, t.env = { isWebKit: "WebkitAppearance" in document.documentElement.style, supportsTouch: "ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch, supportsIePointer: null !== window.navigator.msMaxTouchPoints } }, function(e, t) { e.exports = function (e) { if ("function" != typeof e) throw TypeError(String(e) + " is not a function"); return e } }, function(e, t) { var n = Math.ceil, r = Math.floor; e.exports = function (e) { return isNaN(e = +e) ? 0 : (e > 0 ? r : n)(e) } }, function(e, t, n) { var r, i, o, a = n(3589), s = n(59), l = n(165), u = n(214), c = n(140), d = n(641), f = n(639), h = s.WeakMap; if (a) { var p = new h, m = p.get, g = p.has, v = p.set; r = function (e, t) { return v.call(p, e, t), t }, i = function (e) { return m.call(p, e) || {} }, o = function (e) { return g.call(p, e) } } else { var y = d("state"); f[y] = !0, r = function (e, t) { return u(e, y, t), t }, i = function (e) { return c(e, y) ? e[y] : {} }, o = function (e) { return c(e, y) } } e.exports = { set: r, get: i, has: o, enforce: function (e) { return o(e) ? i(e) : r(e, {}) }, getterFor: function (e) { return function (t) { var n; if (!l(t) || (n = i(t)).type !== e) throw TypeError("Incompatible receiver, " + e + " required"); return n } } } }, function(e, t) { e.exports = function (e) { if (void 0 == e) throw TypeError("Can't call method on " + e); return e } }, function(e, t) { var n = {}.toString; e.exports = function (e) { return n.call(e).slice(8, -1) } },, function(e, t, n) { e.exports = n(3423) },,,,, function(e, t, n) { "use strict"; t.__esModule = !0, t.default = function warnOnce(e) { if (r[e]) return; r[e] = !0, "undefined" != typeof console && console.warn && console.warn(e) }; var r = {}; e.exports = t.default },,,,,,,, function(e, t, n) { "use strict"; var r = n(3025); e.exports = function turboCartoDebug(e) { return r(["turbo-carto", e].join(":")) } }, function(e, t, n) { "use strict"; t.__esModule = !0, t.default = function warnOnce(e) { if (r[e]) return; r[e] = !0, "undefined" != typeof console && console.warn && console.warn(e) }; var r = {}; e.exports = t.default }, function(e, t, n) { "use strict"; var r = n(247), i = n(607), o = n(335), a = n(191), s = n(300); function getThumbSize(e, t) { return e.settings.minScrollbarLength && (t = Math.max(t, e.settings.minScrollbarLength)), e.settings.maxScrollbarLength && (t = Math.min(t, e.settings.maxScrollbarLength)), t } e.exports = function (e) { var t, n = a.get(e); n.containerWidth = e.clientWidth, n.containerHeight = e.clientHeight, n.contentWidth = e.scrollWidth, n.contentHeight = e.scrollHeight, e.contains(n.scrollbarXRail) || ((t = o.queryChildren(e, ".ps-scrollbar-x-rail")).length > 0 && t.forEach(function (e) { o.remove(e) }), o.appendTo(n.scrollbarXRail, e)), e.contains(n.scrollbarYRail) || ((t = o.queryChildren(e, ".ps-scrollbar-y-rail")).length > 0 && t.forEach(function (e) { o.remove(e) }), o.appendTo(n.scrollbarYRail, e)), !n.settings.suppressScrollX && n.containerWidth + n.settings.scrollXMarginOffset < n.contentWidth ? (n.scrollbarXActive = !0, n.railXWidth = n.containerWidth - n.railXMarginWidth, n.railXRatio = n.containerWidth / n.railXWidth, n.scrollbarXWidth = getThumbSize(n, r.toInt(n.railXWidth * n.containerWidth / n.contentWidth)), n.scrollbarXLeft = r.toInt((n.negativeScrollAdjustment + e.scrollLeft) * (n.railXWidth - n.scrollbarXWidth) / (n.contentWidth - n.containerWidth))) : n.scrollbarXActive = !1, !n.settings.suppressScrollY && n.containerHeight + n.settings.scrollYMarginOffset < n.contentHeight ? (n.scrollbarYActive = !0, n.railYHeight = n.containerHeight - n.railYMarginHeight, n.railYRatio = n.containerHeight / n.railYHeight, n.scrollbarYHeight = getThumbSize(n, r.toInt(n.railYHeight * n.containerHeight / n.contentHeight)), n.scrollbarYTop = r.toInt(e.scrollTop * (n.railYHeight - n.scrollbarYHeight) / (n.contentHeight - n.containerHeight))) : n.scrollbarYActive = !1, n.scrollbarXLeft >= n.railXWidth - n.scrollbarXWidth && (n.scrollbarXLeft = n.railXWidth - n.scrollbarXWidth), n.scrollbarYTop >= n.railYHeight - n.scrollbarYHeight && (n.scrollbarYTop = n.railYHeight - n.scrollbarYHeight), function updateCss(e, t) { var n = { width: t.railXWidth }; t.isRtl ? n.left = t.negativeScrollAdjustment + e.scrollLeft + t.containerWidth - t.contentWidth : n.left = e.scrollLeft, t.isScrollbarXUsingBottom ? n.bottom = t.scrollbarXBottom - e.scrollTop : n.top = t.scrollbarXTop + e.scrollTop, o.css(t.scrollbarXRail, n); var r = { top: e.scrollTop, height: t.railYHeight }; t.isScrollbarYUsingRight ? t.isRtl ? r.right = t.contentWidth - (t.negativeScrollAdjustment + e.scrollLeft) - t.scrollbarYRight - t.scrollbarYOuterWidth : r.right = t.scrollbarYRight - e.scrollLeft : t.isRtl ? r.left = t.negativeScrollAdjustment + e.scrollLeft + 2 * t.containerWidth - t.contentWidth - t.scrollbarYLeft - t.scrollbarYOuterWidth : r.left = t.scrollbarYLeft + e.scrollLeft, o.css(t.scrollbarYRail, r), o.css(t.scrollbarX, { left: t.scrollbarXLeft, width: t.scrollbarXWidth - t.railBorderXWidth }), o.css(t.scrollbarY, { top: t.scrollbarYTop, height: t.scrollbarYHeight - t.railBorderYWidth }) }(e, n), n.scrollbarXActive ? i.add(e, "ps-active-x") : (i.remove(e, "ps-active-x"), n.scrollbarXWidth = 0, n.scrollbarXLeft = 0, s(e, "left", 0)), n.scrollbarYActive ? i.add(e, "ps-active-y") : (i.remove(e, "ps-active-y"), n.scrollbarYHeight = 0, n.scrollbarYTop = 0, s(e, "top", 0)) } }, function(e, t, n) { var r = n(3166); r.html = function (e, t) { if (e) return void 0 === t ? r.sanitize(e, function (e) { return e }) : "function" == typeof t ? t(e) : e }, e.exports = r }, function(e, t, n) { var r = n(908), i = n(345), o = n(118)("toStringTag"), a = "Arguments" == i(function () { return arguments }()); e.exports = r ? i : function (e) { var t, n, r; return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof (n = function (e, t) { try { return e[t] } catch (e) { } }(t = Object(e), o)) ? n : a ? i(t) : "Object" == (r = i(t)) && "function" == typeof t.callee ? "Arguments" : r } }, function(e, t, n) { var r = n(343), i = n(632), o = n(221), a = n(235), s = n(910), l = [].push, u = function (e) { var t = 1 == e, n = 2 == e, u = 3 == e, c = 4 == e, d = 6 == e, f = 5 == e || d; return function (h, p, m, g) { for (var v, y, _ = o(h), b = i(_), w = r(p, m, 3), x = a(b.length), C = 0, S = g || s, k = t ? S(h, x) : n ? S(h, 0) : void 0; x > C; C++)if ((f || C in b) && (y = w(v = b[C], C, _), e)) if (t) k[C] = y; else if (y) switch (e) { case 3: return !0; case 5: return v; case 6: return C; case 2: l.call(k, v) } else if (c) return !1; return d ? -1 : u || c ? c : k } }; e.exports = { forEach: u(0), map: u(1), filter: u(2), some: u(3), every: u(4), find: u(5), findIndex: u(6) } },,,,,,,,,,,, function(e, t, n) { e.exports = n(3393) },,,,,,,,,,,,,, function(e, t, n) { var r, i; !function () { var o = { version: "3.5.17" }, a = [].slice, s = function (e) { return a.call(e) }, l = this.document; function d3_documentElement(e) { return e && (e.ownerDocument || e.document || e).documentElement } function d3_window(e) { return e && (e.ownerDocument && e.ownerDocument.defaultView || e.document && e || e.defaultView) } if (l) try { s(l.documentElement.childNodes)[0].nodeType } catch (e) { s = function (e) { for (var t = e.length, n = new Array(t); t--;)n[t] = e[t]; return n } } if (Date.now || (Date.now = function () { return +new Date }), l) try { l.createElement("DIV").style.setProperty("opacity", 0, "") } catch (e) { var u = this.Element.prototype, c = u.setAttribute, d = u.setAttributeNS, f = this.CSSStyleDeclaration.prototype, h = f.setProperty; u.setAttribute = function (e, t) { c.call(this, e, t + "") }, u.setAttributeNS = function (e, t, n) { d.call(this, e, t, n + "") }, f.setProperty = function (e, t, n) { h.call(this, e, t + "", n) } } function d3_ascending(e, t) { return e < t ? -1 : e > t ? 1 : e >= t ? 0 : NaN } function d3_number(e) { return null === e ? NaN : +e } function d3_numeric(e) { return !isNaN(e) } function d3_bisector(e) { return { left: function (t, n, r, i) { for (arguments.length < 3 && (r = 0), arguments.length < 4 && (i = t.length); r < i;) { var o = r + i >>> 1; e(t[o], n) < 0 ? r = o + 1 : i = o } return r }, right: function (t, n, r, i) { for (arguments.length < 3 && (r = 0), arguments.length < 4 && (i = t.length); r < i;) { var o = r + i >>> 1; e(t[o], n) > 0 ? i = o : r = o + 1 } return r } } } o.ascending = d3_ascending, o.descending = function (e, t) { return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN }, o.min = function (e, t) { var n, r, i = -1, o = e.length; if (1 === arguments.length) { for (; ++i < o;)if (null != (r = e[i]) && r >= r) { n = r; break } for (; ++i < o;)null != (r = e[i]) && n > r && (n = r) } else { for (; ++i < o;)if (null != (r = t.call(e, e[i], i)) && r >= r) { n = r; break } for (; ++i < o;)null != (r = t.call(e, e[i], i)) && n > r && (n = r) } return n }, o.max = function (e, t) { var n, r, i = -1, o = e.length; if (1 === arguments.length) { for (; ++i < o;)if (null != (r = e[i]) && r >= r) { n = r; break } for (; ++i < o;)null != (r = e[i]) && r > n && (n = r) } else { for (; ++i < o;)if (null != (r = t.call(e, e[i], i)) && r >= r) { n = r; break } for (; ++i < o;)null != (r = t.call(e, e[i], i)) && r > n && (n = r) } return n }, o.extent = function (e, t) { var n, r, i, o = -1, a = e.length; if (1 === arguments.length) { for (; ++o < a;)if (null != (r = e[o]) && r >= r) { n = i = r; break } for (; ++o < a;)null != (r = e[o]) && (n > r && (n = r), i < r && (i = r)) } else { for (; ++o < a;)if (null != (r = t.call(e, e[o], o)) && r >= r) { n = i = r; break } for (; ++o < a;)null != (r = t.call(e, e[o], o)) && (n > r && (n = r), i < r && (i = r)) } return [n, i] }, o.sum = function (e, t) { var n, r = 0, i = e.length, o = -1; if (1 === arguments.length) for (; ++o < i;)d3_numeric(n = +e[o]) && (r += n); else for (; ++o < i;)d3_numeric(n = +t.call(e, e[o], o)) && (r += n); return r }, o.mean = function (e, t) { var n, r = 0, i = e.length, o = -1, a = i; if (1 === arguments.length) for (; ++o < i;)d3_numeric(n = d3_number(e[o])) ? r += n : --a; else for (; ++o < i;)d3_numeric(n = d3_number(t.call(e, e[o], o))) ? r += n : --a; if (a) return r / a }, o.quantile = function (e, t) { var n = (e.length - 1) * t + 1, r = Math.floor(n), i = +e[r - 1], o = n - r; return o ? i + o * (e[r] - i) : i }, o.median = function (e, t) { var n, r = [], i = e.length, a = -1; if (1 === arguments.length) for (; ++a < i;)d3_numeric(n = d3_number(e[a])) && r.push(n); else for (; ++a < i;)d3_numeric(n = d3_number(t.call(e, e[a], a))) && r.push(n); if (r.length) return o.quantile(r.sort(d3_ascending), .5) }, o.variance = function (e, t) { var n, r, i = e.length, o = 0, a = 0, s = -1, l = 0; if (1 === arguments.length) for (; ++s < i;)d3_numeric(n = d3_number(e[s])) && (a += (r = n - o) * (n - (o += r / ++l))); else for (; ++s < i;)d3_numeric(n = d3_number(t.call(e, e[s], s))) && (a += (r = n - o) * (n - (o += r / ++l))); if (l > 1) return a / (l - 1) }, o.deviation = function () { var e = o.variance.apply(this, arguments); return e ? Math.sqrt(e) : e }; var p = d3_bisector(d3_ascending); function d3_transposeLength(e) { return e.length } o.bisectLeft = p.left, o.bisect = o.bisectRight = p.right, o.bisector = function (e) { return d3_bisector(1 === e.length ? function (t, n) { return d3_ascending(e(t), n) } : e) }, o.shuffle = function (e, t, n) { (o = arguments.length) < 3 && (n = e.length, o < 2 && (t = 0)); for (var r, i, o = n - t; o;)i = Math.random() * o-- | 0, r = e[o + t], e[o + t] = e[i + t], e[i + t] = r; return e }, o.permute = function (e, t) { for (var n = t.length, r = new Array(n); n--;)r[n] = e[t[n]]; return r }, o.pairs = function (e) { for (var t = 0, n = e.length - 1, r = e[0], i = new Array(n < 0 ? 0 : n); t < n;)i[t] = [r, r = e[++t]]; return i }, o.transpose = function (e) { if (!(i = e.length)) return []; for (var t = -1, n = o.min(e, d3_transposeLength), r = new Array(n); ++t < n;)for (var i, a = -1, s = r[t] = new Array(i); ++a < i;)s[a] = e[a][t]; return r }, o.zip = function () { return o.transpose(arguments) }, o.keys = function (e) { var t = []; for (var n in e) t.push(n); return t }, o.values = function (e) { var t = []; for (var n in e) t.push(e[n]); return t }, o.entries = function (e) { var t = []; for (var n in e) t.push({ key: n, value: e[n] }); return t }, o.merge = function (e) { for (var t, n, r, i = e.length, o = -1, a = 0; ++o < i;)a += e[o].length; for (n = new Array(a); --i >= 0;)for (t = (r = e[i]).length; --t >= 0;)n[--a] = r[t]; return n }; var m = Math.abs; function d3_class(e, t) { for (var n in t) Object.defineProperty(e.prototype, n, { value: t[n], enumerable: !1 }) } function d3_Map() { this._ = Object.create(null) } o.range = function (e, t, n) { if (arguments.length < 3 && (n = 1, arguments.length < 2 && (t = e, e = 0)), (t - e) / n == 1 / 0) throw new Error("infinite range"); var r, i = [], o = function d3_range_integerScale(e) { var t = 1; for (; e * t % 1;)t *= 10; return t }(m(n)), a = -1; if (e *= o, t *= o, (n *= o) < 0) for (; (r = e + n * ++a) > t;)i.push(r / o); else for (; (r = e + n * ++a) < t;)i.push(r / o); return i }, o.map = function (e, t) { var n = new d3_Map; if (e instanceof d3_Map) e.forEach(function (e, t) { n.set(e, t) }); else if (Array.isArray(e)) { var r, i = -1, o = e.length; if (1 === arguments.length) for (; ++i < o;)n.set(i, e[i]); else for (; ++i < o;)n.set(t.call(e, r = e[i], i), r) } else for (var a in e) n.set(a, e[a]); return n }; var g = "__proto__", v = "\0"; function d3_map_escape(e) { return (e += "") === g || e[0] === v ? v + e : e } function d3_map_unescape(e) { return (e += "")[0] === v ? e.slice(1) : e } function d3_map_has(e) { return d3_map_escape(e) in this._ } function d3_map_remove(e) { return (e = d3_map_escape(e)) in this._ && delete this._[e] } function d3_map_keys() { var e = []; for (var t in this._) e.push(d3_map_unescape(t)); return e } function d3_map_size() { var e = 0; for (var t in this._) ++e; return e } function d3_map_empty() { for (var e in this._) return !1; return !0 } function d3_Set() { this._ = Object.create(null) } function d3_identity(e) { return e } function d3_rebind(e, t, n) { return function () { var r = n.apply(t, arguments); return r === t ? e : r } } function d3_vendorSymbol(e, t) { if (t in e) return t; t = t.charAt(0).toUpperCase() + t.slice(1); for (var n = 0, r = y.length; n < r; ++n) { var i = y[n] + t; if (i in e) return i } } d3_class(d3_Map, { has: d3_map_has, get: function (e) { return this._[d3_map_escape(e)] }, set: function (e, t) { return this._[d3_map_escape(e)] = t }, remove: d3_map_remove, keys: d3_map_keys, values: function () { var e = []; for (var t in this._) e.push(this._[t]); return e }, entries: function () { var e = []; for (var t in this._) e.push({ key: d3_map_unescape(t), value: this._[t] }); return e }, size: d3_map_size, empty: d3_map_empty, forEach: function (e) { for (var t in this._) e.call(this, d3_map_unescape(t), this._[t]) } }), o.nest = function () { var e, t, n = {}, r = [], i = []; function map(i, o, a) { if (a >= r.length) return t ? t.call(n, o) : e ? o.sort(e) : o; for (var s, l, u, c, d = -1, f = o.length, h = r[a++], p = new d3_Map; ++d < f;)(c = p.get(s = h(l = o[d]))) ? c.push(l) : p.set(s, [l]); return i ? (l = i(), u = function (e, t) { l.set(e, map(i, t, a)) }) : (l = {}, u = function (e, t) { l[e] = map(i, t, a) }), p.forEach(u), l } return n.map = function (e, t) { return map(t, e, 0) }, n.entries = function (e) { return function entries(e, t) { if (t >= r.length) return e; var n = [], o = i[t++]; return e.forEach(function (e, r) { n.push({ key: e, values: entries(r, t) }) }), o ? n.sort(function (e, t) { return o(e.key, t.key) }) : n }(map(o.map, e, 0), 0) }, n.key = function (e) { return r.push(e), n }, n.sortKeys = function (e) { return i[r.length - 1] = e, n }, n.sortValues = function (t) { return e = t, n }, n.rollup = function (e) { return t = e, n }, n }, o.set = function (e) { var t = new d3_Set; if (e) for (var n = 0, r = e.length; n < r; ++n)t.add(e[n]); return t }, d3_class(d3_Set, { has: d3_map_has, add: function (e) { return this._[d3_map_escape(e += "")] = !0, e }, remove: d3_map_remove, values: d3_map_keys, size: d3_map_size, empty: d3_map_empty, forEach: function (e) { for (var t in this._) e.call(this, d3_map_unescape(t)) } }), o.behavior = {}, o.rebind = function (e, t) { for (var n, r = 1, i = arguments.length; ++r < i;)e[n = arguments[r]] = d3_rebind(e, t, t[n]); return e }; var y = ["webkit", "ms", "moz", "Moz", "o", "O"]; function d3_noop() { } function d3_dispatch() { } function d3_dispatch_event(e) { var t = [], n = new d3_Map; function event() { for (var n, r = t, i = -1, o = r.length; ++i < o;)(n = r[i].on) && n.apply(this, arguments); return e } return event.on = function (r, i) { var o, a = n.get(r); return arguments.length < 2 ? a && a.on : (a && (a.on = null, t = t.slice(0, o = t.indexOf(a)).concat(t.slice(o + 1)), n.remove(r)), i && t.push(n.set(r, { on: i })), e) }, event } function d3_eventPreventDefault() { o.event.preventDefault() } function d3_eventSource() { for (var e, t = o.event; e = t.sourceEvent;)t = e; return t } function d3_eventDispatch(e) { for (var t = new d3_dispatch, n = 0, r = arguments.length; ++n < r;)t[arguments[n]] = d3_dispatch_event(t); return t.of = function (n, r) { return function (i) { try { var a = i.sourceEvent = o.event; i.target = e, o.event = i, t[i.type].apply(n, r) } finally { o.event = a } } }, t } o.dispatch = function () { for (var e = new d3_dispatch, t = -1, n = arguments.length; ++t < n;)e[arguments[t]] = d3_dispatch_event(e); return e }, d3_dispatch.prototype.on = function (e, t) { var n = e.indexOf("."), r = ""; if (n >= 0 && (r = e.slice(n + 1), e = e.slice(0, n)), e) return arguments.length < 2 ? this[e].on(r) : this[e].on(r, t); if (2 === arguments.length) { if (null == t) for (e in this) this.hasOwnProperty(e) && this[e].on(r, null); return this } }, o.event = null, o.requote = function (e) { return e.replace(_, "\\$&") }; var _ = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g, b = {}.__proto__ ? function (e, t) { e.__proto__ = t } : function (e, t) { for (var n in t) e[n] = t[n] }; function d3_selection(e) { return b(e, S), e } var w = function (e, t) { return t.querySelector(e) }, x = function (e, t) { return t.querySelectorAll(e) }, C = function (e, t) { var n = e.matches || e[d3_vendorSymbol(e, "matchesSelector")]; return (C = function (e, t) { return n.call(e, t) })(e, t) }; "function" == typeof Sizzle && (w = function (e, t) { return Sizzle(e, t)[0] || null }, x = Sizzle, C = Sizzle.matchesSelector), o.selection = function () { return o.select(l.documentElement) }; var S = o.selection.prototype = []; function d3_selection_selector(e) { return "function" == typeof e ? e : function () { return w(e, this) } } function d3_selection_selectorAll(e) { return "function" == typeof e ? e : function () { return x(e, this) } } S.select = function (e) { var t, n, r, i, o = []; e = d3_selection_selector(e); for (var a = -1, s = this.length; ++a < s;) { o.push(t = []), t.parentNode = (r = this[a]).parentNode; for (var l = -1, u = r.length; ++l < u;)(i = r[l]) ? (t.push(n = e.call(i, i.__data__, l, a)), n && "__data__" in i && (n.__data__ = i.__data__)) : t.push(null) } return d3_selection(o) }, S.selectAll = function (e) { var t, n, r = []; e = d3_selection_selectorAll(e); for (var i = -1, o = this.length; ++i < o;)for (var a = this[i], l = -1, u = a.length; ++l < u;)(n = a[l]) && (r.push(t = s(e.call(n, n.__data__, l, i))), t.parentNode = n); return d3_selection(r) }; var k = "http://www.w3.org/1999/xhtml", T = { svg: "http://www.w3.org/2000/svg", xhtml: k, xlink: "http://www.w3.org/1999/xlink", xml: "http://www.w3.org/XML/1998/namespace", xmlns: "http://www.w3.org/2000/xmlns/" }; function d3_selection_attr(e, t) { return e = o.ns.qualify(e), null == t ? e.local ? function attrNullNS() { this.removeAttributeNS(e.space, e.local) } : function attrNull() { this.removeAttribute(e) } : "function" == typeof t ? e.local ? function attrFunctionNS() { var n = t.apply(this, arguments); null == n ? this.removeAttributeNS(e.space, e.local) : this.setAttributeNS(e.space, e.local, n) } : function attrFunction() { var n = t.apply(this, arguments); null == n ? this.removeAttribute(e) : this.setAttribute(e, n) } : e.local ? function attrConstantNS() { this.setAttributeNS(e.space, e.local, t) } : function attrConstant() { this.setAttribute(e, t) } } function d3_collapse(e) { return e.trim().replace(/\s+/g, " ") } function d3_selection_classedRe(e) { return new RegExp("(?:^|\\s+)" + o.requote(e) + "(?:\\s+|$)", "g") } function d3_selection_classes(e) { return (e + "").trim().split(/^|\s+/) } function d3_selection_classed(e, t) { var n = (e = d3_selection_classes(e).map(d3_selection_classedName)).length; return "function" == typeof t ? function classedFunction() { for (var r = -1, i = t.apply(this, arguments); ++r < n;)e[r](this, i) } : function classedConstant() { for (var r = -1; ++r < n;)e[r](this, t) } } function d3_selection_classedName(e) { var t = d3_selection_classedRe(e); return function (n, r) { if (i = n.classList) return r ? i.add(e) : i.remove(e); var i = n.getAttribute("class") || ""; r ? (t.lastIndex = 0, t.test(i) || n.setAttribute("class", d3_collapse(i + " " + e))) : n.setAttribute("class", d3_collapse(i.replace(t, " "))) } } function d3_selection_style(e, t, n) { return null == t ? function styleNull() { this.style.removeProperty(e) } : "function" == typeof t ? function styleFunction() { var r = t.apply(this, arguments); null == r ? this.style.removeProperty(e) : this.style.setProperty(e, r, n) } : function styleConstant() { this.style.setProperty(e, t, n) } } function d3_selection_property(e, t) { return null == t ? function propertyNull() { delete this[e] } : "function" == typeof t ? function propertyFunction() { var n = t.apply(this, arguments); null == n ? delete this[e] : this[e] = n } : function propertyConstant() { this[e] = t } } function d3_selection_creator(e) { return "function" == typeof e ? e : (e = o.ns.qualify(e)).local ? function createNS() { return this.ownerDocument.createElementNS(e.space, e.local) } : function create() { var t = this.ownerDocument, n = this.namespaceURI; return n === k && t.documentElement.namespaceURI === k ? t.createElement(e) : t.createElementNS(n, e) } } function d3_selectionRemove() { var e = this.parentNode; e && e.removeChild(this) } function d3_selection_dataNode(e) { return { __data__: e } } function d3_selection_filter(e) { return function () { return C(this, e) } } function d3_selection_each(e, t) { for (var n = 0, r = e.length; n < r; n++)for (var i, o = e[n], a = 0, s = o.length; a < s; a++)(i = o[a]) && t(i, a, n); return e } function d3_selection_enter(e) { return b(e, L), e } o.ns = { prefix: T, qualify: function (e) { var t = e.indexOf(":"), n = e; return t >= 0 && "xmlns" !== (n = e.slice(0, t)) && (e = e.slice(t + 1)), T.hasOwnProperty(n) ? { space: T[n], local: e } : e } }, S.attr = function (e, t) { if (arguments.length < 2) { if ("string" == typeof e) { var n = this.node(); return (e = o.ns.qualify(e)).local ? n.getAttributeNS(e.space, e.local) : n.getAttribute(e) } for (t in e) this.each(d3_selection_attr(t, e[t])); return this } return this.each(d3_selection_attr(e, t)) }, S.classed = function (e, t) { if (arguments.length < 2) { if ("string" == typeof e) { var n = this.node(), r = (e = d3_selection_classes(e)).length, i = -1; if (t = n.classList) { for (; ++i < r;)if (!t.contains(e[i])) return !1 } else for (t = n.getAttribute("class"); ++i < r;)if (!d3_selection_classedRe(e[i]).test(t)) return !1; return !0 } for (t in e) this.each(d3_selection_classed(t, e[t])); return this } return this.each(d3_selection_classed(e, t)) }, S.style = function (e, t, n) { var r = arguments.length; if (r < 3) { if ("string" != typeof e) { for (n in r < 2 && (t = ""), e) this.each(d3_selection_style(n, e[n], t)); return this } if (r < 2) { var i = this.node(); return d3_window(i).getComputedStyle(i, null).getPropertyValue(e) } n = "" } return this.each(d3_selection_style(e, t, n)) }, S.property = function (e, t) { if (arguments.length < 2) { if ("string" == typeof e) return this.node()[e]; for (t in e) this.each(d3_selection_property(t, e[t])); return this } return this.each(d3_selection_property(e, t)) }, S.text = function (e) { return arguments.length ? this.each("function" == typeof e ? function () { var t = e.apply(this, arguments); this.textContent = null == t ? "" : t } : null == e ? function () { this.textContent = "" } : function () { this.textContent = e }) : this.node().textContent }, S.html = function (e) { return arguments.length ? this.each("function" == typeof e ? function () { var t = e.apply(this, arguments); this.innerHTML = null == t ? "" : t } : null == e ? function () { this.innerHTML = "" } : function () { this.innerHTML = e }) : this.node().innerHTML }, S.append = function (e) { return e = d3_selection_creator(e), this.select(function () { return this.appendChild(e.apply(this, arguments)) }) }, S.insert = function (e, t) { return e = d3_selection_creator(e), t = d3_selection_selector(t), this.select(function () { return this.insertBefore(e.apply(this, arguments), t.apply(this, arguments) || null) }) }, S.remove = function () { return this.each(d3_selectionRemove) }, S.data = function (e, t) { var n, r, i = -1, o = this.length; if (!arguments.length) { for (e = new Array(o = (n = this[0]).length); ++i < o;)(r = n[i]) && (e[i] = r.__data__); return e } function bind(e, n) { var r, i, o, u = e.length, c = n.length, d = Math.min(u, c), f = new Array(c), h = new Array(c), p = new Array(u); if (t) { var m, g = new d3_Map, v = new Array(u); for (r = -1; ++r < u;)(i = e[r]) && (g.has(m = t.call(i, i.__data__, r)) ? p[r] = i : g.set(m, i), v[r] = m); for (r = -1; ++r < c;)(i = g.get(m = t.call(n, o = n[r], r))) ? !0 !== i && (f[r] = i, i.__data__ = o) : h[r] = d3_selection_dataNode(o), g.set(m, !0); for (r = -1; ++r < u;)r in v && !0 !== g.get(v[r]) && (p[r] = e[r]) } else { for (r = -1; ++r < d;)i = e[r], o = n[r], i ? (i.__data__ = o, f[r] = i) : h[r] = d3_selection_dataNode(o); for (; r < c; ++r)h[r] = d3_selection_dataNode(n[r]); for (; r < u; ++r)p[r] = e[r] } h.update = f, h.parentNode = f.parentNode = p.parentNode = e.parentNode, a.push(h), s.push(f), l.push(p) } var a = d3_selection_enter([]), s = d3_selection([]), l = d3_selection([]); if ("function" == typeof e) for (; ++i < o;)bind(n = this[i], e.call(n, n.parentNode.__data__, i)); else for (; ++i < o;)bind(n = this[i], e); return s.enter = function () { return a }, s.exit = function () { return l }, s }, S.datum = function (e) { return arguments.length ? this.property("__data__", e) : this.property("__data__") }, S.filter = function (e) { var t, n, r, i = []; "function" != typeof e && (e = d3_selection_filter(e)); for (var o = 0, a = this.length; o < a; o++) { i.push(t = []), t.parentNode = (n = this[o]).parentNode; for (var s = 0, l = n.length; s < l; s++)(r = n[s]) && e.call(r, r.__data__, s, o) && t.push(r) } return d3_selection(i) }, S.order = function () { for (var e = -1, t = this.length; ++e < t;)for (var n, r = this[e], i = r.length - 1, o = r[i]; --i >= 0;)(n = r[i]) && (o && o !== n.nextSibling && o.parentNode.insertBefore(n, o), o = n); return this }, S.sort = function (e) { e = function d3_selection_sortComparator(e) { arguments.length || (e = d3_ascending); return function (t, n) { return t && n ? e(t.__data__, n.__data__) : !t - !n } }.apply(this, arguments); for (var t = -1, n = this.length; ++t < n;)this[t].sort(e); return this.order() }, S.each = function (e) { return d3_selection_each(this, function (t, n, r) { e.call(t, t.__data__, n, r) }) }, S.call = function (e) { var t = s(arguments); return e.apply(t[0] = this, t), this }, S.empty = function () { return !this.node() }, S.node = function () { for (var e = 0, t = this.length; e < t; e++)for (var n = this[e], r = 0, i = n.length; r < i; r++) { var o = n[r]; if (o) return o } return null }, S.size = function () { var e = 0; return d3_selection_each(this, function () { ++e }), e }; var L = []; function d3_selection_on(e, t, n) { var r = "__on" + e, i = e.indexOf("."), a = d3_selection_onListener; i > 0 && (e = e.slice(0, i)); var l = M.get(e); function onRemove() { var t = this[r]; t && (this.removeEventListener(e, t, t.$), delete this[r]) } return l && (e = l, a = d3_selection_onFilter), i ? t ? function onAdd() { var i = a(t, s(arguments)); onRemove.call(this), this.addEventListener(e, this[r] = i, i.$ = n), i._ = t } : onRemove : t ? d3_noop : function removeAll() { var t, n = new RegExp("^__on([^.]+)" + o.requote(e) + "$"); for (var r in this) if (t = r.match(n)) { var i = this[r]; this.removeEventListener(t[1], i, i.$), delete this[r] } } } o.selection.enter = d3_selection_enter, o.selection.enter.prototype = L, L.append = S.append, L.empty = S.empty, L.node = S.node, L.call = S.call, L.size = S.size, L.select = function (e) { for (var t, n, r, i, o, a = [], s = -1, l = this.length; ++s < l;) { r = (i = this[s]).update, a.push(t = []), t.parentNode = i.parentNode; for (var u = -1, c = i.length; ++u < c;)(o = i[u]) ? (t.push(r[u] = n = e.call(i.parentNode, o.__data__, u, s)), n.__data__ = o.__data__) : t.push(null) } return d3_selection(a) }, L.insert = function (e, t) { return arguments.length < 2 && (t = function d3_selection_enterInsertBefore(e) { var t, n; return function (r, i, o) { var a, s = e[o].update, l = s.length; for (o != n && (n = o, t = 0), i >= t && (t = i + 1); !(a = s[t]) && ++t < l;); return a } }(this)), S.insert.call(this, e, t) }, o.select = function (e) { var t; return "string" == typeof e ? (t = [w(e, l)]).parentNode = l.documentElement : (t = [e]).parentNode = d3_documentElement(e), d3_selection([t]) }, o.selectAll = function (e) { var t; return "string" == typeof e ? (t = s(x(e, l))).parentNode = l.documentElement : (t = s(e)).parentNode = null, d3_selection([t]) }, S.on = function (e, t, n) { var r = arguments.length; if (r < 3) { if ("string" != typeof e) { for (n in r < 2 && (t = !1), e) this.each(d3_selection_on(n, e[n], t)); return this } if (r < 2) return (r = this.node()["__on" + e]) && r._; n = !1 } return this.each(d3_selection_on(e, t, n)) }; var M = o.map({ mouseenter: "mouseover", mouseleave: "mouseout" }); function d3_selection_onListener(e, t) { return function (n) { var r = o.event; o.event = n, t[0] = this.__data__; try { e.apply(this, t) } finally { o.event = r } } } function d3_selection_onFilter(e, t) { var n = d3_selection_onListener(e, t); return function (e) { var t = e.relatedTarget; t && (t === this || 8 & t.compareDocumentPosition(this)) || n.call(this, e) } } l && M.forEach(function (e) { "on" + e in l && M.remove(e) }); var E, A = 0; function d3_event_dragSuppress(e) { var t = ".dragsuppress-" + ++A, n = "click" + t, r = o.select(d3_window(e)).on("touchmove" + t, d3_eventPreventDefault).on("dragstart" + t, d3_eventPreventDefault).on("selectstart" + t, d3_eventPreventDefault); if (null == E && (E = !("onselectstart" in e) && d3_vendorSymbol(e.style, "userSelect")), E) { var i = d3_documentElement(e).style, a = i[E]; i[E] = "none" } return function (e) { if (r.on(t, null), E && (i[E] = a), e) { var o = function () { r.on(n, null) }; r.on(n, function () { d3_eventPreventDefault(), o() }, !0), setTimeout(o, 0) } } } o.mouse = function (e) { return d3_mousePoint(e, d3_eventSource()) }; var P = this.navigator && /WebKit/.test(this.navigator.userAgent) ? -1 : 0; function d3_mousePoint(e, t) { t.changedTouches && (t = t.changedTouches[0]); var n = e.ownerSVGElement || e; if (n.createSVGPoint) { var r = n.createSVGPoint(); if (P < 0) { var i = d3_window(e); if (i.scrollX || i.scrollY) { var a = (n = o.select("body").append("svg").style({ position: "absolute", top: 0, left: 0, margin: 0, padding: 0, border: "none" }, "important"))[0][0].getScreenCTM(); P = !(a.f || a.e), n.remove() } } return P ? (r.x = t.pageX, r.y = t.pageY) : (r.x = t.clientX, r.y = t.clientY), [(r = r.matrixTransform(e.getScreenCTM().inverse())).x, r.y] } var s = e.getBoundingClientRect(); return [t.clientX - s.left - e.clientLeft, t.clientY - s.top - e.clientTop] } function d3_behavior_dragTouchId() { return o.event.changedTouches[0].identifier } o.touch = function (e, t, n) { if (arguments.length < 3 && (n = t, t = d3_eventSource().changedTouches), t) for (var r, i = 0, o = t.length; i < o; ++i)if ((r = t[i]).identifier === n) return d3_mousePoint(e, r) }, o.behavior.drag = function () { var e = d3_eventDispatch(drag, "drag", "dragstart", "dragend"), t = null, n = dragstart(d3_noop, o.mouse, d3_window, "mousemove", "mouseup"), r = dragstart(d3_behavior_dragTouchId, o.touch, d3_identity, "touchmove", "touchend"); function drag() { this.on("mousedown.drag", n).on("touchstart.drag", r) } function dragstart(n, r, i, a, s) { return function () { var l, u = o.event.target.correspondingElement || o.event.target, c = this.parentNode, d = e.of(this, arguments), f = 0, h = n(), p = ".drag" + (null == h ? "" : "-" + h), m = o.select(i(u)).on(a + p, function moved() { var e, t, n = r(c, h); if (!n) return; e = n[0] - v[0], t = n[1] - v[1], f |= e | t, v = n, d({ type: "drag", x: n[0] + l[0], y: n[1] + l[1], dx: e, dy: t }) }).on(s + p, function ended() { if (!r(c, h)) return; m.on(a + p, null).on(s + p, null), g(f), d({ type: "dragend" }) }), g = d3_event_dragSuppress(u), v = r(c, h); l = t ? [(l = t.apply(this, arguments)).x - v[0], l.y - v[1]] : [0, 0], d({ type: "dragstart" }) } } return drag.origin = function (e) { return arguments.length ? (t = e, drag) : t }, o.rebind(drag, e, "on") }, o.touches = function (e, t) { return arguments.length < 2 && (t = d3_eventSource().touches), t ? s(t).map(function (t) { var n = d3_mousePoint(e, t); return n.identifier = t.identifier, n }) : [] }; var R = 1e-6, O = R * R, D = Math.PI, F = 2 * D, I = F - R, N = D / 2, $ = D / 180, B = 180 / D; function d3_sgn(e) { return e > 0 ? 1 : e < 0 ? -1 : 0 } function d3_cross2d(e, t, n) { return (t[0] - e[0]) * (n[1] - e[1]) - (t[1] - e[1]) * (n[0] - e[0]) } function d3_acos(e) { return e > 1 ? 0 : e < -1 ? D : Math.acos(e) } function d3_asin(e) { return e > 1 ? N : e < -1 ? -N : Math.asin(e) } function d3_cosh(e) { return ((e = Math.exp(e)) + 1 / e) / 2 } function d3_haversin(e) { return (e = Math.sin(e / 2)) * e } var z = Math.SQRT2; o.interpolateZoom = function (e, t) { var n, r, i = e[0], o = e[1], a = e[2], s = t[0], l = t[1], u = t[2], c = s - i, d = l - o, f = c * c + d * d; if (f < O) r = Math.log(u / a) / z, n = function (e) { return [i + e * c, o + e * d, a * Math.exp(z * e * r)] }; else { var h = Math.sqrt(f), p = (u * u - a * a + 4 * f) / (2 * a * 2 * h), m = (u * u - a * a - 4 * f) / (2 * u * 2 * h), g = Math.log(Math.sqrt(p * p + 1) - p), v = Math.log(Math.sqrt(m * m + 1) - m); r = (v - g) / z, n = function (e) { var t = e * r, n = d3_cosh(g), s = a / (2 * h) * (n * function d3_tanh(e) { return ((e = Math.exp(2 * e)) - 1) / (e + 1) }(z * t + g) - function d3_sinh(e) { return ((e = Math.exp(e)) - 1 / e) / 2 }(g)); return [i + s * c, o + s * d, a * n / d3_cosh(z * t + g)] } } return n.duration = 1e3 * r, n }, o.behavior.zoom = function () { var e, t, n, r, i, a, s, u, c, d = { x: 0, y: 0, k: 1 }, f = [960, 500], h = q, p = 250, m = 0, g = "mousedown.zoom", v = "mousemove.zoom", y = "mouseup.zoom", _ = "touchstart.zoom", b = d3_eventDispatch(zoom, "zoomstart", "zoom", "zoomend"); function zoom(e) { e.on(g, mousedowned).on(U + ".zoom", mousewheeled).on("dblclick.zoom", dblclicked).on(_, touchstarted) } function location(e) { return [(e[0] - d.x) / d.k, (e[1] - d.y) / d.k] } function scaleTo(e) { d.k = Math.max(h[0], Math.min(h[1], e)) } function translateTo(e, t) { t = function point(e) { return [e[0] * d.k + d.x, e[1] * d.k + d.y] }(t), d.x += e[0] - t[0], d.y += e[1] - t[1] } function zoomTo(e, n, r, i) { e.__chart__ = { x: d.x, y: d.y, k: d.k }, scaleTo(Math.pow(2, i)), translateTo(t = n, r), e = o.select(e), p > 0 && (e = e.transition().duration(p)), e.call(zoom.event) } function rescale() { s && s.domain(a.range().map(function (e) { return (e - d.x) / d.k }).map(a.invert)), c && c.domain(u.range().map(function (e) { return (e - d.y) / d.k }).map(u.invert)) } function zoomstarted(e) { m++ || e({ type: "zoomstart" }) } function zoomed(e) { rescale(), e({ type: "zoom", scale: d.k, translate: [d.x, d.y] }) } function zoomended(e) { --m || (e({ type: "zoomend" }), t = null) } function mousedowned() { var e = this, t = b.of(e, arguments), n = 0, r = o.select(d3_window(e)).on(v, function moved() { n = 1, translateTo(o.mouse(e), i), zoomed(t) }).on(y, function ended() { r.on(v, null).on(y, null), a(n), zoomended(t) }), i = location(o.mouse(e)), a = d3_event_dragSuppress(e); Ot.call(e), zoomstarted(t) } function touchstarted() { var e, t = this, n = b.of(t, arguments), r = {}, a = 0, s = ".zoom-" + o.event.changedTouches[0].identifier, l = "touchmove" + s, u = "touchend" + s, c = [], f = o.select(t), h = d3_event_dragSuppress(t); function relocate() { var n = o.touches(t); return e = d.k, n.forEach(function (e) { e.identifier in r && (r[e.identifier] = location(e)) }), n } function started() { var e = o.event.target; o.select(e).on(l, moved).on(u, ended), c.push(e); for (var n = o.event.changedTouches, s = 0, f = n.length; s < f; ++s)r[n[s].identifier] = null; var h = relocate(), p = Date.now(); if (1 === h.length) { if (p - i < 500) { var m = h[0]; zoomTo(t, m, r[m.identifier], Math.floor(Math.log(d.k) / Math.LN2) + 1), d3_eventPreventDefault() } i = p } else if (h.length > 1) { m = h[0]; var g = h[1], v = m[0] - g[0], y = m[1] - g[1]; a = v * v + y * y } } function moved() { var s, l, u, c, d = o.touches(t); Ot.call(t); for (var f = 0, h = d.length; f < h; ++f, c = null)if (u = d[f], c = r[u.identifier]) { if (l) break; s = u, l = c } if (c) { var p = (p = u[0] - s[0]) * p + (p = u[1] - s[1]) * p, m = a && Math.sqrt(p / a); s = [(s[0] + u[0]) / 2, (s[1] + u[1]) / 2], l = [(l[0] + c[0]) / 2, (l[1] + c[1]) / 2], scaleTo(m * e) } i = null, translateTo(s, l), zoomed(n) } function ended() { if (o.event.touches.length) { for (var e = o.event.changedTouches, t = 0, i = e.length; t < i; ++t)delete r[e[t].identifier]; for (var a in r) return void relocate() } o.selectAll(c).on(s, null), f.on(g, mousedowned).on(_, touchstarted), h(), zoomended(n) } started(), zoomstarted(n), f.on(g, null).on(_, started) } function mousewheeled() { var i = b.of(this, arguments); r ? clearTimeout(r) : (Ot.call(this), e = location(t = n || o.mouse(this)), zoomstarted(i)), r = setTimeout(function () { r = null, zoomended(i) }, 50), d3_eventPreventDefault(), scaleTo(Math.pow(2, .002 * j()) * d.k), translateTo(t, e), zoomed(i) } function dblclicked() { var e = o.mouse(this), t = Math.log(d.k) / Math.LN2; zoomTo(this, e, location(e), o.event.shiftKey ? Math.ceil(t) - 1 : Math.floor(t) + 1) } return U || (U = "onwheel" in l ? (j = function () { return -o.event.deltaY * (o.event.deltaMode ? 120 : 1) }, "wheel") : "onmousewheel" in l ? (j = function () { return o.event.wheelDelta }, "mousewheel") : (j = function () { return -o.event.detail }, "MozMousePixelScroll")), zoom.event = function (e) { e.each(function () { var e = b.of(this, arguments), n = d; Dt ? o.select(this).transition().each("start.zoom", function () { d = this.__chart__ || { x: 0, y: 0, k: 1 }, zoomstarted(e) }).tween("zoom:zoom", function () { var r = f[0], i = f[1], a = t ? t[0] : r / 2, s = t ? t[1] : i / 2, l = o.interpolateZoom([(a - d.x) / d.k, (s - d.y) / d.k, r / d.k], [(a - n.x) / n.k, (s - n.y) / n.k, r / n.k]); return function (t) { var n = l(t), i = r / n[2]; this.__chart__ = d = { x: a - n[0] * i, y: s - n[1] * i, k: i }, zoomed(e) } }).each("interrupt.zoom", function () { zoomended(e) }).each("end.zoom", function () { zoomended(e) }) : (this.__chart__ = d, zoomstarted(e), zoomed(e), zoomended(e)) }) }, zoom.translate = function (e) { return arguments.length ? (d = { x: +e[0], y: +e[1], k: d.k }, rescale(), zoom) : [d.x, d.y] }, zoom.scale = function (e) { return arguments.length ? (d = { x: d.x, y: d.y, k: null }, scaleTo(+e), rescale(), zoom) : d.k }, zoom.scaleExtent = function (e) { return arguments.length ? (h = null == e ? q : [+e[0], +e[1]], zoom) : h }, zoom.center = function (e) { return arguments.length ? (n = e && [+e[0], +e[1]], zoom) : n }, zoom.size = function (e) { return arguments.length ? (f = e && [+e[0], +e[1]], zoom) : f }, zoom.duration = function (e) { return arguments.length ? (p = +e, zoom) : p }, zoom.x = function (e) { return arguments.length ? (s = e, a = e.copy(), d = { x: 0, y: 0, k: 1 }, zoom) : s }, zoom.y = function (e) { return arguments.length ? (c = e, u = e.copy(), d = { x: 0, y: 0, k: 1 }, zoom) : c }, o.rebind(zoom, b, "on") }; var j, U, q = [0, 1 / 0]; function d3_color() { } function d3_hsl(e, t, n) { return this instanceof d3_hsl ? (this.h = +e, this.s = +t, void (this.l = +n)) : arguments.length < 2 ? e instanceof d3_hsl ? new d3_hsl(e.h, e.s, e.l) : d3_rgb_parse("" + e, d3_rgb_hsl, d3_hsl) : new d3_hsl(e, t, n) } o.color = d3_color, d3_color.prototype.toString = function () { return this.rgb() + "" }, o.hsl = d3_hsl; var H = d3_hsl.prototype = new d3_color; function d3_hsl_rgb(e, t, n) { var r, i; function vv(e) { return Math.round(255 * function v(e) { return e > 360 ? e -= 360 : e < 0 && (e += 360), e < 60 ? r + (i - r) * e / 60 : e < 180 ? i : e < 240 ? r + (i - r) * (240 - e) / 60 : r }(e)) } return e = isNaN(e) ? 0 : (e %= 360) < 0 ? e + 360 : e, t = isNaN(t) ? 0 : t < 0 ? 0 : t > 1 ? 1 : t, r = 2 * (n = n < 0 ? 0 : n > 1 ? 1 : n) - (i = n <= .5 ? n * (1 + t) : n + t - n * t), new d3_rgb(vv(e + 120), vv(e), vv(e - 120)) } function d3_hcl(e, t, n) { return this instanceof d3_hcl ? (this.h = +e, this.c = +t, void (this.l = +n)) : arguments.length < 2 ? e instanceof d3_hcl ? new d3_hcl(e.h, e.c, e.l) : d3_lab_hcl(e instanceof d3_lab ? e.l : (e = d3_rgb_lab((e = o.rgb(e)).r, e.g, e.b)).l, e.a, e.b) : new d3_hcl(e, t, n) } H.brighter = function (e) { return e = Math.pow(.7, arguments.length ? e : 1), new d3_hsl(this.h, this.s, this.l / e) }, H.darker = function (e) { return e = Math.pow(.7, arguments.length ? e : 1), new d3_hsl(this.h, this.s, e * this.l) }, H.rgb = function () { return d3_hsl_rgb(this.h, this.s, this.l) }, o.hcl = d3_hcl; var V = d3_hcl.prototype = new d3_color; function d3_hcl_lab(e, t, n) { return isNaN(e) && (e = 0), isNaN(t) && (t = 0), new d3_lab(n, Math.cos(e *= $) * t, Math.sin(e) * t) } function d3_lab(e, t, n) { return this instanceof d3_lab ? (this.l = +e, this.a = +t, void (this.b = +n)) : arguments.length < 2 ? e instanceof d3_lab ? new d3_lab(e.l, e.a, e.b) : e instanceof d3_hcl ? d3_hcl_lab(e.h, e.c, e.l) : d3_rgb_lab((e = d3_rgb(e)).r, e.g, e.b) : new d3_lab(e, t, n) } V.brighter = function (e) { return new d3_hcl(this.h, this.c, Math.min(100, this.l + G * (arguments.length ? e : 1))) }, V.darker = function (e) { return new d3_hcl(this.h, this.c, Math.max(0, this.l - G * (arguments.length ? e : 1))) }, V.rgb = function () { return d3_hcl_lab(this.h, this.c, this.l).rgb() }, o.lab = d3_lab; var G = 18, W = .95047, Y = 1, Z = 1.08883, K = d3_lab.prototype = new d3_color; function d3_lab_rgb(e, t, n) { var r = (e + 16) / 116, i = r + t / 500, o = r - n / 200; return new d3_rgb(d3_xyz_rgb(3.2404542 * (i = d3_lab_xyz(i) * W) - 1.5371385 * (r = d3_lab_xyz(r) * Y) - .4985314 * (o = d3_lab_xyz(o) * Z)), d3_xyz_rgb(-.969266 * i + 1.8760108 * r + .041556 * o), d3_xyz_rgb(.0556434 * i - .2040259 * r + 1.0572252 * o)) } function d3_lab_hcl(e, t, n) { return e > 0 ? new d3_hcl(Math.atan2(n, t) * B, Math.sqrt(t * t + n * n), e) : new d3_hcl(NaN, NaN, e) } function d3_lab_xyz(e) { return e > .206893034 ? e * e * e : (e - 4 / 29) / 7.787037 } function d3_xyz_lab(e) { return e > .008856 ? Math.pow(e, 1 / 3) : 7.787037 * e + 4 / 29 } function d3_xyz_rgb(e) { return Math.round(255 * (e <= .00304 ? 12.92 * e : 1.055 * Math.pow(e, 1 / 2.4) - .055)) } function d3_rgb(e, t, n) { return this instanceof d3_rgb ? (this.r = ~~e, this.g = ~~t, void (this.b = ~~n)) : arguments.length < 2 ? e instanceof d3_rgb ? new d3_rgb(e.r, e.g, e.b) : d3_rgb_parse("" + e, d3_rgb, d3_hsl_rgb) : new d3_rgb(e, t, n) } function d3_rgbNumber(e) { return new d3_rgb(e >> 16, e >> 8 & 255, 255 & e) } function d3_rgbString(e) { return d3_rgbNumber(e) + "" } K.brighter = function (e) { return new d3_lab(Math.min(100, this.l + G * (arguments.length ? e : 1)), this.a, this.b) }, K.darker = function (e) { return new d3_lab(Math.max(0, this.l - G * (arguments.length ? e : 1)), this.a, this.b) }, K.rgb = function () { return d3_lab_rgb(this.l, this.a, this.b) }, o.rgb = d3_rgb; var X = d3_rgb.prototype = new d3_color; function d3_rgb_hex(e) { return e < 16 ? "0" + Math.max(0, e).toString(16) : Math.min(255, e).toString(16) } function d3_rgb_parse(e, t, n) { var r, i, o, a = 0, s = 0, l = 0; if (r = /([a-z]+)\((.*)\)/.exec(e = e.toLowerCase())) switch (i = r[2].split(","), r[1]) { case "hsl": return n(parseFloat(i[0]), parseFloat(i[1]) / 100, parseFloat(i[2]) / 100); case "rgb": return t(d3_rgb_parseNumber(i[0]), d3_rgb_parseNumber(i[1]), d3_rgb_parseNumber(i[2])) }return (o = J.get(e)) ? t(o.r, o.g, o.b) : (null == e || "#" !== e.charAt(0) || isNaN(o = parseInt(e.slice(1), 16)) || (4 === e.length ? (a = (3840 & o) >> 4, a |= a >> 4, s = 240 & o, s |= s >> 4, l = 15 & o, l |= l << 4) : 7 === e.length && (a = (16711680 & o) >> 16, s = (65280 & o) >> 8, l = 255 & o)), t(a, s, l)) } function d3_rgb_hsl(e, t, n) { var r, i, o = Math.min(e /= 255, t /= 255, n /= 255), a = Math.max(e, t, n), s = a - o, l = (a + o) / 2; return s ? (i = l < .5 ? s / (a + o) : s / (2 - a - o), r = e == a ? (t - n) / s + (t < n ? 6 : 0) : t == a ? (n - e) / s + 2 : (e - t) / s + 4, r *= 60) : (r = NaN, i = l > 0 && l < 1 ? 0 : r), new d3_hsl(r, i, l) } function d3_rgb_lab(e, t, n) { var r = d3_xyz_lab((.4124564 * (e = d3_rgb_xyz(e)) + .3575761 * (t = d3_rgb_xyz(t)) + .1804375 * (n = d3_rgb_xyz(n))) / W), i = d3_xyz_lab((.2126729 * e + .7151522 * t + .072175 * n) / Y); return d3_lab(116 * i - 16, 500 * (r - i), 200 * (i - d3_xyz_lab((.0193339 * e + .119192 * t + .9503041 * n) / Z))) } function d3_rgb_xyz(e) { return (e /= 255) <= .04045 ? e / 12.92 : Math.pow((e + .055) / 1.055, 2.4) } function d3_rgb_parseNumber(e) { var t = parseFloat(e); return "%" === e.charAt(e.length - 1) ? Math.round(2.55 * t) : t } X.brighter = function (e) { e = Math.pow(.7, arguments.length ? e : 1); var t = this.r, n = this.g, r = this.b, i = 30; return t || n || r ? (t && t < i && (t = i), n && n < i && (n = i), r && r < i && (r = i), new d3_rgb(Math.min(255, t / e), Math.min(255, n / e), Math.min(255, r / e))) : new d3_rgb(i, i, i) }, X.darker = function (e) { return new d3_rgb((e = Math.pow(.7, arguments.length ? e : 1)) * this.r, e * this.g, e * this.b) }, X.hsl = function () { return d3_rgb_hsl(this.r, this.g, this.b) }, X.toString = function () { return "#" + d3_rgb_hex(this.r) + d3_rgb_hex(this.g) + d3_rgb_hex(this.b) }; var J = o.map({ aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 }); function d3_functor(e) { return "function" == typeof e ? e : function () { return e } } function d3_xhrType(e) { return function (t, n, r) { return 2 === arguments.length && "function" == typeof n && (r = n, n = null), d3_xhr(t, n, e, r) } } function d3_xhr(e, t, n, r) { var i = {}, a = o.dispatch("beforesend", "progress", "load", "error"), l = {}, u = new XMLHttpRequest, c = null; function respond() { var e, t = u.status; if (!t && function d3_xhrHasResponse(e) { var t = e.responseType; return t && "text" !== t ? e.response : e.responseText }(u) || t >= 200 && t < 300 || 304 === t) { try { e = n.call(i, u) } catch (e) { return void a.error.call(i, e) } a.load.call(i, e) } else a.error.call(i, u) } return !this.XDomainRequest || "withCredentials" in u || !/^(http(s)?:)?\/\//.test(e) || (u = new XDomainRequest), "onload" in u ? u.onload = u.onerror = respond : u.onreadystatechange = function () { u.readyState > 3 && respond() }, u.onprogress = function (e) { var t = o.event; o.event = e; try { a.progress.call(i, u) } finally { o.event = t } }, i.header = function (e, t) { return e = (e + "").toLowerCase(), arguments.length < 2 ? l[e] : (null == t ? delete l[e] : l[e] = t + "", i) }, i.mimeType = function (e) { return arguments.length ? (t = null == e ? null : e + "", i) : t }, i.responseType = function (e) { return arguments.length ? (c = e, i) : c }, i.response = function (e) { return n = e, i }, ["get", "post"].forEach(function (e) { i[e] = function () { return i.send.apply(i, [e].concat(s(arguments))) } }), i.send = function (n, r, o) { if (2 === arguments.length && "function" == typeof r && (o = r, r = null), u.open(n, e, !0), null == t || "accept" in l || (l.accept = t + ",*/*"), u.setRequestHeader) for (var s in l) u.setRequestHeader(s, l[s]); return null != t && u.overrideMimeType && u.overrideMimeType(t), null != c && (u.responseType = c), null != o && i.on("error", o).on("load", function (e) { o(null, e) }), a.beforesend.call(i, u), u.send(null == r ? null : r), i }, i.abort = function () { return u.abort(), i }, o.rebind(i, a, "on"), null == r ? i : i.get(function d3_xhr_fixCallback(e) { return 1 === e.length ? function (t, n) { e(null == t ? n : null) } : e }(r)) } J.forEach(function (e, t) { J.set(e, d3_rgbNumber(t)) }), o.functor = d3_functor, o.xhr = d3_xhrType(d3_identity), o.dsv = function (e, t) { var n = new RegExp('["' + e + "\n]"), r = e.charCodeAt(0); function dsv(e, n, r) { arguments.length < 3 && (r = n, n = null); var i = d3_xhr(e, t, null == n ? response : typedResponse(n), r); return i.row = function (e) { return arguments.length ? i.response(null == (n = e) ? response : typedResponse(e)) : n }, i } function response(e) { return dsv.parse(e.responseText) } function typedResponse(e) { return function (t) { return dsv.parse(t.responseText, e) } } function formatRow(t) { return t.map(formatValue).join(e) } function formatValue(e) { return n.test(e) ? '"' + e.replace(/\"/g, '""') + '"' : e } return dsv.parse = function (e, t) { var n; return dsv.parseRows(e, function (e, r) { if (n) return n(e, r - 1); var i = new Function("d", "return {" + e.map(function (e, t) { return JSON.stringify(e) + ": d[" + t + "]" }).join(",") + "}"); n = t ? function (e, n) { return t(i(e), n) } : i }) }, dsv.parseRows = function (e, t) { var n, i, o = {}, a = {}, s = [], l = e.length, u = 0, c = 0; function token() { if (u >= l) return a; if (i) return i = !1, o; var t = u; if (34 === e.charCodeAt(t)) { for (var n = t; n++ < l;)if (34 === e.charCodeAt(n)) { if (34 !== e.charCodeAt(n + 1)) break; ++n } return u = n + 2, 13 === (s = e.charCodeAt(n + 1)) ? (i = !0, 10 === e.charCodeAt(n + 2) && ++u) : 10 === s && (i = !0), e.slice(t + 1, n).replace(/""/g, '"') } for (; u < l;) { var s, c = 1; if (10 === (s = e.charCodeAt(u++))) i = !0; else if (13 === s) i = !0, 10 === e.charCodeAt(u) && (++u, ++c); else if (s !== r) continue; return e.slice(t, u - c) } return e.slice(t) } for (; (n = token()) !== a;) { for (var d = []; n !== o && n !== a;)d.push(n), n = token(); t && null == (d = t(d, c++)) || s.push(d) } return s }, dsv.format = function (t) { if (Array.isArray(t[0])) return dsv.formatRows(t); var n = new d3_Set, r = []; return t.forEach(function (e) { for (var t in e) n.has(t) || r.push(n.add(t)) }), [r.map(formatValue).join(e)].concat(t.map(function (t) { return r.map(function (e) { return formatValue(t[e]) }).join(e) })).join("\n") }, dsv.formatRows = function (e) { return e.map(formatRow).join("\n") }, dsv }, o.csv = o.dsv(",", "text/csv"), o.tsv = o.dsv("\t", "text/tab-separated-values"); var Q, ee, te, ne, re = this[d3_vendorSymbol(this, "requestAnimationFrame")] || function (e) { setTimeout(e, 17) }; function d3_timer(e, t, n) { var r = arguments.length; r < 2 && (t = 0), r < 3 && (n = Date.now()); var i = { c: e, t: n + t, n: null }; return ee ? ee.n = i : Q = i, ee = i, te || (ne = clearTimeout(ne), te = 1, re(d3_timer_step)), i } function d3_timer_step() { var e = d3_timer_mark(), t = d3_timer_sweep() - e; t > 24 ? (isFinite(t) && (clearTimeout(ne), ne = setTimeout(d3_timer_step, t)), te = 0) : (te = 1, re(d3_timer_step)) } function d3_timer_mark() { for (var e = Date.now(), t = Q; t;)e >= t.t && t.c(e - t.t) && (t.c = null), t = t.n; return e } function d3_timer_sweep() { for (var e, t = Q, n = 1 / 0; t;)t.c ? (t.t < n && (n = t.t), t = (e = t).n) : t = e ? e.n = t.n : Q = t.n; return ee = e, n } function d3_format_precision(e, t) { return t - (e ? Math.ceil(Math.log(e) / Math.LN10) : 1) } o.timer = function () { d3_timer.apply(this, arguments) }, o.timer.flush = function () { d3_timer_mark(), d3_timer_sweep() }, o.round = function (e, t) { return t ? Math.round(e * (t = Math.pow(10, t))) / t : Math.round(e) }; var ie = ["y", "z", "a", "f", "p", "n", "\xb5", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"].map(function d3_formatPrefix(e, t) { var n = Math.pow(10, 3 * m(8 - t)); return { scale: t > 8 ? function (e) { return e / n } : function (e) { return e * n }, symbol: e } }); o.formatPrefix = function (e, t) { var n = 0; return (e = +e) && (e < 0 && (e *= -1), t && (e = o.round(e, d3_format_precision(e, t))), n = 1 + Math.floor(1e-12 + Math.log(e) / Math.LN10), n = Math.max(-24, Math.min(24, 3 * Math.floor((n - 1) / 3)))), ie[8 + n / 3] }; var oe = /(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i, ae = o.map({ b: function (e) { return e.toString(2) }, c: function (e) { return String.fromCharCode(e) }, o: function (e) { return e.toString(8) }, x: function (e) { return e.toString(16) }, X: function (e) { return e.toString(16).toUpperCase() }, g: function (e, t) { return e.toPrecision(t) }, e: function (e, t) { return e.toExponential(t) }, f: function (e, t) { return e.toFixed(t) }, r: function (e, t) { return (e = o.round(e, d3_format_precision(e, t))).toFixed(Math.max(0, Math.min(20, d3_format_precision(e * (1 + 1e-15), t)))) } }); function d3_format_typeDefault(e) { return e + "" } var se = o.time = {}, le = Date; function d3_date_utc() { this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0]) } d3_date_utc.prototype = { getDate: function () { return this._.getUTCDate() }, getDay: function () { return this._.getUTCDay() }, getFullYear: function () { return this._.getUTCFullYear() }, getHours: function () { return this._.getUTCHours() }, getMilliseconds: function () { return this._.getUTCMilliseconds() }, getMinutes: function () { return this._.getUTCMinutes() }, getMonth: function () { return this._.getUTCMonth() }, getSeconds: function () { return this._.getUTCSeconds() }, getTime: function () { return this._.getTime() }, getTimezoneOffset: function () { return 0 }, valueOf: function () { return this._.valueOf() }, setDate: function () { ue.setUTCDate.apply(this._, arguments) }, setDay: function () { ue.setUTCDay.apply(this._, arguments) }, setFullYear: function () { ue.setUTCFullYear.apply(this._, arguments) }, setHours: function () { ue.setUTCHours.apply(this._, arguments) }, setMilliseconds: function () { ue.setUTCMilliseconds.apply(this._, arguments) }, setMinutes: function () { ue.setUTCMinutes.apply(this._, arguments) }, setMonth: function () { ue.setUTCMonth.apply(this._, arguments) }, setSeconds: function () { ue.setUTCSeconds.apply(this._, arguments) }, setTime: function () { ue.setTime.apply(this._, arguments) } }; var ue = Date.prototype; function d3_time_interval(e, t, n) { function round(t) { var n = e(t), r = offset(n, 1); return t - n < r - t ? n : r } function ceil(n) { return t(n = e(new le(n - 1)), 1), n } function offset(e, n) { return t(e = new le(+e), n), e } function range(e, r, i) { var o = ceil(e), a = []; if (i > 1) for (; o < r;)n(o) % i || a.push(new Date(+o)), t(o, 1); else for (; o < r;)a.push(new Date(+o)), t(o, 1); return a } e.floor = e, e.round = round, e.ceil = ceil, e.offset = offset, e.range = range; var r = e.utc = d3_time_interval_utc(e); return r.floor = r, r.round = d3_time_interval_utc(round), r.ceil = d3_time_interval_utc(ceil), r.offset = d3_time_interval_utc(offset), r.range = function range_utc(e, t, n) { try { le = d3_date_utc; var r = new d3_date_utc; return r._ = e, range(r, t, n) } finally { le = Date } }, e } function d3_time_interval_utc(e) { return function (t, n) { try { le = d3_date_utc; var r = new d3_date_utc; return r._ = t, e(r, n)._ } finally { le = Date } } } se.year = d3_time_interval(function (e) { return (e = se.day(e)).setMonth(0, 1), e }, function (e, t) { e.setFullYear(e.getFullYear() + t) }, function (e) { return e.getFullYear() }), se.years = se.year.range, se.years.utc = se.year.utc.range, se.day = d3_time_interval(function (e) { var t = new le(2e3, 0); return t.setFullYear(e.getFullYear(), e.getMonth(), e.getDate()), t }, function (e, t) { e.setDate(e.getDate() + t) }, function (e) { return e.getDate() - 1 }), se.days = se.day.range, se.days.utc = se.day.utc.range, se.dayOfYear = function (e) { var t = se.year(e); return Math.floor((e - t - 6e4 * (e.getTimezoneOffset() - t.getTimezoneOffset())) / 864e5) }, ["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"].forEach(function (e, t) { t = 7 - t; var n = se[e] = d3_time_interval(function (e) { return (e = se.day(e)).setDate(e.getDate() - (e.getDay() + t) % 7), e }, function (e, t) { e.setDate(e.getDate() + 7 * Math.floor(t)) }, function (e) { var n = se.year(e).getDay(); return Math.floor((se.dayOfYear(e) + (n + t) % 7) / 7) - (n !== t) }); se[e + "s"] = n.range, se[e + "s"].utc = n.utc.range, se[e + "OfYear"] = function (e) { var n = se.year(e).getDay(); return Math.floor((se.dayOfYear(e) + (n + t) % 7) / 7) } }), se.week = se.sunday, se.weeks = se.sunday.range, se.weeks.utc = se.sunday.utc.range, se.weekOfYear = se.sundayOfYear; var ce = { "-": "", _: " ", 0: "0" }, de = /^\s*\d+/, fe = /^%/; function d3_time_formatPad(e, t, n) { var r = e < 0 ? "-" : "", i = (r ? -e : e) + "", o = i.length; return r + (o < n ? new Array(n - o + 1).join(t) + i : i) } function d3_time_formatRe(e) { return new RegExp("^(?:" + e.map(o.requote).join("|") + ")", "i") } function d3_time_formatLookup(e) { for (var t = new d3_Map, n = -1, r = e.length; ++n < r;)t.set(e[n].toLowerCase(), n); return t } function d3_time_parseWeekdayNumber(e, t, n) { de.lastIndex = 0; var r = de.exec(t.slice(n, n + 1)); return r ? (e.w = +r[0], n + r[0].length) : -1 } function d3_time_parseWeekNumberSunday(e, t, n) { de.lastIndex = 0; var r = de.exec(t.slice(n)); return r ? (e.U = +r[0], n + r[0].length) : -1 } function d3_time_parseWeekNumberMonday(e, t, n) { de.lastIndex = 0; var r = de.exec(t.slice(n)); return r ? (e.W = +r[0], n + r[0].length) : -1 } function d3_time_parseFullYear(e, t, n) { de.lastIndex = 0; var r = de.exec(t.slice(n, n + 4)); return r ? (e.y = +r[0], n + r[0].length) : -1 } function d3_time_parseYear(e, t, n) { de.lastIndex = 0; var r = de.exec(t.slice(n, n + 2)); return r ? (e.y = function d3_time_expandYear(e) { return e + (e > 68 ? 1900 : 2e3) }(+r[0]), n + r[0].length) : -1 } function d3_time_parseZone(e, t, n) { return /^[+-]\d{4}$/.test(t = t.slice(n, n + 5)) ? (e.Z = -t, n + 5) : -1 } function d3_time_parseMonthNumber(e, t, n) { de.lastIndex = 0; var r = de.exec(t.slice(n, n + 2)); return r ? (e.m = r[0] - 1, n + r[0].length) : -1 } function d3_time_parseDay(e, t, n) { de.lastIndex = 0; var r = de.exec(t.slice(n, n + 2)); return r ? (e.d = +r[0], n + r[0].length) : -1 } function d3_time_parseDayOfYear(e, t, n) { de.lastIndex = 0; var r = de.exec(t.slice(n, n + 3)); return r ? (e.j = +r[0], n + r[0].length) : -1 } function d3_time_parseHour24(e, t, n) { de.lastIndex = 0; var r = de.exec(t.slice(n, n + 2)); return r ? (e.H = +r[0], n + r[0].length) : -1 } function d3_time_parseMinutes(e, t, n) { de.lastIndex = 0; var r = de.exec(t.slice(n, n + 2)); return r ? (e.M = +r[0], n + r[0].length) : -1 } function d3_time_parseSeconds(e, t, n) { de.lastIndex = 0; var r = de.exec(t.slice(n, n + 2)); return r ? (e.S = +r[0], n + r[0].length) : -1 } function d3_time_parseMilliseconds(e, t, n) { de.lastIndex = 0; var r = de.exec(t.slice(n, n + 3)); return r ? (e.L = +r[0], n + r[0].length) : -1 } function d3_time_zone(e) { var t = e.getTimezoneOffset(), n = t > 0 ? "-" : "+", r = m(t) / 60 | 0, i = m(t) % 60; return n + d3_time_formatPad(r, "0", 2) + d3_time_formatPad(i, "0", 2) } function d3_time_parseLiteralPercent(e, t, n) { fe.lastIndex = 0; var r = fe.exec(t.slice(n, n + 1)); return r ? n + r[0].length : -1 } function d3_time_formatMulti(e) { for (var t = e.length, n = -1; ++n < t;)e[n][0] = this(e[n][0]); return function (t) { for (var n = 0, r = e[n]; !r[1](t);)r = e[++n]; return r[0](t) } } o.locale = function (e) { return { numberFormat: function d3_locale_numberFormat(e) { var t = e.decimal, n = e.thousands, r = e.grouping, i = e.currency, a = r && n ? function (e, t) { for (var i = e.length, o = [], a = 0, s = r[0], l = 0; i > 0 && s > 0 && (l + s + 1 > t && (s = Math.max(1, t - l)), o.push(e.substring(i -= s, i + s)), !((l += s + 1) > t));)s = r[a = (a + 1) % r.length]; return o.reverse().join(n) } : d3_identity; return function (e) { var n = oe.exec(e), r = n[1] || " ", s = n[2] || ">", l = n[3] || "-", u = n[4] || "", c = n[5], d = +n[6], f = n[7], h = n[8], p = n[9], m = 1, g = "", v = "", y = !1, _ = !0; switch (h && (h = +h.substring(1)), (c || "0" === r && "=" === s) && (c = r = "0", s = "="), p) { case "n": f = !0, p = "g"; break; case "%": m = 100, v = "%", p = "f"; break; case "p": m = 100, v = "%", p = "r"; break; case "b": case "o": case "x": case "X": "#" === u && (g = "0" + p.toLowerCase()); case "c": _ = !1; case "d": y = !0, h = 0; break; case "s": m = -1, p = "r" }"$" === u && (g = i[0], v = i[1]), "r" != p || h || (p = "g"), null != h && ("g" == p ? h = Math.max(1, Math.min(21, h)) : "e" != p && "f" != p || (h = Math.max(0, Math.min(20, h)))), p = ae.get(p) || d3_format_typeDefault; var b = c && f; return function (e) { var n = v; if (y && e % 1) return ""; var i = e < 0 || 0 === e && 1 / e < 0 ? (e = -e, "-") : "-" === l ? "" : l; if (m < 0) { var u = o.formatPrefix(e, h); e = u.scale(e), n = u.symbol + v } else e *= m; var w, x, C = (e = p(e, h)).lastIndexOf("."); if (C < 0) { var S = _ ? e.lastIndexOf("e") : -1; S < 0 ? (w = e, x = "") : (w = e.substring(0, S), x = e.substring(S)) } else w = e.substring(0, C), x = t + e.substring(C + 1); !c && f && (w = a(w, 1 / 0)); var k = g.length + w.length + x.length + (b ? 0 : i.length), T = k < d ? new Array(k = d - k + 1).join(r) : ""; return b && (w = a(T + w, T.length ? d - x.length : 1 / 0)), i += g, e = w + x, ("<" === s ? i + e + T : ">" === s ? T + i + e : "^" === s ? T.substring(0, k >>= 1) + i + e + T.substring(k) : i + (b ? e : T + e)) + n } } }(e), timeFormat: function d3_locale_timeFormat(e) { var t = e.dateTime, n = e.date, r = e.time, i = e.periods, a = e.days, s = e.shortDays, l = e.months, u = e.shortMonths; function d3_time_format(e) { var t = e.length; function format(n) { for (var r, i, o, a = [], s = -1, l = 0; ++s < t;)37 === e.charCodeAt(s) && (a.push(e.slice(l, s)), null != (i = ce[r = e.charAt(++s)]) && (r = e.charAt(++s)), (o = _[r]) && (r = o(n, null == i ? "e" === r ? " " : "0" : i)), a.push(r), l = s + 1); return a.push(e.slice(l, s)), a.join("") } return format.parse = function (t) { var n = { y: 1900, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0, Z: null }; if (d3_time_parse(n, e, t, 0) != t.length) return null; "p" in n && (n.H = n.H % 12 + 12 * n.p); var r = null != n.Z && le !== d3_date_utc, i = new (r ? d3_date_utc : le); return "j" in n ? i.setFullYear(n.y, 0, n.j) : "W" in n || "U" in n ? ("w" in n || (n.w = "W" in n ? 1 : 0), i.setFullYear(n.y, 0, 1), i.setFullYear(n.y, 0, "W" in n ? (n.w + 6) % 7 + 7 * n.W - (i.getDay() + 5) % 7 : n.w + 7 * n.U - (i.getDay() + 6) % 7)) : i.setFullYear(n.y, n.m, n.d), i.setHours(n.H + (n.Z / 100 | 0), n.M + n.Z % 100, n.S, n.L), r ? i._ : i }, format.toString = function () { return e }, format } function d3_time_parse(e, t, n, r) { for (var i, o, a, s = 0, l = t.length, u = n.length; s < l;) { if (r >= u) return -1; if (37 === (i = t.charCodeAt(s++))) { if (a = t.charAt(s++), !(o = b[a in ce ? t.charAt(s++) : a]) || (r = o(e, n, r)) < 0) return -1 } else if (i != n.charCodeAt(r++)) return -1 } return r } d3_time_format.utc = function (e) { var t = d3_time_format(e); function format(e) { try { var n = new (le = d3_date_utc); return n._ = e, t(n) } finally { le = Date } } return format.parse = function (e) { try { le = d3_date_utc; var n = t.parse(e); return n && n._ } finally { le = Date } }, format.toString = t.toString, format }, d3_time_format.multi = d3_time_format.utc.multi = d3_time_formatMulti; var c = o.map(), d = d3_time_formatRe(a), f = d3_time_formatLookup(a), h = d3_time_formatRe(s), p = d3_time_formatLookup(s), m = d3_time_formatRe(l), g = d3_time_formatLookup(l), v = d3_time_formatRe(u), y = d3_time_formatLookup(u); i.forEach(function (e, t) { c.set(e.toLowerCase(), t) }); var _ = { a: function (e) { return s[e.getDay()] }, A: function (e) { return a[e.getDay()] }, b: function (e) { return u[e.getMonth()] }, B: function (e) { return l[e.getMonth()] }, c: d3_time_format(t), d: function (e, t) { return d3_time_formatPad(e.getDate(), t, 2) }, e: function (e, t) { return d3_time_formatPad(e.getDate(), t, 2) }, H: function (e, t) { return d3_time_formatPad(e.getHours(), t, 2) }, I: function (e, t) { return d3_time_formatPad(e.getHours() % 12 || 12, t, 2) }, j: function (e, t) { return d3_time_formatPad(1 + se.dayOfYear(e), t, 3) }, L: function (e, t) { return d3_time_formatPad(e.getMilliseconds(), t, 3) }, m: function (e, t) { return d3_time_formatPad(e.getMonth() + 1, t, 2) }, M: function (e, t) { return d3_time_formatPad(e.getMinutes(), t, 2) }, p: function (e) { return i[+(e.getHours() >= 12)] }, S: function (e, t) { return d3_time_formatPad(e.getSeconds(), t, 2) }, U: function (e, t) { return d3_time_formatPad(se.sundayOfYear(e), t, 2) }, w: function (e) { return e.getDay() }, W: function (e, t) { return d3_time_formatPad(se.mondayOfYear(e), t, 2) }, x: d3_time_format(n), X: d3_time_format(r), y: function (e, t) { return d3_time_formatPad(e.getFullYear() % 100, t, 2) }, Y: function (e, t) { return d3_time_formatPad(e.getFullYear() % 1e4, t, 4) }, Z: d3_time_zone, "%": function () { return "%" } }, b = { a: function d3_time_parseWeekdayAbbrev(e, t, n) { h.lastIndex = 0; var r = h.exec(t.slice(n)); return r ? (e.w = p.get(r[0].toLowerCase()), n + r[0].length) : -1 }, A: function d3_time_parseWeekday(e, t, n) { d.lastIndex = 0; var r = d.exec(t.slice(n)); return r ? (e.w = f.get(r[0].toLowerCase()), n + r[0].length) : -1 }, b: function d3_time_parseMonthAbbrev(e, t, n) { v.lastIndex = 0; var r = v.exec(t.slice(n)); return r ? (e.m = y.get(r[0].toLowerCase()), n + r[0].length) : -1 }, B: function d3_time_parseMonth(e, t, n) { m.lastIndex = 0; var r = m.exec(t.slice(n)); return r ? (e.m = g.get(r[0].toLowerCase()), n + r[0].length) : -1 }, c: function d3_time_parseLocaleFull(e, t, n) { return d3_time_parse(e, _.c.toString(), t, n) }, d: d3_time_parseDay, e: d3_time_parseDay, H: d3_time_parseHour24, I: d3_time_parseHour24, j: d3_time_parseDayOfYear, L: d3_time_parseMilliseconds, m: d3_time_parseMonthNumber, M: d3_time_parseMinutes, p: function d3_time_parseAmPm(e, t, n) { var r = c.get(t.slice(n, n += 2).toLowerCase()); return null == r ? -1 : (e.p = r, n) }, S: d3_time_parseSeconds, U: d3_time_parseWeekNumberSunday, w: d3_time_parseWeekdayNumber, W: d3_time_parseWeekNumberMonday, x: function d3_time_parseLocaleDate(e, t, n) { return d3_time_parse(e, _.x.toString(), t, n) }, X: function d3_time_parseLocaleTime(e, t, n) { return d3_time_parse(e, _.X.toString(), t, n) }, y: d3_time_parseYear, Y: d3_time_parseFullYear, Z: d3_time_parseZone, "%": d3_time_parseLiteralPercent }; return d3_time_format }(e) } }; var he = o.locale({ decimal: ".", thousands: ",", grouping: [3], currency: ["$", ""], dateTime: "%a %b %e %X %Y", date: "%m/%d/%Y", time: "%H:%M:%S", periods: ["AM", "PM"], days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"] }); function d3_adder() { } o.format = he.numberFormat, o.geo = {}, d3_adder.prototype = { s: 0, t: 0, add: function (e) { d3_adderSum(e, this.t, pe), d3_adderSum(pe.s, this.s, this), this.s ? this.t += pe.t : this.s = pe.t }, reset: function () { this.s = this.t = 0 }, valueOf: function () { return this.s } }; var pe = new d3_adder; function d3_adderSum(e, t, n) { var r = n.s = e + t, i = r - e, o = r - i; n.t = e - o + (t - i) } function d3_geo_streamGeometry(e, t) { e && ge.hasOwnProperty(e.type) && ge[e.type](e, t) } o.geo.stream = function (e, t) { e && me.hasOwnProperty(e.type) ? me[e.type](e, t) : d3_geo_streamGeometry(e, t) }; var me = { Feature: function (e, t) { d3_geo_streamGeometry(e.geometry, t) }, FeatureCollection: function (e, t) { for (var n = e.features, r = -1, i = n.length; ++r < i;)d3_geo_streamGeometry(n[r].geometry, t) } }, ge = { Sphere: function (e, t) { t.sphere() }, Point: function (e, t) { e = e.coordinates, t.point(e[0], e[1], e[2]) }, MultiPoint: function (e, t) { for (var n = e.coordinates, r = -1, i = n.length; ++r < i;)e = n[r], t.point(e[0], e[1], e[2]) }, LineString: function (e, t) { d3_geo_streamLine(e.coordinates, t, 0) }, MultiLineString: function (e, t) { for (var n = e.coordinates, r = -1, i = n.length; ++r < i;)d3_geo_streamLine(n[r], t, 0) }, Polygon: function (e, t) { d3_geo_streamPolygon(e.coordinates, t) }, MultiPolygon: function (e, t) { for (var n = e.coordinates, r = -1, i = n.length; ++r < i;)d3_geo_streamPolygon(n[r], t) }, GeometryCollection: function (e, t) { for (var n = e.geometries, r = -1, i = n.length; ++r < i;)d3_geo_streamGeometry(n[r], t) } }; function d3_geo_streamLine(e, t, n) { var r, i = -1, o = e.length - n; for (t.lineStart(); ++i < o;)r = e[i], t.point(r[0], r[1], r[2]); t.lineEnd() } function d3_geo_streamPolygon(e, t) { var n = -1, r = e.length; for (t.polygonStart(); ++n < r;)d3_geo_streamLine(e[n], t, 1); t.polygonEnd() } o.geo.area = function (e) { return ve = 0, o.geo.stream(e, Ae), ve }; var ve, ye, _e, be, we, xe, Ce, Se, ke, Te, Le, Me, Ee = new d3_adder, Ae = { sphere: function () { ve += 4 * D }, point: d3_noop, lineStart: d3_noop, lineEnd: d3_noop, polygonStart: function () { Ee.reset(), Ae.lineStart = d3_geo_areaRingStart }, polygonEnd: function () { var e = 2 * Ee; ve += e < 0 ? 4 * D + e : e, Ae.lineStart = Ae.lineEnd = Ae.point = d3_noop } }; function d3_geo_areaRingStart() { var e, t, n, r, i; function nextPoint(e, t) { t = t * $ / 2 + D / 4; var o = (e *= $) - n, a = o >= 0 ? 1 : -1, s = a * o, l = Math.cos(t), u = Math.sin(t), c = i * u, d = r * l + c * Math.cos(s), f = c * a * Math.sin(s); Ee.add(Math.atan2(f, d)), n = e, r = l, i = u } Ae.point = function (o, a) { Ae.point = nextPoint, n = (e = o) * $, r = Math.cos(a = (t = a) * $ / 2 + D / 4), i = Math.sin(a) }, Ae.lineEnd = function () { nextPoint(e, t) } } function d3_geo_cartesian(e) { var t = e[0], n = e[1], r = Math.cos(n); return [r * Math.cos(t), r * Math.sin(t), Math.sin(n)] } function d3_geo_cartesianDot(e, t) { return e[0] * t[0] + e[1] * t[1] + e[2] * t[2] } function d3_geo_cartesianCross(e, t) { return [e[1] * t[2] - e[2] * t[1], e[2] * t[0] - e[0] * t[2], e[0] * t[1] - e[1] * t[0]] } function d3_geo_cartesianAdd(e, t) { e[0] += t[0], e[1] += t[1], e[2] += t[2] } function d3_geo_cartesianScale(e, t) { return [e[0] * t, e[1] * t, e[2] * t] } function d3_geo_cartesianNormalize(e) { var t = Math.sqrt(e[0] * e[0] + e[1] * e[1] + e[2] * e[2]); e[0] /= t, e[1] /= t, e[2] /= t } function d3_geo_spherical(e) { return [Math.atan2(e[1], e[0]), d3_asin(e[2])] } function d3_geo_sphericalEqual(e, t) { return m(e[0] - t[0]) < R && m(e[1] - t[1]) < R } o.geo.bounds = function () { var e, t, n, r, i, a, s, l, u, c, d, f = { point: point, lineStart: lineStart, lineEnd: lineEnd, polygonStart: function () { f.point = ringPoint, f.lineStart = ringStart, f.lineEnd = ringEnd, u = 0, Ae.polygonStart() }, polygonEnd: function () { Ae.polygonEnd(), f.point = point, f.lineStart = lineStart, f.lineEnd = lineEnd, Ee < 0 ? (e = -(n = 180), t = -(r = 90)) : u > R ? r = 90 : u < -R && (t = -90), d[0] = e, d[1] = n } }; function point(i, o) { c.push(d = [e = i, n = i]), o < t && (t = o), o > r && (r = o) } function linePoint(o, a) { var s = d3_geo_cartesian([o * $, a * $]); if (l) { var u = d3_geo_cartesianCross(l, s), c = d3_geo_cartesianCross([u[1], -u[0], 0], u); d3_geo_cartesianNormalize(c), c = d3_geo_spherical(c); var d = o - i, f = d > 0 ? 1 : -1, h = c[0] * B * f, p = m(d) > 180; if (p ^ (f * i < h && h < f * o)) (g = c[1] * B) > r && (r = g); else if (p ^ (f * i < (h = (h + 360) % 360 - 180) && h < f * o)) { var g; (g = -c[1] * B) < t && (t = g) } else a < t && (t = a), a > r && (r = a); p ? o < i ? angle(e, o) > angle(e, n) && (n = o) : angle(o, n) > angle(e, n) && (e = o) : n >= e ? (o < e && (e = o), o > n && (n = o)) : o > i ? angle(e, o) > angle(e, n) && (n = o) : angle(o, n) > angle(e, n) && (e = o) } else point(o, a); l = s, i = o } function lineStart() { f.point = linePoint } function lineEnd() { d[0] = e, d[1] = n, f.point = point, l = null } function ringPoint(e, t) { if (l) { var n = e - i; u += m(n) > 180 ? n + (n > 0 ? 360 : -360) : n } else a = e, s = t; Ae.point(e, t), linePoint(e, t) } function ringStart() { Ae.lineStart() } function ringEnd() { ringPoint(a, s), Ae.lineEnd(), m(u) > R && (e = -(n = 180)), d[0] = e, d[1] = n, l = null } function angle(e, t) { return (t -= e) < 0 ? t + 360 : t } function compareRanges(e, t) { return e[0] - t[0] } function withinRange(e, t) { return t[0] <= t[1] ? t[0] <= e && e <= t[1] : e < t[0] || t[1] < e } return function (i) { if (r = n = -(e = t = 1 / 0), c = [], o.geo.stream(i, f), u = c.length) { c.sort(compareRanges); for (var a = 1, s = [m = c[0]]; a < u; ++a)withinRange((h = c[a])[0], m) || withinRange(h[1], m) ? (angle(m[0], h[1]) > angle(m[0], m[1]) && (m[1] = h[1]), angle(h[0], m[1]) > angle(m[0], m[1]) && (m[0] = h[0])) : s.push(m = h); for (var l, u, h, p = -1 / 0, m = (a = 0, s[u = s.length - 1]); a <= u; m = h, ++a)h = s[a], (l = angle(m[1], h[0])) > p && (p = l, e = h[0], n = m[1]) } return c = d = null, e === 1 / 0 || t === 1 / 0 ? [[NaN, NaN], [NaN, NaN]] : [[e, t], [n, r]] } }(), o.geo.centroid = function (e) { ye = _e = be = we = xe = Ce = Se = ke = Te = Le = Me = 0, o.geo.stream(e, Pe); var t = Te, n = Le, r = Me, i = t * t + n * n + r * r; return i < O && (t = Ce, n = Se, r = ke, _e < R && (t = be, n = we, r = xe), (i = t * t + n * n + r * r) < O) ? [NaN, NaN] : [Math.atan2(n, t) * B, d3_asin(r / Math.sqrt(i)) * B] }; var Pe = { sphere: d3_noop, point: d3_geo_centroidPoint, lineStart: d3_geo_centroidLineStart, lineEnd: d3_geo_centroidLineEnd, polygonStart: function () { Pe.lineStart = d3_geo_centroidRingStart }, polygonEnd: function () { Pe.lineStart = d3_geo_centroidLineStart } }; function d3_geo_centroidPoint(e, t) { e *= $; var n = Math.cos(t *= $); d3_geo_centroidPointXYZ(n * Math.cos(e), n * Math.sin(e), Math.sin(t)) } function d3_geo_centroidPointXYZ(e, t, n) { be += (e - be) / ++ye, we += (t - we) / ye, xe += (n - xe) / ye } function d3_geo_centroidLineStart() { var e, t, n; function nextPoint(r, i) { r *= $; var o = Math.cos(i *= $), a = o * Math.cos(r), s = o * Math.sin(r), l = Math.sin(i), u = Math.atan2(Math.sqrt((u = t * l - n * s) * u + (u = n * a - e * l) * u + (u = e * s - t * a) * u), e * a + t * s + n * l); _e += u, Ce += u * (e + (e = a)), Se += u * (t + (t = s)), ke += u * (n + (n = l)), d3_geo_centroidPointXYZ(e, t, n) } Pe.point = function (r, i) { r *= $; var o = Math.cos(i *= $); e = o * Math.cos(r), t = o * Math.sin(r), n = Math.sin(i), Pe.point = nextPoint, d3_geo_centroidPointXYZ(e, t, n) } } function d3_geo_centroidLineEnd() { Pe.point = d3_geo_centroidPoint } function d3_geo_centroidRingStart() { var e, t, n, r, i; function nextPoint(e, t) { e *= $; var o = Math.cos(t *= $), a = o * Math.cos(e), s = o * Math.sin(e), l = Math.sin(t), u = r * l - i * s, c = i * a - n * l, d = n * s - r * a, f = Math.sqrt(u * u + c * c + d * d), h = n * a + r * s + i * l, p = f && -d3_acos(h) / f, m = Math.atan2(f, h); Te += p * u, Le += p * c, Me += p * d, _e += m, Ce += m * (n + (n = a)), Se += m * (r + (r = s)), ke += m * (i + (i = l)), d3_geo_centroidPointXYZ(n, r, i) } Pe.point = function (o, a) { e = o, t = a, Pe.point = nextPoint, o *= $; var s = Math.cos(a *= $); n = s * Math.cos(o), r = s * Math.sin(o), i = Math.sin(a), d3_geo_centroidPointXYZ(n, r, i) }, Pe.lineEnd = function () { nextPoint(e, t), Pe.lineEnd = d3_geo_centroidLineEnd, Pe.point = d3_geo_centroidPoint } } function d3_geo_compose(e, t) { function compose(n, r) { return n = e(n, r), t(n[0], n[1]) } return e.invert && t.invert && (compose.invert = function (n, r) { return (n = t.invert(n, r)) && e.invert(n[0], n[1]) }), compose } function d3_true() { return !0 } function d3_geo_clipPolygon(e, t, n, r, i) { var o = [], a = []; if (e.forEach(function (e) { if (!((t = e.length - 1) <= 0)) { var t, n = e[0], r = e[t]; if (d3_geo_sphericalEqual(n, r)) { i.lineStart(); for (var s = 0; s < t; ++s)i.point((n = e[s])[0], n[1]); i.lineEnd() } else { var l = new d3_geo_clipPolygonIntersection(n, e, null, !0), u = new d3_geo_clipPolygonIntersection(n, null, l, !1); l.o = u, o.push(l), a.push(u), u = new d3_geo_clipPolygonIntersection(r, null, l = new d3_geo_clipPolygonIntersection(r, e, null, !1), !0), l.o = u, o.push(l), a.push(u) } } }), a.sort(t), d3_geo_clipPolygonLinkCircular(o), d3_geo_clipPolygonLinkCircular(a), o.length) { for (var s = 0, l = n, u = a.length; s < u; ++s)a[s].e = l = !l; for (var c, d, f = o[0]; ;) { for (var h = f, p = !0; h.v;)if ((h = h.n) === f) return; c = h.z, i.lineStart(); do { if (h.v = h.o.v = !0, h.e) { if (p) for (s = 0, u = c.length; s < u; ++s)i.point((d = c[s])[0], d[1]); else r(h.x, h.n.x, 1, i); h = h.n } else { if (p) for (s = (c = h.p.z).length - 1; s >= 0; --s)i.point((d = c[s])[0], d[1]); else r(h.x, h.p.x, -1, i); h = h.p } c = (h = h.o).z, p = !p } while (!h.v); i.lineEnd() } } } function d3_geo_clipPolygonLinkCircular(e) { if (t = e.length) { for (var t, n, r = 0, i = e[0]; ++r < t;)i.n = n = e[r], n.p = i, i = n; i.n = n = e[0], n.p = i } } function d3_geo_clipPolygonIntersection(e, t, n, r) { this.x = e, this.z = t, this.o = n, this.e = r, this.v = !1, this.n = this.p = null } function d3_geo_clip(e, t, n, r) { return function (i, a) { var s, l = t(a), u = i.invert(r[0], r[1]), c = { point: point, lineStart: lineStart, lineEnd: lineEnd, polygonStart: function () { c.point = pointRing, c.lineStart = ringStart, c.lineEnd = ringEnd, s = [], d = [] }, polygonEnd: function () { c.point = point, c.lineStart = lineStart, c.lineEnd = lineEnd, s = o.merge(s); var e = function d3_geo_pointInPolygon(e, t) { var n = e[0], r = e[1], i = [Math.sin(n), -Math.cos(n), 0], o = 0, a = 0; Ee.reset(); for (var s = 0, l = t.length; s < l; ++s) { var u = t[s], c = u.length; if (c) for (var d = u[0], f = d[0], h = d[1] / 2 + D / 4, p = Math.sin(h), m = Math.cos(h), g = 1; ;) { g === c && (g = 0); var v = (e = u[g])[0], y = e[1] / 2 + D / 4, _ = Math.sin(y), b = Math.cos(y), w = v - f, x = w >= 0 ? 1 : -1, C = x * w, S = C > D, k = p * _; if (Ee.add(Math.atan2(k * x * Math.sin(C), m * b + k * Math.cos(C))), o += S ? w + x * F : w, S ^ f >= n ^ v >= n) { var T = d3_geo_cartesianCross(d3_geo_cartesian(d), d3_geo_cartesian(e)); d3_geo_cartesianNormalize(T); var L = d3_geo_cartesianCross(i, T); d3_geo_cartesianNormalize(L); var M = (S ^ w >= 0 ? -1 : 1) * d3_asin(L[2]); (r > M || r === M && (T[0] || T[1])) && (a += S ^ w >= 0 ? 1 : -1) } if (!g++) break; f = v, p = _, m = b, d = e } } return (o < -R || o < R && Ee < -R) ^ 1 & a }(u, d); s.length ? (m || (a.polygonStart(), m = !0), d3_geo_clipPolygon(s, d3_geo_clipSort, e, n, a)) : e && (m || (a.polygonStart(), m = !0), a.lineStart(), n(null, null, 1, a), a.lineEnd()), m && (a.polygonEnd(), m = !1), s = d = null }, sphere: function () { a.polygonStart(), a.lineStart(), n(null, null, 1, a), a.lineEnd(), a.polygonEnd() } }; function point(t, n) { var r = i(t, n); e(t = r[0], n = r[1]) && a.point(t, n) } function pointLine(e, t) { var n = i(e, t); l.point(n[0], n[1]) } function lineStart() { c.point = pointLine, l.lineStart() } function lineEnd() { c.point = point, l.lineEnd() } var d, f, h = d3_geo_clipBufferListener(), p = t(h), m = !1; function pointRing(e, t) { f.push([e, t]); var n = i(e, t); p.point(n[0], n[1]) } function ringStart() { p.lineStart(), f = [] } function ringEnd() { pointRing(f[0][0], f[0][1]), p.lineEnd(); var e, t = p.clean(), n = h.buffer(), r = n.length; if (f.pop(), d.push(f), f = null, r) if (1 & t) { var i, o = -1; if ((r = (e = n[0]).length - 1) > 0) { for (m || (a.polygonStart(), m = !0), a.lineStart(); ++o < r;)a.point((i = e[o])[0], i[1]); a.lineEnd() } } else r > 1 && 2 & t && n.push(n.pop().concat(n.shift())), s.push(n.filter(d3_geo_clipSegmentLength1)) } return c } } function d3_geo_clipSegmentLength1(e) { return e.length > 1 } function d3_geo_clipBufferListener() { var e, t = []; return { lineStart: function () { t.push(e = []) }, point: function (t, n) { e.push([t, n]) }, lineEnd: d3_noop, buffer: function () { var n = t; return t = [], e = null, n }, rejoin: function () { t.length > 1 && t.push(t.pop().concat(t.shift())) } } } function d3_geo_clipSort(e, t) { return ((e = e.x)[0] < 0 ? e[1] - N - R : N - e[1]) - ((t = t.x)[0] < 0 ? t[1] - N - R : N - t[1]) } var Re = d3_geo_clip(d3_true, function d3_geo_clipAntimeridianLine(e) { var t, n = NaN, r = NaN, i = NaN; return { lineStart: function () { e.lineStart(), t = 1 }, point: function (o, a) { var s = o > 0 ? D : -D, l = m(o - n); m(l - D) < R ? (e.point(n, r = (r + a) / 2 > 0 ? N : -N), e.point(i, r), e.lineEnd(), e.lineStart(), e.point(s, r), e.point(o, r), t = 0) : i !== s && l >= D && (m(n - i) < R && (n -= i * R), m(o - s) < R && (o -= s * R), r = function d3_geo_clipAntimeridianIntersect(e, t, n, r) { var i, o, a = Math.sin(e - n); return m(a) > R ? Math.atan((Math.sin(t) * (o = Math.cos(r)) * Math.sin(n) - Math.sin(r) * (i = Math.cos(t)) * Math.sin(e)) / (i * o * a)) : (t + r) / 2 }(n, r, o, a), e.point(i, r), e.lineEnd(), e.lineStart(), e.point(s, r), t = 0), e.point(n = o, r = a), i = s }, lineEnd: function () { e.lineEnd(), n = r = NaN }, clean: function () { return 2 - t } } }, function d3_geo_clipAntimeridianInterpolate(e, t, n, r) { var i; if (null == e) i = n * N, r.point(-D, i), r.point(0, i), r.point(D, i), r.point(D, 0), r.point(D, -i), r.point(0, -i), r.point(-D, -i), r.point(-D, 0), r.point(-D, i); else if (m(e[0] - t[0]) > R) { var o = e[0] < t[0] ? D : -D; i = n * o / 2, r.point(-o, i), r.point(0, i), r.point(o, i) } else r.point(t[0], t[1]) }, [-D, -D / 2]); function d3_geom_clipLine(e, t, n, r) { return function (i) { var o, a = i.a, s = i.b, l = a.x, u = a.y, c = 0, d = 1, f = s.x - l, h = s.y - u; if (o = e - l, f || !(o > 0)) { if (o /= f, f < 0) { if (o < c) return; o < d && (d = o) } else if (f > 0) { if (o > d) return; o > c && (c = o) } if (o = n - l, f || !(o < 0)) { if (o /= f, f < 0) { if (o > d) return; o > c && (c = o) } else if (f > 0) { if (o < c) return; o < d && (d = o) } if (o = t - u, h || !(o > 0)) { if (o /= h, h < 0) { if (o < c) return; o < d && (d = o) } else if (h > 0) { if (o > d) return; o > c && (c = o) } if (o = r - u, h || !(o < 0)) { if (o /= h, h < 0) { if (o > d) return; o > c && (c = o) } else if (h > 0) { if (o < c) return; o < d && (d = o) } return c > 0 && (i.a = { x: l + c * f, y: u + c * h }), d < 1 && (i.b = { x: l + d * f, y: u + d * h }), i } } } } } } var Oe = 1e9; function d3_geo_clipExtent(e, t, n, r) { return function (i) { var a, s, l, u, c, d, f, h, p, m, g, v = i, y = d3_geo_clipBufferListener(), _ = d3_geom_clipLine(e, t, n, r), b = { point: point, lineStart: function lineStart() { b.point = linePoint, s && s.push(l = []); m = !0, p = !1, f = h = NaN }, lineEnd: function lineEnd() { a && (linePoint(u, c), d && p && y.rejoin(), a.push(y.buffer())); b.point = point, p && i.lineEnd() }, polygonStart: function () { i = y, a = [], s = [], g = !0 }, polygonEnd: function () { i = v, a = o.merge(a); var t = function insidePolygon(e) { for (var t = 0, n = s.length, r = e[1], i = 0; i < n; ++i)for (var o, a = 1, l = s[i], u = l.length, c = l[0]; a < u; ++a)o = l[a], c[1] <= r ? o[1] > r && d3_cross2d(c, o, e) > 0 && ++t : o[1] <= r && d3_cross2d(c, o, e) < 0 && --t, c = o; return 0 !== t }([e, r]), n = g && t, u = a.length; (n || u) && (i.polygonStart(), n && (i.lineStart(), interpolate(null, null, 1, i), i.lineEnd()), u && d3_geo_clipPolygon(a, compare, t, interpolate, i), i.polygonEnd()), a = s = l = null } }; function interpolate(i, o, a, s) { var l = 0, u = 0; if (null == i || (l = corner(i, a)) !== (u = corner(o, a)) || comparePoints(i, o) < 0 ^ a > 0) do { s.point(0 === l || 3 === l ? e : n, l > 1 ? r : t) } while ((l = (l + a + 4) % 4) !== u); else s.point(o[0], o[1]) } function pointVisible(i, o) { return e <= i && i <= n && t <= o && o <= r } function point(e, t) { pointVisible(e, t) && i.point(e, t) } function linePoint(e, t) { var n = pointVisible(e = Math.max(-Oe, Math.min(Oe, e)), t = Math.max(-Oe, Math.min(Oe, t))); if (s && l.push([e, t]), m) u = e, c = t, d = n, m = !1, n && (i.lineStart(), i.point(e, t)); else if (n && p) i.point(e, t); else { var r = { a: { x: f, y: h }, b: { x: e, y: t } }; _(r) ? (p || (i.lineStart(), i.point(r.a.x, r.a.y)), i.point(r.b.x, r.b.y), n || i.lineEnd(), g = !1) : n && (i.lineStart(), i.point(e, t), g = !1) } f = e, h = t, p = n } return b }; function corner(r, i) { return m(r[0] - e) < R ? i > 0 ? 0 : 3 : m(r[0] - n) < R ? i > 0 ? 2 : 1 : m(r[1] - t) < R ? i > 0 ? 1 : 0 : i > 0 ? 3 : 2 } function compare(e, t) { return comparePoints(e.x, t.x) } function comparePoints(e, t) { var n = corner(e, 1), r = corner(t, 1); return n !== r ? n - r : 0 === n ? t[1] - e[1] : 1 === n ? e[0] - t[0] : 2 === n ? e[1] - t[1] : t[0] - e[0] } } function d3_geo_conic(e) { var t = 0, n = D / 3, r = d3_geo_projectionMutator(e), i = r(t, n); return i.parallels = function (e) { return arguments.length ? r(t = e[0] * D / 180, n = e[1] * D / 180) : [t / D * 180, n / D * 180] }, i } function d3_geo_conicEqualArea(e, t) { var n = Math.sin(e), r = (n + Math.sin(t)) / 2, i = 1 + n * (2 * r - n), o = Math.sqrt(i) / r; function forward(e, t) { var n = Math.sqrt(i - 2 * r * Math.sin(t)) / r; return [n * Math.sin(e *= r), o - n * Math.cos(e)] } return forward.invert = function (e, t) { var n = o - t; return [Math.atan2(e, n) / r, d3_asin((i - (e * e + n * n) * r * r) / (2 * r))] }, forward } o.geo.clipExtent = function () { var e, t, n, r, i, o, a = { stream: function (e) { return i && (i.valid = !1), (i = o(e)).valid = !0, i }, extent: function (s) { return arguments.length ? (o = d3_geo_clipExtent(e = +s[0][0], t = +s[0][1], n = +s[1][0], r = +s[1][1]), i && (i.valid = !1, i = null), a) : [[e, t], [n, r]] } }; return a.extent([[0, 0], [960, 500]]) }, (o.geo.conicEqualArea = function () { return d3_geo_conic(d3_geo_conicEqualArea) }).raw = d3_geo_conicEqualArea, o.geo.albers = function () { return o.geo.conicEqualArea().rotate([96, 0]).center([-.6, 38.7]).parallels([29.5, 45.5]).scale(1070) }, o.geo.albersUsa = function () { var e, t, n, r, i = o.geo.albers(), a = o.geo.conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]), s = o.geo.conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]), l = { point: function (t, n) { e = [t, n] } }; function albersUsa(i) { var o = i[0], a = i[1]; return e = null, t(o, a), e || (n(o, a), e) || r(o, a), e } return albersUsa.invert = function (e) { var t = i.scale(), n = i.translate(), r = (e[0] - n[0]) / t, o = (e[1] - n[1]) / t; return (o >= .12 && o < .234 && r >= -.425 && r < -.214 ? a : o >= .166 && o < .234 && r >= -.214 && r < -.115 ? s : i).invert(e) }, albersUsa.stream = function (e) { var t = i.stream(e), n = a.stream(e), r = s.stream(e); return { point: function (e, i) { t.point(e, i), n.point(e, i), r.point(e, i) }, sphere: function () { t.sphere(), n.sphere(), r.sphere() }, lineStart: function () { t.lineStart(), n.lineStart(), r.lineStart() }, lineEnd: function () { t.lineEnd(), n.lineEnd(), r.lineEnd() }, polygonStart: function () { t.polygonStart(), n.polygonStart(), r.polygonStart() }, polygonEnd: function () { t.polygonEnd(), n.polygonEnd(), r.polygonEnd() } } }, albersUsa.precision = function (e) { return arguments.length ? (i.precision(e), a.precision(e), s.precision(e), albersUsa) : i.precision() }, albersUsa.scale = function (e) { return arguments.length ? (i.scale(e), a.scale(.35 * e), s.scale(e), albersUsa.translate(i.translate())) : i.scale() }, albersUsa.translate = function (e) { if (!arguments.length) return i.translate(); var o = i.scale(), u = +e[0], c = +e[1]; return t = i.translate(e).clipExtent([[u - .455 * o, c - .238 * o], [u + .455 * o, c + .238 * o]]).stream(l).point, n = a.translate([u - .307 * o, c + .201 * o]).clipExtent([[u - .425 * o + R, c + .12 * o + R], [u - .214 * o - R, c + .234 * o - R]]).stream(l).point, r = s.translate([u - .205 * o, c + .212 * o]).clipExtent([[u - .214 * o + R, c + .166 * o + R], [u - .115 * o - R, c + .234 * o - R]]).stream(l).point, albersUsa }, albersUsa.scale(1070) }; var De, Fe, Ie, Ne, $e, Be, ze = { point: d3_noop, lineStart: d3_noop, lineEnd: d3_noop, polygonStart: function () { Fe = 0, ze.lineStart = d3_geo_pathAreaRingStart }, polygonEnd: function () { ze.lineStart = ze.lineEnd = ze.point = d3_noop, De += m(Fe / 2) } }; function d3_geo_pathAreaRingStart() { var e, t, n, r; function nextPoint(e, t) { Fe += r * e - n * t, n = e, r = t } ze.point = function (i, o) { ze.point = nextPoint, e = n = i, t = r = o }, ze.lineEnd = function () { nextPoint(e, t) } } var je = { point: function d3_geo_pathBoundsPoint(e, t) { e < Ie && (Ie = e); e > $e && ($e = e); t < Ne && (Ne = t); t > Be && (Be = t) }, lineStart: d3_noop, lineEnd: d3_noop, polygonStart: d3_noop, polygonEnd: d3_noop }; function d3_geo_pathBufferCircle(e) { return "m0," + e + "a" + e + "," + e + " 0 1,1 0," + -2 * e + "a" + e + "," + e + " 0 1,1 0," + 2 * e + "z" } var Ue, qe = { point: d3_geo_pathCentroidPoint, lineStart: d3_geo_pathCentroidLineStart, lineEnd: d3_geo_pathCentroidLineEnd, polygonStart: function () { qe.lineStart = d3_geo_pathCentroidRingStart }, polygonEnd: function () { qe.point = d3_geo_pathCentroidPoint, qe.lineStart = d3_geo_pathCentroidLineStart, qe.lineEnd = d3_geo_pathCentroidLineEnd } }; function d3_geo_pathCentroidPoint(e, t) { be += e, we += t, ++xe } function d3_geo_pathCentroidLineStart() { var e, t; function nextPoint(n, r) { var i = n - e, o = r - t, a = Math.sqrt(i * i + o * o); Ce += a * (e + n) / 2, Se += a * (t + r) / 2, ke += a, d3_geo_pathCentroidPoint(e = n, t = r) } qe.point = function (n, r) { qe.point = nextPoint, d3_geo_pathCentroidPoint(e = n, t = r) } } function d3_geo_pathCentroidLineEnd() { qe.point = d3_geo_pathCentroidPoint } function d3_geo_pathCentroidRingStart() { var e, t, n, r; function nextPoint(e, t) { var i = e - n, o = t - r, a = Math.sqrt(i * i + o * o); Ce += a * (n + e) / 2, Se += a * (r + t) / 2, ke += a, Te += (a = r * e - n * t) * (n + e), Le += a * (r + t), Me += 3 * a, d3_geo_pathCentroidPoint(n = e, r = t) } qe.point = function (i, o) { qe.point = nextPoint, d3_geo_pathCentroidPoint(e = n = i, t = r = o) }, qe.lineEnd = function () { nextPoint(e, t) } } function d3_geo_resample(e) { var t = .5, n = Math.cos(30 * $), r = 16; function resample(t) { return (r ? function resampleRecursive(t) { var n, i, o, a, s, l, u, c, d, f, h, p, m = { point: point, lineStart: lineStart, lineEnd: lineEnd, polygonStart: function () { t.polygonStart(), m.lineStart = ringStart }, polygonEnd: function () { t.polygonEnd(), m.lineStart = lineStart } }; function point(n, r) { n = e(n, r), t.point(n[0], n[1]) } function lineStart() { c = NaN, m.point = linePoint, t.lineStart() } function linePoint(n, i) { var o = d3_geo_cartesian([n, i]), a = e(n, i); resampleLineTo(c, d, u, f, h, p, c = a[0], d = a[1], u = n, f = o[0], h = o[1], p = o[2], r, t), t.point(c, d) } function lineEnd() { m.point = point, t.lineEnd() } function ringStart() { lineStart(), m.point = ringPoint, m.lineEnd = ringEnd } function ringPoint(e, t) { linePoint(n = e, t), i = c, o = d, a = f, s = h, l = p, m.point = linePoint } function ringEnd() { resampleLineTo(c, d, u, f, h, p, i, o, n, a, s, l, r, t), m.lineEnd = lineEnd, lineEnd() } return m } : function resampleNone(t) { return d3_geo_transformPoint(t, function (n, r) { n = e(n, r), t.point(n[0], n[1]) }) })(t) } function resampleLineTo(r, i, o, a, s, l, u, c, d, f, h, p, g, v) { var y = u - r, _ = c - i, b = y * y + _ * _; if (b > 4 * t && g--) { var w = a + f, x = s + h, C = l + p, S = Math.sqrt(w * w + x * x + C * C), k = Math.asin(C /= S), T = m(m(C) - 1) < R || m(o - d) < R ? (o + d) / 2 : Math.atan2(x, w), L = e(T, k), M = L[0], E = L[1], A = M - r, P = E - i, O = _ * A - y * P; (O * O / b > t || m((y * A + _ * P) / b - .5) > .3 || a * f + s * h + l * p < n) && (resampleLineTo(r, i, o, a, s, l, M, E, T, w /= S, x /= S, C, g, v), v.point(M, E), resampleLineTo(M, E, T, w, x, C, u, c, d, f, h, p, g, v)) } } return resample.precision = function (e) { return arguments.length ? (r = (t = e * e) > 0 && 16, resample) : Math.sqrt(t) }, resample } function d3_geo_transform(e) { this.stream = e } function d3_geo_transformPoint(e, t) { return { point: t, sphere: function () { e.sphere() }, lineStart: function () { e.lineStart() }, lineEnd: function () { e.lineEnd() }, polygonStart: function () { e.polygonStart() }, polygonEnd: function () { e.polygonEnd() } } } function d3_geo_projection(e) { return d3_geo_projectionMutator(function () { return e })() } function d3_geo_projectionMutator(e) { var t, n, r, i, a, s, l = d3_geo_resample(function (e, n) { return [(e = t(e, n))[0] * u + i, a - e[1] * u] }), u = 150, c = 480, d = 250, f = 0, h = 0, p = 0, g = 0, v = 0, y = Re, _ = d3_identity, b = null, w = null; function projection(e) { return [(e = r(e[0] * $, e[1] * $))[0] * u + i, a - e[1] * u] } function invert(e) { return (e = r.invert((e[0] - i) / u, (a - e[1]) / u)) && [e[0] * B, e[1] * B] } function reset() { r = d3_geo_compose(n = d3_geo_rotation(p, g, v), t); var e = t(f, h); return i = c - e[0] * u, a = d + e[1] * u, invalidate() } function invalidate() { return s && (s.valid = !1, s = null), projection } return projection.stream = function (e) { return s && (s.valid = !1), (s = d3_geo_projectionRadians(y(n, l(_(e))))).valid = !0, s }, projection.clipAngle = function (e) { return arguments.length ? (y = null == e ? (b = e, Re) : function d3_geo_clipCircle(e) { var t = Math.cos(e), n = t > 0, r = m(t) > R; return d3_geo_clip(visible, function clipLine(e) { var t, i, o, a, s; return { lineStart: function () { a = o = !1, s = 1 }, point: function (l, u) { var c, d = [l, u], f = visible(l, u), h = n ? f ? 0 : code(l, u) : f ? code(l + (l < 0 ? D : -D), u) : 0; if (!t && (a = o = f) && e.lineStart(), f !== o && (c = intersect(t, d), (d3_geo_sphericalEqual(t, c) || d3_geo_sphericalEqual(d, c)) && (d[0] += R, d[1] += R, f = visible(d[0], d[1]))), f !== o) s = 0, f ? (e.lineStart(), c = intersect(d, t), e.point(c[0], c[1])) : (c = intersect(t, d), e.point(c[0], c[1]), e.lineEnd()), t = c; else if (r && t && n ^ f) { var p; h & i || !(p = intersect(d, t, !0)) || (s = 0, n ? (e.lineStart(), e.point(p[0][0], p[0][1]), e.point(p[1][0], p[1][1]), e.lineEnd()) : (e.point(p[1][0], p[1][1]), e.lineEnd(), e.lineStart(), e.point(p[0][0], p[0][1]))) } !f || t && d3_geo_sphericalEqual(t, d) || e.point(d[0], d[1]), t = d, o = f, i = h }, lineEnd: function () { o && e.lineEnd(), t = null }, clean: function () { return s | (a && o) << 1 } } }, d3_geo_circleInterpolate(e, 6 * $), n ? [0, -e] : [-D, e - D]); function visible(e, n) { return Math.cos(e) * Math.cos(n) > t } function intersect(e, n, r) { var i = [1, 0, 0], o = d3_geo_cartesianCross(d3_geo_cartesian(e), d3_geo_cartesian(n)), a = d3_geo_cartesianDot(o, o), s = o[0], l = a - s * s; if (!l) return !r && e; var u = t * a / l, c = -t * s / l, d = d3_geo_cartesianCross(i, o), f = d3_geo_cartesianScale(i, u); d3_geo_cartesianAdd(f, d3_geo_cartesianScale(o, c)); var h = d, p = d3_geo_cartesianDot(f, h), g = d3_geo_cartesianDot(h, h), v = p * p - g * (d3_geo_cartesianDot(f, f) - 1); if (!(v < 0)) { var y = Math.sqrt(v), _ = d3_geo_cartesianScale(h, (-p - y) / g); if (d3_geo_cartesianAdd(_, f), _ = d3_geo_spherical(_), !r) return _; var b, w = e[0], x = n[0], C = e[1], S = n[1]; x < w && (b = w, w = x, x = b); var k = x - w, T = m(k - D) < R; if (!T && S < C && (b = C, C = S, S = b), T || k < R ? T ? C + S > 0 ^ _[1] < (m(_[0] - w) < R ? C : S) : C <= _[1] && _[1] <= S : k > D ^ (w <= _[0] && _[0] <= x)) { var L = d3_geo_cartesianScale(h, (-p + y) / g); return d3_geo_cartesianAdd(L, f), [_, d3_geo_spherical(L)] } } } function code(t, r) { var i = n ? e : D - e, o = 0; return t < -i ? o |= 1 : t > i && (o |= 2), r < -i ? o |= 4 : r > i && (o |= 8), o } }((b = +e) * $), invalidate()) : b }, projection.clipExtent = function (e) { return arguments.length ? (w = e, _ = e ? d3_geo_clipExtent(e[0][0], e[0][1], e[1][0], e[1][1]) : d3_identity, invalidate()) : w }, projection.scale = function (e) { return arguments.length ? (u = +e, reset()) : u }, projection.translate = function (e) { return arguments.length ? (c = +e[0], d = +e[1], reset()) : [c, d] }, projection.center = function (e) { return arguments.length ? (f = e[0] % 360 * $, h = e[1] % 360 * $, reset()) : [f * B, h * B] }, projection.rotate = function (e) { return arguments.length ? (p = e[0] % 360 * $, g = e[1] % 360 * $, v = e.length > 2 ? e[2] % 360 * $ : 0, reset()) : [p * B, g * B, v * B] }, o.rebind(projection, l, "precision"), function () { return t = e.apply(this, arguments), projection.invert = t.invert && invert, reset() } } function d3_geo_projectionRadians(e) { return d3_geo_transformPoint(e, function (t, n) { e.point(t * $, n * $) }) } function d3_geo_equirectangular(e, t) { return [e, t] } function d3_geo_identityRotation(e, t) { return [e > D ? e - F : e < -D ? e + F : e, t] } function d3_geo_rotation(e, t, n) { return e ? t || n ? d3_geo_compose(d3_geo_rotation\u03bb(e), d3_geo_rotation\u03c6\u03b3(t, n)) : d3_geo_rotation\u03bb(e) : t || n ? d3_geo_rotation\u03c6\u03b3(t, n) : d3_geo_identityRotation } function d3_geo_forwardRotation\u03bb(e) { return function (t, n) { return [(t += e) > D ? t - F : t < -D ? t + F : t, n] } } function d3_geo_rotation\u03bb(e) { var t = d3_geo_forwardRotation\u03bb(e); return t.invert = d3_geo_forwardRotation\u03bb(-e), t } function d3_geo_rotation\u03c6\u03b3(e, t) { var n = Math.cos(e), r = Math.sin(e), i = Math.cos(t), o = Math.sin(t); function rotation(e, t) { var a = Math.cos(t), s = Math.cos(e) * a, l = Math.sin(e) * a, u = Math.sin(t), c = u * n + s * r; return [Math.atan2(l * i - c * o, s * n - u * r), d3_asin(c * i + l * o)] } return rotation.invert = function (e, t) { var a = Math.cos(t), s = Math.cos(e) * a, l = Math.sin(e) * a, u = Math.sin(t), c = u * i - l * o; return [Math.atan2(l * i + u * o, s * n + c * r), d3_asin(c * n - s * r)] }, rotation } function d3_geo_circleInterpolate(e, t) { var n = Math.cos(e), r = Math.sin(e); return function (i, o, a, s) { var l = a * t; null != i ? (i = d3_geo_circleAngle(n, i), o = d3_geo_circleAngle(n, o), (a > 0 ? i < o : i > o) && (i += a * F)) : (i = e + a * F, o = e - .5 * l); for (var u, c = i; a > 0 ? c > o : c < o; c -= l)s.point((u = d3_geo_spherical([n, -r * Math.cos(c), -r * Math.sin(c)]))[0], u[1]) } } function d3_geo_circleAngle(e, t) { var n = d3_geo_cartesian(t); n[0] -= e, d3_geo_cartesianNormalize(n); var r = d3_acos(-n[1]); return ((-n[2] < 0 ? -r : r) + 2 * Math.PI - R) % (2 * Math.PI) } function d3_geo_graticuleX(e, t, n) { var r = o.range(e, t - R, n).concat(t); return function (e) { return r.map(function (t) { return [e, t] }) } } function d3_geo_graticuleY(e, t, n) { var r = o.range(e, t - R, n).concat(t); return function (e) { return r.map(function (t) { return [t, e] }) } } function d3_source(e) { return e.source } function d3_target(e) { return e.target } o.geo.path = function () { var e, t, n, r, i, a = 4.5; function path(e) { return e && ("function" == typeof a && r.pointRadius(+a.apply(this, arguments)), i && i.valid || (i = n(r)), o.geo.stream(e, i)), r.result() } function reset() { return i = null, path } return path.area = function (e) { return De = 0, o.geo.stream(e, n(ze)), De }, path.centroid = function (e) { return be = we = xe = Ce = Se = ke = Te = Le = Me = 0, o.geo.stream(e, n(qe)), Me ? [Te / Me, Le / Me] : ke ? [Ce / ke, Se / ke] : xe ? [be / xe, we / xe] : [NaN, NaN] }, path.bounds = function (e) { return $e = Be = -(Ie = Ne = 1 / 0), o.geo.stream(e, n(je)), [[Ie, Ne], [$e, Be]] }, path.projection = function (t) { return arguments.length ? (n = (e = t) ? t.stream || function d3_geo_pathProjectStream(e) { var t = d3_geo_resample(function (t, n) { return e([t * B, n * B]) }); return function (e) { return d3_geo_projectionRadians(t(e)) } }(t) : d3_identity, reset()) : e }, path.context = function (e) { return arguments.length ? (r = null == (t = e) ? new function d3_geo_pathBuffer() { var e = d3_geo_pathBufferCircle(4.5), t = [], n = { point: point, lineStart: function () { n.point = pointLineStart }, lineEnd: lineEnd, polygonStart: function () { n.lineEnd = lineEndPolygon }, polygonEnd: function () { n.lineEnd = lineEnd, n.point = point }, pointRadius: function (t) { return e = d3_geo_pathBufferCircle(t), n }, result: function () { if (t.length) { var e = t.join(""); return t = [], e } } }; function point(n, r) { t.push("M", n, ",", r, e) } function pointLineStart(e, r) { t.push("M", e, ",", r), n.point = pointLine } function pointLine(e, n) { t.push("L", e, ",", n) } function lineEnd() { n.point = point } function lineEndPolygon() { t.push("Z") } return n } : new function d3_geo_pathContext(e) { var t = 4.5, n = { point: point, lineStart: function () { n.point = pointLineStart }, lineEnd: lineEnd, polygonStart: function () { n.lineEnd = lineEndPolygon }, polygonEnd: function () { n.lineEnd = lineEnd, n.point = point }, pointRadius: function (e) { return t = e, n }, result: d3_noop }; function point(n, r) { e.moveTo(n + t, r), e.arc(n, r, t, 0, F) } function pointLineStart(t, r) { e.moveTo(t, r), n.point = pointLine } function pointLine(t, n) { e.lineTo(t, n) } function lineEnd() { n.point = point } function lineEndPolygon() { e.closePath() } return n }(e), "function" != typeof a && r.pointRadius(a), reset()) : t }, path.pointRadius = function (e) { return arguments.length ? (a = "function" == typeof e ? e : (r.pointRadius(+e), +e), path) : a }, path.projection(o.geo.albersUsa()).context(null) }, o.geo.transform = function (e) { return { stream: function (t) { var n = new d3_geo_transform(t); for (var r in e) n[r] = e[r]; return n } } }, d3_geo_transform.prototype = { point: function (e, t) { this.stream.point(e, t) }, sphere: function () { this.stream.sphere() }, lineStart: function () { this.stream.lineStart() }, lineEnd: function () { this.stream.lineEnd() }, polygonStart: function () { this.stream.polygonStart() }, polygonEnd: function () { this.stream.polygonEnd() } }, o.geo.projection = d3_geo_projection, o.geo.projectionMutator = d3_geo_projectionMutator, (o.geo.equirectangular = function () { return d3_geo_projection(d3_geo_equirectangular) }).raw = d3_geo_equirectangular.invert = d3_geo_equirectangular, o.geo.rotation = function (e) { function forward(t) { return (t = e(t[0] * $, t[1] * $))[0] *= B, t[1] *= B, t } return e = d3_geo_rotation(e[0] % 360 * $, e[1] * $, e.length > 2 ? e[2] * $ : 0), forward.invert = function (t) { return (t = e.invert(t[0] * $, t[1] * $))[0] *= B, t[1] *= B, t }, forward }, d3_geo_identityRotation.invert = d3_geo_equirectangular, o.geo.circle = function () { var e, t, n = [0, 0], r = 6; function circle() { var e = "function" == typeof n ? n.apply(this, arguments) : n, r = d3_geo_rotation(-e[0] * $, -e[1] * $, 0).invert, i = []; return t(null, null, 1, { point: function (e, t) { i.push(e = r(e, t)), e[0] *= B, e[1] *= B } }), { type: "Polygon", coordinates: [i] } } return circle.origin = function (e) { return arguments.length ? (n = e, circle) : n }, circle.angle = function (n) { return arguments.length ? (t = d3_geo_circleInterpolate((e = +n) * $, r * $), circle) : e }, circle.precision = function (n) { return arguments.length ? (t = d3_geo_circleInterpolate(e * $, (r = +n) * $), circle) : r }, circle.angle(90) }, o.geo.distance = function (e, t) { var n, r = (t[0] - e[0]) * $, i = e[1] * $, o = t[1] * $, a = Math.sin(r), s = Math.cos(r), l = Math.sin(i), u = Math.cos(i), c = Math.sin(o), d = Math.cos(o); return Math.atan2(Math.sqrt((n = d * a) * n + (n = u * c - l * d * s) * n), l * c + u * d * s) }, o.geo.graticule = function () { var e, t, n, r, i, a, s, l, u, c, d, f, h = 10, p = h, g = 90, v = 360, y = 2.5; function graticule() { return { type: "MultiLineString", coordinates: lines() } } function lines() { return o.range(Math.ceil(r / g) * g, n, g).map(d).concat(o.range(Math.ceil(l / v) * v, s, v).map(f)).concat(o.range(Math.ceil(t / h) * h, e, h).filter(function (e) { return m(e % g) > R }).map(u)).concat(o.range(Math.ceil(a / p) * p, i, p).filter(function (e) { return m(e % v) > R }).map(c)) } return graticule.lines = function () { return lines().map(function (e) { return { type: "LineString", coordinates: e } }) }, graticule.outline = function () { return { type: "Polygon", coordinates: [d(r).concat(f(s).slice(1), d(n).reverse().slice(1), f(l).reverse().slice(1))] } }, graticule.extent = function (e) { return arguments.length ? graticule.majorExtent(e).minorExtent(e) : graticule.minorExtent() }, graticule.majorExtent = function (e) { return arguments.length ? (r = +e[0][0], n = +e[1][0], l = +e[0][1], s = +e[1][1], r > n && (e = r, r = n, n = e), l > s && (e = l, l = s, s = e), graticule.precision(y)) : [[r, l], [n, s]] }, graticule.minorExtent = function (n) { return arguments.length ? (t = +n[0][0], e = +n[1][0], a = +n[0][1], i = +n[1][1], t > e && (n = t, t = e, e = n), a > i && (n = a, a = i, i = n), graticule.precision(y)) : [[t, a], [e, i]] }, graticule.step = function (e) { return arguments.length ? graticule.majorStep(e).minorStep(e) : graticule.minorStep() }, graticule.majorStep = function (e) { return arguments.length ? (g = +e[0], v = +e[1], graticule) : [g, v] }, graticule.minorStep = function (e) { return arguments.length ? (h = +e[0], p = +e[1], graticule) : [h, p] }, graticule.precision = function (o) { return arguments.length ? (y = +o, u = d3_geo_graticuleX(a, i, 90), c = d3_geo_graticuleY(t, e, y), d = d3_geo_graticuleX(l, s, 90), f = d3_geo_graticuleY(r, n, y), graticule) : y }, graticule.majorExtent([[-180, -90 + R], [180, 90 - R]]).minorExtent([[-180, -80 - R], [180, 80 + R]]) }, o.geo.greatArc = function () { var e, t, n = d3_source, r = d3_target; function greatArc() { return { type: "LineString", coordinates: [e || n.apply(this, arguments), t || r.apply(this, arguments)] } } return greatArc.distance = function () { return o.geo.distance(e || n.apply(this, arguments), t || r.apply(this, arguments)) }, greatArc.source = function (t) { return arguments.length ? (n = t, e = "function" == typeof t ? null : t, greatArc) : n }, greatArc.target = function (e) { return arguments.length ? (r = e, t = "function" == typeof e ? null : e, greatArc) : r }, greatArc.precision = function () { return arguments.length ? greatArc : 0 }, greatArc }, o.geo.interpolate = function (e, t) { return function d3_geo_interpolate(e, t, n, r) { var i = Math.cos(t), o = Math.sin(t), a = Math.cos(r), s = Math.sin(r), l = i * Math.cos(e), u = i * Math.sin(e), c = a * Math.cos(n), d = a * Math.sin(n), f = 2 * Math.asin(Math.sqrt(d3_haversin(r - t) + i * a * d3_haversin(n - e))), h = 1 / Math.sin(f), p = f ? function (e) { var t = Math.sin(e *= f) * h, n = Math.sin(f - e) * h, r = n * l + t * c, i = n * u + t * d, a = n * o + t * s; return [Math.atan2(i, r) * B, Math.atan2(a, Math.sqrt(r * r + i * i)) * B] } : function () { return [e * B, t * B] }; return p.distance = f, p }(e[0] * $, e[1] * $, t[0] * $, t[1] * $) }, o.geo.length = function (e) { return Ue = 0, o.geo.stream(e, He), Ue }; var He = { sphere: d3_noop, point: d3_noop, lineStart: function d3_geo_lengthLineStart() { var e, t, n; function nextPoint(r, i) { var o = Math.sin(i *= $), a = Math.cos(i), s = m((r *= $) - e), l = Math.cos(s); Ue += Math.atan2(Math.sqrt((s = a * Math.sin(s)) * s + (s = n * o - t * a * l) * s), t * o + n * a * l), e = r, t = o, n = a } He.point = function (r, i) { e = r * $, t = Math.sin(i *= $), n = Math.cos(i), He.point = nextPoint }, He.lineEnd = function () { He.point = He.lineEnd = d3_noop } }, lineEnd: d3_noop, polygonStart: d3_noop, polygonEnd: d3_noop }; function d3_geo_azimuthal(e, t) { function azimuthal(t, n) { var r = Math.cos(t), i = Math.cos(n), o = e(r * i); return [o * i * Math.sin(t), o * Math.sin(n)] } return azimuthal.invert = function (e, n) { var r = Math.sqrt(e * e + n * n), i = t(r), o = Math.sin(i), a = Math.cos(i); return [Math.atan2(e * o, r * a), Math.asin(r && n * o / r)] }, azimuthal } var Ve = d3_geo_azimuthal(function (e) { return Math.sqrt(2 / (1 + e)) }, function (e) { return 2 * Math.asin(e / 2) }); (o.geo.azimuthalEqualArea = function () { return d3_geo_projection(Ve) }).raw = Ve; var Ge = d3_geo_azimuthal(function (e) { var t = Math.acos(e); return t && t / Math.sin(t) }, d3_identity); function d3_geo_conicConformal(e, t) { var n = Math.cos(e), r = function (e) { return Math.tan(D / 4 + e / 2) }, i = e === t ? Math.sin(e) : Math.log(n / Math.cos(t)) / Math.log(r(t) / r(e)), o = n * Math.pow(r(e), i) / i; if (!i) return d3_geo_mercator; function forward(e, t) { o > 0 ? t < -N + R && (t = -N + R) : t > N - R && (t = N - R); var n = o / Math.pow(r(t), i); return [n * Math.sin(i * e), o - n * Math.cos(i * e)] } return forward.invert = function (e, t) { var n = o - t, r = d3_sgn(i) * Math.sqrt(e * e + n * n); return [Math.atan2(e, n) / i, 2 * Math.atan(Math.pow(o / r, 1 / i)) - N] }, forward } function d3_geo_conicEquidistant(e, t) { var n = Math.cos(e), r = e === t ? Math.sin(e) : (n - Math.cos(t)) / (t - e), i = n / r + e; if (m(r) < R) return d3_geo_equirectangular; function forward(e, t) { var n = i - t; return [n * Math.sin(r * e), i - n * Math.cos(r * e)] } return forward.invert = function (e, t) { var n = i - t; return [Math.atan2(e, n) / r, i - d3_sgn(r) * Math.sqrt(e * e + n * n)] }, forward } (o.geo.azimuthalEquidistant = function () { return d3_geo_projection(Ge) }).raw = Ge, (o.geo.conicConformal = function () { return d3_geo_conic(d3_geo_conicConformal) }).raw = d3_geo_conicConformal, (o.geo.conicEquidistant = function () { return d3_geo_conic(d3_geo_conicEquidistant) }).raw = d3_geo_conicEquidistant; var We = d3_geo_azimuthal(function (e) { return 1 / e }, Math.atan); function d3_geo_mercator(e, t) { return [e, Math.log(Math.tan(D / 4 + t / 2))] } function d3_geo_mercatorProjection(e) { var t, n = d3_geo_projection(e), r = n.scale, i = n.translate, o = n.clipExtent; return n.scale = function () { var e = r.apply(n, arguments); return e === n ? t ? n.clipExtent(null) : n : e }, n.translate = function () { var e = i.apply(n, arguments); return e === n ? t ? n.clipExtent(null) : n : e }, n.clipExtent = function (e) { var a = o.apply(n, arguments); if (a === n) { if (t = null == e) { var s = D * r(), l = i(); o([[l[0] - s, l[1] - s], [l[0] + s, l[1] + s]]) } } else t && (a = null); return a }, n.clipExtent(null) } (o.geo.gnomonic = function () { return d3_geo_projection(We) }).raw = We, d3_geo_mercator.invert = function (e, t) { return [e, 2 * Math.atan(Math.exp(t)) - N] }, (o.geo.mercator = function () { return d3_geo_mercatorProjection(d3_geo_mercator) }).raw = d3_geo_mercator; var Ye = d3_geo_azimuthal(function () { return 1 }, Math.asin); (o.geo.orthographic = function () { return d3_geo_projection(Ye) }).raw = Ye; var Ze = d3_geo_azimuthal(function (e) { return 1 / (1 + e) }, function (e) { return 2 * Math.atan(e) }); function d3_geo_transverseMercator(e, t) { return [Math.log(Math.tan(D / 4 + t / 2)), -e] } function d3_geom_pointX(e) { return e[0] } function d3_geom_pointY(e) { return e[1] } function d3_geom_hullUpper(e) { for (var t = e.length, n = [0, 1], r = 2, i = 2; i < t; i++) { for (; r > 1 && d3_cross2d(e[n[r - 2]], e[n[r - 1]], e[i]) <= 0;)--r; n[r++] = i } return n.slice(0, r) } function d3_geom_hullOrder(e, t) { return e[0] - t[0] || e[1] - t[1] } (o.geo.stereographic = function () { return d3_geo_projection(Ze) }).raw = Ze, d3_geo_transverseMercator.invert = function (e, t) { return [-t, 2 * Math.atan(Math.exp(e)) - N] }, (o.geo.transverseMercator = function () { var e = d3_geo_mercatorProjection(d3_geo_transverseMercator), t = e.center, n = e.rotate; return e.center = function (e) { return e ? t([-e[1], e[0]]) : [(e = t())[1], -e[0]] }, e.rotate = function (e) { return e ? n([e[0], e[1], e.length > 2 ? e[2] + 90 : 90]) : [(e = n())[0], e[1], e[2] - 90] }, n([0, 0, 90]) }).raw = d3_geo_transverseMercator, o.geom = {}, o.geom.hull = function (e) { var t = d3_geom_pointX, n = d3_geom_pointY; if (arguments.length) return hull(e); function hull(e) { if (e.length < 3) return []; var r, i = d3_functor(t), o = d3_functor(n), a = e.length, s = [], l = []; for (r = 0; r < a; r++)s.push([+i.call(this, e[r], r), +o.call(this, e[r], r), r]); for (s.sort(d3_geom_hullOrder), r = 0; r < a; r++)l.push([s[r][0], -s[r][1]]); var u = d3_geom_hullUpper(s), c = d3_geom_hullUpper(l), d = c[0] === u[0], f = c[c.length - 1] === u[u.length - 1], h = []; for (r = u.length - 1; r >= 0; --r)h.push(e[s[u[r]][2]]); for (r = +d; r < c.length - f; ++r)h.push(e[s[c[r]][2]]); return h } return hull.x = function (e) { return arguments.length ? (t = e, hull) : t }, hull.y = function (e) { return arguments.length ? (n = e, hull) : n }, hull }, o.geom.polygon = function (e) { return b(e, Ke), e }; var Ke = o.geom.polygon.prototype = []; function d3_geom_polygonInside(e, t, n) { return (n[0] - t[0]) * (e[1] - t[1]) < (n[1] - t[1]) * (e[0] - t[0]) } function d3_geom_polygonIntersect(e, t, n, r) { var i = e[0], o = n[0], a = t[0] - i, s = r[0] - o, l = e[1], u = n[1], c = t[1] - l, d = r[1] - u, f = (s * (l - u) - d * (i - o)) / (d * a - s * c); return [i + f * a, l + f * c] } function d3_geom_polygonClosed(e) { var t = e[0], n = e[e.length - 1]; return !(t[0] - n[0] || t[1] - n[1]) } Ke.area = function () { for (var e, t = -1, n = this.length, r = this[n - 1], i = 0; ++t < n;)e = r, r = this[t], i += e[1] * r[0] - e[0] * r[1]; return .5 * i }, Ke.centroid = function (e) { var t, n, r = -1, i = this.length, o = 0, a = 0, s = this[i - 1]; for (arguments.length || (e = -1 / (6 * this.area())); ++r < i;)t = s, s = this[r], n = t[0] * s[1] - s[0] * t[1], o += (t[0] + s[0]) * n, a += (t[1] + s[1]) * n; return [o * e, a * e] }, Ke.clip = function (e) { for (var t, n, r, i, o, a, s = d3_geom_polygonClosed(e), l = -1, u = this.length - d3_geom_polygonClosed(this), c = this[u - 1]; ++l < u;) { for (t = e.slice(), e.length = 0, i = this[l], o = t[(r = t.length - s) - 1], n = -1; ++n < r;)d3_geom_polygonInside(a = t[n], c, i) ? (d3_geom_polygonInside(o, c, i) || e.push(d3_geom_polygonIntersect(o, a, c, i)), e.push(a)) : d3_geom_polygonInside(o, c, i) && e.push(d3_geom_polygonIntersect(o, a, c, i)), o = a; s && e.push(e[0]), c = i } return e }; var Xe, Je, Qe, et, tt, nt = [], rt = []; function d3_geom_voronoiCreateBeach(e) { var t = nt.pop() || new function d3_geom_voronoiBeach() { d3_geom_voronoiRedBlackNode(this), this.edge = this.site = this.circle = null }; return t.site = e, t } function d3_geom_voronoiDetachBeach(e) { d3_geom_voronoiDetachCircle(e), Qe.remove(e), nt.push(e), d3_geom_voronoiRedBlackNode(e) } function d3_geom_voronoiRemoveBeach(e) { var t = e.circle, n = t.x, r = t.cy, i = { x: n, y: r }, o = e.P, a = e.N, s = [e]; d3_geom_voronoiDetachBeach(e); for (var l = o; l.circle && m(n - l.circle.x) < R && m(r - l.circle.cy) < R;)o = l.P, s.unshift(l), d3_geom_voronoiDetachBeach(l), l = o; s.unshift(l), d3_geom_voronoiDetachCircle(l); for (var u = a; u.circle && m(n - u.circle.x) < R && m(r - u.circle.cy) < R;)a = u.N, s.push(u), d3_geom_voronoiDetachBeach(u), u = a; s.push(u), d3_geom_voronoiDetachCircle(u); var c, d = s.length; for (c = 1; c < d; ++c)u = s[c], l = s[c - 1], d3_geom_voronoiSetEdgeEnd(u.edge, l.site, u.site, i); l = s[0], (u = s[d - 1]).edge = d3_geom_voronoiCreateEdge(l.site, u.site, null, i), d3_geom_voronoiAttachCircle(l), d3_geom_voronoiAttachCircle(u) } function d3_geom_voronoiAddBeach(e) { for (var t, n, r, i, o = e.x, a = e.y, s = Qe._; s;)if ((r = d3_geom_voronoiLeftBreakPoint(s, a) - o) > R) s = s.L; else { if (!((i = o - d3_geom_voronoiRightBreakPoint(s, a)) > R)) { r > -R ? (t = s.P, n = s) : i > -R ? (t = s, n = s.N) : t = n = s; break } if (!s.R) { t = s; break } s = s.R } var l = d3_geom_voronoiCreateBeach(e); if (Qe.insert(t, l), t || n) { if (t === n) return d3_geom_voronoiDetachCircle(t), n = d3_geom_voronoiCreateBeach(t.site), Qe.insert(l, n), l.edge = n.edge = d3_geom_voronoiCreateEdge(t.site, l.site), d3_geom_voronoiAttachCircle(t), void d3_geom_voronoiAttachCircle(n); if (n) { d3_geom_voronoiDetachCircle(t), d3_geom_voronoiDetachCircle(n); var u = t.site, c = u.x, d = u.y, f = e.x - c, h = e.y - d, p = n.site, m = p.x - c, g = p.y - d, v = 2 * (f * g - h * m), y = f * f + h * h, _ = m * m + g * g, b = { x: (g * y - h * _) / v + c, y: (f * _ - m * y) / v + d }; d3_geom_voronoiSetEdgeEnd(n.edge, u, p, b), l.edge = d3_geom_voronoiCreateEdge(u, e, null, b), n.edge = d3_geom_voronoiCreateEdge(e, p, null, b), d3_geom_voronoiAttachCircle(t), d3_geom_voronoiAttachCircle(n) } else l.edge = d3_geom_voronoiCreateEdge(t.site, l.site) } } function d3_geom_voronoiLeftBreakPoint(e, t) { var n = e.site, r = n.x, i = n.y, o = i - t; if (!o) return r; var a = e.P; if (!a) return -1 / 0; var s = (n = a.site).x, l = n.y, u = l - t; if (!u) return s; var c = s - r, d = 1 / o - 1 / u, f = c / u; return d ? (-f + Math.sqrt(f * f - 2 * d * (c * c / (-2 * u) - l + u / 2 + i - o / 2))) / d + r : (r + s) / 2 } function d3_geom_voronoiRightBreakPoint(e, t) { var n = e.N; if (n) return d3_geom_voronoiLeftBreakPoint(n, t); var r = e.site; return r.y === t ? r.x : 1 / 0 } function d3_geom_voronoiCell(e) { this.site = e, this.edges = [] } function d3_geom_voronoiHalfEdgeOrder(e, t) { return t.angle - e.angle } function d3_geom_voronoiAttachCircle(e) { var t = e.P, n = e.N; if (t && n) { var r = t.site, i = e.site, o = n.site; if (r !== o) { var a = i.x, s = i.y, l = r.x - a, u = r.y - s, c = o.x - a, d = 2 * (l * (g = o.y - s) - u * c); if (!(d >= -O)) { var f = l * l + u * u, h = c * c + g * g, p = (g * f - u * h) / d, m = (l * h - c * f) / d, g = m + s, v = rt.pop() || new function d3_geom_voronoiCircle() { d3_geom_voronoiRedBlackNode(this), this.x = this.y = this.arc = this.site = this.cy = null }; v.arc = e, v.site = i, v.x = p + a, v.y = g + Math.sqrt(p * p + m * m), v.cy = g, e.circle = v; for (var y = null, _ = tt._; _;)if (v.y < _.y || v.y === _.y && v.x <= _.x) { if (!_.L) { y = _.P; break } _ = _.L } else { if (!_.R) { y = _; break } _ = _.R } tt.insert(y, v), y || (et = v) } } } } function d3_geom_voronoiDetachCircle(e) { var t = e.circle; t && (t.P || (et = t.N), tt.remove(t), rt.push(t), d3_geom_voronoiRedBlackNode(t), e.circle = null) } function d3_geom_voronoiConnectEdge(e, t) { var n = e.b; if (n) return !0; var r, i, o = e.a, a = t[0][0], s = t[1][0], l = t[0][1], u = t[1][1], c = e.l, d = e.r, f = c.x, h = c.y, p = d.x, m = d.y, g = (f + p) / 2, v = (h + m) / 2; if (m === h) { if (g < a || g >= s) return; if (f > p) { if (o) { if (o.y >= u) return } else o = { x: g, y: l }; n = { x: g, y: u } } else { if (o) { if (o.y < l) return } else o = { x: g, y: u }; n = { x: g, y: l } } } else if (i = v - (r = (f - p) / (m - h)) * g, r < -1 || r > 1) if (f > p) { if (o) { if (o.y >= u) return } else o = { x: (l - i) / r, y: l }; n = { x: (u - i) / r, y: u } } else { if (o) { if (o.y < l) return } else o = { x: (u - i) / r, y: u }; n = { x: (l - i) / r, y: l } } else if (h < m) { if (o) { if (o.x >= s) return } else o = { x: a, y: r * a + i }; n = { x: s, y: r * s + i } } else { if (o) { if (o.x < a) return } else o = { x: s, y: r * s + i }; n = { x: a, y: r * a + i } } return e.a = o, e.b = n, !0 } function d3_geom_voronoiEdge(e, t) { this.l = e, this.r = t, this.a = this.b = null } function d3_geom_voronoiCreateEdge(e, t, n, r) { var i = new d3_geom_voronoiEdge(e, t); return Xe.push(i), n && d3_geom_voronoiSetEdgeEnd(i, e, t, n), r && d3_geom_voronoiSetEdgeEnd(i, t, e, r), Je[e.i].edges.push(new d3_geom_voronoiHalfEdge(i, e, t)), Je[t.i].edges.push(new d3_geom_voronoiHalfEdge(i, t, e)), i } function d3_geom_voronoiSetEdgeEnd(e, t, n, r) { e.a || e.b ? e.l === n ? e.b = r : e.a = r : (e.a = r, e.l = t, e.r = n) } function d3_geom_voronoiHalfEdge(e, t, n) { var r = e.a, i = e.b; this.edge = e, this.site = t, this.angle = n ? Math.atan2(n.y - t.y, n.x - t.x) : e.l === t ? Math.atan2(i.x - r.x, r.y - i.y) : Math.atan2(r.x - i.x, i.y - r.y) } function d3_geom_voronoiRedBlackTree() { this._ = null } function d3_geom_voronoiRedBlackNode(e) { e.U = e.C = e.L = e.R = e.P = e.N = null } function d3_geom_voronoiRedBlackRotateLeft(e, t) { var n = t, r = t.R, i = n.U; i ? i.L === n ? i.L = r : i.R = r : e._ = r, r.U = i, n.U = r, n.R = r.L, n.R && (n.R.U = n), r.L = n } function d3_geom_voronoiRedBlackRotateRight(e, t) { var n = t, r = t.L, i = n.U; i ? i.L === n ? i.L = r : i.R = r : e._ = r, r.U = i, n.U = r, n.L = r.R, n.L && (n.L.U = n), r.R = n } function d3_geom_voronoiRedBlackFirst(e) { for (; e.L;)e = e.L; return e } function d3_geom_voronoi(e, t) { var n, r, i, o = e.sort(d3_geom_voronoiVertexOrder).pop(); for (Xe = [], Je = new Array(e.length), Qe = new d3_geom_voronoiRedBlackTree, tt = new d3_geom_voronoiRedBlackTree; ;)if (i = et, o && (!i || o.y < i.y || o.y === i.y && o.x < i.x)) o.x === n && o.y === r || (Je[o.i] = new d3_geom_voronoiCell(o), d3_geom_voronoiAddBeach(o), n = o.x, r = o.y), o = e.pop(); else { if (!i) break; d3_geom_voronoiRemoveBeach(i.arc) } t && (function d3_geom_voronoiClipEdges(e) { for (var t, n = Xe, r = d3_geom_clipLine(e[0][0], e[0][1], e[1][0], e[1][1]), i = n.length; i--;)(!d3_geom_voronoiConnectEdge(t = n[i], e) || !r(t) || m(t.a.x - t.b.x) < R && m(t.a.y - t.b.y) < R) && (t.a = t.b = null, n.splice(i, 1)) }(t), function d3_geom_voronoiCloseCells(e) { for (var t, n, r, i, o, a, s, l, u, c, d = e[0][0], f = e[1][0], h = e[0][1], p = e[1][1], g = Je, v = g.length; v--;)if ((o = g[v]) && o.prepare()) for (l = (s = o.edges).length, a = 0; a < l;)r = (c = s[a].end()).x, i = c.y, t = (u = s[++a % l].start()).x, n = u.y, (m(r - t) > R || m(i - n) > R) && (s.splice(a, 0, new d3_geom_voronoiHalfEdge((y = o.site, _ = c, b = m(r - d) < R && p - i > R ? { x: d, y: m(t - d) < R ? n : p } : m(i - p) < R && f - r > R ? { x: m(n - p) < R ? t : f, y: p } : m(r - f) < R && i - h > R ? { x: f, y: m(t - f) < R ? n : h } : m(i - h) < R && r - d > R ? { x: m(n - h) < R ? t : d, y: h } : null, w = void 0, w = new d3_geom_voronoiEdge(y, null), w.a = _, w.b = b, Xe.push(w), w), o.site, null)), ++l); var y, _, b, w }(t)); var a = { cells: Je, edges: Xe }; return Qe = tt = Xe = Je = null, a } function d3_geom_voronoiVertexOrder(e, t) { return t.y - e.y || t.x - e.x } d3_geom_voronoiCell.prototype.prepare = function () { for (var e, t = this.edges, n = t.length; n--;)(e = t[n].edge).b && e.a || t.splice(n, 1); return t.sort(d3_geom_voronoiHalfEdgeOrder), t.length }, d3_geom_voronoiHalfEdge.prototype = { start: function () { return this.edge.l === this.site ? this.edge.a : this.edge.b }, end: function () { return this.edge.l === this.site ? this.edge.b : this.edge.a } }, d3_geom_voronoiRedBlackTree.prototype = { insert: function (e, t) { var n, r, i; if (e) { if (t.P = e, t.N = e.N, e.N && (e.N.P = t), e.N = t, e.R) { for (e = e.R; e.L;)e = e.L; e.L = t } else e.R = t; n = e } else this._ ? (e = d3_geom_voronoiRedBlackFirst(this._), t.P = null, t.N = e, e.P = e.L = t, n = e) : (t.P = t.N = null, this._ = t, n = null); for (t.L = t.R = null, t.U = n, t.C = !0, e = t; n && n.C;)n === (r = n.U).L ? (i = r.R) && i.C ? (n.C = i.C = !1, r.C = !0, e = r) : (e === n.R && (d3_geom_voronoiRedBlackRotateLeft(this, n), n = (e = n).U), n.C = !1, r.C = !0, d3_geom_voronoiRedBlackRotateRight(this, r)) : (i = r.L) && i.C ? (n.C = i.C = !1, r.C = !0, e = r) : (e === n.L && (d3_geom_voronoiRedBlackRotateRight(this, n), n = (e = n).U), n.C = !1, r.C = !0, d3_geom_voronoiRedBlackRotateLeft(this, r)), n = e.U; this._.C = !1 }, remove: function (e) { e.N && (e.N.P = e.P), e.P && (e.P.N = e.N), e.N = e.P = null; var t, n, r, i = e.U, o = e.L, a = e.R; if (n = o ? a ? d3_geom_voronoiRedBlackFirst(a) : o : a, i ? i.L === e ? i.L = n : i.R = n : this._ = n, o && a ? (r = n.C, n.C = e.C, n.L = o, o.U = n, n !== a ? (i = n.U, n.U = e.U, e = n.R, i.L = e, n.R = a, a.U = n) : (n.U = i, i = n, e = n.R)) : (r = e.C, e = n), e && (e.U = i), !r) if (e && e.C) e.C = !1; else { do { if (e === this._) break; if (e === i.L) { if ((t = i.R).C && (t.C = !1, i.C = !0, d3_geom_voronoiRedBlackRotateLeft(this, i), t = i.R), t.L && t.L.C || t.R && t.R.C) { t.R && t.R.C || (t.L.C = !1, t.C = !0, d3_geom_voronoiRedBlackRotateRight(this, t), t = i.R), t.C = i.C, i.C = t.R.C = !1, d3_geom_voronoiRedBlackRotateLeft(this, i), e = this._; break } } else if ((t = i.L).C && (t.C = !1, i.C = !0, d3_geom_voronoiRedBlackRotateRight(this, i), t = i.L), t.L && t.L.C || t.R && t.R.C) { t.L && t.L.C || (t.R.C = !1, t.C = !0, d3_geom_voronoiRedBlackRotateLeft(this, t), t = i.L), t.C = i.C, i.C = t.L.C = !1, d3_geom_voronoiRedBlackRotateRight(this, i), e = this._; break } t.C = !0, e = i, i = i.U } while (!e.C); e && (e.C = !1) } } }, o.geom.voronoi = function (e) { var t = d3_geom_pointX, n = d3_geom_pointY, r = t, i = n, o = it; if (e) return voronoi(e); function voronoi(e) { var t = new Array(e.length), n = o[0][0], r = o[0][1], i = o[1][0], a = o[1][1]; return d3_geom_voronoi(sites(e), o).cells.forEach(function (o, s) { var l = o.edges, u = o.site; (t[s] = l.length ? l.map(function (e) { var t = e.start(); return [t.x, t.y] }) : u.x >= n && u.x <= i && u.y >= r && u.y <= a ? [[n, a], [i, a], [i, r], [n, r]] : []).point = e[s] }), t } function sites(e) { return e.map(function (e, t) { return { x: Math.round(r(e, t) / R) * R, y: Math.round(i(e, t) / R) * R, i: t } }) } return voronoi.links = function (e) { return d3_geom_voronoi(sites(e)).edges.filter(function (e) { return e.l && e.r }).map(function (t) { return { source: e[t.l.i], target: e[t.r.i] } }) }, voronoi.triangles = function (e) { var t = []; return d3_geom_voronoi(sites(e)).cells.forEach(function (n, r) { for (var i, o, a, s, l = n.site, u = n.edges.sort(d3_geom_voronoiHalfEdgeOrder), c = -1, d = u.length, f = u[d - 1].edge, h = f.l === l ? f.r : f.l; ++c < d;)f, i = h, h = (f = u[c].edge).l === l ? f.r : f.l, r < i.i && r < h.i && (a = i, s = h, ((o = l).x - s.x) * (a.y - o.y) - (o.x - a.x) * (s.y - o.y) < 0) && t.push([e[r], e[i.i], e[h.i]]) }), t }, voronoi.x = function (e) { return arguments.length ? (r = d3_functor(t = e), voronoi) : t }, voronoi.y = function (e) { return arguments.length ? (i = d3_functor(n = e), voronoi) : n }, voronoi.clipExtent = function (e) { return arguments.length ? (o = null == e ? it : e, voronoi) : o === it ? null : o }, voronoi.size = function (e) { return arguments.length ? voronoi.clipExtent(e && [[0, 0], e]) : o === it ? null : o && o[1] }, voronoi }; var it = [[-1e6, -1e6], [1e6, 1e6]]; function d3_geom_quadtreeCompatX(e) { return e.x } function d3_geom_quadtreeCompatY(e) { return e.y } function d3_interpolateRgb(e, t) { e = o.rgb(e), t = o.rgb(t); var n = e.r, r = e.g, i = e.b, a = t.r - n, s = t.g - r, l = t.b - i; return function (e) { return "#" + d3_rgb_hex(Math.round(n + a * e)) + d3_rgb_hex(Math.round(r + s * e)) + d3_rgb_hex(Math.round(i + l * e)) } } function d3_interpolateObject(e, t) { var n, r = {}, i = {}; for (n in e) n in t ? r[n] = d3_interpolate(e[n], t[n]) : i[n] = e[n]; for (n in t) n in e || (i[n] = t[n]); return function (e) { for (n in r) i[n] = r[n](e); return i } } function d3_interpolateNumber(e, t) { return e = +e, t = +t, function (n) { return e * (1 - n) + t * n } } function d3_interpolateString(e, t) { var n, r, i, o = ot.lastIndex = at.lastIndex = 0, a = -1, s = [], l = []; for (e += "", t += ""; (n = ot.exec(e)) && (r = at.exec(t));)(i = r.index) > o && (i = t.slice(o, i), s[a] ? s[a] += i : s[++a] = i), (n = n[0]) === (r = r[0]) ? s[a] ? s[a] += r : s[++a] = r : (s[++a] = null, l.push({ i: a, x: d3_interpolateNumber(n, r) })), o = at.lastIndex; return o < t.length && (i = t.slice(o), s[a] ? s[a] += i : s[++a] = i), s.length < 2 ? l[0] ? (t = l[0].x, function (e) { return t(e) + "" }) : function () { return t } : (t = l.length, function (e) { for (var n, r = 0; r < t; ++r)s[(n = l[r]).i] = n.x(e); return s.join("") }) } o.geom.delaunay = function (e) { return o.geom.voronoi().triangles(e) }, o.geom.quadtree = function (e, t, n, r, i) { var o, a = d3_geom_pointX, s = d3_geom_pointY; if (o = arguments.length) return a = d3_geom_quadtreeCompatX, s = d3_geom_quadtreeCompatY, 3 === o && (i = n, r = t, n = t = 0), quadtree(e); function quadtree(e) { var l, u, c, d, f, h, p, g, v, y = d3_functor(a), _ = d3_functor(s); if (null != t) h = t, p = n, g = r, v = i; else if (g = v = -(h = p = 1 / 0), u = [], c = [], f = e.length, o) for (d = 0; d < f; ++d)(l = e[d]).x < h && (h = l.x), l.y < p && (p = l.y), l.x > g && (g = l.x), l.y > v && (v = l.y), u.push(l.x), c.push(l.y); else for (d = 0; d < f; ++d) { var b = +y(l = e[d], d), w = +_(l, d); b < h && (h = b), w < p && (p = w), b > g && (g = b), w > v && (v = w), u.push(b), c.push(w) } var x = g - h, C = v - p; function insert(e, t, n, r, i, o, a, s) { if (!isNaN(n) && !isNaN(r)) if (e.leaf) { var l = e.x, u = e.y; if (null != l) if (m(l - n) + m(u - r) < .01) insertChild(e, t, n, r, i, o, a, s); else { var c = e.point; e.x = e.y = e.point = null, insertChild(e, c, l, u, i, o, a, s), insertChild(e, t, n, r, i, o, a, s) } else e.x = n, e.y = r, e.point = t } else insertChild(e, t, n, r, i, o, a, s) } function insertChild(e, t, n, r, i, o, a, s) { var l = .5 * (i + a), u = .5 * (o + s), c = n >= l, d = r >= u, f = d << 1 | c; e.leaf = !1, e = e.nodes[f] || (e.nodes[f] = { leaf: !0, nodes: [], point: null, x: null, y: null, add: function (e) { insert(S, e, +y(e, ++d), +_(e, d), h, p, g, v) } }), c ? i = l : a = l, d ? o = u : s = u, insert(e, t, n, r, i, o, a, s) } x > C ? v = p + x : g = h + C; var S = { leaf: !0, nodes: [], point: null, x: null, y: null, add: function (e) { insert(S, e, +y(e, ++d), +_(e, d), h, p, g, v) } }; if (S.visit = function (e) { !function d3_geom_quadtreeVisit(e, t, n, r, i, o) { if (!e(t, n, r, i, o)) { var a = .5 * (n + i), s = .5 * (r + o), l = t.nodes; l[0] && d3_geom_quadtreeVisit(e, l[0], n, r, a, s), l[1] && d3_geom_quadtreeVisit(e, l[1], a, r, i, s), l[2] && d3_geom_quadtreeVisit(e, l[2], n, s, a, o), l[3] && d3_geom_quadtreeVisit(e, l[3], a, s, i, o) } }(e, S, h, p, g, v) }, S.find = function (e) { return function d3_geom_quadtreeFind(e, t, n, r, i, o, a) { var s, l = 1 / 0; return function find(e, u, c, d, f) { if (!(u > o || c > a || d < r || f < i)) { if (h = e.point) { var h, p = t - e.x, m = n - e.y, g = p * p + m * m; if (g < l) { var v = Math.sqrt(l = g); r = t - v, i = n - v, o = t + v, a = n + v, s = h } } for (var y = e.nodes, _ = .5 * (u + d), b = .5 * (c + f), w = (n >= b) << 1 | t >= _, x = w + 4; w < x; ++w)if (e = y[3 & w]) switch (3 & w) { case 0: find(e, u, c, _, b); break; case 1: find(e, _, c, d, b); break; case 2: find(e, u, b, _, f); break; case 3: find(e, _, b, d, f) } } }(e, r, i, o, a), s }(S, e[0], e[1], h, p, g, v) }, d = -1, null == t) { for (; ++d < f;)insert(S, e[d], u[d], c[d], h, p, g, v); --d } else e.forEach(S.add); return u = c = e = l = null, S } return quadtree.x = function (e) { return arguments.length ? (a = e, quadtree) : a }, quadtree.y = function (e) { return arguments.length ? (s = e, quadtree) : s }, quadtree.extent = function (e) { return arguments.length ? (null == e ? t = n = r = i = null : (t = +e[0][0], n = +e[0][1], r = +e[1][0], i = +e[1][1]), quadtree) : null == t ? null : [[t, n], [r, i]] }, quadtree.size = function (e) { return arguments.length ? (null == e ? t = n = r = i = null : (t = n = 0, r = +e[0], i = +e[1]), quadtree) : null == t ? null : [r - t, i - n] }, quadtree }, o.interpolateRgb = d3_interpolateRgb, o.interpolateObject = d3_interpolateObject, o.interpolateNumber = d3_interpolateNumber, o.interpolateString = d3_interpolateString; var ot = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, at = new RegExp(ot.source, "g"); function d3_interpolate(e, t) { for (var n, r = o.interpolators.length; --r >= 0 && !(n = o.interpolators[r](e, t));); return n } function d3_interpolateArray(e, t) { var n, r = [], i = [], o = e.length, a = t.length, s = Math.min(e.length, t.length); for (n = 0; n < s; ++n)r.push(d3_interpolate(e[n], t[n])); for (; n < o; ++n)i[n] = e[n]; for (; n < a; ++n)i[n] = t[n]; return function (e) { for (n = 0; n < s; ++n)i[n] = r[n](e); return i } } o.interpolate = d3_interpolate, o.interpolators = [function (e, t) { var n = typeof t; return ("string" === n ? J.has(t.toLowerCase()) || /^(#|rgb\(|hsl\()/i.test(t) ? d3_interpolateRgb : d3_interpolateString : t instanceof d3_color ? d3_interpolateRgb : Array.isArray(t) ? d3_interpolateArray : "object" === n && isNaN(t) ? d3_interpolateObject : d3_interpolateNumber)(e, t) }], o.interpolateArray = d3_interpolateArray; var st = function () { return d3_identity }, lt = o.map({ linear: st, poly: function d3_ease_poly(e) { return function (t) { return Math.pow(t, e) } }, quad: function () { return d3_ease_quad }, cubic: function () { return d3_ease_cubic }, sin: function () { return d3_ease_sin }, exp: function () { return d3_ease_exp }, circle: function () { return d3_ease_circle }, elastic: function d3_ease_elastic(e, t) { var n; arguments.length < 2 && (t = .45); arguments.length ? n = t / F * Math.asin(1 / e) : (e = 1, n = t / 4); return function (r) { return 1 + e * Math.pow(2, -10 * r) * Math.sin((r - n) * F / t) } }, back: function d3_ease_back(e) { e || (e = 1.70158); return function (t) { return t * t * ((e + 1) * t - e) } }, bounce: function () { return d3_ease_bounce } }), ut = o.map({ in: d3_identity, out: d3_ease_reverse, "in-out": d3_ease_reflect, "out-in": function (e) { return d3_ease_reflect(d3_ease_reverse(e)) } }); function d3_ease_reverse(e) { return function (t) { return 1 - e(1 - t) } } function d3_ease_reflect(e) { return function (t) { return .5 * (t < .5 ? e(2 * t) : 2 - e(2 - 2 * t)) } } function d3_ease_quad(e) { return e * e } function d3_ease_cubic(e) { return e * e * e } function d3_ease_cubicInOut(e) { if (e <= 0) return 0; if (e >= 1) return 1; var t = e * e, n = t * e; return 4 * (e < .5 ? n : 3 * (e - t) + n - .75) } function d3_ease_sin(e) { return 1 - Math.cos(e * N) } function d3_ease_exp(e) { return Math.pow(2, 10 * (e - 1)) } function d3_ease_circle(e) { return 1 - Math.sqrt(1 - e * e) } function d3_ease_bounce(e) { return e < 1 / 2.75 ? 7.5625 * e * e : e < 2 / 2.75 ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : e < 2.5 / 2.75 ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375 } function d3_interpolateRound(e, t) { return t -= e, function (n) { return Math.round(e + t * n) } } function d3_transform(e) { var t = [e.a, e.b], n = [e.c, e.d], r = d3_transformNormalize(t), i = d3_transformDot(t, n), o = d3_transformNormalize(function d3_transformCombine(e, t, n) { return e[0] += n * t[0], e[1] += n * t[1], e }(n, t, -i)) || 0; t[0] * n[1] < n[0] * t[1] && (t[0] *= -1, t[1] *= -1, r *= -1, i *= -1), this.rotate = (r ? Math.atan2(t[1], t[0]) : Math.atan2(-n[0], n[1])) * B, this.translate = [e.e, e.f], this.scale = [r, o], this.skew = o ? Math.atan2(i, o) * B : 0 } function d3_transformDot(e, t) { return e[0] * t[0] + e[1] * t[1] } function d3_transformNormalize(e) { var t = Math.sqrt(d3_transformDot(e, e)); return t && (e[0] /= t, e[1] /= t), t } o.ease = function (e) { var t = e.indexOf("-"), n = t >= 0 ? e.slice(0, t) : e, r = t >= 0 ? e.slice(t + 1) : "in"; return n = lt.get(n) || st, function d3_ease_clamp(e) { return function (t) { return t <= 0 ? 0 : t >= 1 ? 1 : e(t) } }((r = ut.get(r) || d3_identity)(n.apply(null, a.call(arguments, 1)))) }, o.interpolateHcl = function d3_interpolateHcl(e, t) { e = o.hcl(e), t = o.hcl(t); var n = e.h, r = e.c, i = e.l, a = t.h - n, s = t.c - r, l = t.l - i; isNaN(s) && (s = 0, r = isNaN(r) ? t.c : r); isNaN(a) ? (a = 0, n = isNaN(n) ? t.h : n) : a > 180 ? a -= 360 : a < -180 && (a += 360); return function (e) { return d3_hcl_lab(n + a * e, r + s * e, i + l * e) + "" } }, o.interpolateHsl = function d3_interpolateHsl(e, t) { e = o.hsl(e), t = o.hsl(t); var n = e.h, r = e.s, i = e.l, a = t.h - n, s = t.s - r, l = t.l - i; isNaN(s) && (s = 0, r = isNaN(r) ? t.s : r); isNaN(a) ? (a = 0, n = isNaN(n) ? t.h : n) : a > 180 ? a -= 360 : a < -180 && (a += 360); return function (e) { return d3_hsl_rgb(n + a * e, r + s * e, i + l * e) + "" } }, o.interpolateLab = function d3_interpolateLab(e, t) { e = o.lab(e), t = o.lab(t); var n = e.l, r = e.a, i = e.b, a = t.l - n, s = t.a - r, l = t.b - i; return function (e) { return d3_lab_rgb(n + a * e, r + s * e, i + l * e) + "" } }, o.interpolateRound = d3_interpolateRound, o.transform = function (e) { var t = l.createElementNS(o.ns.prefix.svg, "g"); return (o.transform = function (e) { if (null != e) { t.setAttribute("transform", e); var n = t.transform.baseVal.consolidate() } return new d3_transform(n ? n.matrix : ct) })(e) }, d3_transform.prototype.toString = function () { return "translate(" + this.translate + ")rotate(" + this.rotate + ")skewX(" + this.skew + ")scale(" + this.scale + ")" }; var ct = { a: 1, b: 0, c: 0, d: 1, e: 0, f: 0 }; function d3_interpolateTransformPop(e) { return e.length ? e.pop() + "," : "" } function d3_interpolateTransform(e, t) { var n = [], r = []; return e = o.transform(e), t = o.transform(t), function d3_interpolateTranslate(e, t, n, r) { if (e[0] !== t[0] || e[1] !== t[1]) { var i = n.push("translate(", null, ",", null, ")"); r.push({ i: i - 4, x: d3_interpolateNumber(e[0], t[0]) }, { i: i - 2, x: d3_interpolateNumber(e[1], t[1]) }) } else (t[0] || t[1]) && n.push("translate(" + t + ")") }(e.translate, t.translate, n, r), function d3_interpolateRotate(e, t, n, r) { e !== t ? (e - t > 180 ? t += 360 : t - e > 180 && (e += 360), r.push({ i: n.push(d3_interpolateTransformPop(n) + "rotate(", null, ")") - 2, x: d3_interpolateNumber(e, t) })) : t && n.push(d3_interpolateTransformPop(n) + "rotate(" + t + ")") }(e.rotate, t.rotate, n, r), function d3_interpolateSkew(e, t, n, r) { e !== t ? r.push({ i: n.push(d3_interpolateTransformPop(n) + "skewX(", null, ")") - 2, x: d3_interpolateNumber(e, t) }) : t && n.push(d3_interpolateTransformPop(n) + "skewX(" + t + ")") }(e.skew, t.skew, n, r), function d3_interpolateScale(e, t, n, r) { if (e[0] !== t[0] || e[1] !== t[1]) { var i = n.push(d3_interpolateTransformPop(n) + "scale(", null, ",", null, ")"); r.push({ i: i - 4, x: d3_interpolateNumber(e[0], t[0]) }, { i: i - 2, x: d3_interpolateNumber(e[1], t[1]) }) } else 1 === t[0] && 1 === t[1] || n.push(d3_interpolateTransformPop(n) + "scale(" + t + ")") }(e.scale, t.scale, n, r), e = t = null, function (e) { for (var t, i = -1, o = r.length; ++i < o;)n[(t = r[i]).i] = t.x(e); return n.join("") } } function d3_uninterpolateNumber(e, t) { return t = (t -= e = +e) || 1 / t, function (n) { return (n - e) / t } } function d3_uninterpolateClamp(e, t) { return t = (t -= e = +e) || 1 / t, function (n) { return Math.max(0, Math.min(1, (n - e) / t)) } } function d3_layout_bundlePath(e) { for (var t = e.source, n = e.target, r = function d3_layout_bundleLeastCommonAncestor(e, t) { if (e === t) return e; var n = d3_layout_bundleAncestors(e), r = d3_layout_bundleAncestors(t), i = n.pop(), o = r.pop(), a = null; for (; i === o;)a = i, i = n.pop(), o = r.pop(); return a }(t, n), i = [t]; t !== r;)t = t.parent, i.push(t); for (var o = i.length; n !== r;)i.splice(o, 0, n), n = n.parent; return i } function d3_layout_bundleAncestors(e) { for (var t = [], n = e.parent; null != n;)t.push(e), e = n, n = n.parent; return t.push(e), t } function d3_layout_forceDragstart(e) { e.fixed |= 2 } function d3_layout_forceDragend(e) { e.fixed &= -7 } function d3_layout_forceMouseover(e) { e.fixed |= 4, e.px = e.x, e.py = e.y } function d3_layout_forceMouseout(e) { e.fixed &= -5 } o.interpolateTransform = d3_interpolateTransform, o.layout = {}, o.layout.bundle = function () { return function (e) { for (var t = [], n = -1, r = e.length; ++n < r;)t.push(d3_layout_bundlePath(e[n])); return t } }, o.layout.chord = function () { var e, t, n, r, i, a, s, l = {}, u = 0; function relayout() { var l, c, d, f, h, p = {}, m = [], g = o.range(r), v = []; for (e = [], t = [], l = 0, f = -1; ++f < r;) { for (c = 0, h = -1; ++h < r;)c += n[f][h]; m.push(c), v.push(o.range(r)), l += c } for (i && g.sort(function (e, t) { return i(m[e], m[t]) }), a && v.forEach(function (e, t) { e.sort(function (e, r) { return a(n[t][e], n[t][r]) }) }), l = (F - u * r) / l, c = 0, f = -1; ++f < r;) { for (d = c, h = -1; ++h < r;) { var y = g[f], _ = v[y][h], b = n[y][_], w = c, x = c += b * l; p[y + "-" + _] = { index: y, subindex: _, startAngle: w, endAngle: x, value: b } } t[y] = { index: y, startAngle: d, endAngle: c, value: m[y] }, c += u } for (f = -1; ++f < r;)for (h = f - 1; ++h < r;) { var C = p[f + "-" + h], S = p[h + "-" + f]; (C.value || S.value) && e.push(C.value < S.value ? { source: S, target: C } : { source: C, target: S }) } s && resort() } function resort() { e.sort(function (e, t) { return s((e.source.value + e.target.value) / 2, (t.source.value + t.target.value) / 2) }) } return l.matrix = function (i) { return arguments.length ? (r = (n = i) && n.length, e = t = null, l) : n }, l.padding = function (n) { return arguments.length ? (u = n, e = t = null, l) : u }, l.sortGroups = function (n) { return arguments.length ? (i = n, e = t = null, l) : i }, l.sortSubgroups = function (t) { return arguments.length ? (a = t, e = null, l) : a }, l.sortChords = function (t) { return arguments.length ? (s = t, e && resort(), l) : s }, l.chords = function () { return e || relayout(), e }, l.groups = function () { return t || relayout(), t }, l }, o.layout.force = function () { var e, t, n, r, i, a, s = {}, l = o.dispatch("start", "tick", "end"), u = [1, 1], c = .9, d = dt, f = ft, h = -30, p = ht, m = .1, g = .64, v = [], y = []; function repulse(e) { return function (t, n, r, i) { if (t.point !== e) { var o = t.cx - e.x, a = t.cy - e.y, s = i - n, l = o * o + a * a; if (s * s / g < l) { if (l < p) { var u = t.charge / l; e.px -= o * u, e.py -= a * u } return !0 } if (t.point && l && l < p) { u = t.pointCharge / l; e.px -= o * u, e.py -= a * u } } return !t.charge } } function dragmove(e) { e.px = o.event.x, e.py = o.event.y, s.resume() } return s.tick = function () { if ((n *= .99) < .005) return e = null, l.end({ type: "end", alpha: n = 0 }), !0; var t, s, d, f, p, g, _, b, w, x = v.length, C = y.length; for (s = 0; s < C; ++s)f = (d = y[s]).source, (g = (b = (p = d.target).x - f.x) * b + (w = p.y - f.y) * w) && (b *= g = n * i[s] * ((g = Math.sqrt(g)) - r[s]) / g, w *= g, p.x -= b * (_ = f.weight + p.weight ? f.weight / (f.weight + p.weight) : .5), p.y -= w * _, f.x += b * (_ = 1 - _), f.y += w * _); if ((_ = n * m) && (b = u[0] / 2, w = u[1] / 2, s = -1, _)) for (; ++s < x;)(d = v[s]).x += (b - d.x) * _, d.y += (w - d.y) * _; if (h) for (!function d3_layout_forceAccumulate(e, t, n) { var r = 0, i = 0; e.charge = 0; if (!e.leaf) for (var o, a = e.nodes, s = a.length, l = -1; ++l < s;)null != (o = a[l]) && (d3_layout_forceAccumulate(o, t, n), e.charge += o.charge, r += o.charge * o.cx, i += o.charge * o.cy); if (e.point) { e.leaf || (e.point.x += Math.random() - .5, e.point.y += Math.random() - .5); var u = t * n[e.point.index]; e.charge += e.pointCharge = u, r += u * e.point.x, i += u * e.point.y } e.cx = r / e.charge; e.cy = i / e.charge }(t = o.geom.quadtree(v), n, a), s = -1; ++s < x;)(d = v[s]).fixed || t.visit(repulse(d)); for (s = -1; ++s < x;)(d = v[s]).fixed ? (d.x = d.px, d.y = d.py) : (d.x -= (d.px - (d.px = d.x)) * c, d.y -= (d.py - (d.py = d.y)) * c); l.tick({ type: "tick", alpha: n }) }, s.nodes = function (e) { return arguments.length ? (v = e, s) : v }, s.links = function (e) { return arguments.length ? (y = e, s) : y }, s.size = function (e) { return arguments.length ? (u = e, s) : u }, s.linkDistance = function (e) { return arguments.length ? (d = "function" == typeof e ? e : +e, s) : d }, s.distance = s.linkDistance, s.linkStrength = function (e) { return arguments.length ? (f = "function" == typeof e ? e : +e, s) : f }, s.friction = function (e) { return arguments.length ? (c = +e, s) : c }, s.charge = function (e) { return arguments.length ? (h = "function" == typeof e ? e : +e, s) : h }, s.chargeDistance = function (e) { return arguments.length ? (p = e * e, s) : Math.sqrt(p) }, s.gravity = function (e) { return arguments.length ? (m = +e, s) : m }, s.theta = function (e) { return arguments.length ? (g = e * e, s) : Math.sqrt(g) }, s.alpha = function (t) { return arguments.length ? (t = +t, n ? t > 0 ? n = t : (e.c = null, e.t = NaN, e = null, l.end({ type: "end", alpha: n = 0 })) : t > 0 && (l.start({ type: "start", alpha: n = t }), e = d3_timer(s.tick)), s) : n }, s.start = function () { var e, t, n, o = v.length, l = y.length, c = u[0], p = u[1]; for (e = 0; e < o; ++e)(n = v[e]).index = e, n.weight = 0; for (e = 0; e < l; ++e)"number" == typeof (n = y[e]).source && (n.source = v[n.source]), "number" == typeof n.target && (n.target = v[n.target]), ++n.source.weight, ++n.target.weight; for (e = 0; e < o; ++e)n = v[e], isNaN(n.x) && (n.x = position("x", c)), isNaN(n.y) && (n.y = position("y", p)), isNaN(n.px) && (n.px = n.x), isNaN(n.py) && (n.py = n.y); if (r = [], "function" == typeof d) for (e = 0; e < l; ++e)r[e] = +d.call(this, y[e], e); else for (e = 0; e < l; ++e)r[e] = d; if (i = [], "function" == typeof f) for (e = 0; e < l; ++e)i[e] = +f.call(this, y[e], e); else for (e = 0; e < l; ++e)i[e] = f; if (a = [], "function" == typeof h) for (e = 0; e < o; ++e)a[e] = +h.call(this, v[e], e); else for (e = 0; e < o; ++e)a[e] = h; function position(n, r) { if (!t) { for (t = new Array(o), u = 0; u < o; ++u)t[u] = []; for (u = 0; u < l; ++u) { var i = y[u]; t[i.source.index].push(i.target), t[i.target.index].push(i.source) } } for (var a, s = t[e], u = -1, c = s.length; ++u < c;)if (!isNaN(a = s[u][n])) return a; return Math.random() * r } return s.resume() }, s.resume = function () { return s.alpha(.1) }, s.stop = function () { return s.alpha(0) }, s.drag = function () { if (t || (t = o.behavior.drag().origin(d3_identity).on("dragstart.force", d3_layout_forceDragstart).on("drag.force", dragmove).on("dragend.force", d3_layout_forceDragend)), !arguments.length) return t; this.on("mouseover.force", d3_layout_forceMouseover).on("mouseout.force", d3_layout_forceMouseout).call(t) }, o.rebind(s, l, "on") }; var dt = 20, ft = 1, ht = 1 / 0; function d3_layout_hierarchyRebind(e, t) { return o.rebind(e, t, "sort", "children", "value"), e.nodes = e, e.links = d3_layout_hierarchyLinks, e } function d3_layout_hierarchyVisitBefore(e, t) { for (var n = [e]; null != (e = n.pop());)if (t(e), (i = e.children) && (r = i.length)) for (var r, i; --r >= 0;)n.push(i[r]) } function d3_layout_hierarchyVisitAfter(e, t) { for (var n = [e], r = []; null != (e = n.pop());)if (r.push(e), (o = e.children) && (i = o.length)) for (var i, o, a = -1; ++a < i;)n.push(o[a]); for (; null != (e = r.pop());)t(e) } function d3_layout_hierarchyChildren(e) { return e.children } function d3_layout_hierarchyValue(e) { return e.value } function d3_layout_hierarchySort(e, t) { return t.value - e.value } function d3_layout_hierarchyLinks(e) { return o.merge(e.map(function (e) { return (e.children || []).map(function (t) { return { source: e, target: t } }) })) } o.layout.hierarchy = function () { var e = d3_layout_hierarchySort, t = d3_layout_hierarchyChildren, n = d3_layout_hierarchyValue; function hierarchy(r) { var i, o = [r], a = []; for (r.depth = 0; null != (i = o.pop());)if (a.push(i), (l = t.call(hierarchy, i, i.depth)) && (s = l.length)) { for (var s, l, u; --s >= 0;)o.push(u = l[s]), u.parent = i, u.depth = i.depth + 1; n && (i.value = 0), i.children = l } else n && (i.value = +n.call(hierarchy, i, i.depth) || 0), delete i.children; return d3_layout_hierarchyVisitAfter(r, function (t) { var r, i; e && (r = t.children) && r.sort(e), n && (i = t.parent) && (i.value += t.value) }), a } return hierarchy.sort = function (t) { return arguments.length ? (e = t, hierarchy) : e }, hierarchy.children = function (e) { return arguments.length ? (t = e, hierarchy) : t }, hierarchy.value = function (e) { return arguments.length ? (n = e, hierarchy) : n }, hierarchy.revalue = function (e) { return n && (d3_layout_hierarchyVisitBefore(e, function (e) { e.children && (e.value = 0) }), d3_layout_hierarchyVisitAfter(e, function (e) { var t; e.children || (e.value = +n.call(hierarchy, e, e.depth) || 0), (t = e.parent) && (t.value += e.value) })), e }, hierarchy }, o.layout.partition = function () { var e = o.layout.hierarchy(), t = [1, 1]; function partition(n, r) { var i = e.call(this, n, r); return function position(e, t, n, r) { var i = e.children; if (e.x = t, e.y = e.depth * r, e.dx = n, e.dy = r, i && (o = i.length)) { var o, a, s, l = -1; for (n = e.value ? n / e.value : 0; ++l < o;)position(a = i[l], t, s = a.value * n, r), t += s } }(i[0], 0, t[0], t[1] / function depth(e) { var t = e.children, n = 0; if (t && (r = t.length)) for (var r, i = -1; ++i < r;)n = Math.max(n, depth(t[i])); return 1 + n }(i[0])), i } return partition.size = function (e) { return arguments.length ? (t = e, partition) : t }, d3_layout_hierarchyRebind(partition, e) }, o.layout.pie = function () { var e = Number, t = pt, n = 0, r = F, i = 0; function pie(a) { var s, l = a.length, u = a.map(function (t, n) { return +e.call(pie, t, n) }), c = +("function" == typeof n ? n.apply(this, arguments) : n), d = ("function" == typeof r ? r.apply(this, arguments) : r) - c, f = Math.min(Math.abs(d) / l, +("function" == typeof i ? i.apply(this, arguments) : i)), h = f * (d < 0 ? -1 : 1), p = o.sum(u), m = p ? (d - l * h) / p : 0, g = o.range(l), v = []; return null != t && g.sort(t === pt ? function (e, t) { return u[t] - u[e] } : function (e, n) { return t(a[e], a[n]) }), g.forEach(function (e) { v[e] = { data: a[e], value: s = u[e], startAngle: c, endAngle: c += s * m + h, padAngle: f } }), v } return pie.value = function (t) { return arguments.length ? (e = t, pie) : e }, pie.sort = function (e) { return arguments.length ? (t = e, pie) : t }, pie.startAngle = function (e) { return arguments.length ? (n = e, pie) : n }, pie.endAngle = function (e) { return arguments.length ? (r = e, pie) : r }, pie.padAngle = function (e) { return arguments.length ? (i = e, pie) : i }, pie }; var pt = {}; function d3_layout_stackX(e) { return e.x } function d3_layout_stackY(e) { return e.y } function d3_layout_stackOut(e, t, n) { e.y0 = t, e.y = n } o.layout.stack = function () { var e = d3_identity, t = d3_layout_stackOrderDefault, n = d3_layout_stackOffsetZero, r = d3_layout_stackOut, i = d3_layout_stackX, a = d3_layout_stackY; function stack(s, l) { if (!(f = s.length)) return s; var u = s.map(function (t, n) { return e.call(stack, t, n) }), c = u.map(function (e) { return e.map(function (e, t) { return [i.call(stack, e, t), a.call(stack, e, t)] }) }), d = t.call(stack, c, l); u = o.permute(u, d), c = o.permute(c, d); var f, h, p, m, g = n.call(stack, c, l), v = u[0].length; for (p = 0; p < v; ++p)for (r.call(stack, u[0][p], m = g[p], c[0][p][1]), h = 1; h < f; ++h)r.call(stack, u[h][p], m += c[h - 1][p][1], c[h][p][1]); return s } return stack.values = function (t) { return arguments.length ? (e = t, stack) : e }, stack.order = function (e) { return arguments.length ? (t = "function" == typeof e ? e : mt.get(e) || d3_layout_stackOrderDefault, stack) : t }, stack.offset = function (e) { return arguments.length ? (n = "function" == typeof e ? e : gt.get(e) || d3_layout_stackOffsetZero, stack) : n }, stack.x = function (e) { return arguments.length ? (i = e, stack) : i }, stack.y = function (e) { return arguments.length ? (a = e, stack) : a }, stack.out = function (e) { return arguments.length ? (r = e, stack) : r }, stack }; var mt = o.map({ "inside-out": function (e) { var t, n, r = e.length, i = e.map(d3_layout_stackMaxIndex), a = e.map(d3_layout_stackReduceSum), s = o.range(r).sort(function (e, t) { return i[e] - i[t] }), l = 0, u = 0, c = [], d = []; for (t = 0; t < r; ++t)n = s[t], l < u ? (l += a[n], c.push(n)) : (u += a[n], d.push(n)); return d.reverse().concat(c) }, reverse: function (e) { return o.range(e.length).reverse() }, default: d3_layout_stackOrderDefault }), gt = o.map({ silhouette: function (e) { var t, n, r, i = e.length, o = e[0].length, a = [], s = 0, l = []; for (n = 0; n < o; ++n) { for (t = 0, r = 0; t < i; t++)r += e[t][n][1]; r > s && (s = r), a.push(r) } for (n = 0; n < o; ++n)l[n] = (s - a[n]) / 2; return l }, wiggle: function (e) { var t, n, r, i, o, a, s, l, u, c = e.length, d = e[0], f = d.length, h = []; for (h[0] = l = u = 0, n = 1; n < f; ++n) { for (t = 0, i = 0; t < c; ++t)i += e[t][n][1]; for (t = 0, o = 0, s = d[n][0] - d[n - 1][0]; t < c; ++t) { for (r = 0, a = (e[t][n][1] - e[t][n - 1][1]) / (2 * s); r < t; ++r)a += (e[r][n][1] - e[r][n - 1][1]) / s; o += a * e[t][n][1] } h[n] = l -= i ? o / i * s : 0, l < u && (u = l) } for (n = 0; n < f; ++n)h[n] -= u; return h }, expand: function (e) { var t, n, r, i = e.length, o = e[0].length, a = 1 / i, s = []; for (n = 0; n < o; ++n) { for (t = 0, r = 0; t < i; t++)r += e[t][n][1]; if (r) for (t = 0; t < i; t++)e[t][n][1] /= r; else for (t = 0; t < i; t++)e[t][n][1] = a } for (n = 0; n < o; ++n)s[n] = 0; return s }, zero: d3_layout_stackOffsetZero }); function d3_layout_stackOrderDefault(e) { return o.range(e.length) } function d3_layout_stackOffsetZero(e) { for (var t = -1, n = e[0].length, r = []; ++t < n;)r[t] = 0; return r } function d3_layout_stackMaxIndex(e) { for (var t, n = 1, r = 0, i = e[0][1], o = e.length; n < o; ++n)(t = e[n][1]) > i && (r = n, i = t); return r } function d3_layout_stackReduceSum(e) { return e.reduce(d3_layout_stackSum, 0) } function d3_layout_stackSum(e, t) { return e + t[1] } function d3_layout_histogramBinSturges(e, t) { return d3_layout_histogramBinFixed(e, Math.ceil(Math.log(t.length) / Math.LN2 + 1)) } function d3_layout_histogramBinFixed(e, t) { for (var n = -1, r = +e[0], i = (e[1] - r) / t, o = []; ++n <= t;)o[n] = i * n + r; return o } function d3_layout_histogramRange(e) { return [o.min(e), o.max(e)] } function d3_layout_packSort(e, t) { return e.value - t.value } function d3_layout_packInsert(e, t) { var n = e._pack_next; e._pack_next = t, t._pack_prev = e, t._pack_next = n, n._pack_prev = t } function d3_layout_packSplice(e, t) { e._pack_next = t, t._pack_prev = e } function d3_layout_packIntersects(e, t) { var n = t.x - e.x, r = t.y - e.y, i = e.r + t.r; return .999 * i * i > n * n + r * r } function d3_layout_packSiblings(e) { if ((t = e.children) && (l = t.length)) { var t, n, r, i, o, a, s, l, u = 1 / 0, c = -1 / 0, d = 1 / 0, f = -1 / 0; if (t.forEach(d3_layout_packLink), (n = t[0]).x = -n.r, n.y = 0, bound(n), l > 1 && ((r = t[1]).x = r.r, r.y = 0, bound(r), l > 2)) for (d3_layout_packPlace(n, r, i = t[2]), bound(i), d3_layout_packInsert(n, i), n._pack_prev = i, d3_layout_packInsert(i, r), r = n._pack_next, o = 3; o < l; o++) { d3_layout_packPlace(n, r, i = t[o]); var h = 0, p = 1, m = 1; for (a = r._pack_next; a !== r; a = a._pack_next, p++)if (d3_layout_packIntersects(a, i)) { h = 1; break } if (1 == h) for (s = n._pack_prev; s !== a._pack_prev && !d3_layout_packIntersects(s, i); s = s._pack_prev, m++); h ? (p < m || p == m && r.r < n.r ? d3_layout_packSplice(n, r = a) : d3_layout_packSplice(n = s, r), o--) : (d3_layout_packInsert(n, i), r = i, bound(i)) } var g = (u + c) / 2, v = (d + f) / 2, y = 0; for (o = 0; o < l; o++)(i = t[o]).x -= g, i.y -= v, y = Math.max(y, i.r + Math.sqrt(i.x * i.x + i.y * i.y)); e.r = y, t.forEach(d3_layout_packUnlink) } function bound(e) { u = Math.min(e.x - e.r, u), c = Math.max(e.x + e.r, c), d = Math.min(e.y - e.r, d), f = Math.max(e.y + e.r, f) } } function d3_layout_packLink(e) { e._pack_next = e._pack_prev = e } function d3_layout_packUnlink(e) { delete e._pack_next, delete e._pack_prev } function d3_layout_packPlace(e, t, n) { var r = e.r + n.r, i = t.x - e.x, o = t.y - e.y; if (r && (i || o)) { var a = t.r + n.r, s = i * i + o * o, l = .5 + ((r *= r) - (a *= a)) / (2 * s), u = Math.sqrt(Math.max(0, 2 * a * (r + s) - (r -= s) * r - a * a)) / (2 * s); n.x = e.x + l * i + u * o, n.y = e.y + l * o - u * i } else n.x = e.x + r, n.y = e.y } function d3_layout_treeSeparation(e, t) { return e.parent == t.parent ? 1 : 2 } function d3_layout_treeLeft(e) { var t = e.children; return t.length ? t[0] : e.t } function d3_layout_treeRight(e) { var t, n = e.children; return (t = n.length) ? n[t - 1] : e.t } function d3_layout_treeMove(e, t, n) { var r = n / (t.i - e.i); t.c -= r, t.s += n, e.c += r, t.z += n, t.m += n } function d3_layout_treeAncestor(e, t, n) { return e.a.parent === t.parent ? e.a : n } function d3_layout_treemapPadNull(e) { return { x: e.x, y: e.y, dx: e.dx, dy: e.dy } } function d3_layout_treemapPad(e, t) { var n = e.x + t[3], r = e.y + t[0], i = e.dx - t[1] - t[3], o = e.dy - t[0] - t[2]; return i < 0 && (n += i / 2, i = 0), o < 0 && (r += o / 2, o = 0), { x: n, y: r, dx: i, dy: o } } function d3_scaleExtent(e) { var t = e[0], n = e[e.length - 1]; return t < n ? [t, n] : [n, t] } function d3_scaleRange(e) { return e.rangeExtent ? e.rangeExtent() : d3_scaleExtent(e.range()) } function d3_scale_bilinear(e, t, n, r) { var i = n(e[0], e[1]), o = r(t[0], t[1]); return function (e) { return o(i(e)) } } function d3_scale_nice(e, t) { var n, r = 0, i = e.length - 1, o = e[r], a = e[i]; return a < o && (n = r, r = i, i = n, n = o, o = a, a = n), e[r] = t.floor(o), e[i] = t.ceil(a), e } function d3_scale_niceStep(e) { return e ? { floor: function (t) { return Math.floor(t / e) * e }, ceil: function (t) { return Math.ceil(t / e) * e } } : vt } o.layout.histogram = function () { var e = !0, t = Number, n = d3_layout_histogramRange, r = d3_layout_histogramBinSturges; function histogram(i, a) { for (var s, l, u = [], c = i.map(t, this), d = n.call(this, c, a), f = r.call(this, d, c, a), h = (a = -1, c.length), p = f.length - 1, m = e ? 1 : 1 / h; ++a < p;)(s = u[a] = []).dx = f[a + 1] - (s.x = f[a]), s.y = 0; if (p > 0) for (a = -1; ++a < h;)(l = c[a]) >= d[0] && l <= d[1] && ((s = u[o.bisect(f, l, 1, p) - 1]).y += m, s.push(i[a])); return u } return histogram.value = function (e) { return arguments.length ? (t = e, histogram) : t }, histogram.range = function (e) { return arguments.length ? (n = d3_functor(e), histogram) : n }, histogram.bins = function (e) { return arguments.length ? (r = "number" == typeof e ? function (t) { return d3_layout_histogramBinFixed(t, e) } : d3_functor(e), histogram) : r }, histogram.frequency = function (t) { return arguments.length ? (e = !!t, histogram) : e }, histogram }, o.layout.pack = function () { var e, t = o.layout.hierarchy().sort(d3_layout_packSort), n = 0, r = [1, 1]; function pack(i, o) { var a = t.call(this, i, o), s = a[0], l = r[0], u = r[1], c = null == e ? Math.sqrt : "function" == typeof e ? e : function () { return e }; if (s.x = s.y = 0, d3_layout_hierarchyVisitAfter(s, function (e) { e.r = +c(e.value) }), d3_layout_hierarchyVisitAfter(s, d3_layout_packSiblings), n) { var d = n * (e ? 1 : Math.max(2 * s.r / l, 2 * s.r / u)) / 2; d3_layout_hierarchyVisitAfter(s, function (e) { e.r += d }), d3_layout_hierarchyVisitAfter(s, d3_layout_packSiblings), d3_layout_hierarchyVisitAfter(s, function (e) { e.r -= d }) } return function d3_layout_packTransform(e, t, n, r) { var i = e.children; e.x = t += r * e.x; e.y = n += r * e.y; e.r *= r; if (i) for (var o = -1, a = i.length; ++o < a;)d3_layout_packTransform(i[o], t, n, r) }(s, l / 2, u / 2, e ? 1 : 1 / Math.max(2 * s.r / l, 2 * s.r / u)), a } return pack.size = function (e) { return arguments.length ? (r = e, pack) : r }, pack.radius = function (t) { return arguments.length ? (e = null == t || "function" == typeof t ? t : +t, pack) : e }, pack.padding = function (e) { return arguments.length ? (n = +e, pack) : n }, d3_layout_hierarchyRebind(pack, t) }, o.layout.tree = function () { var e = o.layout.hierarchy().sort(null).value(null), t = d3_layout_treeSeparation, n = [1, 1], r = null; function tree(i, o) { var a = e.call(this, i, o), s = a[0], l = function wrapTree(e) { var t, n = { A: null, children: [e] }, r = [n]; for (; null != (t = r.pop());)for (var i, o = t.children, a = 0, s = o.length; a < s; ++a)r.push((o[a] = i = { _: o[a], parent: t, children: (i = o[a].children) && i.slice() || [], A: null, a: null, z: 0, m: 0, c: 0, s: 0, t: null, i: a }).a = i); return n.children[0] }(s); if (d3_layout_hierarchyVisitAfter(l, firstWalk), l.parent.m = -l.z, d3_layout_hierarchyVisitBefore(l, secondWalk), r) d3_layout_hierarchyVisitBefore(s, sizeNode); else { var u = s, c = s, d = s; d3_layout_hierarchyVisitBefore(s, function (e) { e.x < u.x && (u = e), e.x > c.x && (c = e), e.depth > d.depth && (d = e) }); var f = t(u, c) / 2 - u.x, h = n[0] / (c.x + t(c, u) / 2 + f), p = n[1] / (d.depth || 1); d3_layout_hierarchyVisitBefore(s, function (e) { e.x = (e.x + f) * h, e.y = e.depth * p }) } return a } function firstWalk(e) { var n = e.children, r = e.parent.children, i = e.i ? r[e.i - 1] : null; if (n.length) { !function d3_layout_treeShift(e) { var t, n = 0, r = 0, i = e.children, o = i.length; for (; --o >= 0;)(t = i[o]).z += n, t.m += n, n += t.s + (r += t.c) }(e); var o = (n[0].z + n[n.length - 1].z) / 2; i ? (e.z = i.z + t(e._, i._), e.m = e.z - o) : e.z = o } else i && (e.z = i.z + t(e._, i._)); e.parent.A = function apportion(e, n, r) { if (n) { for (var i, o = e, a = e, s = n, l = o.parent.children[0], u = o.m, c = a.m, d = s.m, f = l.m; s = d3_layout_treeRight(s), o = d3_layout_treeLeft(o), s && o;)l = d3_layout_treeLeft(l), (a = d3_layout_treeRight(a)).a = e, (i = s.z + d - o.z - u + t(s._, o._)) > 0 && (d3_layout_treeMove(d3_layout_treeAncestor(s, e, r), e, i), u += i, c += i), d += s.m, u += o.m, f += l.m, c += a.m; s && !d3_layout_treeRight(a) && (a.t = s, a.m += d - c), o && !d3_layout_treeLeft(l) && (l.t = o, l.m += u - f, r = e) } return r }(e, i, e.parent.A || r[0]) } function secondWalk(e) { e._.x = e.z + e.parent.m, e.m += e.parent.m } function sizeNode(e) { e.x *= n[0], e.y = e.depth * n[1] } return tree.separation = function (e) { return arguments.length ? (t = e, tree) : t }, tree.size = function (e) { return arguments.length ? (r = null == (n = e) ? sizeNode : null, tree) : r ? null : n }, tree.nodeSize = function (e) { return arguments.length ? (r = null == (n = e) ? null : sizeNode, tree) : r ? n : null }, d3_layout_hierarchyRebind(tree, e) }, o.layout.cluster = function () { var e = o.layout.hierarchy().sort(null).value(null), t = d3_layout_treeSeparation, n = [1, 1], r = !1; function cluster(i, a) { var s, l = e.call(this, i, a), u = l[0], c = 0; d3_layout_hierarchyVisitAfter(u, function (e) { var n = e.children; n && n.length ? (e.x = function d3_layout_clusterX(e) { return e.reduce(function (e, t) { return e + t.x }, 0) / e.length }(n), e.y = function d3_layout_clusterY(e) { return 1 + o.max(e, function (e) { return e.y }) }(n)) : (e.x = s ? c += t(e, s) : 0, e.y = 0, s = e) }); var d = function d3_layout_clusterLeft(e) { var t = e.children; return t && t.length ? d3_layout_clusterLeft(t[0]) : e }(u), f = function d3_layout_clusterRight(e) { var t, n = e.children; return n && (t = n.length) ? d3_layout_clusterRight(n[t - 1]) : e }(u), h = d.x - t(d, f) / 2, p = f.x + t(f, d) / 2; return d3_layout_hierarchyVisitAfter(u, r ? function (e) { e.x = (e.x - u.x) * n[0], e.y = (u.y - e.y) * n[1] } : function (e) { e.x = (e.x - h) / (p - h) * n[0], e.y = (1 - (u.y ? e.y / u.y : 1)) * n[1] }), l } return cluster.separation = function (e) { return arguments.length ? (t = e, cluster) : t }, cluster.size = function (e) { return arguments.length ? (r = null == (n = e), cluster) : r ? null : n }, cluster.nodeSize = function (e) { return arguments.length ? (r = null != (n = e), cluster) : r ? n : null }, d3_layout_hierarchyRebind(cluster, e) }, o.layout.treemap = function () { var e, t = o.layout.hierarchy(), n = Math.round, r = [1, 1], i = null, a = d3_layout_treemapPadNull, s = !1, l = "squarify", u = .5 * (1 + Math.sqrt(5)); function scale(e, t) { for (var n, r, i = -1, o = e.length; ++i < o;)r = (n = e[i]).value * (t < 0 ? 0 : t), n.area = isNaN(r) || r <= 0 ? 0 : r } function squarify(e) { var t = e.children; if (t && t.length) { var n, r, i, o = a(e), s = [], u = t.slice(), c = 1 / 0, d = "slice" === l ? o.dx : "dice" === l ? o.dy : "slice-dice" === l ? 1 & e.depth ? o.dy : o.dx : Math.min(o.dx, o.dy); for (scale(u, o.dx * o.dy / e.value), s.area = 0; (i = u.length) > 0;)s.push(n = u[i - 1]), s.area += n.area, "squarify" !== l || (r = worst(s, d)) <= c ? (u.pop(), c = r) : (s.area -= s.pop().area, position(s, d, o, !1), d = Math.min(o.dx, o.dy), s.length = s.area = 0, c = 1 / 0); s.length && (position(s, d, o, !0), s.length = s.area = 0), t.forEach(squarify) } } function stickify(e) { var t = e.children; if (t && t.length) { var n, r = a(e), i = t.slice(), o = []; for (scale(i, r.dx * r.dy / e.value), o.area = 0; n = i.pop();)o.push(n), o.area += n.area, null != n.z && (position(o, n.z ? r.dx : r.dy, r, !i.length), o.length = o.area = 0); t.forEach(stickify) } } function worst(e, t) { for (var n, r = e.area, i = 0, o = 1 / 0, a = -1, s = e.length; ++a < s;)(n = e[a].area) && (n < o && (o = n), n > i && (i = n)); return t *= t, (r *= r) ? Math.max(t * i * u / r, r / (t * o * u)) : 1 / 0 } function position(e, t, r, i) { var o, a = -1, s = e.length, l = r.x, u = r.y, c = t ? n(e.area / t) : 0; if (t == r.dx) { for ((i || c > r.dy) && (c = r.dy); ++a < s;)(o = e[a]).x = l, o.y = u, o.dy = c, l += o.dx = Math.min(r.x + r.dx - l, c ? n(o.area / c) : 0); o.z = !0, o.dx += r.x + r.dx - l, r.y += c, r.dy -= c } else { for ((i || c > r.dx) && (c = r.dx); ++a < s;)(o = e[a]).x = l, o.y = u, o.dx = c, u += o.dy = Math.min(r.y + r.dy - u, c ? n(o.area / c) : 0); o.z = !1, o.dy += r.y + r.dy - u, r.x += c, r.dx -= c } } function treemap(n) { var i = e || t(n), o = i[0]; return o.x = o.y = 0, o.value ? (o.dx = r[0], o.dy = r[1]) : o.dx = o.dy = 0, e && t.revalue(o), scale([o], o.dx * o.dy / o.value), (e ? stickify : squarify)(o), s && (e = i), i } return treemap.size = function (e) { return arguments.length ? (r = e, treemap) : r }, treemap.padding = function (e) { if (!arguments.length) return i; function padConstant(t) { return d3_layout_treemapPad(t, e) } var t; return a = null == (i = e) ? d3_layout_treemapPadNull : "function" == (t = typeof e) ? function padFunction(t) { var n = e.call(treemap, t, t.depth); return null == n ? d3_layout_treemapPadNull(t) : d3_layout_treemapPad(t, "number" == typeof n ? [n, n, n, n] : n) } : "number" === t ? (e = [e, e, e, e], padConstant) : padConstant, treemap }, treemap.round = function (e) { return arguments.length ? (n = e ? Math.round : Number, treemap) : n != Number }, treemap.sticky = function (t) { return arguments.length ? (s = t, e = null, treemap) : s }, treemap.ratio = function (e) { return arguments.length ? (u = e, treemap) : u }, treemap.mode = function (e) { return arguments.length ? (l = e + "", treemap) : l }, d3_layout_hierarchyRebind(treemap, t) }, o.random = { normal: function (e, t) { var n = arguments.length; return n < 2 && (t = 1), n < 1 && (e = 0), function () { var n, r, i; do { i = (n = 2 * Math.random() - 1) * n + (r = 2 * Math.random() - 1) * r } while (!i || i > 1); return e + t * n * Math.sqrt(-2 * Math.log(i) / i) } }, logNormal: function () { var e = o.random.normal.apply(o, arguments); return function () { return Math.exp(e()) } }, bates: function (e) { var t = o.random.irwinHall(e); return function () { return t() / e } }, irwinHall: function (e) { return function () { for (var t = 0, n = 0; n < e; n++)t += Math.random(); return t } } }, o.scale = {}; var vt = { floor: d3_identity, ceil: d3_identity }; function d3_scale_polylinear(e, t, n, r) { var i = [], a = [], s = 0, l = Math.min(e.length, t.length) - 1; for (e[l] < e[0] && (e = e.slice().reverse(), t = t.slice().reverse()); ++s <= l;)i.push(n(e[s - 1], e[s])), a.push(r(t[s - 1], t[s])); return function (t) { var n = o.bisect(e, t, 1, l) - 1; return a[n](i[n](t)) } } function d3_scale_linearRebind(e, t) { return o.rebind(e, t, "range", "rangeRound", "interpolate", "clamp") } function d3_scale_linearNice(e, t) { return d3_scale_nice(e, d3_scale_niceStep(d3_scale_linearTickRange(e, t)[2])), d3_scale_nice(e, d3_scale_niceStep(d3_scale_linearTickRange(e, t)[2])), e } function d3_scale_linearTickRange(e, t) { null == t && (t = 10); var n = d3_scaleExtent(e), r = n[1] - n[0], i = Math.pow(10, Math.floor(Math.log(r / t) / Math.LN10)), o = t / r * i; return o <= .15 ? i *= 10 : o <= .35 ? i *= 5 : o <= .75 && (i *= 2), n[0] = Math.ceil(n[0] / i) * i, n[1] = Math.floor(n[1] / i) * i + .5 * i, n[2] = i, n } function d3_scale_linearTicks(e, t) { return o.range.apply(o, d3_scale_linearTickRange(e, t)) } function d3_scale_linearTickFormat(e, t, n) { var r = d3_scale_linearTickRange(e, t); if (n) { var i = oe.exec(n); if (i.shift(), "s" === i[8]) { var a = o.formatPrefix(Math.max(m(r[0]), m(r[1]))); return i[7] || (i[7] = "." + d3_scale_linearPrecision(a.scale(r[2]))), i[8] = "f", n = o.format(i.join("")), function (e) { return n(a.scale(e)) + a.symbol } } i[7] || (i[7] = "." + function d3_scale_linearFormatPrecision(e, t) { var n = d3_scale_linearPrecision(t[2]); return e in yt ? Math.abs(n - d3_scale_linearPrecision(Math.max(m(t[0]), m(t[1])))) + +("e" !== e) : n - 2 * ("%" === e) }(i[8], r)), n = i.join("") } else n = ",." + d3_scale_linearPrecision(r[2]) + "f"; return o.format(n) } o.scale.linear = function () { return function d3_scale_linear(e, t, n, r) { var i, o; function rescale() { var a = Math.min(e.length, t.length) > 2 ? d3_scale_polylinear : d3_scale_bilinear, s = r ? d3_uninterpolateClamp : d3_uninterpolateNumber; return i = a(e, t, s, n), o = a(t, e, s, d3_interpolate), scale } function scale(e) { return i(e) } scale.invert = function (e) { return o(e) }; scale.domain = function (t) { return arguments.length ? (e = t.map(Number), rescale()) : e }; scale.range = function (e) { return arguments.length ? (t = e, rescale()) : t }; scale.rangeRound = function (e) { return scale.range(e).interpolate(d3_interpolateRound) }; scale.clamp = function (e) { return arguments.length ? (r = e, rescale()) : r }; scale.interpolate = function (e) { return arguments.length ? (n = e, rescale()) : n }; scale.ticks = function (t) { return d3_scale_linearTicks(e, t) }; scale.tickFormat = function (t, n) { return d3_scale_linearTickFormat(e, t, n) }; scale.nice = function (t) { return d3_scale_linearNice(e, t), rescale() }; scale.copy = function () { return d3_scale_linear(e, t, n, r) }; return rescale() }([0, 1], [0, 1], d3_interpolate, !1) }; var yt = { s: 1, g: 1, p: 1, r: 1, e: 1 }; function d3_scale_linearPrecision(e) { return -Math.floor(Math.log(e) / Math.LN10 + .01) } o.scale.log = function () { return function d3_scale_log(e, t, n, r) { function log(e) { return (n ? Math.log(e < 0 ? 0 : e) : -Math.log(e > 0 ? 0 : -e)) / Math.log(t) } function pow(e) { return n ? Math.pow(t, e) : -Math.pow(t, -e) } function scale(t) { return e(log(t)) } scale.invert = function (t) { return pow(e.invert(t)) }; scale.domain = function (t) { return arguments.length ? (n = t[0] >= 0, e.domain((r = t.map(Number)).map(log)), scale) : r }; scale.base = function (n) { return arguments.length ? (t = +n, e.domain(r.map(log)), scale) : t }; scale.nice = function () { var t = d3_scale_nice(r.map(log), n ? Math : bt); return e.domain(t), r = t.map(pow), scale }; scale.ticks = function () { var e = d3_scaleExtent(r), i = [], o = e[0], a = e[1], s = Math.floor(log(o)), l = Math.ceil(log(a)), u = t % 1 ? 2 : t; if (isFinite(l - s)) { if (n) { for (; s < l; s++)for (var c = 1; c < u; c++)i.push(pow(s) * c); i.push(pow(s)) } else for (i.push(pow(s)); s++ < l;)for (var c = u - 1; c > 0; c--)i.push(pow(s) * c); for (s = 0; i[s] < o; s++); for (l = i.length; i[l - 1] > a; l--); i = i.slice(s, l) } return i }; scale.tickFormat = function (e, n) { if (!arguments.length) return _t; arguments.length < 2 ? n = _t : "function" != typeof n && (n = o.format(n)); var r = Math.max(1, t * e / scale.ticks().length); return function (e) { var i = e / pow(Math.round(log(e))); return i * t < t - .5 && (i *= t), i <= r ? n(e) : "" } }; scale.copy = function () { return d3_scale_log(e.copy(), t, n, r) }; return d3_scale_linearRebind(scale, e) }(o.scale.linear().domain([0, 1]), 10, !0, [1, 10]) }; var _t = o.format(".0e"), bt = { floor: function (e) { return -Math.ceil(-e) }, ceil: function (e) { return -Math.floor(-e) } }; function d3_scale_powPow(e) { return function (t) { return t < 0 ? -Math.pow(-t, e) : Math.pow(t, e) } } o.scale.pow = function () { return function d3_scale_pow(e, t, n) { var r = d3_scale_powPow(t), i = d3_scale_powPow(1 / t); function scale(t) { return e(r(t)) } scale.invert = function (t) { return i(e.invert(t)) }; scale.domain = function (t) { return arguments.length ? (e.domain((n = t.map(Number)).map(r)), scale) : n }; scale.ticks = function (e) { return d3_scale_linearTicks(n, e) }; scale.tickFormat = function (e, t) { return d3_scale_linearTickFormat(n, e, t) }; scale.nice = function (e) { return scale.domain(d3_scale_linearNice(n, e)) }; scale.exponent = function (o) { return arguments.length ? (r = d3_scale_powPow(t = o), i = d3_scale_powPow(1 / t), e.domain(n.map(r)), scale) : t }; scale.copy = function () { return d3_scale_pow(e.copy(), t, n) }; return d3_scale_linearRebind(scale, e) }(o.scale.linear(), 1, [0, 1]) }, o.scale.sqrt = function () { return o.scale.pow().exponent(.5) }, o.scale.ordinal = function () { return function d3_scale_ordinal(e, t) { var n, r, i; function scale(i) { return r[((n.get(i) || ("range" === t.t ? n.set(i, e.push(i)) : NaN)) - 1) % r.length] } function steps(t, n) { return o.range(e.length).map(function (e) { return t + n * e }) } scale.domain = function (r) { if (!arguments.length) return e; e = [], n = new d3_Map; for (var i, o = -1, a = r.length; ++o < a;)n.has(i = r[o]) || n.set(i, e.push(i)); return scale[t.t].apply(scale, t.a) }; scale.range = function (e) { return arguments.length ? (r = e, i = 0, t = { t: "range", a: arguments }, scale) : r }; scale.rangePoints = function (n, o) { arguments.length < 2 && (o = 0); var a = n[0], s = n[1], l = e.length < 2 ? (a = (a + s) / 2, 0) : (s - a) / (e.length - 1 + o); return r = steps(a + l * o / 2, l), i = 0, t = { t: "rangePoints", a: arguments }, scale }; scale.rangeRoundPoints = function (n, o) { arguments.length < 2 && (o = 0); var a = n[0], s = n[1], l = e.length < 2 ? (a = s = Math.round((a + s) / 2), 0) : (s - a) / (e.length - 1 + o) | 0; return r = steps(a + Math.round(l * o / 2 + (s - a - (e.length - 1 + o) * l) / 2), l), i = 0, t = { t: "rangeRoundPoints", a: arguments }, scale }; scale.rangeBands = function (n, o, a) { arguments.length < 2 && (o = 0), arguments.length < 3 && (a = o); var s = n[1] < n[0], l = n[s - 0], u = n[1 - s], c = (u - l) / (e.length - o + 2 * a); return r = steps(l + c * a, c), s && r.reverse(), i = c * (1 - o), t = { t: "rangeBands", a: arguments }, scale }; scale.rangeRoundBands = function (n, o, a) { arguments.length < 2 && (o = 0), arguments.length < 3 && (a = o); var s = n[1] < n[0], l = n[s - 0], u = n[1 - s], c = Math.floor((u - l) / (e.length - o + 2 * a)); return r = steps(l + Math.round((u - l - (e.length - o) * c) / 2), c), s && r.reverse(), i = Math.round(c * (1 - o)), t = { t: "rangeRoundBands", a: arguments }, scale }; scale.rangeBand = function () { return i }; scale.rangeExtent = function () { return d3_scaleExtent(t.a[0]) }; scale.copy = function () { return d3_scale_ordinal(e, t) }; return scale.domain(e) }([], { t: "range", a: [[]] }) }, o.scale.category10 = function () { return o.scale.ordinal().range(wt) }, o.scale.category20 = function () { return o.scale.ordinal().range(xt) }, o.scale.category20b = function () { return o.scale.ordinal().range(Ct) }, o.scale.category20c = function () { return o.scale.ordinal().range(St) }; var wt = [2062260, 16744206, 2924588, 14034728, 9725885, 9197131, 14907330, 8355711, 12369186, 1556175].map(d3_rgbString), xt = [2062260, 11454440, 16744206, 16759672, 2924588, 10018698, 14034728, 16750742, 9725885, 12955861, 9197131, 12885140, 14907330, 16234194, 8355711, 13092807, 12369186, 14408589, 1556175, 10410725].map(d3_rgbString), Ct = [3750777, 5395619, 7040719, 10264286, 6519097, 9216594, 11915115, 13556636, 9202993, 12426809, 15186514, 15190932, 8666169, 11356490, 14049643, 15177372, 8077683, 10834324, 13528509, 14589654].map(d3_rgbString), St = [3244733, 7057110, 10406625, 13032431, 15095053, 16616764, 16625259, 16634018, 3253076, 7652470, 10607003, 13101504, 7695281, 10394312, 12369372, 14342891, 6513507, 9868950, 12434877, 14277081].map(d3_rgbString); function d3_zero() { return 0 } o.scale.quantile = function () { return function d3_scale_quantile(e, t) { var n; function rescale() { var r = 0, i = t.length; for (n = []; ++r < i;)n[r - 1] = o.quantile(e, r / i); return scale } function scale(e) { if (!isNaN(e = +e)) return t[o.bisect(n, e)] } scale.domain = function (t) { return arguments.length ? (e = t.map(d3_number).filter(d3_numeric).sort(d3_ascending), rescale()) : e }; scale.range = function (e) { return arguments.length ? (t = e, rescale()) : t }; scale.quantiles = function () { return n }; scale.invertExtent = function (r) { return (r = t.indexOf(r)) < 0 ? [NaN, NaN] : [r > 0 ? n[r - 1] : e[0], r < n.length ? n[r] : e[e.length - 1]] }; scale.copy = function () { return d3_scale_quantile(e, t) }; return rescale() }([], []) }, o.scale.quantize = function () { return function d3_scale_quantize(e, t, n) { var r, i; function scale(t) { return n[Math.max(0, Math.min(i, Math.floor(r * (t - e))))] } function rescale() { return r = n.length / (t - e), i = n.length - 1, scale } scale.domain = function (n) { return arguments.length ? (e = +n[0], t = +n[n.length - 1], rescale()) : [e, t] }; scale.range = function (e) { return arguments.length ? (n = e, rescale()) : n }; scale.invertExtent = function (t) { return [t = (t = n.indexOf(t)) < 0 ? NaN : t / r + e, t + 1 / r] }; scale.copy = function () { return d3_scale_quantize(e, t, n) }; return rescale() }(0, 1, [0, 1]) }, o.scale.threshold = function () { return function d3_scale_threshold(e, t) { function scale(n) { if (n <= n) return t[o.bisect(e, n)] } scale.domain = function (t) { return arguments.length ? (e = t, scale) : e }; scale.range = function (e) { return arguments.length ? (t = e, scale) : t }; scale.invertExtent = function (n) { return n = t.indexOf(n), [e[n - 1], e[n]] }; scale.copy = function () { return d3_scale_threshold(e, t) }; return scale }([.5], [0, 1]) }, o.scale.identity = function () { return function d3_scale_identity(e) { function identity(e) { return +e } identity.invert = identity; identity.domain = identity.range = function (t) { return arguments.length ? (e = t.map(identity), identity) : e }; identity.ticks = function (t) { return d3_scale_linearTicks(e, t) }; identity.tickFormat = function (t, n) { return d3_scale_linearTickFormat(e, t, n) }; identity.copy = function () { return d3_scale_identity(e) }; return identity }([0, 1]) }, o.svg = {}, o.svg.arc = function () { var e = d3_svg_arcInnerRadius, t = d3_svg_arcOuterRadius, n = d3_zero, r = kt, i = d3_svg_arcStartAngle, o = d3_svg_arcEndAngle, a = d3_svg_arcPadAngle; function arc() { var s = Math.max(0, +e.apply(this, arguments)), l = Math.max(0, +t.apply(this, arguments)), u = i.apply(this, arguments) - N, c = o.apply(this, arguments) - N, d = Math.abs(c - u), f = u > c ? 0 : 1; if (l < s && (h = l, l = s, s = h), d >= I) return circleSegment(l, f) + (s ? circleSegment(s, 1 - f) : "") + "Z"; var h, p, m, g, v, y, _, b, w, x, C, S, k = 0, T = 0, L = []; if ((g = (+a.apply(this, arguments) || 0) / 2) && (m = r === kt ? Math.sqrt(s * s + l * l) : +r.apply(this, arguments), f || (T *= -1), l && (T = d3_asin(m / l * Math.sin(g))), s && (k = d3_asin(m / s * Math.sin(g)))), l) { v = l * Math.cos(u + T), y = l * Math.sin(u + T), _ = l * Math.cos(c - T), b = l * Math.sin(c - T); var M = Math.abs(c - u - 2 * T) <= D ? 0 : 1; if (T && d3_svg_arcSweep(v, y, _, b) === f ^ M) { var E = (u + c) / 2; v = l * Math.cos(E), y = l * Math.sin(E), _ = b = null } } else v = y = 0; if (s) { w = s * Math.cos(c - k), x = s * Math.sin(c - k), C = s * Math.cos(u + k), S = s * Math.sin(u + k); var A = Math.abs(u - c + 2 * k) <= D ? 0 : 1; if (k && d3_svg_arcSweep(w, x, C, S) === 1 - f ^ A) { var P = (u + c) / 2; w = s * Math.cos(P), x = s * Math.sin(P), C = S = null } } else w = x = 0; if (d > R && (h = Math.min(Math.abs(l - s) / 2, +n.apply(this, arguments))) > .001) { p = s < l ^ f ? 0 : 1; var O = h, F = h; if (d < D) { var $ = null == C ? [w, x] : null == _ ? [v, y] : d3_geom_polygonIntersect([v, y], [C, S], [_, b], [w, x]), B = v - $[0], z = y - $[1], j = _ - $[0], U = b - $[1], q = 1 / Math.sin(Math.acos((B * j + z * U) / (Math.sqrt(B * B + z * z) * Math.sqrt(j * j + U * U))) / 2), H = Math.sqrt($[0] * $[0] + $[1] * $[1]); F = Math.min(h, (s - H) / (q - 1)), O = Math.min(h, (l - H) / (q + 1)) } if (null != _) { var V = d3_svg_arcCornerTangents(null == C ? [w, x] : [C, S], [v, y], l, O, f), G = d3_svg_arcCornerTangents([_, b], [w, x], l, O, f); h === O ? L.push("M", V[0], "A", O, ",", O, " 0 0,", p, " ", V[1], "A", l, ",", l, " 0 ", 1 - f ^ d3_svg_arcSweep(V[1][0], V[1][1], G[1][0], G[1][1]), ",", f, " ", G[1], "A", O, ",", O, " 0 0,", p, " ", G[0]) : L.push("M", V[0], "A", O, ",", O, " 0 1,", p, " ", G[0]) } else L.push("M", v, ",", y); if (null != C) { var W = d3_svg_arcCornerTangents([v, y], [C, S], s, -F, f), Y = d3_svg_arcCornerTangents([w, x], null == _ ? [v, y] : [_, b], s, -F, f); h === F ? L.push("L", Y[0], "A", F, ",", F, " 0 0,", p, " ", Y[1], "A", s, ",", s, " 0 ", f ^ d3_svg_arcSweep(Y[1][0], Y[1][1], W[1][0], W[1][1]), ",", 1 - f, " ", W[1], "A", F, ",", F, " 0 0,", p, " ", W[0]) : L.push("L", Y[0], "A", F, ",", F, " 0 0,", p, " ", W[0]) } else L.push("L", w, ",", x) } else L.push("M", v, ",", y), null != _ && L.push("A", l, ",", l, " 0 ", M, ",", f, " ", _, ",", b), L.push("L", w, ",", x), null != C && L.push("A", s, ",", s, " 0 ", A, ",", 1 - f, " ", C, ",", S); return L.push("Z"), L.join("") } function circleSegment(e, t) { return "M0," + e + "A" + e + "," + e + " 0 1," + t + " 0," + -e + "A" + e + "," + e + " 0 1," + t + " 0," + e } return arc.innerRadius = function (t) { return arguments.length ? (e = d3_functor(t), arc) : e }, arc.outerRadius = function (e) { return arguments.length ? (t = d3_functor(e), arc) : t }, arc.cornerRadius = function (e) { return arguments.length ? (n = d3_functor(e), arc) : n }, arc.padRadius = function (e) { return arguments.length ? (r = e == kt ? kt : d3_functor(e), arc) : r }, arc.startAngle = function (e) { return arguments.length ? (i = d3_functor(e), arc) : i }, arc.endAngle = function (e) { return arguments.length ? (o = d3_functor(e), arc) : o }, arc.padAngle = function (e) { return arguments.length ? (a = d3_functor(e), arc) : a }, arc.centroid = function () { var n = (+e.apply(this, arguments) + +t.apply(this, arguments)) / 2, r = (+i.apply(this, arguments) + +o.apply(this, arguments)) / 2 - N; return [Math.cos(r) * n, Math.sin(r) * n] }, arc }; var kt = "auto"; function d3_svg_arcInnerRadius(e) { return e.innerRadius } function d3_svg_arcOuterRadius(e) { return e.outerRadius } function d3_svg_arcStartAngle(e) { return e.startAngle } function d3_svg_arcEndAngle(e) { return e.endAngle } function d3_svg_arcPadAngle(e) { return e && e.padAngle } function d3_svg_arcSweep(e, t, n, r) { return (e - n) * t - (t - r) * e > 0 ? 0 : 1 } function d3_svg_arcCornerTangents(e, t, n, r, i) { var o = e[0] - t[0], a = e[1] - t[1], s = (i ? r : -r) / Math.sqrt(o * o + a * a), l = s * a, u = -s * o, c = e[0] + l, d = e[1] + u, f = t[0] + l, h = t[1] + u, p = (c + f) / 2, m = (d + h) / 2, g = f - c, v = h - d, y = g * g + v * v, _ = n - r, b = c * h - f * d, w = (v < 0 ? -1 : 1) * Math.sqrt(Math.max(0, _ * _ * y - b * b)), x = (b * v - g * w) / y, C = (-b * g - v * w) / y, S = (b * v + g * w) / y, k = (-b * g + v * w) / y, T = x - p, L = C - m, M = S - p, E = k - m; return T * T + L * L > M * M + E * E && (x = S, C = k), [[x - l, C - u], [x * n / _, C * n / _]] } function d3_svg_line(e) { var t = d3_geom_pointX, n = d3_geom_pointY, r = d3_true, i = d3_svg_lineLinear, o = i.key, a = .7; function line(o) { var s, l = [], u = [], c = -1, d = o.length, f = d3_functor(t), h = d3_functor(n); function segment() { l.push("M", i(e(u), a)) } for (; ++c < d;)r.call(this, s = o[c], c) ? u.push([+f.call(this, s, c), +h.call(this, s, c)]) : u.length && (segment(), u = []); return u.length && segment(), l.length ? l.join("") : null } return line.x = function (e) { return arguments.length ? (t = e, line) : t }, line.y = function (e) { return arguments.length ? (n = e, line) : n }, line.defined = function (e) { return arguments.length ? (r = e, line) : r }, line.interpolate = function (e) { return arguments.length ? (o = "function" == typeof e ? i = e : (i = Tt.get(e) || d3_svg_lineLinear).key, line) : o }, line.tension = function (e) { return arguments.length ? (a = e, line) : a }, line } o.svg.line = function () { return d3_svg_line(d3_identity) }; var Tt = o.map({ linear: d3_svg_lineLinear, "linear-closed": d3_svg_lineLinearClosed, step: function d3_svg_lineStep(e) { var t = 0, n = e.length, r = e[0], i = [r[0], ",", r[1]]; for (; ++t < n;)i.push("H", (r[0] + (r = e[t])[0]) / 2, "V", r[1]); n > 1 && i.push("H", r[0]); return i.join("") }, "step-before": d3_svg_lineStepBefore, "step-after": d3_svg_lineStepAfter, basis: d3_svg_lineBasis, "basis-open": function d3_svg_lineBasisOpen(e) { if (e.length < 4) return d3_svg_lineLinear(e); var t, n = [], r = -1, i = e.length, o = [0], a = [0]; for (; ++r < 3;)t = e[r], o.push(t[0]), a.push(t[1]); n.push(d3_svg_lineDot4(Et, o) + "," + d3_svg_lineDot4(Et, a)), --r; for (; ++r < i;)t = e[r], o.shift(), o.push(t[0]), a.shift(), a.push(t[1]), d3_svg_lineBasisBezier(n, o, a); return n.join("") }, "basis-closed": function d3_svg_lineBasisClosed(e) { var t, n, r = -1, i = e.length, o = i + 4, a = [], s = []; for (; ++r < 4;)n = e[r % i], a.push(n[0]), s.push(n[1]); t = [d3_svg_lineDot4(Et, a), ",", d3_svg_lineDot4(Et, s)], --r; for (; ++r < o;)n = e[r % i], a.shift(), a.push(n[0]), s.shift(), s.push(n[1]), d3_svg_lineBasisBezier(t, a, s); return t.join("") }, bundle: function d3_svg_lineBundle(e, t) { var n = e.length - 1; if (n) for (var r, i, o = e[0][0], a = e[0][1], s = e[n][0] - o, l = e[n][1] - a, u = -1; ++u <= n;)r = e[u], i = u / n, r[0] = t * r[0] + (1 - t) * (o + i * s), r[1] = t * r[1] + (1 - t) * (a + i * l); return d3_svg_lineBasis(e) }, cardinal: function d3_svg_lineCardinal(e, t) { return e.length < 3 ? d3_svg_lineLinear(e) : e[0] + d3_svg_lineHermite(e, d3_svg_lineCardinalTangents(e, t)) }, "cardinal-open": function d3_svg_lineCardinalOpen(e, t) { return e.length < 4 ? d3_svg_lineLinear(e) : e[1] + d3_svg_lineHermite(e.slice(1, -1), d3_svg_lineCardinalTangents(e, t)) }, "cardinal-closed": function d3_svg_lineCardinalClosed(e, t) { return e.length < 3 ? d3_svg_lineLinearClosed(e) : e[0] + d3_svg_lineHermite((e.push(e[0]), e), d3_svg_lineCardinalTangents([e[e.length - 2]].concat(e, [e[1]]), t)) }, monotone: function d3_svg_lineMonotone(e) { return e.length < 3 ? d3_svg_lineLinear(e) : e[0] + d3_svg_lineHermite(e, function d3_svg_lineMonotoneTangents(e) { var t, n, r, i, o = [], a = function d3_svg_lineFiniteDifferences(e) { var t = 0, n = e.length - 1, r = [], i = e[0], o = e[1], a = r[0] = d3_svg_lineSlope(i, o); for (; ++t < n;)r[t] = (a + (a = d3_svg_lineSlope(i = o, o = e[t + 1]))) / 2; return r[t] = a, r }(e), s = -1, l = e.length - 1; for (; ++s < l;)t = d3_svg_lineSlope(e[s], e[s + 1]), m(t) < R ? a[s] = a[s + 1] = 0 : (n = a[s] / t, r = a[s + 1] / t, (i = n * n + r * r) > 9 && (i = 3 * t / Math.sqrt(i), a[s] = i * n, a[s + 1] = i * r)); s = -1; for (; ++s <= l;)i = (e[Math.min(l, s + 1)][0] - e[Math.max(0, s - 1)][0]) / (6 * (1 + a[s] * a[s])), o.push([i || 0, a[s] * i || 0]); return o }(e)) } }); function d3_svg_lineLinear(e) { return e.length > 1 ? e.join("L") : e + "Z" } function d3_svg_lineLinearClosed(e) { return e.join("L") + "Z" } function d3_svg_lineStepBefore(e) { for (var t = 0, n = e.length, r = e[0], i = [r[0], ",", r[1]]; ++t < n;)i.push("V", (r = e[t])[1], "H", r[0]); return i.join("") } function d3_svg_lineStepAfter(e) { for (var t = 0, n = e.length, r = e[0], i = [r[0], ",", r[1]]; ++t < n;)i.push("H", (r = e[t])[0], "V", r[1]); return i.join("") } function d3_svg_lineHermite(e, t) { if (t.length < 1 || e.length != t.length && e.length != t.length + 2) return d3_svg_lineLinear(e); var n = e.length != t.length, r = "", i = e[0], o = e[1], a = t[0], s = a, l = 1; if (n && (r += "Q" + (o[0] - 2 * a[0] / 3) + "," + (o[1] - 2 * a[1] / 3) + "," + o[0] + "," + o[1], i = e[1], l = 2), t.length > 1) { s = t[1], o = e[l], l++, r += "C" + (i[0] + a[0]) + "," + (i[1] + a[1]) + "," + (o[0] - s[0]) + "," + (o[1] - s[1]) + "," + o[0] + "," + o[1]; for (var u = 2; u < t.length; u++, l++)o = e[l], s = t[u], r += "S" + (o[0] - s[0]) + "," + (o[1] - s[1]) + "," + o[0] + "," + o[1] } if (n) { var c = e[l]; r += "Q" + (o[0] + 2 * s[0] / 3) + "," + (o[1] + 2 * s[1] / 3) + "," + c[0] + "," + c[1] } return r } function d3_svg_lineCardinalTangents(e, t) { for (var n, r = [], i = (1 - t) / 2, o = e[0], a = e[1], s = 1, l = e.length; ++s < l;)n = o, o = a, a = e[s], r.push([i * (a[0] - n[0]), i * (a[1] - n[1])]); return r } function d3_svg_lineBasis(e) { if (e.length < 3) return d3_svg_lineLinear(e); var t = 1, n = e.length, r = e[0], i = r[0], o = r[1], a = [i, i, i, (r = e[1])[0]], s = [o, o, o, r[1]], l = [i, ",", o, "L", d3_svg_lineDot4(Et, a), ",", d3_svg_lineDot4(Et, s)]; for (e.push(e[n - 1]); ++t <= n;)r = e[t], a.shift(), a.push(r[0]), s.shift(), s.push(r[1]), d3_svg_lineBasisBezier(l, a, s); return e.pop(), l.push("L", r), l.join("") } function d3_svg_lineDot4(e, t) { return e[0] * t[0] + e[1] * t[1] + e[2] * t[2] + e[3] * t[3] } Tt.forEach(function (e, t) { t.key = e, t.closed = /-closed$/.test(e) }); var Lt = [0, 2 / 3, 1 / 3, 0], Mt = [0, 1 / 3, 2 / 3, 0], Et = [0, 1 / 6, 2 / 3, 1 / 6]; function d3_svg_lineBasisBezier(e, t, n) { e.push("C", d3_svg_lineDot4(Lt, t), ",", d3_svg_lineDot4(Lt, n), ",", d3_svg_lineDot4(Mt, t), ",", d3_svg_lineDot4(Mt, n), ",", d3_svg_lineDot4(Et, t), ",", d3_svg_lineDot4(Et, n)) } function d3_svg_lineSlope(e, t) { return (t[1] - e[1]) / (t[0] - e[0]) } function d3_svg_lineRadial(e) { for (var t, n, r, i = -1, o = e.length; ++i < o;)n = (t = e[i])[0], r = t[1] - N, t[0] = n * Math.cos(r), t[1] = n * Math.sin(r); return e } function d3_svg_area(e) { var t = d3_geom_pointX, n = d3_geom_pointX, r = 0, i = d3_geom_pointY, o = d3_true, a = d3_svg_lineLinear, s = a.key, l = a, u = "L", c = .7; function area(s) { var d, f, h, p = [], m = [], g = [], v = -1, y = s.length, _ = d3_functor(t), b = d3_functor(r), w = t === n ? function () { return f } : d3_functor(n), x = r === i ? function () { return h } : d3_functor(i); function segment() { p.push("M", a(e(g), c), u, l(e(m.reverse()), c), "Z") } for (; ++v < y;)o.call(this, d = s[v], v) ? (m.push([f = +_.call(this, d, v), h = +b.call(this, d, v)]), g.push([+w.call(this, d, v), +x.call(this, d, v)])) : m.length && (segment(), m = [], g = []); return m.length && segment(), p.length ? p.join("") : null } return area.x = function (e) { return arguments.length ? (t = n = e, area) : n }, area.x0 = function (e) { return arguments.length ? (t = e, area) : t }, area.x1 = function (e) { return arguments.length ? (n = e, area) : n }, area.y = function (e) { return arguments.length ? (r = i = e, area) : i }, area.y0 = function (e) { return arguments.length ? (r = e, area) : r }, area.y1 = function (e) { return arguments.length ? (i = e, area) : i }, area.defined = function (e) { return arguments.length ? (o = e, area) : o }, area.interpolate = function (e) { return arguments.length ? (s = "function" == typeof e ? a = e : (a = Tt.get(e) || d3_svg_lineLinear).key, l = a.reverse || a, u = a.closed ? "M" : "L", area) : s }, area.tension = function (e) { return arguments.length ? (c = e, area) : c }, area } function d3_svg_chordRadius(e) { return e.radius } function d3_svg_diagonalProjection(e) { return [e.x, e.y] } function d3_svg_symbolSize() { return 64 } function d3_svg_symbolType() { return "circle" } function d3_svg_symbolCircle(e) { var t = Math.sqrt(e / D); return "M0," + t + "A" + t + "," + t + " 0 1,1 0," + -t + "A" + t + "," + t + " 0 1,1 0," + t + "Z" } o.svg.line.radial = function () { var e = d3_svg_line(d3_svg_lineRadial); return e.radius = e.x, delete e.x, e.angle = e.y, delete e.y, e }, d3_svg_lineStepBefore.reverse = d3_svg_lineStepAfter, d3_svg_lineStepAfter.reverse = d3_svg_lineStepBefore, o.svg.area = function () { return d3_svg_area(d3_identity) }, o.svg.area.radial = function () { var e = d3_svg_area(d3_svg_lineRadial); return e.radius = e.x, delete e.x, e.innerRadius = e.x0, delete e.x0, e.outerRadius = e.x1, delete e.x1, e.angle = e.y, delete e.y, e.startAngle = e.y0, delete e.y0, e.endAngle = e.y1, delete e.y1, e }, o.svg.chord = function () { var e = d3_source, t = d3_target, n = d3_svg_chordRadius, r = d3_svg_arcStartAngle, i = d3_svg_arcEndAngle; function chord(n, r) { var i = subgroup(this, e, n, r), o = subgroup(this, t, n, r); return "M" + i.p0 + arc(i.r, i.p1, i.a1 - i.a0) + (function equals(e, t) { return e.a0 == t.a0 && e.a1 == t.a1 }(i, o) ? curve(i.r, i.p1, i.r, i.p0) : curve(i.r, i.p1, o.r, o.p0) + arc(o.r, o.p1, o.a1 - o.a0) + curve(o.r, o.p1, i.r, i.p0)) + "Z" } function subgroup(e, t, o, a) { var s = t.call(e, o, a), l = n.call(e, s, a), u = r.call(e, s, a) - N, c = i.call(e, s, a) - N; return { r: l, a0: u, a1: c, p0: [l * Math.cos(u), l * Math.sin(u)], p1: [l * Math.cos(c), l * Math.sin(c)] } } function arc(e, t, n) { return "A" + e + "," + e + " 0 " + +(n > D) + ",1 " + t } function curve(e, t, n, r) { return "Q 0,0 " + r } return chord.radius = function (e) { return arguments.length ? (n = d3_functor(e), chord) : n }, chord.source = function (t) { return arguments.length ? (e = d3_functor(t), chord) : e }, chord.target = function (e) { return arguments.length ? (t = d3_functor(e), chord) : t }, chord.startAngle = function (e) { return arguments.length ? (r = d3_functor(e), chord) : r }, chord.endAngle = function (e) { return arguments.length ? (i = d3_functor(e), chord) : i }, chord }, o.svg.diagonal = function () { var e = d3_source, t = d3_target, n = d3_svg_diagonalProjection; function diagonal(r, i) { var o = e.call(this, r, i), a = t.call(this, r, i), s = (o.y + a.y) / 2, l = [o, { x: o.x, y: s }, { x: a.x, y: s }, a]; return "M" + (l = l.map(n))[0] + "C" + l[1] + " " + l[2] + " " + l[3] } return diagonal.source = function (t) { return arguments.length ? (e = d3_functor(t), diagonal) : e }, diagonal.target = function (e) { return arguments.length ? (t = d3_functor(e), diagonal) : t }, diagonal.projection = function (e) { return arguments.length ? (n = e, diagonal) : n }, diagonal }, o.svg.diagonal.radial = function () { var e = o.svg.diagonal(), t = d3_svg_diagonalProjection, n = e.projection; return e.projection = function (e) { return arguments.length ? n(function d3_svg_diagonalRadialProjection(e) { return function () { var t = e.apply(this, arguments), n = t[0], r = t[1] - N; return [n * Math.cos(r), n * Math.sin(r)] } }(t = e)) : t }, e }, o.svg.symbol = function () { var e = d3_svg_symbolType, t = d3_svg_symbolSize; function symbol(n, r) { return (At.get(e.call(this, n, r)) || d3_svg_symbolCircle)(t.call(this, n, r)) } return symbol.type = function (t) { return arguments.length ? (e = d3_functor(t), symbol) : e }, symbol.size = function (e) { return arguments.length ? (t = d3_functor(e), symbol) : t }, symbol }; var At = o.map({ circle: d3_svg_symbolCircle, cross: function (e) { var t = Math.sqrt(e / 5) / 2; return "M" + -3 * t + "," + -t + "H" + -t + "V" + -3 * t + "H" + t + "V" + -t + "H" + 3 * t + "V" + t + "H" + t + "V" + 3 * t + "H" + -t + "V" + t + "H" + -3 * t + "Z" }, diamond: function (e) { var t = Math.sqrt(e / (2 * Rt)), n = t * Rt; return "M0," + -t + "L" + n + ",0 0," + t + " " + -n + ",0Z" }, square: function (e) { var t = Math.sqrt(e) / 2; return "M" + -t + "," + -t + "L" + t + "," + -t + " " + t + "," + t + " " + -t + "," + t + "Z" }, "triangle-down": function (e) { var t = Math.sqrt(e / Pt), n = t * Pt / 2; return "M0," + n + "L" + t + "," + -n + " " + -t + "," + -n + "Z" }, "triangle-up": function (e) { var t = Math.sqrt(e / Pt), n = t * Pt / 2; return "M0," + -n + "L" + t + "," + n + " " + -t + "," + n + "Z" } }); o.svg.symbolTypes = At.keys(); var Pt = Math.sqrt(3), Rt = Math.tan(30 * $); S.transition = function (e) { for (var t, n, r = Dt || ++Nt, i = d3_transitionNamespace(e), o = [], a = Ft || { time: Date.now(), ease: d3_ease_cubicInOut, delay: 0, duration: 250 }, s = -1, l = this.length; ++s < l;) { o.push(t = []); for (var u = this[s], c = -1, d = u.length; ++c < d;)(n = u[c]) && d3_transitionNode(n, c, i, r, a), t.push(n) } return d3_transition(o, i, r) }, S.interrupt = function (e) { return this.each(null == e ? Ot : d3_selection_interruptNS(d3_transitionNamespace(e))) }; var Ot = d3_selection_interruptNS(d3_transitionNamespace()); function d3_selection_interruptNS(e) { return function () { var t, n, r; (t = this[e]) && (r = t[n = t.active]) && (r.timer.c = null, r.timer.t = NaN, --t.count ? delete t[n] : delete this[e], t.active += .5, r.event && r.event.interrupt.call(this, this.__data__, r.index)) } } function d3_transition(e, t, n) { return b(e, It), e.namespace = t, e.id = n, e } var Dt, Ft, It = [], Nt = 0; function d3_transition_tween(e, t, n, r) { var i = e.id, o = e.namespace; return d3_selection_each(e, "function" == typeof n ? function (e, a, s) { e[o][i].tween.set(t, r(n.call(e, e.__data__, a, s))) } : (n = r(n), function (e) { e[o][i].tween.set(t, n) })) } function d3_transition_text(e) { return null == e && (e = ""), function () { this.textContent = e } } function d3_transitionNamespace(e) { return null == e ? "__transition__" : "__transition_" + e + "__" } function d3_transitionNode(e, t, n, r, i) { var o, a, s, l, u, c = e[n] || (e[n] = { active: 0, count: 0 }), d = c[r]; function start(n) { var i = c.active, f = c[i]; for (var h in f && (f.timer.c = null, f.timer.t = NaN, --c.count, delete c[i], f.event && f.event.interrupt.call(e, e.__data__, f.index)), c) if (+h < r) { var p = c[h]; p.timer.c = null, p.timer.t = NaN, --c.count, delete c[h] } a.c = tick, d3_timer(function () { return a.c && tick(n || 1) && (a.c = null, a.t = NaN), 1 }, 0, o), c.active = r, d.event && d.event.start.call(e, e.__data__, t), u = [], d.tween.forEach(function (n, r) { (r = r.call(e, e.__data__, t)) && u.push(r) }), l = d.ease, s = d.duration } function tick(i) { for (var o = i / s, a = l(o), f = u.length; f > 0;)u[--f].call(e, a); if (o >= 1) return d.event && d.event.end.call(e, e.__data__, t), --c.count ? delete c[r] : delete e[n], 1 } d || (o = i.time, a = d3_timer(function schedule(e) { var t = d.delay; if (a.t = t + o, t <= e) return start(e - t); a.c = start }, 0, o), d = c[r] = { tween: new d3_Map, time: o, timer: a, delay: i.delay, duration: i.duration, ease: i.ease, index: t }, i = null, ++c.count) } It.call = S.call, It.empty = S.empty, It.node = S.node, It.size = S.size, o.transition = function (e, t) { return e && e.transition ? Dt ? e.transition(t) : e : o.selection().transition(e) }, o.transition.prototype = It, It.select = function (e) { var t, n, r, i = this.id, o = this.namespace, a = []; e = d3_selection_selector(e); for (var s = -1, l = this.length; ++s < l;) { a.push(t = []); for (var u = this[s], c = -1, d = u.length; ++c < d;)(r = u[c]) && (n = e.call(r, r.__data__, c, s)) ? ("__data__" in r && (n.__data__ = r.__data__), d3_transitionNode(n, c, o, i, r[o][i]), t.push(n)) : t.push(null) } return d3_transition(a, o, i) }, It.selectAll = function (e) { var t, n, r, i, o, a = this.id, s = this.namespace, l = []; e = d3_selection_selectorAll(e); for (var u = -1, c = this.length; ++u < c;)for (var d = this[u], f = -1, h = d.length; ++f < h;)if (r = d[f]) { o = r[s][a], n = e.call(r, r.__data__, f, u), l.push(t = []); for (var p = -1, m = n.length; ++p < m;)(i = n[p]) && d3_transitionNode(i, p, s, a, o), t.push(i) } return d3_transition(l, s, a) }, It.filter = function (e) { var t, n, r = []; "function" != typeof e && (e = d3_selection_filter(e)); for (var i = 0, o = this.length; i < o; i++) { r.push(t = []); for (var a, s = 0, l = (a = this[i]).length; s < l; s++)(n = a[s]) && e.call(n, n.__data__, s, i) && t.push(n) } return d3_transition(r, this.namespace, this.id) }, It.tween = function (e, t) { var n = this.id, r = this.namespace; return arguments.length < 2 ? this.node()[r][n].tween.get(e) : d3_selection_each(this, null == t ? function (t) { t[r][n].tween.remove(e) } : function (i) { i[r][n].tween.set(e, t) }) }, It.attr = function (e, t) { if (arguments.length < 2) { for (t in e) this.attr(t, e[t]); return this } var n = "transform" == e ? d3_interpolateTransform : d3_interpolate, r = o.ns.qualify(e); function attrNull() { this.removeAttribute(r) } function attrNullNS() { this.removeAttributeNS(r.space, r.local) } return d3_transition_tween(this, "attr." + e, t, r.local ? function attrTweenNS(e) { return null == e ? attrNullNS : (e += "", function () { var t, i = this.getAttributeNS(r.space, r.local); return i !== e && (t = n(i, e), function (e) { this.setAttributeNS(r.space, r.local, t(e)) }) }) } : function attrTween(e) { return null == e ? attrNull : (e += "", function () { var t, i = this.getAttribute(r); return i !== e && (t = n(i, e), function (e) { this.setAttribute(r, t(e)) }) }) }) }, It.attrTween = function (e, t) { var n = o.ns.qualify(e); return this.tween("attr." + e, n.local ? function attrTweenNS(e, r) { var i = t.call(this, e, r, this.getAttributeNS(n.space, n.local)); return i && function (e) { this.setAttributeNS(n.space, n.local, i(e)) } } : function attrTween(e, r) { var i = t.call(this, e, r, this.getAttribute(n)); return i && function (e) { this.setAttribute(n, i(e)) } }) }, It.style = function (e, t, n) { var r = arguments.length; if (r < 3) { if ("string" != typeof e) { for (n in r < 2 && (t = ""), e) this.style(n, e[n], t); return this } n = "" } function styleNull() { this.style.removeProperty(e) } return d3_transition_tween(this, "style." + e, t, function styleString(t) { return null == t ? styleNull : (t += "", function () { var r, i = d3_window(this).getComputedStyle(this, null).getPropertyValue(e); return i !== t && (r = d3_interpolate(i, t), function (t) { this.style.setProperty(e, r(t), n) }) }) }) }, It.styleTween = function (e, t, n) { return arguments.length < 3 && (n = ""), this.tween("style." + e, function styleTween(r, i) { var o = t.call(this, r, i, d3_window(this).getComputedStyle(this, null).getPropertyValue(e)); return o && function (t) { this.style.setProperty(e, o(t), n) } }) }, It.text = function (e) { return d3_transition_tween(this, "text", e, d3_transition_text) }, It.remove = function () { var e = this.namespace; return this.each("end.transition", function () { var t; this[e].count < 2 && (t = this.parentNode) && t.removeChild(this) }) }, It.ease = function (e) { var t = this.id, n = this.namespace; return arguments.length < 1 ? this.node()[n][t].ease : ("function" != typeof e && (e = o.ease.apply(o, arguments)), d3_selection_each(this, function (r) { r[n][t].ease = e })) }, It.delay = function (e) { var t = this.id, n = this.namespace; return arguments.length < 1 ? this.node()[n][t].delay : d3_selection_each(this, "function" == typeof e ? function (r, i, o) { r[n][t].delay = +e.call(r, r.__data__, i, o) } : (e = +e, function (r) { r[n][t].delay = e })) }, It.duration = function (e) { var t = this.id, n = this.namespace; return arguments.length < 1 ? this.node()[n][t].duration : d3_selection_each(this, "function" == typeof e ? function (r, i, o) { r[n][t].duration = Math.max(1, e.call(r, r.__data__, i, o)) } : (e = Math.max(1, e), function (r) { r[n][t].duration = e })) }, It.each = function (e, t) { var n = this.id, r = this.namespace; if (arguments.length < 2) { var i = Ft, a = Dt; try { Dt = n, d3_selection_each(this, function (t, i, o) { Ft = t[r][n], e.call(t, t.__data__, i, o) }) } finally { Ft = i, Dt = a } } else d3_selection_each(this, function (i) { var a = i[r][n]; (a.event || (a.event = o.dispatch("start", "end", "interrupt"))).on(e, t) }); return this }, It.transition = function () { for (var e, t, n, r = this.id, i = ++Nt, o = this.namespace, a = [], s = 0, l = this.length; s < l; s++) { a.push(e = []); for (var u, c = 0, d = (u = this[s]).length; c < d; c++)(t = u[c]) && d3_transitionNode(t, c, o, i, { time: (n = t[o][r]).time, ease: n.ease, delay: n.delay + n.duration, duration: n.duration }), e.push(t) } return d3_transition(a, o, i) }, o.svg.axis = function () { var e, t = o.scale.linear(), n = $t, r = 6, i = 6, a = 3, l = [10], u = null; function axis(s) { s.each(function () { var s, c = o.select(this), d = this.__chart__ || t, f = this.__chart__ = t.copy(), h = null == u ? f.ticks ? f.ticks.apply(f, l) : f.domain() : u, p = null == e ? f.tickFormat ? f.tickFormat.apply(f, l) : d3_identity : e, m = c.selectAll(".tick").data(h, f), g = m.enter().insert("g", ".domain").attr("class", "tick").style("opacity", R), v = o.transition(m.exit()).style("opacity", R).remove(), y = o.transition(m.order()).style("opacity", 1), _ = Math.max(r, 0) + a, b = d3_scaleRange(f), w = c.selectAll(".domain").data([0]), x = (w.enter().append("path").attr("class", "domain"), o.transition(w)); g.append("line"), g.append("text"); var C, S, k, T, L = g.select("line"), M = y.select("line"), E = m.select("text").text(p), A = g.select("text"), P = y.select("text"), O = "top" === n || "left" === n ? -1 : 1; if ("bottom" === n || "top" === n ? (s = d3_svg_axisX, C = "x", k = "y", S = "x2", T = "y2", E.attr("dy", O < 0 ? "0em" : ".71em").style("text-anchor", "middle"), x.attr("d", "M" + b[0] + "," + O * i + "V0H" + b[1] + "V" + O * i)) : (s = d3_svg_axisY, C = "y", k = "x", S = "y2", T = "x2", E.attr("dy", ".32em").style("text-anchor", O < 0 ? "end" : "start"), x.attr("d", "M" + O * i + "," + b[0] + "H0V" + b[1] + "H" + O * i)), L.attr(T, O * r), A.attr(k, O * _), M.attr(S, 0).attr(T, O * r), P.attr(C, 0).attr(k, O * _), f.rangeBand) { var D = f, F = D.rangeBand() / 2; d = f = function (e) { return D(e) + F } } else d.rangeBand ? d = f : v.call(s, f, d); g.call(s, d, f), y.call(s, f, f) }) } return axis.scale = function (e) { return arguments.length ? (t = e, axis) : t }, axis.orient = function (e) { return arguments.length ? (n = e in Bt ? e + "" : $t, axis) : n }, axis.ticks = function () { return arguments.length ? (l = s(arguments), axis) : l }, axis.tickValues = function (e) { return arguments.length ? (u = e, axis) : u }, axis.tickFormat = function (t) { return arguments.length ? (e = t, axis) : e }, axis.tickSize = function (e) { var t = arguments.length; return t ? (r = +e, i = +arguments[t - 1], axis) : r }, axis.innerTickSize = function (e) { return arguments.length ? (r = +e, axis) : r }, axis.outerTickSize = function (e) { return arguments.length ? (i = +e, axis) : i }, axis.tickPadding = function (e) { return arguments.length ? (a = +e, axis) : a }, axis.tickSubdivide = function () { return arguments.length && axis }, axis }; var $t = "bottom", Bt = { top: 1, right: 1, bottom: 1, left: 1 }; function d3_svg_axisX(e, t, n) { e.attr("transform", function (e) { var r = t(e); return "translate(" + (isFinite(r) ? r : n(e)) + ",0)" }) } function d3_svg_axisY(e, t, n) { e.attr("transform", function (e) { var r = t(e); return "translate(0," + (isFinite(r) ? r : n(e)) + ")" }) } o.svg.brush = function () { var e, t, n = d3_eventDispatch(brush, "brushstart", "brush", "brushend"), r = null, i = null, a = [0, 0], s = [0, 0], l = !0, u = !0, c = jt[0]; function brush(e) { e.each(function () { var e = o.select(this).style("pointer-events", "all").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)").on("mousedown.brush", brushstart).on("touchstart.brush", brushstart), t = e.selectAll(".background").data([0]); t.enter().append("rect").attr("class", "background").style("visibility", "hidden").style("cursor", "crosshair"), e.selectAll(".extent").data([0]).enter().append("rect").attr("class", "extent").style("cursor", "move"); var n = e.selectAll(".resize").data(c, d3_identity); n.exit().remove(), n.enter().append("g").attr("class", function (e) { return "resize " + e }).style("cursor", function (e) { return zt[e] }).append("rect").attr("x", function (e) { return /[ew]$/.test(e) ? -3 : null }).attr("y", function (e) { return /^[ns]/.test(e) ? -3 : null }).attr("width", 6).attr("height", 6).style("visibility", "hidden"), n.style("display", brush.empty() ? "none" : null); var a, s = o.transition(e), l = o.transition(t); r && (a = d3_scaleRange(r), l.attr("x", a[0]).attr("width", a[1] - a[0]), redrawX(s)), i && (a = d3_scaleRange(i), l.attr("y", a[0]).attr("height", a[1] - a[0]), redrawY(s)), redraw(s) }) } function redraw(e) { e.selectAll(".resize").attr("transform", function (e) { return "translate(" + a[+/e$/.test(e)] + "," + s[+/^s/.test(e)] + ")" }) } function redrawX(e) { e.select(".extent").attr("x", a[0]), e.selectAll(".extent,.n>rect,.s>rect").attr("width", a[1] - a[0]) } function redrawY(e) { e.select(".extent").attr("y", s[0]), e.selectAll(".extent,.e>rect,.w>rect").attr("height", s[1] - s[0]) } function brushstart() { var c, d, f = this, h = o.select(o.event.target), p = n.of(f, arguments), m = o.select(f), g = h.datum(), v = !/^(n|s)$/.test(g) && r, y = !/^(e|w)$/.test(g) && i, _ = h.classed("extent"), b = d3_event_dragSuppress(f), w = o.mouse(f), x = o.select(d3_window(f)).on("keydown.brush", function keydown() { 32 == o.event.keyCode && (_ || (c = null, w[0] -= a[1], w[1] -= s[1], _ = 2), d3_eventPreventDefault()) }).on("keyup.brush", function keyup() { 32 == o.event.keyCode && 2 == _ && (w[0] += a[1], w[1] += s[1], _ = 0, d3_eventPreventDefault()) }); if (o.event.changedTouches ? x.on("touchmove.brush", brushmove).on("touchend.brush", brushend) : x.on("mousemove.brush", brushmove).on("mouseup.brush", brushend), m.interrupt().selectAll("*").interrupt(), _) w[0] = a[0] - w[0], w[1] = s[0] - w[1]; else if (g) { var C = +/w$/.test(g), S = +/^n/.test(g); d = [a[1 - C] - w[0], s[1 - S] - w[1]], w[0] = a[C], w[1] = s[S] } else o.event.altKey && (c = w.slice()); function brushmove() { var e = o.mouse(f), t = !1; d && (e[0] += d[0], e[1] += d[1]), _ || (o.event.altKey ? (c || (c = [(a[0] + a[1]) / 2, (s[0] + s[1]) / 2]), w[0] = a[+(e[0] < c[0])], w[1] = s[+(e[1] < c[1])]) : c = null), v && move1(e, r, 0) && (redrawX(m), t = !0), y && move1(e, i, 1) && (redrawY(m), t = !0), t && (redraw(m), p({ type: "brush", mode: _ ? "move" : "resize" })) } function move1(n, r, i) { var o, d, f = d3_scaleRange(r), h = f[0], p = f[1], m = w[i], g = i ? s : a, v = g[1] - g[0]; if (_ && (h -= m, p -= v + m), o = (i ? u : l) ? Math.max(h, Math.min(p, n[i])) : n[i], _ ? d = (o += m) + v : (c && (m = Math.max(h, Math.min(p, 2 * c[i] - o))), m < o ? (d = o, o = m) : d = m), g[0] != o || g[1] != d) return i ? t = null : e = null, g[0] = o, g[1] = d, !0 } function brushend() { brushmove(), m.style("pointer-events", "all").selectAll(".resize").style("display", brush.empty() ? "none" : null), o.select("body").style("cursor", null), x.on("mousemove.brush", null).on("mouseup.brush", null).on("touchmove.brush", null).on("touchend.brush", null).on("keydown.brush", null).on("keyup.brush", null), b(), p({ type: "brushend" }) } m.style("pointer-events", "none").selectAll(".resize").style("display", null), o.select("body").style("cursor", h.style("cursor")), p({ type: "brushstart" }), brushmove() } return brush.event = function (r) { r.each(function () { var r = n.of(this, arguments), i = { x: a, y: s, i: e, j: t }, l = this.__chart__ || i; this.__chart__ = i, Dt ? o.select(this).transition().each("start.brush", function () { e = l.i, t = l.j, a = l.x, s = l.y, r({ type: "brushstart" }) }).tween("brush:brush", function () { var n = d3_interpolateArray(a, i.x), o = d3_interpolateArray(s, i.y); return e = t = null, function (e) { a = i.x = n(e), s = i.y = o(e), r({ type: "brush", mode: "resize" }) } }).each("end.brush", function () { e = i.i, t = i.j, r({ type: "brush", mode: "resize" }), r({ type: "brushend" }) }) : (r({ type: "brushstart" }), r({ type: "brush", mode: "resize" }), r({ type: "brushend" })) }) }, brush.x = function (e) { return arguments.length ? (c = jt[!(r = e) << 1 | !i], brush) : r }, brush.y = function (e) { return arguments.length ? (c = jt[!r << 1 | !(i = e)], brush) : i }, brush.clamp = function (e) { return arguments.length ? (r && i ? (l = !!e[0], u = !!e[1]) : r ? l = !!e : i && (u = !!e), brush) : r && i ? [l, u] : r ? l : i ? u : null }, brush.extent = function (n) { var o, l, u, c, d; return arguments.length ? (r && (o = n[0], l = n[1], i && (o = o[0], l = l[0]), e = [o, l], r.invert && (o = r(o), l = r(l)), l < o && (d = o, o = l, l = d), o == a[0] && l == a[1] || (a = [o, l])), i && (u = n[0], c = n[1], r && (u = u[1], c = c[1]), t = [u, c], i.invert && (u = i(u), c = i(c)), c < u && (d = u, u = c, c = d), u == s[0] && c == s[1] || (s = [u, c])), brush) : (r && (e ? (o = e[0], l = e[1]) : (o = a[0], l = a[1], r.invert && (o = r.invert(o), l = r.invert(l)), l < o && (d = o, o = l, l = d))), i && (t ? (u = t[0], c = t[1]) : (u = s[0], c = s[1], i.invert && (u = i.invert(u), c = i.invert(c)), c < u && (d = u, u = c, c = d))), r && i ? [[o, u], [l, c]] : r ? [o, l] : i && [u, c]) }, brush.clear = function () { return brush.empty() || (a = [0, 0], s = [0, 0], e = t = null), brush }, brush.empty = function () { return !!r && a[0] == a[1] || !!i && s[0] == s[1] }, o.rebind(brush, n, "on") }; var zt = { n: "ns-resize", e: "ew-resize", s: "ns-resize", w: "ew-resize", nw: "nwse-resize", ne: "nesw-resize", se: "nwse-resize", sw: "nesw-resize" }, jt = [["n", "e", "s", "w", "nw", "ne", "se", "sw"], ["e", "w"], ["n", "s"], []], Ut = se.format = he.timeFormat, qt = Ut.utc, Ht = qt("%Y-%m-%dT%H:%M:%S.%LZ"); function d3_time_formatIsoNative(e) { return e.toISOString() } function d3_time_scale(e, t, n) { function scale(t) { return e(t) } function tickMethod(e, n) { var r = (e[1] - e[0]) / n, i = o.bisect(Vt, r); return i == Vt.length ? [t.year, d3_scale_linearTickRange(e.map(function (e) { return e / 31536e6 }), n)[2]] : i ? t[r / Vt[i - 1] < Vt[i] / r ? i - 1 : i] : [Yt, d3_scale_linearTickRange(e, n)[2]] } return scale.invert = function (t) { return d3_time_scaleDate(e.invert(t)) }, scale.domain = function (t) { return arguments.length ? (e.domain(t), scale) : e.domain().map(d3_time_scaleDate) }, scale.nice = function (e, t) { var n = scale.domain(), r = d3_scaleExtent(n), i = null == e ? tickMethod(r, 10) : "number" == typeof e && tickMethod(r, e); function skipped(n) { return !isNaN(n) && !e.range(n, d3_time_scaleDate(+n + 1), t).length } return i && (e = i[0], t = i[1]), scale.domain(d3_scale_nice(n, t > 1 ? { floor: function (t) { for (; skipped(t = e.floor(t));)t = d3_time_scaleDate(t - 1); return t }, ceil: function (t) { for (; skipped(t = e.ceil(t));)t = d3_time_scaleDate(+t + 1); return t } } : e)) }, scale.ticks = function (e, t) { var n = d3_scaleExtent(scale.domain()), r = null == e ? tickMethod(n, 10) : "number" == typeof e ? tickMethod(n, e) : !e.range && [{ range: e }, t]; return r && (e = r[0], t = r[1]), e.range(n[0], d3_time_scaleDate(+n[1] + 1), t < 1 ? 1 : t) }, scale.tickFormat = function () { return n }, scale.copy = function () { return d3_time_scale(e.copy(), t, n) }, d3_scale_linearRebind(scale, e) } function d3_time_scaleDate(e) { return new Date(e) } Ut.iso = Date.prototype.toISOString && +new Date("2000-01-01T00:00:00.000Z") ? d3_time_formatIsoNative : Ht, d3_time_formatIsoNative.parse = function (e) { var t = new Date(e); return isNaN(t) ? null : t }, d3_time_formatIsoNative.toString = Ht.toString, se.second = d3_time_interval(function (e) { return new le(1e3 * Math.floor(e / 1e3)) }, function (e, t) { e.setTime(e.getTime() + 1e3 * Math.floor(t)) }, function (e) { return e.getSeconds() }), se.seconds = se.second.range, se.seconds.utc = se.second.utc.range, se.minute = d3_time_interval(function (e) { return new le(6e4 * Math.floor(e / 6e4)) }, function (e, t) { e.setTime(e.getTime() + 6e4 * Math.floor(t)) }, function (e) { return e.getMinutes() }), se.minutes = se.minute.range, se.minutes.utc = se.minute.utc.range, se.hour = d3_time_interval(function (e) { var t = e.getTimezoneOffset() / 60; return new le(36e5 * (Math.floor(e / 36e5 - t) + t)) }, function (e, t) { e.setTime(e.getTime() + 36e5 * Math.floor(t)) }, function (e) { return e.getHours() }), se.hours = se.hour.range, se.hours.utc = se.hour.utc.range, se.month = d3_time_interval(function (e) { return (e = se.day(e)).setDate(1), e }, function (e, t) { e.setMonth(e.getMonth() + t) }, function (e) { return e.getMonth() }), se.months = se.month.range, se.months.utc = se.month.utc.range; var Vt = [1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6], Gt = [[se.second, 1], [se.second, 5], [se.second, 15], [se.second, 30], [se.minute, 1], [se.minute, 5], [se.minute, 15], [se.minute, 30], [se.hour, 1], [se.hour, 3], [se.hour, 6], [se.hour, 12], [se.day, 1], [se.day, 2], [se.week, 1], [se.month, 1], [se.month, 3], [se.year, 1]], Wt = Ut.multi([[".%L", function (e) { return e.getMilliseconds() }], [":%S", function (e) { return e.getSeconds() }], ["%I:%M", function (e) { return e.getMinutes() }], ["%I %p", function (e) { return e.getHours() }], ["%a %d", function (e) { return e.getDay() && 1 != e.getDate() }], ["%b %d", function (e) { return 1 != e.getDate() }], ["%B", function (e) { return e.getMonth() }], ["%Y", d3_true]]), Yt = { range: function (e, t, n) { return o.range(Math.ceil(e / n) * n, +t, n).map(d3_time_scaleDate) }, floor: d3_identity, ceil: d3_identity }; Gt.year = se.year, se.scale = function () { return d3_time_scale(o.scale.linear(), Gt, Wt) }; var Zt = Gt.map(function (e) { return [e[0].utc, e[1]] }), Kt = qt.multi([[".%L", function (e) { return e.getUTCMilliseconds() }], [":%S", function (e) { return e.getUTCSeconds() }], ["%I:%M", function (e) { return e.getUTCMinutes() }], ["%I %p", function (e) { return e.getUTCHours() }], ["%a %d", function (e) { return e.getUTCDay() && 1 != e.getUTCDate() }], ["%b %d", function (e) { return 1 != e.getUTCDate() }], ["%B", function (e) { return e.getUTCMonth() }], ["%Y", d3_true]]); function d3_json(e) { return JSON.parse(e.responseText) } function d3_html(e) { var t = l.createRange(); return t.selectNode(l.body), t.createContextualFragment(e.responseText) } Zt.year = se.year.utc, se.scale.utc = function () { return d3_time_scale(o.scale.linear(), Zt, Kt) }, o.text = d3_xhrType(function (e) { return e.responseText }), o.json = function (e, t) { return d3_xhr(e, "application/json", d3_json, t) }, o.html = function (e, t) { return d3_xhr(e, "text/html", d3_html, t) }, o.xml = d3_xhrType(function (e) { return e.responseXML }), this.d3 = o, void 0 === (i = "function" == typeof (r = o) ? r.call(t, n, t, e) : r) || (e.exports = i) }() }, function(e, t, n) { (function (e, r) { var i = n(334), o = n(433), a = n(246); var s = { version: function getVersion() { return e.browser ? n(161).version.split(".") : parseInt(e.version.split(".")[1], 10) > 4 ? n(161).version.split(".") : JSON.parse(o.readFileSync(a.join(r, "../../package.json"))).version.split(".") }(), Parser: n(3087).Parser, Renderer: n(3086).Renderer, tree: n(57), RendererJS: n(3085), default_reference: n(1358), writeError: function (e, t) { var n = "", r = e.extract, o = []; if (!(t = t || {}).silent) { if (t.indent = t.indent || "", !("index" in e && r)) return i.error(t.indent + (e.stack || e.message)); "string" == typeof r[0] && o.push(stylize(e.line - 1 + " " + r[0], "grey")), "" === r[1] && void 0 === r[2] && (r[1] = "\xb6"), o.push(e.line + " " + r[1].slice(0, e.column) + stylize(stylize(r[1][e.column], "bold") + r[1].slice(e.column + 1), "yellow")), "string" == typeof r[2] && o.push(stylize(e.line + 1 + " " + r[2], "grey")), o = t.indent + o.join("\n" + t.indent) + "\x1b[0m\n", n = t.indent + n + stylize(e.message, "red"), e.filename && (n += stylize(" in ", "red") + e.filename), i.error(n, o), e.callLine && (i.error(stylize("from ", "red") + (e.filename || "")), i.error(stylize(e.callLine, "grey") + " " + e.callExtract)), e.stack && i.error(stylize(e.stack, "red")) } } }; for (var l in n(3084), n(3083), n(3082), n(3081), n(3080), n(3079), n(3078), n(3077), n(3076), n(3075), n(3074), n(3073), n(3072), n(3071), n(3070), n(3069), n(3068), n(3067), n(3066), n(3065), n(3064), n(3063), n(3062), n(3061), n(3060), n(3059), n(3058), n(3057), n(3056), s) t[l] = s[l]; function stylize(e, t) { var n = { bold: [1, 22], inverse: [7, 27], underline: [4, 24], yellow: [33, 39], green: [32, 39], red: [31, 39], grey: [90, 39] }; return "\x1b[" + n[t][0] + "m" + e + "\x1b[" + n[t][1] + "m" } }).call(this, n(197), "/") }, function(e, t, n) { "use strict"; var r, i, o = n(191), a = function (e) { var t = document.createEvent("Event"); return t.initEvent(e, !0, !0), t }; e.exports = function (e, t, n) { if (void 0 === e) throw "You must provide an element to the update-scroll function"; if (void 0 === t) throw "You must provide an axis to the update-scroll function"; if (void 0 === n) throw "You must provide a value to the update-scroll function"; "top" === t && n <= 0 && (e.scrollTop = n = 0, e.dispatchEvent(a("ps-y-reach-start"))), "left" === t && n <= 0 && (e.scrollLeft = n = 0, e.dispatchEvent(a("ps-x-reach-start"))); var s = o.get(e); "top" === t && n >= s.contentHeight - s.containerHeight && ((n = s.contentHeight - s.containerHeight) - e.scrollTop <= 1 ? n = e.scrollTop : e.scrollTop = n, e.dispatchEvent(a("ps-y-reach-end"))), "left" === t && n >= s.contentWidth - s.containerWidth && ((n = s.contentWidth - s.containerWidth) - e.scrollLeft <= 1 ? n = e.scrollLeft : e.scrollLeft = n, e.dispatchEvent(a("ps-x-reach-end"))), r || (r = e.scrollTop), i || (i = e.scrollLeft), "top" === t && n < r && e.dispatchEvent(a("ps-scroll-up")), "top" === t && n > r && e.dispatchEvent(a("ps-scroll-down")), "left" === t && n < i && e.dispatchEvent(a("ps-scroll-left")), "left" === t && n > i && e.dispatchEvent(a("ps-scroll-right")), "top" === t && (e.scrollTop = r = n, e.dispatchEvent(a("ps-scroll-y"))), "left" === t && (e.scrollLeft = i = n, e.dispatchEvent(a("ps-scroll-x"))) } }, function(e, t, n) { "use strict"; e.exports = n(3145) }, function(e, t, n) { var r = n(18), i = n(10), o = n(5), a = n(0), s = function getGeometry(e) { return e.geometry || e }; e.exports = { getGeometryType: function getGeometryType(e) { return s(e).type }, getGeometryCoordinates: function getGeometryCoordinates(e) { return s(e).coordinates }, convertLatlngsToLnglats: function convertLatlngsToLnglats(e) { return o(a).call(a, e, this.convertLatlngToLngLat) }, convertLatlngToLngLat: function convertLatlngToLngLat(e) { return [e[1], e[0]] }, convertLngLatsToLatLngs: function convertLngLatsToLatLngs(e) { return o(a).call(a, e, this.convertLngLatToLatLng) }, convertLngLatToLatLng: function convertLngLatToLatLng(e) { return [e[1], e[0]] }, convertLatLngsToGeoJSONPointCoords: function convertLatLngsToGeoJSONPointCoords(e) { return this.convertLatlngToLngLat(e) }, convertLatLngsToGeoJSONPolylineCoords: function convertLatLngsToGeoJSONPolylineCoords(e) { return this.convertLatlngsToLnglats(e) }, convertLatLngsToGeoJSONPolygonCoords: function convertLatLngsToGeoJSONPolygonCoords(e) { return e = i(e).call(e, [e[0]]), this.convertLatlngsToLnglats(e) }, getPointLatLngFromGeoJSONCoords: function getPointLatLngFromGeoJSONCoords(e) { var t = this.getGeometryCoordinates(e); return this.convertLngLatToLatLng(t) }, getPolylineLatLngsFromGeoJSONCoords: function getPolylineLatLngsFromGeoJSONCoords(e) { var t = this.getGeometryCoordinates(e); return this.convertLngLatsToLatLngs(t) }, getPolygonLatLngsFromGeoJSONCoords: function getPolygonLatLngsFromGeoJSONCoords(e) { var t = this.getGeometryCoordinates(e)[0], n = this.convertLngLatsToLatLngs(t); return n = r(n).call(n, 0, -1) }, getMultiPointLatLngsFromGeoJSONCoords: function getMultiPointLatLngsFromGeoJSONCoords(e) { var t = this.getGeometryCoordinates(e); return this.convertLngLatsToLatLngs(t) }, getMultiPolylineLatLngsFromGeoJSONCoords: function getMultiPolylineLatLngsFromGeoJSONCoords(e) { var t = this.getGeometryCoordinates(e); return o(a).call(a, t, function (e) { return this.convertLngLatsToLatLngs(e) }, this) }, getMultiPolygonLatLngsFromGeoJSONCoords: function getMultiPolygonLatLngsFromGeoJSONCoords(e) { var t = this.getGeometryCoordinates(e); return o(a).call(a, t, function (e) { var t = this.convertLngLatsToLatLngs(e[0]); return t = r(t).call(t, 0, -1) }, this) } } }, function(e, t, n) { var r = n(146), i = n(59), o = n(637), a = n(926), s = n(154).f, l = n(347).f, u = n(1538), c = n(922), d = n(1539), f = n(213), h = n(109), p = n(250).set, m = n(623), g = n(114)("match"), v = i.RegExp, y = v.prototype, _ = /a/g, b = /a/g, w = new v(_) !== _, x = d.UNSUPPORTED_Y; if (r && o("RegExp", !w || x || h(function () { return b[g] = !1, v(_) != _ || v(b) == b || "/a/i" != v(_, "i") }))) { for (var C = function RegExp(e, t) { var n, r = this instanceof C, i = u(e), o = void 0 === t; if (!r && i && e.constructor === C && o) return e; w ? i && !o && (e = e.source) : e instanceof C && (o && (t = c.call(e)), e = e.source), x && (n = !!t && t.indexOf("y") > -1) && (t = t.replace(/y/g, "")); var s = a(w ? new v(e, t) : v(e, t), r ? this : y, C); return x && n && p(s, { sticky: n }), s }, S = function (e) { e in C || s(C, e, { configurable: !0, get: function () { return v[e] }, set: function (t) { v[e] = t } }) }, k = l(v), T = 0; k.length > T;)S(k[T++]); y.constructor = C, C.prototype = y, f(i, "RegExp", C) } m("RegExp") }, function(e, t, n) { "use strict"; var r = n(3506).charAt, i = n(306), o = n(909), a = i.set, s = i.getterFor("String Iterator"); o(String, "String", function (e) { a(this, { type: "String Iterator", string: String(e), index: 0 }) }, function next() { var e, t = s(this), n = t.string, i = t.index; return i >= n.length ? { value: void 0, done: !0 } : (e = r(n, i), t.index += e.length, { value: e, done: !1 }) }) }, function(e, t, n) { var r = n(908), i = n(222).f, o = n(236), a = n(212), s = n(3538), l = n(118)("toStringTag"); e.exports = function (e, t, n, u) { if (e) { var c = n ? e : e.prototype; a(c, l) || i(c, l, { configurable: !0, value: t }), u && !r && o(c, "toString", s) } } }, function(e, t, n) { var r, i, o, a = n(3539), s = n(119), l = n(129), u = n(236), c = n(212), d = n(627), f = n(454), h = s.WeakMap; if (a) { var p = new h, m = p.get, g = p.has, v = p.set; r = function (e, t) { return v.call(p, e, t), t }, i = function (e) { return m.call(p, e) || {} }, o = function (e) { return g.call(p, e) } } else { var y = d("state"); f[y] = !0, r = function (e, t) { return u(e, y, t), t }, i = function (e) { return c(e, y) ? e[y] : {} }, o = function (e) { return c(e, y) } } e.exports = { set: r, get: i, has: o, enforce: function (e) { return o(e) ? i(e) : r(e, {}) }, getterFor: function (e) { return function (t) { var n; if (!l(t) || (n = i(t)).type !== e) throw TypeError("Incompatible receiver, " + e + " required"); return n } } } }, function(e, t) { e.exports = !0 }, function(e, t, n) { var r = n(459), i = n(251); e.exports = function (e) { return r(i(e)) } },,,,, function(e, t, n) { e.exports = n(3410) }, function(e, t, n) { e.exports = n(3339) }, function(e, t, n) { "use strict"; n.d(t, "a", function () { return setUrlParameters }); n(23); var r = n(5), i = n.n(r), o = n(10), a = n.n(o), s = n(6), l = n.n(s); function setUrlParameters(e) { var t, n = window.location.protocol + "//" + window.location.host + window.location.pathname, r = [], o = l()(e).categories; for (var s in o) { var u, c; if (o[s].length) r.push(a()(u = "".concat(s, "=")).call(u, i()(c = o[s]).call(c, function (e) { return e.id }).join())) } l()(e).searchText && r.push("search=".concat(encodeURIComponent(l()(e).searchText))), l()(e).page && r.push("page=".concat(l()(e).page + 1)), r = r.join("&"); var d = a()(t = "".concat(n)).call(t, r ? "?".concat(r) : ""); window.history.pushState(null, null, d) } },,,,,,,,,,,,,,,,,, function(e, t, n) { "use strict"; function ValuesResult(e, t, n, r) { this.result = e, this.defaultSize = t || e.length, this.getter = n, this.maxSize = r || e.length } e.exports = ValuesResult, ValuesResult.prototype.get = function (e) { return e = e || this.defaultSize, this.getter ? this.getter(this.result, e) : Array.isArray(this.result) ? e > 0 ? this.result.slice(0, e) : this.result : this.result.hasOwnProperty(e) ? this.result[e] : this.result[this.defaultSize] }, ValuesResult.prototype.getLength = function (e) { return this.get(e).length }, ValuesResult.prototype.getMaxSize = function () { return this.maxSize }, ValuesResult.prototype.toString = function () { return JSON.stringify({ result: this.result, defaultSize: this.defaultSize, getter: this.getter && this.getter.toString() }) }, ValuesResult.prototype.is = function (e) { return this.constructor === e } }, function(e, t, n) { (function (e) { var r = Object.getOwnPropertyDescriptors || function getOwnPropertyDescriptors(e) { for (var t = Object.keys(e), n = {}, r = 0; r < t.length; r++)n[t[r]] = Object.getOwnPropertyDescriptor(e, t[r]); return n }, i = /%[sdj%]/g; t.format = function (e) { if (!isString(e)) { for (var t = [], n = 0; n < arguments.length; n++)t.push(inspect(arguments[n])); return t.join(" ") } n = 1; for (var r = arguments, o = r.length, a = String(e).replace(i, function (e) { if ("%%" === e) return "%"; if (n >= o) return e; switch (e) { case "%s": return String(r[n++]); case "%d": return Number(r[n++]); case "%j": try { return JSON.stringify(r[n++]) } catch (e) { return "[Circular]" } default: return e } }), s = r[n]; n < o; s = r[++n])isNull(s) || !isObject(s) ? a += " " + s : a += " " + inspect(s); return a }, t.deprecate = function (n, r) { if (void 0 !== e && !0 === e.noDeprecation) return n; if (void 0 === e) return function () { return t.deprecate(n, r).apply(this, arguments) }; var i = !1; return function deprecated() { if (!i) { if (e.throwDeprecation) throw new Error(r); e.traceDeprecation ? console.trace(r) : console.error(r), i = !0 } return n.apply(this, arguments) } }; var o, a = {}; function inspect(e, n) { var r = { seen: [], stylize: stylizeNoColor }; return arguments.length >= 3 && (r.depth = arguments[2]), arguments.length >= 4 && (r.colors = arguments[3]), isBoolean(n) ? r.showHidden = n : n && t._extend(r, n), isUndefined(r.showHidden) && (r.showHidden = !1), isUndefined(r.depth) && (r.depth = 2), isUndefined(r.colors) && (r.colors = !1), isUndefined(r.customInspect) && (r.customInspect = !0), r.colors && (r.stylize = stylizeWithColor), formatValue(r, e, r.depth) } function stylizeWithColor(e, t) { var n = inspect.styles[t]; return n ? "\x1b[" + inspect.colors[n][0] + "m" + e + "\x1b[" + inspect.colors[n][1] + "m" : e } function stylizeNoColor(e, t) { return e } function formatValue(e, n, r) { if (e.customInspect && n && isFunction(n.inspect) && n.inspect !== t.inspect && (!n.constructor || n.constructor.prototype !== n)) { var i = n.inspect(r, e); return isString(i) || (i = formatValue(e, i, r)), i } var o = function formatPrimitive(e, t) { if (isUndefined(t)) return e.stylize("undefined", "undefined"); if (isString(t)) { var n = "'" + JSON.stringify(t).replace(/^"|"$/g, "").replace(/'/g, "\\'").replace(/\\"/g, '"') + "'"; return e.stylize(n, "string") } if (isNumber(t)) return e.stylize("" + t, "number"); if (isBoolean(t)) return e.stylize("" + t, "boolean"); if (isNull(t)) return e.stylize("null", "null") }(e, n); if (o) return o; var a = Object.keys(n), s = function arrayToHash(e) { var t = {}; return e.forEach(function (e, n) { t[e] = !0 }), t }(a); if (e.showHidden && (a = Object.getOwnPropertyNames(n)), isError(n) && (a.indexOf("message") >= 0 || a.indexOf("description") >= 0)) return formatError(n); if (0 === a.length) { if (isFunction(n)) { var l = n.name ? ": " + n.name : ""; return e.stylize("[Function" + l + "]", "special") } if (isRegExp(n)) return e.stylize(RegExp.prototype.toString.call(n), "regexp"); if (isDate(n)) return e.stylize(Date.prototype.toString.call(n), "date"); if (isError(n)) return formatError(n) } var u, c = "", d = !1, f = ["{", "}"]; (isArray(n) && (d = !0, f = ["[", "]"]), isFunction(n)) && (c = " [Function" + (n.name ? ": " + n.name : "") + "]"); return isRegExp(n) && (c = " " + RegExp.prototype.toString.call(n)), isDate(n) && (c = " " + Date.prototype.toUTCString.call(n)), isError(n) && (c = " " + formatError(n)), 0 !== a.length || d && 0 != n.length ? r < 0 ? isRegExp(n) ? e.stylize(RegExp.prototype.toString.call(n), "regexp") : e.stylize("[Object]", "special") : (e.seen.push(n), u = d ? function formatArray(e, t, n, r, i) { for (var o = [], a = 0, s = t.length; a < s; ++a)hasOwnProperty(t, String(a)) ? o.push(formatProperty(e, t, n, r, String(a), !0)) : o.push(""); return i.forEach(function (i) { i.match(/^\d+$/) || o.push(formatProperty(e, t, n, r, i, !0)) }), o }(e, n, r, s, a) : a.map(function (t) { return formatProperty(e, n, r, s, t, d) }), e.seen.pop(), function reduceToSingleString(e, t, n) { if (e.reduce(function (e, t) { return 0, t.indexOf("\n") >= 0 && 0, e + t.replace(/\u001b\[\d\d?m/g, "").length + 1 }, 0) > 60) return n[0] + ("" === t ? "" : t + "\n ") + " " + e.join(",\n  ") + " " + n[1]; return n[0] + t + " " + e.join(", ") + " " + n[1] }(u, c, f)) : f[0] + c + f[1] } function formatError(e) { return "[" + Error.prototype.toString.call(e) + "]" } function formatProperty(e, t, n, r, i, o) { var a, s, l; if ((l = Object.getOwnPropertyDescriptor(t, i) || { value: t[i] }).get ? s = l.set ? e.stylize("[Getter/Setter]", "special") : e.stylize("[Getter]", "special") : l.set && (s = e.stylize("[Setter]", "special")), hasOwnProperty(r, i) || (a = "[" + i + "]"), s || (e.seen.indexOf(l.value) < 0 ? (s = isNull(n) ? formatValue(e, l.value, null) : formatValue(e, l.value, n - 1)).indexOf("\n") > -1 && (s = o ? s.split("\n").map(function (e) { return "  " + e }).join("\n").substr(2) : "\n" + s.split("\n").map(function (e) { return "   " + e }).join("\n")) : s = e.stylize("[Circular]", "special")), isUndefined(a)) { if (o && i.match(/^\d+$/)) return s; (a = JSON.stringify("" + i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/) ? (a = a.substr(1, a.length - 2), a = e.stylize(a, "name")) : (a = a.replace(/'/g, "\\'").replace(/\\"/g, '"').replace(/(^"|"$)/g, "'"), a = e.stylize(a, "string")) } return a + ": " + s } function isArray(e) { return Array.isArray(e) } function isBoolean(e) { return "boolean" == typeof e } function isNull(e) { return null === e } function isNumber(e) { return "number" == typeof e } function isString(e) { return "string" == typeof e } function isUndefined(e) { return void 0 === e } function isRegExp(e) { return isObject(e) && "[object RegExp]" === objectToString(e) } function isObject(e) { return "object" == typeof e && null !== e } function isDate(e) { return isObject(e) && "[object Date]" === objectToString(e) } function isError(e) { return isObject(e) && ("[object Error]" === objectToString(e) || e instanceof Error) } function isFunction(e) { return "function" == typeof e } function objectToString(e) { return Object.prototype.toString.call(e) } function pad(e) { return e < 10 ? "0" + e.toString(10) : e.toString(10) } t.debuglog = function (n) { if (isUndefined(o) && (o = e.env.NODE_DEBUG || ""), n = n.toUpperCase(), !a[n]) if (new RegExp("\\b" + n + "\\b", "i").test(o)) { var r = e.pid; a[n] = function () { var e = t.format.apply(t, arguments); console.error("%s %d: %s", n, r, e) } } else a[n] = function () { }; return a[n] }, t.inspect = inspect, inspect.colors = { bold: [1, 22], italic: [3, 23], underline: [4, 24], inverse: [7, 27], white: [37, 39], grey: [90, 39], black: [30, 39], blue: [34, 39], cyan: [36, 39], green: [32, 39], magenta: [35, 39], red: [31, 39], yellow: [33, 39] }, inspect.styles = { special: "cyan", number: "yellow", boolean: "yellow", undefined: "grey", null: "bold", string: "green", date: "magenta", regexp: "red" }, t.isArray = isArray, t.isBoolean = isBoolean, t.isNull = isNull, t.isNullOrUndefined = function isNullOrUndefined(e) { return null == e }, t.isNumber = isNumber, t.isString = isString, t.isSymbol = function isSymbol(e) { return "symbol" == typeof e }, t.isUndefined = isUndefined, t.isRegExp = isRegExp, t.isObject = isObject, t.isDate = isDate, t.isError = isError, t.isFunction = isFunction, t.isPrimitive = function isPrimitive(e) { return null === e || "boolean" == typeof e || "number" == typeof e || "string" == typeof e || "symbol" == typeof e || void 0 === e }, t.isBuffer = n(3089); var s = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]; function hasOwnProperty(e, t) { return Object.prototype.hasOwnProperty.call(e, t) } t.log = function () { console.log("%s - %s", function timestamp() { var e = new Date, t = [pad(e.getHours()), pad(e.getMinutes()), pad(e.getSeconds())].join(":"); return [e.getDate(), s[e.getMonth()], t].join(" ") }(), t.format.apply(t, arguments)) }, t.inherits = n(3088), t._extend = function (e, t) { if (!t || !isObject(t)) return e; for (var n = Object.keys(t), r = n.length; r--;)e[n[r]] = t[n[r]]; return e }; var l = "undefined" != typeof Symbol ? Symbol("util.promisify.custom") : void 0; function callbackifyOnRejected(e, t) { if (!e) { var n = new Error("Promise was rejected with a falsy value"); n.reason = e, e = n } return t(e) } t.promisify = function promisify(e) { if ("function" != typeof e) throw new TypeError('The "original" argument must be of type Function'); if (l && e[l]) { var t; if ("function" != typeof (t = e[l])) throw new TypeError('The "util.promisify.custom" argument must be of type Function'); return Object.defineProperty(t, l, { value: t, enumerable: !1, writable: !1, configurable: !0 }), t } function t() { for (var t, n, r = new Promise(function (e, r) { t = e, n = r }), i = [], o = 0; o < arguments.length; o++)i.push(arguments[o]); i.push(function (e, r) { e ? n(e) : t(r) }); try { e.apply(this, i) } catch (e) { n(e) } return r } return Object.setPrototypeOf(t, Object.getPrototypeOf(e)), l && Object.defineProperty(t, l, { value: t, enumerable: !1, writable: !1, configurable: !0 }), Object.defineProperties(t, r(e)) }, t.promisify.custom = l, t.callbackify = function callbackify(t) { if ("function" != typeof t) throw new TypeError('The "original" argument must be of type Function'); function callbackified() { for (var n = [], r = 0; r < arguments.length; r++)n.push(arguments[r]); var i = n.pop(); if ("function" != typeof i) throw new TypeError("The last argument must be of type Function"); var o = this, a = function () { return i.apply(o, arguments) }; t.apply(this, n).then(function (t) { e.nextTick(a, null, t) }, function (t) { e.nextTick(callbackifyOnRejected, t, a) }) } return Object.setPrototypeOf(callbackified, Object.getPrototypeOf(t)), Object.defineProperties(callbackified, r(t)), callbackified } }).call(this, n(197)) }, function(e, t, n) { "use strict"; var r = {}; r.e = function (e, t) { var n = document.createElement(e); return n.className = t, n }, r.appendTo = function (e, t) { return t.appendChild(e), e }, r.css = function (e, t, n) { return "object" == typeof t ? function cssMultiSet(e, t) { for (var n in t) { var r = t[n]; "number" == typeof r && (r = r.toString() + "px"), e.style[n] = r } return e }(e, t) : void 0 === n ? function cssGet(e, t) { var n = window.getComputedStyle(e); return n ? n[t] : null }(e, t) : function cssSet(e, t, n) { return "number" == typeof n && (n = n.toString() + "px"), e.style[t] = n, e }(e, t, n) }, r.matches = function (e, t) { return void 0 !== e.matches ? e.matches(t) : void 0 !== e.matchesSelector ? e.matchesSelector(t) : void 0 !== e.webkitMatchesSelector ? e.webkitMatchesSelector(t) : void 0 !== e.mozMatchesSelector ? e.mozMatchesSelector(t) : void 0 !== e.msMatchesSelector ? e.msMatchesSelector(t) : void 0 }, r.remove = function (e) { void 0 !== e.remove ? e.remove() : e.parentNode && e.parentNode.removeChild(e) }, r.queryChildren = function (e, t) { return Array.prototype.filter.call(e.childNodes, function (e) { return r.matches(e, t) }) }, e.exports = r }, function(e, t, n) { var r = n(22); e.exports = function startOfDay(e) { var t = r(e); return t.setHours(0, 0, 0, 0), t } }, function(e, t, n) { var r = n(618); e.exports = function startOfISOWeek(e) { return r(e, { weekStartsOn: 1 }) } }, function(e, t, n) { var r = n(22), i = n(337); e.exports = function getISOYear(e) { var t = r(e), n = t.getFullYear(), o = new Date(0); o.setFullYear(n + 1, 0, 4), o.setHours(0, 0, 0, 0); var a = i(o), s = new Date(0); s.setFullYear(n, 0, 4), s.setHours(0, 0, 0, 0); var l = i(s); return t.getTime() >= a.getTime() ? n + 1 : t.getTime() >= l.getTime() ? n : n - 1 } }, function(e, t, n) { var r = n(154).f, i = n(140), o = n(114)("toStringTag"); e.exports = function (e, t, n) { e && !i(e = n ? e : e.prototype, o) && r(e, o, { configurable: !0, value: t }) } }, function(e, t) { e.exports = {} }, function(e, t, n) { var r, i = n(211), o = n(1535), a = n(917), s = n(454), l = n(1527), u = n(919), c = n(627)("IE_PROTO"), d = function () { }, f = function (e) { return "<script>" + e + "<\/script>" }, h = function () { try { r = document.domain && new ActiveXObject("htmlfile") } catch (e) { } var e, t; h = r ? function (e) { e.write(f("")), e.close(); var t = e.parentWindow.Object; return e = null, t }(r) : ((t = u("iframe")).style.display = "none", l.appendChild(t), t.src = String("javascript:"), (e = t.contentWindow.document).open(), e.write(f("document.F=Object")), e.close(), e.F); for (var n = a.length; n--;)delete h.prototype[a[n]]; return h() }; s[c] = !0, e.exports = Object.create || function create(e, t) { var n; return null !== e ? (d.prototype = i(e), n = new d, d.prototype = null, n[c] = e) : n = h(), void 0 === t ? n : o(n, t) } }, function(e, t, n) { "use strict"; var r = n(67); e.exports = function (e, t) { var n = [][e]; return !!n && r(function () { n.call(null, t || function () { throw 1 }, 1) }) } }, function(e, t, n) { var r = n(248); e.exports = function (e, t, n) { if (r(e), void 0 === t) return e; switch (n) { case 0: return function () { return e.call(t) }; case 1: return function (n) { return e.call(t, n) }; case 2: return function (n, r) { return e.call(t, n, r) }; case 3: return function (n, r, i) { return e.call(t, n, r, i) } }return function () { return e.apply(t, arguments) } } }, function(e, t) { e.exports = function (e) { if (void 0 == e) throw TypeError("Can't call method on " + e); return e } }, function(e, t) { var n = {}.toString; e.exports = function (e) { return n.call(e).slice(8, -1) } }, function(e, t) { e.exports = function (e, t) { return { enumerable: !(1 & e), configurable: !(2 & e), writable: !(4 & e), value: t } } }, function(e, t, n) { var r = n(1543), i = n(929).concat("length", "prototype"); t.f = Object.getOwnPropertyNames || function getOwnPropertyNames(e) { return r(e, i) } }, function(e, t, n) { var r = n(1544), i = n(59), o = function (e) { return "function" == typeof e ? e : void 0 }; e.exports = function (e, t) { return arguments.length < 2 ? o(r[e]) || o(i[e]) : r[e] && r[e][t] || i[e] && i[e][t] } }, function(e, t) { e.exports = function (e, t) { return { enumerable: !(1 & e), configurable: !(2 & e), writable: !(4 & e), value: t } } },,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { var r = n(1), i = n(193), o = n(144).extend({ initialize: function initialize() { var e; r(e = this).call(e, "change:type", function () { i.error("changing layer type is not allowed, remove it and add a new one instead") }) }, remove: function remove(e) { e = e || {}, this.trigger("destroy", this, this.collection, e) }, update: function update(e, t) { t = t || {}, this.set(e, { silent: t.silent }) }, show: function show() { this.set("visible", !0) }, hide: function hide() { this.set("visible", !1) }, isVisible: function isVisible() { return !!this.get("visible") }, isHidden: function isHidden() { return !this.isVisible() }, toggle: function toggle() { this.set("visible", !this.get("visible")) }, setOk: function setOk() { this.unset("error") }, setError: function setError(e) { this.set("error", e) }, getSourceId: function getSourceId() { throw new Error(".getSourceId called on a non torque/cartodb layer.") }, hasSource: function hasSource(e) { return !1 } }); e.exports = o }, function(e, t, n) { "use strict"; n(230).polyfill(); var r = n(267)("fn-buckets"), i = n(1345), o = n(867), a = n(597), s = n(866); function fnBuckets(e) { return function fn$buckets(t, n, s) { return r("fn$buckets(%j)", arguments), r('Using "%s" datasource to calculate buckets', e.getName()), new Promise(function (r, l) { if (!n) return l(new o("Missing quantification method in buckets function")); s = Number.isFinite(+s) ? +s : 5, e.getRamp(i(t), s, n, function (e, t) { if (e) return l(new o("unable to compute ramp,", e)); var n = "max", i = {}, s = {}; Array.isArray(t) || (n = t.strategy || "max", i = t.stats, s = t.meta || {}, t = t.ramp), r(new a(t, n, i, s)) }) }) } } e.exports = fnBuckets, e.exports.fnName = "buckets", e.exports.createBucketsFn = function (e, t, n) { return function fn$bucketsFn(i) { return r("fn$%s(%j)", t, arguments), r('Using "%s" datasource to calculate %s', e.getName(), t), new Promise(function (r) { return r(new s(function (r, o) { return fnBuckets(e)(r, t, i).then(function (e) { return e.strategy = o || n, new Promise(function (t) { return t(e) }) }) })) }) } } }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = _interopRequireDefault(n(874)), i = _interopRequireDefault(n(1351)), o = _interopRequireDefault(n(872)), a = _interopRequireDefault(n(870)), s = _interopRequireDefault(n(599)), l = _interopRequireDefault(n(3034)), u = _interopRequireDefault(n(871)), c = _interopRequireDefault(n(1346)), d = _interopRequireDefault(n(598)), f = _interopRequireDefault(n(868)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var h = function postcss() { for (var e = arguments.length, t = Array(e), n = 0; n < e; n++)t[n] = arguments[n]; return 1 === t.length && Array.isArray(t[0]) && (t = t[0]), new i.default(t) }; h.plugin = function (e, t) { var n = function creator() { var n = t.apply(void 0, arguments); return n.postcssPlugin = e, n.postcssVersion = (new i.default).version, n }; return n.postcss = n(), n.process = function (e, t) { return h([n(t)]).process(e, t) }, n }, h.stringify = o.default, h.vendor = l.default, h.parse = u.default, h.list = c.default, h.comment = function (e) { return new a.default(e) }, h.atRule = function (e) { return new s.default(e) }, h.decl = function (e) { return new r.default(e) }, h.rule = function (e) { return new d.default(e) }, h.root = function (e) { return new f.default(e) }, t.default = h, e.exports = t.default }, function(e, t, n) { var r = n(881), i = r.extend({ initialize: function initialize(e) { if (r.prototype.initialize.apply(this, arguments), !this.GeometryViewClass) throw new Error("subclasses of MultiGeometryViewBase must declare the GeometryViewClass instance variable"); this.model.geometries.on("reset", this._renderGeometries, this) }, render: function render() { this._renderGeometries() }, _renderGeometries: function _renderGeometries() { this.model.geometries.each(this._renderGeometry, this) }, _renderGeometry: function _renderGeometry(e) { new this.GeometryViewClass({ model: e, mapView: this.mapView }).render() } }); e.exports = i }, function(e, t, n) { var r = n(302), i = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWBAMAAAA2mnEIAAAAKlBMVEUAAAD////////////////////////////////e6fPO3+5zo85Cg705fbrPhX3RAAAADXRSTlMAADVBRn6fqLO9weP7Sr4MvgAAAHRJREFUGNNjEEQABhQ2AwNLeEepAwOYzZTR0dHRpgBmW3SAQDOIzdTRuefu6RkdikA2W8eau3fvnupIBLI9Os8C2XdmtADZEd13QWBHK5Bd0QNmn2gHsjt6wewbHWhsZDXIepHNRLYL2Q3IbkNxM5JfsPsXACkGXYWXfeLsAAAAAElFTkSuQmCC", o = n(885).extend({ defaults: { editable: !1, expandable: !1, iconUrl: i, iconAnchor: [11, 11] }, getCoordinates: function getCoordinates() { return this.get("latlng") }, setCoordinates: function setCoordinates(e) { this.set("latlng", e) }, update: function update(e) { this.get("latlng") || this.setCoordinates(e) }, isComplete: function isComplete() { return !!this.get("latlng") }, toGeoJSON: function toGeoJSON() { return { type: "Point", coordinates: r.convertLatLngsToGeoJSONPointCoords(this.getCoordinates()) } }, getCoordinatesFromGeoJSONCoords: function getCoordinatesFromGeoJSONCoords(e) { return r.getPointLatLngFromGeoJSONCoords(e) } }, { DEFAULT_ICON_URL: i, MIDDLE_POINT_ICON_URL: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAAAP1BMVEUAAAArgNVVqv9OleNMkd1KjuJMj+BMlOBZmudYmORTluJTluZ0qupPlOFtp+hdm+aZwu9HjuDp8vv7/f39//2ENvQ5AAAAFXRSTlMABgYkJTQ5OT9DUFBsbm5wcHNzc3NuwP+LAAAAZ0lEQVR42r2PRw7AIAwETcCQYkL9/1sTgUKLxJE5jlZrL6xgE4hiG63UZC1p2dvD+fjizdlaZUJMBNfkmU7ZlNe1n1MskCgabdUW5/pfMj8Jyn0Pmm7Qdec5bocOlccrGGAckTNYwAMlgQk+DTSqnAAAAABJRU5ErkJggg==" }); e.exports = o }, function(e, t, n) { var r = n(1), i = n(0), o = n(3), a = n(1385), s = n(193), l = o.Model.extend({ initialize: function initialize() { var e; r(e = this).call(e, "change", this._invalidate), this._invalidate() }, url: function url() { return this.get("template_url") }, parse: function parse(e) { return { template: e } }, _invalidate: function _invalidate() { this.compiled = null, this.get("template_url") && this.fetch() }, compile: function compile() { var e = this.get("type") || "underscore", t = l.compilers[e]; return t ? t(this.get("template")) : (s.error("can't get rendered for " + e), null) }, render: function render(e) { return (this.compiled = this.compiled || this.get("compiled") || this.compile())(e) }, asFunction: function asFunction() { return r(i).call(i, this.render, this) } }, { compilers: { underscore: i.template, mustache: void 0 === a ? null : function compile(e) { return a.parse(e), function (t, n) { return a.render(e, t, n) } } }, compile: function compile(e, t) { var n = new l({ template: e, type: t || "underscore" }); return r(i).call(i, n.render, n) } }); e.exports = l }, function(e, t, n) { var r = n(211), i = n(1495), o = n(235), a = n(343), s = n(442), l = n(1494), u = function (e, t) { this.stopped = e, this.result = t }; (e.exports = function (e, t, n, c, d) { var f, h, p, m, g, v, y, _ = a(t, n, c ? 2 : 1); if (d) f = e; else { if ("function" != typeof (h = s(e))) throw TypeError("Target is not iterable"); if (i(h)) { for (p = 0, m = o(e.length); m > p; p++)if ((g = c ? _(r(y = e[p])[0], y[1]) : _(e[p])) && g instanceof u) return g; return new u(!1) } f = h.call(e) } for (v = f.next; !(y = v.call(f)).done;)if ("object" == typeof (g = l(f, _, y.value, c)) && g && g instanceof u) return g; return new u(!1) }).stop = function (e) { return new u(!0, e) } }, function(e, t, n) { var r = n(456); e.exports = function (e, t, n) { if (r(e), void 0 === t) return e; switch (n) { case 0: return function () { return e.call(t) }; case 1: return function (n) { return e.call(t, n) }; case 2: return function (n, r) { return e.call(t, n, r) }; case 3: return function (n, r, i) { return e.call(t, n, r, i) } }return function () { return e.apply(t, arguments) } } }, function(e, t, n) { var r = n(236); e.exports = function (e, t, n, i) { i && i.enumerable ? e[t] = n : r(e, t, n) } }, function(e, t, n) { var r = n(345); e.exports = Array.isArray || function isArray(e) { return "Array" == r(e) } }, function(e, t) { var n = Math.ceil, r = Math.floor; e.exports = function (e) { return isNaN(e = +e) ? 0 : (e > 0 ? r : n)(e) } }, function(e, t, n) { var r = n(138), i = n(633), o = n(346), a = n(237), s = n(631), l = n(212), u = n(1537), c = Object.getOwnPropertyDescriptor; t.f = r ? c : function getOwnPropertyDescriptor(e, t) { if (e = a(e), t = s(t, !0), u) try { return c(e, t) } catch (e) { } if (l(e, t)) return o(!i.f.call(e, t), e[t]) } }, function(e, t, n) { var r = n(139), i = n(456), o = n(114)("species"); e.exports = function (e, t) { var n, a = r(e).constructor; return void 0 === a || void 0 == (n = r(a)[o]) ? t : i(n) } }, function(e, t, n) { var r, i = n(139), o = n(1542), a = n(929), s = n(639), l = n(1541), u = n(934), c = n(641)("IE_PROTO"), d = function () { }, f = function (e) { return "<script>" + e + "<\/script>" }, h = function () { try { r = document.domain && new ActiveXObject("htmlfile") } catch (e) { } var e, t; h = r ? function (e) { e.write(f("")), e.close(); var t = e.parentWindow.Object; return e = null, t }(r) : ((t = u("iframe")).style.display = "none", l.appendChild(t), t.src = String("javascript:"), (e = t.contentWindow.document).open(), e.write(f("document.F=Object")), e.close(), e.F); for (var n = a.length; n--;)delete h.prototype[a[n]]; return h() }; s[c] = !0, e.exports = Object.create || function create(e, t) { var n; return null !== e ? (d.prototype = i(e), n = new d, d.prototype = null, n[c] = e) : n = h(), void 0 === t ? n : o(n, t) } }, function(e, t) { e.exports = !1 }, function(e, t, n) { var r = n(165); e.exports = function (e, t) { if (!r(e)) return e; var n, i; if (t && "function" == typeof (n = e.toString) && !r(i = n.call(e))) return i; if ("function" == typeof (n = e.valueOf) && !r(i = n.call(e))) return i; if (!t && "function" == typeof (n = e.toString) && !r(i = n.call(e))) return i; throw TypeError("Can't convert object to primitive value") } }, function(e, t, n) { var r = n(146), i = n(935), o = n(349), a = n(308), s = n(388), l = n(140), u = n(1547), c = Object.getOwnPropertyDescriptor; t.f = r ? c : function getOwnPropertyDescriptor(e, t) { if (e = a(e), t = s(t, !0), u) try { return c(e, t) } catch (e) { } if (l(e, t)) return o(!i.f.call(e, t), e[t]) } },,,,,,,,,, function(e, t, n) { var r = n(895), i = n(22), o = n(893), a = n(892), s = 1440, l = 43200, u = 525600; e.exports = function distanceInWordsStrict(e, t, n) { var c = n || {}, d = r(e, t), f = c.locale, h = a.distanceInWords.localize; f && f.distanceInWords && f.distanceInWords.localize && (h = f.distanceInWords.localize); var p, m, g, v = { addSuffix: Boolean(c.addSuffix), comparison: d }; d > 0 ? (p = i(e), m = i(t)) : (p = i(t), m = i(e)); var y = Math[c.partialMethod ? String(c.partialMethod) : "floor"], _ = o(m, p), b = m.getTimezoneOffset() - p.getTimezoneOffset(), w = y(_ / 60) - b; if ("s" === (g = c.unit ? String(c.unit) : w < 1 ? "s" : w < 60 ? "m" : w < s ? "h" : w < l ? "d" : w < u ? "M" : "Y")) return h("xSeconds", _, v); if ("m" === g) return h("xMinutes", w, v); if ("h" === g) return h("xHours", y(w / 60), v); if ("d" === g) return h("xDays", y(w / s), v); if ("M" === g) return h("xMonths", y(w / l), v); if ("Y" === g) return h("xYears", y(w / u), v); throw new Error("Unknown unit: " + g) } }, function(e, t, n) { "use strict"; (function (e) { var r = { "empty-search.svg": { purple: n(3334), blue: n(3333) }, "arrow-blue.svg": { purple: n(3332), blue: n(3331) }, "close-tag.svg": { purple: n(3330), blue: n(3329) } }; t.a = { methods: { icon_by_environment: function icon_by_environment(t) { return r[t][e.env.VUE_APP_COLOR_PRIMARY ? "purple" : "blue"] } } } }).call(this, n(197)) }, function(e, t, n) { e.exports = n(3368) }, function(e, t, n) { e.exports = n(3414) },, function(e, t, n) { var r = function (e) { "use strict"; var t, n = Object.prototype, r = n.hasOwnProperty, i = "function" == typeof Symbol ? Symbol : {}, o = i.iterator || "@@iterator", a = i.asyncIterator || "@@asyncIterator", s = i.toStringTag || "@@toStringTag"; function wrap(e, t, n, r) { var i = t && t.prototype instanceof Generator ? t : Generator, o = Object.create(i.prototype), a = new Context(r || []); return o._invoke = function makeInvokeMethod(e, t, n) { var r = l; return function invoke(i, o) { if (r === c) throw new Error("Generator is already running"); if (r === d) { if ("throw" === i) throw o; return doneResult() } for (n.method = i, n.arg = o; ;) { var a = n.delegate; if (a) { var s = maybeInvokeDelegate(a, n); if (s) { if (s === f) continue; return s } } if ("next" === n.method) n.sent = n._sent = n.arg; else if ("throw" === n.method) { if (r === l) throw r = d, n.arg; n.dispatchException(n.arg) } else "return" === n.method && n.abrupt("return", n.arg); r = c; var h = tryCatch(e, t, n); if ("normal" === h.type) { if (r = n.done ? d : u, h.arg === f) continue; return { value: h.arg, done: n.done } } "throw" === h.type && (r = d, n.method = "throw", n.arg = h.arg) } } }(e, n, a), o } function tryCatch(e, t, n) { try { return { type: "normal", arg: e.call(t, n) } } catch (e) { return { type: "throw", arg: e } } } e.wrap = wrap; var l = "suspendedStart", u = "suspendedYield", c = "executing", d = "completed", f = {}; function Generator() { } function GeneratorFunction() { } function GeneratorFunctionPrototype() { } var h = {}; h[o] = function () { return this }; var p = Object.getPrototypeOf, m = p && p(p(values([]))); m && m !== n && r.call(m, o) && (h = m); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(h); function defineIteratorMethods(e) { ["next", "throw", "return"].forEach(function (t) { e[t] = function (e) { return this._invoke(t, e) } }) } function AsyncIterator(e, t) { var n; this._invoke = function enqueue(i, o) { function callInvokeWithMethodAndArg() { return new t(function (n, a) { !function invoke(n, i, o, a) { var s = tryCatch(e[n], e, i); if ("throw" !== s.type) { var l = s.arg, u = l.value; return u && "object" == typeof u && r.call(u, "__await") ? t.resolve(u.__await).then(function (e) { invoke("next", e, o, a) }, function (e) { invoke("throw", e, o, a) }) : t.resolve(u).then(function (e) { l.value = e, o(l) }, function (e) { return invoke("throw", e, o, a) }) } a(s.arg) }(i, o, n, a) }) } return n = n ? n.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg() } } function maybeInvokeDelegate(e, n) { var r = e.iterator[n.method]; if (r === t) { if (n.delegate = null, "throw" === n.method) { if (e.iterator.return && (n.method = "return", n.arg = t, maybeInvokeDelegate(e, n), "throw" === n.method)) return f; n.method = "throw", n.arg = new TypeError("The iterator does not provide a 'throw' method") } return f } var i = tryCatch(r, e.iterator, n.arg); if ("throw" === i.type) return n.method = "throw", n.arg = i.arg, n.delegate = null, f; var o = i.arg; return o ? o.done ? (n[e.resultName] = o.value, n.next = e.nextLoc, "return" !== n.method && (n.method = "next", n.arg = t), n.delegate = null, f) : o : (n.method = "throw", n.arg = new TypeError("iterator result is not an object"), n.delegate = null, f) } function pushTryEntry(e) { var t = { tryLoc: e[0] }; 1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t) } function resetTryEntry(e) { var t = e.completion || {}; t.type = "normal", delete t.arg, e.completion = t } function Context(e) { this.tryEntries = [{ tryLoc: "root" }], e.forEach(pushTryEntry, this), this.reset(!0) } function values(e) { if (e) { var n = e[o]; if (n) return n.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var i = -1, a = function next() { for (; ++i < e.length;)if (r.call(e, i)) return next.value = e[i], next.done = !1, next; return next.value = t, next.done = !0, next }; return a.next = a } } return { next: doneResult } } function doneResult() { return { value: t, done: !0 } } return GeneratorFunction.prototype = g.constructor = GeneratorFunctionPrototype, GeneratorFunctionPrototype.constructor = GeneratorFunction, GeneratorFunctionPrototype[s] = GeneratorFunction.displayName = "GeneratorFunction", e.isGeneratorFunction = function (e) { var t = "function" == typeof e && e.constructor; return !!t && (t === GeneratorFunction || "GeneratorFunction" === (t.displayName || t.name)) }, e.mark = function (e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, s in e || (e[s] = "GeneratorFunction")), e.prototype = Object.create(g), e }, e.awrap = function (e) { return { __await: e } }, defineIteratorMethods(AsyncIterator.prototype), AsyncIterator.prototype[a] = function () { return this }, e.AsyncIterator = AsyncIterator, e.async = function (t, n, r, i, o) { void 0 === o && (o = Promise); var a = new AsyncIterator(wrap(t, n, r, i), o); return e.isGeneratorFunction(n) ? a : a.next().then(function (e) { return e.done ? e.value : a.next() }) }, defineIteratorMethods(g), g[s] = "Generator", g[o] = function () { return this }, g.toString = function () { return "[object Generator]" }, e.keys = function (e) { var t = []; for (var n in e) t.push(n); return t.reverse(), function next() { for (; t.length;) { var n = t.pop(); if (n in e) return next.value = n, next.done = !1, next } return next.done = !0, next } }, e.values = values, Context.prototype = { constructor: Context, reset: function (e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var n in this) "t" === n.charAt(0) && r.call(this, n) && !isNaN(+n.slice(1)) && (this[n] = t) }, stop: function () { this.done = !0; var e = this.tryEntries[0].completion; if ("throw" === e.type) throw e.arg; return this.rval }, dispatchException: function (e) { if (this.done) throw e; var n = this; function handle(r, i) { return a.type = "throw", a.arg = e, n.next = r, i && (n.method = "next", n.arg = t), !!i } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var o = this.tryEntries[i], a = o.completion; if ("root" === o.tryLoc) return handle("end"); if (o.tryLoc <= this.prev) { var s = r.call(o, "catchLoc"), l = r.call(o, "finallyLoc"); if (s && l) { if (this.prev < o.catchLoc) return handle(o.catchLoc, !0); if (this.prev < o.finallyLoc) return handle(o.finallyLoc) } else if (s) { if (this.prev < o.catchLoc) return handle(o.catchLoc, !0) } else { if (!l) throw new Error("try statement without catch or finally"); if (this.prev < o.finallyLoc) return handle(o.finallyLoc) } } } }, abrupt: function (e, t) { for (var n = this.tryEntries.length - 1; n >= 0; --n) { var i = this.tryEntries[n]; if (i.tryLoc <= this.prev && r.call(i, "finallyLoc") && this.prev < i.finallyLoc) { var o = i; break } } o && ("break" === e || "continue" === e) && o.tryLoc <= t && t <= o.finallyLoc && (o = null); var a = o ? o.completion : {}; return a.type = e, a.arg = t, o ? (this.method = "next", this.next = o.finallyLoc, f) : this.complete(a) }, complete: function (e, t) { if ("throw" === e.type) throw e.arg; return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), f }, finish: function (e) { for (var t = this.tryEntries.length - 1; t >= 0; --t) { var n = this.tryEntries[t]; if (n.finallyLoc === e) return this.complete(n.completion, n.afterLoc), resetTryEntry(n), f } }, catch: function (e) { for (var t = this.tryEntries.length - 1; t >= 0; --t) { var n = this.tryEntries[t]; if (n.tryLoc === e) { var r = n.completion; if ("throw" === r.type) { var i = r.arg; resetTryEntry(n) } return i } } throw new Error("illegal catch attempt") }, delegateYield: function (e, n, r) { return this.delegate = { iterator: values(e), resultName: n, nextLoc: r }, "next" === this.method && (this.arg = t), f } }, e }(e.exports); try { regeneratorRuntime = r } catch (e) { Function("r", "regeneratorRuntime = r")(r) } },,,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { "use strict"; var r = n(133), i = n(861); r({ target: "String", proto: !0, forced: n(860)("link") }, { link: function link(e) { return i(this, "a", "href", e) } }) }, function(e, t, n) { n(23); var r = n(0), i = n(3), o = n(270), a = n(185), s = n(2969), l = i.View.extend({ className: "CDB-Legend-item u-tSpace-xl", initialize: function initialize(e) { this._placeholderTemplate = e.placeholderTemplate, this.model.on("change", this.render, this) }, render: function render() { return this.$el.html(this._generateHTML()), this._loadImages(), this.model.isVisible() ? this.$el.show() : this.$el.hide(), this._toggleLoadingClass(), this }, _generateHTML: function _generateHTML() { if (this.model.isSuccess() && this.model.isAvailable()) return this._getLegendHTML(); var e = this._getPlaceholderHTML(); return this.model.isLoading() ? e : [this.model.isError() ? this._generateTitle({ title: "Something went wrong", error: "error" }) : this._generateTitle({ title: "No data available", error: "alert" }), e].join("\n") }, _getLegendHTML: function _getLegendHTML() { var e = []; return this.model.get("title") && e.push(this._generateTitle({ title: this.model.get("title") })), this.model.get("preHTMLSnippet") && e.push(this._sanitize(this.model.get("preHTMLSnippet"))), e.push(this._sanitize(this._getCompiledTemplate())), this.model.get("postHTMLSnippet") && e.push(this._sanitize(this.model.get("postHTMLSnippet"))), e.join("\n") }, _generateTitle: function _generateTitle(e) { return a({ title: e.title, error: e.error }) }, _getPlaceholderHTML: function _getPlaceholderHTML() { return this._placeholderTemplate && this._placeholderTemplate() || "" }, _getCompiledTemplate: function _getCompiledTemplate() { throw new Error("Subclasses of LegendViewBase must implement _getCompiledTemplate") }, _afterRender: function _afterRender() { }, _sanitize: function _sanitize(e) { return o.html(e) }, _toggleLoadingClass: function _toggleLoadingClass() { this.$el.toggleClass("is-loading", this.model.isLoading()) }, _loadImages: function _loadImages() { r.each(this.$(".js-image-container"), function (e) { new s({ el: e, imageClass: "Legend-fillImageAsset" })._loadImage() }) } }); e.exports = l }, function(e, t, n) { var r = n(1), i = n(0), o = n(3), a = function GMapsLayerView(e, t) { var n; t = t || {}, this.model = e, r(n = this.model).call(n, "change", this._onModelUpdated, this), this.mapModel = t.mapModel, this.gmapsMap = t.nativeMap, this.showLimitErrors = t.showLimitErrors }; i.extend(a.prototype, o.Events), i.extend(a.prototype, { addToMap: function addToMap() { throw new Error("Subclasses of GMapsLayerView must implement addToMap") }, remove: function remove() { throw new Error("Subclasses of GMapsLayerView must implement remove") }, _onModelUpdated: function _onModelUpdated() { } }), e.exports = a }, function(e, t) { t.getArg = function getArg(e, t, n) { if (t in e) return e[t]; if (3 === arguments.length) return n; throw new Error('"' + t + '" is a required argument.') }; var n = /^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/, r = /^data:.+\,.+$/; function urlParse(e) { var t = e.match(n); return t ? { scheme: t[1], auth: t[2], host: t[3], port: t[4], path: t[5] } : null } function urlGenerate(e) { var t = ""; return e.scheme && (t += e.scheme + ":"), t += "//", e.auth && (t += e.auth + "@"), e.host && (t += e.host), e.port && (t += ":" + e.port), e.path && (t += e.path), t } function normalize(e) { var n = e, r = urlParse(e); if (r) { if (!r.path) return e; n = r.path } for (var i, o = t.isAbsolute(n), a = n.split(/\/+/), s = 0, l = a.length - 1; l >= 0; l--)"." === (i = a[l]) ? a.splice(l, 1) : ".." === i ? s++ : s > 0 && ("" === i ? (a.splice(l + 1, s), s = 0) : (a.splice(l, 2), s--)); return "" === (n = a.join("/")) && (n = o ? "/" : "."), r ? (r.path = n, urlGenerate(r)) : n } t.urlParse = urlParse, t.urlGenerate = urlGenerate, t.normalize = normalize, t.join = function join(e, t) { "" === e && (e = "."), "" === t && (t = "."); var n = urlParse(t), i = urlParse(e); if (i && (e = i.path || "/"), n && !n.scheme) return i && (n.scheme = i.scheme), urlGenerate(n); if (n || t.match(r)) return t; if (i && !i.host && !i.path) return i.host = t, urlGenerate(i); var o = "/" === t.charAt(0) ? t : normalize(e.replace(/\/+$/, "") + "/" + t); return i ? (i.path = o, urlGenerate(i)) : o }, t.isAbsolute = function (e) { return "/" === e.charAt(0) || !!e.match(n) }, t.relative = function relative(e, t) { "" === e && (e = "."), e = e.replace(/\/$/, ""); for (var n = 0; 0 !== t.indexOf(e + "/");) { var r = e.lastIndexOf("/"); if (r < 0) return t; if ((e = e.slice(0, r)).match(/^([^\/]+:\/)?\/*$/)) return t; ++n } return Array(n + 1).join("../") + t.substr(e.length + 1) }; var i = !("__proto__" in Object.create(null)); function identity(e) { return e } function isProtoString(e) { if (!e) return !1; var t = e.length; if (t < 9) return !1; if (95 !== e.charCodeAt(t - 1) || 95 !== e.charCodeAt(t - 2) || 111 !== e.charCodeAt(t - 3) || 116 !== e.charCodeAt(t - 4) || 111 !== e.charCodeAt(t - 5) || 114 !== e.charCodeAt(t - 6) || 112 !== e.charCodeAt(t - 7) || 95 !== e.charCodeAt(t - 8) || 95 !== e.charCodeAt(t - 9)) return !1; for (var n = t - 10; n >= 0; n--)if (36 !== e.charCodeAt(n)) return !1; return !0 } function strcmp(e, t) { return e === t ? 0 : e > t ? 1 : -1 } t.toSetString = i ? identity : function toSetString(e) { return isProtoString(e) ? "$" + e : e }, t.fromSetString = i ? identity : function fromSetString(e) { return isProtoString(e) ? e.slice(1) : e }, t.compareByOriginalPositions = function compareByOriginalPositions(e, t, n) { var r = e.source - t.source; return 0 !== r ? r : 0 != (r = e.originalLine - t.originalLine) ? r : 0 != (r = e.originalColumn - t.originalColumn) || n ? r : 0 != (r = e.generatedColumn - t.generatedColumn) ? r : 0 != (r = e.generatedLine - t.generatedLine) ? r : e.name - t.name }, t.compareByGeneratedPositionsDeflated = function compareByGeneratedPositionsDeflated(e, t, n) { var r = e.generatedLine - t.generatedLine; return 0 !== r ? r : 0 != (r = e.generatedColumn - t.generatedColumn) || n ? r : 0 != (r = e.source - t.source) ? r : 0 != (r = e.originalLine - t.originalLine) ? r : 0 != (r = e.originalColumn - t.originalColumn) ? r : e.name - t.name }, t.compareByGeneratedPositionsInflated = function compareByGeneratedPositionsInflated(e, t) { var n = e.generatedLine - t.generatedLine; return 0 !== n ? n : 0 != (n = e.generatedColumn - t.generatedColumn) ? n : 0 !== (n = strcmp(e.source, t.source)) ? n : 0 != (n = e.originalLine - t.originalLine) ? n : 0 != (n = e.originalColumn - t.originalColumn) ? n : strcmp(e.name, t.name) } }, function(e, t) { }, function(e, t, n) { var r = n(1), i = n(0), o = n(3), a = function LeafletLayerView(e, t) { t = t || {}, this.model = e, this.mapModel = t.mapModel, this.leafletMap = t.nativeMap, this.leafletLayer = t.nativeLayer || this._createLeafletLayer(), this.showLimitErrors = t.showLimitErrors, this.setModel(e); var n = e.get("type") || e.get("kind"); this.type = n && n.toLowerCase() }; i.extend(a.prototype, o.Events), i.extend(a.prototype, { setZIndex: function setZIndex(e) { this.leafletLayer.setZIndex(e) }, setModel: function setModel(e) { var t; this.model && this.model.unbind("change", this._modelUpdated, this), this.model = e, r(t = this.model).call(t, "change", this._modelUpdated, this) }, remove: function remove() { this.leafletMap.removeLayer(this.leafletLayer), this.notifyRemove() }, notifyRemove: function notifyRemove() { this.trigger("remove", this), this.model.unbind(null, null, this), this.unbind() }, reload: function reload() { this.leafletLayer.redraw() }, _createLeafletLayer: function _createLeafletLayer() { throw new Error("subclasses of LeafletLayerView must implement _createLeafletLayer") } }), e.exports = a }, function(e, t) { e.exports = { OVERLAY_TYPES: { ATTRIBUTION: "attribution", HEADER: "header", LIMITS: "limits", TILES: "tiles", LOADER: "loader", LOGO: "logo", SEARCH: "search", ZOOM: "zoom" }, MAP_PROVIDER_TYPES: { GMAPS: "googlemaps", LEAFLET: "leaflet" }, GMAPS_BASE_LAYER_TYPES: ["roadmap", "gray_roadmap", "dark_roadmap", "hybrid", "satellite", "terrain"], WINDSHAFT_ERRORS: { ANALYSIS: "analysis", LAYER: "layer", LIMIT: "limit", TILE: "tile", GENERIC: "generic", UNKNOWN: "unknown" } } }, function(e, t, n) { "use strict"; var r = n(133), i = n(219).filter, o = n(1423), a = n(613), s = o("filter"), l = a("filter"); r({ target: "Array", proto: !0, forced: !s || !l }, { filter: function filter(e) { return i(this, e, arguments.length > 1 ? arguments[1] : void 0) } }) }, function(e, t, n) { var r = n(22); e.exports = function compareAsc(e, t) { var n = r(e).getTime(), i = r(t).getTime(); return n < i ? -1 : n > i ? 1 : 0 } }, function(e, t, n) { var r = n(338), i = n(337); e.exports = function startOfISOYear(e) { var t = r(e), n = new Date(0); return n.setFullYear(t, 0, 4), n.setHours(0, 0, 0, 0), i(n) } }, function(e, t, n) { var r = n(22); e.exports = function addMilliseconds(e, t) { var n = r(e).getTime(), i = Number(t); return new Date(n + i) } }, function(e, t, n) { var r = n(22); e.exports = function addDays(e, t) { var n = r(e), i = Number(t); return n.setDate(n.getDate() + i), n } }, function(e, t, n) { "use strict"; var r = n(248); e.exports.f = function (e) { return new function (e) { var t, n; this.promise = new e(function (e, r) { if (void 0 !== t || void 0 !== n) throw TypeError("Bad Promise constructor"); t = e, n = r }), this.resolve = r(t), this.reject = r(n) }(e) } }, function(e, t, n) { var r = n(271), i = n(340), o = n(118)("iterator"); e.exports = function (e) { if (void 0 != e) return e[o] || e["@@iterator"] || i[r(e)] } }, function(e, t, n) { var r = n(457), i = n(444), o = n(114)("iterator"); e.exports = function (e) { if (void 0 != e) return e[o] || e["@@iterator"] || i[r(e)] } }, function(e, t) { e.exports = {} }, function(e, t) { e.exports = function (e, t, n) { if (!(e instanceof t)) throw TypeError("Incorrect " + (n ? n + " " : "") + "invocation"); return e } }, function(e, t, n) { var r = n(1508); function _defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), r(e, i.key, i) } } e.exports = function _createClass(e, t, n) { return t && _defineProperties(e.prototype, t), n && _defineProperties(e, n), e } }, function(e, t) { e.exports = function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } },, function(e, t) { }, function(e, t, n) { "use strict"; var r = n(237), i = n(453), o = n(340), a = n(306), s = n(909), l = a.set, u = a.getterFor("Array Iterator"); e.exports = s(Array, "Array", function (e, t) { l(this, { type: "Array Iterator", target: r(e), index: 0, kind: t }) }, function () { var e = u(this), t = e.target, n = e.kind, r = e.index++; return !t || r >= t.length ? (e.target = void 0, { value: void 0, done: !0 }) : "keys" == n ? { value: r, done: !1 } : "values" == n ? { value: t[r], done: !1 } : { value: [r, t[r]], done: !1 } }, "values"), o.Arguments = o.Array, i("keys"), i("values"), i("entries") }, function(e, t, n) { var r = n(67), i = n(118), o = n(913), a = i("species"); e.exports = function (e) { return o >= 51 || !r(function () { var t = []; return (t.constructor = {})[a] = function () { return { foo: 1 } }, 1 !== t[e](Boolean).foo }) } }, function(e, t, n) { "use strict"; var r = n(631), i = n(222), o = n(346); e.exports = function (e, t, n) { var a = r(t); a in e ? i.f(e, a, o(0, n)) : e[a] = n } }, function(e, t) { e.exports = function () { } }, function(e, t) { e.exports = {} }, function(e, t, n) { var r = n(1534), i = n(917); e.exports = Object.keys || function keys(e) { return r(e, i) } }, function(e, t) { e.exports = function (e) { if ("function" != typeof e) throw TypeError(String(e) + " is not a function"); return e } }, function(e, t, n) { var r = n(924), i = n(252), o = n(114)("toStringTag"), a = "Arguments" == i(function () { return arguments }()); e.exports = r ? i : function (e) { var t, n, r; return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof (n = function (e, t) { try { return e[t] } catch (e) { } }(t = Object(e), o)) ? n : a ? i(t) : "Object" == (r = i(t)) && "function" == typeof t.callee ? "Arguments" : r } }, function(e, t, n) { var r = n(139), i = n(3587); e.exports = Object.setPrototypeOf || ("__proto__" in {} ? function () { var e, t = !1, n = {}; try { (e = Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set).call(n, []), t = n instanceof Array } catch (e) { } return function setPrototypeOf(n, o) { return r(n), i(o), t ? e.call(n, o) : n.__proto__ = o, n } }() : void 0) }, function(e, t, n) { var r = n(109), i = n(252), o = "".split; e.exports = r(function () { return !Object("z").propertyIsEnumerable(0) }) ? function (e) { return "String" == i(e) ? o.call(e, "") : Object(e) } : Object },,, function(e, t, n) { var r = n(1444), i = n(890), o = n(338), a = n(22), s = n(1442), l = n(892); var u = { M: function (e) { return e.getMonth() + 1 }, MM: function (e) { return addLeadingZeros(e.getMonth() + 1, 2) }, Q: function (e) { return Math.ceil((e.getMonth() + 1) / 3) }, D: function (e) { return e.getDate() }, DD: function (e) { return addLeadingZeros(e.getDate(), 2) }, DDD: function (e) { return r(e) }, DDDD: function (e) { return addLeadingZeros(r(e), 3) }, d: function (e) { return e.getDay() }, E: function (e) { return e.getDay() || 7 }, W: function (e) { return i(e) }, WW: function (e) { return addLeadingZeros(i(e), 2) }, YY: function (e) { return addLeadingZeros(e.getFullYear(), 4).substr(2) }, YYYY: function (e) { return addLeadingZeros(e.getFullYear(), 4) }, GG: function (e) { return String(o(e)).substr(2) }, GGGG: function (e) { return o(e) }, H: function (e) { return e.getHours() }, HH: function (e) { return addLeadingZeros(e.getHours(), 2) }, h: function (e) { var t = e.getHours(); return 0 === t ? 12 : t > 12 ? t % 12 : t }, hh: function (e) { return addLeadingZeros(u.h(e), 2) }, m: function (e) { return e.getMinutes() }, mm: function (e) { return addLeadingZeros(e.getMinutes(), 2) }, s: function (e) { return e.getSeconds() }, ss: function (e) { return addLeadingZeros(e.getSeconds(), 2) }, S: function (e) { return Math.floor(e.getMilliseconds() / 100) }, SS: function (e) { return addLeadingZeros(Math.floor(e.getMilliseconds() / 10), 2) }, SSS: function (e) { return addLeadingZeros(e.getMilliseconds(), 3) }, Z: function (e) { return formatTimezone(e.getTimezoneOffset(), ":") }, ZZ: function (e) { return formatTimezone(e.getTimezoneOffset()) }, X: function (e) { return Math.floor(e.getTime() / 1e3) }, x: function (e) { return e.getTime() } }; function formatTimezone(e, t) { t = t || ""; var n = e > 0 ? "-" : "+", r = Math.abs(e), i = r % 60; return n + addLeadingZeros(Math.floor(r / 60), 2) + t + addLeadingZeros(i, 2) } function addLeadingZeros(e, t) { for (var n = Math.abs(e).toString(); n.length < t;)n = "0" + n; return n } e.exports = function format(e, t, n) { var r = t ? String(t) : "YYYY-MM-DDTHH:mm:ss.SSSZ", i = (n || {}).locale, o = l.format.formatters, c = l.format.formattingTokensRegExp; i && i.format && i.format.formatters && (o = i.format.formatters, i.format.formattingTokensRegExp && (c = i.format.formattingTokensRegExp)); var d = a(e); return s(d) ? function buildFormatFn(e, t, n) { var r, i, o, a = e.match(n), s = a.length; for (r = 0; r < s; r++)i = t[a[r]] || u[a[r]], a[r] = i || ((o = a[r]).match(/\[[\s\S]/) ? o.replace(/^\[|]$/g, "") : o.replace(/\\/g, "")); return function (e) { for (var t = "", n = 0; n < s; n++)a[n] instanceof Function ? t += a[n](e, u) : t += a[n]; return t } }(r, o, c)(d) : "Invalid Date" } }, function(e, t, n) { e.exports = n(3438) },,,, function(e, t, n) { var r = n(22); e.exports = function isAfter(e, t) { var n = r(e), i = r(t); return n.getTime() > i.getTime() } }, function(e, t, n) { e.exports = n(3371) }, function(e, t, n) { e.exports = n(3382) }, function(e, t, n) { window, e.exports = function (e) { var t = {}; function o(n) { if (t[n]) return t[n].exports; var r = t[n] = { i: n, l: !1, exports: {} }; return e[n].call(r.exports, r, r.exports, o), r.l = !0, r.exports } return o.m = e, o.c = t, o.d = function (e, t, n) { o.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: n }) }, o.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, o.t = function (e, t) { if (1 & t && (e = o(e)), 8 & t) return e; if (4 & t && "object" == typeof e && e && e.__esModule) return e; var n = Object.create(null); if (o.r(n), Object.defineProperty(n, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e) for (var r in e) o.d(n, r, function (t) { return e[t] }.bind(null, r)); return n }, o.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return o.d(t, "a", t), t }, o.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, o.p = "/dist/", o(o.s = 11) }([function (e, t, n) { var r = n(6); "string" == typeof r && (r = [[e.i, r, ""]]), r.locals && (e.exports = r.locals), (0, n(4).default)("27d83796", r, !1, {}) }, function (e, t, n) { var r = n(8); "string" == typeof r && (r = [[e.i, r, ""]]), r.locals && (e.exports = r.locals), (0, n(4).default)("0e783494", r, !1, {}) }, function (e, t, n) { var r = n(10); "string" == typeof r && (r = [[e.i, r, ""]]), r.locals && (e.exports = r.locals), (0, n(4).default)("17757f60", r, !1, {}) }, function (e, t) { e.exports = function (e) { var t = []; return t.toString = function () { return this.map(function (t) { var n = function (e, t) { var n, r = e[1] || "", i = e[3]; if (!i) return r; if (t && "function" == typeof btoa) { var o = (n = i, "/*# sourceMappingURL=data:application/json;charset=utf-8;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(n)))) + " */"), a = i.sources.map(function (e) { return "/*# sourceURL=" + i.sourceRoot + e + " */" }); return [r].concat(a).concat([o]).join("\n") } return [r].join("\n") }(t, e); return t[2] ? "@media " + t[2] + "{" + n + "}" : n }).join("") }, t.i = function (e, n) { "string" == typeof e && (e = [[null, e, ""]]); for (var r = {}, i = 0; i < this.length; i++) { var o = this[i][0]; "number" == typeof o && (r[o] = !0) } for (i = 0; i < e.length; i++) { var a = e[i]; "number" == typeof a[0] && r[a[0]] || (n && !a[2] ? a[2] = n : n && (a[2] = "(" + a[2] + ") and (" + n + ")"), t.push(a)) } }, t } }, function (e, t, n) { "use strict"; function l(e, t) { for (var n = [], r = {}, i = 0; i < t.length; i++) { var o = t[i], a = o[0], s = { id: e + ":" + i, css: o[1], media: o[2], sourceMap: o[3] }; r[a] ? r[a].parts.push(s) : n.push(r[a] = { id: a, parts: [s] }) } return n } n.r(t), n.d(t, "default", function () { return p }); var r = "undefined" != typeof document; if ("undefined" != typeof DEBUG && DEBUG && !r) throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment."); var i = {}, o = r && (document.head || document.getElementsByTagName("head")[0]), a = null, s = 0, u = !1, c = function () { }, d = null, f = "data-vue-ssr-id", h = "undefined" != typeof navigator && /msie [6-9]\b/.test(navigator.userAgent.toLowerCase()); function p(e, t, n, r) { u = n, d = r || {}; var o = l(e, t); return v(o), function (t) { for (var n = [], r = 0; r < o.length; r++) { var a = o[r]; (s = i[a.id]).refs--, n.push(s) } for (t ? v(o = l(e, t)) : o = [], r = 0; r < n.length; r++) { var s; if (0 === (s = n[r]).refs) { for (var u = 0; u < s.parts.length; u++)s.parts[u](); delete i[s.id] } } } } function v(e) { for (var t = 0; t < e.length; t++) { var n = e[t], r = i[n.id]; if (r) { r.refs++; for (var o = 0; o < r.parts.length; o++)r.parts[o](n.parts[o]); for (; o < n.parts.length; o++)r.parts.push(g(n.parts[o])); r.parts.length > n.parts.length && (r.parts.length = n.parts.length) } else { var a = []; for (o = 0; o < n.parts.length; o++)a.push(g(n.parts[o])); i[n.id] = { id: n.id, refs: 1, parts: a } } } } function m() { var e = document.createElement("style"); return e.type = "text/css", o.appendChild(e), e } function g(e) { var t, n, r = document.querySelector("style[" + f + '~="' + e.id + '"]'); if (r) { if (u) return c; r.parentNode.removeChild(r) } if (h) { var i = s++; r = a || (a = m()), t = w.bind(null, r, i, !1), n = w.bind(null, r, i, !0) } else r = m(), t = function (e, t) { var n = t.css, r = t.media, i = t.sourceMap; if (r && e.setAttribute("media", r), d.ssrId && e.setAttribute(f, t.id), i && (n += "\n/*# sourceURL=" + i.sources[0] + " */", n += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(i)))) + " */"), e.styleSheet) e.styleSheet.cssText = n; else { for (; e.firstChild;)e.removeChild(e.firstChild); e.appendChild(document.createTextNode(n)) } }.bind(null, r), n = function () { r.parentNode.removeChild(r) }; return t(e), function (r) { if (r) { if (r.css === e.css && r.media === e.media && r.sourceMap === e.sourceMap) return; t(e = r) } else n() } } var y, _ = (y = [], function (e, t) { return y[e] = t, y.filter(Boolean).join("\n") }); function w(e, t, n, r) { var i = n ? "" : r.css; if (e.styleSheet) e.styleSheet.cssText = _(t, i); else { var o = document.createTextNode(i), a = e.childNodes; a[t] && e.removeChild(a[t]), a.length ? e.insertBefore(o, a[t]) : e.appendChild(o) } } }, function (e, t, n) { "use strict"; var r = n(0); n.n(r).a }, function (e, t, n) { (e.exports = n(3)(!1)).push([e.i, "\n.vue-modal-resizer {\n  display: block;\n  overflow: hidden;\n  position: absolute;\n  width: 12px;\n  height: 12px;\n  right: 0;\n  bottom: 0;\n  z-index: 9999999;\n  background: transparent;\n  cursor: se-resize;\n}\n.vue-modal-resizer::after {\n  display: block;\n  position: absolute;\n  content: '';\n  background: transparent;\n  left: 0;\n  top: 0;\n  width: 0;\n  height: 0;\n  border-bottom: 10px solid #ddd;\n  border-left: 10px solid transparent;\n}\n.vue-modal-resizer.clicked::after {\n  border-bottom: 10px solid #369be9;\n}\n", ""]) }, function (e, t, n) { "use strict"; var r = n(1); n.n(r).a }, function (e, t, n) { (e.exports = n(3)(!1)).push([e.i, "\n.v--modal-block-scroll {\n  overflow: hidden;\n  width: 100vw;\n}\n.v--modal-overlay {\n  position: fixed;\n  box-sizing: border-box;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.2);\n  z-index: 999;\n  opacity: 1;\n}\n.v--modal-overlay.scrollable {\n  height: 100%;\n  min-height: 100vh;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n}\n.v--modal-overlay .v--modal-background-click {\n  width: 100%;\n  height: 100%;\n}\n.v--modal-overlay .v--modal-box {\n  position: relative;\n  overflow: hidden;\n  box-sizing: border-box;\n}\n.v--modal-overlay.scrollable .v--modal-box {\n  margin-bottom: 2px;\n}\n.v--modal {\n  background-color: white;\n  text-align: left;\n  border-radius: 3px;\n  box-shadow: 0 20px 60px -2px rgba(27, 33, 58, 0.4);\n  padding: 0;\n}\n.v--modal.v--modal-fullscreen {\n  width: 100vw;\n  height: 100vh;\n  margin: 0;\n  left: 0;\n  top: 0;\n}\n.v--modal-top-right {\n  display: block;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n.overlay-fade-enter-active,\n.overlay-fade-leave-active {\n  transition: all 0.2s;\n}\n.overlay-fade-enter,\n.overlay-fade-leave-active {\n  opacity: 0;\n}\n.nice-modal-fade-enter-active,\n.nice-modal-fade-leave-active {\n  transition: all 0.4s;\n}\n.nice-modal-fade-enter,\n.nice-modal-fade-leave-active {\n  opacity: 0;\n  transform: translateY(-20px);\n}\n", ""]) }, function (e, t, n) { "use strict"; var r = n(2); n.n(r).a }, function (e, t, n) { (e.exports = n(3)(!1)).push([e.i, "\n.vue-dialog div {\n  box-sizing: border-box;\n}\n.vue-dialog .dialog-flex {\n  width: 100%;\n  height: 100%;\n}\n.vue-dialog .dialog-content {\n  flex: 1 0 auto;\n  width: 100%;\n  padding: 15px;\n  font-size: 14px;\n}\n.vue-dialog .dialog-c-title {\n  font-weight: 600;\n  padding-bottom: 15px;\n}\n.vue-dialog .dialog-c-text {\n}\n.vue-dialog .vue-dialog-buttons {\n  display: flex;\n  flex: 0 1 auto;\n  width: 100%;\n  border-top: 1px solid #eee;\n}\n.vue-dialog .vue-dialog-buttons-none {\n  width: 100%;\n  padding-bottom: 15px;\n}\n.vue-dialog-button {\n  font-size: 12px !important;\n  background: transparent;\n  padding: 0;\n  margin: 0;\n  border: 0;\n  cursor: pointer;\n  box-sizing: border-box;\n  line-height: 40px;\n  height: 40px;\n  color: inherit;\n  font: inherit;\n  outline: none;\n}\n.vue-dialog-button:hover {\n  background: rgba(0, 0, 0, 0.01);\n}\n.vue-dialog-button:active {\n  background: rgba(0, 0, 0, 0.025);\n}\n.vue-dialog-button:not(:first-of-type) {\n  border-left: 1px solid #eee;\n}\n", ""]) }, function (e, t, n) { "use strict"; n.r(t); var r = function () { var e = this, t = e.$createElement, n = e._self._c || t; return n("transition", { attrs: { name: e.overlayTransition } }, [e.visibility.overlay ? n("div", { ref: "overlay", class: e.overlayClass, attrs: { "aria-expanded": e.visibility.overlay.toString(), "data-modal": e.name } }, [n("div", { staticClass: "v--modal-background-click", on: { mousedown: function (t) { return t.target !== t.currentTarget ? null : e.handleBackgroundClick(t) }, touchstart: function (t) { return t.target !== t.currentTarget ? null : e.handleBackgroundClick(t) } } }, [n("div", { staticClass: "v--modal-top-right" }, [e._t("top-right")], 2), e._v(" "), n("transition", { attrs: { name: e.transition }, on: { "before-enter": e.beforeTransitionEnter, "after-enter": e.afterTransitionEnter, "after-leave": e.afterTransitionLeave } }, [e.visibility.modal ? n("div", { ref: "modal", class: e.modalClass, style: e.modalStyle }, [e._t("default"), e._v(" "), e.resizable && !e.isAutoHeight ? n("resizer", { attrs: { "min-width": e.minWidth, "min-height": e.minHeight }, on: { resize: e.handleModalResize } }) : e._e()], 2) : e._e()])], 1)]) : e._e()]) }, i = function () { var e = this.$createElement; return (this._self._c || e)("div", { class: this.className }) }; i._withStripped = r._withStripped = !0; var o = function () { var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 0; return function () { return (e++).toString() } }(), a = function (e, t, n) { return n < e ? e : t < n ? t : n }, s = { name: "VueJsModalResizer", props: { minHeight: { type: Number, default: 0 }, minWidth: { type: Number, default: 0 } }, data: function () { return { clicked: !1, size: {} } }, mounted: function () { this.$el.addEventListener("mousedown", this.start, !1) }, computed: { className: function () { return { "vue-modal-resizer": !0, clicked: this.clicked } } }, methods: { start: function (e) { this.clicked = !0, window.addEventListener("mousemove", this.mousemove, !1), window.addEventListener("mouseup", this.stop, !1), e.stopPropagation(), e.preventDefault() }, stop: function () { this.clicked = !1, window.removeEventListener("mousemove", this.mousemove, !1), window.removeEventListener("mouseup", this.stop, !1), this.$emit("resize-stop", { element: this.$el.parentElement, size: this.size }) }, mousemove: function (e) { this.resize(e) }, resize: function (e) { var t = this.$el.parentElement; if (t) { var n = e.clientX - t.offsetLeft, r = e.clientY - t.offsetTop; n = a(this.minWidth, window.innerWidth, n), r = a(this.minHeight, window.innerHeight, r), this.size = { width: n, height: r }, t.style.width = n + "px", t.style.height = r + "px", this.$emit("resize", { element: t, size: this.size }) } } } }; function l(e, t, n, r, i, o, a, s) { var l, u = "function" == typeof e ? e.options : e; if (t && (u.render = t, u.staticRenderFns = n, u._compiled = !0), r && (u.functional = !0), o && (u._scopeId = "data-v-" + o), a ? (l = function (e) { (e = e || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) || "undefined" == typeof __VUE_SSR_CONTEXT__ || (e = __VUE_SSR_CONTEXT__), i && i.call(this, e), e && e._registeredComponents && e._registeredComponents.add(a) }, u._ssrRegister = l) : i && (l = s ? function () { i.call(this, this.$root.$options.shadowRoot) } : i), l) if (u.functional) { u._injectStyles = l; var c = u.render; u.render = function (e, t) { return l.call(t), c(e, t) } } else { var d = u.beforeCreate; u.beforeCreate = d ? [].concat(d, l) : [l] } return { exports: e, options: u } } n(5); var u = l(s, i, [], !1, null, null, null); u.options.__file = "src/Resizer.vue"; var c = u.exports; function h(e) { return (h = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e })(e) } var d = "[-+]?[0-9]*.?[0-9]+", f = [{ name: "px", regexp: new RegExp("^".concat(d, "px$")) }, { name: "%", regexp: new RegExp("^".concat(d, "%$")) }, { name: "px", regexp: new RegExp("^".concat(d, "$")) }], p = function (e) { switch (h(e)) { case "number": return { type: "px", value: e }; case "string": return function (e) { if ("auto" === e) return { type: e, value: 0 }; for (var t = 0; t < f.length; t++) { var n = f[t]; if (n.regexp.test(e)) return { type: n.name, value: parseFloat(e) } } return { type: "", value: e } }(e); default: return { type: "", value: e } } }, m = function (e) { if ("string" != typeof e) return 0 <= e; var t = p(e); return ("%" === t.type || "px" === t.type) && 0 < t.value }, g = { name: "VueJsModal", props: { name: { required: !0, type: String }, delay: { type: Number, default: 0 }, resizable: { type: Boolean, default: !1 }, adaptive: { type: Boolean, default: !1 }, draggable: { type: [Boolean, String], default: !1 }, scrollable: { type: Boolean, default: !1 }, reset: { type: Boolean, default: !1 }, overlayTransition: { type: String, default: "overlay-fade" }, transition: { type: String }, clickToClose: { type: Boolean, default: !0 }, classes: { type: [String, Array], default: "v--modal" }, minWidth: { type: Number, default: 0, validator: function (e) { return 0 <= e } }, minHeight: { type: Number, default: 0, validator: function (e) { return 0 <= e } }, maxWidth: { type: Number, default: 1 / 0 }, maxHeight: { type: Number, default: 1 / 0 }, width: { type: [Number, String], default: 600, validator: m }, height: { type: [Number, String], default: 300, validator: function (e) { return "auto" === e || m(e) } }, pivotX: { type: Number, default: .5, validator: function (e) { return 0 <= e && e <= 1 } }, pivotY: { type: Number, default: .5, validator: function (e) { return 0 <= e && e <= 1 } } }, components: { Resizer: c }, data: function () { return { visible: !1, visibility: { modal: !1, overlay: !1 }, shift: { left: 0, top: 0 }, modal: { width: 0, widthType: "px", height: 0, heightType: "px", renderedHeight: 0 }, window: { width: 0, height: 0 }, mutationObserver: null } }, created: function () { this.setInitialSize() }, beforeMount: function () { var e = this; if (L.event.$on("toggle", this.handleToggleEvent), window.addEventListener("resize", this.handleWindowResize), this.handleWindowResize(), this.scrollable && !this.isAutoHeight && console.warn('Modal "'.concat(this.name, '" has scrollable flag set to true ') + 'but height is not "auto" ('.concat(this.height, ")")), this.isAutoHeight) { var t = function () { if ("undefined" != typeof window) for (var e = ["", "WebKit", "Moz", "O", "Ms"], t = 0; t < e.length; t++) { var n = e[t] + "MutationObserver"; if (n in window) return window[n] } return !1 }(); t && (this.mutationObserver = new t(function (t) { e.updateRenderedHeight() })) } this.clickToClose && window.addEventListener("keyup", this.handleEscapeKeyUp) }, beforeDestroy: function () { L.event.$off("toggle", this.handleToggleEvent), window.removeEventListener("resize", this.handleWindowResize), this.clickToClose && window.removeEventListener("keyup", this.handleEscapeKeyUp), this.scrollable && document.body.classList.remove("v--modal-block-scroll") }, computed: { isAutoHeight: function () { return "auto" === this.modal.heightType }, position: function () { var e = this.window, t = this.shift, n = this.pivotX, r = this.pivotY, i = this.trueModalWidth, o = this.trueModalHeight, s = e.width - i, l = e.height - o, u = t.left + n * s, c = t.top + r * l; return { left: parseInt(a(0, s, u)), top: parseInt(a(0, l, c)) } }, trueModalWidth: function () { var e = this.window, t = this.modal, n = this.adaptive, r = this.minWidth, i = this.maxWidth, o = "%" === t.widthType ? e.width / 100 * t.width : t.width, s = Math.min(e.width, i); return n ? a(r, s, o) : o }, trueModalHeight: function () { var e = this.window, t = this.modal, n = this.isAutoHeight, r = this.adaptive, i = this.maxHeight, o = "%" === t.heightType ? e.height / 100 * t.height : t.height; if (n) return this.modal.renderedHeight; var s = Math.min(e.height, i); return r ? a(this.minHeight, s, o) : o }, overlayClass: function () { return { "v--modal-overlay": !0, scrollable: this.scrollable && this.isAutoHeight } }, modalClass: function () { return ["v--modal-box", this.classes] }, modalStyle: function () { return { top: this.position.top + "px", left: this.position.left + "px", width: this.trueModalWidth + "px", height: this.isAutoHeight ? "auto" : this.trueModalHeight + "px" } } }, watch: { visible: function (e) { var t = this; e ? (this.visibility.overlay = !0, setTimeout(function () { t.visibility.modal = !0, t.$nextTick(function () { t.addDraggableListeners(), t.callAfterEvent(!0) }) }, this.delay)) : (this.visibility.modal = !1, setTimeout(function () { t.visibility.overlay = !1, t.$nextTick(function () { t.removeDraggableListeners(), t.callAfterEvent(!1) }) }, this.delay)) } }, methods: { handleToggleEvent: function (e, t, n) { if (this.name === e) { var r = void 0 === t ? !this.visible : t; this.toggle(r, n) } }, setInitialSize: function () { var e = this.modal, t = p(this.width), n = p(this.height); e.width = t.value, e.widthType = t.type, e.height = n.value, e.heightType = n.type }, handleEscapeKeyUp: function (e) { 27 === e.which && this.visible && this.$modal.hide(this.name) }, handleWindowResize: function () { this.window.width = window.innerWidth, this.window.height = window.innerHeight }, createModalEvent: function () { var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}; return function () { var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}; return function (e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}, r = Object.keys(n); "function" == typeof Object.getOwnPropertySymbols && (r = r.concat(Object.getOwnPropertySymbols(n).filter(function (e) { return Object.getOwnPropertyDescriptor(n, e).enumerable }))), r.forEach(function (t) { var r, i, o; r = e, o = n[i = t], i in r ? Object.defineProperty(r, i, { value: o, enumerable: !0, configurable: !0, writable: !0 }) : r[i] = o }) } return e }({ id: o(), timestamp: Date.now(), canceled: !1 }, e) }(function (e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}, r = Object.keys(n); "function" == typeof Object.getOwnPropertySymbols && (r = r.concat(Object.getOwnPropertySymbols(n).filter(function (e) { return Object.getOwnPropertyDescriptor(n, e).enumerable }))), r.forEach(function (t) { var r, i, o; r = e, o = n[i = t], i in r ? Object.defineProperty(r, i, { value: o, enumerable: !0, configurable: !0, writable: !0 }) : r[i] = o }) } return e }({ name: this.name, ref: this.$refs.modal }, e)) }, handleModalResize: function (e) { this.modal.widthType = "px", this.modal.width = e.size.width, this.modal.heightType = "px", this.modal.height = e.size.height; var t = this.modal.size; this.$emit("resize", this.createModalEvent({ size: t })) }, toggle: function (e, t) { var n = this.reset, r = this.scrollable, i = this.visible; if (i !== e) { var o = i ? "before-close" : "before-open"; "before-open" === o ? (document.activeElement && "BODY" !== document.activeElement.tagName && document.activeElement.blur && document.activeElement.blur(), n && (this.setInitialSize(), this.shift.left = 0, this.shift.top = 0), r && document.body.classList.add("v--modal-block-scroll")) : r && document.body.classList.remove("v--modal-block-scroll"); var a = !1, s = this.createModalEvent({ stop: function () { a = !0 }, state: e, params: t }); this.$emit(o, s), a || (this.visible = e) } }, getDraggableElement: function () { var e = "string" != typeof this.draggable ? ".v--modal-box" : this.draggable; return e ? this.$refs.overlay.querySelector(e) : null }, handleBackgroundClick: function () { this.clickToClose && this.toggle(!1) }, callAfterEvent: function (e) { e ? this.connectObserver() : this.disconnectObserver(); var t = e ? "opened" : "closed", n = this.createModalEvent({ state: e }); this.$emit(t, n) }, addDraggableListeners: function () { var t = this; if (this.draggable) { var n = this.getDraggableElement(); if (n) { var r = 0, i = 0, o = 0, a = 0, s = function (e) { return e.touches && 0 < e.touches.length ? e.touches[0] : e }, l = function (e) { var n = e.target; if (!n || "INPUT" !== n.nodeName) { var l = s(e), d = l.clientX, f = l.clientY; document.addEventListener("mousemove", u), document.addEventListener("touchmove", u), document.addEventListener("mouseup", c), document.addEventListener("touchend", c), r = d, i = f, o = t.shift.left, a = t.shift.top } }, u = function (e) { var n = s(e), l = n.clientX, u = n.clientY; t.shift.left = o + l - r, t.shift.top = a + u - i, e.preventDefault() }, c = function e(t) { document.removeEventListener("mousemove", u), document.removeEventListener("touchmove", u), document.removeEventListener("mouseup", e), document.removeEventListener("touchend", e), t.preventDefault() }; n.addEventListener("mousedown", l), n.addEventListener("touchstart", l) } } }, removeDraggableListeners: function () { }, updateRenderedHeight: function () { this.$refs.modal && (this.modal.renderedHeight = this.$refs.modal.getBoundingClientRect().height) }, connectObserver: function () { this.mutationObserver && this.mutationObserver.observe(this.$refs.overlay, { childList: !0, attributes: !0, subtree: !0 }) }, disconnectObserver: function () { this.mutationObserver && this.mutationObserver.disconnect() }, beforeTransitionEnter: function () { this.connectObserver() }, afterTransitionEnter: function () { }, afterTransitionLeave: function () { } } }, v = (n(7), l(g, r, [], !1, null, null, null)); v.options.__file = "src/Modal.vue"; var y = v.exports, _ = function () { var e = this, t = e.$createElement, n = e._self._c || t; return n("modal", { attrs: { name: "dialog", height: "auto", classes: ["v--modal", "vue-dialog", this.params.class], width: e.width, "pivot-y": .3, adaptive: !0, clickToClose: e.clickToClose, transition: e.transition }, on: { "before-open": e.beforeOpened, "before-close": e.beforeClosed, opened: function (t) { e.$emit("opened", t) }, closed: function (t) { e.$emit("closed", t) } } }, [n("div", { staticClass: "dialog-content" }, [e.params.title ? n("div", { staticClass: "dialog-c-title", domProps: { innerHTML: e._s(e.params.title || "") } }) : e._e(), e._v(" "), e.params.component ? n(e.params.component, e._b({ tag: "component" }, "component", e.params.props, !1)) : n("div", { staticClass: "dialog-c-text", domProps: { innerHTML: e._s(e.params.text || "") } })], 1), e._v(" "), e.buttons ? n("div", { staticClass: "vue-dialog-buttons" }, e._l(e.buttons, function (t, r) { return n("button", { key: r, class: t.class || "vue-dialog-button", style: e.buttonStyle, attrs: { type: "button" }, domProps: { innerHTML: e._s(t.title) }, on: { click: function (t) { t.stopPropagation(), e.click(r, t) } } }, [e._v("\n      " + e._s(t.title) + "\n    ")]) })) : n("div", { staticClass: "vue-dialog-buttons-none" })]) }; _._withStripped = !0; var b = { name: "VueJsDialog", props: { width: { type: [Number, String], default: 400 }, clickToClose: { type: Boolean, default: !0 }, transition: { type: String, default: "fade" } }, data: function () { return { params: {}, defaultButtons: [{ title: "CLOSE" }] } }, computed: { buttons: function () { return this.params.buttons || this.defaultButtons }, buttonStyle: function () { return { flex: "1 1 ".concat(100 / this.buttons.length, "%") } } }, methods: { beforeOpened: function (e) { window.addEventListener("keyup", this.onKeyUp), this.params = e.params || {}, this.$emit("before-opened", e) }, beforeClosed: function (e) { window.removeEventListener("keyup", this.onKeyUp), this.params = {}, this.$emit("before-closed", e) }, click: function (e, t) { var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : "click", r = this.buttons[e]; r && "function" == typeof r.handler ? r.handler(e, t, { source: n }) : this.$modal.hide("dialog") }, onKeyUp: function (e) { if (13 === e.which && 0 < this.buttons.length) { var t = 1 === this.buttons.length ? 0 : this.buttons.findIndex(function (e) { return e.default }); -1 !== t && this.click(t, e, "keypress") } } } }, w = (n(9), l(b, _, [], !1, null, null, null)); w.options.__file = "src/Dialog.vue"; var x = w.exports, C = function () { var e = this, t = e.$createElement, n = e._self._c || t; return n("div", { attrs: { id: "modals-container" } }, e._l(e.modals, function (t) { return n("modal", e._g(e._b({ key: t.id, on: { closed: function (n) { e.remove(t.id) } } }, "modal", t.modalAttrs, !1), t.modalListeners), [n(t.component, e._g(e._b({ tag: "component", on: { close: function (n) { e.$modal.hide(t.modalAttrs.name) } } }, "component", t.componentAttrs, !1), e.$listeners))], 1) })) }; C._withStripped = !0; var S = l({ data: function () { return { modals: [] } }, created: function () { this.$root._dynamicContainer = this }, methods: { add: function (e) { var t = this, n = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, r = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}, i = 3 < arguments.length ? arguments[3] : void 0, a = o(), s = r.name || "_dynamic_modal_" + a; this.modals.push({ id: a, modalAttrs: function (e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}, r = Object.keys(n); "function" == typeof Object.getOwnPropertySymbols && (r = r.concat(Object.getOwnPropertySymbols(n).filter(function (e) { return Object.getOwnPropertyDescriptor(n, e).enumerable }))), r.forEach(function (t) { var r, i, o; r = e, o = n[i = t], i in r ? Object.defineProperty(r, i, { value: o, enumerable: !0, configurable: !0, writable: !0 }) : r[i] = o }) } return e }({}, r, { name: s }), modalListeners: i, component: e, componentAttrs: n }), this.$nextTick(function () { t.$modal.show(s) }) }, remove: function (e) { for (var t in this.modals) if (this.modals[t].id === e) return void this.modals.splice(t, 1) } } }, C, [], !1, null, null, null); S.options.__file = "src/ModalsContainer.vue"; var k = S.exports, T = { install: function (e) { var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}; this.installed || (this.installed = !0, this.event = new e, this.rootInstance = null, this.componentName = t.componentName || "Modal", e.prototype.$modal = { show: function (n, r, i) { var o = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : {}; if ("string" != typeof n) { var a = i && i.root ? i.root : T.rootInstance, s = function (e, t, n) { if (!n._dynamicContainer && t.injectModalsContainer) { var r = document.createElement("div"); document.body.appendChild(r), new e({ parent: n, render: function (e) { return e(k) } }).$mount(r) } return n._dynamicContainer }(e, t, a); s ? s.add(n, r, i, o) : console.warn("[vue-js-modal] In order to render dynamic modals, a <modals-container> component must be present on the page") } else T.event.$emit("toggle", n, !0, r) }, hide: function (e, t) { T.event.$emit("toggle", e, !1, t) }, toggle: function (e, t) { T.event.$emit("toggle", e, void 0, t) } }, e.component(this.componentName, y), t.dialog && e.component("VDialog", x), t.dynamic && (e.component("ModalsContainer", k), e.mixin({ beforeMount: function () { null === T.rootInstance && (T.rootInstance = this.$root) } }))) } }, L = t.default = T }]) },,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = _interopRequireDefault(n(1154)), o = _interopRequireDefault(n(259)), a = _interopRequireDefault(n(773)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var s = function (e) { function Container() { return function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Container), function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.apply(this, arguments)) } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(Container, e), Container.prototype.push = function push(e) { return e.parent = this, this.nodes.push(e), this }, Container.prototype.each = function each(e) { this.lastEach || (this.lastEach = 0), this.indexes || (this.indexes = {}), this.lastEach += 1; var t = this.lastEach; if (this.indexes[t] = 0, this.nodes) { for (var n = void 0, r = void 0; this.indexes[t] < this.nodes.length && (n = this.indexes[t], !1 !== (r = e(this.nodes[n], n)));)this.indexes[t] += 1; return delete this.indexes[t], r } }, Container.prototype.walk = function walk(e) { return this.each(function (t, n) { var r = e(t, n); return !1 !== r && t.walk && (r = t.walk(e)), r }) }, Container.prototype.walkDecls = function walkDecls(e, t) { return t ? e instanceof RegExp ? this.walk(function (n, r) { if ("decl" === n.type && e.test(n.prop)) return t(n, r) }) : this.walk(function (n, r) { if ("decl" === n.type && n.prop === e) return t(n, r) }) : (t = e, this.walk(function (e, n) { if ("decl" === e.type) return t(e, n) })) }, Container.prototype.walkRules = function walkRules(e, t) { return t ? e instanceof RegExp ? this.walk(function (n, r) { if ("rule" === n.type && e.test(n.selector)) return t(n, r) }) : this.walk(function (n, r) { if ("rule" === n.type && n.selector === e) return t(n, r) }) : (t = e, this.walk(function (e, n) { if ("rule" === e.type) return t(e, n) })) }, Container.prototype.walkAtRules = function walkAtRules(e, t) { return t ? e instanceof RegExp ? this.walk(function (n, r) { if ("atrule" === n.type && e.test(n.name)) return t(n, r) }) : this.walk(function (n, r) { if ("atrule" === n.type && n.name === e) return t(n, r) }) : (t = e, this.walk(function (e, n) { if ("atrule" === e.type) return t(e, n) })) }, Container.prototype.walkComments = function walkComments(e) { return this.walk(function (t, n) { if ("comment" === t.type) return e(t, n) }) }, Container.prototype.append = function append() { for (var e = arguments.length, t = Array(e), n = 0; n < e; n++)t[n] = arguments[n]; var r = t, i = Array.isArray(r), o = 0; for (r = i ? r : r[Symbol.iterator](); ;) { var a; if (i) { if (o >= r.length) break; a = r[o++] } else { if ((o = r.next()).done) break; a = o.value } var s = a, l = this.normalize(s, this.last), u = Array.isArray(l), c = 0; for (l = u ? l : l[Symbol.iterator](); ;) { var d; if (u) { if (c >= l.length) break; d = l[c++] } else { if ((c = l.next()).done) break; d = c.value } var f = d; this.nodes.push(f) } } return this }, Container.prototype.prepend = function prepend() { for (var e = arguments.length, t = Array(e), n = 0; n < e; n++)t[n] = arguments[n]; var r = t = t.reverse(), i = Array.isArray(r), o = 0; for (r = i ? r : r[Symbol.iterator](); ;) { var a; if (i) { if (o >= r.length) break; a = r[o++] } else { if ((o = r.next()).done) break; a = o.value } var s = a, l = this.normalize(s, this.first, "prepend").reverse(), u = l, c = Array.isArray(u), d = 0; for (u = c ? u : u[Symbol.iterator](); ;) { var f; if (c) { if (d >= u.length) break; f = u[d++] } else { if ((d = u.next()).done) break; f = d.value } var h = f; this.nodes.unshift(h) } for (var p in this.indexes) this.indexes[p] = this.indexes[p] + l.length } return this }, Container.prototype.cleanRaws = function cleanRaws(t) { if (e.prototype.cleanRaws.call(this, t), this.nodes) { var n = this.nodes, r = Array.isArray(n), i = 0; for (n = r ? n : n[Symbol.iterator](); ;) { var o; if (r) { if (i >= n.length) break; o = n[i++] } else { if ((i = n.next()).done) break; o = i.value } o.cleanRaws(t) } } }, Container.prototype.insertBefore = function insertBefore(e, t) { var n = 0 === (e = this.index(e)) && "prepend", r = this.normalize(t, this.nodes[e], n).reverse(), i = r, o = Array.isArray(i), a = 0; for (i = o ? i : i[Symbol.iterator](); ;) { var s; if (o) { if (a >= i.length) break; s = i[a++] } else { if ((a = i.next()).done) break; s = a.value } var l = s; this.nodes.splice(e, 0, l) } var u = void 0; for (var c in this.indexes) e <= (u = this.indexes[c]) && (this.indexes[c] = u + r.length); return this }, Container.prototype.insertAfter = function insertAfter(e, t) { e = this.index(e); var n = this.normalize(t, this.nodes[e]).reverse(), r = n, i = Array.isArray(r), o = 0; for (r = i ? r : r[Symbol.iterator](); ;) { var a; if (i) { if (o >= r.length) break; a = r[o++] } else { if ((o = r.next()).done) break; a = o.value } var s = a; this.nodes.splice(e + 1, 0, s) } var l = void 0; for (var u in this.indexes) e < (l = this.indexes[u]) && (this.indexes[u] = l + n.length); return this }, Container.prototype.remove = function remove(t) { return void 0 !== t ? ((0, o.default)("Container#remove is deprecated. Use Container#removeChild"), this.removeChild(t)) : e.prototype.remove.call(this), this }, Container.prototype.removeChild = function removeChild(e) { e = this.index(e), this.nodes[e].parent = void 0, this.nodes.splice(e, 1); var t = void 0; for (var n in this.indexes) (t = this.indexes[n]) >= e && (this.indexes[n] = t - 1); return this }, Container.prototype.removeAll = function removeAll() { var e = this.nodes, t = Array.isArray(e), n = 0; for (e = t ? e : e[Symbol.iterator](); ;) { var r; if (t) { if (n >= e.length) break; r = e[n++] } else { if ((n = e.next()).done) break; r = n.value } r.parent = void 0 } return this.nodes = [], this }, Container.prototype.replaceValues = function replaceValues(e, t, n) { return n || (n = t, t = {}), this.walkDecls(function (r) { t.props && -1 === t.props.indexOf(r.prop) || t.fast && -1 === r.value.indexOf(t.fast) || (r.value = r.value.replace(e, n)) }), this }, Container.prototype.every = function every(e) { return this.nodes.every(e) }, Container.prototype.some = function some(e) { return this.nodes.some(e) }, Container.prototype.index = function index(e) { return "number" == typeof e ? e : this.nodes.indexOf(e) }, Container.prototype.normalize = function normalize(e, t) { var r = this; if ("string" == typeof e) e = function cleanSource(e) { return e.map(function (e) { return e.nodes && (e.nodes = cleanSource(e.nodes)), delete e.source, e }) }(n(1153)(e).nodes); else if (!Array.isArray(e)) if ("root" === e.type) e = e.nodes; else if (e.type) e = [e]; else if (e.prop) { if (void 0 === e.value) throw new Error("Value field is missed in node creation"); "string" != typeof e.value && (e.value = String(e.value)), e = [new i.default(e)] } else if (e.selector) { e = [new (n(770))(e)] } else if (e.name) { e = [new (n(771))(e)] } else { if (!e.text) throw new Error("Unknown node type in node creation"); e = [new a.default(e)] } return e.map(function (e) { return void 0 === e.raws && (e = r.rebuild(e)), e.parent && (e = e.clone()), void 0 === e.raws.before && t && void 0 !== t.raws.before && (e.raws.before = t.raws.before.replace(/[^\s]/g, "")), e.parent = r, e }) }, Container.prototype.rebuild = function rebuild(e, t) { var r = this, o = void 0; if ("root" === e.type) { var s = n(1152); o = new s } else if ("atrule" === e.type) { var l = n(771); o = new l } else if ("rule" === e.type) { var u = n(770); o = new u } else "decl" === e.type ? o = new i.default : "comment" === e.type && (o = new a.default); for (var c in e) "nodes" === c ? o.nodes = e.nodes.map(function (e) { return r.rebuild(e, o) }) : "parent" === c && t ? o.parent = t : e.hasOwnProperty(c) && (o[c] = e[c]); return o }, Container.prototype.eachInside = function eachInside(e) { return (0, o.default)("Container#eachInside is deprecated. Use Container#walk instead."), this.walk(e) }, Container.prototype.eachDecl = function eachDecl(e, t) { return (0, o.default)("Container#eachDecl is deprecated. Use Container#walkDecls instead."), this.walkDecls(e, t) }, Container.prototype.eachRule = function eachRule(e, t) { return (0, o.default)("Container#eachRule is deprecated. Use Container#walkRules instead."), this.walkRules(e, t) }, Container.prototype.eachAtRule = function eachAtRule(e, t) { return (0, o.default)("Container#eachAtRule is deprecated. Use Container#walkAtRules instead."), this.walkAtRules(e, t) }, Container.prototype.eachComment = function eachComment(e) { return (0, o.default)("Container#eachComment is deprecated. Use Container#walkComments instead."), this.walkComments(e) }, r(Container, [{ key: "first", get: function get() { if (this.nodes) return this.nodes[0] } }, { key: "last", get: function get() { if (this.nodes) return this.nodes[this.nodes.length - 1] } }, { key: "semicolon", get: function get() { return (0, o.default)("Node#semicolon is deprecated. Use Node#raws.semicolon"), this.raws.semicolon }, set: function set(e) { (0, o.default)("Node#semicolon is deprecated. Use Node#raws.semicolon"), this.raws.semicolon = e } }, { key: "after", get: function get() { return (0, o.default)("Node#after is deprecated. Use Node#raws.after"), this.raws.after }, set: function set(e) { (0, o.default)("Node#after is deprecated. Use Node#raws.after"), this.raws.after = e } }]), Container }(_interopRequireDefault(n(772)).default); t.default = s, e.exports = t.default },,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { (function (e, r) { var i = n(334), o = n(433), a = n(246); var s = { version: function getVersion() { return e.browser ? n(158).version.split(".") : parseInt(e.version.split(".")[1], 10) > 4 ? n(158).version.split(".") : JSON.parse(o.readFileSync(a.join(r, "../../package.json"))).version.split(".") }(), Parser: n(2913).Parser, Renderer: n(2912).Renderer, tree: n(56), RendererJS: n(2911), default_reference: n(1330), writeError: function (e, t) { var n = "", r = e.extract, o = []; if (!(t = t || {}).silent) { if (t.indent = t.indent || "", !("index" in e && r)) return i.error(t.indent + (e.stack || e.message)); "string" == typeof r[0] && o.push(stylize(e.line - 1 + " " + r[0], "grey")), "" === r[1] && void 0 === r[2] && (r[1] = "\xb6"), o.push(e.line + " " + r[1].slice(0, e.column) + stylize(stylize(r[1][e.column], "bold") + r[1].slice(e.column + 1), "yellow")), "string" == typeof r[2] && o.push(stylize(e.line + 1 + " " + r[2], "grey")), o = t.indent + o.join("\n" + t.indent) + "\x1b[0m\n", n = t.indent + n + stylize(e.message, "red"), e.filename && (n += stylize(" in ", "red") + e.filename), i.error(n, o), e.callLine && (i.error(stylize("from ", "red") + (e.filename || "")), i.error(stylize(e.callLine, "grey") + " " + e.callExtract)), e.stack && i.error(stylize(e.stack, "red")) } } }; for (var l in n(2910), n(2909), n(2908), n(2907), n(2906), n(2905), n(2904), n(2903), n(2902), n(2901), n(2900), n(2899), n(2898), n(2897), n(2896), n(2895), n(2894), n(2893), n(2892), n(2891), n(2890), n(2889), n(2888), n(2887), n(2886), n(2885), n(2884), n(2883), n(2882), s) t[l] = s[l]; function stylize(e, t) { var n = { bold: [1, 22], inverse: [7, 27], underline: [4, 24], yellow: [33, 39], green: [32, 39], red: [31, 39], grey: [90, 39] }; return "\x1b[" + n[t][0] + "m" + e + "\x1b[" + n[t][1] + "m" } }).call(this, n(197), "/") }, function(e, t, n) { var r = n(0), i = n(3), o = n(606), a = ["state", "visible"], s = i.Model.extend({ defaults: function defaults() { return { visible: !1, title: "", preHTMLSnippet: "", postHTMLSnippet: "", state: this.constructor.STATE_LOADING } }, initialize: function initialize(e, t) { if (!t.engine) throw new Error("engine is required"); t.engine.on(o.Events.RELOAD_STARTED, this._onEngineReloadStarted, this) }, _onEngineReloadStarted: function _onEngineReloadStarted() { this.set("state", this.constructor.STATE_LOADING) }, isLoading: function isLoading() { return this.get("state") === this.constructor.STATE_LOADING }, isError: function isError() { return this.get("state") === this.constructor.STATE_ERROR }, isSuccess: function isSuccess() { return this.get("state") === this.constructor.STATE_SUCCESS }, show: function show() { this.set("visible", !0) }, hide: function hide() { this.set("visible", !1) }, isVisible: function isVisible() { return this.get("visible") }, update: function update(e) { this.set(e) }, getNonResettableAttrs: function getNonResettableAttrs() { return a }, reset: function reset() { var e = r.omit(this.defaults(), this.getNonResettableAttrs()); this.set(e) }, isAvailable: function isAvailable() { return !1 } }, { STATE_LOADING: "loading", STATE_SUCCESS: "success", STATE_ERROR: "error" }); e.exports = s }, function(e, t, n) { "use strict"; var r = n(334), i = n(333); function FiltersResult(e, t, n, r) { i.call(this, e, e.length), this.strategy = t, this.stats = n, this.meta = r || {} } function nonNumeric(e) { return !Number.isFinite(e) } r.inherits(FiltersResult, i), e.exports = FiltersResult, FiltersResult.prototype.getStrategy = function () { return this.result.some(nonNumeric) ? "=" : this.strategy } }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = _interopRequireDefault(n(869)), o = _interopRequireDefault(n(268)), a = _interopRequireDefault(n(1346)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var s = function (e) { function Rule(t) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Rule); var n = function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.call(this, t)); return n.type = "rule", n.nodes || (n.nodes = []), n } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(Rule, e), r(Rule, [{ key: "selectors", get: function get() { return a.default.comma(this.selector) }, set: function set(e) { var t = this.selector ? this.selector.match(/,\s*/) : null, n = t ? t[0] : "," + this.raw("between", "beforeOpen"); this.selector = e.join(n) } }, { key: "_selector", get: function get() { return (0, o.default)("Rule#_selector is deprecated. Use Rule#raws.selector"), this.raws.selector }, set: function set(e) { (0, o.default)("Rule#_selector is deprecated. Use Rule#raws.selector"), this.raws.selector = e } }]), Rule }(i.default); t.default = s, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = _interopRequireDefault(n(869)), o = _interopRequireDefault(n(268)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var a = function (e) { function AtRule(t) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, AtRule); var n = function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.call(this, t)); return n.type = "atrule", n } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(AtRule, e), AtRule.prototype.append = function append() { var t; this.nodes || (this.nodes = []); for (var n = arguments.length, r = Array(n), i = 0; i < n; i++)r[i] = arguments[i]; return (t = e.prototype.append).call.apply(t, [this].concat(r)) }, AtRule.prototype.prepend = function prepend() { var t; this.nodes || (this.nodes = []); for (var n = arguments.length, r = Array(n), i = 0; i < n; i++)r[i] = arguments[i]; return (t = e.prototype.prepend).call.apply(t, [this].concat(r)) }, r(AtRule, [{ key: "afterName", get: function get() { return (0, o.default)("AtRule#afterName was deprecated. Use AtRule#raws.afterName"), this.raws.afterName }, set: function set(e) { (0, o.default)("AtRule#afterName was deprecated. Use AtRule#raws.afterName"), this.raws.afterName = e } }, { key: "_params", get: function get() { return (0, o.default)("AtRule#_params was deprecated. Use AtRule#raws.params"), this.raws.params }, set: function set(e) { (0, o.default)("AtRule#_params was deprecated. Use AtRule#raws.params"), this.raws.params = e } }]), AtRule }(i.default); t.default = a, e.exports = t.default }, function(e, t, n) { t.SourceMapGenerator = n(1349).SourceMapGenerator, t.SourceMapConsumer = n(3044).SourceMapConsumer, t.SourceNode = n(3041).SourceNode }, function(module, exports, __webpack_require__) { (function (global) { var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__; !function (global, factory) { module.exports = function (global) { "use strict"; var _Base64 = (global = global || {}).Base64, version = "2.5.1", buffer; if (void 0 !== module && module.exports) try { buffer = eval("require('buffer').Buffer") } catch (e) { buffer = void 0 } var b64chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", b64tab = function (e) { for (var t = {}, n = 0, r = e.length; n < r; n++)t[e.charAt(n)] = n; return t }(b64chars), fromCharCode = String.fromCharCode, cb_utob = function (e) { if (e.length < 2) { var t = e.charCodeAt(0); return t < 128 ? e : t < 2048 ? fromCharCode(192 | t >>> 6) + fromCharCode(128 | 63 & t) : fromCharCode(224 | t >>> 12 & 15) + fromCharCode(128 | t >>> 6 & 63) + fromCharCode(128 | 63 & t) } var t = 65536 + 1024 * (e.charCodeAt(0) - 55296) + (e.charCodeAt(1) - 56320); return fromCharCode(240 | t >>> 18 & 7) + fromCharCode(128 | t >>> 12 & 63) + fromCharCode(128 | t >>> 6 & 63) + fromCharCode(128 | 63 & t) }, re_utob = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g, utob = function (e) { return e.replace(re_utob, cb_utob) }, cb_encode = function (e) { var t = [0, 2, 1][e.length % 3], n = e.charCodeAt(0) << 16 | (e.length > 1 ? e.charCodeAt(1) : 0) << 8 | (e.length > 2 ? e.charCodeAt(2) : 0), r = [b64chars.charAt(n >>> 18), b64chars.charAt(n >>> 12 & 63), t >= 2 ? "=" : b64chars.charAt(n >>> 6 & 63), t >= 1 ? "=" : b64chars.charAt(63 & n)]; return r.join("") }, btoa = global.btoa ? function (e) { return global.btoa(e) } : function (e) { return e.replace(/[\s\S]{1,3}/g, cb_encode) }, _encode = buffer ? buffer.from && Uint8Array && buffer.from !== Uint8Array.from ? function (e) { return (e.constructor === buffer.constructor ? e : buffer.from(e)).toString("base64") } : function (e) { return (e.constructor === buffer.constructor ? e : new buffer(e)).toString("base64") } : function (e) { return btoa(utob(e)) }, encode = function (e, t) { return t ? _encode(String(e)).replace(/[+\/]/g, function (e) { return "+" == e ? "-" : "_" }).replace(/=/g, "") : _encode(String(e)) }, encodeURI = function (e) { return encode(e, !0) }, re_btou = new RegExp(["[\xc0-\xdf][\x80-\xbf]", "[\xe0-\xef][\x80-\xbf]{2}", "[\xf0-\xf7][\x80-\xbf]{3}"].join("|"), "g"), cb_btou = function (e) { switch (e.length) { case 4: var t = (7 & e.charCodeAt(0)) << 18 | (63 & e.charCodeAt(1)) << 12 | (63 & e.charCodeAt(2)) << 6 | 63 & e.charCodeAt(3), n = t - 65536; return fromCharCode(55296 + (n >>> 10)) + fromCharCode(56320 + (1023 & n)); case 3: return fromCharCode((15 & e.charCodeAt(0)) << 12 | (63 & e.charCodeAt(1)) << 6 | 63 & e.charCodeAt(2)); default: return fromCharCode((31 & e.charCodeAt(0)) << 6 | 63 & e.charCodeAt(1)) } }, btou = function (e) { return e.replace(re_btou, cb_btou) }, cb_decode = function (e) { var t = e.length, n = t % 4, r = (t > 0 ? b64tab[e.charAt(0)] << 18 : 0) | (t > 1 ? b64tab[e.charAt(1)] << 12 : 0) | (t > 2 ? b64tab[e.charAt(2)] << 6 : 0) | (t > 3 ? b64tab[e.charAt(3)] : 0), i = [fromCharCode(r >>> 16), fromCharCode(r >>> 8 & 255), fromCharCode(255 & r)]; return i.length -= [0, 0, 2, 1][n], i.join("") }, _atob = global.atob ? function (e) { return global.atob(e) } : function (e) { return e.replace(/\S{1,4}/g, cb_decode) }, atob = function (e) { return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g, "")) }, _decode = buffer ? buffer.from && Uint8Array && buffer.from !== Uint8Array.from ? function (e) { return (e.constructor === buffer.constructor ? e : buffer.from(e, "base64")).toString() } : function (e) { return (e.constructor === buffer.constructor ? e : new buffer(e, "base64")).toString() } : function (e) { return btou(_atob(e)) }, decode = function (e) { return _decode(String(e).replace(/[-_]/g, function (e) { return "-" == e ? "+" : "/" }).replace(/[^A-Za-z0-9\+\/]/g, "")) }, noConflict = function () { var e = global.Base64; return global.Base64 = _Base64, e }; if (global.Base64 = { VERSION: version, atob: atob, btoa: btoa, fromBase64: decode, toBase64: encode, utob: utob, encode: encode, encodeURI: encodeURI, btou: btou, decode: decode, noConflict: noConflict, __buffer__: buffer }, "function" == typeof Object.defineProperty) { var noEnum = function (e) { return { value: e, enumerable: !1, writable: !0, configurable: !0 } }; global.Base64.extendString = function () { Object.defineProperty(String.prototype, "fromBase64", noEnum(function () { return decode(this) })), Object.defineProperty(String.prototype, "toBase64", noEnum(function (e) { return encode(this, e) })), Object.defineProperty(String.prototype, "toBase64URI", noEnum(function () { return encode(this, !0) })) } } global.Meteor && (Base64 = global.Base64); void 0 !== module && module.exports ? module.exports.Base64 = global.Base64 : (__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () { return global.Base64 }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), void 0 === __WEBPACK_AMD_DEFINE_RESULT__ || (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)); return { Base64: global.Base64 } }(global) }("undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== global ? global : this) }).call(this, __webpack_require__(48)) }, function(e, t) { function Profiler() { } function Metric(e) { this.t0 = null, this.name = e, this.count = 0 } Profiler.metrics = {}, Profiler.get = function (e) { return Profiler.metrics[e] || { max: 0, min: Number.MAX_VALUE, avg: 0, total: 0, count: 0, history: "undefined" != typeof Float32Array ? new Float32Array(1024) : [] } }, Profiler.new_value = function (e, t) { var n = Profiler.metrics[e] = Profiler.get(e); n.max = Math.max(n.max, t), n.min = Math.min(n.min, t), n.total += t, ++n.count, n.avg = n.total / n.count, n.history[n.count % 1024] = t }, Profiler.print_stats = function () { for (k in Profiler.metrics) { var e = Profiler.metrics[k]; console.log(" === " + k + " === "), console.log(" max: " + e.max), console.log(" min: " + e.min), console.log(" avg: " + e.avg), console.log(" count: " + e.count), console.log(" total: " + e.total) } }, Metric.prototype = { start: function () { return this.t0 = +new Date, this }, _elapsed: function () { return +new Date - this.t0 }, end: function () { null !== this.t0 && (Profiler.new_value(this.name, this._elapsed()), this.t0 = null) }, inc: function (e) { e = void 0 === e ? 1 : e, Profiler.new_value(this.name, Profiler.get(this.name).count + (e || 0)) }, dec: function (e) { e = void 0 === e ? 1 : e, this.inc(-e) }, mark: function () { (++this.count, null !== this.t0) ? this._elapsed() > 1 && (Profiler.new_value(this.name, this.count), this.count = 0, this.start()) : this.start() } }, Profiler.metric = function (e) { return new Metric(e) }, e.exports = Profiler }, function(e, t) { var n = function isLayerOfType(e, t) { return e.get("type").toLowerCase() === t.toLowerCase() }; e.exports = { isTiledLayer: function isTiledLayer(e) { return n(e, "Tiled") }, isPlainLayer: function isPlainLayer(e) { return n(e, "Plain") }, isWMSLayer: function isWMSLayer(e) { return n(e, "WMS") }, isGoogleMapsBaseLayer: function isGoogleMapsBaseLayer(e) { return n(e, "GMapsBase") }, isCartoDBLayer: function isCartoDBLayer(e) { return n(e, "CartoDB") }, isTorqueLayer: function isTorqueLayer(e) { return n(e, "torque") } } }, function(e, t, n) { n(23), n(32); var r = n(12), i = n(10), o = n(7), a = n(1), s = n(5), l = n(0), u = n(3), c = n(144), d = n(231), f = ["camshaftReference", "engine"], h = { PENDING: "pending", WAITING: "waiting", RUNNING: "running", FAILED: "failed", READY: "ready" }, p = c.extend({ initialize: function initialize(e, t) { t = t || {}, d.checkRequiredOpts(t, f, "AnalysisModel"), this._camshaftReference = t.camshaftReference, this._engine = t.engine, this._initBinds(), this._referencedBy = {} }, url: function url() { var url = this.get("url"); if (url) { if (this.get("apiKey")) url += "?api_key=" + this.get("apiKey"); else if (this.get("authToken")) { var e = this.get("authToken"); if (e instanceof Array) url += "?" + s(l).call(l, e, function (e) { return "auth_token[]=" + e }).join("&"); else url += "?auth_token=" + e } return url } }, setOk: function setOk() { this.unset("error") }, setError: function setError(e) { this.set({ error: e, status: h.FAILED }) }, _initBinds: function _initBinds() { var e, t; a(e = this).call(e, "change:type", function () { this.unbind(null, null, this), this._initBinds(), this._reload() }, this), l.each(this.getParamNames(), function (e) { var t; a(t = this).call(t, "change:" + e, this._reload, this) }, this), a(t = this).call(t, "change:status", function () { this._hadStatus() && this.isReady() && this.isSourceOfAnyModel() && this._reload() }, this) }, _hadStatus: function _hadStatus() { return this.previous("status") }, _reload: function _reload() { var e; this._engine.reload({ error: a(e = this._onMapReloadError).call(e, this) }) }, _onMapReloadError: function _onMapReloadError() { this.set("status", h.FAILED) }, remove: function remove() { this.trigger("destroy", this), this.stopListening() }, findAnalysisById: function findAnalysisById(e) { var t; return this.get("id") === e ? this : s(t = l.chain(this._getSourceNames())).call(t, function (t) { var n = this.get(t); if (n) return n.findAnalysisById(e) }, this).compact().value()[0] }, _getSourceNames: function _getSourceNames() { return this._camshaftReference.getSourceNamesForAnalysisType(this.get("type")) }, isDone: function isDone() { return this._hasStatus([h.READY, h.FAILED]) }, isLoading: function isLoading() { return this._hasStatus([h.PENDING, h.WAITING, h.RUNNING]) }, isReady: function isReady() { return this._hasStatus(h.READY) }, isFailed: function isFailed() { return this._hasStatus(h.FAILED) }, _hasStatus: function _hasStatus(e) { return l.isArray(e) || (e = [e]), l.contains(e, this._getStatus()) }, _getStatus: function _getStatus() { return this.get("status") }, toJSON: function toJSON() { var e = l.pick(this.attributes, "id", "type"); e.params = l.pick(this.attributes, this.getParamNames()); var t = this._getSourceNames(); return l.each(t, function (t) { var n = {}, r = this.get(t); r && (n[t] = r.toJSON(), l.extend(e.params, n)) }, this), e }, getParamNames: function getParamNames() { return this._camshaftReference.getParamNamesForAnalysisType(this.get("type")) }, getNodes: function getNodes() { var e = [this]; return "source" !== this.get("type") && o(l).call(l, this._getSourceNames(), function (t) { var n = this.get(t); n && (e = i(e).call(e, n.getNodes())) }, this), e }, getNodesCollection: function getNodesCollection() { return new u.Collection(this.getNodes()) }, equals: function equals(e) { return e instanceof p && this.get("id") === e.get("id") }, markAsSourceOf: function markAsSourceOf(e) { this._referencedBy[e.cid] = !0 }, isSourceOfAnyModel: function isSourceOfAnyModel() { return r(this._referencedBy).length > 0 }, isSourceOf: function isSourceOf(e) { return !!this._referencedBy[e.cid] }, unmarkAsSourceOf: function unmarkAsSourceOf(e) { delete this._referencedBy[e.cid] } }, { STATUS: h }); e.exports = p }, function(e, t, n) { var r = n(6), i = n(10), o = n(5), a = n(1), s = n(0), l = n(3), u = n(604), c = n(3124), d = n(603), f = function AnalysisService(e) { if (!(e = e || {}).engine) throw new Error("engine is required"); this._engine = e.engine, this._apiKey = e.apiKey, this._authToken = e.authToken, this._camshaftReference = e.camshaftReference || c, this._analysisNodes = new l.Collection }; f.prototype.analyse = function (e) { e = s.clone(e); var t = this.findNodeById(e.id), n = this._getAnalysisAttributesFromAnalysisDefinition(e); return t ? t.set(n) : (this._apiKey && (n.apiKey = this._apiKey), this._authToken && (n.authToken = this._authToken), t = new u(n, { camshaftReference: this._camshaftReference, engine: this._engine }), this._analysisNodes.add(t), a(t).call(t, "destroy", this._onAnalysisRemoved, this)), t }, f.prototype._getAnalysisAttributesFromAnalysisDefinition = function (e) { var t = {}, n = e.type, r = this._camshaftReference.getSourceNamesForAnalysisType(n); return s.each(r, function (n) { var r = e.params[n]; r && (t[n] = this.analyse(r)) }, this), s.omit(s.extend(e, e.params, t), "params") }, f.prototype.createAnalysisForLayer = function (e, t) { return this.analyse({ id: e, type: "source", params: { query: t } }) }, f.prototype.findNodeById = function (e) { return this._analysisNodes.get(e) }, f.prototype._onAnalysisRemoved = function (e) { this._analysisNodes.remove(e), e.unbind("destroy", this._onAnalysisRemoved) }, f.getUniqueAnalysisNodes = function (e, t) { var n = {}, r = f.getAnalysisList(e, t); return s.each(r, function (e) { e.getNodesCollection().each(function (e) { n[e.get("id")] = e }) }), o(s).call(s, n, function (e) { return e }, this) }, f.getAnalysisList = function (e, t) { var n = function _getAnalysesFromLayers(e) { var t, n = function _getCartoDBAndTorqueLayers(e) { return r(e).call(e, function (e) { return d.isCartoDBLayer(e) || d.isTorqueLayer(e) }) }(e); return o(t = s.chain(n)).call(t, function (e) { return e.getSource() }).compact().value() }(e), a = function _getAnalysesFromDataviews(e) { var t; return o(t = e.chain()).call(t, function (e) { return e.getSource() }).compact().value() }(t); return i(n).call(n, a) }, e.exports = f }, function(e, t, n) { var r = n(21), i = n(284), o = n(111), a = n(11), s = n(37), l = n(7), u = n(1), c = n(28), d = n(0), f = n(3128), h = n(3126), p = n(3), m = n(3119), g = n(3118), v = n(1380), y = n(3117), _ = n(3112), b = n(3111), w = n(3110), x = n(3109), C = n(605), S = n(1363); function Engine(e) { if (!e) throw new Error("new Engine() called with no parameters"); this._isNamedMap = void 0 !== e.templateName, this._timeout = null, this._stackCalls = [], this._batchOptions = {}, this._windshaftSettings = { urlTemplate: e.serverUrl, userName: e.username, client: e.client, apiKey: e.apiKey, authToken: e.authToken, templateName: e.templateName }, this._windshaftClient = new x(this._windshaftSettings), this._eventEmmitter = d.extend({}, p.Events), this._analysisPoller = new f, this._layersCollection = new v, this._dataviewsCollection = new g, this._cartoLayerGroup = new m({ apiKey: e.apiKey, authToken: e.authToken }, { layersCollection: this._layersCollection }), this._bindCartoLayerGroupError(), this._modelUpdater = new y({ dataviewsCollection: this._dataviewsCollection, layerGroupModel: this._cartoLayerGroup, layersCollection: this._layersCollection }) } Engine.prototype.getLayerGroup = function () { return this._cartoLayerGroup }, Engine.prototype.getApiKey = function () { return this._windshaftSettings && this._windshaftSettings.apiKey }, Engine.prototype.getAuthToken = function () { return this._windshaftSettings && this._windshaftSettings.authToken }, Engine.prototype.on = function (e, t, n) { this._eventEmmitter.on(e, t, n) }, Engine.prototype.off = function (e, t, n) { this._eventEmmitter.off(e, t, n) }, Engine.prototype.reload = function (e) { var t; return e = e || {}, new c(u(t = function _context(t, n) { var r; this._batchOptions = d.pick({ sourceId: e.sourceId, forceFetch: this._batchOptions.forceFetch || e.forceFetch, includeFilters: e.includeFilters }, d.negate(d.isUndefined)), this._stackCalls.push({ success: e.success, error: e.error, resolve: t, reject: n }); var i = u(r = function _context2() { var e, t; this._timeout = null, this._performReload(this._batchOptions).then(u(e = function _context3() { var e; l(e = this._stackCalls).call(e, function (e) { e.success && e.success(), e.resolve() }), this._stackCalls = [], this._batchOptions = {} }).call(e, this)).catch(u(t = function _context5(e) { var t; l(t = this._stackCalls).call(t, function (t) { t.error && t.error(e), t.reject(e) }), this._stackCalls = [], this._batchOptions = {} }).call(t, this)) }).call(r, this); clearTimeout(this._timeout), this._timeout = s(i, 100) }).call(t, this)) }, Engine.prototype._performReload = function (e) { var t; return new c(u(t = function _context7(t, n) { var r, i, o = this._buildWindshaftOptions(e, u(r = function _context8(n) { this._onReloadSuccess(n, e.sourceId, e.forceFetch), t() }).call(r, this), u(i = function _context9(e) { var t = this._onReloadError(e); n(t) }).call(i, this)); try { var a = this._buildParams(o.includeFilters), s = this._getSerializer().serialize(this._layersCollection, this._dataviewsCollection), l = new b(s, a, o); this._eventEmmitter.trigger(Engine.Events.RELOAD_STARTED), this._windshaftClient.instantiateMap(l) } catch (e) { var c = new S({ message: e.message }); this._manageClientError(c, o) } }).call(t, this)) }, Engine.prototype.addLayer = function (e) { this._layersCollection.add(e) }, Engine.prototype.removeLayer = function (e) { this._layersCollection.remove(e) }, Engine.prototype.moveLayer = function (e, t) { var n, r, i, s = a(n = this._layersCollection).call(n, e); s >= 0 && s !== t && o(r = this._layersCollection.models).call(r, t, 0, o(i = this._layersCollection.models).call(i, s, 1)[0]) }, Engine.prototype.addDataview = function (e) { this._dataviewsCollection.add(e) }, Engine.prototype.removeDataview = function (e) { this._dataviewsCollection.remove(e) }, Engine.prototype._onReloadSuccess = function (e, t, n) { var r = new w(this._windshaftSettings, e); this._modelUpdater.updateModels(r, t, n), this._restartAnalysisPolling(), this._eventEmmitter.trigger(Engine.Events.RELOAD_SUCCESS) }, Engine.prototype._onReloadError = function (e) { var t = this._getSimpleWindshaftError(e); return this._modelUpdater.setErrors(e), this._eventEmmitter.trigger(Engine.Events.RELOAD_ERROR, t), t }, Engine.prototype._buildWindshaftOptions = function (e, t, n) { return d.extend({ includeFilters: !0, success: t, error: n }, d.pick(e, "sourceId", "forceFetch", "includeFilters")) }, Engine.prototype._buildParams = function (e) { var t = {}; return e && !d.isEmpty(this._dataviewsCollection.getFilters()) && (t.filters = this._dataviewsCollection.getFilters()), this._windshaftSettings.apiKey ? (t.api_key = this._windshaftSettings.apiKey, t) : this._windshaftSettings.authToken ? (t.auth_token = this._windshaftSettings.authToken, t) : void console.warn("Engine initialized with no apiKeys neither authToken") }, Engine.prototype._restartAnalysisPolling = function () { var e = C.getUniqueAnalysisNodes(this._layersCollection, this._dataviewsCollection); this._analysisPoller.resetAnalysisNodes(e) }, Engine.prototype._getSerializer = function () { return this._isNamedMap ? _ : h }, Engine.prototype._manageClientError = function (e, t) { this._modelUpdater.setErrors([e]), t.error && t.error([e]) }, Engine.prototype._bindCartoLayerGroupError = function () { this._cartoLayerGroup.on("all", function (e, t) { 0 === i(e).call(e, "error:", 0) && (t = new S(t), this._eventEmmitter.trigger(Engine.Events.LAYER_ERROR, t)) }, this) }, Engine.prototype._getSimpleWindshaftError = function (e) { var t = r(d).call(d, e, function (e) { return e.isGlobalError() }); return !t && e && e.length > 0 && (t = e[0]), t }, Engine.Events = { RELOAD_STARTED: "reload-started", RELOAD_SUCCESS: "reload-success", RELOAD_ERROR: "reload-error", LAYER_ERROR: "layer-error" }, e.exports = Engine }, function(e, t, n) { "use strict"; t.add = function (e, t) { e.classList ? e.classList.add(t) : function oldAdd(e, t) { var n = e.className.split(" "); n.indexOf(t) < 0 && n.push(t), e.className = n.join(" ") }(e, t) }, t.remove = function (e, t) { e.classList ? e.classList.remove(t) : function oldRemove(e, t) { var n = e.className.split(" "), r = n.indexOf(t); r >= 0 && n.splice(r, 1), e.className = n.join(" ") }(e, t) }, t.list = function (e) { return e.classList ? Array.prototype.slice.apply(e.classList) : e.className.split(" ") } }, function(e, t, n) { var r = n(1375), i = n(3149), o = r.extend({ _createMarker: function _createMarker() { var e = new google.maps.LatLng(this.model.getCoordinates()[0], this.model.getCoordinates()[1]), t = { url: this.model.get("iconUrl"), origin: new google.maps.Point(0, 0), anchor: new google.maps.Point(this.model.get("iconAnchor")[0], this.model.get("iconAnchor")[1]) }, n = new google.maps.Marker({ position: e, icon: t, draggable: this.model.isEditable(), crossOnDrag: !1 }); return new i(n) } }); e.exports = o }, function(e, t, n) { var r = n(1), i = n(18), o = n(5), a = n(0), s = n(881), l = n(377), u = s.extend({ initialize: function initialize(e) { if (s.prototype.initialize.apply(this, arguments), !this.PointViewClass) throw new Error("subclasses of PathViewBase must declare the PointViewClass instance variable"); this.model.points.on("change:latlng", this._onPointsChanged, this), this.model.points.on("add", this._onPointAdded, this), this.model.points.on("remove", this._onPointRemoved, this), this.model.points.on("reset", this._onPointsReset, this), this.add_related_model(this.model.points), this._geometry = this._createGeometry(), this._pointViews = {}, this._middlePointViews = {}, a.bindAll(this, "_renderMiddlePoints"), this.mapView.on("zoomend", this._renderMiddlePoints) }, _createGeometry: function _createGeometry() { throw new Error("Subclasses of MyLeafletPathViewBase must implement _createGeometry") }, render: function render() { this._renderPoints(), this._renderMiddlePoints(), this.mapView.addPath(this._geometry) }, _renderPoints: function _renderPoints(e) { e = e || this.model.points.models, a.each(e, this._renderPoint, this) }, _renderPoint: function _renderPoint(e) { var t = this._tryToReuseMiddlePointView(e); t ? delete this._middlePointViews[e.cid] : t = this._createPointView(e), this.addView(t), this._pointViews[e.cid] = t, t.render() }, _tryToReuseMiddlePointView: function _tryToReuseMiddlePointView(e) { var t; return this._middlePointViewForNewPoint && (e.set({ iconUrl: l.prototype.defaults.iconUrl }), t = new this.PointViewClass({ model: e, mapView: this.mapView, marker: this._middlePointViewForNewPoint.getMarker() }), this._middlePointViewForNewPoint.unsetMarker(), this._middlePointViewForNewPoint.clean(), delete this._middlePointViewForNewPoint), t }, _renderMiddlePoints: function _renderMiddlePoints() { if (this.model.isExpandable()) { this._clearMiddlePoints(); var e = this._calculateMiddlePoints(); a.each(e, this._renderMiddlePoint, this) } }, _calculateMiddlePoints: function _calculateMiddlePoints() { var e = this.model.getCoordinatesForMiddlePoints(), t = this.mapView; return o(a).call(a, i(e).call(e, 0, -1), function (n, r) { var i = e[r + 1]; return new l({ latlng: function computeMidLatLng(e, t, n) { var r = e.latLngToContainerPoint(t), i = e.latLngToContainerPoint(n), o = (r.y + i.y) / 2, a = (r.x + i.x) / 2, s = e.containerPointToLatLng({ x: a, y: o }); return [s.lat, s.lng] }(t, n, i), editable: !0, iconUrl: l.MIDDLE_POINT_ICON_URL }) }) }, _renderMiddlePoint: function _renderMiddlePoint(e, t) { var n, i, o = this._createPointView(e); e.once("dblclick", r(n = function _context(e) { this.model.removePoint(e) }).call(n, this)), this._middlePointViews[e.cid] = o, o.render(), o.once("mousedown", r(i = function _context2(e) { this._middlePointViewForNewPoint = o, this.model.addPoint(e, { at: t + 1 }) }).call(i, this)), this.addView(o) }, _clearMiddlePoints: function _clearMiddlePoints() { a.each(this._middlePointViews, function (e, t) { e.clean() }) }, _createPointView: function _createPointView(e) { return new this.PointViewClass({ model: e, mapView: this.mapView }) }, _onPointsChanged: function _onPointsChanged() { this._renderMiddlePoints(), this._updatePathFromModel() }, _onPointAdded: function _onPointAdded(e) { this._renderPoints([e]), this._renderMiddlePoints(), this._updatePathFromModel() }, _onPointRemoved: function _onPointRemoved(e) { this._removePoints([e]), this._renderMiddlePoints(), this._updatePathFromModel() }, _onPointsReset: function _onPointsReset(e, t) { var n = t.previousModels, r = this.model.points.models, i = a.difference(n, r), o = a.difference(r, n); this._removePoints(i), this._renderPoints(o), this._renderMiddlePoints(), this._updatePathFromModel() }, _removePoints: function _removePoints(e) { e = e || this.model.points.models, a.each(e, function (e) { var t = this._pointViews[e.cid]; t && (t.clean(), delete this._pointViews[e.cid]) }, this) }, _updatePathFromModel: function _updatePathFromModel() { this._geometry.setCoordinates(this.model.getCoordinates()) }, clean: function clean() { s.prototype.clean.call(this), this.mapView.removePath(this._geometry), this.mapView.off("zoomend", this._renderMiddlePoints) }, _getPointKey: function _getPointKey(e) { return e.cid } }); e.exports = u }, function(e, t, n) { var r = n(1375), i = n(3153), o = r.extend({ _createMarker: function _createMarker() { var e = this.model.isEditable(), t = L.icon({ iconUrl: this.model.get("iconUrl"), iconAnchor: this.model.get("iconAnchor") }), n = L.marker(this.model.get("latlng"), { icon: t, draggable: !!e }); return new i(n) } }); e.exports = o }, function(e, t, n) { !function (e) { "use strict"; var t = Object.freeze; function extend(e) { var t, n, r, i; for (n = 1, r = arguments.length; n < r; n++)for (t in i = arguments[n]) e[t] = i[t]; return e } Object.freeze = function (e) { return e }; var n = Object.create || function () { function F() { } return function (e) { return F.prototype = e, new F } }(); function bind(e, t) { var n = Array.prototype.slice; if (e.bind) return e.bind.apply(e, n.call(arguments, 1)); var r = n.call(arguments, 2); return function () { return e.apply(t, r.length ? r.concat(n.call(arguments)) : arguments) } } var i = 0; function stamp(e) { return e._leaflet_id = e._leaflet_id || ++i, e._leaflet_id } function throttle(e, t, n) { var r, i, o, a; return a = function () { r = !1, i && (o.apply(n, i), i = !1) }, o = function () { r ? i = arguments : (e.apply(n, arguments), setTimeout(a, t), r = !0) } } function wrapNum(e, t, n) { var r = t[1], i = t[0], o = r - i; return e === r && n ? e : ((e - i) % o + o) % o + i } function falseFn() { return !1 } function formatNum(e, t) { var n = Math.pow(10, void 0 === t ? 6 : t); return Math.round(e * n) / n } function trim(e) { return e.trim ? e.trim() : e.replace(/^\s+|\s+$/g, "") } function splitWords(e) { return trim(e).split(/\s+/) } function setOptions(e, t) { for (var r in e.hasOwnProperty("options") || (e.options = e.options ? n(e.options) : {}), t) e.options[r] = t[r]; return e.options } function getParamString(e, t, n) { var r = []; for (var i in e) r.push(encodeURIComponent(n ? i.toUpperCase() : i) + "=" + encodeURIComponent(e[i])); return (t && -1 !== t.indexOf("?") ? "&" : "?") + r.join("&") } var o = /\{ *([\w_-]+) *\}/g; function template(e, t) { return e.replace(o, function (e, n) { var r = t[n]; if (void 0 === r) throw new Error("No value provided for variable " + e); return "function" == typeof r && (r = r(t)), r }) } var a = Array.isArray || function (e) { return "[object Array]" === Object.prototype.toString.call(e) }; function indexOf(e, t) { for (var n = 0; n < e.length; n++)if (e[n] === t) return n; return -1 } var s = "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="; function getPrefixed(e) { return window["webkit" + e] || window["moz" + e] || window["ms" + e] } var l = 0; function timeoutDefer(e) { var t = +new Date, n = Math.max(0, 16 - (t - l)); return l = t + n, window.setTimeout(e, n) } var c = window.requestAnimationFrame || getPrefixed("RequestAnimationFrame") || timeoutDefer, d = window.cancelAnimationFrame || getPrefixed("CancelAnimationFrame") || getPrefixed("CancelRequestAnimationFrame") || function (e) { window.clearTimeout(e) }; function requestAnimFrame(e, t, n) { if (!n || c !== timeoutDefer) return c.call(window, bind(e, t)); e.call(t) } function cancelAnimFrame(e) { e && d.call(window, e) } var f = (Object.freeze || Object)({ freeze: t, extend: extend, create: n, bind: bind, lastId: i, stamp: stamp, throttle: throttle, wrapNum: wrapNum, falseFn: falseFn, formatNum: formatNum, trim: trim, splitWords: splitWords, setOptions: setOptions, getParamString: getParamString, template: template, isArray: a, indexOf: indexOf, emptyImageUrl: s, requestFn: c, cancelFn: d, requestAnimFrame: requestAnimFrame, cancelAnimFrame: cancelAnimFrame }); function Class() { } Class.extend = function (e) { var t = function () { this.initialize && this.initialize.apply(this, arguments), this.callInitHooks() }, r = t.__super__ = this.prototype, i = n(r); for (var o in i.constructor = t, t.prototype = i, this) this.hasOwnProperty(o) && "prototype" !== o && "__super__" !== o && (t[o] = this[o]); return e.statics && (extend(t, e.statics), delete e.statics), e.includes && (function checkDeprecatedMixinEvents(e) { if ("undefined" != typeof L && L && L.Mixin) { e = a(e) ? e : [e]; for (var t = 0; t < e.length; t++)e[t] === L.Mixin.Events && console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.", (new Error).stack) } }(e.includes), extend.apply(null, [i].concat(e.includes)), delete e.includes), i.options && (e.options = extend(n(i.options), e.options)), extend(i, e), i._initHooks = [], i.callInitHooks = function () { if (!this._initHooksCalled) { r.callInitHooks && r.callInitHooks.call(this), this._initHooksCalled = !0; for (var e = 0, t = i._initHooks.length; e < t; e++)i._initHooks[e].call(this) } }, t }, Class.include = function (e) { return extend(this.prototype, e), this }, Class.mergeOptions = function (e) { return extend(this.prototype.options, e), this }, Class.addInitHook = function (e) { var t = Array.prototype.slice.call(arguments, 1), n = "function" == typeof e ? e : function () { this[e].apply(this, t) }; return this.prototype._initHooks = this.prototype._initHooks || [], this.prototype._initHooks.push(n), this }; var h = { on: function (e, t, n) { if ("object" == typeof e) for (var r in e) this._on(r, e[r], t); else for (var i = 0, o = (e = splitWords(e)).length; i < o; i++)this._on(e[i], t, n); return this }, off: function (e, t, n) { if (e) if ("object" == typeof e) for (var r in e) this._off(r, e[r], t); else for (var i = 0, o = (e = splitWords(e)).length; i < o; i++)this._off(e[i], t, n); else delete this._events; return this }, _on: function (e, t, n) { this._events = this._events || {}; var r = this._events[e]; r || (r = [], this._events[e] = r), n === this && (n = void 0); for (var i = { fn: t, ctx: n }, o = r, a = 0, s = o.length; a < s; a++)if (o[a].fn === t && o[a].ctx === n) return; o.push(i) }, _off: function (e, t, n) { var r, i, o; if (this._events && (r = this._events[e])) if (t) { if (n === this && (n = void 0), r) for (i = 0, o = r.length; i < o; i++) { var a = r[i]; if (a.ctx === n && a.fn === t) return a.fn = falseFn, this._firingCount && (this._events[e] = r = r.slice()), void r.splice(i, 1) } } else { for (i = 0, o = r.length; i < o; i++)r[i].fn = falseFn; delete this._events[e] } }, fire: function (e, t, n) { if (!this.listens(e, n)) return this; var r = extend({}, t, { type: e, target: this, sourceTarget: t && t.sourceTarget || this }); if (this._events) { var i = this._events[e]; if (i) { this._firingCount = this._firingCount + 1 || 1; for (var o = 0, a = i.length; o < a; o++) { var s = i[o]; s.fn.call(s.ctx || this, r) } this._firingCount-- } } return n && this._propagateEvent(r), this }, listens: function (e, t) { var n = this._events && this._events[e]; if (n && n.length) return !0; if (t) for (var r in this._eventParents) if (this._eventParents[r].listens(e, t)) return !0; return !1 }, once: function (e, t, n) { if ("object" == typeof e) { for (var r in e) this.once(r, e[r], t); return this } var i = bind(function () { this.off(e, t, n).off(e, i, n) }, this); return this.on(e, t, n).on(e, i, n) }, addEventParent: function (e) { return this._eventParents = this._eventParents || {}, this._eventParents[stamp(e)] = e, this }, removeEventParent: function (e) { return this._eventParents && delete this._eventParents[stamp(e)], this }, _propagateEvent: function (e) { for (var t in this._eventParents) this._eventParents[t].fire(e.type, extend({ layer: e.target, propagatedFrom: e.target }, e), !0) } }; h.addEventListener = h.on, h.removeEventListener = h.clearAllEventListeners = h.off, h.addOneTimeEventListener = h.once, h.fireEvent = h.fire, h.hasEventListeners = h.listens; var p = Class.extend(h); function Point(e, t, n) { this.x = n ? Math.round(e) : e, this.y = n ? Math.round(t) : t } var m = Math.trunc || function (e) { return e > 0 ? Math.floor(e) : Math.ceil(e) }; function toPoint(e, t, n) { return e instanceof Point ? e : a(e) ? new Point(e[0], e[1]) : void 0 === e || null === e ? e : "object" == typeof e && "x" in e && "y" in e ? new Point(e.x, e.y) : new Point(e, t, n) } function Bounds(e, t) { if (e) for (var n = t ? [e, t] : e, r = 0, i = n.length; r < i; r++)this.extend(n[r]) } function toBounds(e, t) { return !e || e instanceof Bounds ? e : new Bounds(e, t) } function LatLngBounds(e, t) { if (e) for (var n = t ? [e, t] : e, r = 0, i = n.length; r < i; r++)this.extend(n[r]) } function toLatLngBounds(e, t) { return e instanceof LatLngBounds ? e : new LatLngBounds(e, t) } function LatLng(e, t, n) { if (isNaN(e) || isNaN(t)) throw new Error("Invalid LatLng object: (" + e + ", " + t + ")"); this.lat = +e, this.lng = +t, void 0 !== n && (this.alt = +n) } function toLatLng(e, t, n) { return e instanceof LatLng ? e : a(e) && "object" != typeof e[0] ? 3 === e.length ? new LatLng(e[0], e[1], e[2]) : 2 === e.length ? new LatLng(e[0], e[1]) : null : void 0 === e || null === e ? e : "object" == typeof e && "lat" in e ? new LatLng(e.lat, "lng" in e ? e.lng : e.lon, e.alt) : void 0 === t ? null : new LatLng(e, t, n) } Point.prototype = { clone: function () { return new Point(this.x, this.y) }, add: function (e) { return this.clone()._add(toPoint(e)) }, _add: function (e) { return this.x += e.x, this.y += e.y, this }, subtract: function (e) { return this.clone()._subtract(toPoint(e)) }, _subtract: function (e) { return this.x -= e.x, this.y -= e.y, this }, divideBy: function (e) { return this.clone()._divideBy(e) }, _divideBy: function (e) { return this.x /= e, this.y /= e, this }, multiplyBy: function (e) { return this.clone()._multiplyBy(e) }, _multiplyBy: function (e) { return this.x *= e, this.y *= e, this }, scaleBy: function (e) { return new Point(this.x * e.x, this.y * e.y) }, unscaleBy: function (e) { return new Point(this.x / e.x, this.y / e.y) }, round: function () { return this.clone()._round() }, _round: function () { return this.x = Math.round(this.x), this.y = Math.round(this.y), this }, floor: function () { return this.clone()._floor() }, _floor: function () { return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this }, ceil: function () { return this.clone()._ceil() }, _ceil: function () { return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this }, trunc: function () { return this.clone()._trunc() }, _trunc: function () { return this.x = m(this.x), this.y = m(this.y), this }, distanceTo: function (e) { var t = (e = toPoint(e)).x - this.x, n = e.y - this.y; return Math.sqrt(t * t + n * n) }, equals: function (e) { return (e = toPoint(e)).x === this.x && e.y === this.y }, contains: function (e) { return e = toPoint(e), Math.abs(e.x) <= Math.abs(this.x) && Math.abs(e.y) <= Math.abs(this.y) }, toString: function () { return "Point(" + formatNum(this.x) + ", " + formatNum(this.y) + ")" } }, Bounds.prototype = { extend: function (e) { return e = toPoint(e), this.min || this.max ? (this.min.x = Math.min(e.x, this.min.x), this.max.x = Math.max(e.x, this.max.x), this.min.y = Math.min(e.y, this.min.y), this.max.y = Math.max(e.y, this.max.y)) : (this.min = e.clone(), this.max = e.clone()), this }, getCenter: function (e) { return new Point((this.min.x + this.max.x) / 2, (this.min.y + this.max.y) / 2, e) }, getBottomLeft: function () { return new Point(this.min.x, this.max.y) }, getTopRight: function () { return new Point(this.max.x, this.min.y) }, getTopLeft: function () { return this.min }, getBottomRight: function () { return this.max }, getSize: function () { return this.max.subtract(this.min) }, contains: function (e) { var t, n; return (e = "number" == typeof e[0] || e instanceof Point ? toPoint(e) : toBounds(e)) instanceof Bounds ? (t = e.min, n = e.max) : t = n = e, t.x >= this.min.x && n.x <= this.max.x && t.y >= this.min.y && n.y <= this.max.y }, intersects: function (e) { e = toBounds(e); var t = this.min, n = this.max, r = e.min, i = e.max, o = i.x >= t.x && r.x <= n.x, a = i.y >= t.y && r.y <= n.y; return o && a }, overlaps: function (e) { e = toBounds(e); var t = this.min, n = this.max, r = e.min, i = e.max, o = i.x > t.x && r.x < n.x, a = i.y > t.y && r.y < n.y; return o && a }, isValid: function () { return !(!this.min || !this.max) } }, LatLngBounds.prototype = { extend: function (e) { var t, n, r = this._southWest, i = this._northEast; if (e instanceof LatLng) t = e, n = e; else { if (!(e instanceof LatLngBounds)) return e ? this.extend(toLatLng(e) || toLatLngBounds(e)) : this; if (t = e._southWest, n = e._northEast, !t || !n) return this } return r || i ? (r.lat = Math.min(t.lat, r.lat), r.lng = Math.min(t.lng, r.lng), i.lat = Math.max(n.lat, i.lat), i.lng = Math.max(n.lng, i.lng)) : (this._southWest = new LatLng(t.lat, t.lng), this._northEast = new LatLng(n.lat, n.lng)), this }, pad: function (e) { var t = this._southWest, n = this._northEast, r = Math.abs(t.lat - n.lat) * e, i = Math.abs(t.lng - n.lng) * e; return new LatLngBounds(new LatLng(t.lat - r, t.lng - i), new LatLng(n.lat + r, n.lng + i)) }, getCenter: function () { return new LatLng((this._southWest.lat + this._northEast.lat) / 2, (this._southWest.lng + this._northEast.lng) / 2) }, getSouthWest: function () { return this._southWest }, getNorthEast: function () { return this._northEast }, getNorthWest: function () { return new LatLng(this.getNorth(), this.getWest()) }, getSouthEast: function () { return new LatLng(this.getSouth(), this.getEast()) }, getWest: function () { return this._southWest.lng }, getSouth: function () { return this._southWest.lat }, getEast: function () { return this._northEast.lng }, getNorth: function () { return this._northEast.lat }, contains: function (e) { e = "number" == typeof e[0] || e instanceof LatLng || "lat" in e ? toLatLng(e) : toLatLngBounds(e); var t, n, r = this._southWest, i = this._northEast; return e instanceof LatLngBounds ? (t = e.getSouthWest(), n = e.getNorthEast()) : t = n = e, t.lat >= r.lat && n.lat <= i.lat && t.lng >= r.lng && n.lng <= i.lng }, intersects: function (e) { e = toLatLngBounds(e); var t = this._southWest, n = this._northEast, r = e.getSouthWest(), i = e.getNorthEast(), o = i.lat >= t.lat && r.lat <= n.lat, a = i.lng >= t.lng && r.lng <= n.lng; return o && a }, overlaps: function (e) { e = toLatLngBounds(e); var t = this._southWest, n = this._northEast, r = e.getSouthWest(), i = e.getNorthEast(), o = i.lat > t.lat && r.lat < n.lat, a = i.lng > t.lng && r.lng < n.lng; return o && a }, toBBoxString: function () { return [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(",") }, equals: function (e, t) { return !!e && (e = toLatLngBounds(e), this._southWest.equals(e.getSouthWest(), t) && this._northEast.equals(e.getNorthEast(), t)) }, isValid: function () { return !(!this._southWest || !this._northEast) } }, LatLng.prototype = { equals: function (e, t) { if (!e) return !1; e = toLatLng(e); var n = Math.max(Math.abs(this.lat - e.lat), Math.abs(this.lng - e.lng)); return n <= (void 0 === t ? 1e-9 : t) }, toString: function (e) { return "LatLng(" + formatNum(this.lat, e) + ", " + formatNum(this.lng, e) + ")" }, distanceTo: function (e) { return y.distance(this, toLatLng(e)) }, wrap: function () { return y.wrapLatLng(this) }, toBounds: function (e) { var t = 180 * e / 40075017, n = t / Math.cos(Math.PI / 180 * this.lat); return toLatLngBounds([this.lat - t, this.lng - n], [this.lat + t, this.lng + n]) }, clone: function () { return new LatLng(this.lat, this.lng, this.alt) } }; var g, v = { latLngToPoint: function (e, t) { var n = this.projection.project(e), r = this.scale(t); return this.transformation._transform(n, r) }, pointToLatLng: function (e, t) { var n = this.scale(t), r = this.transformation.untransform(e, n); return this.projection.unproject(r) }, project: function (e) { return this.projection.project(e) }, unproject: function (e) { return this.projection.unproject(e) }, scale: function (e) { return 256 * Math.pow(2, e) }, zoom: function (e) { return Math.log(e / 256) / Math.LN2 }, getProjectedBounds: function (e) { if (this.infinite) return null; var t = this.projection.bounds, n = this.scale(e), r = this.transformation.transform(t.min, n), i = this.transformation.transform(t.max, n); return new Bounds(r, i) }, infinite: !1, wrapLatLng: function (e) { var t = this.wrapLng ? wrapNum(e.lng, this.wrapLng, !0) : e.lng, n = this.wrapLat ? wrapNum(e.lat, this.wrapLat, !0) : e.lat, r = e.alt; return new LatLng(n, t, r) }, wrapLatLngBounds: function (e) { var t = e.getCenter(), n = this.wrapLatLng(t), r = t.lat - n.lat, i = t.lng - n.lng; if (0 === r && 0 === i) return e; var o = e.getSouthWest(), a = e.getNorthEast(), s = new LatLng(o.lat - r, o.lng - i), l = new LatLng(a.lat - r, a.lng - i); return new LatLngBounds(s, l) } }, y = extend({}, v, { wrapLng: [-180, 180], R: 6371e3, distance: function (e, t) { var n = Math.PI / 180, r = e.lat * n, i = t.lat * n, o = Math.sin((t.lat - e.lat) * n / 2), a = Math.sin((t.lng - e.lng) * n / 2), s = o * o + Math.cos(r) * Math.cos(i) * a * a, l = 2 * Math.atan2(Math.sqrt(s), Math.sqrt(1 - s)); return this.R * l } }), _ = { R: 6378137, MAX_LATITUDE: 85.0511287798, project: function (e) { var t = Math.PI / 180, n = this.MAX_LATITUDE, r = Math.max(Math.min(n, e.lat), -n), i = Math.sin(r * t); return new Point(this.R * e.lng * t, this.R * Math.log((1 + i) / (1 - i)) / 2) }, unproject: function (e) { var t = 180 / Math.PI; return new LatLng((2 * Math.atan(Math.exp(e.y / this.R)) - Math.PI / 2) * t, e.x * t / this.R) }, bounds: (g = 6378137 * Math.PI, new Bounds([-g, -g], [g, g])) }; function Transformation(e, t, n, r) { if (a(e)) return this._a = e[0], this._b = e[1], this._c = e[2], void (this._d = e[3]); this._a = e, this._b = t, this._c = n, this._d = r } function toTransformation(e, t, n, r) { return new Transformation(e, t, n, r) } Transformation.prototype = { transform: function (e, t) { return this._transform(e.clone(), t) }, _transform: function (e, t) { return t = t || 1, e.x = t * (this._a * e.x + this._b), e.y = t * (this._c * e.y + this._d), e }, untransform: function (e, t) { return t = t || 1, new Point((e.x / t - this._b) / this._a, (e.y / t - this._d) / this._c) } }; var b = extend({}, y, { code: "EPSG:3857", projection: _, transformation: function () { var e = .5 / (Math.PI * _.R); return toTransformation(e, .5, -e, .5) }() }), x = extend({}, b, { code: "EPSG:900913" }); function svgCreate(e) { return document.createElementNS("http://www.w3.org/2000/svg", e) } function pointsToPath(e, t) { var n, r, i, o, a, s, l = ""; for (n = 0, i = e.length; n < i; n++) { for (a = e[n], r = 0, o = a.length; r < o; r++)s = a[r], l += (r ? "L" : "M") + s.x + " " + s.y; l += t ? ee ? "z" : "x" : "" } return l || "M0 0" } var C = document.documentElement.style, S = "ActiveXObject" in window, k = S && !document.addEventListener, T = "msLaunchUri" in navigator && !("documentMode" in document), M = userAgentContains("webkit"), E = userAgentContains("android"), A = userAgentContains("android 2") || userAgentContains("android 3"), P = parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1], 10), R = E && userAgentContains("Google") && P < 537 && !("AudioNode" in window), O = !!window.opera, D = userAgentContains("chrome"), F = userAgentContains("gecko") && !M && !O && !S, I = !D && userAgentContains("safari"), N = userAgentContains("phantom"), $ = "OTransition" in C, B = 0 === navigator.platform.indexOf("Win"), z = S && "transition" in C, j = "WebKitCSSMatrix" in window && "m11" in new window.WebKitCSSMatrix && !A, U = "MozPerspective" in C, q = !window.L_DISABLE_3D && (z || j || U) && !$ && !N, H = "undefined" != typeof orientation || userAgentContains("mobile"), V = H && M, G = H && j, W = !window.PointerEvent && window.MSPointerEvent, Y = !(!window.PointerEvent && !W), Z = !window.L_NO_TOUCH && (Y || "ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch), K = H && O, X = H && F, J = (window.devicePixelRatio || window.screen.deviceXDPI / window.screen.logicalXDPI) > 1, Q = !!document.createElement("canvas").getContext, ee = !(!document.createElementNS || !svgCreate("svg").createSVGRect), te = !ee && function () { try { var e = document.createElement("div"); e.innerHTML = '<v:shape adj="1"/>'; var t = e.firstChild; return t.style.behavior = "url(#default#VML)", t && "object" == typeof t.adj } catch (e) { return !1 } }(); function userAgentContains(e) { return navigator.userAgent.toLowerCase().indexOf(e) >= 0 } var ne = (Object.freeze || Object)({ ie: S, ielt9: k, edge: T, webkit: M, android: E, android23: A, androidStock: R, opera: O, chrome: D, gecko: F, safari: I, phantom: N, opera12: $, win: B, ie3d: z, webkit3d: j, gecko3d: U, any3d: q, mobile: H, mobileWebkit: V, mobileWebkit3d: G, msPointer: W, pointer: Y, touch: Z, mobileOpera: K, mobileGecko: X, retina: J, canvas: Q, svg: ee, vml: te }), re = W ? "MSPointerDown" : "pointerdown", ie = W ? "MSPointerMove" : "pointermove", oe = W ? "MSPointerUp" : "pointerup", ae = W ? "MSPointerCancel" : "pointercancel", se = ["INPUT", "SELECT", "OPTION"], le = {}, ue = !1, ce = 0; function addPointerListener(e, t, n, r) { return "touchstart" === t ? function _addPointerStart(e, t, n) { var r = bind(function (e) { if ("mouse" !== e.pointerType && e.MSPOINTER_TYPE_MOUSE && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) { if (!(se.indexOf(e.target.tagName) < 0)) return; preventDefault(e) } _handlePointer(e, t) }); e["_leaflet_touchstart" + n] = r, e.addEventListener(re, r, !1), ue || (document.documentElement.addEventListener(re, _globalPointerDown, !0), document.documentElement.addEventListener(ie, _globalPointerMove, !0), document.documentElement.addEventListener(oe, _globalPointerUp, !0), document.documentElement.addEventListener(ae, _globalPointerUp, !0), ue = !0) }(e, n, r) : "touchmove" === t ? function _addPointerMove(e, t, n) { var r = function (e) { (e.pointerType !== e.MSPOINTER_TYPE_MOUSE && "mouse" !== e.pointerType || 0 !== e.buttons) && _handlePointer(e, t) }; e["_leaflet_touchmove" + n] = r, e.addEventListener(ie, r, !1) }(e, n, r) : "touchend" === t && function _addPointerEnd(e, t, n) { var r = function (e) { _handlePointer(e, t) }; e["_leaflet_touchend" + n] = r, e.addEventListener(oe, r, !1), e.addEventListener(ae, r, !1) }(e, n, r), this } function _globalPointerDown(e) { le[e.pointerId] = e, ce++ } function _globalPointerMove(e) { le[e.pointerId] && (le[e.pointerId] = e) } function _globalPointerUp(e) { delete le[e.pointerId], ce-- } function _handlePointer(e, t) { for (var n in e.touches = [], le) e.touches.push(le[n]); e.changedTouches = [e], t(e) } var de = W ? "MSPointerDown" : Y ? "pointerdown" : "touchstart", fe = W ? "MSPointerUp" : Y ? "pointerup" : "touchend", he = "_leaflet_"; function addDoubleTapListener(e, t, n) { var r, i, o = !1, a = 250; function onTouchStart(e) { var t; if (Y) { if (!T || "mouse" === e.pointerType) return; t = ce } else t = e.touches.length; if (!(t > 1)) { var n = Date.now(), s = n - (r || n); i = e.touches ? e.touches[0] : e, o = s > 0 && s <= a, r = n } } function onTouchEnd(e) { if (o && !i.cancelBubble) { if (Y) { if (!T || "mouse" === e.pointerType) return; var n, a, s = {}; for (a in i) n = i[a], s[a] = n && n.bind ? n.bind(i) : n; i = s } i.type = "dblclick", t(i), r = null } } return e[he + de + n] = onTouchStart, e[he + fe + n] = onTouchEnd, e[he + "dblclick" + n] = t, e.addEventListener(de, onTouchStart, !1), e.addEventListener(fe, onTouchEnd, !1), e.addEventListener("dblclick", t, !1), this } function removeDoubleTapListener(e, t) { var n = e[he + de + t], r = e[he + fe + t], i = e[he + "dblclick" + t]; return e.removeEventListener(de, n, !1), e.removeEventListener(fe, r, !1), T || e.removeEventListener("dblclick", i, !1), this } function on(e, t, n, r) { if ("object" == typeof t) for (var i in t) addOne(e, i, t[i], n); else for (var o = 0, a = (t = splitWords(t)).length; o < a; o++)addOne(e, t[o], n, r); return this } var pe = "_leaflet_events"; function off(e, t, n, r) { if ("object" == typeof t) for (var i in t) removeOne(e, i, t[i], n); else if (t) for (var o = 0, a = (t = splitWords(t)).length; o < a; o++)removeOne(e, t[o], n, r); else { for (var s in e[pe]) removeOne(e, s, e[pe][s]); delete e[pe] } return this } function addOne(e, t, n, r) { var i = t + stamp(n) + (r ? "_" + stamp(r) : ""); if (e[pe] && e[pe][i]) return this; var o = function (t) { return n.call(r || e, t || window.event) }, a = o; Y && 0 === t.indexOf("touch") ? addPointerListener(e, t, o, i) : !Z || "dblclick" !== t || !addDoubleTapListener || Y && D ? "addEventListener" in e ? "mousewheel" === t ? e.addEventListener("onwheel" in e ? "wheel" : "mousewheel", o, !1) : "mouseenter" === t || "mouseleave" === t ? (o = function (t) { t = t || window.event, isExternalTarget(e, t) && a(t) }, e.addEventListener("mouseenter" === t ? "mouseover" : "mouseout", o, !1)) : ("click" === t && E && (o = function (e) { !function filterClick(e, t) { var n = e.timeStamp || e.originalEvent && e.originalEvent.timeStamp, r = ge && n - ge; r && r > 100 && r < 500 || e.target._simulatedClick && !e._simulated ? stop(e) : (ge = n, t(e)) }(e, a) }), e.addEventListener(t, o, !1)) : "attachEvent" in e && e.attachEvent("on" + t, o) : addDoubleTapListener(e, o, i), e[pe] = e[pe] || {}, e[pe][i] = o } function removeOne(e, t, n, r) { var i = t + stamp(n) + (r ? "_" + stamp(r) : ""), o = e[pe] && e[pe][i]; if (!o) return this; Y && 0 === t.indexOf("touch") ? function removePointerListener(e, t, n) { var r = e["_leaflet_" + t + n]; return "touchstart" === t ? e.removeEventListener(re, r, !1) : "touchmove" === t ? e.removeEventListener(ie, r, !1) : "touchend" === t && (e.removeEventListener(oe, r, !1), e.removeEventListener(ae, r, !1)), this }(e, t, i) : !Z || "dblclick" !== t || !removeDoubleTapListener || Y && D ? "removeEventListener" in e ? "mousewheel" === t ? e.removeEventListener("onwheel" in e ? "wheel" : "mousewheel", o, !1) : e.removeEventListener("mouseenter" === t ? "mouseover" : "mouseleave" === t ? "mouseout" : t, o, !1) : "detachEvent" in e && e.detachEvent("on" + t, o) : removeDoubleTapListener(e, i), e[pe][i] = null } function stopPropagation(e) { return e.stopPropagation ? e.stopPropagation() : e.originalEvent ? e.originalEvent._stopped = !0 : e.cancelBubble = !0, skipped(e), this } function disableScrollPropagation(e) { return addOne(e, "mousewheel", stopPropagation), this } function disableClickPropagation(e) { return on(e, "mousedown touchstart dblclick", stopPropagation), addOne(e, "click", fakeStop), this } function preventDefault(e) { return e.preventDefault ? e.preventDefault() : e.returnValue = !1, this } function stop(e) { return preventDefault(e), stopPropagation(e), this } function getMousePosition(e, t) { if (!t) return new Point(e.clientX, e.clientY); var n = t.getBoundingClientRect(), r = n.width / t.offsetWidth || 1, i = n.height / t.offsetHeight || 1; return new Point(e.clientX / r - n.left - t.clientLeft, e.clientY / i - n.top - t.clientTop) } var me = B && D ? 2 * window.devicePixelRatio : F ? window.devicePixelRatio : 1; function getWheelDelta(e) { return T ? e.wheelDeltaY / 2 : e.deltaY && 0 === e.deltaMode ? -e.deltaY / me : e.deltaY && 1 === e.deltaMode ? 20 * -e.deltaY : e.deltaY && 2 === e.deltaMode ? 60 * -e.deltaY : e.deltaX || e.deltaZ ? 0 : e.wheelDelta ? (e.wheelDeltaY || e.wheelDelta) / 2 : e.detail && Math.abs(e.detail) < 32765 ? 20 * -e.detail : e.detail ? e.detail / -32765 * 60 : 0 } var ge, ve = {}; function fakeStop(e) { ve[e.type] = !0 } function skipped(e) { var t = ve[e.type]; return ve[e.type] = !1, t } function isExternalTarget(e, t) { var n = t.relatedTarget; if (!n) return !0; try { for (; n && n !== e;)n = n.parentNode } catch (e) { return !1 } return n !== e } var ye, _e, be, we, xe, Ce = (Object.freeze || Object)({ on: on, off: off, stopPropagation: stopPropagation, disableScrollPropagation: disableScrollPropagation, disableClickPropagation: disableClickPropagation, preventDefault: preventDefault, stop: stop, getMousePosition: getMousePosition, getWheelDelta: getWheelDelta, fakeStop: fakeStop, skipped: skipped, isExternalTarget: isExternalTarget, addListener: on, removeListener: off }), Se = testProp(["transform", "WebkitTransform", "OTransform", "MozTransform", "msTransform"]), ke = testProp(["webkitTransition", "transition", "OTransition", "MozTransition", "msTransition"]), Te = "webkitTransition" === ke || "OTransition" === ke ? ke + "End" : "transitionend"; function get(e) { return "string" == typeof e ? document.getElementById(e) : e } function getStyle(e, t) { var n = e.style[t] || e.currentStyle && e.currentStyle[t]; if ((!n || "auto" === n) && document.defaultView) { var r = document.defaultView.getComputedStyle(e, null); n = r ? r[t] : null } return "auto" === n ? null : n } function create$1(e, t, n) { var r = document.createElement(e); return r.className = t || "", n && n.appendChild(r), r } function remove(e) { var t = e.parentNode; t && t.removeChild(e) } function empty(e) { for (; e.firstChild;)e.removeChild(e.firstChild) } function toFront(e) { var t = e.parentNode; t.lastChild !== e && t.appendChild(e) } function toBack(e) { var t = e.parentNode; t.firstChild !== e && t.insertBefore(e, t.firstChild) } function hasClass(e, t) { if (void 0 !== e.classList) return e.classList.contains(t); var n = getClass(e); return n.length > 0 && new RegExp("(^|\\s)" + t + "(\\s|$)").test(n) } function addClass(e, t) { if (void 0 !== e.classList) for (var n = splitWords(t), r = 0, i = n.length; r < i; r++)e.classList.add(n[r]); else if (!hasClass(e, t)) { var o = getClass(e); setClass(e, (o ? o + " " : "") + t) } } function removeClass(e, t) { void 0 !== e.classList ? e.classList.remove(t) : setClass(e, trim((" " + getClass(e) + " ").replace(" " + t + " ", " "))) } function setClass(e, t) { void 0 === e.className.baseVal ? e.className = t : e.className.baseVal = t } function getClass(e) { return void 0 === e.className.baseVal ? e.className : e.className.baseVal } function setOpacity(e, t) { "opacity" in e.style ? e.style.opacity = t : "filter" in e.style && function _setOpacityIE(e, t) { var n = !1, r = "DXImageTransform.Microsoft.Alpha"; try { n = e.filters.item(r) } catch (e) { if (1 === t) return } t = Math.round(100 * t), n ? (n.Enabled = 100 !== t, n.Opacity = t) : e.style.filter += " progid:" + r + "(opacity=" + t + ")" }(e, t) } function testProp(e) { for (var t = document.documentElement.style, n = 0; n < e.length; n++)if (e[n] in t) return e[n]; return !1 } function setTransform(e, t, n) { var r = t || new Point(0, 0); e.style.willChange = 1 !== n ? "auto" : "transform", e.style[L.DomUtil.TRANSFORM] = (H || !z && !j ? "translate3d(" + r.x + "px," + r.y + "px,0)" : "translate(" + r.x + "px," + r.y + "px)") + (n ? " scale(" + n + ")" : "") } function setPosition(e, t) { e._leaflet_pos = t, q ? setTransform(e, t) : (e.style.left = t.x + "px", e.style.top = t.y + "px") } function getPosition(e) { return e._leaflet_pos || new Point(0, 0) } if ("onselectstart" in document) ye = function () { on(window, "selectstart", preventDefault) }, _e = function () { off(window, "selectstart", preventDefault) }; else { var Le = testProp(["userSelect", "WebkitUserSelect", "OUserSelect", "MozUserSelect", "msUserSelect"]); ye = function () { if (Le) { var e = document.documentElement.style; be = e[Le], e[Le] = "none" } }, _e = function () { Le && (document.documentElement.style[Le] = be, be = void 0) } } function disableImageDrag() { on(window, "dragstart", preventDefault) } function enableImageDrag() { off(window, "dragstart", preventDefault) } function preventOutline(e) { for (; -1 === e.tabIndex;)e = e.parentNode; e.style && (restoreOutline(), we = e, xe = e.style.outline, e.style.outline = "none", on(window, "keydown", restoreOutline)) } function restoreOutline() { we && (we.style.outline = xe, we = void 0, xe = void 0, off(window, "keydown", restoreOutline)) } var Me = (Object.freeze || Object)({ TRANSFORM: Se, TRANSITION: ke, TRANSITION_END: Te, get: get, getStyle: getStyle, create: create$1, remove: remove, empty: empty, toFront: toFront, toBack: toBack, hasClass: hasClass, addClass: addClass, removeClass: removeClass, setClass: setClass, getClass: getClass, setOpacity: setOpacity, testProp: testProp, setTransform: setTransform, setPosition: setPosition, getPosition: getPosition, disableTextSelection: ye, enableTextSelection: _e, disableImageDrag: disableImageDrag, enableImageDrag: enableImageDrag, preventOutline: preventOutline, restoreOutline: restoreOutline }), Ee = p.extend({ run: function (e, t, n, r) { this.stop(), this._el = e, this._inProgress = !0, this._duration = n || .25, this._easeOutPower = 1 / Math.max(r || .5, .2), this._startPos = getPosition(e), this._offset = t.subtract(this._startPos), this._startTime = +new Date, this.fire("start"), this._animate() }, stop: function () { this._inProgress && (this._step(!0), this._complete()) }, _animate: function () { this._animId = requestAnimFrame(this._animate, this), this._step() }, _step: function (e) { var t = +new Date - this._startTime, n = 1e3 * this._duration; t < n ? this._runFrame(this._easeOut(t / n), e) : (this._runFrame(1), this._complete()) }, _runFrame: function (e, t) { var n = this._startPos.add(this._offset.multiplyBy(e)); t && n._round(), setPosition(this._el, n), this.fire("step") }, _complete: function () { cancelAnimFrame(this._animId), this._inProgress = !1, this.fire("end") }, _easeOut: function (e) { return 1 - Math.pow(1 - e, this._easeOutPower) } }), Ae = p.extend({ options: { crs: b, center: void 0, zoom: void 0, minZoom: void 0, maxZoom: void 0, layers: [], maxBounds: void 0, renderer: void 0, zoomAnimation: !0, zoomAnimationThreshold: 4, fadeAnimation: !0, markerZoomAnimation: !0, transform3DLimit: 8388608, zoomSnap: 1, zoomDelta: 1, trackResize: !0 }, initialize: function (e, t) { t = setOptions(this, t), this._initContainer(e), this._initLayout(), this._onResize = bind(this._onResize, this), this._initEvents(), t.maxBounds && this.setMaxBounds(t.maxBounds), void 0 !== t.zoom && (this._zoom = this._limitZoom(t.zoom)), t.center && void 0 !== t.zoom && this.setView(toLatLng(t.center), t.zoom, { reset: !0 }), this._handlers = [], this._layers = {}, this._zoomBoundLayers = {}, this._sizeChanged = !0, this.callInitHooks(), this._zoomAnimated = ke && q && !K && this.options.zoomAnimation, this._zoomAnimated && (this._createAnimProxy(), on(this._proxy, Te, this._catchTransitionEnd, this)), this._addLayers(this.options.layers) }, setView: function (e, t, n) { if (t = void 0 === t ? this._zoom : this._limitZoom(t), e = this._limitCenter(toLatLng(e), t, this.options.maxBounds), n = n || {}, this._stop(), this._loaded && !n.reset && !0 !== n) { void 0 !== n.animate && (n.zoom = extend({ animate: n.animate }, n.zoom), n.pan = extend({ animate: n.animate, duration: n.duration }, n.pan)); var r = this._zoom !== t ? this._tryAnimatedZoom && this._tryAnimatedZoom(e, t, n.zoom) : this._tryAnimatedPan(e, n.pan); if (r) return clearTimeout(this._sizeTimer), this } return this._resetView(e, t), this }, setZoom: function (e, t) { return this._loaded ? this.setView(this.getCenter(), e, { zoom: t }) : (this._zoom = e, this) }, zoomIn: function (e, t) { return e = e || (q ? this.options.zoomDelta : 1), this.setZoom(this._zoom + e, t) }, zoomOut: function (e, t) { return e = e || (q ? this.options.zoomDelta : 1), this.setZoom(this._zoom - e, t) }, setZoomAround: function (e, t, n) { var r = this.getZoomScale(t), i = this.getSize().divideBy(2), o = e instanceof Point ? e : this.latLngToContainerPoint(e), a = o.subtract(i).multiplyBy(1 - 1 / r), s = this.containerPointToLatLng(i.add(a)); return this.setView(s, t, { zoom: n }) }, _getBoundsCenterZoom: function (e, t) { t = t || {}, e = e.getBounds ? e.getBounds() : toLatLngBounds(e); var n = toPoint(t.paddingTopLeft || t.padding || [0, 0]), r = toPoint(t.paddingBottomRight || t.padding || [0, 0]), i = this.getBoundsZoom(e, !1, n.add(r)); if ((i = "number" == typeof t.maxZoom ? Math.min(t.maxZoom, i) : i) === 1 / 0) return { center: e.getCenter(), zoom: i }; var o = r.subtract(n).divideBy(2), a = this.project(e.getSouthWest(), i), s = this.project(e.getNorthEast(), i), l = this.unproject(a.add(s).divideBy(2).add(o), i); return { center: l, zoom: i } }, fitBounds: function (e, t) { if (!(e = toLatLngBounds(e)).isValid()) throw new Error("Bounds are not valid."); var n = this._getBoundsCenterZoom(e, t); return this.setView(n.center, n.zoom, t) }, fitWorld: function (e) { return this.fitBounds([[-90, -180], [90, 180]], e) }, panTo: function (e, t) { return this.setView(e, this._zoom, { pan: t }) }, panBy: function (e, t) { if (e = toPoint(e).round(), t = t || {}, !e.x && !e.y) return this.fire("moveend"); if (!0 !== t.animate && !this.getSize().contains(e)) return this._resetView(this.unproject(this.project(this.getCenter()).add(e)), this.getZoom()), this; if (this._panAnim || (this._panAnim = new Ee, this._panAnim.on({ step: this._onPanTransitionStep, end: this._onPanTransitionEnd }, this)), t.noMoveStart || this.fire("movestart"), !1 !== t.animate) { addClass(this._mapPane, "leaflet-pan-anim"); var n = this._getMapPanePos().subtract(e).round(); this._panAnim.run(this._mapPane, n, t.duration || .25, t.easeLinearity) } else this._rawPanBy(e), this.fire("move").fire("moveend"); return this }, flyTo: function (e, t, n) { if (!1 === (n = n || {}).animate || !q) return this.setView(e, t, n); this._stop(); var i = this.project(this.getCenter()), o = this.project(e), a = this.getSize(), s = this._zoom; e = toLatLng(e), t = void 0 === t ? s : t; var l = Math.max(a.x, a.y), c = l * this.getZoomScale(s, t), d = o.distanceTo(i) || 1, f = 1.42, h = f * f; function r(e) { var t = e ? -1 : 1, n = e ? c : l, r = c * c - l * l + t * h * h * d * d, i = 2 * n * h * d, o = r / i, a = Math.sqrt(o * o + 1) - o, s = a < 1e-9 ? -18 : Math.log(a); return s } function sinh(e) { return (Math.exp(e) - Math.exp(-e)) / 2 } function cosh(e) { return (Math.exp(e) + Math.exp(-e)) / 2 } var p = r(0); function u(e) { return l * (cosh(p) * function tanh(e) { return sinh(e) / cosh(e) }(p + f * e) - sinh(p)) / h } var m = Date.now(), g = (r(1) - p) / f, v = n.duration ? 1e3 * n.duration : 1e3 * g * .8; return this._moveStart(!0, n.noMoveStart), function frame() { var n = (Date.now() - m) / v, r = function easeOut(e) { return 1 - Math.pow(1 - e, 1.5) }(n) * g; n <= 1 ? (this._flyToFrame = requestAnimFrame(frame, this), this._move(this.unproject(i.add(o.subtract(i).multiplyBy(u(r) / d)), s), this.getScaleZoom(l / function w(e) { return l * (cosh(p) / cosh(p + f * e)) }(r), s), { flyTo: !0 })) : this._move(e, t)._moveEnd(!0) }.call(this), this }, flyToBounds: function (e, t) { var n = this._getBoundsCenterZoom(e, t); return this.flyTo(n.center, n.zoom, t) }, setMaxBounds: function (e) { return (e = toLatLngBounds(e)).isValid() ? (this.options.maxBounds && this.off("moveend", this._panInsideMaxBounds), this.options.maxBounds = e, this._loaded && this._panInsideMaxBounds(), this.on("moveend", this._panInsideMaxBounds)) : (this.options.maxBounds = null, this.off("moveend", this._panInsideMaxBounds)) }, setMinZoom: function (e) { var t = this.options.minZoom; return this.options.minZoom = e, this._loaded && t !== e && (this.fire("zoomlevelschange"), this.getZoom() < this.options.minZoom) ? this.setZoom(e) : this }, setMaxZoom: function (e) { var t = this.options.maxZoom; return this.options.maxZoom = e, this._loaded && t !== e && (this.fire("zoomlevelschange"), this.getZoom() > this.options.maxZoom) ? this.setZoom(e) : this }, panInsideBounds: function (e, t) { this._enforcingBounds = !0; var n = this.getCenter(), r = this._limitCenter(n, this._zoom, toLatLngBounds(e)); return n.equals(r) || this.panTo(r, t), this._enforcingBounds = !1, this }, invalidateSize: function (e) { if (!this._loaded) return this; e = extend({ animate: !1, pan: !0 }, !0 === e ? { animate: !0 } : e); var t = this.getSize(); this._sizeChanged = !0, this._lastCenter = null; var n = this.getSize(), r = t.divideBy(2).round(), i = n.divideBy(2).round(), o = r.subtract(i); return o.x || o.y ? (e.animate && e.pan ? this.panBy(o) : (e.pan && this._rawPanBy(o), this.fire("move"), e.debounceMoveend ? (clearTimeout(this._sizeTimer), this._sizeTimer = setTimeout(bind(this.fire, this, "moveend"), 200)) : this.fire("moveend")), this.fire("resize", { oldSize: t, newSize: n })) : this }, stop: function () { return this.setZoom(this._limitZoom(this._zoom)), this.options.zoomSnap || this.fire("viewreset"), this._stop() }, locate: function (e) { if (e = this._locateOptions = extend({ timeout: 1e4, watch: !1 }, e), !("geolocation" in navigator)) return this._handleGeolocationError({ code: 0, message: "Geolocation not supported." }), this; var t = bind(this._handleGeolocationResponse, this), n = bind(this._handleGeolocationError, this); return e.watch ? this._locationWatchId = navigator.geolocation.watchPosition(t, n, e) : navigator.geolocation.getCurrentPosition(t, n, e), this }, stopLocate: function () { return navigator.geolocation && navigator.geolocation.clearWatch && navigator.geolocation.clearWatch(this._locationWatchId), this._locateOptions && (this._locateOptions.setView = !1), this }, _handleGeolocationError: function (e) { var t = e.code, n = e.message || (1 === t ? "permission denied" : 2 === t ? "position unavailable" : "timeout"); this._locateOptions.setView && !this._loaded && this.fitWorld(), this.fire("locationerror", { code: t, message: "Geolocation error: " + n + "." }) }, _handleGeolocationResponse: function (e) { var t = e.coords.latitude, n = e.coords.longitude, r = new LatLng(t, n), i = r.toBounds(e.coords.accuracy), o = this._locateOptions; if (o.setView) { var a = this.getBoundsZoom(i); this.setView(r, o.maxZoom ? Math.min(a, o.maxZoom) : a) } var s = { latlng: r, bounds: i, timestamp: e.timestamp }; for (var l in e.coords) "number" == typeof e.coords[l] && (s[l] = e.coords[l]); this.fire("locationfound", s) }, addHandler: function (e, t) { if (!t) return this; var n = this[e] = new t(this); return this._handlers.push(n), this.options[e] && n.enable(), this }, remove: function () { if (this._initEvents(!0), this._containerId !== this._container._leaflet_id) throw new Error("Map container is being reused by another instance"); try { delete this._container._leaflet_id, delete this._containerId } catch (e) { this._container._leaflet_id = void 0, this._containerId = void 0 } var e; for (e in void 0 !== this._locationWatchId && this.stopLocate(), this._stop(), remove(this._mapPane), this._clearControlPos && this._clearControlPos(), this._clearHandlers(), this._loaded && this.fire("unload"), this._layers) this._layers[e].remove(); for (e in this._panes) remove(this._panes[e]); return this._layers = [], this._panes = [], delete this._mapPane, delete this._renderer, this }, createPane: function (e, t) { var n = "leaflet-pane" + (e ? " leaflet-" + e.replace("Pane", "") + "-pane" : ""), r = create$1("div", n, t || this._mapPane); return e && (this._panes[e] = r), r }, getCenter: function () { return this._checkIfLoaded(), this._lastCenter && !this._moved() ? this._lastCenter : this.layerPointToLatLng(this._getCenterLayerPoint()) }, getZoom: function () { return this._zoom }, getBounds: function () { var e = this.getPixelBounds(), t = this.unproject(e.getBottomLeft()), n = this.unproject(e.getTopRight()); return new LatLngBounds(t, n) }, getMinZoom: function () { return void 0 === this.options.minZoom ? this._layersMinZoom || 0 : this.options.minZoom }, getMaxZoom: function () { return void 0 === this.options.maxZoom ? void 0 === this._layersMaxZoom ? 1 / 0 : this._layersMaxZoom : this.options.maxZoom }, getBoundsZoom: function (e, t, n) { e = toLatLngBounds(e), n = toPoint(n || [0, 0]); var r = this.getZoom() || 0, i = this.getMinZoom(), o = this.getMaxZoom(), a = e.getNorthWest(), s = e.getSouthEast(), l = this.getSize().subtract(n), u = toBounds(this.project(s, r), this.project(a, r)).getSize(), c = q ? this.options.zoomSnap : 1, d = l.x / u.x, f = l.y / u.y, h = t ? Math.max(d, f) : Math.min(d, f); return r = this.getScaleZoom(h, r), c && (r = Math.round(r / (c / 100)) * (c / 100), r = t ? Math.ceil(r / c) * c : Math.floor(r / c) * c), Math.max(i, Math.min(o, r)) }, getSize: function () { return this._size && !this._sizeChanged || (this._size = new Point(this._container.clientWidth || 0, this._container.clientHeight || 0), this._sizeChanged = !1), this._size.clone() }, getPixelBounds: function (e, t) { var n = this._getTopLeftPoint(e, t); return new Bounds(n, n.add(this.getSize())) }, getPixelOrigin: function () { return this._checkIfLoaded(), this._pixelOrigin }, getPixelWorldBounds: function (e) { return this.options.crs.getProjectedBounds(void 0 === e ? this.getZoom() : e) }, getPane: function (e) { return "string" == typeof e ? this._panes[e] : e }, getPanes: function () { return this._panes }, getContainer: function () { return this._container }, getZoomScale: function (e, t) { var n = this.options.crs; return t = void 0 === t ? this._zoom : t, n.scale(e) / n.scale(t) }, getScaleZoom: function (e, t) { var n = this.options.crs; t = void 0 === t ? this._zoom : t; var r = n.zoom(e * n.scale(t)); return isNaN(r) ? 1 / 0 : r }, project: function (e, t) { return t = void 0 === t ? this._zoom : t, this.options.crs.latLngToPoint(toLatLng(e), t) }, unproject: function (e, t) { return t = void 0 === t ? this._zoom : t, this.options.crs.pointToLatLng(toPoint(e), t) }, layerPointToLatLng: function (e) { var t = toPoint(e).add(this.getPixelOrigin()); return this.unproject(t) }, latLngToLayerPoint: function (e) { var t = this.project(toLatLng(e))._round(); return t._subtract(this.getPixelOrigin()) }, wrapLatLng: function (e) { return this.options.crs.wrapLatLng(toLatLng(e)) }, wrapLatLngBounds: function (e) { return this.options.crs.wrapLatLngBounds(toLatLngBounds(e)) }, distance: function (e, t) { return this.options.crs.distance(toLatLng(e), toLatLng(t)) }, containerPointToLayerPoint: function (e) { return toPoint(e).subtract(this._getMapPanePos()) }, layerPointToContainerPoint: function (e) { return toPoint(e).add(this._getMapPanePos()) }, containerPointToLatLng: function (e) { var t = this.containerPointToLayerPoint(toPoint(e)); return this.layerPointToLatLng(t) }, latLngToContainerPoint: function (e) { return this.layerPointToContainerPoint(this.latLngToLayerPoint(toLatLng(e))) }, mouseEventToContainerPoint: function (e) { return getMousePosition(e, this._container) }, mouseEventToLayerPoint: function (e) { return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e)) }, mouseEventToLatLng: function (e) { return this.layerPointToLatLng(this.mouseEventToLayerPoint(e)) }, _initContainer: function (e) { var t = this._container = get(e); if (!t) throw new Error("Map container not found."); if (t._leaflet_id) throw new Error("Map container is already initialized."); on(t, "scroll", this._onScroll, this), this._containerId = stamp(t) }, _initLayout: function () { var e = this._container; this._fadeAnimated = this.options.fadeAnimation && q, addClass(e, "leaflet-container" + (Z ? " leaflet-touch" : "") + (J ? " leaflet-retina" : "") + (k ? " leaflet-oldie" : "") + (I ? " leaflet-safari" : "") + (this._fadeAnimated ? " leaflet-fade-anim" : "")); var t = getStyle(e, "position"); "absolute" !== t && "relative" !== t && "fixed" !== t && (e.style.position = "relative"), this._initPanes(), this._initControlPos && this._initControlPos() }, _initPanes: function () { var e = this._panes = {}; this._paneRenderers = {}, this._mapPane = this.createPane("mapPane", this._container), setPosition(this._mapPane, new Point(0, 0)), this.createPane("tilePane"), this.createPane("shadowPane"), this.createPane("overlayPane"), this.createPane("markerPane"), this.createPane("tooltipPane"), this.createPane("popupPane"), this.options.markerZoomAnimation || (addClass(e.markerPane, "leaflet-zoom-hide"), addClass(e.shadowPane, "leaflet-zoom-hide")) }, _resetView: function (e, t) { setPosition(this._mapPane, new Point(0, 0)); var n = !this._loaded; this._loaded = !0, t = this._limitZoom(t), this.fire("viewprereset"); var r = this._zoom !== t; this._moveStart(r, !1)._move(e, t)._moveEnd(r), this.fire("viewreset"), n && this.fire("load") }, _moveStart: function (e, t) { return e && this.fire("zoomstart"), t || this.fire("movestart"), this }, _move: function (e, t, n) { void 0 === t && (t = this._zoom); var r = this._zoom !== t; return this._zoom = t, this._lastCenter = e, this._pixelOrigin = this._getNewPixelOrigin(e), (r || n && n.pinch) && this.fire("zoom", n), this.fire("move", n) }, _moveEnd: function (e) { return e && this.fire("zoomend"), this.fire("moveend") }, _stop: function () { return cancelAnimFrame(this._flyToFrame), this._panAnim && this._panAnim.stop(), this }, _rawPanBy: function (e) { setPosition(this._mapPane, this._getMapPanePos().subtract(e)) }, _getZoomSpan: function () { return this.getMaxZoom() - this.getMinZoom() }, _panInsideMaxBounds: function () { this._enforcingBounds || this.panInsideBounds(this.options.maxBounds) }, _checkIfLoaded: function () { if (!this._loaded) throw new Error("Set map center and zoom first.") }, _initEvents: function (e) { this._targets = {}, this._targets[stamp(this._container)] = this; var t = e ? off : on; t(this._container, "click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress", this._handleDOMEvent, this), this.options.trackResize && t(window, "resize", this._onResize, this), q && this.options.transform3DLimit && (e ? this.off : this.on).call(this, "moveend", this._onMoveEnd) }, _onResize: function () { cancelAnimFrame(this._resizeRequest), this._resizeRequest = requestAnimFrame(function () { this.invalidateSize({ debounceMoveend: !0 }) }, this) }, _onScroll: function () { this._container.scrollTop = 0, this._container.scrollLeft = 0 }, _onMoveEnd: function () { var e = this._getMapPanePos(); Math.max(Math.abs(e.x), Math.abs(e.y)) >= this.options.transform3DLimit && this._resetView(this.getCenter(), this.getZoom()) }, _findEventTargets: function (e, t) { for (var n, r = [], i = "mouseout" === t || "mouseover" === t, o = e.target || e.srcElement, a = !1; o;) { if ((n = this._targets[stamp(o)]) && ("click" === t || "preclick" === t) && !e._simulated && this._draggableMoved(n)) { a = !0; break } if (n && n.listens(t, !0)) { if (i && !isExternalTarget(o, e)) break; if (r.push(n), i) break } if (o === this._container) break; o = o.parentNode } return r.length || a || i || !isExternalTarget(o, e) || (r = [this]), r }, _handleDOMEvent: function (e) { if (this._loaded && !skipped(e)) { var t = e.type; "mousedown" !== t && "keypress" !== t || preventOutline(e.target || e.srcElement), this._fireDOMEvent(e, t) } }, _mouseEvents: ["click", "dblclick", "mouseover", "mouseout", "contextmenu"], _fireDOMEvent: function (e, t, n) { if ("click" === e.type) { var r = extend({}, e); r.type = "preclick", this._fireDOMEvent(r, r.type, n) } if (!e._stopped && (n = (n || []).concat(this._findEventTargets(e, t))).length) { var i = n[0]; "contextmenu" === t && i.listens(t, !0) && preventDefault(e); var o = { originalEvent: e }; if ("keypress" !== e.type) { var a = i.getLatLng && (!i._radius || i._radius <= 10); o.containerPoint = a ? this.latLngToContainerPoint(i.getLatLng()) : this.mouseEventToContainerPoint(e), o.layerPoint = this.containerPointToLayerPoint(o.containerPoint), o.latlng = a ? i.getLatLng() : this.layerPointToLatLng(o.layerPoint) } for (var s = 0; s < n.length; s++)if (n[s].fire(t, o, !0), o.originalEvent._stopped || !1 === n[s].options.bubblingMouseEvents && -1 !== indexOf(this._mouseEvents, t)) return } }, _draggableMoved: function (e) { return (e = e.dragging && e.dragging.enabled() ? e : this).dragging && e.dragging.moved() || this.boxZoom && this.boxZoom.moved() }, _clearHandlers: function () { for (var e = 0, t = this._handlers.length; e < t; e++)this._handlers[e].disable() }, whenReady: function (e, t) { return this._loaded ? e.call(t || this, { target: this }) : this.on("load", e, t), this }, _getMapPanePos: function () { return getPosition(this._mapPane) || new Point(0, 0) }, _moved: function () { var e = this._getMapPanePos(); return e && !e.equals([0, 0]) }, _getTopLeftPoint: function (e, t) { var n = e && void 0 !== t ? this._getNewPixelOrigin(e, t) : this.getPixelOrigin(); return n.subtract(this._getMapPanePos()) }, _getNewPixelOrigin: function (e, t) { var n = this.getSize()._divideBy(2); return this.project(e, t)._subtract(n)._add(this._getMapPanePos())._round() }, _latLngToNewLayerPoint: function (e, t, n) { var r = this._getNewPixelOrigin(n, t); return this.project(e, t)._subtract(r) }, _latLngBoundsToNewLayerBounds: function (e, t, n) { var r = this._getNewPixelOrigin(n, t); return toBounds([this.project(e.getSouthWest(), t)._subtract(r), this.project(e.getNorthWest(), t)._subtract(r), this.project(e.getSouthEast(), t)._subtract(r), this.project(e.getNorthEast(), t)._subtract(r)]) }, _getCenterLayerPoint: function () { return this.containerPointToLayerPoint(this.getSize()._divideBy(2)) }, _getCenterOffset: function (e) { return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint()) }, _limitCenter: function (e, t, n) { if (!n) return e; var r = this.project(e, t), i = this.getSize().divideBy(2), o = new Bounds(r.subtract(i), r.add(i)), a = this._getBoundsOffset(o, n, t); return a.round().equals([0, 0]) ? e : this.unproject(r.add(a), t) }, _limitOffset: function (e, t) { if (!t) return e; var n = this.getPixelBounds(), r = new Bounds(n.min.add(e), n.max.add(e)); return e.add(this._getBoundsOffset(r, t)) }, _getBoundsOffset: function (e, t, n) { var r = toBounds(this.project(t.getNorthEast(), n), this.project(t.getSouthWest(), n)), i = r.min.subtract(e.min), o = r.max.subtract(e.max), a = this._rebound(i.x, -o.x), s = this._rebound(i.y, -o.y); return new Point(a, s) }, _rebound: function (e, t) { return e + t > 0 ? Math.round(e - t) / 2 : Math.max(0, Math.ceil(e)) - Math.max(0, Math.floor(t)) }, _limitZoom: function (e) { var t = this.getMinZoom(), n = this.getMaxZoom(), r = q ? this.options.zoomSnap : 1; return r && (e = Math.round(e / r) * r), Math.max(t, Math.min(n, e)) }, _onPanTransitionStep: function () { this.fire("move") }, _onPanTransitionEnd: function () { removeClass(this._mapPane, "leaflet-pan-anim"), this.fire("moveend") }, _tryAnimatedPan: function (e, t) { var n = this._getCenterOffset(e)._trunc(); return !(!0 !== (t && t.animate) && !this.getSize().contains(n) || (this.panBy(n, t), 0)) }, _createAnimProxy: function () { var e = this._proxy = create$1("div", "leaflet-proxy leaflet-zoom-animated"); this._panes.mapPane.appendChild(e), this.on("zoomanim", function (e) { var t = Se, n = this._proxy.style[t]; setTransform(this._proxy, this.project(e.center, e.zoom), this.getZoomScale(e.zoom, 1)), n === this._proxy.style[t] && this._animatingZoom && this._onZoomTransitionEnd() }, this), this.on("load moveend", function () { var e = this.getCenter(), t = this.getZoom(); setTransform(this._proxy, this.project(e, t), this.getZoomScale(t, 1)) }, this), this._on("unload", this._destroyAnimProxy, this) }, _destroyAnimProxy: function () { remove(this._proxy), delete this._proxy }, _catchTransitionEnd: function (e) { this._animatingZoom && e.propertyName.indexOf("transform") >= 0 && this._onZoomTransitionEnd() }, _nothingToAnimate: function () { return !this._container.getElementsByClassName("leaflet-zoom-animated").length }, _tryAnimatedZoom: function (e, t, n) { if (this._animatingZoom) return !0; if (n = n || {}, !this._zoomAnimated || !1 === n.animate || this._nothingToAnimate() || Math.abs(t - this._zoom) > this.options.zoomAnimationThreshold) return !1; var r = this.getZoomScale(t), i = this._getCenterOffset(e)._divideBy(1 - 1 / r); return !(!0 !== n.animate && !this.getSize().contains(i) || (requestAnimFrame(function () { this._moveStart(!0, !1)._animateZoom(e, t, !0) }, this), 0)) }, _animateZoom: function (e, t, n, r) { this._mapPane && (n && (this._animatingZoom = !0, this._animateToCenter = e, this._animateToZoom = t, addClass(this._mapPane, "leaflet-zoom-anim")), this.fire("zoomanim", { center: e, zoom: t, noUpdate: r }), setTimeout(bind(this._onZoomTransitionEnd, this), 250)) }, _onZoomTransitionEnd: function () { this._animatingZoom && (this._mapPane && removeClass(this._mapPane, "leaflet-zoom-anim"), this._animatingZoom = !1, this._move(this._animateToCenter, this._animateToZoom), requestAnimFrame(function () { this._moveEnd(!0) }, this)) } }), Pe = Class.extend({ options: { position: "topright" }, initialize: function (e) { setOptions(this, e) }, getPosition: function () { return this.options.position }, setPosition: function (e) { var t = this._map; return t && t.removeControl(this), this.options.position = e, t && t.addControl(this), this }, getContainer: function () { return this._container }, addTo: function (e) { this.remove(), this._map = e; var t = this._container = this.onAdd(e), n = this.getPosition(), r = e._controlCorners[n]; return addClass(t, "leaflet-control"), -1 !== n.indexOf("bottom") ? r.insertBefore(t, r.firstChild) : r.appendChild(t), this }, remove: function () { return this._map ? (remove(this._container), this.onRemove && this.onRemove(this._map), this._map = null, this) : this }, _refocusOnMap: function (e) { this._map && e && e.screenX > 0 && e.screenY > 0 && this._map.getContainer().focus() } }), Re = function (e) { return new Pe(e) }; Ae.include({ addControl: function (e) { return e.addTo(this), this }, removeControl: function (e) { return e.remove(), this }, _initControlPos: function () { var e = this._controlCorners = {}, t = "leaflet-", n = this._controlContainer = create$1("div", t + "control-container", this._container); function createCorner(r, i) { var o = t + r + " " + t + i; e[r + i] = create$1("div", o, n) } createCorner("top", "left"), createCorner("top", "right"), createCorner("bottom", "left"), createCorner("bottom", "right") }, _clearControlPos: function () { for (var e in this._controlCorners) remove(this._controlCorners[e]); remove(this._controlContainer), delete this._controlCorners, delete this._controlContainer } }); var Oe = Pe.extend({ options: { collapsed: !0, position: "topright", autoZIndex: !0, hideSingleBase: !1, sortLayers: !1, sortFunction: function (e, t, n, r) { return n < r ? -1 : r < n ? 1 : 0 } }, initialize: function (e, t, n) { for (var r in setOptions(this, n), this._layerControlInputs = [], this._layers = [], this._lastZIndex = 0, this._handlingClick = !1, e) this._addLayer(e[r], r); for (r in t) this._addLayer(t[r], r, !0) }, onAdd: function (e) { this._initLayout(), this._update(), this._map = e, e.on("zoomend", this._checkDisabledLayers, this); for (var t = 0; t < this._layers.length; t++)this._layers[t].layer.on("add remove", this._onLayerChange, this); return this._container }, addTo: function (e) { return Pe.prototype.addTo.call(this, e), this._expandIfNotCollapsed() }, onRemove: function () { this._map.off("zoomend", this._checkDisabledLayers, this); for (var e = 0; e < this._layers.length; e++)this._layers[e].layer.off("add remove", this._onLayerChange, this) }, addBaseLayer: function (e, t) { return this._addLayer(e, t), this._map ? this._update() : this }, addOverlay: function (e, t) { return this._addLayer(e, t, !0), this._map ? this._update() : this }, removeLayer: function (e) { e.off("add remove", this._onLayerChange, this); var t = this._getLayer(stamp(e)); return t && this._layers.splice(this._layers.indexOf(t), 1), this._map ? this._update() : this }, expand: function () { addClass(this._container, "leaflet-control-layers-expanded"), this._form.style.height = null; var e = this._map.getSize().y - (this._container.offsetTop + 50); return e < this._form.clientHeight ? (addClass(this._form, "leaflet-control-layers-scrollbar"), this._form.style.height = e + "px") : removeClass(this._form, "leaflet-control-layers-scrollbar"), this._checkDisabledLayers(), this }, collapse: function () { return removeClass(this._container, "leaflet-control-layers-expanded"), this }, _initLayout: function () { var e = "leaflet-control-layers", t = this._container = create$1("div", e), n = this.options.collapsed; t.setAttribute("aria-haspopup", !0), disableClickPropagation(t), disableScrollPropagation(t); var r = this._form = create$1("form", e + "-list"); n && (this._map.on("click", this.collapse, this), E || on(t, { mouseenter: this.expand, mouseleave: this.collapse }, this)); var i = this._layersLink = create$1("a", e + "-toggle", t); i.href = "#", i.title = "Layers", Z ? (on(i, "click", stop), on(i, "click", this.expand, this)) : on(i, "focus", this.expand, this), n || this.expand(), this._baseLayersList = create$1("div", e + "-base", r), this._separator = create$1("div", e + "-separator", r), this._overlaysList = create$1("div", e + "-overlays", r), t.appendChild(r) }, _getLayer: function (e) { for (var t = 0; t < this._layers.length; t++)if (this._layers[t] && stamp(this._layers[t].layer) === e) return this._layers[t] }, _addLayer: function (e, t, n) { this._map && e.on("add remove", this._onLayerChange, this), this._layers.push({ layer: e, name: t, overlay: n }), this.options.sortLayers && this._layers.sort(bind(function (e, t) { return this.options.sortFunction(e.layer, t.layer, e.name, t.name) }, this)), this.options.autoZIndex && e.setZIndex && (this._lastZIndex++, e.setZIndex(this._lastZIndex)), this._expandIfNotCollapsed() }, _update: function () { if (!this._container) return this; empty(this._baseLayersList), empty(this._overlaysList), this._layerControlInputs = []; var e, t, n, r, i = 0; for (n = 0; n < this._layers.length; n++)r = this._layers[n], this._addItem(r), t = t || r.overlay, e = e || !r.overlay, i += r.overlay ? 0 : 1; return this.options.hideSingleBase && (e = e && i > 1, this._baseLayersList.style.display = e ? "" : "none"), this._separator.style.display = t && e ? "" : "none", this }, _onLayerChange: function (e) { this._handlingClick || this._update(); var t = this._getLayer(stamp(e.target)), n = t.overlay ? "add" === e.type ? "overlayadd" : "overlayremove" : "add" === e.type ? "baselayerchange" : null; n && this._map.fire(n, t) }, _createRadioElement: function (e, t) { var n = '<input type="radio" class="leaflet-control-layers-selector" name="' + e + '"' + (t ? ' checked="checked"' : "") + "/>", r = document.createElement("div"); return r.innerHTML = n, r.firstChild }, _addItem: function (e) { var t, n = document.createElement("label"), r = this._map.hasLayer(e.layer); e.overlay ? ((t = document.createElement("input")).type = "checkbox", t.className = "leaflet-control-layers-selector", t.defaultChecked = r) : t = this._createRadioElement("leaflet-base-layers", r), this._layerControlInputs.push(t), t.layerId = stamp(e.layer), on(t, "click", this._onInputClick, this); var i = document.createElement("span"); i.innerHTML = " " + e.name; var o = document.createElement("div"); n.appendChild(o), o.appendChild(t), o.appendChild(i); var a = e.overlay ? this._overlaysList : this._baseLayersList; return a.appendChild(n), this._checkDisabledLayers(), n }, _onInputClick: function () { var e, t, n = this._layerControlInputs, r = [], i = []; this._handlingClick = !0; for (var o = n.length - 1; o >= 0; o--)e = n[o], t = this._getLayer(e.layerId).layer, e.checked ? r.push(t) : e.checked || i.push(t); for (o = 0; o < i.length; o++)this._map.hasLayer(i[o]) && this._map.removeLayer(i[o]); for (o = 0; o < r.length; o++)this._map.hasLayer(r[o]) || this._map.addLayer(r[o]); this._handlingClick = !1, this._refocusOnMap() }, _checkDisabledLayers: function () { for (var e, t, n = this._layerControlInputs, r = this._map.getZoom(), i = n.length - 1; i >= 0; i--)e = n[i], t = this._getLayer(e.layerId).layer, e.disabled = void 0 !== t.options.minZoom && r < t.options.minZoom || void 0 !== t.options.maxZoom && r > t.options.maxZoom }, _expandIfNotCollapsed: function () { return this._map && !this.options.collapsed && this.expand(), this }, _expand: function () { return this.expand() }, _collapse: function () { return this.collapse() } }), De = Pe.extend({ options: { position: "topleft", zoomInText: "+", zoomInTitle: "Zoom in", zoomOutText: "&#x2212;", zoomOutTitle: "Zoom out" }, onAdd: function (e) { var t = "leaflet-control-zoom", n = create$1("div", t + " leaflet-bar"), r = this.options; return this._zoomInButton = this._createButton(r.zoomInText, r.zoomInTitle, t + "-in", n, this._zoomIn), this._zoomOutButton = this._createButton(r.zoomOutText, r.zoomOutTitle, t + "-out", n, this._zoomOut), this._updateDisabled(), e.on("zoomend zoomlevelschange", this._updateDisabled, this), n }, onRemove: function (e) { e.off("zoomend zoomlevelschange", this._updateDisabled, this) }, disable: function () { return this._disabled = !0, this._updateDisabled(), this }, enable: function () { return this._disabled = !1, this._updateDisabled(), this }, _zoomIn: function (e) { !this._disabled && this._map._zoom < this._map.getMaxZoom() && this._map.zoomIn(this._map.options.zoomDelta * (e.shiftKey ? 3 : 1)) }, _zoomOut: function (e) { !this._disabled && this._map._zoom > this._map.getMinZoom() && this._map.zoomOut(this._map.options.zoomDelta * (e.shiftKey ? 3 : 1)) }, _createButton: function (e, t, n, r, i) { var o = create$1("a", n, r); return o.innerHTML = e, o.href = "#", o.title = t, o.setAttribute("role", "button"), o.setAttribute("aria-label", t), disableClickPropagation(o), on(o, "click", stop), on(o, "click", i, this), on(o, "click", this._refocusOnMap, this), o }, _updateDisabled: function () { var e = this._map, t = "leaflet-disabled"; removeClass(this._zoomInButton, t), removeClass(this._zoomOutButton, t), (this._disabled || e._zoom === e.getMinZoom()) && addClass(this._zoomOutButton, t), (this._disabled || e._zoom === e.getMaxZoom()) && addClass(this._zoomInButton, t) } }); Ae.mergeOptions({ zoomControl: !0 }), Ae.addInitHook(function () { this.options.zoomControl && (this.zoomControl = new De, this.addControl(this.zoomControl)) }); var Fe = Pe.extend({ options: { position: "bottomleft", maxWidth: 100, metric: !0, imperial: !0 }, onAdd: function (e) { var t = create$1("div", "leaflet-control-scale"), n = this.options; return this._addScales(n, "leaflet-control-scale-line", t), e.on(n.updateWhenIdle ? "moveend" : "move", this._update, this), e.whenReady(this._update, this), t }, onRemove: function (e) { e.off(this.options.updateWhenIdle ? "moveend" : "move", this._update, this) }, _addScales: function (e, t, n) { e.metric && (this._mScale = create$1("div", t, n)), e.imperial && (this._iScale = create$1("div", t, n)) }, _update: function () { var e = this._map, t = e.getSize().y / 2, n = e.distance(e.containerPointToLatLng([0, t]), e.containerPointToLatLng([this.options.maxWidth, t])); this._updateScales(n) }, _updateScales: function (e) { this.options.metric && e && this._updateMetric(e), this.options.imperial && e && this._updateImperial(e) }, _updateMetric: function (e) { var t = this._getRoundNum(e), n = t < 1e3 ? t + " m" : t / 1e3 + " km"; this._updateScale(this._mScale, n, t / e) }, _updateImperial: function (e) { var t, n, r, i = 3.2808399 * e; i > 5280 ? (t = i / 5280, n = this._getRoundNum(t), this._updateScale(this._iScale, n + " mi", n / t)) : (r = this._getRoundNum(i), this._updateScale(this._iScale, r + " ft", r / i)) }, _updateScale: function (e, t, n) { e.style.width = Math.round(this.options.maxWidth * n) + "px", e.innerHTML = t }, _getRoundNum: function (e) { var t = Math.pow(10, (Math.floor(e) + "").length - 1), n = e / t; return t * (n = n >= 10 ? 10 : n >= 5 ? 5 : n >= 3 ? 3 : n >= 2 ? 2 : 1) } }), Ie = Pe.extend({ options: { position: "bottomright", prefix: '<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>' }, initialize: function (e) { setOptions(this, e), this._attributions = {} }, onAdd: function (e) { for (var t in e.attributionControl = this, this._container = create$1("div", "leaflet-control-attribution"), disableClickPropagation(this._container), e._layers) e._layers[t].getAttribution && this.addAttribution(e._layers[t].getAttribution()); return this._update(), this._container }, setPrefix: function (e) { return this.options.prefix = e, this._update(), this }, addAttribution: function (e) { return e ? (this._attributions[e] || (this._attributions[e] = 0), this._attributions[e]++, this._update(), this) : this }, removeAttribution: function (e) { return e ? (this._attributions[e] && (this._attributions[e]--, this._update()), this) : this }, _update: function () { if (this._map) { var e = []; for (var t in this._attributions) this._attributions[t] && e.push(t); var n = []; this.options.prefix && n.push(this.options.prefix), e.length && n.push(e.join(", ")), this._container.innerHTML = n.join(" | ") } } }); Ae.mergeOptions({ attributionControl: !0 }), Ae.addInitHook(function () { this.options.attributionControl && (new Ie).addTo(this) }), Pe.Layers = Oe, Pe.Zoom = De, Pe.Scale = Fe, Pe.Attribution = Ie, Re.layers = function (e, t, n) { return new Oe(e, t, n) }, Re.zoom = function (e) { return new De(e) }, Re.scale = function (e) { return new Fe(e) }, Re.attribution = function (e) { return new Ie(e) }; var Ne = Class.extend({ initialize: function (e) { this._map = e }, enable: function () { return this._enabled ? this : (this._enabled = !0, this.addHooks(), this) }, disable: function () { return this._enabled ? (this._enabled = !1, this.removeHooks(), this) : this }, enabled: function () { return !!this._enabled } }); Ne.addTo = function (e, t) { return e.addHandler(t, this), this }; var $e, Be = { Events: h }, ze = Z ? "touchstart mousedown" : "mousedown", je = { mousedown: "mouseup", touchstart: "touchend", pointerdown: "touchend", MSPointerDown: "touchend" }, Ue = { mousedown: "mousemove", touchstart: "touchmove", pointerdown: "touchmove", MSPointerDown: "touchmove" }, qe = p.extend({ options: { clickTolerance: 3 }, initialize: function (e, t, n, r) { setOptions(this, r), this._element = e, this._dragStartTarget = t || e, this._preventOutline = n }, enable: function () { this._enabled || (on(this._dragStartTarget, ze, this._onDown, this), this._enabled = !0) }, disable: function () { this._enabled && (qe._dragging === this && this.finishDrag(), off(this._dragStartTarget, ze, this._onDown, this), this._enabled = !1, this._moved = !1) }, _onDown: function (e) { if (!e._simulated && this._enabled && (this._moved = !1, !hasClass(this._element, "leaflet-zoom-anim") && !(qe._dragging || e.shiftKey || 1 !== e.which && 1 !== e.button && !e.touches || (qe._dragging = this, this._preventOutline && preventOutline(this._element), disableImageDrag(), ye(), this._moving)))) { this.fire("down"); var t = e.touches ? e.touches[0] : e; this._startPoint = new Point(t.clientX, t.clientY), on(document, Ue[e.type], this._onMove, this), on(document, je[e.type], this._onUp, this) } }, _onMove: function (e) { if (!e._simulated && this._enabled) if (e.touches && e.touches.length > 1) this._moved = !0; else { var t = e.touches && 1 === e.touches.length ? e.touches[0] : e, n = new Point(t.clientX, t.clientY), r = n.subtract(this._startPoint); (r.x || r.y) && (Math.abs(r.x) + Math.abs(r.y) < this.options.clickTolerance || (preventDefault(e), this._moved || (this.fire("dragstart"), this._moved = !0, this._startPos = getPosition(this._element).subtract(r), addClass(document.body, "leaflet-dragging"), this._lastTarget = e.target || e.srcElement, window.SVGElementInstance && this._lastTarget instanceof SVGElementInstance && (this._lastTarget = this._lastTarget.correspondingUseElement), addClass(this._lastTarget, "leaflet-drag-target")), this._newPos = this._startPos.add(r), this._moving = !0, cancelAnimFrame(this._animRequest), this._lastEvent = e, this._animRequest = requestAnimFrame(this._updatePosition, this, !0))) } }, _updatePosition: function () { var e = { originalEvent: this._lastEvent }; this.fire("predrag", e), setPosition(this._element, this._newPos), this.fire("drag", e) }, _onUp: function (e) { !e._simulated && this._enabled && this.finishDrag() }, finishDrag: function () { for (var e in removeClass(document.body, "leaflet-dragging"), this._lastTarget && (removeClass(this._lastTarget, "leaflet-drag-target"), this._lastTarget = null), Ue) off(document, Ue[e], this._onMove, this), off(document, je[e], this._onUp, this); enableImageDrag(), _e(), this._moved && this._moving && (cancelAnimFrame(this._animRequest), this.fire("dragend", { distance: this._newPos.distanceTo(this._startPos) })), this._moving = !1, qe._dragging = !1 } }); function simplify(e, t) { if (!t || !e.length) return e.slice(); var n = t * t; return e = function _simplifyDP(e, t) { var n = e.length, r = new (typeof Uint8Array != void 0 + "" ? Uint8Array : Array)(n); r[0] = r[n - 1] = 1, function _simplifyDPStep(e, t, n, r, i) { var o, a, s, l = 0; for (a = r + 1; a <= i - 1; a++)(s = _sqClosestPointOnSegment(e[a], e[r], e[i], !0)) > l && (o = a, l = s); l > n && (t[o] = 1, _simplifyDPStep(e, t, n, r, o), _simplifyDPStep(e, t, n, o, i)) }(e, r, t, 0, n - 1); var i, o = []; for (i = 0; i < n; i++)r[i] && o.push(e[i]); return o }(e = function _reducePoints(e, t) { for (var n = [e[0]], r = 1, i = 0, o = e.length; r < o; r++)a = e[r], s = e[i], l = s.x - a.x, u = s.y - a.y, l * l + u * u > t && (n.push(e[r]), i = r); var a, s, l, u; return i < o - 1 && n.push(e[o - 1]), n }(e, n), n) } function pointToSegmentDistance(e, t, n) { return Math.sqrt(_sqClosestPointOnSegment(e, t, n, !0)) } function clipSegment(e, t, n, r, i) { var o, a, s, l = r ? $e : _getBitCode(e, n), u = _getBitCode(t, n); for ($e = u; ;) { if (!(l | u)) return [e, t]; if (l & u) return !1; a = _getEdgeIntersection(e, t, o = l || u, n, i), s = _getBitCode(a, n), o === l ? (e = a, l = s) : (t = a, u = s) } } function _getEdgeIntersection(e, t, n, r, i) { var o, a, s = t.x - e.x, l = t.y - e.y, u = r.min, c = r.max; return 8 & n ? (o = e.x + s * (c.y - e.y) / l, a = c.y) : 4 & n ? (o = e.x + s * (u.y - e.y) / l, a = u.y) : 2 & n ? (o = c.x, a = e.y + l * (c.x - e.x) / s) : 1 & n && (o = u.x, a = e.y + l * (u.x - e.x) / s), new Point(o, a, i) } function _getBitCode(e, t) { var n = 0; return e.x < t.min.x ? n |= 1 : e.x > t.max.x && (n |= 2), e.y < t.min.y ? n |= 4 : e.y > t.max.y && (n |= 8), n } function _sqClosestPointOnSegment(e, t, n, r) { var i, o = t.x, a = t.y, s = n.x - o, l = n.y - a, u = s * s + l * l; return u > 0 && ((i = ((e.x - o) * s + (e.y - a) * l) / u) > 1 ? (o = n.x, a = n.y) : i > 0 && (o += s * i, a += l * i)), s = e.x - o, l = e.y - a, r ? s * s + l * l : new Point(o, a) } function isFlat(e) { return !a(e[0]) || "object" != typeof e[0][0] && void 0 !== e[0][0] } function _flat(e) { return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."), isFlat(e) } var He = (Object.freeze || Object)({ simplify: simplify, pointToSegmentDistance: pointToSegmentDistance, closestPointOnSegment: function closestPointOnSegment(e, t, n) { return _sqClosestPointOnSegment(e, t, n) }, clipSegment: clipSegment, _getEdgeIntersection: _getEdgeIntersection, _getBitCode: _getBitCode, _sqClosestPointOnSegment: _sqClosestPointOnSegment, isFlat: isFlat, _flat: _flat }); function clipPolygon(e, t, n) { var r, i, o, a, s, l, u, c, d, f = [1, 4, 2, 8]; for (i = 0, u = e.length; i < u; i++)e[i]._code = _getBitCode(e[i], t); for (a = 0; a < 4; a++) { for (c = f[a], r = [], i = 0, u = e.length, o = u - 1; i < u; o = i++)s = e[i], l = e[o], s._code & c ? l._code & c || ((d = _getEdgeIntersection(l, s, c, t, n))._code = _getBitCode(d, t), r.push(d)) : (l._code & c && ((d = _getEdgeIntersection(l, s, c, t, n))._code = _getBitCode(d, t), r.push(d)), r.push(s)); e = r } return e } var Ve = (Object.freeze || Object)({ clipPolygon: clipPolygon }), Ge = { project: function (e) { return new Point(e.lng, e.lat) }, unproject: function (e) { return new LatLng(e.y, e.x) }, bounds: new Bounds([-180, -90], [180, 90]) }, We = { R: 6378137, R_MINOR: 6356752.314245179, bounds: new Bounds([-20037508.34279, -15496570.73972], [20037508.34279, 18764656.23138]), project: function (e) { var t = Math.PI / 180, n = this.R, r = e.lat * t, i = this.R_MINOR / n, o = Math.sqrt(1 - i * i), a = o * Math.sin(r), s = Math.tan(Math.PI / 4 - r / 2) / Math.pow((1 - a) / (1 + a), o / 2); return r = -n * Math.log(Math.max(s, 1e-10)), new Point(e.lng * t * n, r) }, unproject: function (e) { for (var t, n = 180 / Math.PI, r = this.R, i = this.R_MINOR / r, o = Math.sqrt(1 - i * i), a = Math.exp(-e.y / r), s = Math.PI / 2 - 2 * Math.atan(a), l = 0, u = .1; l < 15 && Math.abs(u) > 1e-7; l++)t = o * Math.sin(s), t = Math.pow((1 - t) / (1 + t), o / 2), u = Math.PI / 2 - 2 * Math.atan(a * t) - s, s += u; return new LatLng(s * n, e.x * n / r) } }, Ye = (Object.freeze || Object)({ LonLat: Ge, Mercator: We, SphericalMercator: _ }), Ze = extend({}, y, { code: "EPSG:3395", projection: We, transformation: function () { var e = .5 / (Math.PI * We.R); return toTransformation(e, .5, -e, .5) }() }), Ke = extend({}, y, { code: "EPSG:4326", projection: Ge, transformation: toTransformation(1 / 180, 1, -1 / 180, .5) }), Xe = extend({}, v, { projection: Ge, transformation: toTransformation(1, 0, -1, 0), scale: function (e) { return Math.pow(2, e) }, zoom: function (e) { return Math.log(e) / Math.LN2 }, distance: function (e, t) { var n = t.lng - e.lng, r = t.lat - e.lat; return Math.sqrt(n * n + r * r) }, infinite: !0 }); v.Earth = y, v.EPSG3395 = Ze, v.EPSG3857 = b, v.EPSG900913 = x, v.EPSG4326 = Ke, v.Simple = Xe; var Je = p.extend({ options: { pane: "overlayPane", attribution: null, bubblingMouseEvents: !0 }, addTo: function (e) { return e.addLayer(this), this }, remove: function () { return this.removeFrom(this._map || this._mapToAdd) }, removeFrom: function (e) { return e && e.removeLayer(this), this }, getPane: function (e) { return this._map.getPane(e ? this.options[e] || e : this.options.pane) }, addInteractiveTarget: function (e) { return this._map._targets[stamp(e)] = this, this }, removeInteractiveTarget: function (e) { return delete this._map._targets[stamp(e)], this }, getAttribution: function () { return this.options.attribution }, _layerAdd: function (e) { var t = e.target; if (t.hasLayer(this)) { if (this._map = t, this._zoomAnimated = t._zoomAnimated, this.getEvents) { var n = this.getEvents(); t.on(n, this), this.once("remove", function () { t.off(n, this) }, this) } this.onAdd(t), this.getAttribution && t.attributionControl && t.attributionControl.addAttribution(this.getAttribution()), this.fire("add"), t.fire("layeradd", { layer: this }) } } }); Ae.include({ addLayer: function (e) { if (!e._layerAdd) throw new Error("The provided object is not a Layer."); var t = stamp(e); return this._layers[t] ? this : (this._layers[t] = e, e._mapToAdd = this, e.beforeAdd && e.beforeAdd(this), this.whenReady(e._layerAdd, e), this) }, removeLayer: function (e) { var t = stamp(e); return this._layers[t] ? (this._loaded && e.onRemove(this), e.getAttribution && this.attributionControl && this.attributionControl.removeAttribution(e.getAttribution()), delete this._layers[t], this._loaded && (this.fire("layerremove", { layer: e }), e.fire("remove")), e._map = e._mapToAdd = null, this) : this }, hasLayer: function (e) { return !!e && stamp(e) in this._layers }, eachLayer: function (e, t) { for (var n in this._layers) e.call(t, this._layers[n]); return this }, _addLayers: function (e) { for (var t = 0, n = (e = e ? a(e) ? e : [e] : []).length; t < n; t++)this.addLayer(e[t]) }, _addZoomLimit: function (e) { !isNaN(e.options.maxZoom) && isNaN(e.options.minZoom) || (this._zoomBoundLayers[stamp(e)] = e, this._updateZoomLevels()) }, _removeZoomLimit: function (e) { var t = stamp(e); this._zoomBoundLayers[t] && (delete this._zoomBoundLayers[t], this._updateZoomLevels()) }, _updateZoomLevels: function () { var e = 1 / 0, t = -1 / 0, n = this._getZoomSpan(); for (var r in this._zoomBoundLayers) { var i = this._zoomBoundLayers[r].options; e = void 0 === i.minZoom ? e : Math.min(e, i.minZoom), t = void 0 === i.maxZoom ? t : Math.max(t, i.maxZoom) } this._layersMaxZoom = t === -1 / 0 ? void 0 : t, this._layersMinZoom = e === 1 / 0 ? void 0 : e, n !== this._getZoomSpan() && this.fire("zoomlevelschange"), void 0 === this.options.maxZoom && this._layersMaxZoom && this.getZoom() > this._layersMaxZoom && this.setZoom(this._layersMaxZoom), void 0 === this.options.minZoom && this._layersMinZoom && this.getZoom() < this._layersMinZoom && this.setZoom(this._layersMinZoom) } }); var Qe = Je.extend({ initialize: function (e, t) { var n, r; if (setOptions(this, t), this._layers = {}, e) for (n = 0, r = e.length; n < r; n++)this.addLayer(e[n]) }, addLayer: function (e) { var t = this.getLayerId(e); return this._layers[t] = e, this._map && this._map.addLayer(e), this }, removeLayer: function (e) { var t = e in this._layers ? e : this.getLayerId(e); return this._map && this._layers[t] && this._map.removeLayer(this._layers[t]), delete this._layers[t], this }, hasLayer: function (e) { return !!e && (e in this._layers || this.getLayerId(e) in this._layers) }, clearLayers: function () { return this.eachLayer(this.removeLayer, this) }, invoke: function (e) { var t, n, r = Array.prototype.slice.call(arguments, 1); for (t in this._layers) (n = this._layers[t])[e] && n[e].apply(n, r); return this }, onAdd: function (e) { this.eachLayer(e.addLayer, e) }, onRemove: function (e) { this.eachLayer(e.removeLayer, e) }, eachLayer: function (e, t) { for (var n in this._layers) e.call(t, this._layers[n]); return this }, getLayer: function (e) { return this._layers[e] }, getLayers: function () { var e = []; return this.eachLayer(e.push, e), e }, setZIndex: function (e) { return this.invoke("setZIndex", e) }, getLayerId: function (e) { return stamp(e) } }), et = Qe.extend({ addLayer: function (e) { return this.hasLayer(e) ? this : (e.addEventParent(this), Qe.prototype.addLayer.call(this, e), this.fire("layeradd", { layer: e })) }, removeLayer: function (e) { return this.hasLayer(e) ? (e in this._layers && (e = this._layers[e]), e.removeEventParent(this), Qe.prototype.removeLayer.call(this, e), this.fire("layerremove", { layer: e })) : this }, setStyle: function (e) { return this.invoke("setStyle", e) }, bringToFront: function () { return this.invoke("bringToFront") }, bringToBack: function () { return this.invoke("bringToBack") }, getBounds: function () { var e = new LatLngBounds; for (var t in this._layers) { var n = this._layers[t]; e.extend(n.getBounds ? n.getBounds() : n.getLatLng()) } return e } }), tt = Class.extend({ options: { popupAnchor: [0, 0], tooltipAnchor: [0, 0] }, initialize: function (e) { setOptions(this, e) }, createIcon: function (e) { return this._createIcon("icon", e) }, createShadow: function (e) { return this._createIcon("shadow", e) }, _createIcon: function (e, t) { var n = this._getIconUrl(e); if (!n) { if ("icon" === e) throw new Error("iconUrl not set in Icon options (see the docs)."); return null } var r = this._createImg(n, t && "IMG" === t.tagName ? t : null); return this._setIconStyles(r, e), r }, _setIconStyles: function (e, t) { var n = this.options, r = n[t + "Size"]; "number" == typeof r && (r = [r, r]); var i = toPoint(r), o = toPoint("shadow" === t && n.shadowAnchor || n.iconAnchor || i && i.divideBy(2, !0)); e.className = "leaflet-marker-" + t + " " + (n.className || ""), o && (e.style.marginLeft = -o.x + "px", e.style.marginTop = -o.y + "px"), i && (e.style.width = i.x + "px", e.style.height = i.y + "px") }, _createImg: function (e, t) { return (t = t || document.createElement("img")).src = e, t }, _getIconUrl: function (e) { return J && this.options[e + "RetinaUrl"] || this.options[e + "Url"] } }), nt = tt.extend({ options: { iconUrl: "marker-icon.png", iconRetinaUrl: "marker-icon-2x.png", shadowUrl: "marker-shadow.png", iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], tooltipAnchor: [16, -28], shadowSize: [41, 41] }, _getIconUrl: function (e) { return nt.imagePath || (nt.imagePath = this._detectIconPath()), (this.options.imagePath || nt.imagePath) + tt.prototype._getIconUrl.call(this, e) }, _detectIconPath: function () { var e = create$1("div", "leaflet-default-icon-path", document.body), t = getStyle(e, "background-image") || getStyle(e, "backgroundImage"); return document.body.removeChild(e), t = null === t || 0 !== t.indexOf("url") ? "" : t.replace(/^url\(["']?/, "").replace(/marker-icon\.png["']?\)$/, "") } }), rt = Ne.extend({ initialize: function (e) { this._marker = e }, addHooks: function () { var e = this._marker._icon; this._draggable || (this._draggable = new qe(e, e, !0)), this._draggable.on({ dragstart: this._onDragStart, predrag: this._onPreDrag, drag: this._onDrag, dragend: this._onDragEnd }, this).enable(), addClass(e, "leaflet-marker-draggable") }, removeHooks: function () { this._draggable.off({ dragstart: this._onDragStart, predrag: this._onPreDrag, drag: this._onDrag, dragend: this._onDragEnd }, this).disable(), this._marker._icon && removeClass(this._marker._icon, "leaflet-marker-draggable") }, moved: function () { return this._draggable && this._draggable._moved }, _adjustPan: function (e) { var t = this._marker, n = t._map, r = this._marker.options.autoPanSpeed, i = this._marker.options.autoPanPadding, o = L.DomUtil.getPosition(t._icon), a = n.getPixelBounds(), s = n.getPixelOrigin(), l = toBounds(a.min._subtract(s).add(i), a.max._subtract(s).subtract(i)); if (!l.contains(o)) { var u = toPoint((Math.max(l.max.x, o.x) - l.max.x) / (a.max.x - l.max.x) - (Math.min(l.min.x, o.x) - l.min.x) / (a.min.x - l.min.x), (Math.max(l.max.y, o.y) - l.max.y) / (a.max.y - l.max.y) - (Math.min(l.min.y, o.y) - l.min.y) / (a.min.y - l.min.y)).multiplyBy(r); n.panBy(u, { animate: !1 }), this._draggable._newPos._add(u), this._draggable._startPos._add(u), L.DomUtil.setPosition(t._icon, this._draggable._newPos), this._onDrag(e), this._panRequest = requestAnimFrame(this._adjustPan.bind(this, e)) } }, _onDragStart: function () { this._oldLatLng = this._marker.getLatLng(), this._marker.closePopup().fire("movestart").fire("dragstart") }, _onPreDrag: function (e) { this._marker.options.autoPan && (cancelAnimFrame(this._panRequest), this._panRequest = requestAnimFrame(this._adjustPan.bind(this, e))) }, _onDrag: function (e) { var t = this._marker, n = t._shadow, r = getPosition(t._icon), i = t._map.layerPointToLatLng(r); n && setPosition(n, r), t._latlng = i, e.latlng = i, e.oldLatLng = this._oldLatLng, t.fire("move", e).fire("drag", e) }, _onDragEnd: function (e) { cancelAnimFrame(this._panRequest), delete this._oldLatLng, this._marker.fire("moveend").fire("dragend", e) } }), it = Je.extend({ options: { icon: new nt, interactive: !0, draggable: !1, autoPan: !1, autoPanPadding: [50, 50], autoPanSpeed: 10, keyboard: !0, title: "", alt: "", zIndexOffset: 0, opacity: 1, riseOnHover: !1, riseOffset: 250, pane: "markerPane", bubblingMouseEvents: !1 }, initialize: function (e, t) { setOptions(this, t), this._latlng = toLatLng(e) }, onAdd: function (e) { this._zoomAnimated = this._zoomAnimated && e.options.markerZoomAnimation, this._zoomAnimated && e.on("zoomanim", this._animateZoom, this), this._initIcon(), this.update() }, onRemove: function (e) { this.dragging && this.dragging.enabled() && (this.options.draggable = !0, this.dragging.removeHooks()), delete this.dragging, this._zoomAnimated && e.off("zoomanim", this._animateZoom, this), this._removeIcon(), this._removeShadow() }, getEvents: function () { return { zoom: this.update, viewreset: this.update } }, getLatLng: function () { return this._latlng }, setLatLng: function (e) { var t = this._latlng; return this._latlng = toLatLng(e), this.update(), this.fire("move", { oldLatLng: t, latlng: this._latlng }) }, setZIndexOffset: function (e) { return this.options.zIndexOffset = e, this.update() }, setIcon: function (e) { return this.options.icon = e, this._map && (this._initIcon(), this.update()), this._popup && this.bindPopup(this._popup, this._popup.options), this }, getElement: function () { return this._icon }, update: function () { if (this._icon && this._map) { var e = this._map.latLngToLayerPoint(this._latlng).round(); this._setPos(e) } return this }, _initIcon: function () { var e = this.options, t = "leaflet-zoom-" + (this._zoomAnimated ? "animated" : "hide"), n = e.icon.createIcon(this._icon), r = !1; n !== this._icon && (this._icon && this._removeIcon(), r = !0, e.title && (n.title = e.title), "IMG" === n.tagName && (n.alt = e.alt || "")), addClass(n, t), e.keyboard && (n.tabIndex = "0"), this._icon = n, e.riseOnHover && this.on({ mouseover: this._bringToFront, mouseout: this._resetZIndex }); var i = e.icon.createShadow(this._shadow), o = !1; i !== this._shadow && (this._removeShadow(), o = !0), i && (addClass(i, t), i.alt = ""), this._shadow = i, e.opacity < 1 && this._updateOpacity(), r && this.getPane().appendChild(this._icon), this._initInteraction(), i && o && this.getPane("shadowPane").appendChild(this._shadow) }, _removeIcon: function () { this.options.riseOnHover && this.off({ mouseover: this._bringToFront, mouseout: this._resetZIndex }), remove(this._icon), this.removeInteractiveTarget(this._icon), this._icon = null }, _removeShadow: function () { this._shadow && remove(this._shadow), this._shadow = null }, _setPos: function (e) { setPosition(this._icon, e), this._shadow && setPosition(this._shadow, e), this._zIndex = e.y + this.options.zIndexOffset, this._resetZIndex() }, _updateZIndex: function (e) { this._icon.style.zIndex = this._zIndex + e }, _animateZoom: function (e) { var t = this._map._latLngToNewLayerPoint(this._latlng, e.zoom, e.center).round(); this._setPos(t) }, _initInteraction: function () { if (this.options.interactive && (addClass(this._icon, "leaflet-interactive"), this.addInteractiveTarget(this._icon), rt)) { var e = this.options.draggable; this.dragging && (e = this.dragging.enabled(), this.dragging.disable()), this.dragging = new rt(this), e && this.dragging.enable() } }, setOpacity: function (e) { return this.options.opacity = e, this._map && this._updateOpacity(), this }, _updateOpacity: function () { var e = this.options.opacity; setOpacity(this._icon, e), this._shadow && setOpacity(this._shadow, e) }, _bringToFront: function () { this._updateZIndex(this.options.riseOffset) }, _resetZIndex: function () { this._updateZIndex(0) }, _getPopupAnchor: function () { return this.options.icon.options.popupAnchor }, _getTooltipAnchor: function () { return this.options.icon.options.tooltipAnchor } }), ot = Je.extend({ options: { stroke: !0, color: "#3388ff", weight: 3, opacity: 1, lineCap: "round", lineJoin: "round", dashArray: null, dashOffset: null, fill: !1, fillColor: null, fillOpacity: .2, fillRule: "evenodd", interactive: !0, bubblingMouseEvents: !0 }, beforeAdd: function (e) { this._renderer = e.getRenderer(this) }, onAdd: function () { this._renderer._initPath(this), this._reset(), this._renderer._addPath(this) }, onRemove: function () { this._renderer._removePath(this) }, redraw: function () { return this._map && this._renderer._updatePath(this), this }, setStyle: function (e) { return setOptions(this, e), this._renderer && this._renderer._updateStyle(this), this }, bringToFront: function () { return this._renderer && this._renderer._bringToFront(this), this }, bringToBack: function () { return this._renderer && this._renderer._bringToBack(this), this }, getElement: function () { return this._path }, _reset: function () { this._project(), this._update() }, _clickTolerance: function () { return (this.options.stroke ? this.options.weight / 2 : 0) + this._renderer.options.tolerance } }), at = ot.extend({ options: { fill: !0, radius: 10 }, initialize: function (e, t) { setOptions(this, t), this._latlng = toLatLng(e), this._radius = this.options.radius }, setLatLng: function (e) { return this._latlng = toLatLng(e), this.redraw(), this.fire("move", { latlng: this._latlng }) }, getLatLng: function () { return this._latlng }, setRadius: function (e) { return this.options.radius = this._radius = e, this.redraw() }, getRadius: function () { return this._radius }, setStyle: function (e) { var t = e && e.radius || this._radius; return ot.prototype.setStyle.call(this, e), this.setRadius(t), this }, _project: function () { this._point = this._map.latLngToLayerPoint(this._latlng), this._updateBounds() }, _updateBounds: function () { var e = this._radius, t = this._radiusY || e, n = this._clickTolerance(), r = [e + n, t + n]; this._pxBounds = new Bounds(this._point.subtract(r), this._point.add(r)) }, _update: function () { this._map && this._updatePath() }, _updatePath: function () { this._renderer._updateCircle(this) }, _empty: function () { return this._radius && !this._renderer._bounds.intersects(this._pxBounds) }, _containsPoint: function (e) { return e.distanceTo(this._point) <= this._radius + this._clickTolerance() } }), st = at.extend({ initialize: function (e, t, n) { if ("number" == typeof t && (t = extend({}, n, { radius: t })), setOptions(this, t), this._latlng = toLatLng(e), isNaN(this.options.radius)) throw new Error("Circle radius cannot be NaN"); this._mRadius = this.options.radius }, setRadius: function (e) { return this._mRadius = e, this.redraw() }, getRadius: function () { return this._mRadius }, getBounds: function () { var e = [this._radius, this._radiusY || this._radius]; return new LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(e)), this._map.layerPointToLatLng(this._point.add(e))) }, setStyle: ot.prototype.setStyle, _project: function () { var e = this._latlng.lng, t = this._latlng.lat, n = this._map, r = n.options.crs; if (r.distance === y.distance) { var i = Math.PI / 180, o = this._mRadius / y.R / i, a = n.project([t + o, e]), s = n.project([t - o, e]), l = a.add(s).divideBy(2), u = n.unproject(l).lat, c = Math.acos((Math.cos(o * i) - Math.sin(t * i) * Math.sin(u * i)) / (Math.cos(t * i) * Math.cos(u * i))) / i; (isNaN(c) || 0 === c) && (c = o / Math.cos(Math.PI / 180 * t)), this._point = l.subtract(n.getPixelOrigin()), this._radius = isNaN(c) ? 0 : l.x - n.project([u, e - c]).x, this._radiusY = l.y - a.y } else { var d = r.unproject(r.project(this._latlng).subtract([this._mRadius, 0])); this._point = n.latLngToLayerPoint(this._latlng), this._radius = this._point.x - n.latLngToLayerPoint(d).x } this._updateBounds() } }), lt = ot.extend({ options: { smoothFactor: 1, noClip: !1 }, initialize: function (e, t) { setOptions(this, t), this._setLatLngs(e) }, getLatLngs: function () { return this._latlngs }, setLatLngs: function (e) { return this._setLatLngs(e), this.redraw() }, isEmpty: function () { return !this._latlngs.length }, closestLayerPoint: function (e) { for (var t, n, r = 1 / 0, i = null, o = _sqClosestPointOnSegment, a = 0, s = this._parts.length; a < s; a++)for (var l = this._parts[a], u = 1, c = l.length; u < c; u++) { t = l[u - 1], n = l[u]; var d = o(e, t, n, !0); d < r && (r = d, i = o(e, t, n)) } return i && (i.distance = Math.sqrt(r)), i }, getCenter: function () { if (!this._map) throw new Error("Must add layer to map before using getCenter()"); var e, t, n, r, i, o, a, s = this._rings[0], l = s.length; if (!l) return null; for (e = 0, t = 0; e < l - 1; e++)t += s[e].distanceTo(s[e + 1]) / 2; if (0 === t) return this._map.layerPointToLatLng(s[0]); for (e = 0, r = 0; e < l - 1; e++)if (i = s[e], o = s[e + 1], n = i.distanceTo(o), (r += n) > t) return a = (r - t) / n, this._map.layerPointToLatLng([o.x - a * (o.x - i.x), o.y - a * (o.y - i.y)]) }, getBounds: function () { return this._bounds }, addLatLng: function (e, t) { return t = t || this._defaultShape(), e = toLatLng(e), t.push(e), this._bounds.extend(e), this.redraw() }, _setLatLngs: function (e) { this._bounds = new LatLngBounds, this._latlngs = this._convertLatLngs(e) }, _defaultShape: function () { return isFlat(this._latlngs) ? this._latlngs : this._latlngs[0] }, _convertLatLngs: function (e) { for (var t = [], n = isFlat(e), r = 0, i = e.length; r < i; r++)n ? (t[r] = toLatLng(e[r]), this._bounds.extend(t[r])) : t[r] = this._convertLatLngs(e[r]); return t }, _project: function () { var e = new Bounds; this._rings = [], this._projectLatlngs(this._latlngs, this._rings, e); var t = this._clickTolerance(), n = new Point(t, t); this._bounds.isValid() && e.isValid() && (e.min._subtract(n), e.max._add(n), this._pxBounds = e) }, _projectLatlngs: function (e, t, n) { var r, i, o = e[0] instanceof LatLng, a = e.length; if (o) { for (i = [], r = 0; r < a; r++)i[r] = this._map.latLngToLayerPoint(e[r]), n.extend(i[r]); t.push(i) } else for (r = 0; r < a; r++)this._projectLatlngs(e[r], t, n) }, _clipPoints: function () { var e = this._renderer._bounds; if (this._parts = [], this._pxBounds && this._pxBounds.intersects(e)) if (this.options.noClip) this._parts = this._rings; else { var t, n, r, i, o, a, s, l = this._parts; for (t = 0, r = 0, i = this._rings.length; t < i; t++)for (s = this._rings[t], n = 0, o = s.length; n < o - 1; n++)(a = clipSegment(s[n], s[n + 1], e, n, !0)) && (l[r] = l[r] || [], l[r].push(a[0]), a[1] === s[n + 1] && n !== o - 2 || (l[r].push(a[1]), r++)) } }, _simplifyPoints: function () { for (var e = this._parts, t = this.options.smoothFactor, n = 0, r = e.length; n < r; n++)e[n] = simplify(e[n], t) }, _update: function () { this._map && (this._clipPoints(), this._simplifyPoints(), this._updatePath()) }, _updatePath: function () { this._renderer._updatePoly(this) }, _containsPoint: function (e, t) { var n, r, i, o, a, s, l = this._clickTolerance(); if (!this._pxBounds || !this._pxBounds.contains(e)) return !1; for (n = 0, o = this._parts.length; n < o; n++)for (s = this._parts[n], r = 0, a = s.length, i = a - 1; r < a; i = r++)if ((t || 0 !== r) && pointToSegmentDistance(e, s[i], s[r]) <= l) return !0; return !1 } }); lt._flat = _flat; var ut = lt.extend({ options: { fill: !0 }, isEmpty: function () { return !this._latlngs.length || !this._latlngs[0].length }, getCenter: function () { if (!this._map) throw new Error("Must add layer to map before using getCenter()"); var e, t, n, r, i, o, a, s, l, u = this._rings[0], c = u.length; if (!c) return null; for (o = a = s = 0, e = 0, t = c - 1; e < c; t = e++)n = u[e], r = u[t], i = n.y * r.x - r.y * n.x, a += (n.x + r.x) * i, s += (n.y + r.y) * i, o += 3 * i; return l = 0 === o ? u[0] : [a / o, s / o], this._map.layerPointToLatLng(l) }, _convertLatLngs: function (e) { var t = lt.prototype._convertLatLngs.call(this, e), n = t.length; return n >= 2 && t[0] instanceof LatLng && t[0].equals(t[n - 1]) && t.pop(), t }, _setLatLngs: function (e) { lt.prototype._setLatLngs.call(this, e), isFlat(this._latlngs) && (this._latlngs = [this._latlngs]) }, _defaultShape: function () { return isFlat(this._latlngs[0]) ? this._latlngs[0] : this._latlngs[0][0] }, _clipPoints: function () { var e = this._renderer._bounds, t = this.options.weight, n = new Point(t, t); if (e = new Bounds(e.min.subtract(n), e.max.add(n)), this._parts = [], this._pxBounds && this._pxBounds.intersects(e)) if (this.options.noClip) this._parts = this._rings; else for (var r, i = 0, o = this._rings.length; i < o; i++)(r = clipPolygon(this._rings[i], e, !0)).length && this._parts.push(r) }, _updatePath: function () { this._renderer._updatePoly(this, !0) }, _containsPoint: function (e) { var t, n, r, i, o, a, s, l, u = !1; if (!this._pxBounds.contains(e)) return !1; for (i = 0, s = this._parts.length; i < s; i++)for (t = this._parts[i], o = 0, l = t.length, a = l - 1; o < l; a = o++)n = t[o], r = t[a], n.y > e.y != r.y > e.y && e.x < (r.x - n.x) * (e.y - n.y) / (r.y - n.y) + n.x && (u = !u); return u || lt.prototype._containsPoint.call(this, e, !0) } }), ct = et.extend({ initialize: function (e, t) { setOptions(this, t), this._layers = {}, e && this.addData(e) }, addData: function (e) { var t, n, r, i = a(e) ? e : e.features; if (i) { for (t = 0, n = i.length; t < n; t++)((r = i[t]).geometries || r.geometry || r.features || r.coordinates) && this.addData(r); return this } var o = this.options; if (o.filter && !o.filter(e)) return this; var s = geometryToLayer(e, o); return s ? (s.feature = asFeature(e), s.defaultOptions = s.options, this.resetStyle(s), o.onEachFeature && o.onEachFeature(e, s), this.addLayer(s)) : this }, resetStyle: function (e) { return e.options = extend({}, e.defaultOptions), this._setLayerStyle(e, this.options.style), this }, setStyle: function (e) { return this.eachLayer(function (t) { this._setLayerStyle(t, e) }, this) }, _setLayerStyle: function (e, t) { "function" == typeof t && (t = t(e.feature)), e.setStyle && e.setStyle(t) } }); function geometryToLayer(e, t) { var n, r, i, o, a = "Feature" === e.type ? e.geometry : e, s = a ? a.coordinates : null, l = [], u = t && t.pointToLayer, c = t && t.coordsToLatLng || coordsToLatLng; if (!s && !a) return null; switch (a.type) { case "Point": return n = c(s), u ? u(e, n) : new it(n); case "MultiPoint": for (i = 0, o = s.length; i < o; i++)n = c(s[i]), l.push(u ? u(e, n) : new it(n)); return new et(l); case "LineString": case "MultiLineString": return r = coordsToLatLngs(s, "LineString" === a.type ? 0 : 1, c), new lt(r, t); case "Polygon": case "MultiPolygon": return r = coordsToLatLngs(s, "Polygon" === a.type ? 1 : 2, c), new ut(r, t); case "GeometryCollection": for (i = 0, o = a.geometries.length; i < o; i++) { var d = geometryToLayer({ geometry: a.geometries[i], type: "Feature", properties: e.properties }, t); d && l.push(d) } return new et(l); default: throw new Error("Invalid GeoJSON object.") } } function coordsToLatLng(e) { return new LatLng(e[1], e[0], e[2]) } function coordsToLatLngs(e, t, n) { for (var r, i = [], o = 0, a = e.length; o < a; o++)r = t ? coordsToLatLngs(e[o], t - 1, n) : (n || coordsToLatLng)(e[o]), i.push(r); return i } function latLngToCoords(e, t) { return t = "number" == typeof t ? t : 6, void 0 !== e.alt ? [formatNum(e.lng, t), formatNum(e.lat, t), formatNum(e.alt, t)] : [formatNum(e.lng, t), formatNum(e.lat, t)] } function latLngsToCoords(e, t, n, r) { for (var i = [], o = 0, a = e.length; o < a; o++)i.push(t ? latLngsToCoords(e[o], t - 1, n, r) : latLngToCoords(e[o], r)); return !t && n && i.push(i[0]), i } function getFeature(e, t) { return e.feature ? extend({}, e.feature, { geometry: t }) : asFeature(t) } function asFeature(e) { return "Feature" === e.type || "FeatureCollection" === e.type ? e : { type: "Feature", properties: {}, geometry: e } } var dt = { toGeoJSON: function (e) { return getFeature(this, { type: "Point", coordinates: latLngToCoords(this.getLatLng(), e) }) } }; function geoJSON(e, t) { return new ct(e, t) } it.include(dt), st.include(dt), at.include(dt), lt.include({ toGeoJSON: function (e) { var t = !isFlat(this._latlngs), n = latLngsToCoords(this._latlngs, t ? 1 : 0, !1, e); return getFeature(this, { type: (t ? "Multi" : "") + "LineString", coordinates: n }) } }), ut.include({ toGeoJSON: function (e) { var t = !isFlat(this._latlngs), n = t && !isFlat(this._latlngs[0]), r = latLngsToCoords(this._latlngs, n ? 2 : t ? 1 : 0, !0, e); return t || (r = [r]), getFeature(this, { type: (n ? "Multi" : "") + "Polygon", coordinates: r }) } }), Qe.include({ toMultiPoint: function (e) { var t = []; return this.eachLayer(function (n) { t.push(n.toGeoJSON(e).geometry.coordinates) }), getFeature(this, { type: "MultiPoint", coordinates: t }) }, toGeoJSON: function (e) { var t = this.feature && this.feature.geometry && this.feature.geometry.type; if ("MultiPoint" === t) return this.toMultiPoint(e); var n = "GeometryCollection" === t, r = []; return this.eachLayer(function (t) { if (t.toGeoJSON) { var i = t.toGeoJSON(e); if (n) r.push(i.geometry); else { var o = asFeature(i); "FeatureCollection" === o.type ? r.push.apply(r, o.features) : r.push(o) } } }), n ? getFeature(this, { geometries: r, type: "GeometryCollection" }) : { type: "FeatureCollection", features: r } } }); var ft = geoJSON, ht = Je.extend({ options: { opacity: 1, alt: "", interactive: !1, crossOrigin: !1, errorOverlayUrl: "", zIndex: 1, className: "" }, initialize: function (e, t, n) { this._url = e, this._bounds = toLatLngBounds(t), setOptions(this, n) }, onAdd: function () { this._image || (this._initImage(), this.options.opacity < 1 && this._updateOpacity()), this.options.interactive && (addClass(this._image, "leaflet-interactive"), this.addInteractiveTarget(this._image)), this.getPane().appendChild(this._image), this._reset() }, onRemove: function () { remove(this._image), this.options.interactive && this.removeInteractiveTarget(this._image) }, setOpacity: function (e) { return this.options.opacity = e, this._image && this._updateOpacity(), this }, setStyle: function (e) { return e.opacity && this.setOpacity(e.opacity), this }, bringToFront: function () { return this._map && toFront(this._image), this }, bringToBack: function () { return this._map && toBack(this._image), this }, setUrl: function (e) { return this._url = e, this._image && (this._image.src = e), this }, setBounds: function (e) { return this._bounds = toLatLngBounds(e), this._map && this._reset(), this }, getEvents: function () { var e = { zoom: this._reset, viewreset: this._reset }; return this._zoomAnimated && (e.zoomanim = this._animateZoom), e }, setZIndex: function (e) { return this.options.zIndex = e, this._updateZIndex(), this }, getBounds: function () { return this._bounds }, getElement: function () { return this._image }, _initImage: function () { var e = "IMG" === this._url.tagName, t = this._image = e ? this._url : create$1("img"); addClass(t, "leaflet-image-layer"), this._zoomAnimated && addClass(t, "leaflet-zoom-animated"), this.options.className && addClass(t, this.options.className), t.onselectstart = falseFn, t.onmousemove = falseFn, t.onload = bind(this.fire, this, "load"), t.onerror = bind(this._overlayOnError, this, "error"), this.options.crossOrigin && (t.crossOrigin = ""), this.options.zIndex && this._updateZIndex(), e ? this._url = t.src : (t.src = this._url, t.alt = this.options.alt) }, _animateZoom: function (e) { var t = this._map.getZoomScale(e.zoom), n = this._map._latLngBoundsToNewLayerBounds(this._bounds, e.zoom, e.center).min; setTransform(this._image, n, t) }, _reset: function () { var e = this._image, t = new Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()), this._map.latLngToLayerPoint(this._bounds.getSouthEast())), n = t.getSize(); setPosition(e, t.min), e.style.width = n.x + "px", e.style.height = n.y + "px" }, _updateOpacity: function () { setOpacity(this._image, this.options.opacity) }, _updateZIndex: function () { this._image && void 0 !== this.options.zIndex && null !== this.options.zIndex && (this._image.style.zIndex = this.options.zIndex) }, _overlayOnError: function () { this.fire("error"); var e = this.options.errorOverlayUrl; e && this._url !== e && (this._url = e, this._image.src = e) } }), pt = ht.extend({ options: { autoplay: !0, loop: !0 }, _initImage: function () { var e = "VIDEO" === this._url.tagName, t = this._image = e ? this._url : create$1("video"); if (addClass(t, "leaflet-image-layer"), this._zoomAnimated && addClass(t, "leaflet-zoom-animated"), t.onselectstart = falseFn, t.onmousemove = falseFn, t.onloadeddata = bind(this.fire, this, "load"), e) { for (var n = t.getElementsByTagName("source"), r = [], i = 0; i < n.length; i++)r.push(n[i].src); this._url = n.length > 0 ? r : [t.src] } else { a(this._url) || (this._url = [this._url]), t.autoplay = !!this.options.autoplay, t.loop = !!this.options.loop; for (var o = 0; o < this._url.length; o++) { var s = create$1("source"); s.src = this._url[o], t.appendChild(s) } } } }), mt = Je.extend({ options: { offset: [0, 7], className: "", pane: "popupPane" }, initialize: function (e, t) { setOptions(this, e), this._source = t }, onAdd: function (e) { this._zoomAnimated = e._zoomAnimated, this._container || this._initLayout(), e._fadeAnimated && setOpacity(this._container, 0), clearTimeout(this._removeTimeout), this.getPane().appendChild(this._container), this.update(), e._fadeAnimated && setOpacity(this._container, 1), this.bringToFront() }, onRemove: function (e) { e._fadeAnimated ? (setOpacity(this._container, 0), this._removeTimeout = setTimeout(bind(remove, void 0, this._container), 200)) : remove(this._container) }, getLatLng: function () { return this._latlng }, setLatLng: function (e) { return this._latlng = toLatLng(e), this._map && (this._updatePosition(), this._adjustPan()), this }, getContent: function () { return this._content }, setContent: function (e) { return this._content = e, this.update(), this }, getElement: function () { return this._container }, update: function () { this._map && (this._container.style.visibility = "hidden", this._updateContent(), this._updateLayout(), this._updatePosition(), this._container.style.visibility = "", this._adjustPan()) }, getEvents: function () { var e = { zoom: this._updatePosition, viewreset: this._updatePosition }; return this._zoomAnimated && (e.zoomanim = this._animateZoom), e }, isOpen: function () { return !!this._map && this._map.hasLayer(this) }, bringToFront: function () { return this._map && toFront(this._container), this }, bringToBack: function () { return this._map && toBack(this._container), this }, _updateContent: function () { if (this._content) { var e = this._contentNode, t = "function" == typeof this._content ? this._content(this._source || this) : this._content; if ("string" == typeof t) e.innerHTML = t; else { for (; e.hasChildNodes();)e.removeChild(e.firstChild); e.appendChild(t) } this.fire("contentupdate") } }, _updatePosition: function () { if (this._map) { var e = this._map.latLngToLayerPoint(this._latlng), t = toPoint(this.options.offset), n = this._getAnchor(); this._zoomAnimated ? setPosition(this._container, e.add(n)) : t = t.add(e).add(n); var r = this._containerBottom = -t.y, i = this._containerLeft = -Math.round(this._containerWidth / 2) + t.x; this._container.style.bottom = r + "px", this._container.style.left = i + "px" } }, _getAnchor: function () { return [0, 0] } }), gt = mt.extend({ options: { maxWidth: 300, minWidth: 50, maxHeight: null, autoPan: !0, autoPanPaddingTopLeft: null, autoPanPaddingBottomRight: null, autoPanPadding: [5, 5], keepInView: !1, closeButton: !0, autoClose: !0, closeOnEscapeKey: !0, className: "" }, openOn: function (e) { return e.openPopup(this), this }, onAdd: function (e) { mt.prototype.onAdd.call(this, e), e.fire("popupopen", { popup: this }), this._source && (this._source.fire("popupopen", { popup: this }, !0), this._source instanceof ot || this._source.on("preclick", stopPropagation)) }, onRemove: function (e) { mt.prototype.onRemove.call(this, e), e.fire("popupclose", { popup: this }), this._source && (this._source.fire("popupclose", { popup: this }, !0), this._source instanceof ot || this._source.off("preclick", stopPropagation)) }, getEvents: function () { var e = mt.prototype.getEvents.call(this); return (void 0 !== this.options.closeOnClick ? this.options.closeOnClick : this._map.options.closePopupOnClick) && (e.preclick = this._close), this.options.keepInView && (e.moveend = this._adjustPan), e }, _close: function () { this._map && this._map.closePopup(this) }, _initLayout: function () { var e = "leaflet-popup", t = this._container = create$1("div", e + " " + (this.options.className || "") + " leaflet-zoom-animated"), n = this._wrapper = create$1("div", e + "-content-wrapper", t); if (this._contentNode = create$1("div", e + "-content", n), disableClickPropagation(n), disableScrollPropagation(this._contentNode), on(n, "contextmenu", stopPropagation), this._tipContainer = create$1("div", e + "-tip-container", t), this._tip = create$1("div", e + "-tip", this._tipContainer), this.options.closeButton) { var r = this._closeButton = create$1("a", e + "-close-button", t); r.href = "#close", r.innerHTML = "&#215;", on(r, "click", this._onCloseButtonClick, this) } }, _updateLayout: function () { var e = this._contentNode, t = e.style; t.width = "", t.whiteSpace = "nowrap"; var n = e.offsetWidth; n = Math.min(n, this.options.maxWidth), n = Math.max(n, this.options.minWidth), t.width = n + 1 + "px", t.whiteSpace = "", t.height = ""; var r = e.offsetHeight, i = this.options.maxHeight; i && r > i ? (t.height = i + "px", addClass(e, "leaflet-popup-scrolled")) : removeClass(e, "leaflet-popup-scrolled"), this._containerWidth = this._container.offsetWidth }, _animateZoom: function (e) { var t = this._map._latLngToNewLayerPoint(this._latlng, e.zoom, e.center), n = this._getAnchor(); setPosition(this._container, t.add(n)) }, _adjustPan: function () { if (!(!this.options.autoPan || this._map._panAnim && this._map._panAnim._inProgress)) { var e = this._map, t = parseInt(getStyle(this._container, "marginBottom"), 10) || 0, n = this._container.offsetHeight + t, r = this._containerWidth, i = new Point(this._containerLeft, -n - this._containerBottom); i._add(getPosition(this._container)); var o = e.layerPointToContainerPoint(i), a = toPoint(this.options.autoPanPadding), s = toPoint(this.options.autoPanPaddingTopLeft || a), l = toPoint(this.options.autoPanPaddingBottomRight || a), u = e.getSize(), c = 0, d = 0; o.x + r + l.x > u.x && (c = o.x + r - u.x + l.x), o.x - c - s.x < 0 && (c = o.x - s.x), o.y + n + l.y > u.y && (d = o.y + n - u.y + l.y), o.y - d - s.y < 0 && (d = o.y - s.y), (c || d) && e.fire("autopanstart").panBy([c, d]) } }, _onCloseButtonClick: function (e) { this._close(), stop(e) }, _getAnchor: function () { return toPoint(this._source && this._source._getPopupAnchor ? this._source._getPopupAnchor() : [0, 0]) } }); Ae.mergeOptions({ closePopupOnClick: !0 }), Ae.include({ openPopup: function (e, t, n) { return e instanceof gt || (e = new gt(n).setContent(e)), t && e.setLatLng(t), this.hasLayer(e) ? this : (this._popup && this._popup.options.autoClose && this.closePopup(), this._popup = e, this.addLayer(e)) }, closePopup: function (e) { return e && e !== this._popup || (e = this._popup, this._popup = null), e && this.removeLayer(e), this } }), Je.include({ bindPopup: function (e, t) { return e instanceof gt ? (setOptions(e, t), this._popup = e, e._source = this) : (this._popup && !t || (this._popup = new gt(t, this)), this._popup.setContent(e)), this._popupHandlersAdded || (this.on({ click: this._openPopup, keypress: this._onKeyPress, remove: this.closePopup, move: this._movePopup }), this._popupHandlersAdded = !0), this }, unbindPopup: function () { return this._popup && (this.off({ click: this._openPopup, keypress: this._onKeyPress, remove: this.closePopup, move: this._movePopup }), this._popupHandlersAdded = !1, this._popup = null), this }, openPopup: function (e, t) { if (e instanceof Je || (t = e, e = this), e instanceof et) for (var n in this._layers) { e = this._layers[n]; break } return t || (t = e.getCenter ? e.getCenter() : e.getLatLng()), this._popup && this._map && (this._popup._source = e, this._popup.update(), this._map.openPopup(this._popup, t)), this }, closePopup: function () { return this._popup && this._popup._close(), this }, togglePopup: function (e) { return this._popup && (this._popup._map ? this.closePopup() : this.openPopup(e)), this }, isPopupOpen: function () { return !!this._popup && this._popup.isOpen() }, setPopupContent: function (e) { return this._popup && this._popup.setContent(e), this }, getPopup: function () { return this._popup }, _openPopup: function (e) { var t = e.layer || e.target; this._popup && this._map && (stop(e), t instanceof ot ? this.openPopup(e.layer || e.target, e.latlng) : this._map.hasLayer(this._popup) && this._popup._source === t ? this.closePopup() : this.openPopup(t, e.latlng)) }, _movePopup: function (e) { this._popup.setLatLng(e.latlng) }, _onKeyPress: function (e) { 13 === e.originalEvent.keyCode && this._openPopup(e) } }); var vt = mt.extend({ options: { pane: "tooltipPane", offset: [0, 0], direction: "auto", permanent: !1, sticky: !1, interactive: !1, opacity: .9 }, onAdd: function (e) { mt.prototype.onAdd.call(this, e), this.setOpacity(this.options.opacity), e.fire("tooltipopen", { tooltip: this }), this._source && this._source.fire("tooltipopen", { tooltip: this }, !0) }, onRemove: function (e) { mt.prototype.onRemove.call(this, e), e.fire("tooltipclose", { tooltip: this }), this._source && this._source.fire("tooltipclose", { tooltip: this }, !0) }, getEvents: function () { var e = mt.prototype.getEvents.call(this); return Z && !this.options.permanent && (e.preclick = this._close), e }, _close: function () { this._map && this._map.closeTooltip(this) }, _initLayout: function () { var e = "leaflet-tooltip " + (this.options.className || "") + " leaflet-zoom-" + (this._zoomAnimated ? "animated" : "hide"); this._contentNode = this._container = create$1("div", e) }, _updateLayout: function () { }, _adjustPan: function () { }, _setPosition: function (e) { var t = this._map, n = this._container, r = t.latLngToContainerPoint(t.getCenter()), i = t.layerPointToContainerPoint(e), o = this.options.direction, a = n.offsetWidth, s = n.offsetHeight, l = toPoint(this.options.offset), u = this._getAnchor(); "top" === o ? e = e.add(toPoint(-a / 2 + l.x, -s + l.y + u.y, !0)) : "bottom" === o ? e = e.subtract(toPoint(a / 2 - l.x, -l.y, !0)) : "center" === o ? e = e.subtract(toPoint(a / 2 + l.x, s / 2 - u.y + l.y, !0)) : "right" === o || "auto" === o && i.x < r.x ? (o = "right", e = e.add(toPoint(l.x + u.x, u.y - s / 2 + l.y, !0))) : (o = "left", e = e.subtract(toPoint(a + u.x - l.x, s / 2 - u.y - l.y, !0))), removeClass(n, "leaflet-tooltip-right"), removeClass(n, "leaflet-tooltip-left"), removeClass(n, "leaflet-tooltip-top"), removeClass(n, "leaflet-tooltip-bottom"), addClass(n, "leaflet-tooltip-" + o), setPosition(n, e) }, _updatePosition: function () { var e = this._map.latLngToLayerPoint(this._latlng); this._setPosition(e) }, setOpacity: function (e) { this.options.opacity = e, this._container && setOpacity(this._container, e) }, _animateZoom: function (e) { var t = this._map._latLngToNewLayerPoint(this._latlng, e.zoom, e.center); this._setPosition(t) }, _getAnchor: function () { return toPoint(this._source && this._source._getTooltipAnchor && !this.options.sticky ? this._source._getTooltipAnchor() : [0, 0]) } }); Ae.include({ openTooltip: function (e, t, n) { return e instanceof vt || (e = new vt(n).setContent(e)), t && e.setLatLng(t), this.hasLayer(e) ? this : this.addLayer(e) }, closeTooltip: function (e) { return e && this.removeLayer(e), this } }), Je.include({ bindTooltip: function (e, t) { return e instanceof vt ? (setOptions(e, t), this._tooltip = e, e._source = this) : (this._tooltip && !t || (this._tooltip = new vt(t, this)), this._tooltip.setContent(e)), this._initTooltipInteractions(), this._tooltip.options.permanent && this._map && this._map.hasLayer(this) && this.openTooltip(), this }, unbindTooltip: function () { return this._tooltip && (this._initTooltipInteractions(!0), this.closeTooltip(), this._tooltip = null), this }, _initTooltipInteractions: function (e) { if (e || !this._tooltipHandlersAdded) { var t = e ? "off" : "on", n = { remove: this.closeTooltip, move: this._moveTooltip }; this._tooltip.options.permanent ? n.add = this._openTooltip : (n.mouseover = this._openTooltip, n.mouseout = this.closeTooltip, this._tooltip.options.sticky && (n.mousemove = this._moveTooltip), Z && (n.click = this._openTooltip)), this[t](n), this._tooltipHandlersAdded = !e } }, openTooltip: function (e, t) { if (e instanceof Je || (t = e, e = this), e instanceof et) for (var n in this._layers) { e = this._layers[n]; break } return t || (t = e.getCenter ? e.getCenter() : e.getLatLng()), this._tooltip && this._map && (this._tooltip._source = e, this._tooltip.update(), this._map.openTooltip(this._tooltip, t), this._tooltip.options.interactive && this._tooltip._container && (addClass(this._tooltip._container, "leaflet-clickable"), this.addInteractiveTarget(this._tooltip._container))), this }, closeTooltip: function () { return this._tooltip && (this._tooltip._close(), this._tooltip.options.interactive && this._tooltip._container && (removeClass(this._tooltip._container, "leaflet-clickable"), this.removeInteractiveTarget(this._tooltip._container))), this }, toggleTooltip: function (e) { return this._tooltip && (this._tooltip._map ? this.closeTooltip() : this.openTooltip(e)), this }, isTooltipOpen: function () { return this._tooltip.isOpen() }, setTooltipContent: function (e) { return this._tooltip && this._tooltip.setContent(e), this }, getTooltip: function () { return this._tooltip }, _openTooltip: function (e) { var t = e.layer || e.target; this._tooltip && this._map && this.openTooltip(t, this._tooltip.options.sticky ? e.latlng : void 0) }, _moveTooltip: function (e) { var t, n, r = e.latlng; this._tooltip.options.sticky && e.originalEvent && (t = this._map.mouseEventToContainerPoint(e.originalEvent), n = this._map.containerPointToLayerPoint(t), r = this._map.layerPointToLatLng(n)), this._tooltip.setLatLng(r) } }); var yt = tt.extend({ options: { iconSize: [12, 12], html: !1, bgPos: null, className: "leaflet-div-icon" }, createIcon: function (e) { var t = e && "DIV" === e.tagName ? e : document.createElement("div"), n = this.options; if (t.innerHTML = !1 !== n.html ? n.html : "", n.bgPos) { var r = toPoint(n.bgPos); t.style.backgroundPosition = -r.x + "px " + -r.y + "px" } return this._setIconStyles(t, "icon"), t }, createShadow: function () { return null } }); tt.Default = nt; var _t = Je.extend({ options: { tileSize: 256, opacity: 1, updateWhenIdle: H, updateWhenZooming: !0, updateInterval: 200, zIndex: 1, bounds: null, minZoom: 0, maxZoom: void 0, maxNativeZoom: void 0, minNativeZoom: void 0, noWrap: !1, pane: "tilePane", className: "", keepBuffer: 2 }, initialize: function (e) { setOptions(this, e) }, onAdd: function () { this._initContainer(), this._levels = {}, this._tiles = {}, this._resetView(), this._update() }, beforeAdd: function (e) { e._addZoomLimit(this) }, onRemove: function (e) { this._removeAllTiles(), remove(this._container), e._removeZoomLimit(this), this._container = null, this._tileZoom = void 0 }, bringToFront: function () { return this._map && (toFront(this._container), this._setAutoZIndex(Math.max)), this }, bringToBack: function () { return this._map && (toBack(this._container), this._setAutoZIndex(Math.min)), this }, getContainer: function () { return this._container }, setOpacity: function (e) { return this.options.opacity = e, this._updateOpacity(), this }, setZIndex: function (e) { return this.options.zIndex = e, this._updateZIndex(), this }, isLoading: function () { return this._loading }, redraw: function () { return this._map && (this._removeAllTiles(), this._update()), this }, getEvents: function () { var e = { viewprereset: this._invalidateAll, viewreset: this._resetView, zoom: this._resetView, moveend: this._onMoveEnd }; return this.options.updateWhenIdle || (this._onMove || (this._onMove = throttle(this._onMoveEnd, this.options.updateInterval, this)), e.move = this._onMove), this._zoomAnimated && (e.zoomanim = this._animateZoom), e }, createTile: function () { return document.createElement("div") }, getTileSize: function () { var e = this.options.tileSize; return e instanceof Point ? e : new Point(e, e) }, _updateZIndex: function () { this._container && void 0 !== this.options.zIndex && null !== this.options.zIndex && (this._container.style.zIndex = this.options.zIndex) }, _setAutoZIndex: function (e) { for (var t, n = this.getPane().children, r = -e(-1 / 0, 1 / 0), i = 0, o = n.length; i < o; i++)t = n[i].style.zIndex, n[i] !== this._container && t && (r = e(r, +t)); isFinite(r) && (this.options.zIndex = r + e(-1, 1), this._updateZIndex()) }, _updateOpacity: function () { if (this._map && !k) { setOpacity(this._container, this.options.opacity); var e = +new Date, t = !1, n = !1; for (var r in this._tiles) { var i = this._tiles[r]; if (i.current && i.loaded) { var o = Math.min(1, (e - i.loaded) / 200); setOpacity(i.el, o), o < 1 ? t = !0 : (i.active ? n = !0 : this._onOpaqueTile(i), i.active = !0) } } n && !this._noPrune && this._pruneTiles(), t && (cancelAnimFrame(this._fadeFrame), this._fadeFrame = requestAnimFrame(this._updateOpacity, this)) } }, _onOpaqueTile: falseFn, _initContainer: function () { this._container || (this._container = create$1("div", "leaflet-layer " + (this.options.className || "")), this._updateZIndex(), this.options.opacity < 1 && this._updateOpacity(), this.getPane().appendChild(this._container)) }, _updateLevels: function () { var e = this._tileZoom, t = this.options.maxZoom; if (void 0 !== e) { for (var n in this._levels) this._levels[n].el.children.length || n === e ? (this._levels[n].el.style.zIndex = t - Math.abs(e - n), this._onUpdateLevel(n)) : (remove(this._levels[n].el), this._removeTilesAtZoom(n), this._onRemoveLevel(n), delete this._levels[n]); var r = this._levels[e], i = this._map; return r || ((r = this._levels[e] = {}).el = create$1("div", "leaflet-tile-container leaflet-zoom-animated", this._container), r.el.style.zIndex = t, r.origin = i.project(i.unproject(i.getPixelOrigin()), e).round(), r.zoom = e, this._setZoomTransform(r, i.getCenter(), i.getZoom()), r.el.offsetWidth, this._onCreateLevel(r)), this._level = r, r } }, _onUpdateLevel: falseFn, _onRemoveLevel: falseFn, _onCreateLevel: falseFn, _pruneTiles: function () { if (this._map) { var e, t, n = this._map.getZoom(); if (n > this.options.maxZoom || n < this.options.minZoom) this._removeAllTiles(); else { for (e in this._tiles) (t = this._tiles[e]).retain = t.current; for (e in this._tiles) if ((t = this._tiles[e]).current && !t.active) { var r = t.coords; this._retainParent(r.x, r.y, r.z, r.z - 5) || this._retainChildren(r.x, r.y, r.z, r.z + 2) } for (e in this._tiles) this._tiles[e].retain || this._removeTile(e) } } }, _removeTilesAtZoom: function (e) { for (var t in this._tiles) this._tiles[t].coords.z === e && this._removeTile(t) }, _removeAllTiles: function () { for (var e in this._tiles) this._removeTile(e) }, _invalidateAll: function () { for (var e in this._levels) remove(this._levels[e].el), this._onRemoveLevel(e), delete this._levels[e]; this._removeAllTiles(), this._tileZoom = void 0 }, _retainParent: function (e, t, n, r) { var i = Math.floor(e / 2), o = Math.floor(t / 2), a = n - 1, s = new Point(+i, +o); s.z = +a; var l = this._tileCoordsToKey(s), u = this._tiles[l]; return u && u.active ? (u.retain = !0, !0) : (u && u.loaded && (u.retain = !0), a > r && this._retainParent(i, o, a, r)) }, _retainChildren: function (e, t, n, r) { for (var i = 2 * e; i < 2 * e + 2; i++)for (var o = 2 * t; o < 2 * t + 2; o++) { var a = new Point(i, o); a.z = n + 1; var s = this._tileCoordsToKey(a), l = this._tiles[s]; l && l.active ? l.retain = !0 : (l && l.loaded && (l.retain = !0), n + 1 < r && this._retainChildren(i, o, n + 1, r)) } }, _resetView: function (e) { var t = e && (e.pinch || e.flyTo); this._setView(this._map.getCenter(), this._map.getZoom(), t, t) }, _animateZoom: function (e) { this._setView(e.center, e.zoom, !0, e.noUpdate) }, _clampZoom: function (e) { var t = this.options; return void 0 !== t.minNativeZoom && e < t.minNativeZoom ? t.minNativeZoom : void 0 !== t.maxNativeZoom && t.maxNativeZoom < e ? t.maxNativeZoom : e }, _setView: function (e, t, n, r) { var i = this._clampZoom(Math.round(t)); (void 0 !== this.options.maxZoom && i > this.options.maxZoom || void 0 !== this.options.minZoom && i < this.options.minZoom) && (i = void 0); var o = this.options.updateWhenZooming && i !== this._tileZoom; r && !o || (this._tileZoom = i, this._abortLoading && this._abortLoading(), this._updateLevels(), this._resetGrid(), void 0 !== i && this._update(e), n || this._pruneTiles(), this._noPrune = !!n), this._setZoomTransforms(e, t) }, _setZoomTransforms: function (e, t) { for (var n in this._levels) this._setZoomTransform(this._levels[n], e, t) }, _setZoomTransform: function (e, t, n) { var r = this._map.getZoomScale(n, e.zoom), i = e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t, n)).round(); q ? setTransform(e.el, i, r) : setPosition(e.el, i) }, _resetGrid: function () { var e = this._map, t = e.options.crs, n = this._tileSize = this.getTileSize(), r = this._tileZoom, i = this._map.getPixelWorldBounds(this._tileZoom); i && (this._globalTileRange = this._pxBoundsToTileRange(i)), this._wrapX = t.wrapLng && !this.options.noWrap && [Math.floor(e.project([0, t.wrapLng[0]], r).x / n.x), Math.ceil(e.project([0, t.wrapLng[1]], r).x / n.y)], this._wrapY = t.wrapLat && !this.options.noWrap && [Math.floor(e.project([t.wrapLat[0], 0], r).y / n.x), Math.ceil(e.project([t.wrapLat[1], 0], r).y / n.y)] }, _onMoveEnd: function () { this._map && !this._map._animatingZoom && this._update() }, _getTiledPixelBounds: function (e) { var t = this._map, n = t._animatingZoom ? Math.max(t._animateToZoom, t.getZoom()) : t.getZoom(), r = t.getZoomScale(n, this._tileZoom), i = t.project(e, this._tileZoom).floor(), o = t.getSize().divideBy(2 * r); return new Bounds(i.subtract(o), i.add(o)) }, _update: function (e) { var t = this._map; if (t) { var n = this._clampZoom(t.getZoom()); if (void 0 === e && (e = t.getCenter()), void 0 !== this._tileZoom) { var r = this._getTiledPixelBounds(e), i = this._pxBoundsToTileRange(r), o = i.getCenter(), a = [], s = this.options.keepBuffer, l = new Bounds(i.getBottomLeft().subtract([s, -s]), i.getTopRight().add([s, -s])); if (!(isFinite(i.min.x) && isFinite(i.min.y) && isFinite(i.max.x) && isFinite(i.max.y))) throw new Error("Attempted to load an infinite number of tiles"); for (var u in this._tiles) { var c = this._tiles[u].coords; c.z === this._tileZoom && l.contains(new Point(c.x, c.y)) || (this._tiles[u].current = !1) } if (Math.abs(n - this._tileZoom) > 1) this._setView(e, n); else { for (var d = i.min.y; d <= i.max.y; d++)for (var f = i.min.x; f <= i.max.x; f++) { var h = new Point(f, d); if (h.z = this._tileZoom, this._isValidTile(h)) { var p = this._tiles[this._tileCoordsToKey(h)]; p ? p.current = !0 : a.push(h) } } if (a.sort(function (e, t) { return e.distanceTo(o) - t.distanceTo(o) }), 0 !== a.length) { this._loading || (this._loading = !0, this.fire("loading")); var m = document.createDocumentFragment(); for (f = 0; f < a.length; f++)this._addTile(a[f], m); this._level.el.appendChild(m) } } } } }, _isValidTile: function (e) { var t = this._map.options.crs; if (!t.infinite) { var n = this._globalTileRange; if (!t.wrapLng && (e.x < n.min.x || e.x > n.max.x) || !t.wrapLat && (e.y < n.min.y || e.y > n.max.y)) return !1 } if (!this.options.bounds) return !0; var r = this._tileCoordsToBounds(e); return toLatLngBounds(this.options.bounds).overlaps(r) }, _keyToBounds: function (e) { return this._tileCoordsToBounds(this._keyToTileCoords(e)) }, _tileCoordsToNwSe: function (e) { var t = this._map, n = this.getTileSize(), r = e.scaleBy(n), i = r.add(n), o = t.unproject(r, e.z), a = t.unproject(i, e.z); return [o, a] }, _tileCoordsToBounds: function (e) { var t = this._tileCoordsToNwSe(e), n = new LatLngBounds(t[0], t[1]); return this.options.noWrap || (n = this._map.wrapLatLngBounds(n)), n }, _tileCoordsToKey: function (e) { return e.x + ":" + e.y + ":" + e.z }, _keyToTileCoords: function (e) { var t = e.split(":"), n = new Point(+t[0], +t[1]); return n.z = +t[2], n }, _removeTile: function (e) { var t = this._tiles[e]; t && (R || t.el.setAttribute("src", s), remove(t.el), delete this._tiles[e], this.fire("tileunload", { tile: t.el, coords: this._keyToTileCoords(e) })) }, _initTile: function (e) { addClass(e, "leaflet-tile"); var t = this.getTileSize(); e.style.width = t.x + "px", e.style.height = t.y + "px", e.onselectstart = falseFn, e.onmousemove = falseFn, k && this.options.opacity < 1 && setOpacity(e, this.options.opacity), E && !A && (e.style.WebkitBackfaceVisibility = "hidden") }, _addTile: function (e, t) { var n = this._getTilePos(e), r = this._tileCoordsToKey(e), i = this.createTile(this._wrapCoords(e), bind(this._tileReady, this, e)); this._initTile(i), this.createTile.length < 2 && requestAnimFrame(bind(this._tileReady, this, e, null, i)), setPosition(i, n), this._tiles[r] = { el: i, coords: e, current: !0 }, t.appendChild(i), this.fire("tileloadstart", { tile: i, coords: e }) }, _tileReady: function (e, t, n) { if (this._map) { t && this.fire("tileerror", { error: t, tile: n, coords: e }); var r = this._tileCoordsToKey(e); (n = this._tiles[r]) && (n.loaded = +new Date, this._map._fadeAnimated ? (setOpacity(n.el, 0), cancelAnimFrame(this._fadeFrame), this._fadeFrame = requestAnimFrame(this._updateOpacity, this)) : (n.active = !0, this._pruneTiles()), t || (addClass(n.el, "leaflet-tile-loaded"), this.fire("tileload", { tile: n.el, coords: e })), this._noTilesToLoad() && (this._loading = !1, this.fire("load"), k || !this._map._fadeAnimated ? requestAnimFrame(this._pruneTiles, this) : setTimeout(bind(this._pruneTiles, this), 250))) } }, _getTilePos: function (e) { return e.scaleBy(this.getTileSize()).subtract(this._level.origin) }, _wrapCoords: function (e) { var t = new Point(this._wrapX ? wrapNum(e.x, this._wrapX) : e.x, this._wrapY ? wrapNum(e.y, this._wrapY) : e.y); return t.z = e.z, t }, _pxBoundsToTileRange: function (e) { var t = this.getTileSize(); return new Bounds(e.min.unscaleBy(t).floor(), e.max.unscaleBy(t).ceil().subtract([1, 1])) }, _noTilesToLoad: function () { for (var e in this._tiles) if (!this._tiles[e].loaded) return !1; return !0 } }), bt = _t.extend({ options: { minZoom: 0, maxZoom: 18, subdomains: "abc", errorTileUrl: "", zoomOffset: 0, tms: !1, zoomReverse: !1, detectRetina: !1, crossOrigin: !1 }, initialize: function (e, t) { this._url = e, (t = setOptions(this, t)).detectRetina && J && t.maxZoom > 0 && (t.tileSize = Math.floor(t.tileSize / 2), t.zoomReverse ? (t.zoomOffset--, t.minZoom++) : (t.zoomOffset++, t.maxZoom--), t.minZoom = Math.max(0, t.minZoom)), "string" == typeof t.subdomains && (t.subdomains = t.subdomains.split("")), E || this.on("tileunload", this._onTileRemove) }, setUrl: function (e, t) { return this._url = e, t || this.redraw(), this }, createTile: function (e, t) { var n = document.createElement("img"); return on(n, "load", bind(this._tileOnLoad, this, t, n)), on(n, "error", bind(this._tileOnError, this, t, n)), this.options.crossOrigin && (n.crossOrigin = ""), n.alt = "", n.setAttribute("role", "presentation"), n.src = this.getTileUrl(e), n }, getTileUrl: function (e) { var t = { r: J ? "@2x" : "", s: this._getSubdomain(e), x: e.x, y: e.y, z: this._getZoomForUrl() }; if (this._map && !this._map.options.crs.infinite) { var n = this._globalTileRange.max.y - e.y; this.options.tms && (t.y = n), t["-y"] = n } return template(this._url, extend(t, this.options)) }, _tileOnLoad: function (e, t) { k ? setTimeout(bind(e, this, null, t), 0) : e(null, t) }, _tileOnError: function (e, t, n) { var r = this.options.errorTileUrl; r && t.getAttribute("src") !== r && (t.src = r), e(n, t) }, _onTileRemove: function (e) { e.tile.onload = null }, _getZoomForUrl: function () { var e = this._tileZoom, t = this.options.maxZoom, n = this.options.zoomReverse, r = this.options.zoomOffset; return n && (e = t - e), e + r }, _getSubdomain: function (e) { var t = Math.abs(e.x + e.y) % this.options.subdomains.length; return this.options.subdomains[t] }, _abortLoading: function () { var e, t; for (e in this._tiles) this._tiles[e].coords.z !== this._tileZoom && ((t = this._tiles[e].el).onload = falseFn, t.onerror = falseFn, t.complete || (t.src = s, remove(t), delete this._tiles[e])) } }); function tileLayer(e, t) { return new bt(e, t) } var wt = bt.extend({ defaultWmsParams: { service: "WMS", request: "GetMap", layers: "", styles: "", format: "image/jpeg", transparent: !1, version: "1.1.1" }, options: { crs: null, uppercase: !1 }, initialize: function (e, t) { this._url = e; var n = extend({}, this.defaultWmsParams); for (var r in t) r in this.options || (n[r] = t[r]); var i = (t = setOptions(this, t)).detectRetina && J ? 2 : 1, o = this.getTileSize(); n.width = o.x * i, n.height = o.y * i, this.wmsParams = n }, onAdd: function (e) { this._crs = this.options.crs || e.options.crs, this._wmsVersion = parseFloat(this.wmsParams.version); var t = this._wmsVersion >= 1.3 ? "crs" : "srs"; this.wmsParams[t] = this._crs.code, bt.prototype.onAdd.call(this, e) }, getTileUrl: function (e) { var t = this._tileCoordsToNwSe(e), n = this._crs, r = toBounds(n.project(t[0]), n.project(t[1])), i = r.min, o = r.max, a = (this._wmsVersion >= 1.3 && this._crs === Ke ? [i.y, i.x, o.y, o.x] : [i.x, i.y, o.x, o.y]).join(","), s = L.TileLayer.prototype.getTileUrl.call(this, e); return s + getParamString(this.wmsParams, s, this.options.uppercase) + (this.options.uppercase ? "&BBOX=" : "&bbox=") + a }, setParams: function (e, t) { return extend(this.wmsParams, e), t || this.redraw(), this } }); bt.WMS = wt, tileLayer.wms = function tileLayerWMS(e, t) { return new wt(e, t) }; var xt = Je.extend({ options: { padding: .1, tolerance: 0 }, initialize: function (e) { setOptions(this, e), stamp(this), this._layers = this._layers || {} }, onAdd: function () { this._container || (this._initContainer(), this._zoomAnimated && addClass(this._container, "leaflet-zoom-animated")), this.getPane().appendChild(this._container), this._update(), this.on("update", this._updatePaths, this) }, onRemove: function () { this.off("update", this._updatePaths, this), this._destroyContainer() }, getEvents: function () { var e = { viewreset: this._reset, zoom: this._onZoom, moveend: this._update, zoomend: this._onZoomEnd }; return this._zoomAnimated && (e.zoomanim = this._onAnimZoom), e }, _onAnimZoom: function (e) { this._updateTransform(e.center, e.zoom) }, _onZoom: function () { this._updateTransform(this._map.getCenter(), this._map.getZoom()) }, _updateTransform: function (e, t) { var n = this._map.getZoomScale(t, this._zoom), r = getPosition(this._container), i = this._map.getSize().multiplyBy(.5 + this.options.padding), o = this._map.project(this._center, t), a = this._map.project(e, t), s = a.subtract(o), l = i.multiplyBy(-n).add(r).add(i).subtract(s); q ? setTransform(this._container, l, n) : setPosition(this._container, l) }, _reset: function () { for (var e in this._update(), this._updateTransform(this._center, this._zoom), this._layers) this._layers[e]._reset() }, _onZoomEnd: function () { for (var e in this._layers) this._layers[e]._project() }, _updatePaths: function () { for (var e in this._layers) this._layers[e]._update() }, _update: function () { var e = this.options.padding, t = this._map.getSize(), n = this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round(); this._bounds = new Bounds(n, n.add(t.multiplyBy(1 + 2 * e)).round()), this._center = this._map.getCenter(), this._zoom = this._map.getZoom() } }), Ct = xt.extend({ getEvents: function () { var e = xt.prototype.getEvents.call(this); return e.viewprereset = this._onViewPreReset, e }, _onViewPreReset: function () { this._postponeUpdatePaths = !0 }, onAdd: function () { xt.prototype.onAdd.call(this), this._draw() }, _initContainer: function () { var e = this._container = document.createElement("canvas"); on(e, "mousemove", throttle(this._onMouseMove, 32, this), this), on(e, "click dblclick mousedown mouseup contextmenu", this._onClick, this), on(e, "mouseout", this._handleMouseOut, this), this._ctx = e.getContext("2d") }, _destroyContainer: function () { delete this._ctx, remove(this._container), off(this._container), delete this._container }, _updatePaths: function () { if (!this._postponeUpdatePaths) { for (var e in this._redrawBounds = null, this._layers) this._layers[e]._update(); this._redraw() } }, _update: function () { if (!this._map._animatingZoom || !this._bounds) { this._drawnLayers = {}, xt.prototype._update.call(this); var e = this._bounds, t = this._container, n = e.getSize(), r = J ? 2 : 1; setPosition(t, e.min), t.width = r * n.x, t.height = r * n.y, t.style.width = n.x + "px", t.style.height = n.y + "px", J && this._ctx.scale(2, 2), this._ctx.translate(-e.min.x, -e.min.y), this.fire("update") } }, _reset: function () { xt.prototype._reset.call(this), this._postponeUpdatePaths && (this._postponeUpdatePaths = !1, this._updatePaths()) }, _initPath: function (e) { this._updateDashArray(e), this._layers[stamp(e)] = e; var t = e._order = { layer: e, prev: this._drawLast, next: null }; this._drawLast && (this._drawLast.next = t), this._drawLast = t, this._drawFirst = this._drawFirst || this._drawLast }, _addPath: function (e) { this._requestRedraw(e) }, _removePath: function (e) { var t = e._order, n = t.next, r = t.prev; n ? n.prev = r : this._drawLast = r, r ? r.next = n : this._drawFirst = n, delete e._order, delete this._layers[L.stamp(e)], this._requestRedraw(e) }, _updatePath: function (e) { this._extendRedrawBounds(e), e._project(), e._update(), this._requestRedraw(e) }, _updateStyle: function (e) { this._updateDashArray(e), this._requestRedraw(e) }, _updateDashArray: function (e) { if (e.options.dashArray) { var t, n = e.options.dashArray.split(","), r = []; for (t = 0; t < n.length; t++)r.push(Number(n[t])); e.options._dashArray = r } }, _requestRedraw: function (e) { this._map && (this._extendRedrawBounds(e), this._redrawRequest = this._redrawRequest || requestAnimFrame(this._redraw, this)) }, _extendRedrawBounds: function (e) { if (e._pxBounds) { var t = (e.options.weight || 0) + 1; this._redrawBounds = this._redrawBounds || new Bounds, this._redrawBounds.extend(e._pxBounds.min.subtract([t, t])), this._redrawBounds.extend(e._pxBounds.max.add([t, t])) } }, _redraw: function () { this._redrawRequest = null, this._redrawBounds && (this._redrawBounds.min._floor(), this._redrawBounds.max._ceil()), this._clear(), this._draw(), this._redrawBounds = null }, _clear: function () { var e = this._redrawBounds; if (e) { var t = e.getSize(); this._ctx.clearRect(e.min.x, e.min.y, t.x, t.y) } else this._ctx.clearRect(0, 0, this._container.width, this._container.height) }, _draw: function () { var e, t = this._redrawBounds; if (this._ctx.save(), t) { var n = t.getSize(); this._ctx.beginPath(), this._ctx.rect(t.min.x, t.min.y, n.x, n.y), this._ctx.clip() } this._drawing = !0; for (var r = this._drawFirst; r; r = r.next)e = r.layer, (!t || e._pxBounds && e._pxBounds.intersects(t)) && e._updatePath(); this._drawing = !1, this._ctx.restore() }, _updatePoly: function (e, t) { if (this._drawing) { var n, r, i, o, a = e._parts, s = a.length, l = this._ctx; if (s) { for (this._drawnLayers[e._leaflet_id] = e, l.beginPath(), n = 0; n < s; n++) { for (r = 0, i = a[n].length; r < i; r++)o = a[n][r], l[r ? "lineTo" : "moveTo"](o.x, o.y); t && l.closePath() } this._fillStroke(l, e) } } }, _updateCircle: function (e) { if (this._drawing && !e._empty()) { var t = e._point, n = this._ctx, r = Math.max(Math.round(e._radius), 1), i = (Math.max(Math.round(e._radiusY), 1) || r) / r; this._drawnLayers[e._leaflet_id] = e, 1 !== i && (n.save(), n.scale(1, i)), n.beginPath(), n.arc(t.x, t.y / i, r, 0, 2 * Math.PI, !1), 1 !== i && n.restore(), this._fillStroke(n, e) } }, _fillStroke: function (e, t) { var n = t.options; n.fill && (e.globalAlpha = n.fillOpacity, e.fillStyle = n.fillColor || n.color, e.fill(n.fillRule || "evenodd")), n.stroke && 0 !== n.weight && (e.setLineDash && e.setLineDash(t.options && t.options._dashArray || []), e.globalAlpha = n.opacity, e.lineWidth = n.weight, e.strokeStyle = n.color, e.lineCap = n.lineCap, e.lineJoin = n.lineJoin, e.stroke()) }, _onClick: function (e) { for (var t, n, r = this._map.mouseEventToLayerPoint(e), i = this._drawFirst; i; i = i.next)(t = i.layer).options.interactive && t._containsPoint(r) && !this._map._draggableMoved(t) && (n = t); n && (fakeStop(e), this._fireEvent([n], e)) }, _onMouseMove: function (e) { if (this._map && !this._map.dragging.moving() && !this._map._animatingZoom) { var t = this._map.mouseEventToLayerPoint(e); this._handleMouseHover(e, t) } }, _handleMouseOut: function (e) { var t = this._hoveredLayer; t && (removeClass(this._container, "leaflet-interactive"), this._fireEvent([t], e, "mouseout"), this._hoveredLayer = null) }, _handleMouseHover: function (e, t) { for (var n, r, i = this._drawFirst; i; i = i.next)(n = i.layer).options.interactive && n._containsPoint(t) && (r = n); r !== this._hoveredLayer && (this._handleMouseOut(e), r && (addClass(this._container, "leaflet-interactive"), this._fireEvent([r], e, "mouseover"), this._hoveredLayer = r)), this._hoveredLayer && this._fireEvent([this._hoveredLayer], e) }, _fireEvent: function (e, t, n) { this._map._fireDOMEvent(t, n || t.type, e) }, _bringToFront: function (e) { var t = e._order, n = t.next, r = t.prev; n && (n.prev = r, r ? r.next = n : n && (this._drawFirst = n), t.prev = this._drawLast, this._drawLast.next = t, t.next = null, this._drawLast = t, this._requestRedraw(e)) }, _bringToBack: function (e) { var t = e._order, n = t.next, r = t.prev; r && (r.next = n, n ? n.prev = r : r && (this._drawLast = r), t.prev = null, t.next = this._drawFirst, this._drawFirst.prev = t, this._drawFirst = t, this._requestRedraw(e)) } }); function canvas$1(e) { return Q ? new Ct(e) : null } var St = function () { try { return document.namespaces.add("lvml", "urn:schemas-microsoft-com:vml"), function (e) { return document.createElement("<lvml:" + e + ' class="lvml">') } } catch (e) { return function (e) { return document.createElement("<" + e + ' xmlns="urn:schemas-microsoft.com:vml" class="lvml">') } } }(), kt = { _initContainer: function () { this._container = create$1("div", "leaflet-vml-container") }, _update: function () { this._map._animatingZoom || (xt.prototype._update.call(this), this.fire("update")) }, _initPath: function (e) { var t = e._container = St("shape"); addClass(t, "leaflet-vml-shape " + (this.options.className || "")), t.coordsize = "1 1", e._path = St("path"), t.appendChild(e._path), this._updateStyle(e), this._layers[stamp(e)] = e }, _addPath: function (e) { var t = e._container; this._container.appendChild(t), e.options.interactive && e.addInteractiveTarget(t) }, _removePath: function (e) { var t = e._container; remove(t), e.removeInteractiveTarget(t), delete this._layers[stamp(e)] }, _updateStyle: function (e) { var t = e._stroke, n = e._fill, r = e.options, i = e._container; i.stroked = !!r.stroke, i.filled = !!r.fill, r.stroke ? (t || (t = e._stroke = St("stroke")), i.appendChild(t), t.weight = r.weight + "px", t.color = r.color, t.opacity = r.opacity, r.dashArray ? t.dashStyle = a(r.dashArray) ? r.dashArray.join(" ") : r.dashArray.replace(/( *, *)/g, " ") : t.dashStyle = "", t.endcap = r.lineCap.replace("butt", "flat"), t.joinstyle = r.lineJoin) : t && (i.removeChild(t), e._stroke = null), r.fill ? (n || (n = e._fill = St("fill")), i.appendChild(n), n.color = r.fillColor || r.color, n.opacity = r.fillOpacity) : n && (i.removeChild(n), e._fill = null) }, _updateCircle: function (e) { var t = e._point.round(), n = Math.round(e._radius), r = Math.round(e._radiusY || n); this._setPath(e, e._empty() ? "M0 0" : "AL " + t.x + "," + t.y + " " + n + "," + r + " 0,23592600") }, _setPath: function (e, t) { e._path.v = t }, _bringToFront: function (e) { toFront(e._container) }, _bringToBack: function (e) { toBack(e._container) } }, Tt = te ? St : svgCreate, Lt = xt.extend({ getEvents: function () { var e = xt.prototype.getEvents.call(this); return e.zoomstart = this._onZoomStart, e }, _initContainer: function () { this._container = Tt("svg"), this._container.setAttribute("pointer-events", "none"), this._rootGroup = Tt("g"), this._container.appendChild(this._rootGroup) }, _destroyContainer: function () { remove(this._container), off(this._container), delete this._container, delete this._rootGroup, delete this._svgSize }, _onZoomStart: function () { this._update() }, _update: function () { if (!this._map._animatingZoom || !this._bounds) { xt.prototype._update.call(this); var e = this._bounds, t = e.getSize(), n = this._container; this._svgSize && this._svgSize.equals(t) || (this._svgSize = t, n.setAttribute("width", t.x), n.setAttribute("height", t.y)), setPosition(n, e.min), n.setAttribute("viewBox", [e.min.x, e.min.y, t.x, t.y].join(" ")), this.fire("update") } }, _initPath: function (e) { var t = e._path = Tt("path"); e.options.className && addClass(t, e.options.className), e.options.interactive && addClass(t, "leaflet-interactive"), this._updateStyle(e), this._layers[stamp(e)] = e }, _addPath: function (e) { this._rootGroup || this._initContainer(), this._rootGroup.appendChild(e._path), e.addInteractiveTarget(e._path) }, _removePath: function (e) { remove(e._path), e.removeInteractiveTarget(e._path), delete this._layers[stamp(e)] }, _updatePath: function (e) { e._project(), e._update() }, _updateStyle: function (e) { var t = e._path, n = e.options; t && (n.stroke ? (t.setAttribute("stroke", n.color), t.setAttribute("stroke-opacity", n.opacity), t.setAttribute("stroke-width", n.weight), t.setAttribute("stroke-linecap", n.lineCap), t.setAttribute("stroke-linejoin", n.lineJoin), n.dashArray ? t.setAttribute("stroke-dasharray", n.dashArray) : t.removeAttribute("stroke-dasharray"), n.dashOffset ? t.setAttribute("stroke-dashoffset", n.dashOffset) : t.removeAttribute("stroke-dashoffset")) : t.setAttribute("stroke", "none"), n.fill ? (t.setAttribute("fill", n.fillColor || n.color), t.setAttribute("fill-opacity", n.fillOpacity), t.setAttribute("fill-rule", n.fillRule || "evenodd")) : t.setAttribute("fill", "none")) }, _updatePoly: function (e, t) { this._setPath(e, pointsToPath(e._parts, t)) }, _updateCircle: function (e) { var t = e._point, n = Math.max(Math.round(e._radius), 1), r = Math.max(Math.round(e._radiusY), 1) || n, i = "a" + n + "," + r + " 0 1,0 ", o = e._empty() ? "M0 0" : "M" + (t.x - n) + "," + t.y + i + 2 * n + ",0 " + i + 2 * -n + ",0 "; this._setPath(e, o) }, _setPath: function (e, t) { e._path.setAttribute("d", t) }, _bringToFront: function (e) { toFront(e._path) }, _bringToBack: function (e) { toBack(e._path) } }); function svg$1(e) { return ee || te ? new Lt(e) : null } te && Lt.include(kt), Ae.include({ getRenderer: function (e) { var t = e.options.renderer || this._getPaneRenderer(e.options.pane) || this.options.renderer || this._renderer; return t || (t = this._renderer = this.options.preferCanvas && canvas$1() || svg$1()), this.hasLayer(t) || this.addLayer(t), t }, _getPaneRenderer: function (e) { if ("overlayPane" === e || void 0 === e) return !1; var t = this._paneRenderers[e]; return void 0 === t && (t = Lt && svg$1({ pane: e }) || Ct && canvas$1({ pane: e }), this._paneRenderers[e] = t), t } }); var Mt = ut.extend({ initialize: function (e, t) { ut.prototype.initialize.call(this, this._boundsToLatLngs(e), t) }, setBounds: function (e) { return this.setLatLngs(this._boundsToLatLngs(e)) }, _boundsToLatLngs: function (e) { return [(e = toLatLngBounds(e)).getSouthWest(), e.getNorthWest(), e.getNorthEast(), e.getSouthEast()] } }); Lt.create = Tt, Lt.pointsToPath = pointsToPath, ct.geometryToLayer = geometryToLayer, ct.coordsToLatLng = coordsToLatLng, ct.coordsToLatLngs = coordsToLatLngs, ct.latLngToCoords = latLngToCoords, ct.latLngsToCoords = latLngsToCoords, ct.getFeature = getFeature, ct.asFeature = asFeature, Ae.mergeOptions({ boxZoom: !0 }); var Et = Ne.extend({ initialize: function (e) { this._map = e, this._container = e._container, this._pane = e._panes.overlayPane, this._resetStateTimeout = 0, e.on("unload", this._destroy, this) }, addHooks: function () { on(this._container, "mousedown", this._onMouseDown, this) }, removeHooks: function () { off(this._container, "mousedown", this._onMouseDown, this) }, moved: function () { return this._moved }, _destroy: function () { remove(this._pane), delete this._pane }, _resetState: function () { this._resetStateTimeout = 0, this._moved = !1 }, _clearDeferredResetState: function () { 0 !== this._resetStateTimeout && (clearTimeout(this._resetStateTimeout), this._resetStateTimeout = 0) }, _onMouseDown: function (e) { if (!e.shiftKey || 1 !== e.which && 1 !== e.button) return !1; this._clearDeferredResetState(), this._resetState(), ye(), disableImageDrag(), this._startPoint = this._map.mouseEventToContainerPoint(e), on(document, { contextmenu: stop, mousemove: this._onMouseMove, mouseup: this._onMouseUp, keydown: this._onKeyDown }, this) }, _onMouseMove: function (e) { this._moved || (this._moved = !0, this._box = create$1("div", "leaflet-zoom-box", this._container), addClass(this._container, "leaflet-crosshair"), this._map.fire("boxzoomstart")), this._point = this._map.mouseEventToContainerPoint(e); var t = new Bounds(this._point, this._startPoint), n = t.getSize(); setPosition(this._box, t.min), this._box.style.width = n.x + "px", this._box.style.height = n.y + "px" }, _finish: function () { this._moved && (remove(this._box), removeClass(this._container, "leaflet-crosshair")), _e(), enableImageDrag(), off(document, { contextmenu: stop, mousemove: this._onMouseMove, mouseup: this._onMouseUp, keydown: this._onKeyDown }, this) }, _onMouseUp: function (e) { if ((1 === e.which || 1 === e.button) && (this._finish(), this._moved)) { this._clearDeferredResetState(), this._resetStateTimeout = setTimeout(bind(this._resetState, this), 0); var t = new LatLngBounds(this._map.containerPointToLatLng(this._startPoint), this._map.containerPointToLatLng(this._point)); this._map.fitBounds(t).fire("boxzoomend", { boxZoomBounds: t }) } }, _onKeyDown: function (e) { 27 === e.keyCode && this._finish() } }); Ae.addInitHook("addHandler", "boxZoom", Et), Ae.mergeOptions({ doubleClickZoom: !0 }); var At = Ne.extend({ addHooks: function () { this._map.on("dblclick", this._onDoubleClick, this) }, removeHooks: function () { this._map.off("dblclick", this._onDoubleClick, this) }, _onDoubleClick: function (e) { var t = this._map, n = t.getZoom(), r = t.options.zoomDelta, i = e.originalEvent.shiftKey ? n - r : n + r; "center" === t.options.doubleClickZoom ? t.setZoom(i) : t.setZoomAround(e.containerPoint, i) } }); Ae.addInitHook("addHandler", "doubleClickZoom", At), Ae.mergeOptions({ dragging: !0, inertia: !A, inertiaDeceleration: 3400, inertiaMaxSpeed: 1 / 0, easeLinearity: .2, worldCopyJump: !1, maxBoundsViscosity: 0 }); var Pt = Ne.extend({ addHooks: function () { if (!this._draggable) { var e = this._map; this._draggable = new qe(e._mapPane, e._container), this._draggable.on({ dragstart: this._onDragStart, drag: this._onDrag, dragend: this._onDragEnd }, this), this._draggable.on("predrag", this._onPreDragLimit, this), e.options.worldCopyJump && (this._draggable.on("predrag", this._onPreDragWrap, this), e.on("zoomend", this._onZoomEnd, this), e.whenReady(this._onZoomEnd, this)) } addClass(this._map._container, "leaflet-grab leaflet-touch-drag"), this._draggable.enable(), this._positions = [], this._times = [] }, removeHooks: function () { removeClass(this._map._container, "leaflet-grab"), removeClass(this._map._container, "leaflet-touch-drag"), this._draggable.disable() }, moved: function () { return this._draggable && this._draggable._moved }, moving: function () { return this._draggable && this._draggable._moving }, _onDragStart: function () { var e = this._map; if (e._stop(), this._map.options.maxBounds && this._map.options.maxBoundsViscosity) { var t = toLatLngBounds(this._map.options.maxBounds); this._offsetLimit = toBounds(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1), this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())), this._viscosity = Math.min(1, Math.max(0, this._map.options.maxBoundsViscosity)) } else this._offsetLimit = null; e.fire("movestart").fire("dragstart"), e.options.inertia && (this._positions = [], this._times = []) }, _onDrag: function (e) { if (this._map.options.inertia) { var t = this._lastTime = +new Date, n = this._lastPos = this._draggable._absPos || this._draggable._newPos; this._positions.push(n), this._times.push(t), this._prunePositions(t) } this._map.fire("move", e).fire("drag", e) }, _prunePositions: function (e) { for (; this._positions.length > 1 && e - this._times[0] > 50;)this._positions.shift(), this._times.shift() }, _onZoomEnd: function () { var e = this._map.getSize().divideBy(2), t = this._map.latLngToLayerPoint([0, 0]); this._initialWorldOffset = t.subtract(e).x, this._worldWidth = this._map.getPixelWorldBounds().getSize().x }, _viscousLimit: function (e, t) { return e - (e - t) * this._viscosity }, _onPreDragLimit: function () { if (this._viscosity && this._offsetLimit) { var e = this._draggable._newPos.subtract(this._draggable._startPos), t = this._offsetLimit; e.x < t.min.x && (e.x = this._viscousLimit(e.x, t.min.x)), e.y < t.min.y && (e.y = this._viscousLimit(e.y, t.min.y)), e.x > t.max.x && (e.x = this._viscousLimit(e.x, t.max.x)), e.y > t.max.y && (e.y = this._viscousLimit(e.y, t.max.y)), this._draggable._newPos = this._draggable._startPos.add(e) } }, _onPreDragWrap: function () { var e = this._worldWidth, t = Math.round(e / 2), n = this._initialWorldOffset, r = this._draggable._newPos.x, i = (r - t + n) % e + t - n, o = (r + t + n) % e - t - n, a = Math.abs(i + n) < Math.abs(o + n) ? i : o; this._draggable._absPos = this._draggable._newPos.clone(), this._draggable._newPos.x = a }, _onDragEnd: function (e) { var t = this._map, n = t.options, r = !n.inertia || this._times.length < 2; if (t.fire("dragend", e), r) t.fire("moveend"); else { this._prunePositions(+new Date); var i = this._lastPos.subtract(this._positions[0]), o = (this._lastTime - this._times[0]) / 1e3, a = n.easeLinearity, s = i.multiplyBy(a / o), l = s.distanceTo([0, 0]), u = Math.min(n.inertiaMaxSpeed, l), c = s.multiplyBy(u / l), d = u / (n.inertiaDeceleration * a), f = c.multiplyBy(-d / 2).round(); f.x || f.y ? (f = t._limitOffset(f, t.options.maxBounds), requestAnimFrame(function () { t.panBy(f, { duration: d, easeLinearity: a, noMoveStart: !0, animate: !0 }) })) : t.fire("moveend") } } }); Ae.addInitHook("addHandler", "dragging", Pt), Ae.mergeOptions({ keyboard: !0, keyboardPanDelta: 80 }); var Rt = Ne.extend({ keyCodes: { left: [37], right: [39], down: [40], up: [38], zoomIn: [187, 107, 61, 171], zoomOut: [189, 109, 54, 173] }, initialize: function (e) { this._map = e, this._setPanDelta(e.options.keyboardPanDelta), this._setZoomDelta(e.options.zoomDelta) }, addHooks: function () { var e = this._map._container; e.tabIndex <= 0 && (e.tabIndex = "0"), on(e, { focus: this._onFocus, blur: this._onBlur, mousedown: this._onMouseDown }, this), this._map.on({ focus: this._addHooks, blur: this._removeHooks }, this) }, removeHooks: function () { this._removeHooks(), off(this._map._container, { focus: this._onFocus, blur: this._onBlur, mousedown: this._onMouseDown }, this), this._map.off({ focus: this._addHooks, blur: this._removeHooks }, this) }, _onMouseDown: function () { if (!this._focused) { var e = document.body, t = document.documentElement, n = e.scrollTop || t.scrollTop, r = e.scrollLeft || t.scrollLeft; this._map._container.focus(), window.scrollTo(r, n) } }, _onFocus: function () { this._focused = !0, this._map.fire("focus") }, _onBlur: function () { this._focused = !1, this._map.fire("blur") }, _setPanDelta: function (e) { var t, n, r = this._panKeys = {}, i = this.keyCodes; for (t = 0, n = i.left.length; t < n; t++)r[i.left[t]] = [-1 * e, 0]; for (t = 0, n = i.right.length; t < n; t++)r[i.right[t]] = [e, 0]; for (t = 0, n = i.down.length; t < n; t++)r[i.down[t]] = [0, e]; for (t = 0, n = i.up.length; t < n; t++)r[i.up[t]] = [0, -1 * e] }, _setZoomDelta: function (e) { var t, n, r = this._zoomKeys = {}, i = this.keyCodes; for (t = 0, n = i.zoomIn.length; t < n; t++)r[i.zoomIn[t]] = e; for (t = 0, n = i.zoomOut.length; t < n; t++)r[i.zoomOut[t]] = -e }, _addHooks: function () { on(document, "keydown", this._onKeyDown, this) }, _removeHooks: function () { off(document, "keydown", this._onKeyDown, this) }, _onKeyDown: function (e) { if (!(e.altKey || e.ctrlKey || e.metaKey)) { var t, n = e.keyCode, r = this._map; if (n in this._panKeys) { if (r._panAnim && r._panAnim._inProgress) return; t = this._panKeys[n], e.shiftKey && (t = toPoint(t).multiplyBy(3)), r.panBy(t), r.options.maxBounds && r.panInsideBounds(r.options.maxBounds) } else if (n in this._zoomKeys) r.setZoom(r.getZoom() + (e.shiftKey ? 3 : 1) * this._zoomKeys[n]); else { if (27 !== n || !r._popup || !r._popup.options.closeOnEscapeKey) return; r.closePopup() } stop(e) } } }); Ae.addInitHook("addHandler", "keyboard", Rt), Ae.mergeOptions({ scrollWheelZoom: !0, wheelDebounceTime: 40, wheelPxPerZoomLevel: 60 }); var Ot = Ne.extend({ addHooks: function () { on(this._map._container, "mousewheel", this._onWheelScroll, this), this._delta = 0 }, removeHooks: function () { off(this._map._container, "mousewheel", this._onWheelScroll, this) }, _onWheelScroll: function (e) { var t = getWheelDelta(e), n = this._map.options.wheelDebounceTime; this._delta += t, this._lastMousePos = this._map.mouseEventToContainerPoint(e), this._startTime || (this._startTime = +new Date); var r = Math.max(n - (+new Date - this._startTime), 0); clearTimeout(this._timer), this._timer = setTimeout(bind(this._performZoom, this), r), stop(e) }, _performZoom: function () { var e = this._map, t = e.getZoom(), n = this._map.options.zoomSnap || 0; e._stop(); var r = this._delta / (4 * this._map.options.wheelPxPerZoomLevel), i = 4 * Math.log(2 / (1 + Math.exp(-Math.abs(r)))) / Math.LN2, o = n ? Math.ceil(i / n) * n : i, a = e._limitZoom(t + (this._delta > 0 ? o : -o)) - t; this._delta = 0, this._startTime = null, a && ("center" === e.options.scrollWheelZoom ? e.setZoom(t + a) : e.setZoomAround(this._lastMousePos, t + a)) } }); Ae.addInitHook("addHandler", "scrollWheelZoom", Ot), Ae.mergeOptions({ tap: !0, tapTolerance: 15 }); var Dt = Ne.extend({ addHooks: function () { on(this._map._container, "touchstart", this._onDown, this) }, removeHooks: function () { off(this._map._container, "touchstart", this._onDown, this) }, _onDown: function (e) { if (e.touches) { if (preventDefault(e), this._fireClick = !0, e.touches.length > 1) return this._fireClick = !1, void clearTimeout(this._holdTimeout); var t = e.touches[0], n = t.target; this._startPos = this._newPos = new Point(t.clientX, t.clientY), n.tagName && "a" === n.tagName.toLowerCase() && addClass(n, "leaflet-active"), this._holdTimeout = setTimeout(bind(function () { this._isTapValid() && (this._fireClick = !1, this._onUp(), this._simulateEvent("contextmenu", t)) }, this), 1e3), this._simulateEvent("mousedown", t), on(document, { touchmove: this._onMove, touchend: this._onUp }, this) } }, _onUp: function (e) { if (clearTimeout(this._holdTimeout), off(document, { touchmove: this._onMove, touchend: this._onUp }, this), this._fireClick && e && e.changedTouches) { var t = e.changedTouches[0], n = t.target; n && n.tagName && "a" === n.tagName.toLowerCase() && removeClass(n, "leaflet-active"), this._simulateEvent("mouseup", t), this._isTapValid() && this._simulateEvent("click", t) } }, _isTapValid: function () { return this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance }, _onMove: function (e) { var t = e.touches[0]; this._newPos = new Point(t.clientX, t.clientY), this._simulateEvent("mousemove", t) }, _simulateEvent: function (e, t) { var n = document.createEvent("MouseEvents"); n._simulated = !0, t.target._simulatedClick = !0, n.initMouseEvent(e, !0, !0, window, 1, t.screenX, t.screenY, t.clientX, t.clientY, !1, !1, !1, !1, 0, null), t.target.dispatchEvent(n) } }); Z && !Y && Ae.addInitHook("addHandler", "tap", Dt), Ae.mergeOptions({ touchZoom: Z && !A, bounceAtZoomLimits: !0 }); var Ft = Ne.extend({ addHooks: function () { addClass(this._map._container, "leaflet-touch-zoom"), on(this._map._container, "touchstart", this._onTouchStart, this) }, removeHooks: function () { removeClass(this._map._container, "leaflet-touch-zoom"), off(this._map._container, "touchstart", this._onTouchStart, this) }, _onTouchStart: function (e) { var t = this._map; if (e.touches && 2 === e.touches.length && !t._animatingZoom && !this._zooming) { var n = t.mouseEventToContainerPoint(e.touches[0]), r = t.mouseEventToContainerPoint(e.touches[1]); this._centerPoint = t.getSize()._divideBy(2), this._startLatLng = t.containerPointToLatLng(this._centerPoint), "center" !== t.options.touchZoom && (this._pinchStartLatLng = t.containerPointToLatLng(n.add(r)._divideBy(2))), this._startDist = n.distanceTo(r), this._startZoom = t.getZoom(), this._moved = !1, this._zooming = !0, t._stop(), on(document, "touchmove", this._onTouchMove, this), on(document, "touchend", this._onTouchEnd, this), preventDefault(e) } }, _onTouchMove: function (e) { if (e.touches && 2 === e.touches.length && this._zooming) { var t = this._map, n = t.mouseEventToContainerPoint(e.touches[0]), r = t.mouseEventToContainerPoint(e.touches[1]), i = n.distanceTo(r) / this._startDist; if (this._zoom = t.getScaleZoom(i, this._startZoom), !t.options.bounceAtZoomLimits && (this._zoom < t.getMinZoom() && i < 1 || this._zoom > t.getMaxZoom() && i > 1) && (this._zoom = t._limitZoom(this._zoom)), "center" === t.options.touchZoom) { if (this._center = this._startLatLng, 1 === i) return } else { var o = n._add(r)._divideBy(2)._subtract(this._centerPoint); if (1 === i && 0 === o.x && 0 === o.y) return; this._center = t.unproject(t.project(this._pinchStartLatLng, this._zoom).subtract(o), this._zoom) } this._moved || (t._moveStart(!0, !1), this._moved = !0), cancelAnimFrame(this._animRequest); var a = bind(t._move, t, this._center, this._zoom, { pinch: !0, round: !1 }); this._animRequest = requestAnimFrame(a, this, !0), preventDefault(e) } }, _onTouchEnd: function () { this._moved && this._zooming ? (this._zooming = !1, cancelAnimFrame(this._animRequest), off(document, "touchmove", this._onTouchMove), off(document, "touchend", this._onTouchEnd), this._map.options.zoomAnimation ? this._map._animateZoom(this._center, this._map._limitZoom(this._zoom), !0, this._map.options.zoomSnap) : this._map._resetView(this._center, this._map._limitZoom(this._zoom))) : this._zooming = !1 } }); Ae.addInitHook("addHandler", "touchZoom", Ft), Ae.BoxZoom = Et, Ae.DoubleClickZoom = At, Ae.Drag = Pt, Ae.Keyboard = Rt, Ae.ScrollWheelZoom = Ot, Ae.Tap = Dt, Ae.TouchZoom = Ft; var It = window.L; window.L = e, Object.freeze = t, e.version = "1.3.1-carto1", e.noConflict = function noConflict() { return window.L = It, this }, e.Control = Pe, e.control = Re, e.Browser = ne, e.Evented = p, e.Mixin = Be, e.Util = f, e.Class = Class, e.Handler = Ne, e.extend = extend, e.bind = bind, e.stamp = stamp, e.setOptions = setOptions, e.DomEvent = Ce, e.DomUtil = Me, e.PosAnimation = Ee, e.Draggable = qe, e.LineUtil = He, e.PolyUtil = Ve, e.Point = Point, e.point = toPoint, e.Bounds = Bounds, e.bounds = toBounds, e.Transformation = Transformation, e.transformation = toTransformation, e.Projection = Ye, e.LatLng = LatLng, e.latLng = toLatLng, e.LatLngBounds = LatLngBounds, e.latLngBounds = toLatLngBounds, e.CRS = v, e.GeoJSON = ct, e.geoJSON = geoJSON, e.geoJson = ft, e.Layer = Je, e.LayerGroup = Qe, e.layerGroup = function (e, t) { return new Qe(e, t) }, e.FeatureGroup = et, e.featureGroup = function (e) { return new et(e) }, e.ImageOverlay = ht, e.imageOverlay = function (e, t, n) { return new ht(e, t, n) }, e.VideoOverlay = pt, e.videoOverlay = function videoOverlay(e, t, n) { return new pt(e, t, n) }, e.DivOverlay = mt, e.Popup = gt, e.popup = function (e, t) { return new gt(e, t) }, e.Tooltip = vt, e.tooltip = function (e, t) { return new vt(e, t) }, e.Icon = tt, e.icon = function icon(e) { return new tt(e) }, e.DivIcon = yt, e.divIcon = function divIcon(e) { return new yt(e) }, e.Marker = it, e.marker = function marker(e, t) { return new it(e, t) }, e.TileLayer = bt, e.tileLayer = tileLayer, e.GridLayer = _t, e.gridLayer = function gridLayer(e) { return new _t(e) }, e.SVG = Lt, e.svg = svg$1, e.Renderer = xt, e.Canvas = Ct, e.canvas = canvas$1, e.Path = ot, e.CircleMarker = at, e.circleMarker = function circleMarker(e, t) { return new at(e, t) }, e.Circle = st, e.circle = function circle(e, t, n) { return new st(e, t, n) }, e.Polyline = lt, e.polyline = function polyline(e, t) { return new lt(e, t) }, e.Polygon = ut, e.polygon = function polygon(e, t) { return new ut(e, t) }, e.Rectangle = Mt, e.rectangle = function rectangle(e, t) { return new Mt(e, t) }, e.Map = Ae, e.map = function createMap(e, t) { return new Ae(e, t) } }(t) }, function(e, t, n) { (function (t) { !function (n) { var r = setTimeout; function noop() { } function Promise(e) { if (!(this instanceof Promise)) throw new TypeError("Promises must be constructed via new"); if ("function" != typeof e) throw new TypeError("not a function"); this._state = 0, this._handled = !1, this._value = void 0, this._deferreds = [], doResolve(e, this) } function handle(e, t) { for (; 3 === e._state;)e = e._value; 0 !== e._state ? (e._handled = !0, Promise._immediateFn(function () { var n = 1 === e._state ? t.onFulfilled : t.onRejected; if (null !== n) { var r; try { r = n(e._value) } catch (e) { return void reject(t.promise, e) } resolve(t.promise, r) } else (1 === e._state ? resolve : reject)(t.promise, e._value) })) : e._deferreds.push(t) } function resolve(e, t) { try { if (t === e) throw new TypeError("A promise cannot be resolved with itself."); if (t && ("object" == typeof t || "function" == typeof t)) { var n = t.then; if (t instanceof Promise) return e._state = 3, e._value = t, void finale(e); if ("function" == typeof n) return void doResolve(function bind(e, t) { return function () { e.apply(t, arguments) } }(n, t), e) } e._state = 1, e._value = t, finale(e) } catch (t) { reject(e, t) } } function reject(e, t) { e._state = 2, e._value = t, finale(e) } function finale(e) { 2 === e._state && 0 === e._deferreds.length && Promise._immediateFn(function () { e._handled || Promise._unhandledRejectionFn(e._value) }); for (var t = 0, n = e._deferreds.length; t < n; t++)handle(e, e._deferreds[t]); e._deferreds = null } function doResolve(e, t) { var n = !1; try { e(function (e) { n || (n = !0, resolve(t, e)) }, function (e) { n || (n = !0, reject(t, e)) }) } catch (e) { if (n) return; n = !0, reject(t, e) } } Promise.prototype.catch = function (e) { return this.then(null, e) }, Promise.prototype.then = function (e, t) { var n = new this.constructor(noop); return handle(this, new function Handler(e, t, n) { this.onFulfilled = "function" == typeof e ? e : null, this.onRejected = "function" == typeof t ? t : null, this.promise = n }(e, t, n)), n }, Promise.all = function (e) { return new Promise(function (t, n) { if (!e || void 0 === e.length) throw new TypeError("Promise.all accepts an array"); var r = Array.prototype.slice.call(e); if (0 === r.length) return t([]); var i = r.length; function res(e, o) { try { if (o && ("object" == typeof o || "function" == typeof o)) { var a = o.then; if ("function" == typeof a) return void a.call(o, function (t) { res(e, t) }, n) } r[e] = o, 0 == --i && t(r) } catch (e) { n(e) } } for (var o = 0; o < r.length; o++)res(o, r[o]) }) }, Promise.resolve = function (e) { return e && "object" == typeof e && e.constructor === Promise ? e : new Promise(function (t) { t(e) }) }, Promise.reject = function (e) { return new Promise(function (t, n) { n(e) }) }, Promise.race = function (e) { return new Promise(function (t, n) { for (var r = 0, i = e.length; r < i; r++)e[r].then(t, n) }) }, Promise._immediateFn = "function" == typeof t && function (e) { t(e) } || function (e) { r(e, 0) }, Promise._unhandledRejectionFn = function _unhandledRejectionFn(e) { "undefined" != typeof console && console && console.warn("Possible Unhandled Promise Rejection:", e) }, Promise._setImmediateFn = function _setImmediateFn(e) { Promise._immediateFn = e }, Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(e) { Promise._unhandledRejectionFn = e }, void 0 !== e && e.exports ? e.exports = Promise : n.Promise || (n.Promise = Promise) }(this) }).call(this, n(1548).setImmediate) }, function(e, t, n) { var r = n(146), i = n(109), o = n(140), a = Object.defineProperty, s = {}, l = function (e) { throw e }; e.exports = function (e, t) { if (o(s, e)) return s[e]; t || (t = {}); var n = [][e], u = !!o(t, "ACCESSORS") && t.ACCESSORS, c = o(t, 0) ? t[0] : l, d = o(t, 1) ? t[1] : void 0; return s[e] = !!n && !i(function () { if (u && !r) return !0; var e = { length: -1 }; u ? a(e, 1, { enumerable: !0, get: l }) : e[1] = 1, n.call(e, c, d) }) } },, function(e, t, n) { var r = n(22); e.exports = function differenceInMilliseconds(e, t) { var n = r(e), i = r(t); return n.getTime() - i.getTime() } }, function(e, t, n) { var r = n(22), i = n(897); e.exports = function addMonths(e, t) { var n = r(e), o = Number(t), a = n.getMonth() + o, s = new Date(0); s.setFullYear(n.getFullYear(), a, 1), s.setHours(0, 0, 0, 0); var l = i(s); return n.setMonth(a, Math.min(l, n.getDate())), n } }, function(e, t, n) { var r = n(336), i = 6e4, o = 864e5; e.exports = function differenceInCalendarDays(e, t) { var n = r(e), a = r(t), s = n.getTime() - n.getTimezoneOffset() * i, l = a.getTime() - a.getTimezoneOffset() * i; return Math.round((s - l) / o) } }, function(e, t, n) { var r = n(22); e.exports = function startOfWeek(e, t) { var n = t && Number(t.weekStartsOn) || 0, i = r(e), o = i.getDay(), a = (o < n ? 7 : 0) + o - n; return i.setDate(i.getDate() - a), i.setHours(0, 0, 0, 0), i } }, function(e, t, n) { var r = n(140), i = n(238), o = n(641), a = n(3441), s = o("IE_PROTO"), l = Object.prototype; e.exports = a ? Object.getPrototypeOf : function (e) { return e = i(e), r(e, s) ? e[s] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? l : null } }, function(e, t, n) { e.exports = n(3447) }, function(e, t) { e.exports = function (e) { try { return { error: !1, value: e() } } catch (e) { return { error: !0, value: e } } } }, function(e, t) { e.exports = function (e, t, n) { if (!(e instanceof t)) throw TypeError("Incorrect " + (n ? n + " " : "") + "invocation"); return e } }, function(e, t, n) { "use strict"; var r = n(348), i = n(154), o = n(114), a = n(146), s = o("species"); e.exports = function (e) { var t = r(e), n = i.f; a && t && !t[s] && n(t, s, { configurable: !0, get: function () { return this } }) } }, function(e, t) { e.exports = function (e) { return e.webpackPolyfill || (e.deprecate = function () { }, e.paths = [], e.children || (e.children = []), Object.defineProperty(e, "loaded", { enumerable: !0, get: function () { return e.l } }), Object.defineProperty(e, "id", { enumerable: !0, get: function () { return e.i } }), e.webpackPolyfill = 1), e } }, function(e, t, n) { var r = n(118); t.f = r }, function(e, t, n) { var r = n(212), i = n(221), o = n(627), a = n(1523), s = o("IE_PROTO"), l = Object.prototype; e.exports = a ? Object.getPrototypeOf : function (e) { return e = i(e), r(e, s) ? e[s] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? l : null } }, function(e, t, n) { var r = n(915), i = n(629), o = r("keys"); e.exports = function (e) { return o[e] || (o[e] = i(e)) } }, function(e, t) { e.exports = "\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff" }, function(e, t) { var n = 0, r = Math.random(); e.exports = function (e) { return "Symbol(" + String(void 0 === e ? "" : e) + ")_" + (++n + r).toString(36) } }, function(e, t, n) { var r = n(383), i = Math.max, o = Math.min; e.exports = function (e, t) { var n = r(e); return n < 0 ? i(n + t, 0) : o(n, t) } }, function(e, t, n) { var r = n(129); e.exports = function (e, t) { if (!r(e)) return e; var n, i; if (t && "function" == typeof (n = e.toString) && !r(i = n.call(e))) return i; if ("function" == typeof (n = e.valueOf) && !r(i = n.call(e))) return i; if (!t && "function" == typeof (n = e.toString) && !r(i = n.call(e))) return i; throw TypeError("Can't convert object to primitive value") } }, function(e, t, n) { var r = n(67), i = n(345), o = "".split; e.exports = r(function () { return !Object("z").propertyIsEnumerable(0) }) ? function (e) { return "String" == i(e) ? o.call(e, "") : Object(e) } : Object }, function(e, t, n) { "use strict"; var r = {}.propertyIsEnumerable, i = Object.getOwnPropertyDescriptor, o = i && !r.call({ 1: 2 }, 1); t.f = o ? function propertyIsEnumerable(e) { var t = i(this, e); return !!t && t.enumerable } : r }, function(e, t, n) { var r = n(252), i = n(636); e.exports = function (e, t) { var n = e.exec; if ("function" == typeof n) { var o = n.call(e, t); if ("object" != typeof o) throw TypeError("RegExp exec method returned something other than an Object or null"); return o } if ("RegExp" !== r(e)) throw TypeError("RegExp#exec called on incompatible receiver"); return i.call(e, t) } }, function(e, t, n) { "use strict"; n(16); var r = n(213), i = n(109), o = n(114), a = n(636), s = n(214), l = o("species"), u = !i(function () { var e = /./; return e.exec = function () { var e = []; return e.groups = { a: "7" }, e }, "7" !== "".replace(e, "$<a>") }), c = "$0" === "a".replace(/./, "$0"), d = o("replace"), f = !!/./[d] && "" === /./[d]("a", "$0"), h = !i(function () { var e = /(?:)/, t = e.exec; e.exec = function () { return t.apply(this, arguments) }; var n = "ab".split(e); return 2 !== n.length || "a" !== n[0] || "b" !== n[1] }); e.exports = function (e, t, n, d) { var p = o(e), m = !i(function () { var t = {}; return t[p] = function () { return 7 }, 7 != ""[e](t) }), g = m && !i(function () { var t = !1, n = /a/; return "split" === e && ((n = {}).constructor = {}, n.constructor[l] = function () { return n }, n.flags = "", n[p] = /./[p]), n.exec = function () { return t = !0, null }, n[p](""), !t }); if (!m || !g || "replace" === e && (!u || !c || f) || "split" === e && !h) { var v = /./[p], y = n(p, ""[e], function (e, t, n, r, i) { return t.exec === a ? m && !i ? { done: !0, value: v.call(t, n, r) } : { done: !0, value: e.call(n, t, r) } : { done: !1 } }, { REPLACE_KEEPS_$0: c, REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE: f }), _ = y[0], b = y[1]; r(String.prototype, e, _), r(RegExp.prototype, p, 2 == t ? function (e, t) { return b.call(e, this, t) } : function (e) { return b.call(e, this) }) } d && s(RegExp.prototype[p], "sham", !0) } }, function(e, t, n) { "use strict"; var r, i, o = n(922), a = n(1539), s = RegExp.prototype.exec, l = String.prototype.replace, u = s, c = (r = /a/, i = /b*/g, s.call(r, "a"), s.call(i, "a"), 0 !== r.lastIndex || 0 !== i.lastIndex), d = a.UNSUPPORTED_Y || a.BROKEN_CARET, f = void 0 !== /()??/.exec("")[1]; (c || f || d) && (u = function exec(e) { var t, n, r, i, a = this, u = d && a.sticky, h = o.call(a), p = a.source, m = 0, g = e; return u && (-1 === (h = h.replace("y", "")).indexOf("g") && (h += "g"), g = String(e).slice(a.lastIndex), a.lastIndex > 0 && (!a.multiline || a.multiline && "\n" !== e[a.lastIndex - 1]) && (p = "(?: " + p + ")", g = " " + g, m++), n = new RegExp("^(?:" + p + ")", h)), f && (n = new RegExp("^" + p + "$(?!\\s)", h)), c && (t = a.lastIndex), r = s.call(u ? n : a, g), u ? r ? (r.input = r.input.slice(m), r[0] = r[0].slice(m), r.index = a.lastIndex, a.lastIndex += r[0].length) : a.lastIndex = 0 : c && r && (a.lastIndex = a.global ? r.index + r[0].length : t), f && r && r.length > 1 && l.call(r[0], n, function () { for (i = 1; i < arguments.length - 2; i++)void 0 === arguments[i] && (r[i] = void 0) }), r }), e.exports = u }, function(e, t, n) { var r = n(109), i = /#|\.prototype\./, o = function (e, t) { var n = s[a(e)]; return n == u || n != l && ("function" == typeof t ? r(t) : !!t) }, a = o.normalize = function (e) { return String(e).replace(i, ".").toLowerCase() }, s = o.data = {}, l = o.NATIVE = "N", u = o.POLYFILL = "P"; e.exports = o }, function(e, t, n) { var r = n(249), i = Math.max, o = Math.min; e.exports = function (e, t) { var n = r(e); return n < 0 ? i(n + t, 0) : o(n, t) } }, function(e, t) { e.exports = {} }, function(e, t) { var n = 0, r = Math.random(); e.exports = function (e) { return "Symbol(" + String(void 0 === e ? "" : e) + ")_" + (++n + r).toString(36) } }, function(e, t, n) { var r = n(931), i = n(640), o = r("keys"); e.exports = function (e) { return o[e] || (o[e] = i(e)) } },,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { var r = n(22), i = n(617), o = n(437); e.exports = function differenceInDays(e, t) { var n = r(e), a = r(t), s = o(n, a), l = Math.abs(i(n, a)); return n.setDate(n.getDate() - s * l), s * (l - (o(n, a) === -s)) } },,,,,,,,,,, function(e, t, n) { e.exports = n(3440) },,,,,,,,,,,,,,,,,, function(e, t, n) { e.exports = n(2978) }, function(e, t, n) { "use strict"; function sendCustomDimensions(e, t, n, r) { window.dataLayer = window.dataLayer || [], window.dataLayer.push({ country: t, category: e, license: n ? "Public Data" : "Premium Data", provider: r }) } n.d(t, "a", function () { return sendCustomDimensions }) }, function(e, t, n) { "use strict"; n.d(t, "a", function () { return formURL }); n(23); var r = n(10), i = n.n(r); function formURL(e) { var t, n = [], r = { category: e.category_name, country: e.country_name, datastream: e.data_source_name, provider: e.provider_name, license: e.license_name }; for (var o in r) { var a; if (r[o]) n.push(i()(a = "".concat(o, "=")).call(a, r[o])) } return encodeURI(i()(t = "".concat("https://carto.com/spatial-data-catalog/form/", "?")).call(t, n.join("&"))) } }, function(e, t, n) { "use strict"; n.d(t, "a", function () { return toTitleCase }); n(16), n(25); function toTitleCase(e) { return e.replace(/\w\S*/g, function (e) { return e.charAt(0).toUpperCase() + e.substr(1).toLowerCase() }).replace(/_/g, " ") } }, function(e, t, n) { "use strict"; n.d(t, "a", function () { return geometryTypeName }); var r = { LINESTRING: "Line", MULTILINESTRING: "Multiline", MULTIPLE: "Multiple", POLYGON: "Polygon", POINT: "Point", MULTIPOLYGON: "Multipolygon" }; function geometryTypeName(e) { return e ? r[e] : "Other" } }, function(e, t, n) { "use strict"; n.d(t, "a", function () { return temporalAggregationName }); var r = { "3yrs": "3 years", "5yrs": "5 years", daily: "Daily", weekly: "Weekly", yearly: "Yearly", quarterly: "Quarterly", hourly: "Hourly", seconds: "Seconds", monthly: "Monthly", "5minutes": "Minutes" }; function temporalAggregationName(e) { return r[e] } }, function(e, t, n) { e.exports = n(3411) },, function(e, t, n) { e.exports = n(3365) }, function(e, t, n) { e.exports = n(3377) }, function(e, t, n) { e.exports = function () { "use strict"; var e = navigator.userAgent, t = navigator.platform, n = /gecko\/\d/i.test(e), r = /MSIE \d/.test(e), i = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e), o = r || i, a = o && (r ? document.documentMode || 6 : i[1]), s = /WebKit\//.test(e), l = s && /Qt\/\d+\.\d+/.test(e), u = /Chrome\//.test(e), c = /Opera\//.test(e), d = /Apple Computer/.test(navigator.vendor), f = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e), h = /PhantomJS/.test(e), p = /AppleWebKit/.test(e) && /Mobile\/\w+/.test(e), m = p || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e), g = p || /Mac/.test(t), v = /\bCrOS\b/.test(e), y = /win/i.test(t), _ = c && e.match(/Version\/(\d*\.\d*)/); _ && (_ = Number(_[1])), _ && _ >= 15 && (c = !1, s = !0); var b = g && (l || c && (null == _ || _ < 12.11)), w = n || o && a >= 9, x = !1, C = !1; function CodeMirror(e, t) { if (!(this instanceof CodeMirror)) return new CodeMirror(e, t); this.options = t = t ? copyObj(t) : {}, copyObj(z, t, !1), setGuttersForLineNumbers(t); var r = t.value; "string" == typeof r && (r = new ce(r, t.mode, null, t.lineSeparator)), this.doc = r; var i = new CodeMirror.inputStyles[t.inputStyle](this), l = this.display = new function Display(e, t, r) { var i = this; this.input = r, i.scrollbarFiller = elt("div", null, "CodeMirror-scrollbar-filler"), i.scrollbarFiller.setAttribute("cm-not-content", "true"), i.gutterFiller = elt("div", null, "CodeMirror-gutter-filler"), i.gutterFiller.setAttribute("cm-not-content", "true"), i.lineDiv = elt("div", null, "CodeMirror-code"), i.selectionDiv = elt("div", null, null, "position: relative; z-index: 1"), i.cursorDiv = elt("div", null, "CodeMirror-cursors"), i.measure = elt("div", null, "CodeMirror-measure"), i.lineMeasure = elt("div", null, "CodeMirror-measure"), i.lineSpace = elt("div", [i.measure, i.lineMeasure, i.selectionDiv, i.cursorDiv, i.lineDiv], null, "position: relative; outline: none"), i.mover = elt("div", [elt("div", [i.lineSpace], "CodeMirror-lines")], null, "position: relative"), i.sizer = elt("div", [i.mover], "CodeMirror-sizer"), i.sizerWidth = null, i.heightForcer = elt("div", null, null, "position: absolute; height: " + we + "px; width: 1px;"), i.gutters = elt("div", null, "CodeMirror-gutters"), i.lineGutter = null, i.scroller = elt("div", [i.sizer, i.heightForcer, i.gutters], "CodeMirror-scroll"), i.scroller.setAttribute("tabIndex", "-1"), i.wrapper = elt("div", [i.scrollbarFiller, i.gutterFiller, i.scroller], "CodeMirror"), o && a < 8 && (i.gutters.style.zIndex = -1, i.scroller.style.paddingRight = 0), s || n && m || (i.scroller.draggable = !0), e && (e.appendChild ? e.appendChild(i.wrapper) : e(i.wrapper)), i.viewFrom = i.viewTo = t.first, i.reportedViewFrom = i.reportedViewTo = t.first, i.view = [], i.renderedView = null, i.externalMeasured = null, i.viewOffset = 0, i.lastWrapHeight = i.lastWrapWidth = 0, i.updateLineNumbers = null, i.nativeBarWidth = i.barHeight = i.barWidth = 0, i.scrollbarsClipped = !1, i.lineNumWidth = i.lineNumInnerWidth = i.lineNumChars = null, i.alignWidgets = !1, i.cachedCharWidth = i.cachedTextHeight = i.cachedPaddingH = null, i.maxLine = null, i.maxLineLength = 0, i.maxLineChanged = !1, i.wheelDX = i.wheelDY = i.wheelStartX = i.wheelStartY = null, i.shift = !1, i.selForContextMenu = null, i.activeTouch = null, r.init(i) }(e, r, i); l.wrapper.CodeMirror = this, updateGutters(this), themeChanged(this), t.lineWrapping && (this.display.wrapper.className += " CodeMirror-wrap"), t.autofocus && !m && l.input.focus(), initScrollbars(this), this.state = { keyMaps: [], overlays: [], modeGen: 0, overwrite: !1, delayingBlurEvent: !1, focused: !1, suppressEdits: !1, pasteIncoming: !1, cutIncoming: !1, selectingText: !1, draggingText: !1, highlight: new Delayed, keySeq: null, specialChars: null }; var u = this; for (var f in o && a < 11 && setTimeout(function () { u.display.input.reset(!0) }, 20), function registerEventHandlers(e) { var t = e.display; ge(t.scroller, "mousedown", operation(e, onMouseDown)), ge(t.scroller, "dblclick", o && a < 11 ? operation(e, function (t) { if (!signalDOMEvent(e, t)) { var n = posFromMouse(e, t); if (n && !clickInGutter(e, t) && !eventInWidget(e.display, t)) { he(t); var r = e.findWordAt(n); extendSelection(e.doc, r.anchor, r.head) } } }) : function (t) { signalDOMEvent(e, t) || he(t) }), w || ge(t.scroller, "contextmenu", function (t) { onContextMenu(e, t) }); var n, r = { end: 0 }; function finishTouch() { t.activeTouch && (n = setTimeout(function () { t.activeTouch = null }, 1e3), (r = t.activeTouch).end = +new Date) } function farAway(e, t) { if (null == t.left) return !0; var n = t.left - e.left, r = t.top - e.top; return n * n + r * r > 400 } ge(t.scroller, "touchstart", function (i) { if (!signalDOMEvent(e, i) && !function isMouseLikeTouchEvent(e) { if (1 != e.touches.length) return !1; var t = e.touches[0]; return t.radiusX <= 1 && t.radiusY <= 1 }(i)) { clearTimeout(n); var o = +new Date; t.activeTouch = { start: o, moved: !1, prev: o - r.end <= 300 ? r : null }, 1 == i.touches.length && (t.activeTouch.left = i.touches[0].pageX, t.activeTouch.top = i.touches[0].pageY) } }), ge(t.scroller, "touchmove", function () { t.activeTouch && (t.activeTouch.moved = !0) }), ge(t.scroller, "touchend", function (n) { var r = t.activeTouch; if (r && !eventInWidget(t, n) && null != r.left && !r.moved && new Date - r.start < 300) { var i, o = e.coordsChar(t.activeTouch, "page"); i = !r.prev || farAway(r, r.prev) ? new Range(o, o) : !r.prev.prev || farAway(r, r.prev.prev) ? e.findWordAt(o) : new Range(S(o.line, 0), clipPos(e.doc, S(o.line + 1, 0))), e.setSelection(i.anchor, i.head), e.focus(), he(n) } finishTouch() }), ge(t.scroller, "touchcancel", finishTouch), ge(t.scroller, "scroll", function () { t.scroller.clientHeight && (setScrollTop(e, t.scroller.scrollTop), setScrollLeft(e, t.scroller.scrollLeft, !0), _e(e, "scroll", e)) }), ge(t.scroller, "mousewheel", function (t) { onScrollWheel(e, t) }), ge(t.scroller, "DOMMouseScroll", function (t) { onScrollWheel(e, t) }), ge(t.wrapper, "scroll", function () { t.wrapper.scrollTop = t.wrapper.scrollLeft = 0 }), t.dragFunctions = { enter: function (t) { signalDOMEvent(e, t) || me(t) }, over: function (t) { signalDOMEvent(e, t) || (function onDragOver(e, t) { var n = posFromMouse(e, t); if (n) { var r = document.createDocumentFragment(); drawSelectionCursor(e, n, r), e.display.dragCursor || (e.display.dragCursor = elt("div", null, "CodeMirror-cursors CodeMirror-dragcursors"), e.display.lineSpace.insertBefore(e.display.dragCursor, e.display.cursorDiv)), removeChildrenAndAdd(e.display.dragCursor, r) } }(e, t), me(t)) }, start: function (t) { !function onDragStart(e, t) { if (o && (!e.state.draggingText || +new Date - O < 100)) me(t); else if (!signalDOMEvent(e, t) && !eventInWidget(e.display, t) && (t.dataTransfer.setData("Text", e.getSelection()), t.dataTransfer.effectAllowed = "copyMove", t.dataTransfer.setDragImage && !d)) { var n = elt("img", null, null, "position: fixed; left: 0; top: 0;"); n.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==", c && (n.width = n.height = 1, e.display.wrapper.appendChild(n), n._top = n.offsetTop), t.dataTransfer.setDragImage(n, 0, 0), c && n.parentNode.removeChild(n) } }(e, t) }, drop: operation(e, onDrop), leave: function (t) { signalDOMEvent(e, t) || clearDragCursor(e) } }; var i = t.input.getField(); ge(i, "keyup", function (t) { onKeyUp.call(e, t) }), ge(i, "keydown", operation(e, onKeyDown)), ge(i, "keypress", operation(e, onKeyPress)), ge(i, "focus", bind(onFocus, e)), ge(i, "blur", bind(onBlur, e)) }(this), function ensureGlobalHandlers() { Be || (function registerGlobalHandlers() { var e; ge(window, "resize", function () { null == e && (e = setTimeout(function () { e = null, forEachCodeMirror(onResize) }, 100)) }), ge(window, "blur", function () { forEachCodeMirror(onBlur) }) }(), Be = !0) }(), startOperation(this), this.curOp.forceUpdate = !0, attachDoc(this, r), t.autofocus && !m || u.hasFocus() ? setTimeout(bind(onFocus, this), 20) : onBlur(this), j) j.hasOwnProperty(f) && j[f](this, t[f], U); maybeUpdateLineNumberWidth(this), t.finishInit && t.finishInit(this); for (var h = 0; h < G.length; ++h)G[h](this); endOperation(this), s && t.lineWrapping && "optimizelegibility" == getComputedStyle(l.lineDiv).textRendering && (l.lineDiv.style.textRendering = "auto") } function loadMode(e) { e.doc.mode = CodeMirror.getMode(e.options, e.doc.modeOption), resetModeState(e) } function resetModeState(e) { e.doc.iter(function (e) { e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null) }), e.doc.frontier = e.doc.first, startWorker(e, 100), e.state.modeGen++, e.curOp && regChange(e) } function estimateHeight(e) { var t = textHeight(e.display), n = e.options.lineWrapping, r = n && Math.max(5, e.display.scroller.clientWidth / charWidth(e.display) - 3); return function (i) { if (lineIsHidden(e.doc, i)) return 0; var o = 0; if (i.widgets) for (var a = 0; a < i.widgets.length; a++)i.widgets[a].height && (o += i.widgets[a].height); return n ? o + (Math.ceil(i.text.length / r) || 1) * t : o + t } } function estimateLineHeights(e) { var t = e.doc, n = estimateHeight(e); t.iter(function (e) { var t = n(e); t != e.height && updateLineHeight(e, t) }) } function themeChanged(e) { e.display.wrapper.className = e.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") + e.options.theme.replace(/(^|\s)\s*/g, " cm-s-"), clearCaches(e) } function guttersChanged(e) { updateGutters(e), regChange(e), setTimeout(function () { alignHorizontally(e) }, 20) } function updateGutters(e) { var t = e.display.gutters, n = e.options.gutters; removeChildren(t); for (var r = 0; r < n.length; ++r) { var i = n[r], o = t.appendChild(elt("div", null, "CodeMirror-gutter " + i)); "CodeMirror-linenumbers" == i && (e.display.lineGutter = o, o.style.width = (e.display.lineNumWidth || 1) + "px") } t.style.display = r ? "" : "none", updateGutterSpace(e) } function updateGutterSpace(e) { var t = e.display.gutters.offsetWidth; e.display.sizer.style.marginLeft = t + "px" } function lineLength(e) { if (0 == e.height) return 0; for (var t, n = e.text.length, r = e; t = collapsedSpanAtStart(r);) { var i = t.find(0, !0); r = i.from.line, n += i.from.ch - i.to.ch } for (r = e; t = collapsedSpanAtEnd(r);) { var i = t.find(0, !0); n -= r.text.length - i.from.ch, r = i.to.line, n += r.text.length - i.to.ch } return n } function findMaxLine(e) { var t = e.display, n = e.doc; t.maxLine = getLine(n, n.first), t.maxLineLength = lineLength(t.maxLine), t.maxLineChanged = !0, n.iter(function (e) { var n = lineLength(e); n > t.maxLineLength && (t.maxLineLength = n, t.maxLine = e) }) } function setGuttersForLineNumbers(e) { var t = indexOf(e.gutters, "CodeMirror-linenumbers"); -1 == t && e.lineNumbers ? e.gutters = e.gutters.concat(["CodeMirror-linenumbers"]) : t > -1 && !e.lineNumbers && (e.gutters = e.gutters.slice(0), e.gutters.splice(t, 1)) } function measureForScrollbars(e) { var t = e.display, n = t.gutters.offsetWidth, r = Math.round(e.doc.height + paddingVert(e.display)); return { clientHeight: t.scroller.clientHeight, viewHeight: t.wrapper.clientHeight, scrollWidth: t.scroller.scrollWidth, clientWidth: t.scroller.clientWidth, viewWidth: t.wrapper.clientWidth, barLeft: e.options.fixedGutter ? n : 0, docHeight: r, scrollHeight: r + scrollGap(e) + t.barHeight, nativeBarWidth: t.nativeBarWidth, gutterWidth: n } } function NativeScrollbars(e, t, n) { this.cm = n; var r = this.vert = elt("div", [elt("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar"), i = this.horiz = elt("div", [elt("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar"); e(r), e(i), ge(r, "scroll", function () { r.clientHeight && t(r.scrollTop, "vertical") }), ge(i, "scroll", function () { i.clientWidth && t(i.scrollLeft, "horizontal") }), this.checkedZeroWidth = !1, o && a < 8 && (this.horiz.style.minHeight = this.vert.style.minWidth = "18px") } function NullScrollbars() { } function initScrollbars(e) { e.display.scrollbars && (e.display.scrollbars.clear(), e.display.scrollbars.addClass && Fe(e.display.wrapper, e.display.scrollbars.addClass)), e.display.scrollbars = new CodeMirror.scrollbarModel[e.options.scrollbarStyle](function (t) { e.display.wrapper.insertBefore(t, e.display.scrollbarFiller), ge(t, "mousedown", function () { e.state.focused && setTimeout(function () { e.display.input.focus() }, 0) }), t.setAttribute("cm-not-content", "true") }, function (t, n) { "horizontal" == n ? setScrollLeft(e, t) : setScrollTop(e, t) }, e), e.display.scrollbars.addClass && Ie(e.display.wrapper, e.display.scrollbars.addClass) } function updateScrollbars(e, t) { t || (t = measureForScrollbars(e)); var n = e.display.barWidth, r = e.display.barHeight; updateScrollbarsInner(e, t); for (var i = 0; i < 4 && n != e.display.barWidth || r != e.display.barHeight; i++)n != e.display.barWidth && e.options.lineWrapping && updateHeightsInViewport(e), updateScrollbarsInner(e, measureForScrollbars(e)), n = e.display.barWidth, r = e.display.barHeight } function updateScrollbarsInner(e, t) { var n = e.display, r = n.scrollbars.update(t); n.sizer.style.paddingRight = (n.barWidth = r.right) + "px", n.sizer.style.paddingBottom = (n.barHeight = r.bottom) + "px", n.heightForcer.style.borderBottom = r.bottom + "px solid transparent", r.right && r.bottom ? (n.scrollbarFiller.style.display = "block", n.scrollbarFiller.style.height = r.bottom + "px", n.scrollbarFiller.style.width = r.right + "px") : n.scrollbarFiller.style.display = "", r.bottom && e.options.coverGutterNextToScrollbar && e.options.fixedGutter ? (n.gutterFiller.style.display = "block", n.gutterFiller.style.height = r.bottom + "px", n.gutterFiller.style.width = t.gutterWidth + "px") : n.gutterFiller.style.display = "" } function visibleLines(e, t, n) { var r = n && null != n.top ? Math.max(0, n.top) : e.scroller.scrollTop; r = Math.floor(r - paddingTop(e)); var i = n && null != n.bottom ? n.bottom : r + e.wrapper.clientHeight, o = lineAtHeight(t, r), a = lineAtHeight(t, i); if (n && n.ensure) { var s = n.ensure.from.line, l = n.ensure.to.line; s < o ? (o = s, a = lineAtHeight(t, heightAtLine(getLine(t, s)) + e.wrapper.clientHeight)) : Math.min(l, t.lastLine()) >= a && (o = lineAtHeight(t, heightAtLine(getLine(t, l)) - e.wrapper.clientHeight), a = l) } return { from: o, to: Math.max(a, o + 1) } } function alignHorizontally(e) { var t = e.display, n = t.view; if (t.alignWidgets || t.gutters.firstChild && e.options.fixedGutter) { for (var r = compensateForHScroll(t) - t.scroller.scrollLeft + e.doc.scrollLeft, i = t.gutters.offsetWidth, o = r + "px", a = 0; a < n.length; a++)if (!n[a].hidden) { e.options.fixedGutter && n[a].gutter && (n[a].gutter.style.left = o); var s = n[a].alignable; if (s) for (var l = 0; l < s.length; l++)s[l].style.left = o } e.options.fixedGutter && (t.gutters.style.left = r + i + "px") } } function maybeUpdateLineNumberWidth(e) { if (!e.options.lineNumbers) return !1; var t = e.doc, n = lineNumberFor(e.options, t.first + t.size - 1), r = e.display; if (n.length != r.lineNumChars) { var i = r.measure.appendChild(elt("div", [elt("div", n)], "CodeMirror-linenumber CodeMirror-gutter-elt")), o = i.firstChild.offsetWidth, a = i.offsetWidth - o; return r.lineGutter.style.width = "", r.lineNumInnerWidth = Math.max(o, r.lineGutter.offsetWidth - a) + 1, r.lineNumWidth = r.lineNumInnerWidth + a, r.lineNumChars = r.lineNumInnerWidth ? n.length : -1, r.lineGutter.style.width = r.lineNumWidth + "px", updateGutterSpace(e), !0 } return !1 } function lineNumberFor(e, t) { return String(e.lineNumberFormatter(t + e.firstLineNumber)) } function compensateForHScroll(e) { return e.scroller.getBoundingClientRect().left - e.sizer.getBoundingClientRect().left } function DisplayUpdate(e, t, n) { var r = e.display; this.viewport = t, this.visible = visibleLines(r, e.doc, t), this.editorIsHidden = !r.wrapper.offsetWidth, this.wrapperHeight = r.wrapper.clientHeight, this.wrapperWidth = r.wrapper.clientWidth, this.oldDisplayWidth = displayWidth(e), this.force = n, this.dims = getDimensions(e), this.events = [] } function updateDisplayIfNeeded(e, t) { var n = e.display, r = e.doc; if (t.editorIsHidden) return resetView(e), !1; if (!t.force && t.visible.from >= n.viewFrom && t.visible.to <= n.viewTo && (null == n.updateLineNumbers || n.updateLineNumbers >= n.viewTo) && n.renderedView == n.view && 0 == countDirtyView(e)) return !1; maybeUpdateLineNumberWidth(e) && (resetView(e), t.dims = getDimensions(e)); var i = r.first + r.size, o = Math.max(t.visible.from - e.options.viewportMargin, r.first), a = Math.min(i, t.visible.to + e.options.viewportMargin); n.viewFrom < o && o - n.viewFrom < 20 && (o = Math.max(r.first, n.viewFrom)), n.viewTo > a && n.viewTo - a < 20 && (a = Math.min(i, n.viewTo)), C && (o = visualLineNo(e.doc, o), a = visualLineEndNo(e.doc, a)); var l = o != n.viewFrom || a != n.viewTo || n.lastWrapHeight != t.wrapperHeight || n.lastWrapWidth != t.wrapperWidth; !function adjustView(e, t, n) { var r = e.display; 0 == r.view.length || t >= r.viewTo || n <= r.viewFrom ? (r.view = buildViewArray(e, t, n), r.viewFrom = t) : (r.viewFrom > t ? r.view = buildViewArray(e, t, r.viewFrom).concat(r.view) : r.viewFrom < t && (r.view = r.view.slice(findViewIndex(e, t))), r.viewFrom = t, r.viewTo < n ? r.view = r.view.concat(buildViewArray(e, r.viewTo, n)) : r.viewTo > n && (r.view = r.view.slice(0, findViewIndex(e, n)))), r.viewTo = n }(e, o, a), n.viewOffset = heightAtLine(getLine(e.doc, n.viewFrom)), e.display.mover.style.top = n.viewOffset + "px"; var u = countDirtyView(e); if (!l && 0 == u && !t.force && n.renderedView == n.view && (null == n.updateLineNumbers || n.updateLineNumbers >= n.viewTo)) return !1; var c = activeElt(); return u > 4 && (n.lineDiv.style.display = "none"), function patchDisplay(e, t, n) { var r = e.display, i = e.options.lineNumbers, o = r.lineDiv, a = o.firstChild; function rm(t) { var n = t.nextSibling; return s && g && e.display.currentWheelTarget == t ? t.style.display = "none" : t.parentNode.removeChild(t), n } for (var l = r.view, u = r.viewFrom, c = 0; c < l.length; c++) { var d = l[c]; if (d.hidden); else if (d.node && d.node.parentNode == o) { for (; a != d.node;)a = rm(a); var f = i && null != t && t <= u && d.lineNumber; d.changes && (indexOf(d.changes, "gutter") > -1 && (f = !1), updateLineForChanges(e, d, u, n)), f && (removeChildren(d.lineNumber), d.lineNumber.appendChild(document.createTextNode(lineNumberFor(e.options, u)))), a = d.node.nextSibling } else { var h = buildLineElement(e, d, u, n); o.insertBefore(h, a) } u += d.size } for (; a;)a = rm(a) }(e, n.updateLineNumbers, t.dims), u > 4 && (n.lineDiv.style.display = ""), n.renderedView = n.view, c && activeElt() != c && c.offsetHeight && c.focus(), removeChildren(n.cursorDiv), removeChildren(n.selectionDiv), n.gutters.style.height = n.sizer.style.minHeight = 0, l && (n.lastWrapHeight = t.wrapperHeight, n.lastWrapWidth = t.wrapperWidth, startWorker(e, 400)), n.updateLineNumbers = null, !0 } function postUpdateDisplay(e, t) { for (var n = t.viewport, r = !0; (r && e.options.lineWrapping && t.oldDisplayWidth != displayWidth(e) || (n && null != n.top && (n = { top: Math.min(e.doc.height + paddingVert(e.display) - displayHeight(e), n.top) }), t.visible = visibleLines(e.display, e.doc, n), !(t.visible.from >= e.display.viewFrom && t.visible.to <= e.display.viewTo))) && updateDisplayIfNeeded(e, t); r = !1) { updateHeightsInViewport(e); var i = measureForScrollbars(e); updateSelection(e), updateScrollbars(e, i), setDocumentHeight(e, i) } t.signal(e, "update", e), e.display.viewFrom == e.display.reportedViewFrom && e.display.viewTo == e.display.reportedViewTo || (t.signal(e, "viewportChange", e, e.display.viewFrom, e.display.viewTo), e.display.reportedViewFrom = e.display.viewFrom, e.display.reportedViewTo = e.display.viewTo) } function updateDisplaySimple(e, t) { var n = new DisplayUpdate(e, t); if (updateDisplayIfNeeded(e, n)) { updateHeightsInViewport(e), postUpdateDisplay(e, n); var r = measureForScrollbars(e); updateSelection(e), updateScrollbars(e, r), setDocumentHeight(e, r), n.finish() } } function setDocumentHeight(e, t) { e.display.sizer.style.minHeight = t.docHeight + "px", e.display.heightForcer.style.top = t.docHeight + "px", e.display.gutters.style.height = t.docHeight + e.display.barHeight + scrollGap(e) + "px" } function updateHeightsInViewport(e) { for (var t = e.display, n = t.lineDiv.offsetTop, r = 0; r < t.view.length; r++) { var i, s = t.view[r]; if (!s.hidden) { if (o && a < 8) { var l = s.node.offsetTop + s.node.offsetHeight; i = l - n, n = l } else { var u = s.node.getBoundingClientRect(); i = u.bottom - u.top } var c = s.line.height - i; if (i < 2 && (i = textHeight(t)), (c > .001 || c < -.001) && (updateLineHeight(s.line, i), updateWidgetHeight(s.line), s.rest)) for (var d = 0; d < s.rest.length; d++)updateWidgetHeight(s.rest[d]) } } } function updateWidgetHeight(e) { if (e.widgets) for (var t = 0; t < e.widgets.length; ++t)e.widgets[t].height = e.widgets[t].node.parentNode.offsetHeight } function getDimensions(e) { for (var t = e.display, n = {}, r = {}, i = t.gutters.clientLeft, o = t.gutters.firstChild, a = 0; o; o = o.nextSibling, ++a)n[e.options.gutters[a]] = o.offsetLeft + o.clientLeft + i, r[e.options.gutters[a]] = o.clientWidth; return { fixedPos: compensateForHScroll(t), gutterTotalWidth: t.gutters.offsetWidth, gutterLeft: n, gutterWidth: r, wrapperWidth: t.wrapper.clientWidth } } function updateLineForChanges(e, t, n, r) { for (var i = 0; i < t.changes.length; i++) { var o = t.changes[i]; "text" == o ? updateLineText(e, t) : "gutter" == o ? updateLineGutter(e, t, n, r) : "class" == o ? updateLineClasses(t) : "widget" == o && updateLineWidgets(e, t, r) } t.changes = null } function ensureLineWrapped(e) { return e.node == e.text && (e.node = elt("div", null, null, "position: relative"), e.text.parentNode && e.text.parentNode.replaceChild(e.node, e.text), e.node.appendChild(e.text), o && a < 8 && (e.node.style.zIndex = 2)), e.node } function getLineContent(e, t) { var n = e.display.externalMeasured; return n && n.line == t.line ? (e.display.externalMeasured = null, t.measure = n.measure, n.built) : buildLineContent(e, t) } function updateLineText(e, t) { var n = t.text.className, r = getLineContent(e, t); t.text == t.node && (t.node = r.pre), t.text.parentNode.replaceChild(r.pre, t.text), t.text = r.pre, r.bgClass != t.bgClass || r.textClass != t.textClass ? (t.bgClass = r.bgClass, t.textClass = r.textClass, updateLineClasses(t)) : n && (t.text.className = n) } function updateLineClasses(e) { !function updateLineBackground(e) { var t = e.bgClass ? e.bgClass + " " + (e.line.bgClass || "") : e.line.bgClass; if (t && (t += " CodeMirror-linebackground"), e.background) t ? e.background.className = t : (e.background.parentNode.removeChild(e.background), e.background = null); else if (t) { var n = ensureLineWrapped(e); e.background = n.insertBefore(elt("div", null, t), n.firstChild) } }(e), e.line.wrapClass ? ensureLineWrapped(e).className = e.line.wrapClass : e.node != e.text && (e.node.className = ""); var t = e.textClass ? e.textClass + " " + (e.line.textClass || "") : e.line.textClass; e.text.className = t || "" } function updateLineGutter(e, t, n, r) { if (t.gutter && (t.node.removeChild(t.gutter), t.gutter = null), t.gutterBackground && (t.node.removeChild(t.gutterBackground), t.gutterBackground = null), t.line.gutterClass) { var i = ensureLineWrapped(t); t.gutterBackground = elt("div", null, "CodeMirror-gutter-background " + t.line.gutterClass, "left: " + (e.options.fixedGutter ? r.fixedPos : -r.gutterTotalWidth) + "px; width: " + r.gutterTotalWidth + "px"), i.insertBefore(t.gutterBackground, t.text) } var o = t.line.gutterMarkers; if (e.options.lineNumbers || o) { var i = ensureLineWrapped(t), a = t.gutter = elt("div", null, "CodeMirror-gutter-wrapper", "left: " + (e.options.fixedGutter ? r.fixedPos : -r.gutterTotalWidth) + "px"); if (e.display.input.setUneditable(a), i.insertBefore(a, t.text), t.line.gutterClass && (a.className += " " + t.line.gutterClass), !e.options.lineNumbers || o && o["CodeMirror-linenumbers"] || (t.lineNumber = a.appendChild(elt("div", lineNumberFor(e.options, n), "CodeMirror-linenumber CodeMirror-gutter-elt", "left: " + r.gutterLeft["CodeMirror-linenumbers"] + "px; width: " + e.display.lineNumInnerWidth + "px"))), o) for (var s = 0; s < e.options.gutters.length; ++s) { var l = e.options.gutters[s], u = o.hasOwnProperty(l) && o[l]; u && a.appendChild(elt("div", [u], "CodeMirror-gutter-elt", "left: " + r.gutterLeft[l] + "px; width: " + r.gutterWidth[l] + "px")) } } } function updateLineWidgets(e, t, n) { t.alignable && (t.alignable = null); for (var r = t.node.firstChild; r; r = i) { var i = r.nextSibling; "CodeMirror-linewidget" == r.className && t.node.removeChild(r) } insertLineWidgets(e, t, n) } function buildLineElement(e, t, n, r) { var i = getLineContent(e, t); return t.text = t.node = i.pre, i.bgClass && (t.bgClass = i.bgClass), i.textClass && (t.textClass = i.textClass), updateLineClasses(t), updateLineGutter(e, t, n, r), insertLineWidgets(e, t, r), t.node } function insertLineWidgets(e, t, n) { if (insertLineWidgetsFor(e, t.line, t, n, !0), t.rest) for (var r = 0; r < t.rest.length; r++)insertLineWidgetsFor(e, t.rest[r], t, n, !1) } function insertLineWidgetsFor(e, t, n, r, i) { if (t.widgets) for (var o = ensureLineWrapped(n), a = 0, s = t.widgets; a < s.length; ++a) { var l = s[a], u = elt("div", [l.node], "CodeMirror-linewidget"); l.handleMouseEvents || u.setAttribute("cm-ignore-events", "true"), positionLineWidget(l, u, n, r), e.display.input.setUneditable(u), i && l.above ? o.insertBefore(u, n.gutter || n.text) : o.appendChild(u), signalLater(l, "redraw") } } function positionLineWidget(e, t, n, r) { if (e.noHScroll) { (n.alignable || (n.alignable = [])).push(t); var i = r.wrapperWidth; t.style.left = r.fixedPos + "px", e.coverGutter || (i -= r.gutterTotalWidth, t.style.paddingLeft = r.gutterTotalWidth + "px"), t.style.width = i + "px" } e.coverGutter && (t.style.zIndex = 5, t.style.position = "relative", e.noHScroll || (t.style.marginLeft = -r.gutterTotalWidth + "px")) } NativeScrollbars.prototype = copyObj({ update: function (e) { var t = e.scrollWidth > e.clientWidth + 1, n = e.scrollHeight > e.clientHeight + 1, r = e.nativeBarWidth; if (n) { this.vert.style.display = "block", this.vert.style.bottom = t ? r + "px" : "0"; var i = e.viewHeight - (t ? r : 0); this.vert.firstChild.style.height = Math.max(0, e.scrollHeight - e.clientHeight + i) + "px" } else this.vert.style.display = "", this.vert.firstChild.style.height = "0"; if (t) { this.horiz.style.display = "block", this.horiz.style.right = n ? r + "px" : "0", this.horiz.style.left = e.barLeft + "px"; var o = e.viewWidth - e.barLeft - (n ? r : 0); this.horiz.firstChild.style.width = e.scrollWidth - e.clientWidth + o + "px" } else this.horiz.style.display = "", this.horiz.firstChild.style.width = "0"; return !this.checkedZeroWidth && e.clientHeight > 0 && (0 == r && this.zeroWidthHack(), this.checkedZeroWidth = !0), { right: n ? r : 0, bottom: t ? r : 0 } }, setScrollLeft: function (e) { this.horiz.scrollLeft != e && (this.horiz.scrollLeft = e), this.disableHoriz && this.enableZeroWidthBar(this.horiz, this.disableHoriz) }, setScrollTop: function (e) { this.vert.scrollTop != e && (this.vert.scrollTop = e), this.disableVert && this.enableZeroWidthBar(this.vert, this.disableVert) }, zeroWidthHack: function () { var e = g && !f ? "12px" : "18px"; this.horiz.style.height = this.vert.style.width = e, this.horiz.style.pointerEvents = this.vert.style.pointerEvents = "none", this.disableHoriz = new Delayed, this.disableVert = new Delayed }, enableZeroWidthBar: function (e, t) { e.style.pointerEvents = "auto", t.set(1e3, function maybeDisable() { var n = e.getBoundingClientRect(), r = document.elementFromPoint(n.left + 1, n.bottom - 1); r != e ? e.style.pointerEvents = "none" : t.set(1e3, maybeDisable) }) }, clear: function () { var e = this.horiz.parentNode; e.removeChild(this.horiz), e.removeChild(this.vert) } }, NativeScrollbars.prototype), NullScrollbars.prototype = copyObj({ update: function () { return { bottom: 0, right: 0 } }, setScrollLeft: function () { }, setScrollTop: function () { }, clear: function () { } }, NullScrollbars.prototype), CodeMirror.scrollbarModel = { native: NativeScrollbars, null: NullScrollbars }, DisplayUpdate.prototype.signal = function (e, t) { hasHandler(e, t) && this.events.push(arguments) }, DisplayUpdate.prototype.finish = function () { for (var e = 0; e < this.events.length; e++)_e.apply(null, this.events[e]) }; var S = CodeMirror.Pos = function (e, t) { if (!(this instanceof S)) return new S(e, t); this.line = e, this.ch = t }, k = CodeMirror.cmpPos = function (e, t) { return e.line - t.line || e.ch - t.ch }; function copyPos(e) { return S(e.line, e.ch) } function maxPos(e, t) { return k(e, t) < 0 ? t : e } function minPos(e, t) { return k(e, t) < 0 ? e : t } function ensureFocus(e) { e.state.focused || (e.display.input.focus(), onFocus(e)) } var T = null; function applyTextInput(e, t, n, r, i) { var o = e.doc; e.display.shift = !1, r || (r = o.sel); var a = e.state.pasteIncoming || "paste" == i, s = o.splitLines(t), l = null; if (a && r.ranges.length > 1) if (T && T.join("\n") == t) { if (r.ranges.length % T.length == 0) { l = []; for (var u = 0; u < T.length; u++)l.push(o.splitLines(T[u])) } } else s.length == r.ranges.length && (l = map(s, function (e) { return [e] })); for (var u = r.ranges.length - 1; u >= 0; u--) { var c = r.ranges[u], d = c.from(), f = c.to(); c.empty() && (n && n > 0 ? d = S(d.line, d.ch - n) : e.state.overwrite && !a && (f = S(f.line, Math.min(getLine(o, f.line).text.length, f.ch + lst(s).length)))); var h = e.curOp.updateInput, p = { from: d, to: f, text: l ? l[u % l.length] : s, origin: i || (a ? "paste" : e.state.cutIncoming ? "cut" : "+input") }; makeChange(e.doc, p), signalLater(e, "inputRead", e, p) } t && !a && triggerElectric(e, t), ensureCursorVisible(e), e.curOp.updateInput = h, e.curOp.typing = !0, e.state.pasteIncoming = e.state.cutIncoming = !1 } function handlePaste(e, t) { var n = e.clipboardData && e.clipboardData.getData("text/plain"); if (n) return e.preventDefault(), t.isReadOnly() || t.options.disableInput || runInOp(t, function () { applyTextInput(t, n, 0, null, "paste") }), !0 } function triggerElectric(e, t) { if (e.options.electricChars && e.options.smartIndent) for (var n = e.doc.sel, r = n.ranges.length - 1; r >= 0; r--) { var i = n.ranges[r]; if (!(i.head.ch > 100 || r && n.ranges[r - 1].head.line == i.head.line)) { var o = e.getModeAt(i.head), a = !1; if (o.electricChars) { for (var s = 0; s < o.electricChars.length; s++)if (t.indexOf(o.electricChars.charAt(s)) > -1) { a = indentLine(e, i.head.line, "smart"); break } } else o.electricInput && o.electricInput.test(getLine(e.doc, i.head.line).text.slice(0, i.head.ch)) && (a = indentLine(e, i.head.line, "smart")); a && signalLater(e, "electricInput", e, i.head.line) } } } function copyableRanges(e) { for (var t = [], n = [], r = 0; r < e.doc.sel.ranges.length; r++) { var i = e.doc.sel.ranges[r].head.line, o = { anchor: S(i, 0), head: S(i + 1, 0) }; n.push(o), t.push(e.getRange(o.anchor, o.head)) } return { text: t, ranges: n } } function disableBrowserMagic(e) { e.setAttribute("autocorrect", "off"), e.setAttribute("autocapitalize", "off"), e.setAttribute("spellcheck", "false") } function TextareaInput(e) { this.cm = e, this.prevInput = "", this.pollingFast = !1, this.polling = new Delayed, this.inaccurateSelection = !1, this.hasSelection = !1, this.composing = null } function hiddenTextarea() { var e = elt("textarea", null, null, "position: absolute; padding: 0; width: 1px; height: 1em; outline: none"), t = elt("div", [e], null, "overflow: hidden; position: relative; width: 3px; height: 0px;"); return s ? e.style.width = "1000px" : e.setAttribute("wrap", "off"), p && (e.style.border = "1px solid black"), disableBrowserMagic(e), t } function ContentEditableInput(e) { this.cm = e, this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null, this.polling = new Delayed, this.gracePeriod = !1 } function posToDOM(e, t) { var n = findViewForLine(e, t.line); if (!n || n.hidden) return null; var r = getLine(e.doc, t.line), i = mapFromLineView(n, r, t.line), o = getOrder(r), a = "left"; if (o) { var s = getBidiPartAt(o, t.ch); a = s % 2 ? "right" : "left" } var l = nodeAndOffsetInLineMap(i.map, t.ch, a); return l.offset = "right" == l.collapse ? l.end : l.start, l } function badPos(e, t) { return t && (e.bad = !0), e } function domToPos(e, t, n) { var r; if (t == e.display.lineDiv) { if (!(r = e.display.lineDiv.childNodes[n])) return badPos(e.clipPos(S(e.display.viewTo - 1)), !0); t = null, n = 0 } else for (r = t; ; r = r.parentNode) { if (!r || r == e.display.lineDiv) return null; if (r.parentNode && r.parentNode == e.display.lineDiv) break } for (var i = 0; i < e.display.view.length; i++) { var o = e.display.view[i]; if (o.node == r) return locateNodeInLineView(o, t, n) } } function locateNodeInLineView(e, t, n) { var r = e.text.firstChild, i = !1; if (!t || !De(r, t)) return badPos(S(lineNo(e.line), 0), !0); if (t == r && (i = !0, t = r.childNodes[n], n = 0, !t)) { var o = e.rest ? lst(e.rest) : e.line; return badPos(S(lineNo(o), o.text.length), i) } var a = 3 == t.nodeType ? t : null, s = t; for (a || 1 != t.childNodes.length || 3 != t.firstChild.nodeType || (a = t.firstChild, n && (n = a.nodeValue.length)); s.parentNode != r;)s = s.parentNode; var l = e.measure, u = l.maps; function find(t, n, r) { for (var i = -1; i < (u ? u.length : 0); i++)for (var o = i < 0 ? l.map : u[i], a = 0; a < o.length; a += 3) { var s = o[a + 2]; if (s == t || s == n) { var c = lineNo(i < 0 ? e.line : e.rest[i]), d = o[a] + r; return (r < 0 || s != t) && (d = o[a + (r ? 1 : 0)]), S(c, d) } } } var c = find(a, s, n); if (c) return badPos(c, i); for (var d = s.nextSibling, f = a ? a.nodeValue.length - n : 0; d; d = d.nextSibling) { if (c = find(d, d.firstChild, 0)) return badPos(S(c.line, c.ch - f), i); f += d.textContent.length } for (var h = s.previousSibling, f = n; h; h = h.previousSibling) { if (c = find(h, h.firstChild, -1)) return badPos(S(c.line, c.ch + f), i); f += d.textContent.length } } function Selection(e, t) { this.ranges = e, this.primIndex = t } function Range(e, t) { this.anchor = e, this.head = t } function normalizeSelection(e, t) { var n = e[t]; e.sort(function (e, t) { return k(e.from(), t.from()) }), t = indexOf(e, n); for (var r = 1; r < e.length; r++) { var i = e[r], o = e[r - 1]; if (k(o.to(), i.from()) >= 0) { var a = minPos(o.from(), i.from()), s = maxPos(o.to(), i.to()), l = o.empty() ? i.from() == i.head : o.from() == o.head; r <= t && --t, e.splice(--r, 2, new Range(l ? s : a, l ? a : s)) } } return new Selection(e, t) } function simpleSelection(e, t) { return new Selection([new Range(e, t || e)], 0) } function clipLine(e, t) { return Math.max(e.first, Math.min(t, e.first + e.size - 1)) } function clipPos(e, t) { if (t.line < e.first) return S(e.first, 0); var n = e.first + e.size - 1; return t.line > n ? S(n, getLine(e, n).text.length) : function clipToLen(e, t) { var n = e.ch; return null == n || n > t ? S(e.line, t) : n < 0 ? S(e.line, 0) : e }(t, getLine(e, t.line).text.length) } function isLine(e, t) { return t >= e.first && t < e.first + e.size } function clipPosArray(e, t) { for (var n = [], r = 0; r < t.length; r++)n[r] = clipPos(e, t[r]); return n } function extendRange(e, t, n, r) { if (e.cm && e.cm.display.shift || e.extend) { var i = t.anchor; if (r) { var o = k(n, i) < 0; o != k(r, i) < 0 ? (i = n, n = r) : o != k(n, r) < 0 && (n = r) } return new Range(i, n) } return new Range(r || n, n) } function extendSelection(e, t, n, r) { setSelection(e, new Selection([extendRange(e, e.sel.primary(), t, n)], 0), r) } function extendSelections(e, t, n) { for (var r = [], i = 0; i < e.sel.ranges.length; i++)r[i] = extendRange(e, e.sel.ranges[i], t[i], null); var o = normalizeSelection(r, e.sel.primIndex); setSelection(e, o, n) } function replaceOneSelection(e, t, n, r) { var i = e.sel.ranges.slice(0); i[t] = n, setSelection(e, normalizeSelection(i, e.sel.primIndex), r) } function setSimpleSelection(e, t, n, r) { setSelection(e, simpleSelection(t, n), r) } function setSelectionReplaceHistory(e, t, n) { var r = e.history.done, i = lst(r); i && i.ranges ? (r[r.length - 1] = t, setSelectionNoUndo(e, t, n)) : setSelection(e, t, n) } function setSelection(e, t, n) { setSelectionNoUndo(e, t, n), function addSelectionToHistory(e, t, n, r) { var i = e.history, o = r && r.origin; n == i.lastSelOp || o && i.lastSelOrigin == o && (i.lastModTime == i.lastSelTime && i.lastOrigin == o || function selectionEventCanBeMerged(e, t, n, r) { var i = t.charAt(0); return "*" == i || "+" == i && n.ranges.length == r.ranges.length && n.somethingSelected() == r.somethingSelected() && new Date - e.history.lastSelTime <= (e.cm ? e.cm.options.historyEventDelay : 500) }(e, o, lst(i.done), t)) ? i.done[i.done.length - 1] = t : pushSelectionToHistory(t, i.done), i.lastSelTime = +new Date, i.lastSelOrigin = o, i.lastSelOp = n, r && !1 !== r.clearRedo && clearSelectionEvents(i.undone) }(e, e.sel, e.cm ? e.cm.curOp.id : NaN, n) } function setSelectionNoUndo(e, t, n) { (hasHandler(e, "beforeSelectionChange") || e.cm && hasHandler(e.cm, "beforeSelectionChange")) && (t = function filterSelectionChange(e, t, n) { var r = { ranges: t.ranges, update: function (t) { this.ranges = []; for (var n = 0; n < t.length; n++)this.ranges[n] = new Range(clipPos(e, t[n].anchor), clipPos(e, t[n].head)) }, origin: n && n.origin }; return _e(e, "beforeSelectionChange", e, r), e.cm && _e(e.cm, "beforeSelectionChange", e.cm, r), r.ranges != t.ranges ? normalizeSelection(r.ranges, r.ranges.length - 1) : t }(e, t, n)); var r = n && n.bias || (k(t.primary().head, e.sel.primary().head) < 0 ? -1 : 1); setSelectionInner(e, skipAtomicInSelection(e, t, r, !0)), n && !1 === n.scroll || !e.cm || ensureCursorVisible(e.cm) } function setSelectionInner(e, t) { t.equals(e.sel) || (e.sel = t, e.cm && (e.cm.curOp.updateInput = e.cm.curOp.selectionChanged = !0, signalCursorActivity(e.cm)), signalLater(e, "cursorActivity", e)) } function reCheckSelection(e) { setSelectionInner(e, skipAtomicInSelection(e, e.sel, null, !1)) } function skipAtomicInSelection(e, t, n, r) { for (var i, o = 0; o < t.ranges.length; o++) { var a = t.ranges[o], s = t.ranges.length == e.sel.ranges.length && e.sel.ranges[o], l = skipAtomic(e, a.anchor, s && s.anchor, n, r), u = skipAtomic(e, a.head, s && s.head, n, r); (i || l != a.anchor || u != a.head) && (i || (i = t.ranges.slice(0, o)), i[o] = new Range(l, u)) } return i ? normalizeSelection(i, t.primIndex) : t } function skipAtomicInner(e, t, n, r, i) { var o = getLine(e, t.line); if (o.markedSpans) for (var a = 0; a < o.markedSpans.length; ++a) { var s = o.markedSpans[a], l = s.marker; if ((null == s.from || (l.inclusiveLeft ? s.from <= t.ch : s.from < t.ch)) && (null == s.to || (l.inclusiveRight ? s.to >= t.ch : s.to > t.ch))) { if (i && (_e(l, "beforeCursorEnter"), l.explicitlyCleared)) { if (o.markedSpans) { --a; continue } break } if (!l.atomic) continue; if (n) { var u, c = l.find(r < 0 ? 1 : -1); if ((r < 0 ? l.inclusiveRight : l.inclusiveLeft) && (c = movePos(e, c, -r, c && c.line == t.line ? o : null)), c && c.line == t.line && (u = k(c, n)) && (r < 0 ? u < 0 : u > 0)) return skipAtomicInner(e, c, t, r, i) } var d = l.find(r < 0 ? -1 : 1); return (r < 0 ? l.inclusiveLeft : l.inclusiveRight) && (d = movePos(e, d, r, d.line == t.line ? o : null)), d ? skipAtomicInner(e, d, t, r, i) : null } } return t } function skipAtomic(e, t, n, r, i) { var o = r || 1, a = skipAtomicInner(e, t, n, o, i) || !i && skipAtomicInner(e, t, n, o, !0) || skipAtomicInner(e, t, n, -o, i) || !i && skipAtomicInner(e, t, n, -o, !0); return a || (e.cantEdit = !0, S(e.first, 0)) } function movePos(e, t, n, r) { return n < 0 && 0 == t.ch ? t.line > e.first ? clipPos(e, S(t.line - 1)) : null : n > 0 && t.ch == (r || getLine(e, t.line)).text.length ? t.line < e.first + e.size - 1 ? S(t.line + 1, 0) : null : new S(t.line, t.ch + n) } function updateSelection(e) { e.display.input.showSelection(e.display.input.prepareSelection()) } function prepareSelection(e, t) { for (var n = e.doc, r = {}, i = r.cursors = document.createDocumentFragment(), o = r.selection = document.createDocumentFragment(), a = 0; a < n.sel.ranges.length; a++)if (!1 !== t || a != n.sel.primIndex) { var s = n.sel.ranges[a]; if (!(s.from().line >= e.display.viewTo || s.to().line < e.display.viewFrom)) { var l = s.empty(); (l || e.options.showCursorWhenSelecting) && drawSelectionCursor(e, s.head, i), l || drawSelectionRange(e, s, o) } } return r } function drawSelectionCursor(e, t, n) { var r = cursorCoords(e, t, "div", null, null, !e.options.singleCursorHeightPerLine), i = n.appendChild(elt("div", "\xa0", "CodeMirror-cursor")); if (i.style.left = r.left + "px", i.style.top = r.top + "px", i.style.height = Math.max(0, r.bottom - r.top) * e.options.cursorHeight + "px", r.other) { var o = n.appendChild(elt("div", "\xa0", "CodeMirror-cursor CodeMirror-secondarycursor")); o.style.display = "", o.style.left = r.other.left + "px", o.style.top = r.other.top + "px", o.style.height = .85 * (r.other.bottom - r.other.top) + "px" } } function drawSelectionRange(e, t, n) { var r = e.display, i = e.doc, o = document.createDocumentFragment(), a = paddingH(e.display), s = a.left, l = Math.max(r.sizerWidth, displayWidth(e) - r.sizer.offsetLeft) - a.right; function add(e, t, n, r) { t < 0 && (t = 0), t = Math.round(t), r = Math.round(r), o.appendChild(elt("div", null, "CodeMirror-selected", "position: absolute; left: " + e + "px; top: " + t + "px; width: " + (null == n ? l - e : n) + "px; height: " + (r - t) + "px")) } function drawForLine(t, n, r) { var o, a, u = getLine(i, t), c = u.text.length; function coords(n, r) { return charCoords(e, S(t, n), "div", u, r) } return function iterateBidiSections(e, t, n, r) { if (!e) return r(t, n, "ltr"); for (var i = !1, o = 0; o < e.length; ++o) { var a = e[o]; (a.from < n && a.to > t || t == n && a.to == t) && (r(Math.max(a.from, t), Math.min(a.to, n), 1 == a.level ? "rtl" : "ltr"), i = !0) } i || r(t, n, "ltr") }(getOrder(u), n || 0, null == r ? c : r, function (e, t, i) { var u, d, f, h = coords(e, "left"); if (e == t) u = h, d = f = h.left; else { if (u = coords(t - 1, "right"), "rtl" == i) { var p = h; h = u, u = p } d = h.left, f = u.right } null == n && 0 == e && (d = s), u.top - h.top > 3 && (add(d, h.top, null, h.bottom), d = s, h.bottom < u.top && add(d, h.bottom, null, u.top)), null == r && t == c && (f = l), (!o || h.top < o.top || h.top == o.top && h.left < o.left) && (o = h), (!a || u.bottom > a.bottom || u.bottom == a.bottom && u.right > a.right) && (a = u), d < s + 1 && (d = s), add(d, u.top, f - d, u.bottom) }), { start: o, end: a } } var u = t.from(), c = t.to(); if (u.line == c.line) drawForLine(u.line, u.ch, c.ch); else { var d = getLine(i, u.line), f = getLine(i, c.line), h = visualLine(d) == visualLine(f), p = drawForLine(u.line, u.ch, h ? d.text.length + 1 : null).end, m = drawForLine(c.line, h ? 0 : null, c.ch).start; h && (p.top < m.top - 2 ? (add(p.right, p.top, null, p.bottom), add(s, m.top, m.left, m.bottom)) : add(p.right, p.top, m.left - p.right, p.bottom)), p.bottom < m.top && add(s, p.bottom, null, m.top) } n.appendChild(o) } function restartBlink(e) { if (e.state.focused) { var t = e.display; clearInterval(t.blinker); var n = !0; t.cursorDiv.style.visibility = "", e.options.cursorBlinkRate > 0 ? t.blinker = setInterval(function () { t.cursorDiv.style.visibility = (n = !n) ? "" : "hidden" }, e.options.cursorBlinkRate) : e.options.cursorBlinkRate < 0 && (t.cursorDiv.style.visibility = "hidden") } } function startWorker(e, t) { e.doc.mode.startState && e.doc.frontier < e.display.viewTo && e.state.highlight.set(t, bind(highlightWorker, e)) } function highlightWorker(e) { var t = e.doc; if (t.frontier < t.first && (t.frontier = t.first), !(t.frontier >= e.display.viewTo)) { var n = +new Date + e.options.workTime, r = Y(t.mode, getStateBefore(e, t.frontier)), i = []; t.iter(t.frontier, Math.min(t.first + t.size, e.display.viewTo + 500), function (o) { if (t.frontier >= e.display.viewFrom) { var a = o.styles, s = o.text.length > e.options.maxHighlightLength, l = highlightLine(e, o, s ? Y(t.mode, r) : r, !0); o.styles = l.styles; var u = o.styleClasses, c = l.classes; c ? o.styleClasses = c : u && (o.styleClasses = null); for (var d = !a || a.length != o.styles.length || u != c && (!u || !c || u.bgClass != c.bgClass || u.textClass != c.textClass), f = 0; !d && f < a.length; ++f)d = a[f] != o.styles[f]; d && i.push(t.frontier), o.stateAfter = s ? r : Y(t.mode, r) } else o.text.length <= e.options.maxHighlightLength && processLine(e, o.text, r), o.stateAfter = t.frontier % 5 == 0 ? Y(t.mode, r) : null; if (++t.frontier, +new Date > n) return startWorker(e, e.options.workDelay), !0 }), i.length && runInOp(e, function () { for (var t = 0; t < i.length; t++)regLineChange(e, i[t], "text") }) } } function getStateBefore(e, t, n) { var r = e.doc, i = e.display; if (!r.mode.startState) return !0; var o = function findStartLine(e, t, n) { for (var r, i, o = e.doc, a = n ? -1 : t - (e.doc.mode.innerMode ? 1e3 : 100), s = t; s > a; --s) { if (s <= o.first) return o.first; var l = getLine(o, s - 1); if (l.stateAfter && (!n || s <= o.frontier)) return s; var u = Te(l.text, null, e.options.tabSize); (null == i || r > u) && (i = s - 1, r = u) } return i }(e, t, n), a = o > r.first && getLine(r, o - 1).stateAfter; return a = a ? Y(r.mode, a) : Z(r.mode), r.iter(o, t, function (n) { processLine(e, n.text, a); var s = o == t - 1 || o % 5 == 0 || o >= i.viewFrom && o < i.viewTo; n.stateAfter = s ? Y(r.mode, a) : null, ++o }), n && (r.frontier = o), a } function paddingTop(e) { return e.lineSpace.offsetTop } function paddingVert(e) { return e.mover.offsetHeight - e.lineSpace.offsetHeight } function paddingH(e) { if (e.cachedPaddingH) return e.cachedPaddingH; var t = removeChildrenAndAdd(e.measure, elt("pre", "x")), n = window.getComputedStyle ? window.getComputedStyle(t) : t.currentStyle, r = { left: parseInt(n.paddingLeft), right: parseInt(n.paddingRight) }; return isNaN(r.left) || isNaN(r.right) || (e.cachedPaddingH = r), r } function scrollGap(e) { return we - e.display.nativeBarWidth } function displayWidth(e) { return e.display.scroller.clientWidth - scrollGap(e) - e.display.barWidth } function displayHeight(e) { return e.display.scroller.clientHeight - scrollGap(e) - e.display.barHeight } function mapFromLineView(e, t, n) { if (e.line == t) return { map: e.measure.map, cache: e.measure.cache }; for (var r = 0; r < e.rest.length; r++)if (e.rest[r] == t) return { map: e.measure.maps[r], cache: e.measure.caches[r] }; for (var r = 0; r < e.rest.length; r++)if (lineNo(e.rest[r]) > n) return { map: e.measure.maps[r], cache: e.measure.caches[r], before: !0 } } function measureChar(e, t, n, r) { return measureCharPrepared(e, prepareMeasureForLine(e, t), n, r) } function findViewForLine(e, t) { if (t >= e.display.viewFrom && t < e.display.viewTo) return e.display.view[findViewIndex(e, t)]; var n = e.display.externalMeasured; return n && t >= n.lineN && t < n.lineN + n.size ? n : void 0 } function prepareMeasureForLine(e, t) { var n = lineNo(t), r = findViewForLine(e, n); r && !r.text ? r = null : r && r.changes && (updateLineForChanges(e, r, n, getDimensions(e)), e.curOp.forceUpdate = !0), r || (r = function updateExternalMeasurement(e, t) { var n = lineNo(t = visualLine(t)), r = e.display.externalMeasured = new LineView(e.doc, t, n); r.lineN = n; var i = r.built = buildLineContent(e, r); return r.text = i.pre, removeChildrenAndAdd(e.display.lineMeasure, i.pre), r }(e, t)); var i = mapFromLineView(r, t, n); return { line: t, view: r, rect: null, map: i.map, cache: i.cache, before: i.before, hasHeights: !1 } } function measureCharPrepared(e, t, n, r, i) { t.before && (n = -1); var s, l = n + (r || ""); return t.cache.hasOwnProperty(l) ? s = t.cache[l] : (t.rect || (t.rect = t.view.text.getBoundingClientRect()), t.hasHeights || (function ensureLineHeights(e, t, n) { var r = e.options.lineWrapping, i = r && displayWidth(e); if (!t.measure.heights || r && t.measure.width != i) { var o = t.measure.heights = []; if (r) { t.measure.width = i; for (var a = t.text.firstChild.getClientRects(), s = 0; s < a.length - 1; s++) { var l = a[s], u = a[s + 1]; Math.abs(l.bottom - u.bottom) > 2 && o.push((l.bottom + u.top) / 2 - n.top) } } o.push(n.bottom - n.top) } }(e, t.view, t.rect), t.hasHeights = !0), (s = function measureCharInner(e, t, n, r) { var i, s = nodeAndOffsetInLineMap(t.map, n, r), l = s.node, u = s.start, c = s.end, d = s.collapse; if (3 == l.nodeType) { for (var f = 0; f < 4; f++) { for (; u && isExtendingChar(t.line.text.charAt(s.coverStart + u));)--u; for (; s.coverStart + c < s.coverEnd && isExtendingChar(t.line.text.charAt(s.coverStart + c));)++c; if (o && a < 9 && 0 == u && c == s.coverEnd - s.coverStart) i = l.parentNode.getBoundingClientRect(); else if (o && e.options.lineWrapping) { var h = Re(l, u, c).getClientRects(); i = h.length ? h["right" == r ? h.length - 1 : 0] : M } else i = Re(l, u, c).getBoundingClientRect() || M; if (i.left || i.right || 0 == u) break; c = u, u -= 1, d = "right" } o && a < 11 && (i = function maybeUpdateRectForZooming(e, t) { if (!window.screen || null == screen.logicalXDPI || screen.logicalXDPI == screen.deviceXDPI || !function hasBadZoomedRects(e) { if (null != Ge) return Ge; var t = removeChildrenAndAdd(e, elt("span", "x")), n = t.getBoundingClientRect(), r = Re(t, 0, 1).getBoundingClientRect(); return Ge = Math.abs(n.left - r.left) > 1 }(e)) return t; var n = screen.logicalXDPI / screen.deviceXDPI, r = screen.logicalYDPI / screen.deviceYDPI; return { left: t.left * n, right: t.right * n, top: t.top * r, bottom: t.bottom * r } }(e.display.measure, i)) } else u > 0 && (d = r = "right"), i = e.options.lineWrapping && (h = l.getClientRects()).length > 1 ? h["right" == r ? h.length - 1 : 0] : l.getBoundingClientRect(); if (o && a < 9 && !u && (!i || !i.left && !i.right)) { var p = l.parentNode.getClientRects()[0]; i = p ? { left: p.left, right: p.left + charWidth(e.display), top: p.top, bottom: p.bottom } : M } for (var m = i.top - t.rect.top, g = i.bottom - t.rect.top, v = (m + g) / 2, y = t.view.measure.heights, f = 0; f < y.length - 1 && !(v < y[f]); f++); var _ = f ? y[f - 1] : 0, b = y[f], w = { left: ("right" == d ? i.right : i.left) - t.rect.left, right: ("left" == d ? i.left : i.right) - t.rect.left, top: _, bottom: b }; return i.left || i.right || (w.bogus = !0), e.options.singleCursorHeightPerLine || (w.rtop = m, w.rbottom = g), w }(e, t, n, r)).bogus || (t.cache[l] = s)), { left: s.left, right: s.right, top: i ? s.rtop : s.top, bottom: i ? s.rbottom : s.bottom } } TextareaInput.prototype = copyObj({ init: function (e) { var t = this, n = this.cm, r = this.wrapper = hiddenTextarea(), i = this.textarea = r.firstChild; function prepareCopyCut(e) { if (!signalDOMEvent(n, e)) { if (n.somethingSelected()) T = n.getSelections(), t.inaccurateSelection && (t.prevInput = "", t.inaccurateSelection = !1, i.value = T.join("\n"), Ee(i)); else { if (!n.options.lineWiseCopyCut) return; var r = copyableRanges(n); T = r.text, "cut" == e.type ? n.setSelections(r.ranges, null, Ce) : (t.prevInput = "", i.value = r.text.join("\n"), Ee(i)) } "cut" == e.type && (n.state.cutIncoming = !0) } } e.wrapper.insertBefore(r, e.wrapper.firstChild), p && (i.style.width = "0px"), ge(i, "input", function () { o && a >= 9 && t.hasSelection && (t.hasSelection = null), t.poll() }), ge(i, "paste", function (e) { signalDOMEvent(n, e) || handlePaste(e, n) || (n.state.pasteIncoming = !0, t.fastPoll()) }), ge(i, "cut", prepareCopyCut), ge(i, "copy", prepareCopyCut), ge(e.scroller, "paste", function (r) { eventInWidget(e, r) || signalDOMEvent(n, r) || (n.state.pasteIncoming = !0, t.focus()) }), ge(e.lineSpace, "selectstart", function (t) { eventInWidget(e, t) || he(t) }), ge(i, "compositionstart", function () { var e = n.getCursor("from"); t.composing && t.composing.range.clear(), t.composing = { start: e, range: n.markText(e, n.getCursor("to"), { className: "CodeMirror-composing" }) } }), ge(i, "compositionend", function () { t.composing && (t.poll(), t.composing.range.clear(), t.composing = null) }) }, prepareSelection: function () { var e = this.cm, t = e.display, n = e.doc, r = prepareSelection(e); if (e.options.moveInputWithCursor) { var i = cursorCoords(e, n.sel.primary().head, "div"), o = t.wrapper.getBoundingClientRect(), a = t.lineDiv.getBoundingClientRect(); r.teTop = Math.max(0, Math.min(t.wrapper.clientHeight - 10, i.top + a.top - o.top)), r.teLeft = Math.max(0, Math.min(t.wrapper.clientWidth - 10, i.left + a.left - o.left)) } return r }, showSelection: function (e) { var t = this.cm, n = t.display; removeChildrenAndAdd(n.cursorDiv, e.cursors), removeChildrenAndAdd(n.selectionDiv, e.selection), null != e.teTop && (this.wrapper.style.top = e.teTop + "px", this.wrapper.style.left = e.teLeft + "px") }, reset: function (e) { if (!this.contextMenuPending) { var t, n, r = this.cm, i = r.doc; if (r.somethingSelected()) { this.prevInput = ""; var s = i.sel.primary(), l = (t = Ve && (s.to().line - s.from().line > 100 || (n = r.getSelection()).length > 1e3)) ? "-" : n || r.getSelection(); this.textarea.value = l, r.state.focused && Ee(this.textarea), o && a >= 9 && (this.hasSelection = l) } else e || (this.prevInput = this.textarea.value = "", o && a >= 9 && (this.hasSelection = null)); this.inaccurateSelection = t } }, getField: function () { return this.textarea }, supportsTouch: function () { return !1 }, focus: function () { if ("nocursor" != this.cm.options.readOnly && (!m || activeElt() != this.textarea)) try { this.textarea.focus() } catch (e) { } }, blur: function () { this.textarea.blur() }, resetPosition: function () { this.wrapper.style.top = this.wrapper.style.left = 0 }, receivedFocus: function () { this.slowPoll() }, slowPoll: function () { var e = this; e.pollingFast || e.polling.set(this.cm.options.pollInterval, function () { e.poll(), e.cm.state.focused && e.slowPoll() }) }, fastPoll: function () { var e = !1, t = this; t.pollingFast = !0, t.polling.set(20, function p() { var n = t.poll(); n || e ? (t.pollingFast = !1, t.slowPoll()) : (e = !0, t.polling.set(60, p)) }) }, poll: function () { var e = this.cm, t = this.textarea, n = this.prevInput; if (this.contextMenuPending || !e.state.focused || He(t) && !n && !this.composing || e.isReadOnly() || e.options.disableInput || e.state.keySeq) return !1; var r = t.value; if (r == n && !e.somethingSelected()) return !1; if (o && a >= 9 && this.hasSelection === r || g && /[\uf700-\uf7ff]/.test(r)) return e.display.input.reset(), !1; if (e.doc.sel == e.display.selForContextMenu) { var i = r.charCodeAt(0); if (8203 != i || n || (n = "\u200b"), 8666 == i) return this.reset(), this.cm.execCommand("undo") } for (var s = 0, l = Math.min(n.length, r.length); s < l && n.charCodeAt(s) == r.charCodeAt(s);)++s; var u = this; return runInOp(e, function () { applyTextInput(e, r.slice(s), n.length - s, null, u.composing ? "*compose" : null), r.length > 1e3 || r.indexOf("\n") > -1 ? t.value = u.prevInput = "" : u.prevInput = r, u.composing && (u.composing.range.clear(), u.composing.range = e.markText(u.composing.start, e.getCursor("to"), { className: "CodeMirror-composing" })) }), !0 }, ensurePolled: function () { this.pollingFast && this.poll() && (this.pollingFast = !1) }, onKeyPress: function () { o && a >= 9 && (this.hasSelection = null), this.fastPoll() }, onContextMenu: function (e) { var t = this, n = t.cm, r = n.display, i = t.textarea, l = posFromMouse(n, e), u = r.scroller.scrollTop; if (l && !c) { var d = n.options.resetSelectionOnContextMenu; d && -1 == n.doc.sel.contains(l) && operation(n, setSelection)(n.doc, simpleSelection(l), Ce); var f = i.style.cssText, h = t.wrapper.style.cssText; t.wrapper.style.cssText = "position: absolute"; var p = t.wrapper.getBoundingClientRect(); if (i.style.cssText = "position: absolute; width: 30px; height: 30px; top: " + (e.clientY - p.top - 5) + "px; left: " + (e.clientX - p.left - 5) + "px; z-index: 1000; background: " + (o ? "rgba(255, 255, 255, .05)" : "transparent") + "; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);", s) var m = window.scrollY; if (r.input.focus(), s && window.scrollTo(null, m), r.input.reset(), n.somethingSelected() || (i.value = t.prevInput = " "), t.contextMenuPending = !0, r.selForContextMenu = n.doc.sel, clearTimeout(r.detectingSelectAll), o && a >= 9 && prepareSelectAllHack(), w) { me(e); var g = function () { ye(window, "mouseup", g), setTimeout(rehide, 20) }; ge(window, "mouseup", g) } else setTimeout(rehide, 50) } function prepareSelectAllHack() { if (null != i.selectionStart) { var e = n.somethingSelected(), o = "\u200b" + (e ? i.value : ""); i.value = "\u21da", i.value = o, t.prevInput = e ? "" : "\u200b", i.selectionStart = 1, i.selectionEnd = o.length, r.selForContextMenu = n.doc.sel } } function rehide() { if (t.contextMenuPending = !1, t.wrapper.style.cssText = h, i.style.cssText = f, o && a < 9 && r.scrollbars.setScrollTop(r.scroller.scrollTop = u), null != i.selectionStart) { (!o || o && a < 9) && prepareSelectAllHack(); var e = 0, s = function () { r.selForContextMenu == n.doc.sel && 0 == i.selectionStart && i.selectionEnd > 0 && "\u200b" == t.prevInput ? operation(n, K.selectAll)(n) : e++ < 10 ? r.detectingSelectAll = setTimeout(s, 500) : r.input.reset() }; r.detectingSelectAll = setTimeout(s, 200) } } }, readOnlyChanged: function (e) { e || this.reset() }, setUneditable: nothing, needsContentAttribute: !1 }, TextareaInput.prototype), ContentEditableInput.prototype = copyObj({ init: function (e) { var t = this, n = t.cm, r = t.div = e.lineDiv; function onCopyCut(e) { if (!signalDOMEvent(n, e)) { if (n.somethingSelected()) T = n.getSelections(), "cut" == e.type && n.replaceSelection("", null, "cut"); else { if (!n.options.lineWiseCopyCut) return; var t = copyableRanges(n); T = t.text, "cut" == e.type && n.operation(function () { n.setSelections(t.ranges, 0, Ce), n.replaceSelection("", null, "cut") }) } if (e.clipboardData && !p) e.preventDefault(), e.clipboardData.clearData(), e.clipboardData.setData("text/plain", T.join("\n")); else { var r = hiddenTextarea(), i = r.firstChild; n.display.lineSpace.insertBefore(r, n.display.lineSpace.firstChild), i.value = T.join("\n"); var o = document.activeElement; Ee(i), setTimeout(function () { n.display.lineSpace.removeChild(r), o.focus() }, 50) } } } disableBrowserMagic(r), ge(r, "paste", function (e) { signalDOMEvent(n, e) || handlePaste(e, n) }), ge(r, "compositionstart", function (e) { var r = e.data; if (t.composing = { sel: n.doc.sel, data: r, startData: r }, r) { var i = n.doc.sel.primary(), o = n.getLine(i.head.line), a = o.indexOf(r, Math.max(0, i.head.ch - r.length)); a > -1 && a <= i.head.ch && (t.composing.sel = simpleSelection(S(i.head.line, a), S(i.head.line, a + r.length))) } }), ge(r, "compositionupdate", function (e) { t.composing.data = e.data }), ge(r, "compositionend", function (e) { var n = t.composing; n && (e.data == n.startData || /\u200b/.test(e.data) || (n.data = e.data), setTimeout(function () { n.handled || t.applyComposition(n), t.composing == n && (t.composing = null) }, 50)) }), ge(r, "touchstart", function () { t.forceCompositionEnd() }), ge(r, "input", function () { t.composing || !n.isReadOnly() && t.pollContent() || runInOp(t.cm, function () { regChange(n) }) }), ge(r, "copy", onCopyCut), ge(r, "cut", onCopyCut) }, prepareSelection: function () { var e = prepareSelection(this.cm, !1); return e.focus = this.cm.state.focused, e }, showSelection: function (e) { e && this.cm.display.view.length && (e.focus && this.showPrimarySelection(), this.showMultipleSelections(e)) }, showPrimarySelection: function () { var e = window.getSelection(), t = this.cm.doc.sel.primary(), r = domToPos(this.cm, e.anchorNode, e.anchorOffset), i = domToPos(this.cm, e.focusNode, e.focusOffset); if (!r || r.bad || !i || i.bad || 0 != k(minPos(r, i), t.from()) || 0 != k(maxPos(r, i), t.to())) { var o = posToDOM(this.cm, t.from()), a = posToDOM(this.cm, t.to()); if (o || a) { var s = this.cm.display.view, l = e.rangeCount && e.getRangeAt(0); if (o) { if (!a) { var u = s[s.length - 1].measure, c = u.maps ? u.maps[u.maps.length - 1] : u.map; a = { node: c[c.length - 1], offset: c[c.length - 2] - c[c.length - 3] } } } else o = { node: s[0].measure.map[2], offset: 0 }; try { var d = Re(o.node, o.offset, a.offset, a.node) } catch (e) { } d && (!n && this.cm.state.focused ? (e.collapse(o.node, o.offset), d.collapsed || e.addRange(d)) : (e.removeAllRanges(), e.addRange(d)), l && null == e.anchorNode ? e.addRange(l) : n && this.startGracePeriod()), this.rememberSelection() } } }, startGracePeriod: function () { var e = this; clearTimeout(this.gracePeriod), this.gracePeriod = setTimeout(function () { e.gracePeriod = !1, e.selectionChanged() && e.cm.operation(function () { e.cm.curOp.selectionChanged = !0 }) }, 20) }, showMultipleSelections: function (e) { removeChildrenAndAdd(this.cm.display.cursorDiv, e.cursors), removeChildrenAndAdd(this.cm.display.selectionDiv, e.selection) }, rememberSelection: function () { var e = window.getSelection(); this.lastAnchorNode = e.anchorNode, this.lastAnchorOffset = e.anchorOffset, this.lastFocusNode = e.focusNode, this.lastFocusOffset = e.focusOffset }, selectionInEditor: function () { var e = window.getSelection(); if (!e.rangeCount) return !1; var t = e.getRangeAt(0).commonAncestorContainer; return De(this.div, t) }, focus: function () { "nocursor" != this.cm.options.readOnly && this.div.focus() }, blur: function () { this.div.blur() }, getField: function () { return this.div }, supportsTouch: function () { return !0 }, receivedFocus: function () { var e = this; this.selectionInEditor() ? this.pollSelection() : runInOp(this.cm, function () { e.cm.curOp.selectionChanged = !0 }), this.polling.set(this.cm.options.pollInterval, function poll() { e.cm.state.focused && (e.pollSelection(), e.polling.set(e.cm.options.pollInterval, poll)) }) }, selectionChanged: function () { var e = window.getSelection(); return e.anchorNode != this.lastAnchorNode || e.anchorOffset != this.lastAnchorOffset || e.focusNode != this.lastFocusNode || e.focusOffset != this.lastFocusOffset }, pollSelection: function () { if (!this.composing && !this.gracePeriod && this.selectionChanged()) { var e = window.getSelection(), t = this.cm; this.rememberSelection(); var n = domToPos(t, e.anchorNode, e.anchorOffset), r = domToPos(t, e.focusNode, e.focusOffset); n && r && runInOp(t, function () { setSelection(t.doc, simpleSelection(n, r), Ce), (n.bad || r.bad) && (t.curOp.selectionChanged = !0) }) } }, pollContent: function () { var e, t = this.cm, n = t.display, r = t.doc.sel.primary(), i = r.from(), o = r.to(); if (i.line < n.viewFrom || o.line > n.viewTo - 1) return !1; if (i.line == n.viewFrom || 0 == (e = findViewIndex(t, i.line))) var a = lineNo(n.view[0].line), s = n.view[0].node; else var a = lineNo(n.view[e].line), s = n.view[e - 1].node.nextSibling; var l = findViewIndex(t, o.line); if (l == n.view.length - 1) var u = n.viewTo - 1, c = n.lineDiv.lastChild; else var u = lineNo(n.view[l + 1].line) - 1, c = n.view[l + 1].node.previousSibling; for (var d = t.doc.splitLines(function domTextBetween(e, t, n, r, i) { var o = "", a = !1, s = e.doc.lineSeparator(); function walk(t) { if (1 == t.nodeType) { var n = t.getAttribute("cm-text"); if (null != n) return "" == n && (n = t.textContent.replace(/\u200b/g, "")), void (o += n); var l, u = t.getAttribute("cm-marker"); if (u) { var c = e.findMarks(S(r, 0), S(i + 1, 0), function recognizeMarker(e) { return function (t) { return t.id == e } }(+u)); return void (c.length && (l = c[0].find()) && (o += getBetween(e.doc, l.from, l.to).join(s))) } if ("false" == t.getAttribute("contenteditable")) return; for (var d = 0; d < t.childNodes.length; d++)walk(t.childNodes[d]); /^(pre|div|p)$/i.test(t.nodeName) && (a = !0) } else if (3 == t.nodeType) { var f = t.nodeValue; if (!f) return; a && (o += s, a = !1), o += f } } for (; walk(t), t != n;)t = t.nextSibling; return o }(t, s, c, a, u)), f = getBetween(t.doc, S(a, 0), S(u, getLine(t.doc, u).text.length)); d.length > 1 && f.length > 1;)if (lst(d) == lst(f)) d.pop(), f.pop(), u--; else { if (d[0] != f[0]) break; d.shift(), f.shift(), a++ } for (var h = 0, p = 0, m = d[0], g = f[0], v = Math.min(m.length, g.length); h < v && m.charCodeAt(h) == g.charCodeAt(h);)++h; for (var y = lst(d), _ = lst(f), b = Math.min(y.length - (1 == d.length ? h : 0), _.length - (1 == f.length ? h : 0)); p < b && y.charCodeAt(y.length - p - 1) == _.charCodeAt(_.length - p - 1);)++p; d[d.length - 1] = y.slice(0, y.length - p), d[0] = d[0].slice(h); var w = S(a, h), x = S(u, f.length ? lst(f).length - p : 0); return d.length > 1 || d[0] || k(w, x) ? (replaceRange(t.doc, d, w, x, "+input"), !0) : void 0 }, ensurePolled: function () { this.forceCompositionEnd() }, reset: function () { this.forceCompositionEnd() }, forceCompositionEnd: function () { this.composing && !this.composing.handled && (this.applyComposition(this.composing), this.composing.handled = !0, this.div.blur(), this.div.focus()) }, applyComposition: function (e) { this.cm.isReadOnly() ? operation(this.cm, regChange)(this.cm) : e.data && e.data != e.startData && operation(this.cm, applyTextInput)(this.cm, e.data, 0, e.sel) }, setUneditable: function (e) { e.contentEditable = "false" }, onKeyPress: function (e) { e.preventDefault(), this.cm.isReadOnly() || operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(null == e.charCode ? e.keyCode : e.charCode), 0) }, readOnlyChanged: function (e) { this.div.contentEditable = String("nocursor" != e) }, onContextMenu: nothing, resetPosition: nothing, needsContentAttribute: !0 }, ContentEditableInput.prototype), CodeMirror.inputStyles = { textarea: TextareaInput, contenteditable: ContentEditableInput }, Selection.prototype = { primary: function () { return this.ranges[this.primIndex] }, equals: function (e) { if (e == this) return !0; if (e.primIndex != this.primIndex || e.ranges.length != this.ranges.length) return !1; for (var t = 0; t < this.ranges.length; t++) { var n = this.ranges[t], r = e.ranges[t]; if (0 != k(n.anchor, r.anchor) || 0 != k(n.head, r.head)) return !1 } return !0 }, deepCopy: function () { for (var e = [], t = 0; t < this.ranges.length; t++)e[t] = new Range(copyPos(this.ranges[t].anchor), copyPos(this.ranges[t].head)); return new Selection(e, this.primIndex) }, somethingSelected: function () { for (var e = 0; e < this.ranges.length; e++)if (!this.ranges[e].empty()) return !0; return !1 }, contains: function (e, t) { t || (t = e); for (var n = 0; n < this.ranges.length; n++) { var r = this.ranges[n]; if (k(t, r.from()) >= 0 && k(e, r.to()) <= 0) return n } return -1 } }, Range.prototype = { from: function () { return minPos(this.anchor, this.head) }, to: function () { return maxPos(this.anchor, this.head) }, empty: function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch } }; var L, M = { left: 0, right: 0, top: 0, bottom: 0 }; function nodeAndOffsetInLineMap(e, t, n) { for (var r, i, o, a, s = 0; s < e.length; s += 3) { var l = e[s], u = e[s + 1]; if (t < l ? (i = 0, o = 1, a = "left") : t < u ? o = 1 + (i = t - l) : (s == e.length - 3 || t == u && e[s + 3] > t) && (i = (o = u - l) - 1, t >= u && (a = "right")), null != i) { if (r = e[s + 2], l == u && n == (r.insertLeft ? "left" : "right") && (a = n), "left" == n && 0 == i) for (; s && e[s - 2] == e[s - 3] && e[s - 1].insertLeft;)r = e[2 + (s -= 3)], a = "left"; if ("right" == n && i == u - l) for (; s < e.length - 3 && e[s + 3] == e[s + 4] && !e[s + 5].insertLeft;)r = e[(s += 3) + 2], a = "right"; break } } return { node: r, start: i, end: o, collapse: a, coverStart: l, coverEnd: u } } function clearLineMeasurementCacheFor(e) { if (e.measure && (e.measure.cache = {}, e.measure.heights = null, e.rest)) for (var t = 0; t < e.rest.length; t++)e.measure.caches[t] = {} } function clearLineMeasurementCache(e) { e.display.externalMeasure = null, removeChildren(e.display.lineMeasure); for (var t = 0; t < e.display.view.length; t++)clearLineMeasurementCacheFor(e.display.view[t]) } function clearCaches(e) { clearLineMeasurementCache(e), e.display.cachedCharWidth = e.display.cachedTextHeight = e.display.cachedPaddingH = null, e.options.lineWrapping || (e.display.maxLineChanged = !0), e.display.lineNumChars = null } function pageScrollX() { return window.pageXOffset || (document.documentElement || document.body).scrollLeft } function pageScrollY() { return window.pageYOffset || (document.documentElement || document.body).scrollTop } function intoCoordSystem(e, t, n, r) { if (t.widgets) for (var i = 0; i < t.widgets.length; ++i)if (t.widgets[i].above) { var o = widgetHeight(t.widgets[i]); n.top += o, n.bottom += o } if ("line" == r) return n; r || (r = "local"); var a = heightAtLine(t); if ("local" == r ? a += paddingTop(e.display) : a -= e.display.viewOffset, "page" == r || "window" == r) { var s = e.display.lineSpace.getBoundingClientRect(); a += s.top + ("window" == r ? 0 : pageScrollY()); var l = s.left + ("window" == r ? 0 : pageScrollX()); n.left += l, n.right += l } return n.top += a, n.bottom += a, n } function fromCoordSystem(e, t, n) { if ("div" == n) return t; var r = t.left, i = t.top; if ("page" == n) r -= pageScrollX(), i -= pageScrollY(); else if ("local" == n || !n) { var o = e.display.sizer.getBoundingClientRect(); r += o.left, i += o.top } var a = e.display.lineSpace.getBoundingClientRect(); return { left: r - a.left, top: i - a.top } } function charCoords(e, t, n, r, i) { return r || (r = getLine(e.doc, t.line)), intoCoordSystem(e, r, measureChar(e, r, t.ch, i), n) } function cursorCoords(e, t, n, r, i, o) { function get(t, a) { var s = measureCharPrepared(e, i, t, a ? "right" : "left", o); return a ? s.left = s.right : s.right = s.left, intoCoordSystem(e, r, s, n) } function getBidi(e, t) { var n = a[t], r = n.level % 2; return e == bidiLeft(n) && t && n.level < a[t - 1].level ? (n = a[--t], e = bidiRight(n) - (n.level % 2 ? 0 : 1), r = !0) : e == bidiRight(n) && t < a.length - 1 && n.level < a[t + 1].level && (n = a[++t], e = bidiLeft(n) - n.level % 2, r = !1), r && e == n.to && e > n.from ? get(e - 1) : get(e, r) } r = r || getLine(e.doc, t.line), i || (i = prepareMeasureForLine(e, r)); var a = getOrder(r), s = t.ch; if (!a) return get(s); var l = getBidiPartAt(a, s), u = getBidi(s, l); return null != Ue && (u.other = getBidi(s, Ue)), u } function estimateCoords(e, t) { var n = 0, t = clipPos(e.doc, t); e.options.lineWrapping || (n = charWidth(e.display) * t.ch); var r = getLine(e.doc, t.line), i = heightAtLine(r) + paddingTop(e.display); return { left: n, right: n, top: i, bottom: i + r.height } } function PosWithInfo(e, t, n, r) { var i = S(e, t); return i.xRel = r, n && (i.outside = !0), i } function coordsChar(e, t, n) { var r = e.doc; if ((n += e.display.viewOffset) < 0) return PosWithInfo(r.first, 0, !0, -1); var i = lineAtHeight(r, n), o = r.first + r.size - 1; if (i > o) return PosWithInfo(r.first + r.size - 1, getLine(r, o).text.length, !0, 1); t < 0 && (t = 0); for (var a = getLine(r, i); ;) { var s = coordsCharInner(e, a, i, t, n), l = collapsedSpanAtEnd(a), u = l && l.find(0, !0); if (!l || !(s.ch > u.from.ch || s.ch == u.from.ch && s.xRel > 0)) return s; i = lineNo(a = u.to.line) } } function coordsCharInner(e, t, n, r, i) { var o = i - heightAtLine(t), a = !1, s = 2 * e.display.wrapper.clientWidth, l = prepareMeasureForLine(e, t); function getX(r) { var i = cursorCoords(e, S(n, r), "line", t, l); return a = !0, o > i.bottom ? i.left - s : o < i.top ? i.left + s : (a = !1, i.left) } var u = getOrder(t), c = t.text.length, d = lineLeft(t), f = lineRight(t), h = getX(d), p = a, m = getX(f), g = a; if (r > m) return PosWithInfo(n, f, g, 1); for (; ;) { if (u ? f == d || f == moveVisually(t, d, 1) : f - d <= 1) { for (var v = r < h || r - h <= m - r ? d : f, y = r - (v == d ? h : m); isExtendingChar(t.text.charAt(v));)++v; var _ = PosWithInfo(n, v, v == d ? p : g, y < -1 ? -1 : y > 1 ? 1 : 0); return _ } var b = Math.ceil(c / 2), w = d + b; if (u) { w = d; for (var x = 0; x < b; ++x)w = moveVisually(t, w, 1) } var C = getX(w); C > r ? (f = w, m = C, (g = a) && (m += 1e3), c = b) : (d = w, h = C, p = a, c -= b) } } function textHeight(e) { if (null != e.cachedTextHeight) return e.cachedTextHeight; if (null == L) { L = elt("pre"); for (var t = 0; t < 49; ++t)L.appendChild(document.createTextNode("x")), L.appendChild(elt("br")); L.appendChild(document.createTextNode("x")) } removeChildrenAndAdd(e.measure, L); var n = L.offsetHeight / 50; return n > 3 && (e.cachedTextHeight = n), removeChildren(e.measure), n || 1 } function charWidth(e) { if (null != e.cachedCharWidth) return e.cachedCharWidth; var t = elt("span", "xxxxxxxxxx"), n = elt("pre", [t]); removeChildrenAndAdd(e.measure, n); var r = t.getBoundingClientRect(), i = (r.right - r.left) / 10; return i > 2 && (e.cachedCharWidth = i), i || 10 } var E, A, P = null, R = 0; function startOperation(e) { e.curOp = { cm: e, viewChanged: !1, startHeight: e.doc.height, forceUpdate: !1, updateInput: null, typing: !1, changeObjs: null, cursorActivityHandlers: null, cursorActivityCalled: 0, selectionChanged: !1, updateMaxLine: !1, scrollLeft: null, scrollTop: null, scrollToPos: null, focus: !1, id: ++R }, P ? P.ops.push(e.curOp) : e.curOp.ownsGroup = P = { ops: [e.curOp], delayedCallbacks: [] } } function endOperation(e) { var t = e.curOp, n = t.ownsGroup; if (n) try { !function fireCallbacksForOps(e) { var t = e.delayedCallbacks, n = 0; do { for (; n < t.length; n++)t[n].call(null); for (var r = 0; r < e.ops.length; r++) { var i = e.ops[r]; if (i.cursorActivityHandlers) for (; i.cursorActivityCalled < i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null, i.cm) } } while (n < t.length) }(n) } finally { P = null; for (var r = 0; r < n.ops.length; r++)n.ops[r].cm.curOp = null; !function endOperations(e) { for (var t = e.ops, n = 0; n < t.length; n++)endOperation_R1(t[n]); for (var n = 0; n < t.length; n++)(r = t[n]).updatedDisplay = r.mustUpdate && updateDisplayIfNeeded(r.cm, r.update); for (var r, n = 0; n < t.length; n++)endOperation_R2(t[n]); for (var n = 0; n < t.length; n++)endOperation_W2(t[n]); for (var n = 0; n < t.length; n++)endOperation_finish(t[n]) }(n) } } function endOperation_R1(e) { var t = e.cm, n = t.display; !function maybeClipScrollbars(e) { var t = e.display; !t.scrollbarsClipped && t.scroller.offsetWidth && (t.nativeBarWidth = t.scroller.offsetWidth - t.scroller.clientWidth, t.heightForcer.style.height = scrollGap(e) + "px", t.sizer.style.marginBottom = -t.nativeBarWidth + "px", t.sizer.style.borderRightWidth = scrollGap(e) + "px", t.scrollbarsClipped = !0) }(t), e.updateMaxLine && findMaxLine(t), e.mustUpdate = e.viewChanged || e.forceUpdate || null != e.scrollTop || e.scrollToPos && (e.scrollToPos.from.line < n.viewFrom || e.scrollToPos.to.line >= n.viewTo) || n.maxLineChanged && t.options.lineWrapping, e.update = e.mustUpdate && new DisplayUpdate(t, e.mustUpdate && { top: e.scrollTop, ensure: e.scrollToPos }, e.forceUpdate) } function endOperation_R2(e) { var t = e.cm, n = t.display; e.updatedDisplay && updateHeightsInViewport(t), e.barMeasure = measureForScrollbars(t), n.maxLineChanged && !t.options.lineWrapping && (e.adjustWidthTo = measureChar(t, n.maxLine, n.maxLine.text.length).left + 3, t.display.sizerWidth = e.adjustWidthTo, e.barMeasure.scrollWidth = Math.max(n.scroller.clientWidth, n.sizer.offsetLeft + e.adjustWidthTo + scrollGap(t) + t.display.barWidth), e.maxScrollLeft = Math.max(0, n.sizer.offsetLeft + e.adjustWidthTo - displayWidth(t))), (e.updatedDisplay || e.selectionChanged) && (e.preparedSelection = n.input.prepareSelection()) } function endOperation_W2(e) { var t = e.cm; null != e.adjustWidthTo && (t.display.sizer.style.minWidth = e.adjustWidthTo + "px", e.maxScrollLeft < t.doc.scrollLeft && setScrollLeft(t, Math.min(t.display.scroller.scrollLeft, e.maxScrollLeft), !0), t.display.maxLineChanged = !1), e.preparedSelection && t.display.input.showSelection(e.preparedSelection), (e.updatedDisplay || e.startHeight != t.doc.height) && updateScrollbars(t, e.barMeasure), e.updatedDisplay && setDocumentHeight(t, e.barMeasure), e.selectionChanged && restartBlink(t), t.state.focused && e.updateInput && t.display.input.reset(e.typing), !e.focus || e.focus != activeElt() || document.hasFocus && !document.hasFocus() || ensureFocus(e.cm) } function endOperation_finish(e) { var t = e.cm, n = t.display, r = t.doc; if (e.updatedDisplay && postUpdateDisplay(t, e.update), null == n.wheelStartX || null == e.scrollTop && null == e.scrollLeft && !e.scrollToPos || (n.wheelStartX = n.wheelStartY = null), null == e.scrollTop || n.scroller.scrollTop == e.scrollTop && !e.forceScroll || (r.scrollTop = Math.max(0, Math.min(n.scroller.scrollHeight - n.scroller.clientHeight, e.scrollTop)), n.scrollbars.setScrollTop(r.scrollTop), n.scroller.scrollTop = r.scrollTop), null == e.scrollLeft || n.scroller.scrollLeft == e.scrollLeft && !e.forceScroll || (r.scrollLeft = Math.max(0, Math.min(n.scroller.scrollWidth - n.scroller.clientWidth, e.scrollLeft)), n.scrollbars.setScrollLeft(r.scrollLeft), n.scroller.scrollLeft = r.scrollLeft, alignHorizontally(t)), e.scrollToPos) { var i = function scrollPosIntoView(e, t, n, r) { null == r && (r = 0); for (var i = 0; i < 5; i++) { var o = !1, a = cursorCoords(e, t), s = n && n != t ? cursorCoords(e, n) : a, l = calculateScrollPos(e, Math.min(a.left, s.left), Math.min(a.top, s.top) - r, Math.max(a.left, s.left), Math.max(a.bottom, s.bottom) + r), u = e.doc.scrollTop, c = e.doc.scrollLeft; if (null != l.scrollTop && (setScrollTop(e, l.scrollTop), Math.abs(e.doc.scrollTop - u) > 1 && (o = !0)), null != l.scrollLeft && (setScrollLeft(e, l.scrollLeft), Math.abs(e.doc.scrollLeft - c) > 1 && (o = !0)), !o) break } return a }(t, clipPos(r, e.scrollToPos.from), clipPos(r, e.scrollToPos.to), e.scrollToPos.margin); e.scrollToPos.isCursor && t.state.focused && function maybeScrollWindow(e, t) { if (!signalDOMEvent(e, "scrollCursorIntoView")) { var n = e.display, r = n.sizer.getBoundingClientRect(), i = null; if (t.top + r.top < 0 ? i = !0 : t.bottom + r.top > (window.innerHeight || document.documentElement.clientHeight) && (i = !1), null != i && !h) { var o = elt("div", "\u200b", null, "position: absolute; top: " + (t.top - n.viewOffset - paddingTop(e.display)) + "px; height: " + (t.bottom - t.top + scrollGap(e) + n.barHeight) + "px; left: " + t.left + "px; width: 2px;"); e.display.lineSpace.appendChild(o), o.scrollIntoView(i), e.display.lineSpace.removeChild(o) } } }(t, i) } var o = e.maybeHiddenMarkers, a = e.maybeUnhiddenMarkers; if (o) for (var s = 0; s < o.length; ++s)o[s].lines.length || _e(o[s], "hide"); if (a) for (var s = 0; s < a.length; ++s)a[s].lines.length && _e(a[s], "unhide"); n.wrapper.offsetHeight && (r.scrollTop = t.display.scroller.scrollTop), e.changeObjs && _e(t, "changes", t, e.changeObjs), e.update && e.update.finish() } function runInOp(e, t) { if (e.curOp) return t(); startOperation(e); try { return t() } finally { endOperation(e) } } function operation(e, t) { return function () { if (e.curOp) return t.apply(e, arguments); startOperation(e); try { return t.apply(e, arguments) } finally { endOperation(e) } } } function methodOp(e) { return function () { if (this.curOp) return e.apply(this, arguments); startOperation(this); try { return e.apply(this, arguments) } finally { endOperation(this) } } } function docMethodOp(e) { return function () { var t = this.cm; if (!t || t.curOp) return e.apply(this, arguments); startOperation(t); try { return e.apply(this, arguments) } finally { endOperation(t) } } } function LineView(e, t, n) { this.line = t, this.rest = function visualLineContinued(e) { for (var t, n; t = collapsedSpanAtEnd(e);)e = t.find(1, !0).line, (n || (n = [])).push(e); return n }(t), this.size = this.rest ? lineNo(lst(this.rest)) - n + 1 : 1, this.node = this.text = null, this.hidden = lineIsHidden(e, t) } function buildViewArray(e, t, n) { for (var r, i = [], o = t; o < n; o = r) { var a = new LineView(e.doc, getLine(e.doc, o), o); r = o + a.size, i.push(a) } return i } function regChange(e, t, n, r) { null == t && (t = e.doc.first), null == n && (n = e.doc.first + e.doc.size), r || (r = 0); var i = e.display; if (r && n < i.viewTo && (null == i.updateLineNumbers || i.updateLineNumbers > t) && (i.updateLineNumbers = t), e.curOp.viewChanged = !0, t >= i.viewTo) C && visualLineNo(e.doc, t) < i.viewTo && resetView(e); else if (n <= i.viewFrom) C && visualLineEndNo(e.doc, n + r) > i.viewFrom ? resetView(e) : (i.viewFrom += r, i.viewTo += r); else if (t <= i.viewFrom && n >= i.viewTo) resetView(e); else if (t <= i.viewFrom) { var o = viewCuttingPoint(e, n, n + r, 1); o ? (i.view = i.view.slice(o.index), i.viewFrom = o.lineN, i.viewTo += r) : resetView(e) } else if (n >= i.viewTo) { var o = viewCuttingPoint(e, t, t, -1); o ? (i.view = i.view.slice(0, o.index), i.viewTo = o.lineN) : resetView(e) } else { var a = viewCuttingPoint(e, t, t, -1), s = viewCuttingPoint(e, n, n + r, 1); a && s ? (i.view = i.view.slice(0, a.index).concat(buildViewArray(e, a.lineN, s.lineN)).concat(i.view.slice(s.index)), i.viewTo += r) : resetView(e) } var l = i.externalMeasured; l && (n < l.lineN ? l.lineN += r : t < l.lineN + l.size && (i.externalMeasured = null)) } function regLineChange(e, t, n) { e.curOp.viewChanged = !0; var r = e.display, i = e.display.externalMeasured; if (i && t >= i.lineN && t < i.lineN + i.size && (r.externalMeasured = null), !(t < r.viewFrom || t >= r.viewTo)) { var o = r.view[findViewIndex(e, t)]; if (null != o.node) { var a = o.changes || (o.changes = []); -1 == indexOf(a, n) && a.push(n) } } } function resetView(e) { e.display.viewFrom = e.display.viewTo = e.doc.first, e.display.view = [], e.display.viewOffset = 0 } function findViewIndex(e, t) { if (t >= e.display.viewTo) return null; if ((t -= e.display.viewFrom) < 0) return null; for (var n = e.display.view, r = 0; r < n.length; r++)if ((t -= n[r].size) < 0) return r } function viewCuttingPoint(e, t, n, r) { var i, o = findViewIndex(e, t), a = e.display.view; if (!C || n == e.doc.first + e.doc.size) return { index: o, lineN: n }; for (var s = 0, l = e.display.viewFrom; s < o; s++)l += a[s].size; if (l != t) { if (r > 0) { if (o == a.length - 1) return null; i = l + a[o].size - t, o++ } else i = l - t; t += i, n += i } for (; visualLineNo(e.doc, n) != n;) { if (o == (r < 0 ? 0 : a.length - 1)) return null; n += r * a[o - (r < 0 ? 1 : 0)].size, o += r } return { index: o, lineN: n } } function countDirtyView(e) { for (var t = e.display.view, n = 0, r = 0; r < t.length; r++) { var i = t[r]; i.hidden || i.node && !i.changes || ++n } return n } function onResize(e) { var t = e.display; t.lastWrapHeight == t.wrapper.clientHeight && t.lastWrapWidth == t.wrapper.clientWidth || (t.cachedCharWidth = t.cachedTextHeight = t.cachedPaddingH = null, t.scrollbarsClipped = !1, e.setSize()) } function eventInWidget(e, t) { for (var n = e_target(t); n != e.wrapper; n = n.parentNode)if (!n || 1 == n.nodeType && "true" == n.getAttribute("cm-ignore-events") || n.parentNode == e.sizer && n != e.mover) return !0 } function posFromMouse(e, t, n, r) { var i = e.display; if (!n && "true" == e_target(t).getAttribute("cm-not-content")) return null; var o, a, s = i.lineSpace.getBoundingClientRect(); try { o = t.clientX - s.left, a = t.clientY - s.top } catch (t) { return null } var l, u = coordsChar(e, o, a); if (r && 1 == u.xRel && (l = getLine(e.doc, u.line).text).length == u.ch) { var c = Te(l, l.length, e.options.tabSize) - l.length; u = S(u.line, Math.max(0, Math.round((o - paddingH(e.display).left) / charWidth(e.display)) - c)) } return u } function onMouseDown(e) { var t = this, n = t.display; if (!(signalDOMEvent(t, e) || n.activeTouch && n.input.supportsTouch())) if (n.shift = e.shiftKey, eventInWidget(n, e)) s || (n.scroller.draggable = !1, setTimeout(function () { n.scroller.draggable = !0 }, 100)); else if (!clickInGutter(t, e)) { var r = posFromMouse(t, e); switch (window.focus(), e_button(e)) { case 1: t.state.selectingText ? t.state.selectingText(e) : r ? function leftButtonDown(e, t, n) { o ? setTimeout(bind(ensureFocus, e), 0) : e.curOp.focus = activeElt(); var r, i = +new Date; A && A.time > i - 400 && 0 == k(A.pos, n) ? r = "triple" : E && E.time > i - 400 && 0 == k(E.pos, n) ? (r = "double", A = { time: i, pos: n }) : (r = "single", E = { time: i, pos: n }); var l, u = e.doc.sel, c = g ? t.metaKey : t.ctrlKey; e.options.dragDrop && ze && !e.isReadOnly() && "single" == r && (l = u.contains(n)) > -1 && (k((l = u.ranges[l]).from(), n) < 0 || n.xRel > 0) && (k(l.to(), n) > 0 || n.xRel < 0) ? function leftButtonStartDrag(e, t, n, r) { var i = e.display, l = +new Date, u = operation(e, function (c) { s && (i.scroller.draggable = !1), e.state.draggingText = !1, ye(document, "mouseup", u), ye(i.scroller, "drop", u), Math.abs(t.clientX - c.clientX) + Math.abs(t.clientY - c.clientY) < 10 && (he(c), !r && +new Date - 200 < l && extendSelection(e.doc, n), s || o && 9 == a ? setTimeout(function () { document.body.focus(), i.input.focus() }, 20) : i.input.focus()) }); s && (i.scroller.draggable = !0), e.state.draggingText = u, i.scroller.dragDrop && i.scroller.dragDrop(), ge(document, "mouseup", u), ge(i.scroller, "drop", u) }(e, t, n, c) : function leftButtonSelect(e, t, n, r, i) { var o = e.display, a = e.doc; he(t); var s, l, u = a.sel, c = u.ranges; if (i && !t.shiftKey ? (l = a.sel.contains(n), s = l > -1 ? c[l] : new Range(n, n)) : (s = a.sel.primary(), l = a.sel.primIndex), v ? t.shiftKey && t.metaKey : t.altKey) r = "rect", i || (s = new Range(n, n)), n = posFromMouse(e, t, !0, !0), l = -1; else if ("double" == r) { var d = e.findWordAt(n); s = e.display.shift || a.extend ? extendRange(a, s, d.anchor, d.head) : d } else if ("triple" == r) { var f = new Range(S(n.line, 0), clipPos(a, S(n.line + 1, 0))); s = e.display.shift || a.extend ? extendRange(a, s, f.anchor, f.head) : f } else s = extendRange(a, s, n); i ? -1 == l ? (l = c.length, setSelection(a, normalizeSelection(c.concat([s]), l), { scroll: !1, origin: "*mouse" })) : c.length > 1 && c[l].empty() && "single" == r && !t.shiftKey ? (setSelection(a, normalizeSelection(c.slice(0, l).concat(c.slice(l + 1)), 0), { scroll: !1, origin: "*mouse" }), u = a.sel) : replaceOneSelection(a, l, s, Se) : (l = 0, setSelection(a, new Selection([s], 0), Se), u = a.sel); var h = n, p = o.wrapper.getBoundingClientRect(), m = 0; function extend(t) { var i = ++m, c = posFromMouse(e, t, !0, "rect" == r); if (c) if (0 != k(c, h)) { e.curOp.focus = activeElt(), function extendTo(t) { if (0 != k(h, t)) if (h = t, "rect" == r) { for (var i = [], o = e.options.tabSize, c = Te(getLine(a, n.line).text, n.ch, o), d = Te(getLine(a, t.line).text, t.ch, o), f = Math.min(c, d), p = Math.max(c, d), m = Math.min(n.line, t.line), g = Math.min(e.lastLine(), Math.max(n.line, t.line)); m <= g; m++) { var v = getLine(a, m).text, y = Le(v, f, o); f == p ? i.push(new Range(S(m, y), S(m, y))) : v.length > y && i.push(new Range(S(m, y), S(m, Le(v, p, o)))) } i.length || i.push(new Range(n, n)), setSelection(a, normalizeSelection(u.ranges.slice(0, l).concat(i), l), { origin: "*mouse", scroll: !1 }), e.scrollIntoView(t) } else { var _ = s, b = _.anchor, w = t; if ("single" != r) { if ("double" == r) var x = e.findWordAt(t); else var x = new Range(S(t.line, 0), clipPos(a, S(t.line + 1, 0))); k(x.anchor, b) > 0 ? (w = x.head, b = minPos(_.from(), x.anchor)) : (w = x.anchor, b = maxPos(_.to(), x.head)) } var i = u.ranges.slice(0); i[l] = new Range(clipPos(a, b), w), setSelection(a, normalizeSelection(i, l), Se) } }(c); var d = visibleLines(o, a); (c.line >= d.to || c.line < d.from) && setTimeout(operation(e, function () { m == i && extend(t) }), 150) } else { var f = t.clientY < p.top ? -20 : t.clientY > p.bottom ? 20 : 0; f && setTimeout(operation(e, function () { m == i && (o.scroller.scrollTop += f, extend(t)) }), 50) } } function done(t) { e.state.selectingText = !1, m = 1 / 0, he(t), o.input.focus(), ye(document, "mousemove", g), ye(document, "mouseup", y), a.history.lastSelOrigin = null } var g = operation(e, function (e) { e_button(e) ? extend(e) : done(e) }), y = operation(e, done); e.state.selectingText = y, ge(document, "mousemove", g), ge(document, "mouseup", y) }(e, t, n, r, c) }(t, e, r) : e_target(e) == n.scroller && he(e); break; case 2: s && (t.state.lastMiddleDown = +new Date), r && extendSelection(t.doc, r), setTimeout(function () { n.input.focus() }, 20), he(e); break; case 3: w ? onContextMenu(t, e) : function delayBlurEvent(e) { e.state.delayingBlurEvent = !0, setTimeout(function () { e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1, onBlur(e)) }, 100) }(t) } } } function gutterEvent(e, t, n, r) { try { var i = t.clientX, o = t.clientY } catch (t) { return !1 } if (i >= Math.floor(e.display.gutters.getBoundingClientRect().right)) return !1; r && he(t); var a = e.display, s = a.lineDiv.getBoundingClientRect(); if (o > s.bottom || !hasHandler(e, n)) return e_defaultPrevented(t); o -= s.top - a.viewOffset; for (var l = 0; l < e.options.gutters.length; ++l) { var u = a.gutters.childNodes[l]; if (u && u.getBoundingClientRect().right >= i) { var c = lineAtHeight(e.doc, o), d = e.options.gutters[l]; return _e(e, n, e, c, d, t), e_defaultPrevented(t) } } } function clickInGutter(e, t) { return gutterEvent(e, t, "gutterClick", !0) } var O = 0; function onDrop(e) { var t = this; if (clearDragCursor(t), !signalDOMEvent(t, e) && !eventInWidget(t.display, e)) { he(e), o && (O = +new Date); var n = posFromMouse(t, e, !0), r = e.dataTransfer.files; if (n && !t.isReadOnly()) if (r && r.length && window.FileReader && window.File) for (var i = r.length, a = Array(i), s = 0, l = function (e, r) { if (!t.options.allowDropFileTypes || -1 != indexOf(t.options.allowDropFileTypes, e.type)) { var o = new FileReader; o.onload = operation(t, function () { var e = o.result; if (/[\x00-\x08\x0e-\x1f]{2}/.test(e) && (e = ""), a[r] = e, ++s == i) { var l = { from: n = clipPos(t.doc, n), to: n, text: t.doc.splitLines(a.join(t.doc.lineSeparator())), origin: "paste" }; makeChange(t.doc, l), setSelectionReplaceHistory(t.doc, simpleSelection(n, B(l))) } }), o.readAsText(e) } }, u = 0; u < i; ++u)l(r[u], u); else { if (t.state.draggingText && t.doc.sel.contains(n) > -1) return t.state.draggingText(e), void setTimeout(function () { t.display.input.focus() }, 20); try { var a = e.dataTransfer.getData("Text"); if (a) { if (t.state.draggingText && !(g ? e.altKey : e.ctrlKey)) var c = t.listSelections(); if (setSelectionNoUndo(t.doc, simpleSelection(n, n)), c) for (var u = 0; u < c.length; ++u)replaceRange(t.doc, "", c[u].anchor, c[u].head, "drag"); t.replaceSelection(a, "around", "paste"), t.display.input.focus() } } catch (e) { } } } } function clearDragCursor(e) { e.display.dragCursor && (e.display.lineSpace.removeChild(e.display.dragCursor), e.display.dragCursor = null) } function setScrollTop(e, t) { Math.abs(e.doc.scrollTop - t) < 2 || (e.doc.scrollTop = t, n || updateDisplaySimple(e, { top: t }), e.display.scroller.scrollTop != t && (e.display.scroller.scrollTop = t), e.display.scrollbars.setScrollTop(t), n && updateDisplaySimple(e), startWorker(e, 100)) } function setScrollLeft(e, t, n) { (n ? t == e.doc.scrollLeft : Math.abs(e.doc.scrollLeft - t) < 2) || (t = Math.min(t, e.display.scroller.scrollWidth - e.display.scroller.clientWidth), e.doc.scrollLeft = t, alignHorizontally(e), e.display.scroller.scrollLeft != t && (e.display.scroller.scrollLeft = t), e.display.scrollbars.setScrollLeft(t)) } var D = 0, F = null; o ? F = -.53 : n ? F = 15 : u ? F = -.7 : d && (F = -1 / 3); var I = function (e) { var t = e.wheelDeltaX, n = e.wheelDeltaY; return null == t && e.detail && e.axis == e.HORIZONTAL_AXIS && (t = e.detail), null == n && e.detail && e.axis == e.VERTICAL_AXIS ? n = e.detail : null == n && (n = e.wheelDelta), { x: t, y: n } }; function onScrollWheel(e, t) { var r = I(t), i = r.x, o = r.y, a = e.display, l = a.scroller, u = l.scrollWidth > l.clientWidth, d = l.scrollHeight > l.clientHeight; if (i && u || o && d) { if (o && g && s) e: for (var f = t.target, h = a.view; f != l; f = f.parentNode)for (var p = 0; p < h.length; p++)if (h[p].node == f) { e.display.currentWheelTarget = f; break e } if (i && !n && !c && null != F) return o && d && setScrollTop(e, Math.max(0, Math.min(l.scrollTop + o * F, l.scrollHeight - l.clientHeight))), setScrollLeft(e, Math.max(0, Math.min(l.scrollLeft + i * F, l.scrollWidth - l.clientWidth))), (!o || o && d) && he(t), void (a.wheelStartX = null); if (o && null != F) { var m = o * F, v = e.doc.scrollTop, y = v + a.wrapper.clientHeight; m < 0 ? v = Math.max(0, v + m - 50) : y = Math.min(e.doc.height, y + m + 50), updateDisplaySimple(e, { top: v, bottom: y }) } D < 20 && (null == a.wheelStartX ? (a.wheelStartX = l.scrollLeft, a.wheelStartY = l.scrollTop, a.wheelDX = i, a.wheelDY = o, setTimeout(function () { if (null != a.wheelStartX) { var e = l.scrollLeft - a.wheelStartX, t = l.scrollTop - a.wheelStartY, n = t && a.wheelDY && t / a.wheelDY || e && a.wheelDX && e / a.wheelDX; a.wheelStartX = a.wheelStartY = null, n && (F = (F * D + n) / (D + 1), ++D) } }, 200)) : (a.wheelDX += i, a.wheelDY += o)) } } function doHandleBinding(e, t, n) { if ("string" == typeof t && !(t = K[t])) return !1; e.display.input.ensurePolled(); var r = e.display.shift, i = !1; try { e.isReadOnly() && (e.state.suppressEdits = !0), n && (e.display.shift = !1), i = t(e) != xe } finally { e.display.shift = r, e.state.suppressEdits = !1 } return i } CodeMirror.wheelEventPixels = function (e) { var t = I(e); return t.x *= F, t.y *= F, t }; var N = new Delayed; function dispatchKey(e, t, n, r) { var i = e.state.keySeq; if (i) { if (Q(t)) return "handled"; N.set(50, function () { e.state.keySeq == i && (e.state.keySeq = null, e.display.input.reset()) }), t = i + " " + t } var o = function lookupKeyForEditor(e, t, n) { for (var r = 0; r < e.state.keyMaps.length; r++) { var i = J(t, e.state.keyMaps[r], n, e); if (i) return i } return e.options.extraKeys && J(t, e.options.extraKeys, n, e) || J(t, e.options.keyMap, n, e) }(e, t, r); return "multi" == o && (e.state.keySeq = t), "handled" == o && signalLater(e, "keyHandled", e, t, n), "handled" != o && "multi" != o || (he(n), restartBlink(e)), i && !o && /\'$/.test(t) ? (he(n), !0) : !!o } function handleKeyBinding(e, t) { var n = ee(t, !0); return !!n && (t.shiftKey && !e.state.keySeq ? dispatchKey(e, "Shift-" + n, t, function (t) { return doHandleBinding(e, t, !0) }) || dispatchKey(e, n, t, function (t) { if ("string" == typeof t ? /^go[A-Z]/.test(t) : t.motion) return doHandleBinding(e, t) }) : dispatchKey(e, n, t, function (t) { return doHandleBinding(e, t) })) } var $ = null; function onKeyDown(e) { var t = this; if (t.curOp.focus = activeElt(), !signalDOMEvent(t, e)) { o && a < 11 && 27 == e.keyCode && (e.returnValue = !1); var n = e.keyCode; t.display.shift = 16 == n || e.shiftKey; var r = handleKeyBinding(t, e); c && ($ = r ? n : null, !r && 88 == n && !Ve && (g ? e.metaKey : e.ctrlKey) && t.replaceSelection("", null, "cut")), 18 != n || /\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className) || function showCrossHair(e) { var t = e.display.lineDiv; function up(e) { 18 != e.keyCode && e.altKey || (Fe(t, "CodeMirror-crosshair"), ye(document, "keyup", up), ye(document, "mouseover", up)) } Ie(t, "CodeMirror-crosshair"), ge(document, "keyup", up), ge(document, "mouseover", up) }(t) } } function onKeyUp(e) { 16 == e.keyCode && (this.doc.sel.shift = !1), signalDOMEvent(this, e) } function onKeyPress(e) { var t = this; if (!(eventInWidget(t.display, e) || signalDOMEvent(t, e) || e.ctrlKey && !e.altKey || g && e.metaKey)) { var n = e.keyCode, r = e.charCode; if (c && n == $) return $ = null, void he(e); if (!c || e.which && !(e.which < 10) || !handleKeyBinding(t, e)) { var i = String.fromCharCode(null == r ? n : r); (function handleCharBinding(e, t, n) { return dispatchKey(e, "'" + n + "'", t, function (t) { return doHandleBinding(e, t, !0) }) })(t, e, i) || t.display.input.onKeyPress(e) } } } function onFocus(e) { e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1), "nocursor" != e.options.readOnly && (e.state.focused || (_e(e, "focus", e), e.state.focused = !0, Ie(e.display.wrapper, "CodeMirror-focused"), e.curOp || e.display.selForContextMenu == e.doc.sel || (e.display.input.reset(), s && setTimeout(function () { e.display.input.reset(!0) }, 20)), e.display.input.receivedFocus()), restartBlink(e)) } function onBlur(e) { e.state.delayingBlurEvent || (e.state.focused && (_e(e, "blur", e), e.state.focused = !1, Fe(e.display.wrapper, "CodeMirror-focused")), clearInterval(e.display.blinker), setTimeout(function () { e.state.focused || (e.display.shift = !1) }, 150)) } function onContextMenu(e, t) { eventInWidget(e.display, t) || function contextMenuInGutter(e, t) { return !!hasHandler(e, "gutterContextMenu") && gutterEvent(e, t, "gutterContextMenu", !1) }(e, t) || signalDOMEvent(e, t, "contextmenu") || e.display.input.onContextMenu(t) } var B = CodeMirror.changeEnd = function (e) { return e.text ? S(e.from.line + e.text.length - 1, lst(e.text).length + (1 == e.text.length ? e.from.ch : 0)) : e.to }; function adjustForChange(e, t) { if (k(e, t.from) < 0) return e; if (k(e, t.to) <= 0) return B(t); var n = e.line + t.text.length - (t.to.line - t.from.line) - 1, r = e.ch; return e.line == t.to.line && (r += B(t).ch - t.to.ch), S(n, r) } function computeSelAfterChange(e, t) { for (var n = [], r = 0; r < e.sel.ranges.length; r++) { var i = e.sel.ranges[r]; n.push(new Range(adjustForChange(i.anchor, t), adjustForChange(i.head, t))) } return normalizeSelection(n, e.sel.primIndex) } function offsetPos(e, t, n) { return e.line == t.line ? S(n.line, e.ch - t.ch + n.ch) : S(n.line + (e.line - t.line), e.ch) } function filterChange(e, t, n) { var r = { canceled: !1, from: t.from, to: t.to, text: t.text, origin: t.origin, cancel: function () { this.canceled = !0 } }; return n && (r.update = function (t, n, r, i) { t && (this.from = clipPos(e, t)), n && (this.to = clipPos(e, n)), r && (this.text = r), void 0 !== i && (this.origin = i) }), _e(e, "beforeChange", e, r), e.cm && _e(e.cm, "beforeChange", e.cm, r), r.canceled ? null : { from: r.from, to: r.to, text: r.text, origin: r.origin } } function makeChange(e, t, n) { if (e.cm) { if (!e.cm.curOp) return operation(e.cm, makeChange)(e, t, n); if (e.cm.state.suppressEdits) return } if (!(hasHandler(e, "beforeChange") || e.cm && hasHandler(e.cm, "beforeChange")) || (t = filterChange(e, t, !0))) { var r = x && !n && function removeReadOnlyRanges(e, t, n) { var r = null; if (e.iter(t.line, n.line + 1, function (e) { if (e.markedSpans) for (var t = 0; t < e.markedSpans.length; ++t) { var n = e.markedSpans[t].marker; !n.readOnly || r && -1 != indexOf(r, n) || (r || (r = [])).push(n) } }), !r) return null; for (var i = [{ from: t, to: n }], o = 0; o < r.length; ++o)for (var a = r[o], s = a.find(0), l = 0; l < i.length; ++l) { var u = i[l]; if (!(k(u.to, s.from) < 0 || k(u.from, s.to) > 0)) { var c = [l, 1], d = k(u.from, s.from), f = k(u.to, s.to); (d < 0 || !a.inclusiveLeft && !d) && c.push({ from: u.from, to: s.from }), (f > 0 || !a.inclusiveRight && !f) && c.push({ from: s.to, to: u.to }), i.splice.apply(i, c), l += c.length - 1 } } return i }(e, t.from, t.to); if (r) for (var i = r.length - 1; i >= 0; --i)makeChangeInner(e, { from: r[i].from, to: r[i].to, text: i ? [""] : t.text }); else makeChangeInner(e, t) } } function makeChangeInner(e, t) { if (1 != t.text.length || "" != t.text[0] || 0 != k(t.from, t.to)) { var n = computeSelAfterChange(e, t); addChangeToHistory(e, t, n, e.cm ? e.cm.curOp.id : NaN), makeChangeSingleDoc(e, t, n, stretchSpansOverChange(e, t)); var r = []; linkedDocs(e, function (e, n) { n || -1 != indexOf(r, e.history) || (rebaseHist(e.history, t), r.push(e.history)), makeChangeSingleDoc(e, t, null, stretchSpansOverChange(e, t)) }) } } function makeChangeFromHistory(e, t, n) { if (!e.cm || !e.cm.state.suppressEdits) { for (var r, i = e.history, o = e.sel, a = "undo" == t ? i.done : i.undone, s = "undo" == t ? i.undone : i.done, l = 0; l < a.length && (r = a[l], n ? !r.ranges || r.equals(e.sel) : r.ranges); l++); if (l != a.length) { for (i.lastOrigin = i.lastSelOrigin = null; (r = a.pop()).ranges;) { if (pushSelectionToHistory(r, s), n && !r.equals(e.sel)) return void setSelection(e, r, { clearRedo: !1 }); o = r } var u = []; pushSelectionToHistory(o, s), s.push({ changes: u, generation: i.generation }), i.generation = r.generation || ++i.maxGeneration; for (var c = hasHandler(e, "beforeChange") || e.cm && hasHandler(e.cm, "beforeChange"), l = r.changes.length - 1; l >= 0; --l) { var d = r.changes[l]; if (d.origin = t, c && !filterChange(e, d, !1)) return void (a.length = 0); u.push(historyChangeFromChange(e, d)); var f = l ? computeSelAfterChange(e, d) : lst(a); makeChangeSingleDoc(e, d, f, mergeOldSpans(e, d)), !l && e.cm && e.cm.scrollIntoView({ from: d.from, to: B(d) }); var h = []; linkedDocs(e, function (e, t) { t || -1 != indexOf(h, e.history) || (rebaseHist(e.history, d), h.push(e.history)), makeChangeSingleDoc(e, d, null, mergeOldSpans(e, d)) }) } } } } function shiftDoc(e, t) { if (0 != t && (e.first += t, e.sel = new Selection(map(e.sel.ranges, function (e) { return new Range(S(e.anchor.line + t, e.anchor.ch), S(e.head.line + t, e.head.ch)) }), e.sel.primIndex), e.cm)) { regChange(e.cm, e.first, e.first - t, t); for (var n = e.cm.display, r = n.viewFrom; r < n.viewTo; r++)regLineChange(e.cm, r, "gutter") } } function makeChangeSingleDoc(e, t, n, r) { if (e.cm && !e.cm.curOp) return operation(e.cm, makeChangeSingleDoc)(e, t, n, r); if (t.to.line < e.first) shiftDoc(e, t.text.length - 1 - (t.to.line - t.from.line)); else if (!(t.from.line > e.lastLine())) { if (t.from.line < e.first) { var i = t.text.length - 1 - (e.first - t.from.line); shiftDoc(e, i), t = { from: S(e.first, 0), to: S(t.to.line + i, t.to.ch), text: [lst(t.text)], origin: t.origin } } var o = e.lastLine(); t.to.line > o && (t = { from: t.from, to: S(o, getLine(e, o).text.length), text: [t.text[0]], origin: t.origin }), t.removed = getBetween(e, t.from, t.to), n || (n = computeSelAfterChange(e, t)), e.cm ? function makeChangeSingleDocInEditor(e, t, n) { var r = e.doc, i = e.display, o = t.from, a = t.to, s = !1, l = o.line; e.options.lineWrapping || (l = lineNo(visualLine(getLine(r, o.line))), r.iter(l, a.line + 1, function (e) { if (e == i.maxLine) return s = !0, !0 })), r.sel.contains(t.from, t.to) > -1 && signalCursorActivity(e), updateDoc(r, t, n, estimateHeight(e)), e.options.lineWrapping || (r.iter(l, o.line + t.text.length, function (e) { var t = lineLength(e); t > i.maxLineLength && (i.maxLine = e, i.maxLineLength = t, i.maxLineChanged = !0, s = !1) }), s && (e.curOp.updateMaxLine = !0)), r.frontier = Math.min(r.frontier, o.line), startWorker(e, 400); var u = t.text.length - (a.line - o.line) - 1; t.full ? regChange(e) : o.line != a.line || 1 != t.text.length || isWholeLineUpdate(e.doc, t) ? regChange(e, o.line, a.line + 1, u) : regLineChange(e, o.line, "text"); var c = hasHandler(e, "changes"), d = hasHandler(e, "change"); if (d || c) { var f = { from: o, to: a, text: t.text, removed: t.removed, origin: t.origin }; d && signalLater(e, "change", e, f), c && (e.curOp.changeObjs || (e.curOp.changeObjs = [])).push(f) } e.display.selForContextMenu = null }(e.cm, t, r) : updateDoc(e, t, r), setSelectionNoUndo(e, n, Ce) } } function replaceRange(e, t, n, r, i) { if (r || (r = n), k(r, n) < 0) { var o = r; r = n, n = o } "string" == typeof t && (t = e.splitLines(t)), makeChange(e, { from: n, to: r, text: t, origin: i }) } function calculateScrollPos(e, t, n, r, i) { var o = e.display, a = textHeight(e.display); n < 0 && (n = 0); var s = e.curOp && null != e.curOp.scrollTop ? e.curOp.scrollTop : o.scroller.scrollTop, l = displayHeight(e), u = {}; i - n > l && (i = n + l); var c = e.doc.height + paddingVert(o), d = n < a, f = i > c - a; if (n < s) u.scrollTop = d ? 0 : n; else if (i > s + l) { var h = Math.min(n, (f ? c : i) - l); h != s && (u.scrollTop = h) } var p = e.curOp && null != e.curOp.scrollLeft ? e.curOp.scrollLeft : o.scroller.scrollLeft, m = displayWidth(e) - (e.options.fixedGutter ? o.gutters.offsetWidth : 0), g = r - t > m; return g && (r = t + m), t < 10 ? u.scrollLeft = 0 : t < p ? u.scrollLeft = Math.max(0, t - (g ? 0 : 10)) : r > m + p - 3 && (u.scrollLeft = r + (g ? 0 : 10) - m), u } function addToScrollPos(e, t, n) { null == t && null == n || resolveScrollToPos(e), null != t && (e.curOp.scrollLeft = (null == e.curOp.scrollLeft ? e.doc.scrollLeft : e.curOp.scrollLeft) + t), null != n && (e.curOp.scrollTop = (null == e.curOp.scrollTop ? e.doc.scrollTop : e.curOp.scrollTop) + n) } function ensureCursorVisible(e) { resolveScrollToPos(e); var t = e.getCursor(), n = t, r = t; e.options.lineWrapping || (n = t.ch ? S(t.line, t.ch - 1) : t, r = S(t.line, t.ch + 1)), e.curOp.scrollToPos = { from: n, to: r, margin: e.options.cursorScrollMargin, isCursor: !0 } } function resolveScrollToPos(e) { var t = e.curOp.scrollToPos; if (t) { e.curOp.scrollToPos = null; var n = estimateCoords(e, t.from), r = estimateCoords(e, t.to), i = calculateScrollPos(e, Math.min(n.left, r.left), Math.min(n.top, r.top) - t.margin, Math.max(n.right, r.right), Math.max(n.bottom, r.bottom) + t.margin); e.scrollTo(i.scrollLeft, i.scrollTop) } } function indentLine(e, t, n, r) { var i, o = e.doc; null == n && (n = "add"), "smart" == n && (o.mode.indent ? i = getStateBefore(e, t) : n = "prev"); var a = e.options.tabSize, s = getLine(o, t), l = Te(s.text, null, a); s.stateAfter && (s.stateAfter = null); var u, c = s.text.match(/^\s*/)[0]; if (r || /\S/.test(s.text)) { if ("smart" == n && ((u = o.mode.indent(i, s.text.slice(c.length), s.text)) == xe || u > 150)) { if (!r) return; n = "prev" } } else u = 0, n = "not"; "prev" == n ? u = t > o.first ? Te(getLine(o, t - 1).text, null, a) : 0 : "add" == n ? u = l + e.options.indentUnit : "subtract" == n ? u = l - e.options.indentUnit : "number" == typeof n && (u = l + n), u = Math.max(0, u); var d = "", f = 0; if (e.options.indentWithTabs) for (var h = Math.floor(u / a); h; --h)f += a, d += "\t"; if (f < u && (d += spaceStr(u - f)), d != c) return replaceRange(o, d, S(t, 0), S(t, c.length), "+input"), s.stateAfter = null, !0; for (var h = 0; h < o.sel.ranges.length; h++) { var p = o.sel.ranges[h]; if (p.head.line == t && p.head.ch < c.length) { var f = S(t, c.length); replaceOneSelection(o, h, new Range(f, f)); break } } } function changeLine(e, t, n, r) { var i = t, o = t; return "number" == typeof t ? o = getLine(e, clipLine(e, t)) : i = lineNo(t), null == i ? null : (r(o, i) && e.cm && regLineChange(e.cm, i, n), o) } function deleteNearSelection(e, t) { for (var n = e.doc.sel.ranges, r = [], i = 0; i < n.length; i++) { for (var o = t(n[i]); r.length && k(o.from, lst(r).to) <= 0;) { var a = r.pop(); if (k(a.from, o.from) < 0) { o.from = a.from; break } } r.push(o) } runInOp(e, function () { for (var t = r.length - 1; t >= 0; t--)replaceRange(e.doc, "", r[t].from, r[t].to, "+delete"); ensureCursorVisible(e) }) } function findPosH(e, t, n, r, i) { var o = t.line, a = t.ch, s = n, l = getLine(e, o); function moveOnce(t) { var r = (i ? moveVisually : moveLogically)(l, a, n, !0); if (null == r) { if (t || !function findNextLine() { var t = o + n; return !(t < e.first || t >= e.first + e.size) && (o = t, l = getLine(e, t)) }()) return !1; a = i ? (n < 0 ? lineRight : lineLeft)(l) : n < 0 ? l.text.length : 0 } else a = r; return !0 } if ("char" == r) moveOnce(); else if ("column" == r) moveOnce(!0); else if ("word" == r || "group" == r) for (var u = null, c = "group" == r, d = e.cm && e.cm.getHelper(t, "wordChars"), f = !0; !(n < 0) || moveOnce(!f); f = !1) { var h = l.text.charAt(a) || "\n", p = isWordChar(h, d) ? "w" : c && "\n" == h ? "n" : !c || /\s/.test(h) ? null : "p"; if (!c || f || p || (p = "s"), u && u != p) { n < 0 && (n = 1, moveOnce()); break } if (p && (u = p), n > 0 && !moveOnce(!f)) break } var m = skipAtomic(e, S(o, a), t, s, !0); return k(t, m) || (m.hitSide = !0), m } function findPosV(e, t, n, r) { var i, o = e.doc, a = t.left; if ("page" == r) { var s = Math.min(e.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight); i = t.top + n * (s - (n < 0 ? 1.5 : .5) * textHeight(e.display)) } else "line" == r && (i = n > 0 ? t.bottom + 3 : t.top - 3); for (; ;) { var l = coordsChar(e, a, i); if (!l.outside) break; if (n < 0 ? i <= 0 : i >= o.height) { l.hitSide = !0; break } i += 5 * n } return l } CodeMirror.prototype = { constructor: CodeMirror, focus: function () { window.focus(), this.display.input.focus() }, setOption: function (e, t) { var n = this.options, r = n[e]; n[e] == t && "mode" != e || (n[e] = t, j.hasOwnProperty(e) && operation(this, j[e])(this, t, r)) }, getOption: function (e) { return this.options[e] }, getDoc: function () { return this.doc }, addKeyMap: function (e, t) { this.state.keyMaps[t ? "push" : "unshift"](getKeyMap(e)) }, removeKeyMap: function (e) { for (var t = this.state.keyMaps, n = 0; n < t.length; ++n)if (t[n] == e || t[n].name == e) return t.splice(n, 1), !0 }, addOverlay: methodOp(function (e, t) { var n = e.token ? e : CodeMirror.getMode(this.options, e); if (n.startState) throw new Error("Overlays may not be stateful."); this.state.overlays.push({ mode: n, modeSpec: e, opaque: t && t.opaque }), this.state.modeGen++, regChange(this) }), removeOverlay: methodOp(function (e) { for (var t = this.state.overlays, n = 0; n < t.length; ++n) { var r = t[n].modeSpec; if (r == e || "string" == typeof e && r.name == e) return t.splice(n, 1), this.state.modeGen++, void regChange(this) } }), indentLine: methodOp(function (e, t, n) { "string" != typeof t && "number" != typeof t && (t = null == t ? this.options.smartIndent ? "smart" : "prev" : t ? "add" : "subtract"), isLine(this.doc, e) && indentLine(this, e, t, n) }), indentSelection: methodOp(function (e) { for (var t = this.doc.sel.ranges, n = -1, r = 0; r < t.length; r++) { var i = t[r]; if (i.empty()) i.head.line > n && (indentLine(this, i.head.line, e, !0), n = i.head.line, r == this.doc.sel.primIndex && ensureCursorVisible(this)); else { var o = i.from(), a = i.to(), s = Math.max(n, o.line); n = Math.min(this.lastLine(), a.line - (a.ch ? 0 : 1)) + 1; for (var l = s; l < n; ++l)indentLine(this, l, e); var u = this.doc.sel.ranges; 0 == o.ch && t.length == u.length && u[r].from().ch > 0 && replaceOneSelection(this.doc, r, new Range(o, u[r].to()), Ce) } } }), getTokenAt: function (e, t) { return takeToken(this, e, t) }, getLineTokens: function (e, t) { return takeToken(this, S(e), t, !0) }, getTokenTypeAt: function (e) { e = clipPos(this.doc, e); var t, n = getLineStyles(this, getLine(this.doc, e.line)), r = 0, i = (n.length - 1) / 2, o = e.ch; if (0 == o) t = n[2]; else for (; ;) { var a = r + i >> 1; if ((a ? n[2 * a - 1] : 0) >= o) i = a; else { if (!(n[2 * a + 1] < o)) { t = n[2 * a + 2]; break } r = a + 1 } } var s = t ? t.indexOf("cm-overlay ") : -1; return s < 0 ? t : 0 == s ? null : t.slice(0, s - 1) }, getModeAt: function (e) { var t = this.doc.mode; return t.innerMode ? CodeMirror.innerMode(t, this.getTokenAt(e).state).mode : t }, getHelper: function (e, t) { return this.getHelpers(e, t)[0] }, getHelpers: function (e, t) { var n = []; if (!W.hasOwnProperty(t)) return n; var r = W[t], i = this.getModeAt(e); if ("string" == typeof i[t]) r[i[t]] && n.push(r[i[t]]); else if (i[t]) for (var o = 0; o < i[t].length; o++) { var a = r[i[t][o]]; a && n.push(a) } else i.helperType && r[i.helperType] ? n.push(r[i.helperType]) : r[i.name] && n.push(r[i.name]); for (var o = 0; o < r._global.length; o++) { var s = r._global[o]; s.pred(i, this) && -1 == indexOf(n, s.val) && n.push(s.val) } return n }, getStateAfter: function (e, t) { var n = this.doc; return getStateBefore(this, (e = clipLine(n, null == e ? n.first + n.size - 1 : e)) + 1, t) }, cursorCoords: function (e, t) { var n = this.doc.sel.primary(); return cursorCoords(this, null == e ? n.head : "object" == typeof e ? clipPos(this.doc, e) : e ? n.from() : n.to(), t || "page") }, charCoords: function (e, t) { return charCoords(this, clipPos(this.doc, e), t || "page") }, coordsChar: function (e, t) { return coordsChar(this, (e = fromCoordSystem(this, e, t || "page")).left, e.top) }, lineAtHeight: function (e, t) { return e = fromCoordSystem(this, { top: e, left: 0 }, t || "page").top, lineAtHeight(this.doc, e + this.display.viewOffset) }, heightAtLine: function (e, t) { var n, r = !1; if ("number" == typeof e) { var i = this.doc.first + this.doc.size - 1; e < this.doc.first ? e = this.doc.first : e > i && (e = i, r = !0), n = getLine(this.doc, e) } else n = e; return intoCoordSystem(this, n, { top: 0, left: 0 }, t || "page").top + (r ? this.doc.height - heightAtLine(n) : 0) }, defaultTextHeight: function () { return textHeight(this.display) }, defaultCharWidth: function () { return charWidth(this.display) }, setGutterMarker: methodOp(function (e, t, n) { return changeLine(this.doc, e, "gutter", function (e) { var r = e.gutterMarkers || (e.gutterMarkers = {}); return r[t] = n, !n && isEmpty(r) && (e.gutterMarkers = null), !0 }) }), clearGutter: methodOp(function (e) { var t = this, n = t.doc, r = n.first; n.iter(function (n) { n.gutterMarkers && n.gutterMarkers[e] && (n.gutterMarkers[e] = null, regLineChange(t, r, "gutter"), isEmpty(n.gutterMarkers) && (n.gutterMarkers = null)), ++r }) }), lineInfo: function (e) { if ("number" == typeof e) { if (!isLine(this.doc, e)) return null; var t = e; if (!(e = getLine(this.doc, e))) return null } else { var t = lineNo(e); if (null == t) return null } return { line: t, handle: e, text: e.text, gutterMarkers: e.gutterMarkers, textClass: e.textClass, bgClass: e.bgClass, wrapClass: e.wrapClass, widgets: e.widgets } }, getViewport: function () { return { from: this.display.viewFrom, to: this.display.viewTo } }, addWidget: function (e, t, n, r, i) { var o = this.display, a = (e = cursorCoords(this, clipPos(this.doc, e))).bottom, s = e.left; if (t.style.position = "absolute", t.setAttribute("cm-ignore-events", "true"), this.display.input.setUneditable(t), o.sizer.appendChild(t), "over" == r) a = e.top; else if ("above" == r || "near" == r) { var l = Math.max(o.wrapper.clientHeight, this.doc.height), u = Math.max(o.sizer.clientWidth, o.lineSpace.clientWidth); ("above" == r || e.bottom + t.offsetHeight > l) && e.top > t.offsetHeight ? a = e.top - t.offsetHeight : e.bottom + t.offsetHeight <= l && (a = e.bottom), s + t.offsetWidth > u && (s = u - t.offsetWidth) } t.style.top = a + "px", t.style.left = t.style.right = "", "right" == i ? (s = o.sizer.clientWidth - t.offsetWidth, t.style.right = "0px") : ("left" == i ? s = 0 : "middle" == i && (s = (o.sizer.clientWidth - t.offsetWidth) / 2), t.style.left = s + "px"), n && function scrollIntoView(e, t, n, r, i) { var o = calculateScrollPos(e, t, n, r, i); null != o.scrollTop && setScrollTop(e, o.scrollTop), null != o.scrollLeft && setScrollLeft(e, o.scrollLeft) }(this, s, a, s + t.offsetWidth, a + t.offsetHeight) }, triggerOnKeyDown: methodOp(onKeyDown), triggerOnKeyPress: methodOp(onKeyPress), triggerOnKeyUp: onKeyUp, execCommand: function (e) { if (K.hasOwnProperty(e)) return K[e].call(null, this) }, triggerElectric: methodOp(function (e) { triggerElectric(this, e) }), findPosH: function (e, t, n, r) { var i = 1; t < 0 && (i = -1, t = -t); for (var o = 0, a = clipPos(this.doc, e); o < t && !(a = findPosH(this.doc, a, i, n, r)).hitSide; ++o); return a }, moveH: methodOp(function (e, t) { var n = this; n.extendSelectionsBy(function (r) { return n.display.shift || n.doc.extend || r.empty() ? findPosH(n.doc, r.head, e, t, n.options.rtlMoveVisually) : e < 0 ? r.from() : r.to() }, ke) }), deleteH: methodOp(function (e, t) { var n = this.doc.sel, r = this.doc; n.somethingSelected() ? r.replaceSelection("", null, "+delete") : deleteNearSelection(this, function (n) { var i = findPosH(r, n.head, e, t, !1); return e < 0 ? { from: i, to: n.head } : { from: n.head, to: i } }) }), findPosV: function (e, t, n, r) { var i = 1, o = r; t < 0 && (i = -1, t = -t); for (var a = 0, s = clipPos(this.doc, e); a < t; ++a) { var l = cursorCoords(this, s, "div"); if (null == o ? o = l.left : l.left = o, (s = findPosV(this, l, i, n)).hitSide) break } return s }, moveV: methodOp(function (e, t) { var n = this, r = this.doc, i = [], o = !n.display.shift && !r.extend && r.sel.somethingSelected(); if (r.extendSelectionsBy(function (a) { if (o) return e < 0 ? a.from() : a.to(); var s = cursorCoords(n, a.head, "div"); null != a.goalColumn && (s.left = a.goalColumn), i.push(s.left); var l = findPosV(n, s, e, t); return "page" == t && a == r.sel.primary() && addToScrollPos(n, null, charCoords(n, l, "div").top - s.top), l }, ke), i.length) for (var a = 0; a < r.sel.ranges.length; a++)r.sel.ranges[a].goalColumn = i[a] }), findWordAt: function (e) { var t = this.doc, n = getLine(t, e.line).text, r = e.ch, i = e.ch; if (n) { var o = this.getHelper(e, "wordChars"); (e.xRel < 0 || i == n.length) && r ? --r : ++i; for (var a = n.charAt(r), s = isWordChar(a, o) ? function (e) { return isWordChar(e, o) } : /\s/.test(a) ? function (e) { return /\s/.test(e) } : function (e) { return !/\s/.test(e) && !isWordChar(e) }; r > 0 && s(n.charAt(r - 1));)--r; for (; i < n.length && s(n.charAt(i));)++i } return new Range(S(e.line, r), S(e.line, i)) }, toggleOverwrite: function (e) { null != e && e == this.state.overwrite || ((this.state.overwrite = !this.state.overwrite) ? Ie(this.display.cursorDiv, "CodeMirror-overwrite") : Fe(this.display.cursorDiv, "CodeMirror-overwrite"), _e(this, "overwriteToggle", this, this.state.overwrite)) }, hasFocus: function () { return this.display.input.getField() == activeElt() }, isReadOnly: function () { return !(!this.options.readOnly && !this.doc.cantEdit) }, scrollTo: methodOp(function (e, t) { null == e && null == t || resolveScrollToPos(this), null != e && (this.curOp.scrollLeft = e), null != t && (this.curOp.scrollTop = t) }), getScrollInfo: function () { var e = this.display.scroller; return { left: e.scrollLeft, top: e.scrollTop, height: e.scrollHeight - scrollGap(this) - this.display.barHeight, width: e.scrollWidth - scrollGap(this) - this.display.barWidth, clientHeight: displayHeight(this), clientWidth: displayWidth(this) } }, scrollIntoView: methodOp(function (e, t) { if (null == e ? (e = { from: this.doc.sel.primary().head, to: null }, null == t && (t = this.options.cursorScrollMargin)) : "number" == typeof e ? e = { from: S(e, 0), to: null } : null == e.from && (e = { from: e, to: null }), e.to || (e.to = e.from), e.margin = t || 0, null != e.from.line) resolveScrollToPos(this), this.curOp.scrollToPos = e; else { var n = calculateScrollPos(this, Math.min(e.from.left, e.to.left), Math.min(e.from.top, e.to.top) - e.margin, Math.max(e.from.right, e.to.right), Math.max(e.from.bottom, e.to.bottom) + e.margin); this.scrollTo(n.scrollLeft, n.scrollTop) } }), setSize: methodOp(function (e, t) { var n = this; function interpret(e) { return "number" == typeof e || /^\d+$/.test(String(e)) ? e + "px" : e } null != e && (n.display.wrapper.style.width = interpret(e)), null != t && (n.display.wrapper.style.height = interpret(t)), n.options.lineWrapping && clearLineMeasurementCache(this); var r = n.display.viewFrom; n.doc.iter(r, n.display.viewTo, function (e) { if (e.widgets) for (var t = 0; t < e.widgets.length; t++)if (e.widgets[t].noHScroll) { regLineChange(n, r, "widget"); break } ++r }), n.curOp.forceUpdate = !0, _e(n, "refresh", this) }), operation: function (e) { return runInOp(this, e) }, refresh: methodOp(function () { var e = this.display.cachedTextHeight; regChange(this), this.curOp.forceUpdate = !0, clearCaches(this), this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop), updateGutterSpace(this), (null == e || Math.abs(e - textHeight(this.display)) > .5) && estimateLineHeights(this), _e(this, "refresh", this) }), swapDoc: methodOp(function (e) { var t = this.doc; return t.cm = null, attachDoc(this, e), clearCaches(this), this.display.input.reset(), this.scrollTo(e.scrollLeft, e.scrollTop), this.curOp.forceScroll = !0, signalLater(this, "swapDoc", this, t), t }), getInputField: function () { return this.display.input.getField() }, getWrapperElement: function () { return this.display.wrapper }, getScrollerElement: function () { return this.display.scroller }, getGutterElement: function () { return this.display.gutters } }, eventMixin(CodeMirror); var z = CodeMirror.defaults = {}, j = CodeMirror.optionHandlers = {}; function option(e, t, n, r) { CodeMirror.defaults[e] = t, n && (j[e] = r ? function (e, t, r) { r != U && n(e, t, r) } : n) } var U = CodeMirror.Init = { toString: function () { return "CodeMirror.Init" } }; option("value", "", function (e, t) { e.setValue(t) }, !0), option("mode", null, function (e, t) { e.doc.modeOption = t, loadMode(e) }, !0), option("indentUnit", 2, loadMode, !0), option("indentWithTabs", !1), option("smartIndent", !0), option("tabSize", 4, function (e) { resetModeState(e), clearCaches(e), regChange(e) }, !0), option("lineSeparator", null, function (e, t) { if (e.doc.lineSep = t, t) { var n = [], r = e.doc.first; e.doc.iter(function (e) { for (var i = 0; ;) { var o = e.text.indexOf(t, i); if (-1 == o) break; i = o + t.length, n.push(S(r, o)) } r++ }); for (var i = n.length - 1; i >= 0; i--)replaceRange(e.doc, t, n[i], S(n[i].line, n[i].ch + t.length)) } }), option("specialChars", /[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g, function (e, t, n) { e.state.specialChars = new RegExp(t.source + (t.test("\t") ? "" : "|\t"), "g"), n != CodeMirror.Init && e.refresh() }), option("specialCharPlaceholder", function defaultSpecialCharPlaceholder(e) { var t = elt("span", "\u2022", "cm-invalidchar"); return t.title = "\\u" + e.charCodeAt(0).toString(16), t.setAttribute("aria-label", t.title), t }, function (e) { e.refresh() }, !0), option("electricChars", !0), option("inputStyle", m ? "contenteditable" : "textarea", function () { throw new Error("inputStyle can not (yet) be changed in a running editor") }, !0), option("rtlMoveVisually", !y), option("wholeLineUpdateBefore", !0), option("theme", "default", function (e) { themeChanged(e), guttersChanged(e) }, !0), option("keyMap", "default", function (e, t, n) { var r = getKeyMap(t), i = n != CodeMirror.Init && getKeyMap(n); i && i.detach && i.detach(e, r), r.attach && r.attach(e, i || null) }), option("extraKeys", null), option("lineWrapping", !1, function wrappingChanged(e) { e.options.lineWrapping ? (Ie(e.display.wrapper, "CodeMirror-wrap"), e.display.sizer.style.minWidth = "", e.display.sizerWidth = null) : (Fe(e.display.wrapper, "CodeMirror-wrap"), findMaxLine(e)), estimateLineHeights(e), regChange(e), clearCaches(e), setTimeout(function () { updateScrollbars(e) }, 100) }, !0), option("gutters", [], function (e) { setGuttersForLineNumbers(e.options), guttersChanged(e) }, !0), option("fixedGutter", !0, function (e, t) { e.display.gutters.style.left = t ? compensateForHScroll(e.display) + "px" : "0", e.refresh() }, !0), option("coverGutterNextToScrollbar", !1, function (e) { updateScrollbars(e) }, !0), option("scrollbarStyle", "native", function (e) { initScrollbars(e), updateScrollbars(e), e.display.scrollbars.setScrollTop(e.doc.scrollTop), e.display.scrollbars.setScrollLeft(e.doc.scrollLeft) }, !0), option("lineNumbers", !1, function (e) { setGuttersForLineNumbers(e.options), guttersChanged(e) }, !0), option("firstLineNumber", 1, guttersChanged, !0), option("lineNumberFormatter", function (e) { return e }, guttersChanged, !0), option("showCursorWhenSelecting", !1, updateSelection, !0), option("resetSelectionOnContextMenu", !0), option("lineWiseCopyCut", !0), option("readOnly", !1, function (e, t) { "nocursor" == t ? (onBlur(e), e.display.input.blur(), e.display.disabled = !0) : e.display.disabled = !1, e.display.input.readOnlyChanged(t) }), option("disableInput", !1, function (e, t) { t || e.display.input.reset() }, !0), option("dragDrop", !0, function dragDropChanged(e, t, n) { var r = n && n != CodeMirror.Init; if (!t != !r) { var i = e.display.dragFunctions, o = t ? ge : ye; o(e.display.scroller, "dragstart", i.start), o(e.display.scroller, "dragenter", i.enter), o(e.display.scroller, "dragover", i.over), o(e.display.scroller, "dragleave", i.leave), o(e.display.scroller, "drop", i.drop) } }), option("allowDropFileTypes", null), option("cursorBlinkRate", 530), option("cursorScrollMargin", 0), option("cursorHeight", 1, updateSelection, !0), option("singleCursorHeightPerLine", !0, updateSelection, !0), option("workTime", 100), option("workDelay", 100), option("flattenSpans", !0, resetModeState, !0), option("addModeClass", !1, resetModeState, !0), option("pollInterval", 100), option("undoDepth", 200, function (e, t) { e.doc.history.undoDepth = t }), option("historyEventDelay", 1250), option("viewportMargin", 10, function (e) { e.refresh() }, !0), option("maxHighlightLength", 1e4, resetModeState, !0), option("moveInputWithCursor", !0, function (e, t) { t || e.display.input.resetPosition() }), option("tabindex", null, function (e, t) { e.display.input.getField().tabIndex = t || "" }), option("autofocus", null); var q = CodeMirror.modes = {}, H = CodeMirror.mimeModes = {}; CodeMirror.defineMode = function (e, t) { CodeMirror.defaults.mode || "null" == e || (CodeMirror.defaults.mode = e), arguments.length > 2 && (t.dependencies = Array.prototype.slice.call(arguments, 2)), q[e] = t }, CodeMirror.defineMIME = function (e, t) { H[e] = t }, CodeMirror.resolveMode = function (e) { if ("string" == typeof e && H.hasOwnProperty(e)) e = H[e]; else if (e && "string" == typeof e.name && H.hasOwnProperty(e.name)) { var t = H[e.name]; "string" == typeof t && (t = { name: t }), (e = createObj(t, e)).name = t.name } else if ("string" == typeof e && /^[\w\-]+\/[\w\-]+\+xml$/.test(e)) return CodeMirror.resolveMode("application/xml"); return "string" == typeof e ? { name: e } : e || { name: "null" } }, CodeMirror.getMode = function (e, t) { var t = CodeMirror.resolveMode(t), n = q[t.name]; if (!n) return CodeMirror.getMode(e, "text/plain"); var r = n(e, t); if (V.hasOwnProperty(t.name)) { var i = V[t.name]; for (var o in i) i.hasOwnProperty(o) && (r.hasOwnProperty(o) && (r["_" + o] = r[o]), r[o] = i[o]) } if (r.name = t.name, t.helperType && (r.helperType = t.helperType), t.modeProps) for (var o in t.modeProps) r[o] = t.modeProps[o]; return r }, CodeMirror.defineMode("null", function () { return { token: function (e) { e.skipToEnd() } } }), CodeMirror.defineMIME("text/plain", "null"); var V = CodeMirror.modeExtensions = {}; CodeMirror.extendMode = function (e, t) { var n = V.hasOwnProperty(e) ? V[e] : V[e] = {}; copyObj(t, n) }, CodeMirror.defineExtension = function (e, t) { CodeMirror.prototype[e] = t }, CodeMirror.defineDocExtension = function (e, t) { ce.prototype[e] = t }, CodeMirror.defineOption = option; var G = []; CodeMirror.defineInitHook = function (e) { G.push(e) }; var W = CodeMirror.helpers = {}; CodeMirror.registerHelper = function (e, t, n) { W.hasOwnProperty(e) || (W[e] = CodeMirror[e] = { _global: [] }), W[e][t] = n }, CodeMirror.registerGlobalHelper = function (e, t, n, r) { CodeMirror.registerHelper(e, t, r), W[e]._global.push({ pred: n, val: r }) }; var Y = CodeMirror.copyState = function (e, t) { if (!0 === t) return t; if (e.copyState) return e.copyState(t); var n = {}; for (var r in t) { var i = t[r]; i instanceof Array && (i = i.concat([])), n[r] = i } return n }, Z = CodeMirror.startState = function (e, t, n) { return !e.startState || e.startState(t, n) }; CodeMirror.innerMode = function (e, t) { for (; e.innerMode;) { var n = e.innerMode(t); if (!n || n.mode == e) break; t = n.state, e = n.mode } return n || { mode: e, state: t } }; var K = CodeMirror.commands = { selectAll: function (e) { e.setSelection(S(e.firstLine(), 0), S(e.lastLine()), Ce) }, singleSelection: function (e) { e.setSelection(e.getCursor("anchor"), e.getCursor("head"), Ce) }, killLine: function (e) { deleteNearSelection(e, function (t) { if (t.empty()) { var n = getLine(e.doc, t.head.line).text.length; return t.head.ch == n && t.head.line < e.lastLine() ? { from: t.head, to: S(t.head.line + 1, 0) } : { from: t.head, to: S(t.head.line, n) } } return { from: t.from(), to: t.to() } }) }, deleteLine: function (e) { deleteNearSelection(e, function (t) { return { from: S(t.from().line, 0), to: clipPos(e.doc, S(t.to().line + 1, 0)) } }) }, delLineLeft: function (e) { deleteNearSelection(e, function (e) { return { from: S(e.from().line, 0), to: e.from() } }) }, delWrappedLineLeft: function (e) { deleteNearSelection(e, function (t) { var n = e.charCoords(t.head, "div").top + 5, r = e.coordsChar({ left: 0, top: n }, "div"); return { from: r, to: t.from() } }) }, delWrappedLineRight: function (e) { deleteNearSelection(e, function (t) { var n = e.charCoords(t.head, "div").top + 5, r = e.coordsChar({ left: e.display.lineDiv.offsetWidth + 100, top: n }, "div"); return { from: t.from(), to: r } }) }, undo: function (e) { e.undo() }, redo: function (e) { e.redo() }, undoSelection: function (e) { e.undoSelection() }, redoSelection: function (e) { e.redoSelection() }, goDocStart: function (e) { e.extendSelection(S(e.firstLine(), 0)) }, goDocEnd: function (e) { e.extendSelection(S(e.lastLine())) }, goLineStart: function (e) { e.extendSelectionsBy(function (t) { return lineStart(e, t.head.line) }, { origin: "+move", bias: 1 }) }, goLineStartSmart: function (e) { e.extendSelectionsBy(function (t) { return lineStartSmart(e, t.head) }, { origin: "+move", bias: 1 }) }, goLineEnd: function (e) { e.extendSelectionsBy(function (t) { return function lineEnd(e, t) { for (var n, r = getLine(e.doc, t); n = collapsedSpanAtEnd(r);)r = n.find(1, !0).line, t = null; var i = getOrder(r), o = i ? i[0].level % 2 ? lineLeft(r) : lineRight(r) : r.text.length; return S(null == t ? lineNo(r) : t, o) }(e, t.head.line) }, { origin: "+move", bias: -1 }) }, goLineRight: function (e) { e.extendSelectionsBy(function (t) { var n = e.charCoords(t.head, "div").top + 5; return e.coordsChar({ left: e.display.lineDiv.offsetWidth + 100, top: n }, "div") }, ke) }, goLineLeft: function (e) { e.extendSelectionsBy(function (t) { var n = e.charCoords(t.head, "div").top + 5; return e.coordsChar({ left: 0, top: n }, "div") }, ke) }, goLineLeftSmart: function (e) { e.extendSelectionsBy(function (t) { var n = e.charCoords(t.head, "div").top + 5, r = e.coordsChar({ left: 0, top: n }, "div"); return r.ch < e.getLine(r.line).search(/\S/) ? lineStartSmart(e, t.head) : r }, ke) }, goLineUp: function (e) { e.moveV(-1, "line") }, goLineDown: function (e) { e.moveV(1, "line") }, goPageUp: function (e) { e.moveV(-1, "page") }, goPageDown: function (e) { e.moveV(1, "page") }, goCharLeft: function (e) { e.moveH(-1, "char") }, goCharRight: function (e) { e.moveH(1, "char") }, goColumnLeft: function (e) { e.moveH(-1, "column") }, goColumnRight: function (e) { e.moveH(1, "column") }, goWordLeft: function (e) { e.moveH(-1, "word") }, goGroupRight: function (e) { e.moveH(1, "group") }, goGroupLeft: function (e) { e.moveH(-1, "group") }, goWordRight: function (e) { e.moveH(1, "word") }, delCharBefore: function (e) { e.deleteH(-1, "char") }, delCharAfter: function (e) { e.deleteH(1, "char") }, delWordBefore: function (e) { e.deleteH(-1, "word") }, delWordAfter: function (e) { e.deleteH(1, "word") }, delGroupBefore: function (e) { e.deleteH(-1, "group") }, delGroupAfter: function (e) { e.deleteH(1, "group") }, indentAuto: function (e) { e.indentSelection("smart") }, indentMore: function (e) { e.indentSelection("add") }, indentLess: function (e) { e.indentSelection("subtract") }, insertTab: function (e) { e.replaceSelection("\t") }, insertSoftTab: function (e) { for (var t = [], n = e.listSelections(), r = e.options.tabSize, i = 0; i < n.length; i++) { var o = n[i].from(), a = Te(e.getLine(o.line), o.ch, r); t.push(new Array(r - a % r + 1).join(" ")) } e.replaceSelections(t) }, defaultTab: function (e) { e.somethingSelected() ? e.indentSelection("add") : e.execCommand("insertTab") }, transposeChars: function (e) { runInOp(e, function () { for (var t = e.listSelections(), n = [], r = 0; r < t.length; r++) { var i = t[r].head, o = getLine(e.doc, i.line).text; if (o) if (i.ch == o.length && (i = new S(i.line, i.ch - 1)), i.ch > 0) i = new S(i.line, i.ch + 1), e.replaceRange(o.charAt(i.ch - 1) + o.charAt(i.ch - 2), S(i.line, i.ch - 2), i, "+transpose"); else if (i.line > e.doc.first) { var a = getLine(e.doc, i.line - 1).text; a && e.replaceRange(o.charAt(0) + e.doc.lineSeparator() + a.charAt(a.length - 1), S(i.line - 1, a.length - 1), S(i.line, 1), "+transpose") } n.push(new Range(i, i)) } e.setSelections(n) }) }, newlineAndIndent: function (e) { runInOp(e, function () { for (var t = e.listSelections().length, n = 0; n < t; n++) { var r = e.listSelections()[n]; e.replaceRange(e.doc.lineSeparator(), r.anchor, r.head, "+input"), e.indentLine(r.from().line + 1, null, !0) } ensureCursorVisible(e) }) }, toggleOverwrite: function (e) { e.toggleOverwrite() } }, X = CodeMirror.keyMap = {}; function normalizeKeyName(e) { for (var t, n, r, i, o = e.split(/-(?!$)/), e = o[o.length - 1], a = 0; a < o.length - 1; a++) { var s = o[a]; if (/^(cmd|meta|m)$/i.test(s)) i = !0; else if (/^a(lt)?$/i.test(s)) t = !0; else if (/^(c|ctrl|control)$/i.test(s)) n = !0; else { if (!/^s(hift)$/i.test(s)) throw new Error("Unrecognized modifier name: " + s); r = !0 } } return t && (e = "Alt-" + e), n && (e = "Ctrl-" + e), i && (e = "Cmd-" + e), r && (e = "Shift-" + e), e } X.basic = { Left: "goCharLeft", Right: "goCharRight", Up: "goLineUp", Down: "goLineDown", End: "goLineEnd", Home: "goLineStartSmart", PageUp: "goPageUp", PageDown: "goPageDown", Delete: "delCharAfter", Backspace: "delCharBefore", "Shift-Backspace": "delCharBefore", Tab: "defaultTab", "Shift-Tab": "indentAuto", Enter: "newlineAndIndent", Insert: "toggleOverwrite", Esc: "singleSelection" }, X.pcDefault = { "Ctrl-A": "selectAll", "Ctrl-D": "deleteLine", "Ctrl-Z": "undo", "Shift-Ctrl-Z": "redo", "Ctrl-Y": "redo", "Ctrl-Home": "goDocStart", "Ctrl-End": "goDocEnd", "Ctrl-Up": "goLineUp", "Ctrl-Down": "goLineDown", "Ctrl-Left": "goGroupLeft", "Ctrl-Right": "goGroupRight", "Alt-Left": "goLineStart", "Alt-Right": "goLineEnd", "Ctrl-Backspace": "delGroupBefore", "Ctrl-Delete": "delGroupAfter", "Ctrl-S": "save", "Ctrl-F": "find", "Ctrl-G": "findNext", "Shift-Ctrl-G": "findPrev", "Shift-Ctrl-F": "replace", "Shift-Ctrl-R": "replaceAll", "Ctrl-[": "indentLess", "Ctrl-]": "indentMore", "Ctrl-U": "undoSelection", "Shift-Ctrl-U": "redoSelection", "Alt-U": "redoSelection", fallthrough: "basic" }, X.emacsy = { "Ctrl-F": "goCharRight", "Ctrl-B": "goCharLeft", "Ctrl-P": "goLineUp", "Ctrl-N": "goLineDown", "Alt-F": "goWordRight", "Alt-B": "goWordLeft", "Ctrl-A": "goLineStart", "Ctrl-E": "goLineEnd", "Ctrl-V": "goPageDown", "Shift-Ctrl-V": "goPageUp", "Ctrl-D": "delCharAfter", "Ctrl-H": "delCharBefore", "Alt-D": "delWordAfter", "Alt-Backspace": "delWordBefore", "Ctrl-K": "killLine", "Ctrl-T": "transposeChars" }, X.macDefault = { "Cmd-A": "selectAll", "Cmd-D": "deleteLine", "Cmd-Z": "undo", "Shift-Cmd-Z": "redo", "Cmd-Y": "redo", "Cmd-Home": "goDocStart", "Cmd-Up": "goDocStart", "Cmd-End": "goDocEnd", "Cmd-Down": "goDocEnd", "Alt-Left": "goGroupLeft", "Alt-Right": "goGroupRight", "Cmd-Left": "goLineLeft", "Cmd-Right": "goLineRight", "Alt-Backspace": "delGroupBefore", "Ctrl-Alt-Backspace": "delGroupAfter", "Alt-Delete": "delGroupAfter", "Cmd-S": "save", "Cmd-F": "find", "Cmd-G": "findNext", "Shift-Cmd-G": "findPrev", "Cmd-Alt-F": "replace", "Shift-Cmd-Alt-F": "replaceAll", "Cmd-[": "indentLess", "Cmd-]": "indentMore", "Cmd-Backspace": "delWrappedLineLeft", "Cmd-Delete": "delWrappedLineRight", "Cmd-U": "undoSelection", "Shift-Cmd-U": "redoSelection", "Ctrl-Up": "goDocStart", "Ctrl-Down": "goDocEnd", fallthrough: ["basic", "emacsy"] }, X.default = g ? X.macDefault : X.pcDefault, CodeMirror.normalizeKeyMap = function (e) { var t = {}; for (var n in e) if (e.hasOwnProperty(n)) { var r = e[n]; if (/^(name|fallthrough|(de|at)tach)$/.test(n)) continue; if ("..." == r) { delete e[n]; continue } for (var i = map(n.split(" "), normalizeKeyName), o = 0; o < i.length; o++) { var a, s; o == i.length - 1 ? (s = i.join(" "), a = r) : (s = i.slice(0, o + 1).join(" "), a = "..."); var l = t[s]; if (l) { if (l != a) throw new Error("Inconsistent bindings for " + s) } else t[s] = a } delete e[n] } for (var u in t) e[u] = t[u]; return e }; var J = CodeMirror.lookupKey = function (e, t, n, r) { var i = (t = getKeyMap(t)).call ? t.call(e, r) : t[e]; if (!1 === i) return "nothing"; if ("..." === i) return "multi"; if (null != i && n(i)) return "handled"; if (t.fallthrough) { if ("[object Array]" != Object.prototype.toString.call(t.fallthrough)) return J(e, t.fallthrough, n, r); for (var o = 0; o < t.fallthrough.length; o++) { var a = J(e, t.fallthrough[o], n, r); if (a) return a } } }, Q = CodeMirror.isModifierKey = function (e) { var t = "string" == typeof e ? e : We[e.keyCode]; return "Ctrl" == t || "Alt" == t || "Shift" == t || "Mod" == t }, ee = CodeMirror.keyName = function (e, t) { if (c && 34 == e.keyCode && e.char) return !1; var n = We[e.keyCode], r = n; return null != r && !e.altGraphKey && (e.altKey && "Alt" != n && (r = "Alt-" + r), (b ? e.metaKey : e.ctrlKey) && "Ctrl" != n && (r = "Ctrl-" + r), (b ? e.ctrlKey : e.metaKey) && "Cmd" != n && (r = "Cmd-" + r), !t && e.shiftKey && "Shift" != n && (r = "Shift-" + r), r) }; function getKeyMap(e) { return "string" == typeof e ? X[e] : e } CodeMirror.fromTextArea = function (e, t) { if ((t = t ? copyObj(t) : {}).value = e.value, !t.tabindex && e.tabIndex && (t.tabindex = e.tabIndex), !t.placeholder && e.placeholder && (t.placeholder = e.placeholder), null == t.autofocus) { var n = activeElt(); t.autofocus = n == e || null != e.getAttribute("autofocus") && n == document.body } function save() { e.value = a.getValue() } if (e.form && (ge(e.form, "submit", save), !t.leaveSubmitMethodAlone)) { var r = e.form, i = r.submit; try { var o = r.submit = function () { save(), r.submit = i, r.submit(), r.submit = o } } catch (e) { } } t.finishInit = function (t) { t.save = save, t.getTextArea = function () { return e }, t.toTextArea = function () { t.toTextArea = isNaN, save(), e.parentNode.removeChild(t.getWrapperElement()), e.style.display = "", e.form && (ye(e.form, "submit", save), "function" == typeof e.form.submit && (e.form.submit = i)) } }, e.style.display = "none"; var a = CodeMirror(function (t) { e.parentNode.insertBefore(t, e.nextSibling) }, t); return a }; var te = CodeMirror.StringStream = function (e, t) { this.pos = this.start = 0, this.string = e, this.tabSize = t || 8, this.lastColumnPos = this.lastColumnValue = 0, this.lineStart = 0 }; te.prototype = { eol: function () { return this.pos >= this.string.length }, sol: function () { return this.pos == this.lineStart }, peek: function () { return this.string.charAt(this.pos) || void 0 }, next: function () { if (this.pos < this.string.length) return this.string.charAt(this.pos++) }, eat: function (e) { var t = this.string.charAt(this.pos); if ("string" == typeof e) var n = t == e; else var n = t && (e.test ? e.test(t) : e(t)); if (n) return ++this.pos, t }, eatWhile: function (e) { for (var t = this.pos; this.eat(e);); return this.pos > t }, eatSpace: function () { for (var e = this.pos; /[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos; return this.pos > e }, skipToEnd: function () { this.pos = this.string.length }, skipTo: function (e) { var t = this.string.indexOf(e, this.pos); if (t > -1) return this.pos = t, !0 }, backUp: function (e) { this.pos -= e }, column: function () { return this.lastColumnPos < this.start && (this.lastColumnValue = Te(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue), this.lastColumnPos = this.start), this.lastColumnValue - (this.lineStart ? Te(this.string, this.lineStart, this.tabSize) : 0) }, indentation: function () { return Te(this.string, null, this.tabSize) - (this.lineStart ? Te(this.string, this.lineStart, this.tabSize) : 0) }, match: function (e, t, n) { if ("string" != typeof e) { var r = this.string.slice(this.pos).match(e); return r && r.index > 0 ? null : (r && !1 !== t && (this.pos += r[0].length), r) } var i = function (e) { return n ? e.toLowerCase() : e }, o = this.string.substr(this.pos, e.length); if (i(o) == i(e)) return !1 !== t && (this.pos += e.length), !0 }, current: function () { return this.string.slice(this.start, this.pos) }, hideFirstChars: function (e, t) { this.lineStart += e; try { return t() } finally { this.lineStart -= e } } }; var ne = 0, re = CodeMirror.TextMarker = function (e, t) { this.lines = [], this.type = t, this.doc = e, this.id = ++ne }; eventMixin(re), re.prototype.clear = function () { if (!this.explicitlyCleared) { var e = this.doc.cm, t = e && !e.curOp; if (t && startOperation(e), hasHandler(this, "clear")) { var n = this.find(); n && signalLater(this, "clear", n.from, n.to) } for (var r = null, i = null, o = 0; o < this.lines.length; ++o) { var a = this.lines[o], s = getMarkedSpanFor(a.markedSpans, this); e && !this.collapsed ? regLineChange(e, lineNo(a), "text") : e && (null != s.to && (i = lineNo(a)), null != s.from && (r = lineNo(a))), a.markedSpans = removeMarkedSpan(a.markedSpans, s), null == s.from && this.collapsed && !lineIsHidden(this.doc, a) && e && updateLineHeight(a, textHeight(e.display)) } if (e && this.collapsed && !e.options.lineWrapping) for (var o = 0; o < this.lines.length; ++o) { var l = visualLine(this.lines[o]), u = lineLength(l); u > e.display.maxLineLength && (e.display.maxLine = l, e.display.maxLineLength = u, e.display.maxLineChanged = !0) } null != r && e && this.collapsed && regChange(e, r, i + 1), this.lines.length = 0, this.explicitlyCleared = !0, this.atomic && this.doc.cantEdit && (this.doc.cantEdit = !1, e && reCheckSelection(e.doc)), e && signalLater(e, "markerCleared", e, this), t && endOperation(e), this.parent && this.parent.clear() } }, re.prototype.find = function (e, t) { var n, r; null == e && "bookmark" == this.type && (e = 1); for (var i = 0; i < this.lines.length; ++i) { var o = this.lines[i], a = getMarkedSpanFor(o.markedSpans, this); if (null != a.from && (n = S(t ? o : lineNo(o), a.from), -1 == e)) return n; if (null != a.to && (r = S(t ? o : lineNo(o), a.to), 1 == e)) return r } return n && { from: n, to: r } }, re.prototype.changed = function () { var e = this.find(-1, !0), t = this, n = this.doc.cm; e && n && runInOp(n, function () { var r = e.line, i = lineNo(e.line), o = findViewForLine(n, i); if (o && (clearLineMeasurementCacheFor(o), n.curOp.selectionChanged = n.curOp.forceUpdate = !0), n.curOp.updateMaxLine = !0, !lineIsHidden(t.doc, r) && null != t.height) { var a = t.height; t.height = null; var s = widgetHeight(t) - a; s && updateLineHeight(r, r.height + s) } }) }, re.prototype.attachLine = function (e) { if (!this.lines.length && this.doc.cm) { var t = this.doc.cm.curOp; t.maybeHiddenMarkers && -1 != indexOf(t.maybeHiddenMarkers, this) || (t.maybeUnhiddenMarkers || (t.maybeUnhiddenMarkers = [])).push(this) } this.lines.push(e) }, re.prototype.detachLine = function (e) { if (this.lines.splice(indexOf(this.lines, e), 1), !this.lines.length && this.doc.cm) { var t = this.doc.cm.curOp; (t.maybeHiddenMarkers || (t.maybeHiddenMarkers = [])).push(this) } }; var ne = 0; function markText(e, t, n, r, i) { if (r && r.shared) return function markTextShared(e, t, n, r, i) { (r = copyObj(r)).shared = !1; var o = [markText(e, t, n, r, i)], a = o[0], s = r.widgetNode; return linkedDocs(e, function (e) { s && (r.widgetNode = s.cloneNode(!0)), o.push(markText(e, clipPos(e, t), clipPos(e, n), r, i)); for (var l = 0; l < e.linked.length; ++l)if (e.linked[l].isParent) return; a = lst(o) }), new ie(o, a) }(e, t, n, r, i); if (e.cm && !e.cm.curOp) return operation(e.cm, markText)(e, t, n, r, i); var o = new re(e, i), a = k(t, n); if (r && copyObj(r, o, !1), a > 0 || 0 == a && !1 !== o.clearWhenEmpty) return o; if (o.replacedWith && (o.collapsed = !0, o.widgetNode = elt("span", [o.replacedWith], "CodeMirror-widget"), r.handleMouseEvents || o.widgetNode.setAttribute("cm-ignore-events", "true"), r.insertLeft && (o.widgetNode.insertLeft = !0)), o.collapsed) { if (conflictingCollapsedRange(e, t.line, t, n, o) || t.line != n.line && conflictingCollapsedRange(e, n.line, t, n, o)) throw new Error("Inserting collapsed marker partially overlapping an existing one"); C = !0 } o.addToHistory && addChangeToHistory(e, { from: t, to: n, origin: "markText" }, e.sel, NaN); var s, l = t.line, u = e.cm; if (e.iter(l, n.line + 1, function (e) { u && o.collapsed && !u.options.lineWrapping && visualLine(e) == u.display.maxLine && (s = !0), o.collapsed && l != t.line && updateLineHeight(e, 0), function addMarkedSpan(e, t) { e.markedSpans = e.markedSpans ? e.markedSpans.concat([t]) : [t], t.marker.attachLine(e) }(e, new MarkedSpan(o, l == t.line ? t.ch : null, l == n.line ? n.ch : null)), ++l }), o.collapsed && e.iter(t.line, n.line + 1, function (t) { lineIsHidden(e, t) && updateLineHeight(t, 0) }), o.clearOnEnter && ge(o, "beforeCursorEnter", function () { o.clear() }), o.readOnly && (x = !0, (e.history.done.length || e.history.undone.length) && e.clearHistory()), o.collapsed && (o.id = ++ne, o.atomic = !0), u) { if (s && (u.curOp.updateMaxLine = !0), o.collapsed) regChange(u, t.line, n.line + 1); else if (o.className || o.title || o.startStyle || o.endStyle || o.css) for (var c = t.line; c <= n.line; c++)regLineChange(u, c, "text"); o.atomic && reCheckSelection(u.doc), signalLater(u, "markerAdded", u, o) } return o } var ie = CodeMirror.SharedTextMarker = function (e, t) { this.markers = e, this.primary = t; for (var n = 0; n < e.length; ++n)e[n].parent = this }; function findSharedMarkers(e) { return e.findMarks(S(e.first, 0), e.clipPos(S(e.lastLine())), function (e) { return e.parent }) } function detachSharedMarkers(e) { for (var t = 0; t < e.length; t++) { var n = e[t], r = [n.primary.doc]; linkedDocs(n.primary.doc, function (e) { r.push(e) }); for (var i = 0; i < n.markers.length; i++) { var o = n.markers[i]; -1 == indexOf(r, o.doc) && (o.parent = null, n.markers.splice(i--, 1)) } } } function MarkedSpan(e, t, n) { this.marker = e, this.from = t, this.to = n } function getMarkedSpanFor(e, t) { if (e) for (var n = 0; n < e.length; ++n) { var r = e[n]; if (r.marker == t) return r } } function removeMarkedSpan(e, t) { for (var n, r = 0; r < e.length; ++r)e[r] != t && (n || (n = [])).push(e[r]); return n } function stretchSpansOverChange(e, t) { if (t.full) return null; var n = isLine(e, t.from.line) && getLine(e, t.from.line).markedSpans, r = isLine(e, t.to.line) && getLine(e, t.to.line).markedSpans; if (!n && !r) return null; var i = t.from.ch, o = t.to.ch, a = 0 == k(t.from, t.to), s = function markedSpansBefore(e, t, n) { if (e) for (var r, i = 0; i < e.length; ++i) { var o = e[i], a = o.marker, s = null == o.from || (a.inclusiveLeft ? o.from <= t : o.from < t); if (s || o.from == t && "bookmark" == a.type && (!n || !o.marker.insertLeft)) { var l = null == o.to || (a.inclusiveRight ? o.to >= t : o.to > t); (r || (r = [])).push(new MarkedSpan(a, o.from, l ? null : o.to)) } } return r }(n, i, a), l = function markedSpansAfter(e, t, n) { if (e) for (var r, i = 0; i < e.length; ++i) { var o = e[i], a = o.marker, s = null == o.to || (a.inclusiveRight ? o.to >= t : o.to > t); if (s || o.from == t && "bookmark" == a.type && (!n || o.marker.insertLeft)) { var l = null == o.from || (a.inclusiveLeft ? o.from <= t : o.from < t); (r || (r = [])).push(new MarkedSpan(a, l ? null : o.from - t, null == o.to ? null : o.to - t)) } } return r }(r, o, a), u = 1 == t.text.length, c = lst(t.text).length + (u ? i : 0); if (s) for (var d = 0; d < s.length; ++d) { var f = s[d]; if (null == f.to) { var h = getMarkedSpanFor(l, f.marker); h ? u && (f.to = null == h.to ? null : h.to + c) : f.to = i } } if (l) for (var d = 0; d < l.length; ++d) { var f = l[d]; if (null != f.to && (f.to += c), null == f.from) { var h = getMarkedSpanFor(s, f.marker); h || (f.from = c, u && (s || (s = [])).push(f)) } else f.from += c, u && (s || (s = [])).push(f) } s && (s = clearEmptySpans(s)), l && l != s && (l = clearEmptySpans(l)); var p = [s]; if (!u) { var m, g = t.text.length - 2; if (g > 0 && s) for (var d = 0; d < s.length; ++d)null == s[d].to && (m || (m = [])).push(new MarkedSpan(s[d].marker, null, null)); for (var d = 0; d < g; ++d)p.push(m); p.push(l) } return p } function clearEmptySpans(e) { for (var t = 0; t < e.length; ++t) { var n = e[t]; null != n.from && n.from == n.to && !1 !== n.marker.clearWhenEmpty && e.splice(t--, 1) } return e.length ? e : null } function mergeOldSpans(e, t) { var n = function getOldSpans(e, t) { var n = t["spans_" + e.id]; if (!n) return null; for (var r = 0, i = []; r < t.text.length; ++r)i.push(removeClearedSpans(n[r])); return i }(e, t), r = stretchSpansOverChange(e, t); if (!n) return r; if (!r) return n; for (var i = 0; i < n.length; ++i) { var o = n[i], a = r[i]; if (o && a) e: for (var s = 0; s < a.length; ++s) { for (var l = a[s], u = 0; u < o.length; ++u)if (o[u].marker == l.marker) continue e; o.push(l) } else a && (n[i] = a) } return n } function detachMarkedSpans(e) { var t = e.markedSpans; if (t) { for (var n = 0; n < t.length; ++n)t[n].marker.detachLine(e); e.markedSpans = null } } function attachMarkedSpans(e, t) { if (t) { for (var n = 0; n < t.length; ++n)t[n].marker.attachLine(e); e.markedSpans = t } } function extraLeft(e) { return e.inclusiveLeft ? -1 : 0 } function extraRight(e) { return e.inclusiveRight ? 1 : 0 } function compareCollapsedMarkers(e, t) { var n = e.lines.length - t.lines.length; if (0 != n) return n; var r = e.find(), i = t.find(), o = k(r.from, i.from) || extraLeft(e) - extraLeft(t); if (o) return -o; var a = k(r.to, i.to) || extraRight(e) - extraRight(t); return a || t.id - e.id } function collapsedSpanAtSide(e, t) { var n, r = C && e.markedSpans; if (r) for (var i, o = 0; o < r.length; ++o)(i = r[o]).marker.collapsed && null == (t ? i.from : i.to) && (!n || compareCollapsedMarkers(n, i.marker) < 0) && (n = i.marker); return n } function collapsedSpanAtStart(e) { return collapsedSpanAtSide(e, !0) } function collapsedSpanAtEnd(e) { return collapsedSpanAtSide(e, !1) } function conflictingCollapsedRange(e, t, n, r, i) { var o = getLine(e, t), a = C && o.markedSpans; if (a) for (var s = 0; s < a.length; ++s) { var l = a[s]; if (l.marker.collapsed) { var u = l.marker.find(0), c = k(u.from, n) || extraLeft(l.marker) - extraLeft(i), d = k(u.to, r) || extraRight(l.marker) - extraRight(i); if (!(c >= 0 && d <= 0 || c <= 0 && d >= 0) && (c <= 0 && (k(u.to, n) > 0 || l.marker.inclusiveRight && i.inclusiveLeft) || c >= 0 && (k(u.from, r) < 0 || l.marker.inclusiveLeft && i.inclusiveRight))) return !0 } } } function visualLine(e) { for (var t; t = collapsedSpanAtStart(e);)e = t.find(-1, !0).line; return e } function visualLineNo(e, t) { var n = getLine(e, t), r = visualLine(n); return n == r ? t : lineNo(r) } function visualLineEndNo(e, t) { if (t > e.lastLine()) return t; var n, r = getLine(e, t); if (!lineIsHidden(e, r)) return t; for (; n = collapsedSpanAtEnd(r);)r = n.find(1, !0).line; return lineNo(r) + 1 } function lineIsHidden(e, t) { var n = C && t.markedSpans; if (n) for (var r, i = 0; i < n.length; ++i)if ((r = n[i]).marker.collapsed) { if (null == r.from) return !0; if (!r.marker.widgetNode && 0 == r.from && r.marker.inclusiveLeft && lineIsHiddenInner(e, t, r)) return !0 } } function lineIsHiddenInner(e, t, n) { if (null == n.to) { var r = n.marker.find(1, !0); return lineIsHiddenInner(e, r.line, getMarkedSpanFor(r.line.markedSpans, n.marker)) } if (n.marker.inclusiveRight && n.to == t.text.length) return !0; for (var i, o = 0; o < t.markedSpans.length; ++o)if ((i = t.markedSpans[o]).marker.collapsed && !i.marker.widgetNode && i.from == n.to && (null == i.to || i.to != n.from) && (i.marker.inclusiveLeft || n.marker.inclusiveRight) && lineIsHiddenInner(e, t, i)) return !0 } eventMixin(ie), ie.prototype.clear = function () { if (!this.explicitlyCleared) { this.explicitlyCleared = !0; for (var e = 0; e < this.markers.length; ++e)this.markers[e].clear(); signalLater(this, "clear") } }, ie.prototype.find = function (e, t) { return this.primary.find(e, t) }; var oe = CodeMirror.LineWidget = function (e, t, n) { if (n) for (var r in n) n.hasOwnProperty(r) && (this[r] = n[r]); this.doc = e, this.node = t }; function adjustScrollWhenAboveVisible(e, t, n) { heightAtLine(t) < (e.curOp && e.curOp.scrollTop || e.doc.scrollTop) && addToScrollPos(e, null, n) } function widgetHeight(e) { if (null != e.height) return e.height; var t = e.doc.cm; if (!t) return 0; if (!De(document.body, e.node)) { var n = "position: relative;"; e.coverGutter && (n += "margin-left: -" + t.display.gutters.offsetWidth + "px;"), e.noHScroll && (n += "width: " + t.display.wrapper.clientWidth + "px;"), removeChildrenAndAdd(t.display.measure, elt("div", [e.node], null, n)) } return e.height = e.node.parentNode.offsetHeight } eventMixin(oe), oe.prototype.clear = function () { var e = this.doc.cm, t = this.line.widgets, n = this.line, r = lineNo(n); if (null != r && t) { for (var i = 0; i < t.length; ++i)t[i] == this && t.splice(i--, 1); t.length || (n.widgets = null); var o = widgetHeight(this); updateLineHeight(n, Math.max(0, n.height - o)), e && runInOp(e, function () { adjustScrollWhenAboveVisible(e, n, -o), regLineChange(e, r, "widget") }) } }, oe.prototype.changed = function () { var e = this.height, t = this.doc.cm, n = this.line; this.height = null; var r = widgetHeight(this) - e; r && (updateLineHeight(n, n.height + r), t && runInOp(t, function () { t.curOp.forceUpdate = !0, adjustScrollWhenAboveVisible(t, n, r) })) }; var ae = CodeMirror.Line = function (e, t, n) { this.text = e, attachMarkedSpans(this, t), this.height = n ? n(this) : 1 }; function cleanUpLine(e) { e.parent = null, detachMarkedSpans(e) } function extractLineClasses(e, t) { if (e) for (; ;) { var n = e.match(/(?:^|\s+)line-(background-)?(\S+)/); if (!n) break; e = e.slice(0, n.index) + e.slice(n.index + n[0].length); var r = n[1] ? "bgClass" : "textClass"; null == t[r] ? t[r] = n[2] : new RegExp("(?:^|s)" + n[2] + "(?:$|s)").test(t[r]) || (t[r] += " " + n[2]) } return e } function callBlankLine(e, t) { if (e.blankLine) return e.blankLine(t); if (e.innerMode) { var n = CodeMirror.innerMode(e, t); return n.mode.blankLine ? n.mode.blankLine(n.state) : void 0 } } function readToken(e, t, n, r) { for (var i = 0; i < 10; i++) { r && (r[0] = CodeMirror.innerMode(e, n).mode); var o = e.token(t, n); if (t.pos > t.start) return o } throw new Error("Mode " + e.name + " failed to advance stream.") } function takeToken(e, t, n, r) { function getObj(e) { return { start: c.start, end: c.pos, string: c.current(), type: i || null, state: e ? Y(o.mode, u) : u } } var i, o = e.doc, a = o.mode; t = clipPos(o, t); var s, l = getLine(o, t.line), u = getStateBefore(e, t.line, n), c = new te(l.text, e.options.tabSize); for (r && (s = []); (r || c.pos < t.ch) && !c.eol();)c.start = c.pos, i = readToken(a, c, u), r && s.push(getObj(!0)); return r ? s : getObj() } function runMode(e, t, n, r, i, o, a) { var s = n.flattenSpans; null == s && (s = e.options.flattenSpans); var l, u = 0, c = null, d = new te(t, e.options.tabSize), f = e.options.addModeClass && [null]; for ("" == t && extractLineClasses(callBlankLine(n, r), o); !d.eol();) { if (d.pos > e.options.maxHighlightLength ? (s = !1, a && processLine(e, t, r, d.pos), d.pos = t.length, l = null) : l = extractLineClasses(readToken(n, d, r, f), o), f) { var h = f[0].name; h && (l = "m-" + (l ? h + " " + l : h)) } if (!s || c != l) { for (; u < d.start;)u = Math.min(d.start, u + 5e4), i(u, c); c = l } d.start = d.pos } for (; u < d.pos;) { var p = Math.min(d.pos, u + 5e4); i(p, c), u = p } } function highlightLine(e, t, n, r) { var i = [e.state.modeGen], o = {}; runMode(e, t.text, e.doc.mode, n, function (e, t) { i.push(e, t) }, o, r); for (var a = 0; a < e.state.overlays.length; ++a) { var s = e.state.overlays[a], l = 1, u = 0; runMode(e, t.text, s.mode, !0, function (e, t) { for (var n = l; u < e;) { var r = i[l]; r > e && i.splice(l, 1, e, i[l + 1], r), l += 2, u = Math.min(e, r) } if (t) if (s.opaque) i.splice(n, l - n, e, "cm-overlay " + t), l = n + 2; else for (; n < l; n += 2) { var o = i[n + 1]; i[n + 1] = (o ? o + " " : "") + "cm-overlay " + t } }, o) } return { styles: i, classes: o.bgClass || o.textClass ? o : null } } function getLineStyles(e, t, n) { if (!t.styles || t.styles[0] != e.state.modeGen) { var r = getStateBefore(e, lineNo(t)), i = highlightLine(e, t, t.text.length > e.options.maxHighlightLength ? Y(e.doc.mode, r) : r); t.stateAfter = r, t.styles = i.styles, i.classes ? t.styleClasses = i.classes : t.styleClasses && (t.styleClasses = null), n === e.doc.frontier && e.doc.frontier++ } return t.styles } function processLine(e, t, n, r) { var i = e.doc.mode, o = new te(t, e.options.tabSize); for (o.start = o.pos = r || 0, "" == t && callBlankLine(i, n); !o.eol();)readToken(i, o, n), o.start = o.pos } eventMixin(ae), ae.prototype.lineNo = function () { return lineNo(this) }; var se = {}, le = {}; function interpretTokenStyle(e, t) { if (!e || /^\s*$/.test(e)) return null; var n = t.addModeClass ? le : se; return n[e] || (n[e] = e.replace(/\S+/g, "cm-$&")) } function buildLineContent(e, t) { var n = elt("span", null, null, s ? "padding-right: .1px" : null), r = { pre: elt("pre", [n], "CodeMirror-line"), content: n, col: 0, pos: 0, cm: e, splitSpaces: (o || s) && e.getOption("lineWrapping") }; t.measure = {}; for (var i = 0; i <= (t.rest ? t.rest.length : 0); i++) { var a, l = i ? t.rest[i - 1] : t.line; r.pos = 0, r.addToken = buildToken, hasBadBidiRects(e.display.measure) && (a = getOrder(l)) && (r.addToken = buildTokenBadBidi(r.addToken, a)), r.map = []; var u = t != e.display.externalMeasured && lineNo(l); insertLineContent(l, r, getLineStyles(e, l, u)), l.styleClasses && (l.styleClasses.bgClass && (r.bgClass = joinClasses(l.styleClasses.bgClass, r.bgClass || "")), l.styleClasses.textClass && (r.textClass = joinClasses(l.styleClasses.textClass, r.textClass || ""))), 0 == r.map.length && r.map.push(0, 0, r.content.appendChild(zeroWidthElement(e.display.measure))), 0 == i ? (t.measure.map = r.map, t.measure.cache = {}) : ((t.measure.maps || (t.measure.maps = [])).push(r.map), (t.measure.caches || (t.measure.caches = [])).push({})) } return s && /\bcm-tab\b/.test(r.content.lastChild.className) && (r.content.className = "cm-tab-wrap-hack"), _e(e, "renderLine", e, t.line, r.pre), r.pre.className && (r.textClass = joinClasses(r.pre.className, r.textClass || "")), r } function buildToken(e, t, n, r, i, s, l) { if (t) { var u = e.splitSpaces ? t.replace(/ {3,}/g, splitSpaces) : t, c = e.cm.state.specialChars, d = !1; if (c.test(t)) for (var f = document.createDocumentFragment(), h = 0; ;) { c.lastIndex = h; var p = c.exec(t), m = p ? p.index - h : t.length - h; if (m) { var g = document.createTextNode(u.slice(h, h + m)); o && a < 9 ? f.appendChild(elt("span", [g])) : f.appendChild(g), e.map.push(e.pos, e.pos + m, g), e.col += m, e.pos += m } if (!p) break; if (h += m + 1, "\t" == p[0]) { var v = e.cm.options.tabSize, y = v - e.col % v, g = f.appendChild(elt("span", spaceStr(y), "cm-tab")); g.setAttribute("role", "presentation"), g.setAttribute("cm-text", "\t"), e.col += y } else if ("\r" == p[0] || "\n" == p[0]) { var g = f.appendChild(elt("span", "\r" == p[0] ? "\u240d" : "\u2424", "cm-invalidchar")); g.setAttribute("cm-text", p[0]), e.col += 1 } else { var g = e.cm.options.specialCharPlaceholder(p[0]); g.setAttribute("cm-text", p[0]), o && a < 9 ? f.appendChild(elt("span", [g])) : f.appendChild(g), e.col += 1 } e.map.push(e.pos, e.pos + 1, g), e.pos++ } else { e.col += t.length; var f = document.createTextNode(u); e.map.push(e.pos, e.pos + t.length, f), o && a < 9 && (d = !0), e.pos += t.length } if (n || r || i || d || l) { var _ = n || ""; r && (_ += r), i && (_ += i); var b = elt("span", [f], _, l); return s && (b.title = s), e.content.appendChild(b) } e.content.appendChild(f) } } function splitSpaces(e) { for (var t = " ", n = 0; n < e.length - 2; ++n)t += n % 2 ? " " : "\xa0"; return t += " " } function buildTokenBadBidi(e, t) { return function (n, r, i, o, a, s, l) { i = i ? i + " cm-force-border" : "cm-force-border"; for (var u = n.pos, c = u + r.length; ;) { for (var d = 0; d < t.length; d++) { var f = t[d]; if (f.to > u && f.from <= u) break } if (f.to >= c) return e(n, r, i, o, a, s, l); e(n, r.slice(0, f.to - u), i, o, null, s, l), o = null, r = r.slice(f.to - u), u = f.to } } } function buildCollapsedSpan(e, t, n, r) { var i = !r && n.widgetNode; i && e.map.push(e.pos, e.pos + t, i), !r && e.cm.display.input.needsContentAttribute && (i || (i = e.content.appendChild(document.createElement("span"))), i.setAttribute("cm-marker", n.id)), i && (e.cm.display.input.setUneditable(i), e.content.appendChild(i)), e.pos += t } function insertLineContent(e, t, n) { var r = e.markedSpans, i = e.text, o = 0; if (r) for (var a, s, l, u, c, d, f, h = i.length, p = 0, m = 1, g = "", v = 0; ;) { if (v == p) { l = u = c = d = s = "", f = null, v = 1 / 0; for (var y, _ = [], b = 0; b < r.length; ++b) { var w = r[b], x = w.marker; "bookmark" == x.type && w.from == p && x.widgetNode ? _.push(x) : w.from <= p && (null == w.to || w.to > p || x.collapsed && w.to == p && w.from == p) ? (null != w.to && w.to != p && v > w.to && (v = w.to, u = ""), x.className && (l += " " + x.className), x.css && (s = (s ? s + ";" : "") + x.css), x.startStyle && w.from == p && (c += " " + x.startStyle), x.endStyle && w.to == v && (y || (y = [])).push(x.endStyle, w.to), x.title && !d && (d = x.title), x.collapsed && (!f || compareCollapsedMarkers(f.marker, x) < 0) && (f = w)) : w.from > p && v > w.from && (v = w.from) } if (y) for (var b = 0; b < y.length; b += 2)y[b + 1] == v && (u += " " + y[b]); if (!f || f.from == p) for (var b = 0; b < _.length; ++b)buildCollapsedSpan(t, 0, _[b]); if (f && (f.from || 0) == p) { if (buildCollapsedSpan(t, (null == f.to ? h + 1 : f.to) - p, f.marker, null == f.from), null == f.to) return; f.to == p && (f = !1) } } if (p >= h) break; for (var C = Math.min(h, v); ;) { if (g) { var S = p + g.length; if (!f) { var k = S > C ? g.slice(0, C - p) : g; t.addToken(t, k, a ? a + l : l, c, p + k.length == v ? u : "", d, s) } if (S >= C) { g = g.slice(C - p), p = C; break } p = S, c = "" } g = i.slice(o, o = n[m++]), a = interpretTokenStyle(n[m++], t.cm.options) } } else for (var m = 1; m < n.length; m += 2)t.addToken(t, i.slice(o, o = n[m]), interpretTokenStyle(n[m + 1], t.cm.options)) } function isWholeLineUpdate(e, t) { return 0 == t.from.ch && 0 == t.to.ch && "" == lst(t.text) && (!e.cm || e.cm.options.wholeLineUpdateBefore) } function updateDoc(e, t, n, r) { function spansFor(e) { return n ? n[e] : null } function update(e, n, i) { !function updateLine(e, t, n, r) { e.text = t, e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null), null != e.order && (e.order = null), detachMarkedSpans(e), attachMarkedSpans(e, n); var i = r ? r(e) : 1; i != e.height && updateLineHeight(e, i) }(e, n, i, r), signalLater(e, "change", e, t) } function linesFor(e, t) { for (var n = e, i = []; n < t; ++n)i.push(new ae(a[n], spansFor(n), r)); return i } var i = t.from, o = t.to, a = t.text, s = getLine(e, i.line), l = getLine(e, o.line), u = lst(a), c = spansFor(a.length - 1), d = o.line - i.line; if (t.full) e.insert(0, linesFor(0, a.length)), e.remove(a.length, e.size - a.length); else if (isWholeLineUpdate(e, t)) { var f = linesFor(0, a.length - 1); update(l, l.text, c), d && e.remove(i.line, d), f.length && e.insert(i.line, f) } else if (s == l) if (1 == a.length) update(s, s.text.slice(0, i.ch) + u + s.text.slice(o.ch), c); else { var f = linesFor(1, a.length - 1); f.push(new ae(u + s.text.slice(o.ch), c, r)), update(s, s.text.slice(0, i.ch) + a[0], spansFor(0)), e.insert(i.line + 1, f) } else if (1 == a.length) update(s, s.text.slice(0, i.ch) + a[0] + l.text.slice(o.ch), spansFor(0)), e.remove(i.line + 1, d); else { update(s, s.text.slice(0, i.ch) + a[0], spansFor(0)), update(l, u + l.text.slice(o.ch), c); var f = linesFor(1, a.length - 1); d > 1 && e.remove(i.line + 1, d - 1), e.insert(i.line + 1, f) } signalLater(e, "change", e, t) } function LeafChunk(e) { this.lines = e, this.parent = null; for (var t = 0, n = 0; t < e.length; ++t)e[t].parent = this, n += e[t].height; this.height = n } function BranchChunk(e) { this.children = e; for (var t = 0, n = 0, r = 0; r < e.length; ++r) { var i = e[r]; t += i.chunkSize(), n += i.height, i.parent = this } this.size = t, this.height = n, this.parent = null } LeafChunk.prototype = { chunkSize: function () { return this.lines.length }, removeInner: function (e, t) { for (var n = e, r = e + t; n < r; ++n) { var i = this.lines[n]; this.height -= i.height, cleanUpLine(i), signalLater(i, "delete") } this.lines.splice(e, t) }, collapse: function (e) { e.push.apply(e, this.lines) }, insertInner: function (e, t, n) { this.height += n, this.lines = this.lines.slice(0, e).concat(t).concat(this.lines.slice(e)); for (var r = 0; r < t.length; ++r)t[r].parent = this }, iterN: function (e, t, n) { for (var r = e + t; e < r; ++e)if (n(this.lines[e])) return !0 } }, BranchChunk.prototype = { chunkSize: function () { return this.size }, removeInner: function (e, t) { this.size -= t; for (var n = 0; n < this.children.length; ++n) { var r = this.children[n], i = r.chunkSize(); if (e < i) { var o = Math.min(t, i - e), a = r.height; if (r.removeInner(e, o), this.height -= a - r.height, i == o && (this.children.splice(n--, 1), r.parent = null), 0 == (t -= o)) break; e = 0 } else e -= i } if (this.size - t < 25 && (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) { var s = []; this.collapse(s), this.children = [new LeafChunk(s)], this.children[0].parent = this } }, collapse: function (e) { for (var t = 0; t < this.children.length; ++t)this.children[t].collapse(e) }, insertInner: function (e, t, n) { this.size += t.length, this.height += n; for (var r = 0; r < this.children.length; ++r) { var i = this.children[r], o = i.chunkSize(); if (e <= o) { if (i.insertInner(e, t, n), i.lines && i.lines.length > 50) { for (; i.lines.length > 50;) { var a = i.lines.splice(i.lines.length - 25, 25), s = new LeafChunk(a); i.height -= s.height, this.children.splice(r + 1, 0, s), s.parent = this } this.maybeSpill() } break } e -= o } }, maybeSpill: function () { if (!(this.children.length <= 10)) { var e = this; do { var t = e.children.splice(e.children.length - 5, 5), n = new BranchChunk(t); if (e.parent) { e.size -= n.size, e.height -= n.height; var r = indexOf(e.parent.children, e); e.parent.children.splice(r + 1, 0, n) } else { var i = new BranchChunk(e.children); i.parent = e, e.children = [i, n], e = i } n.parent = e.parent } while (e.children.length > 10); e.parent.maybeSpill() } }, iterN: function (e, t, n) { for (var r = 0; r < this.children.length; ++r) { var i = this.children[r], o = i.chunkSize(); if (e < o) { var a = Math.min(t, o - e); if (i.iterN(e, a, n)) return !0; if (0 == (t -= a)) break; e = 0 } else e -= o } } }; var ue = 0, ce = CodeMirror.Doc = function (e, t, n, r) { if (!(this instanceof ce)) return new ce(e, t, n, r); null == n && (n = 0), BranchChunk.call(this, [new LeafChunk([new ae("", null)])]), this.first = n, this.scrollTop = this.scrollLeft = 0, this.cantEdit = !1, this.cleanGeneration = 1, this.frontier = n; var i = S(n, 0); this.sel = simpleSelection(i), this.history = new History(null), this.id = ++ue, this.modeOption = t, this.lineSep = r, this.extend = !1, "string" == typeof e && (e = this.splitLines(e)), updateDoc(this, { from: i, to: i, text: e }), setSelection(this, simpleSelection(i), Ce) }; ce.prototype = createObj(BranchChunk.prototype, { constructor: ce, iter: function (e, t, n) { n ? this.iterN(e - this.first, t - e, n) : this.iterN(this.first, this.first + this.size, e) }, insert: function (e, t) { for (var n = 0, r = 0; r < t.length; ++r)n += t[r].height; this.insertInner(e - this.first, t, n) }, remove: function (e, t) { this.removeInner(e - this.first, t) }, getValue: function (e) { var t = getLines(this, this.first, this.first + this.size); return !1 === e ? t : t.join(e || this.lineSeparator()) }, setValue: docMethodOp(function (e) { var t = S(this.first, 0), n = this.first + this.size - 1; makeChange(this, { from: t, to: S(n, getLine(this, n).text.length), text: this.splitLines(e), origin: "setValue", full: !0 }, !0), setSelection(this, simpleSelection(t)) }), replaceRange: function (e, t, n, r) { t = clipPos(this, t), n = n ? clipPos(this, n) : t, replaceRange(this, e, t, n, r) }, getRange: function (e, t, n) { var r = getBetween(this, clipPos(this, e), clipPos(this, t)); return !1 === n ? r : r.join(n || this.lineSeparator()) }, getLine: function (e) { var t = this.getLineHandle(e); return t && t.text }, getLineHandle: function (e) { if (isLine(this, e)) return getLine(this, e) }, getLineNumber: function (e) { return lineNo(e) }, getLineHandleVisualStart: function (e) { return "number" == typeof e && (e = getLine(this, e)), visualLine(e) }, lineCount: function () { return this.size }, firstLine: function () { return this.first }, lastLine: function () { return this.first + this.size - 1 }, clipPos: function (e) { return clipPos(this, e) }, getCursor: function (e) { var t = this.sel.primary(); return null == e || "head" == e ? t.head : "anchor" == e ? t.anchor : "end" == e || "to" == e || !1 === e ? t.to() : t.from() }, listSelections: function () { return this.sel.ranges }, somethingSelected: function () { return this.sel.somethingSelected() }, setCursor: docMethodOp(function (e, t, n) { setSimpleSelection(this, clipPos(this, "number" == typeof e ? S(e, t || 0) : e), null, n) }), setSelection: docMethodOp(function (e, t, n) { setSimpleSelection(this, clipPos(this, e), clipPos(this, t || e), n) }), extendSelection: docMethodOp(function (e, t, n) { extendSelection(this, clipPos(this, e), t && clipPos(this, t), n) }), extendSelections: docMethodOp(function (e, t) { extendSelections(this, clipPosArray(this, e), t) }), extendSelectionsBy: docMethodOp(function (e, t) { var n = map(this.sel.ranges, e); extendSelections(this, clipPosArray(this, n), t) }), setSelections: docMethodOp(function (e, t, n) { if (e.length) { for (var r = 0, i = []; r < e.length; r++)i[r] = new Range(clipPos(this, e[r].anchor), clipPos(this, e[r].head)); null == t && (t = Math.min(e.length - 1, this.sel.primIndex)), setSelection(this, normalizeSelection(i, t), n) } }), addSelection: docMethodOp(function (e, t, n) { var r = this.sel.ranges.slice(0); r.push(new Range(clipPos(this, e), clipPos(this, t || e))), setSelection(this, normalizeSelection(r, r.length - 1), n) }), getSelection: function (e) { for (var t, n = this.sel.ranges, r = 0; r < n.length; r++) { var i = getBetween(this, n[r].from(), n[r].to()); t = t ? t.concat(i) : i } return !1 === e ? t : t.join(e || this.lineSeparator()) }, getSelections: function (e) { for (var t = [], n = this.sel.ranges, r = 0; r < n.length; r++) { var i = getBetween(this, n[r].from(), n[r].to()); !1 !== e && (i = i.join(e || this.lineSeparator())), t[r] = i } return t }, replaceSelection: function (e, t, n) { for (var r = [], i = 0; i < this.sel.ranges.length; i++)r[i] = e; this.replaceSelections(r, t, n || "+input") }, replaceSelections: docMethodOp(function (e, t, n) { for (var r = [], i = this.sel, o = 0; o < i.ranges.length; o++) { var a = i.ranges[o]; r[o] = { from: a.from(), to: a.to(), text: this.splitLines(e[o]), origin: n } } for (var s = t && "end" != t && function computeReplacedSel(e, t, n) { for (var r = [], i = S(e.first, 0), o = i, a = 0; a < t.length; a++) { var s = t[a], l = offsetPos(s.from, i, o), u = offsetPos(B(s), i, o); if (i = s.to, o = u, "around" == n) { var c = e.sel.ranges[a], d = k(c.head, c.anchor) < 0; r[a] = new Range(d ? u : l, d ? l : u) } else r[a] = new Range(l, l) } return new Selection(r, e.sel.primIndex) }(this, r, t), o = r.length - 1; o >= 0; o--)makeChange(this, r[o]); s ? setSelectionReplaceHistory(this, s) : this.cm && ensureCursorVisible(this.cm) }), undo: docMethodOp(function () { makeChangeFromHistory(this, "undo") }), redo: docMethodOp(function () { makeChangeFromHistory(this, "redo") }), undoSelection: docMethodOp(function () { makeChangeFromHistory(this, "undo", !0) }), redoSelection: docMethodOp(function () { makeChangeFromHistory(this, "redo", !0) }), setExtending: function (e) { this.extend = e }, getExtending: function () { return this.extend }, historySize: function () { for (var e = this.history, t = 0, n = 0, r = 0; r < e.done.length; r++)e.done[r].ranges || ++t; for (var r = 0; r < e.undone.length; r++)e.undone[r].ranges || ++n; return { undo: t, redo: n } }, clearHistory: function () { this.history = new History(this.history.maxGeneration) }, markClean: function () { this.cleanGeneration = this.changeGeneration(!0) }, changeGeneration: function (e) { return e && (this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null), this.history.generation }, isClean: function (e) { return this.history.generation == (e || this.cleanGeneration) }, getHistory: function () { return { done: copyHistoryArray(this.history.done), undone: copyHistoryArray(this.history.undone) } }, setHistory: function (e) { var t = this.history = new History(this.history.maxGeneration); t.done = copyHistoryArray(e.done.slice(0), null, !0), t.undone = copyHistoryArray(e.undone.slice(0), null, !0) }, addLineClass: docMethodOp(function (e, t, n) { return changeLine(this, e, "gutter" == t ? "gutter" : "class", function (e) { var r = "text" == t ? "textClass" : "background" == t ? "bgClass" : "gutter" == t ? "gutterClass" : "wrapClass"; if (e[r]) { if (classTest(n).test(e[r])) return !1; e[r] += " " + n } else e[r] = n; return !0 }) }), removeLineClass: docMethodOp(function (e, t, n) { return changeLine(this, e, "gutter" == t ? "gutter" : "class", function (e) { var r = "text" == t ? "textClass" : "background" == t ? "bgClass" : "gutter" == t ? "gutterClass" : "wrapClass", i = e[r]; if (!i) return !1; if (null == n) e[r] = null; else { var o = i.match(classTest(n)); if (!o) return !1; var a = o.index + o[0].length; e[r] = i.slice(0, o.index) + (o.index && a != i.length ? " " : "") + i.slice(a) || null } return !0 }) }), addLineWidget: docMethodOp(function (e, t, n) { return function addLineWidget(e, t, n, r) { var i = new oe(e, n, r), o = e.cm; return o && i.noHScroll && (o.display.alignWidgets = !0), changeLine(e, t, "widget", function (t) { var n = t.widgets || (t.widgets = []); if (null == i.insertAt ? n.push(i) : n.splice(Math.min(n.length - 1, Math.max(0, i.insertAt)), 0, i), i.line = t, o && !lineIsHidden(e, t)) { var r = heightAtLine(t) < e.scrollTop; updateLineHeight(t, t.height + widgetHeight(i)), r && addToScrollPos(o, null, i.height), o.curOp.forceUpdate = !0 } return !0 }), i }(this, e, t, n) }), removeLineWidget: function (e) { e.clear() }, markText: function (e, t, n) { return markText(this, clipPos(this, e), clipPos(this, t), n, n && n.type || "range") }, setBookmark: function (e, t) { var n = { replacedWith: t && (null == t.nodeType ? t.widget : t), insertLeft: t && t.insertLeft, clearWhenEmpty: !1, shared: t && t.shared, handleMouseEvents: t && t.handleMouseEvents }; return markText(this, e = clipPos(this, e), e, n, "bookmark") }, findMarksAt: function (e) { var t = [], n = getLine(this, (e = clipPos(this, e)).line).markedSpans; if (n) for (var r = 0; r < n.length; ++r) { var i = n[r]; (null == i.from || i.from <= e.ch) && (null == i.to || i.to >= e.ch) && t.push(i.marker.parent || i.marker) } return t }, findMarks: function (e, t, n) { e = clipPos(this, e), t = clipPos(this, t); var r = [], i = e.line; return this.iter(e.line, t.line + 1, function (o) { var a = o.markedSpans; if (a) for (var s = 0; s < a.length; s++) { var l = a[s]; null != l.to && i == e.line && e.ch >= l.to || null == l.from && i != e.line || null != l.from && i == t.line && l.from >= t.ch || n && !n(l.marker) || r.push(l.marker.parent || l.marker) } ++i }), r }, getAllMarks: function () { var e = []; return this.iter(function (t) { var n = t.markedSpans; if (n) for (var r = 0; r < n.length; ++r)null != n[r].from && e.push(n[r].marker) }), e }, posFromIndex: function (e) { var t, n = this.first, r = this.lineSeparator().length; return this.iter(function (i) { var o = i.text.length + r; if (o > e) return t = e, !0; e -= o, ++n }), clipPos(this, S(n, t)) }, indexFromPos: function (e) { var t = (e = clipPos(this, e)).ch; if (e.line < this.first || e.ch < 0) return 0; var n = this.lineSeparator().length; return this.iter(this.first, e.line, function (e) { t += e.text.length + n }), t }, copy: function (e) { var t = new ce(getLines(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep); return t.scrollTop = this.scrollTop, t.scrollLeft = this.scrollLeft, t.sel = this.sel, t.extend = !1, e && (t.history.undoDepth = this.history.undoDepth, t.setHistory(this.getHistory())), t }, linkedDoc: function (e) { e || (e = {}); var t = this.first, n = this.first + this.size; null != e.from && e.from > t && (t = e.from), null != e.to && e.to < n && (n = e.to); var r = new ce(getLines(this, t, n), e.mode || this.modeOption, t, this.lineSep); return e.sharedHist && (r.history = this.history), (this.linked || (this.linked = [])).push({ doc: r, sharedHist: e.sharedHist }), r.linked = [{ doc: this, isParent: !0, sharedHist: e.sharedHist }], function copySharedMarkers(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n], i = r.find(), o = e.clipPos(i.from), a = e.clipPos(i.to); if (k(o, a)) { var s = markText(e, o, a, r.primary, r.primary.type); r.markers.push(s), s.parent = r } } }(r, findSharedMarkers(this)), r }, unlinkDoc: function (e) { if (e instanceof CodeMirror && (e = e.doc), this.linked) for (var t = 0; t < this.linked.length; ++t) { var n = this.linked[t]; if (n.doc == e) { this.linked.splice(t, 1), e.unlinkDoc(this), detachSharedMarkers(findSharedMarkers(this)); break } } if (e.history == this.history) { var r = [e.id]; linkedDocs(e, function (e) { r.push(e.id) }, !0), e.history = new History(null), e.history.done = copyHistoryArray(this.history.done, r), e.history.undone = copyHistoryArray(this.history.undone, r) } }, iterLinkedDocs: function (e) { linkedDocs(this, e) }, getMode: function () { return this.mode }, getEditor: function () { return this.cm }, splitLines: function (e) { return this.lineSep ? e.split(this.lineSep) : qe(e) }, lineSeparator: function () { return this.lineSep || "\n" } }), ce.prototype.eachLine = ce.prototype.iter; var de = "iter insert remove copy getEditor constructor".split(" "); for (var fe in ce.prototype) ce.prototype.hasOwnProperty(fe) && indexOf(de, fe) < 0 && (CodeMirror.prototype[fe] = function (e) { return function () { return e.apply(this.doc, arguments) } }(ce.prototype[fe])); function linkedDocs(e, t, n) { !function propagate(e, r, i) { if (e.linked) for (var o = 0; o < e.linked.length; ++o) { var a = e.linked[o]; if (a.doc != r) { var s = i && a.sharedHist; n && !s || (t(a.doc, s), propagate(a.doc, e, s)) } } }(e, null, !0) } function attachDoc(e, t) { if (t.cm) throw new Error("This document is already in use."); e.doc = t, t.cm = e, estimateLineHeights(e), loadMode(e), e.options.lineWrapping || findMaxLine(e), e.options.mode = t.modeOption, regChange(e) } function getLine(e, t) { if ((t -= e.first) < 0 || t >= e.size) throw new Error("There is no line " + (t + e.first) + " in the document."); for (var n = e; !n.lines;)for (var r = 0; ; ++r) { var i = n.children[r], o = i.chunkSize(); if (t < o) { n = i; break } t -= o } return n.lines[t] } function getBetween(e, t, n) { var r = [], i = t.line; return e.iter(t.line, n.line + 1, function (e) { var o = e.text; i == n.line && (o = o.slice(0, n.ch)), i == t.line && (o = o.slice(t.ch)), r.push(o), ++i }), r } function getLines(e, t, n) { var r = []; return e.iter(t, n, function (e) { r.push(e.text) }), r } function updateLineHeight(e, t) { var n = t - e.height; if (n) for (var r = e; r; r = r.parent)r.height += n } function lineNo(e) { if (null == e.parent) return null; for (var t = e.parent, n = indexOf(t.lines, e), r = t.parent; r; t = r, r = r.parent)for (var i = 0; r.children[i] != t; ++i)n += r.children[i].chunkSize(); return n + t.first } function lineAtHeight(e, t) { var n = e.first; e: do { for (var r = 0; r < e.children.length; ++r) { var i = e.children[r], o = i.height; if (t < o) { e = i; continue e } t -= o, n += i.chunkSize() } return n } while (!e.lines); for (var r = 0; r < e.lines.length; ++r) { var a = e.lines[r], s = a.height; if (t < s) break; t -= s } return n + r } function heightAtLine(e) { for (var t = 0, n = (e = visualLine(e)).parent, r = 0; r < n.lines.length; ++r) { var i = n.lines[r]; if (i == e) break; t += i.height } for (var o = n.parent; o; o = (n = o).parent)for (var r = 0; r < o.children.length; ++r) { var a = o.children[r]; if (a == n) break; t += a.height } return t } function getOrder(e) { var t = e.order; return null == t && (t = e.order = Ye(e.text)), t } function History(e) { this.done = [], this.undone = [], this.undoDepth = 1 / 0, this.lastModTime = this.lastSelTime = 0, this.lastOp = this.lastSelOp = null, this.lastOrigin = this.lastSelOrigin = null, this.generation = this.maxGeneration = e || 1 } function historyChangeFromChange(e, t) { var n = { from: copyPos(t.from), to: B(t), text: getBetween(e, t.from, t.to) }; return attachLocalSpans(e, n, t.from.line, t.to.line + 1), linkedDocs(e, function (e) { attachLocalSpans(e, n, t.from.line, t.to.line + 1) }, !0), n } function clearSelectionEvents(e) { for (; e.length;) { var t = lst(e); if (!t.ranges) break; e.pop() } } function addChangeToHistory(e, t, n, r) { var i = e.history; i.undone.length = 0; var o, a = +new Date; if ((i.lastOp == r || i.lastOrigin == t.origin && t.origin && ("+" == t.origin.charAt(0) && e.cm && i.lastModTime > a - e.cm.options.historyEventDelay || "*" == t.origin.charAt(0))) && (o = function lastChangeEvent(e, t) { return t ? (clearSelectionEvents(e.done), lst(e.done)) : e.done.length && !lst(e.done).ranges ? lst(e.done) : e.done.length > 1 && !e.done[e.done.length - 2].ranges ? (e.done.pop(), lst(e.done)) : void 0 }(i, i.lastOp == r))) { var s = lst(o.changes); 0 == k(t.from, t.to) && 0 == k(t.from, s.to) ? s.to = B(t) : o.changes.push(historyChangeFromChange(e, t)) } else { var l = lst(i.done); for (l && l.ranges || pushSelectionToHistory(e.sel, i.done), o = { changes: [historyChangeFromChange(e, t)], generation: i.generation }, i.done.push(o); i.done.length > i.undoDepth;)i.done.shift(), i.done[0].ranges || i.done.shift() } i.done.push(n), i.generation = ++i.maxGeneration, i.lastModTime = i.lastSelTime = a, i.lastOp = i.lastSelOp = r, i.lastOrigin = i.lastSelOrigin = t.origin, s || _e(e, "historyAdded") } function pushSelectionToHistory(e, t) { var n = lst(t); n && n.ranges && n.equals(e) || t.push(e) } function attachLocalSpans(e, t, n, r) { var i = t["spans_" + e.id], o = 0; e.iter(Math.max(e.first, n), Math.min(e.first + e.size, r), function (n) { n.markedSpans && ((i || (i = t["spans_" + e.id] = {}))[o] = n.markedSpans), ++o }) } function removeClearedSpans(e) { if (!e) return null; for (var t, n = 0; n < e.length; ++n)e[n].marker.explicitlyCleared ? t || (t = e.slice(0, n)) : t && t.push(e[n]); return t ? t.length ? t : null : e } function copyHistoryArray(e, t, n) { for (var r = 0, i = []; r < e.length; ++r) { var o = e[r]; if (o.ranges) i.push(n ? Selection.prototype.deepCopy.call(o) : o); else { var a = o.changes, s = []; i.push({ changes: s }); for (var l = 0; l < a.length; ++l) { var u, c = a[l]; if (s.push({ from: c.from, to: c.to, text: c.text }), t) for (var d in c) (u = d.match(/^spans_(\d+)$/)) && indexOf(t, Number(u[1])) > -1 && (lst(s)[d] = c[d], delete c[d]) } } } return i } function rebaseHistSelSingle(e, t, n, r) { n < e.line ? e.line += r : t < e.line && (e.line = t, e.ch = 0) } function rebaseHistArray(e, t, n, r) { for (var i = 0; i < e.length; ++i) { var o = e[i], a = !0; if (o.ranges) { o.copied || ((o = e[i] = o.deepCopy()).copied = !0); for (var s = 0; s < o.ranges.length; s++)rebaseHistSelSingle(o.ranges[s].anchor, t, n, r), rebaseHistSelSingle(o.ranges[s].head, t, n, r) } else { for (var s = 0; s < o.changes.length; ++s) { var l = o.changes[s]; if (n < l.from.line) l.from = S(l.from.line + r, l.from.ch), l.to = S(l.to.line + r, l.to.ch); else if (t <= l.to.line) { a = !1; break } } a || (e.splice(0, i + 1), i = 0) } } } function rebaseHist(e, t) { var n = t.from.line, r = t.to.line, i = t.text.length - (r - n) - 1; rebaseHistArray(e.done, n, r, i), rebaseHistArray(e.undone, n, r, i) } eventMixin(ce); var he = CodeMirror.e_preventDefault = function (e) { e.preventDefault ? e.preventDefault() : e.returnValue = !1 }, pe = CodeMirror.e_stopPropagation = function (e) { e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0 }; function e_defaultPrevented(e) { return null != e.defaultPrevented ? e.defaultPrevented : 0 == e.returnValue } var me = CodeMirror.e_stop = function (e) { he(e), pe(e) }; function e_target(e) { return e.target || e.srcElement } function e_button(e) { var t = e.which; return null == t && (1 & e.button ? t = 1 : 2 & e.button ? t = 3 : 4 & e.button && (t = 2)), g && e.ctrlKey && 1 == t && (t = 3), t } var ge = CodeMirror.on = function (e, t, n) { if (e.addEventListener) e.addEventListener(t, n, !1); else if (e.attachEvent) e.attachEvent("on" + t, n); else { var r = e._handlers || (e._handlers = {}), i = r[t] || (r[t] = []); i.push(n) } }, ve = []; function getHandlers(e, t, n) { var r = e._handlers && e._handlers[t]; return n ? r && r.length > 0 ? r.slice() : ve : r || ve } var ye = CodeMirror.off = function (e, t, n) { if (e.removeEventListener) e.removeEventListener(t, n, !1); else if (e.detachEvent) e.detachEvent("on" + t, n); else for (var r = getHandlers(e, t, !1), i = 0; i < r.length; ++i)if (r[i] == n) { r.splice(i, 1); break } }, _e = CodeMirror.signal = function (e, t) { var n = getHandlers(e, t, !0); if (n.length) for (var r = Array.prototype.slice.call(arguments, 2), i = 0; i < n.length; ++i)n[i].apply(null, r) }, be = null; function signalLater(e, t) { var n = getHandlers(e, t, !1); if (n.length) { var r, i = Array.prototype.slice.call(arguments, 2); P ? r = P.delayedCallbacks : be ? r = be : (r = be = [], setTimeout(fireOrphanDelayed, 0)); for (var o = 0; o < n.length; ++o)r.push(bnd(n[o])) } function bnd(e) { return function () { e.apply(null, i) } } } function fireOrphanDelayed() { var e = be; be = null; for (var t = 0; t < e.length; ++t)e[t]() } function signalDOMEvent(e, t, n) { return "string" == typeof t && (t = { type: t, preventDefault: function () { this.defaultPrevented = !0 } }), _e(e, n || t.type, e, t), e_defaultPrevented(t) || t.codemirrorIgnore } function signalCursorActivity(e) { var t = e._handlers && e._handlers.cursorActivity; if (t) for (var n = e.curOp.cursorActivityHandlers || (e.curOp.cursorActivityHandlers = []), r = 0; r < t.length; ++r)-1 == indexOf(n, t[r]) && n.push(t[r]) } function hasHandler(e, t) { return getHandlers(e, t).length > 0 } function eventMixin(e) { e.prototype.on = function (e, t) { ge(this, e, t) }, e.prototype.off = function (e, t) { ye(this, e, t) } } var we = 30, xe = CodeMirror.Pass = { toString: function () { return "CodeMirror.Pass" } }, Ce = { scroll: !1 }, Se = { origin: "*mouse" }, ke = { origin: "+move" }; function Delayed() { this.id = null } Delayed.prototype.set = function (e, t) { clearTimeout(this.id), this.id = setTimeout(t, e) }; var Te = CodeMirror.countColumn = function (e, t, n, r, i) { null == t && -1 == (t = e.search(/[^\s\u00a0]/)) && (t = e.length); for (var o = r || 0, a = i || 0; ;) { var s = e.indexOf("\t", o); if (s < 0 || s >= t) return a + (t - o); a += s - o, a += n - a % n, o = s + 1 } }, Le = CodeMirror.findColumn = function (e, t, n) { for (var r = 0, i = 0; ;) { var o = e.indexOf("\t", r); -1 == o && (o = e.length); var a = o - r; if (o == e.length || i + a >= t) return r + Math.min(a, t - i); if (i += o - r, r = o + 1, (i += n - i % n) >= t) return r } }, Me = [""]; function spaceStr(e) { for (; Me.length <= e;)Me.push(lst(Me) + " "); return Me[e] } function lst(e) { return e[e.length - 1] } var Ee = function (e) { e.select() }; function indexOf(e, t) { for (var n = 0; n < e.length; ++n)if (e[n] == t) return n; return -1 } function map(e, t) { for (var n = [], r = 0; r < e.length; r++)n[r] = t(e[r], r); return n } function nothing() { } function createObj(e, t) { var n; return Object.create ? n = Object.create(e) : (nothing.prototype = e, n = new nothing), t && copyObj(t, n), n } function copyObj(e, t, n) { for (var r in t || (t = {}), e) !e.hasOwnProperty(r) || !1 === n && t.hasOwnProperty(r) || (t[r] = e[r]); return t } function bind(e) { var t = Array.prototype.slice.call(arguments, 1); return function () { return e.apply(null, t) } } p ? Ee = function (e) { e.selectionStart = 0, e.selectionEnd = e.value.length } : o && (Ee = function (e) { try { e.select() } catch (e) { } }); var Ae = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/, Pe = CodeMirror.isWordChar = function (e) { return /\w/.test(e) || e > "\x80" && (e.toUpperCase() != e.toLowerCase() || Ae.test(e)) }; function isWordChar(e, t) { return t ? !!(t.source.indexOf("\\w") > -1 && Pe(e)) || t.test(e) : Pe(e) } function isEmpty(e) { for (var t in e) if (e.hasOwnProperty(t) && e[t]) return !1; return !0 } var Re, Oe = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/; function isExtendingChar(e) { return e.charCodeAt(0) >= 768 && Oe.test(e) } function elt(e, t, n, r) { var i = document.createElement(e); if (n && (i.className = n), r && (i.style.cssText = r), "string" == typeof t) i.appendChild(document.createTextNode(t)); else if (t) for (var o = 0; o < t.length; ++o)i.appendChild(t[o]); return i } function removeChildren(e) { for (var t = e.childNodes.length; t > 0; --t)e.removeChild(e.firstChild); return e } function removeChildrenAndAdd(e, t) { return removeChildren(e).appendChild(t) } Re = document.createRange ? function (e, t, n, r) { var i = document.createRange(); return i.setEnd(r || e, n), i.setStart(e, t), i } : function (e, t, n) { var r = document.body.createTextRange(); try { r.moveToElementText(e.parentNode) } catch (e) { return r } return r.collapse(!0), r.moveEnd("character", n), r.moveStart("character", t), r }; var De = CodeMirror.contains = function (e, t) { if (3 == t.nodeType && (t = t.parentNode), e.contains) return e.contains(t); do { if (11 == t.nodeType && (t = t.host), t == e) return !0 } while (t = t.parentNode) }; function activeElt() { for (var e = document.activeElement; e && e.root && e.root.activeElement;)e = e.root.activeElement; return e } function classTest(e) { return new RegExp("(^|\\s)" + e + "(?:$|\\s)\\s*") } o && a < 11 && (activeElt = function () { try { return document.activeElement } catch (e) { return document.body } }); var Fe = CodeMirror.rmClass = function (e, t) { var n = e.className, r = classTest(t).exec(n); if (r) { var i = n.slice(r.index + r[0].length); e.className = n.slice(0, r.index) + (i ? r[1] + i : "") } }, Ie = CodeMirror.addClass = function (e, t) { var n = e.className; classTest(t).test(n) || (e.className += (n ? " " : "") + t) }; function joinClasses(e, t) { for (var n = e.split(" "), r = 0; r < n.length; r++)n[r] && !classTest(n[r]).test(t) && (t += " " + n[r]); return t } function forEachCodeMirror(e) { if (document.body.getElementsByClassName) for (var t = document.body.getElementsByClassName("CodeMirror"), n = 0; n < t.length; n++) { var r = t[n].CodeMirror; r && e(r) } } var Ne, $e, Be = !1, ze = function () { if (o && a < 9) return !1; var e = elt("div"); return "draggable" in e || "dragDrop" in e }(); function zeroWidthElement(e) { if (null == Ne) { var t = elt("span", "\u200b"); removeChildrenAndAdd(e, elt("span", [t, document.createTextNode("x")])), 0 != e.firstChild.offsetHeight && (Ne = t.offsetWidth <= 1 && t.offsetHeight > 2 && !(o && a < 8)) } var n = Ne ? elt("span", "\u200b") : elt("span", "\xa0", null, "display: inline-block; width: 1px; margin-right: -1px"); return n.setAttribute("cm-text", ""), n } function hasBadBidiRects(e) { if (null != $e) return $e; var t = removeChildrenAndAdd(e, document.createTextNode("A\u062eA")), n = Re(t, 0, 1).getBoundingClientRect(); if (!n || n.left == n.right) return !1; var r = Re(t, 1, 2).getBoundingClientRect(); return $e = r.right - n.right < 3 } var je, Ue, qe = CodeMirror.splitLines = 3 != "\n\nb".split(/\n/).length ? function (e) { for (var t = 0, n = [], r = e.length; t <= r;) { var i = e.indexOf("\n", t); -1 == i && (i = e.length); var o = e.slice(t, "\r" == e.charAt(i - 1) ? i - 1 : i), a = o.indexOf("\r"); -1 != a ? (n.push(o.slice(0, a)), t += a + 1) : (n.push(o), t = i + 1) } return n } : function (e) { return e.split(/\r\n?|\n/) }, He = window.getSelection ? function (e) { try { return e.selectionStart != e.selectionEnd } catch (e) { return !1 } } : function (e) { try { var t = e.ownerDocument.selection.createRange() } catch (e) { } return !(!t || t.parentElement() != e) && 0 != t.compareEndPoints("StartToEnd", t) }, Ve = "oncopy" in (je = elt("div")) || (je.setAttribute("oncopy", "return;"), "function" == typeof je.oncopy), Ge = null, We = CodeMirror.keyNames = { 3: "Enter", 8: "Backspace", 9: "Tab", 13: "Enter", 16: "Shift", 17: "Ctrl", 18: "Alt", 19: "Pause", 20: "CapsLock", 27: "Esc", 32: "Space", 33: "PageUp", 34: "PageDown", 35: "End", 36: "Home", 37: "Left", 38: "Up", 39: "Right", 40: "Down", 44: "PrintScrn", 45: "Insert", 46: "Delete", 59: ";", 61: "=", 91: "Mod", 92: "Mod", 93: "Mod", 106: "*", 107: "=", 109: "-", 110: ".", 111: "/", 127: "Delete", 173: "-", 186: ";", 187: "=", 188: ",", 189: "-", 190: ".", 191: "/", 192: "`", 219: "[", 220: "\\", 221: "]", 222: "'", 63232: "Up", 63233: "Down", 63234: "Left", 63235: "Right", 63272: "Delete", 63273: "Home", 63275: "End", 63276: "PageUp", 63277: "PageDown", 63302: "Insert" }; function bidiLeft(e) { return e.level % 2 ? e.to : e.from } function bidiRight(e) { return e.level % 2 ? e.from : e.to } function lineLeft(e) { var t = getOrder(e); return t ? bidiLeft(t[0]) : 0 } function lineRight(e) { var t = getOrder(e); return t ? bidiRight(lst(t)) : e.text.length } function lineStart(e, t) { var n = getLine(e.doc, t), r = visualLine(n); r != n && (t = lineNo(r)); var i = getOrder(r), o = i ? i[0].level % 2 ? lineRight(r) : lineLeft(r) : 0; return S(t, o) } function lineStartSmart(e, t) { var n = lineStart(e, t.line), r = getLine(e.doc, n.line), i = getOrder(r); if (!i || 0 == i[0].level) { var o = Math.max(0, r.text.search(/\S/)), a = t.line == n.line && t.ch <= o && t.ch; return S(n.line, a ? 0 : o) } return n } function compareBidiLevel(e, t, n) { var r = e[0].level; return t == r || n != r && t < n } function getBidiPartAt(e, t) { Ue = null; for (var n, r = 0; r < e.length; ++r) { var i = e[r]; if (i.from < t && i.to > t) return r; if (i.from == t || i.to == t) { if (null != n) return compareBidiLevel(e, i.level, e[n].level) ? (i.from != i.to && (Ue = n), r) : (i.from != i.to && (Ue = r), n); n = r } } return n } function moveInLine(e, t, n, r) { if (!r) return t + n; do { t += n } while (t > 0 && isExtendingChar(e.text.charAt(t))); return t } function moveVisually(e, t, n, r) { var i = getOrder(e); if (!i) return moveLogically(e, t, n, r); for (var o = getBidiPartAt(i, t), a = i[o], s = moveInLine(e, t, a.level % 2 ? -n : n, r); ;) { if (s > a.from && s < a.to) return s; if (s == a.from || s == a.to) return getBidiPartAt(i, s) == o ? s : (a = i[o += n], n > 0 == a.level % 2 ? a.to : a.from); if (!(a = i[o += n])) return null; s = n > 0 == a.level % 2 ? moveInLine(e, a.to, -1, r) : moveInLine(e, a.from, 1, r) } } function moveLogically(e, t, n, r) { var i = t + n; if (r) for (; i > 0 && isExtendingChar(e.text.charAt(i));)i += n; return i < 0 || i > e.text.length ? null : i } !function () { for (var e = 0; e < 10; e++)We[e + 48] = We[e + 96] = String(e); for (var e = 65; e <= 90; e++)We[e] = String.fromCharCode(e); for (var e = 1; e <= 12; e++)We[e + 111] = We[e + 63235] = "F" + e }(); var Ye = function () { var e = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN", t = "rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm"; var n = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/, r = /[stwN]/, i = /[LRr]/, o = /[Lb1n]/, a = /[1n]/; function BidiSpan(e, t, n) { this.level = e, this.from = t, this.to = n } return function (s) { if (!n.test(s)) return !1; for (var l = s.length, u = [], c = 0; c < l; ++c)u.push((d = s.charCodeAt(c), h = d <= 247 ? e.charAt(d) : 1424 <= d && d <= 1524 ? "R" : 1536 <= d && d <= 1773 ? t.charAt(d - 1536) : 1774 <= d && d <= 2220 ? "r" : 8192 <= d && d <= 8203 ? "w" : 8204 == d ? "b" : "L")); for (var d, c = 0, f = "L"; c < l; ++c) { var h = u[c]; "m" == h ? u[c] = f : f = h } for (var c = 0, p = "L"; c < l; ++c) { var h = u[c]; "1" == h && "r" == p ? u[c] = "n" : i.test(h) && (p = h, "r" == h && (u[c] = "R")) } for (var c = 1, f = u[0]; c < l - 1; ++c) { var h = u[c]; "+" == h && "1" == f && "1" == u[c + 1] ? u[c] = "1" : "," != h || f != u[c + 1] || "1" != f && "n" != f || (u[c] = f), f = h } for (var c = 0; c < l; ++c) { var h = u[c]; if ("," == h) u[c] = "N"; else if ("%" == h) { for (var m = c + 1; m < l && "%" == u[m]; ++m); for (var g = c && "!" == u[c - 1] || m < l && "1" == u[m] ? "1" : "N", v = c; v < m; ++v)u[v] = g; c = m - 1 } } for (var c = 0, p = "L"; c < l; ++c) { var h = u[c]; "L" == p && "1" == h ? u[c] = "L" : i.test(h) && (p = h) } for (var c = 0; c < l; ++c)if (r.test(u[c])) { for (var m = c + 1; m < l && r.test(u[m]); ++m); for (var y = "L" == (c ? u[c - 1] : "L"), _ = "L" == (m < l ? u[m] : "L"), g = y || _ ? "L" : "R", v = c; v < m; ++v)u[v] = g; c = m - 1 } for (var b, w = [], c = 0; c < l;)if (o.test(u[c])) { var x = c; for (++c; c < l && o.test(u[c]); ++c); w.push(new BidiSpan(0, x, c)) } else { var C = c, S = w.length; for (++c; c < l && "L" != u[c]; ++c); for (var v = C; v < c;)if (a.test(u[v])) { C < v && w.splice(S, 0, new BidiSpan(1, C, v)); var k = v; for (++v; v < c && a.test(u[v]); ++v); w.splice(S, 0, new BidiSpan(2, k, v)), C = v } else ++v; C < c && w.splice(S, 0, new BidiSpan(1, C, c)) } return 1 == w[0].level && (b = s.match(/^\s+/)) && (w[0].from = b[0].length, w.unshift(new BidiSpan(0, 0, b[0].length))), 1 == lst(w).level && (b = s.match(/\s+$/)) && (lst(w).to -= b[0].length, w.push(new BidiSpan(0, l - b[0].length, l))), 2 == w[0].level && w.unshift(new BidiSpan(1, w[0].to, w[0].to)), w[0].level != lst(w).level && w.push(new BidiSpan(w[0].level, l, l)), w } }(); return CodeMirror.version = "5.14.2", CodeMirror }() },,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = _interopRequireDefault(n(492)), o = _interopRequireDefault(n(259)), a = _interopRequireDefault(n(2238)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var s = function (e) { function Rule(t) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Rule); var n = function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.call(this, t)); return n.type = "rule", n.nodes || (n.nodes = []), n } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(Rule, e), r(Rule, [{ key: "selectors", get: function get() { return a.default.comma(this.selector) }, set: function set(e) { var t = this.selector ? this.selector.match(/,\s*/) : null, n = t ? t[0] : "," + this.raw("between", "beforeOpen"); this.selector = e.join(n) } }, { key: "_selector", get: function get() { return (0, o.default)("Rule#_selector is deprecated. Use Rule#raws.selector"), this.raws.selector }, set: function set(e) { (0, o.default)("Rule#_selector is deprecated. Use Rule#raws.selector"), this.raws.selector = e } }]), Rule }(i.default); t.default = s, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = _interopRequireDefault(n(492)), o = _interopRequireDefault(n(259)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var a = function (e) { function AtRule(t) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, AtRule); var n = function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.call(this, t)); return n.type = "atrule", n } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(AtRule, e), AtRule.prototype.append = function append() { var t; this.nodes || (this.nodes = []); for (var n = arguments.length, r = Array(n), i = 0; i < n; i++)r[i] = arguments[i]; return (t = e.prototype.append).call.apply(t, [this].concat(r)) }, AtRule.prototype.prepend = function prepend() { var t; this.nodes || (this.nodes = []); for (var n = arguments.length, r = Array(n), i = 0; i < n; i++)r[i] = arguments[i]; return (t = e.prototype.prepend).call.apply(t, [this].concat(r)) }, r(AtRule, [{ key: "afterName", get: function get() { return (0, o.default)("AtRule#afterName was deprecated. Use AtRule#raws.afterName"), this.raws.afterName }, set: function set(e) { (0, o.default)("AtRule#afterName was deprecated. Use AtRule#raws.afterName"), this.raws.afterName = e } }, { key: "_params", get: function get() { return (0, o.default)("AtRule#_params was deprecated. Use AtRule#raws.params"), this.raws.params }, set: function set(e) { (0, o.default)("AtRule#_params was deprecated. Use AtRule#raws.params"), this.raws.params = e } }]), AtRule }(i.default); t.default = a, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, o = _interopRequireDefault(n(1161)), a = _interopRequireDefault(n(775)), s = _interopRequireDefault(n(1156)), l = _interopRequireDefault(n(259)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var u = function () { function Node() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; if (function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Node), this.raws = {}, "object" !== (void 0 === e ? "undefined" : i(e)) && void 0 !== e) throw new Error("PostCSS nodes constructor accepts object, not " + JSON.stringify(e)); for (var t in e) this[t] = e[t] } return Node.prototype.error = function error(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; if (this.source) { var n = this.positionBy(t); return this.source.input.error(e, n.line, n.column, t) } return new o.default(e) }, Node.prototype.warn = function warn(e, t, n) { var r = { node: this }; for (var i in n) r[i] = n[i]; return e.warn(t, r) }, Node.prototype.remove = function remove() { return this.parent && this.parent.removeChild(this), this.parent = void 0, this }, Node.prototype.toString = function toString() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : s.default; e.stringify && (e = e.stringify); var t = ""; return e(this, function (e) { t += e }), t }, Node.prototype.clone = function clone() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = function cloneNode(e, t) { var n = new e.constructor; for (var r in e) if (e.hasOwnProperty(r)) { var o = e[r], a = void 0 === o ? "undefined" : i(o); "parent" === r && "object" === a ? t && (n[r] = t) : "source" === r ? n[r] = o : o instanceof Array ? n[r] = o.map(function (e) { return cloneNode(e, n) }) : "before" !== r && "after" !== r && "between" !== r && "semicolon" !== r && ("object" === a && null !== o && (o = cloneNode(o)), n[r] = o) } return n }(this); for (var n in e) t[n] = e[n]; return t }, Node.prototype.cloneBefore = function cloneBefore() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = this.clone(e); return this.parent.insertBefore(this, t), t }, Node.prototype.cloneAfter = function cloneAfter() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = this.clone(e); return this.parent.insertAfter(this, t), t }, Node.prototype.replaceWith = function replaceWith() { if (this.parent) { for (var e = arguments.length, t = Array(e), n = 0; n < e; n++)t[n] = arguments[n]; var r = t, i = Array.isArray(r), o = 0; for (r = i ? r : r[Symbol.iterator](); ;) { var a; if (i) { if (o >= r.length) break; a = r[o++] } else { if ((o = r.next()).done) break; a = o.value } var s = a; this.parent.insertBefore(this, s) } this.remove() } return this }, Node.prototype.moveTo = function moveTo(e) { return this.cleanRaws(this.root() === e.root()), this.remove(), e.append(this), this }, Node.prototype.moveBefore = function moveBefore(e) { return this.cleanRaws(this.root() === e.root()), this.remove(), e.parent.insertBefore(e, this), this }, Node.prototype.moveAfter = function moveAfter(e) { return this.cleanRaws(this.root() === e.root()), this.remove(), e.parent.insertAfter(e, this), this }, Node.prototype.next = function next() { var e = this.parent.index(this); return this.parent.nodes[e + 1] }, Node.prototype.prev = function prev() { var e = this.parent.index(this); return this.parent.nodes[e - 1] }, Node.prototype.toJSON = function toJSON() { var e = {}; for (var t in this) if (this.hasOwnProperty(t) && "parent" !== t) { var n = this[t]; n instanceof Array ? e[t] = n.map(function (e) { return "object" === (void 0 === e ? "undefined" : i(e)) && e.toJSON ? e.toJSON() : e }) : "object" === (void 0 === n ? "undefined" : i(n)) && n.toJSON ? e[t] = n.toJSON() : e[t] = n } return e }, Node.prototype.raw = function raw(e, t) { return (new a.default).raw(this, e, t) }, Node.prototype.root = function root() { for (var e = this; e.parent;)e = e.parent; return e }, Node.prototype.cleanRaws = function cleanRaws(e) { delete this.raws.before, delete this.raws.after, e || delete this.raws.between }, Node.prototype.positionInside = function positionInside(e) { for (var t = this.toString(), n = this.source.start.column, r = this.source.start.line, i = 0; i < e; i++)"\n" === t[i] ? (n = 1, r += 1) : n += 1; return { line: r, column: n } }, Node.prototype.positionBy = function positionBy(e) { var t = this.source.start; if (e.index) t = this.positionInside(e.index); else if (e.word) { var n = this.toString().indexOf(e.word); -1 !== n && (t = this.positionInside(n)) } return t }, Node.prototype.removeSelf = function removeSelf() { return (0, l.default)("Node#removeSelf is deprecated. Use Node#remove."), this.remove() }, Node.prototype.replace = function replace(e) { return (0, l.default)("Node#replace is deprecated. Use Node#replaceWith"), this.replaceWith(e) }, Node.prototype.style = function style(e, t) { return (0, l.default)("Node#style() is deprecated. Use Node#raw()"), this.raw(e, t) }, Node.prototype.cleanStyles = function cleanStyles(e) { return (0, l.default)("Node#cleanStyles() is deprecated. Use Node#cleanRaws()"), this.cleanRaws(e) }, r(Node, [{ key: "before", get: function get() { return (0, l.default)("Node#before is deprecated. Use Node#raws.before"), this.raws.before }, set: function set(e) { (0, l.default)("Node#before is deprecated. Use Node#raws.before"), this.raws.before = e } }, { key: "between", get: function get() { return (0, l.default)("Node#between is deprecated. Use Node#raws.between"), this.raws.between }, set: function set(e) { (0, l.default)("Node#between is deprecated. Use Node#raws.between"), this.raws.between = e } }]), Node }(); t.default = u, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = _interopRequireDefault(n(259)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var o = function (e) { function Comment(t) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Comment); var n = function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.call(this, t)); return n.type = "comment", n } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(Comment, e), r(Comment, [{ key: "left", get: function get() { return (0, i.default)("Comment#left was deprecated. Use Comment#raws.left"), this.raws.left }, set: function set(e) { (0, i.default)("Comment#left was deprecated. Use Comment#raws.left"), this.raws.left = e } }, { key: "right", get: function get() { return (0, i.default)("Comment#right was deprecated. Use Comment#raws.right"), this.raws.right }, set: function set(e) { (0, i.default)("Comment#right was deprecated. Use Comment#raws.right"), this.raws.right = e } }]), Comment }(_interopRequireDefault(n(772)).default); t.default = o, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = _interopRequireDefault(n(1161)), o = _interopRequireDefault(n(2240)), a = _interopRequireDefault(n(246)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var s = 0, l = function () { function Input(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Input), this.css = e.toString(), "\ufeff" !== this.css[0] && "\ufffe" !== this.css[0] || (this.css = this.css.slice(1)), t.from && (/^\w+:\/\//.test(t.from) ? this.file = t.from : this.file = a.default.resolve(t.from)); var n = new o.default(this.css, t); if (n.text) { this.map = n; var r = n.consumer().file; !this.file && r && (this.file = this.mapResolve(r)) } this.file || (s += 1, this.id = "<input css " + s + ">"), this.map && (this.map.file = this.from) } return Input.prototype.error = function error(e, t, n) { var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}, o = void 0, a = this.origin(t, n); return (o = a ? new i.default(e, a.line, a.column, a.source, a.file, r.plugin) : new i.default(e, t, n, this.css, this.file, r.plugin)).input = { line: t, column: n, source: this.css }, this.file && (o.input.file = this.file), o }, Input.prototype.origin = function origin(e, t) { if (!this.map) return !1; var n = this.map.consumer(), r = n.originalPositionFor({ line: e, column: t }); if (!r.source) return !1; var i = { file: this.mapResolve(r.source), line: r.line, column: r.column }, o = n.sourceContentFor(r.source); return o && (i.source = o), i }, Input.prototype.mapResolve = function mapResolve(e) { return /^\w+:\/\//.test(e) ? e : a.default.resolve(this.map.consumer().sourceRoot || ".", e) }, r(Input, [{ key: "from", get: function get() { return this.file || this.id } }]), Input }(); t.default = l, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = { colon: ": ", indent: "    ", beforeDecl: "\n", beforeRule: "\n", beforeOpen: " ", beforeClose: "\n", beforeComment: "\n", after: "\n", emptyBody: "", commentLeft: " ", commentRight: " " }; var i = function () { function Stringifier(e) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Stringifier), this.builder = e } return Stringifier.prototype.stringify = function stringify(e, t) { this[e.type](e, t) }, Stringifier.prototype.root = function root(e) { this.body(e), e.raws.after && this.builder(e.raws.after) }, Stringifier.prototype.comment = function comment(e) { var t = this.raw(e, "left", "commentLeft"), n = this.raw(e, "right", "commentRight"); this.builder("/*" + t + e.text + n + "*/", e) }, Stringifier.prototype.decl = function decl(e, t) { var n = this.raw(e, "between", "colon"), r = e.prop + n + this.rawValue(e, "value"); e.important && (r += e.raws.important || " !important"), t && (r += ";"), this.builder(r, e) }, Stringifier.prototype.rule = function rule(e) { this.block(e, this.rawValue(e, "selector")) }, Stringifier.prototype.atrule = function atrule(e, t) { var n = "@" + e.name, r = e.params ? this.rawValue(e, "params") : ""; if (void 0 !== e.raws.afterName ? n += e.raws.afterName : r && (n += " "), e.nodes) this.block(e, n + r); else { var i = (e.raws.between || "") + (t ? ";" : ""); this.builder(n + r + i, e) } }, Stringifier.prototype.body = function body(e) { for (var t = e.nodes.length - 1; t > 0 && "comment" === e.nodes[t].type;)t -= 1; for (var n = this.raw(e, "semicolon"), r = 0; r < e.nodes.length; r++) { var i = e.nodes[r], o = this.raw(i, "before"); o && this.builder(o), this.stringify(i, t !== r || n) } }, Stringifier.prototype.block = function block(e, t) { var n = this.raw(e, "between", "beforeOpen"); this.builder(t + n + "{", e, "start"); var r = void 0; e.nodes && e.nodes.length ? (this.body(e), r = this.raw(e, "after")) : r = this.raw(e, "after", "emptyBody"), r && this.builder(r), this.builder("}", e, "end") }, Stringifier.prototype.raw = function raw(e, t, n) { var i = void 0; if (n || (n = t), t && void 0 !== (i = e.raws[t])) return i; var o = e.parent; if ("before" === n && (!o || "root" === o.type && o.first === e)) return ""; if (!o) return r[n]; var a = e.root(); if (a.rawCache || (a.rawCache = {}), void 0 !== a.rawCache[n]) return a.rawCache[n]; if ("before" === n || "after" === n) return this.beforeAfter(e, n); var s = "raw" + function capitalize(e) { return e[0].toUpperCase() + e.slice(1) }(n); return this[s] ? i = this[s](a, e) : a.walk(function (e) { if (void 0 !== (i = e.raws[t])) return !1 }), void 0 === i && (i = r[n]), a.rawCache[n] = i, i }, Stringifier.prototype.rawSemicolon = function rawSemicolon(e) { var t = void 0; return e.walk(function (e) { if (e.nodes && e.nodes.length && "decl" === e.last.type && void 0 !== (t = e.raws.semicolon)) return !1 }), t }, Stringifier.prototype.rawEmptyBody = function rawEmptyBody(e) { var t = void 0; return e.walk(function (e) { if (e.nodes && 0 === e.nodes.length && void 0 !== (t = e.raws.after)) return !1 }), t }, Stringifier.prototype.rawIndent = function rawIndent(e) { if (e.raws.indent) return e.raws.indent; var t = void 0; return e.walk(function (n) { var r = n.parent; if (r && r !== e && r.parent && r.parent === e && void 0 !== n.raws.before) { var i = n.raws.before.split("\n"); return t = (t = i[i.length - 1]).replace(/[^\s]/g, ""), !1 } }), t }, Stringifier.prototype.rawBeforeComment = function rawBeforeComment(e, t) { var n = void 0; return e.walkComments(function (e) { if (void 0 !== e.raws.before) return -1 !== (n = e.raws.before).indexOf("\n") && (n = n.replace(/[^\n]+$/, "")), !1 }), void 0 === n && (n = this.raw(t, null, "beforeDecl")), n }, Stringifier.prototype.rawBeforeDecl = function rawBeforeDecl(e, t) { var n = void 0; return e.walkDecls(function (e) { if (void 0 !== e.raws.before) return -1 !== (n = e.raws.before).indexOf("\n") && (n = n.replace(/[^\n]+$/, "")), !1 }), void 0 === n && (n = this.raw(t, null, "beforeRule")), n }, Stringifier.prototype.rawBeforeRule = function rawBeforeRule(e) { var t = void 0; return e.walk(function (n) { if (n.nodes && (n.parent !== e || e.first !== n) && void 0 !== n.raws.before) return -1 !== (t = n.raws.before).indexOf("\n") && (t = t.replace(/[^\n]+$/, "")), !1 }), t }, Stringifier.prototype.rawBeforeClose = function rawBeforeClose(e) { var t = void 0; return e.walk(function (e) { if (e.nodes && e.nodes.length > 0 && void 0 !== e.raws.after) return -1 !== (t = e.raws.after).indexOf("\n") && (t = t.replace(/[^\n]+$/, "")), !1 }), t }, Stringifier.prototype.rawBeforeOpen = function rawBeforeOpen(e) { var t = void 0; return e.walk(function (e) { if ("decl" !== e.type && void 0 !== (t = e.raws.between)) return !1 }), t }, Stringifier.prototype.rawColon = function rawColon(e) { var t = void 0; return e.walkDecls(function (e) { if (void 0 !== e.raws.between) return t = e.raws.between.replace(/[^\s:]/g, ""), !1 }), t }, Stringifier.prototype.beforeAfter = function beforeAfter(e, t) { var n = void 0; n = "decl" === e.type ? this.raw(e, null, "beforeDecl") : "comment" === e.type ? this.raw(e, null, "beforeComment") : "before" === t ? this.raw(e, null, "beforeRule") : this.raw(e, null, "beforeClose"); for (var r = e.parent, i = 0; r && "root" !== r.type;)i += 1, r = r.parent; if (-1 !== n.indexOf("\n")) { var o = this.raw(e, null, "indent"); if (o.length) for (var a = 0; a < i; a++)n += o } return n }, Stringifier.prototype.rawValue = function rawValue(e, t) { var n = e[t], r = e.raws[t]; return r && r.value === n ? r.raw : n }, Stringifier }(); t.default = i, e.exports = t.default },,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { var r, i, o; i = [e, n(2850), n(2848), n(2847)], void 0 === (o = "function" == typeof (r = function (e, t, n, r) { "use strict"; var i = _interopRequireDefault(t), o = _interopRequireDefault(n), a = _interopRequireDefault(r); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var s = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), l = function (e) { function Clipboard(e, t) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Clipboard); var n = function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this)); return n.resolveOptions(t), n.listenClick(e), n } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(Clipboard, e), s(Clipboard, [{ key: "resolveOptions", value: function resolveOptions() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; this.action = "function" == typeof e.action ? e.action : this.defaultAction, this.target = "function" == typeof e.target ? e.target : this.defaultTarget, this.text = "function" == typeof e.text ? e.text : this.defaultText } }, { key: "listenClick", value: function listenClick(e) { var t = this; this.listener = (0, a.default)(e, "click", function (e) { return t.onClick(e) }) } }, { key: "onClick", value: function onClick(e) { var t = e.delegateTarget || e.currentTarget; this.clipboardAction && (this.clipboardAction = null), this.clipboardAction = new i.default({ action: this.action(t), target: this.target(t), text: this.text(t), trigger: t, emitter: this }) } }, { key: "defaultAction", value: function defaultAction(e) { return getAttributeValue("action", e) } }, { key: "defaultTarget", value: function defaultTarget(e) { var t = getAttributeValue("target", e); if (t) return document.querySelector(t) } }, { key: "defaultText", value: function defaultText(e) { return getAttributeValue("text", e) } }, { key: "destroy", value: function destroy() { this.listener.destroy(), this.clipboardAction && (this.clipboardAction.destroy(), this.clipboardAction = null) } }], [{ key: "isSupported", value: function isSupported() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ["copy", "cut"], t = "string" == typeof e ? [e] : e, n = !!document.queryCommandSupported; return t.forEach(function (e) { n = n && !!document.queryCommandSupported(e) }), n } }]), Clipboard }(o.default); function getAttributeValue(e, t) { var n = "data-clipboard-" + e; if (t.hasAttribute(n)) return t.getAttribute(n) } e.exports = l }) ? r.apply(t, i) : r) || (e.exports = o) },, function(e, t, n) { var r, i; r = [n(0), n(9), n(3)], void 0 === (i = function (e, t, n) { !function (e, t, n, r) { "use strict"; var i = n.clone(t.Model.prototype), o = t.Model.extend({ fileAttribute: "file", save: function (e, t, o) { var a, s = this.attributes; if (null == e || "object" == typeof e ? (a = e, o = t) : (a = {})[e] = t, o = n.extend({ validate: !0 }, o), a && !o.wait) { if (!this.set(a, o)) return !1 } else if (!this._validate(a, o)) return !1; var l = n.extend({}, s, a); if (a && o.wait && (this.attributes = l), !0 === o.formData || !1 !== o.formData && l[this.fileAttribute] && l[this.fileAttribute] instanceof File || l[this.fileAttribute] instanceof FileList || l[this.fileAttribute] instanceof Blob) { var u = n.clone(l), c = l[this.fileAttribute]; (u = this._flatten(u))[this.fileAttribute] = c; var d = new FormData; n.each(u, function (e, t) { e instanceof FileList ? n.each(e, function (e) { d.append(t, e) }) : d.append(t, e) }), o.data = d, o.processData = !1, o.contentType = !1; var f = this; o.xhr = function () { var e = r.ajaxSettings.xhr(); return e.upload.addEventListener("progress", f._progressHandler.bind(f), !1), e } } return a && o.wait && (this.attributes = s), i.save.call(this, a, o) }, _flatten: function flatten(e) { var t = {}; for (var n in e) if (e.hasOwnProperty(n)) if ("object" == typeof e[n]) { var r = flatten(e[n]); for (var i in r) r.hasOwnProperty(i) && (t[n + "[" + i + "]"] = r[i]) } else t[n] = e[n]; return t }, _unflatten: function unflatten(e, t) { var r = /^([^\[\]]+)\[(.+)\]$/g; for (var i in t = t || {}, e) { var o = e[i]; if (i.toString().match(r)) { var a = n.compact(i.split(r)), s = {}; s[a[1]] = o, t[a[0]] = unflatten(s, t[a[0]]) } else { var s = {}; s[i] = o, n.extend(t, s) } } return t }, _progressHandler: function (e) { if (e.lengthComputable) { var t = e.loaded / e.total; this.trigger("progress", t) } } }); t.Model = o }(0, n, e, t) }.apply(t, r)) || (e.exports = i) },, function(e, t, n) { var r = n(109); e.exports = function (e) { return r(function () { var t = ""[e]('"'); return t !== t.toLowerCase() || t.split('"').length > 3 }) } }, function(e, t, n) { var r = n(251), i = /"/g; e.exports = function (e, t, n, o) { var a = String(r(e)), s = "<" + t; return "" !== n && (s += " " + n + '="' + String(o).replace(i, "&quot;") + '"'), s + ">" + a + "</" + t + ">" } },, function(e, t, n) { var r = n(0), i = n(596), o = i.extend({ defaults: function defaults() { return r.extend(i.prototype.defaults.apply(this), { state: i.STATE_SUCCESS }) }, _onEngineReloadStarted: function _onEngineReloadStarted() { }, isAvailable: function isAvailable() { return !0 } }); e.exports = o }, function(e, t, n) { var r = n(3); e.exports = function (e, t, n) { var i = arguments[1]; return this._xhr && this._xhr.abort(), this._xhr = r.sync.apply(this, arguments), this._xhr.always(function () { i._xhr = null }), this._xhr } }, function(e, t, n) { n(436), n(23); var r = n(6), i = n(1), o = n(0), a = n(144), s = n(864), l = n(604), u = n(231), c = n(875), d = ["engine"]; e.exports = a.extend({ defaults: { url: "", data: [], sync_on_bbox_change: !0, sync_on_circle_change: !0, sync_on_polygon_change: !0, enabled: !0, status: "unfetched" }, url: function url() { var e = o.union([this._getSpatialFilterParam()], this._getDataviewSpecificURLParams()); this._addAuthTo(e); var t = this.get("url") + "?" + e.join("&"); if (t.length > 2083) throw new Error("URL length is longer than allowed (2083 chars). Check your filters (eg. if using a Polygon filter, reduce the number of vertices)."); return t }, _addAuthTo: function _addAuthTo(e) { if (this._engine.getApiKey()) e.push("api_key=" + this._engine.getApiKey()); else if (this._engine.getAuthToken()) { var t = this._engine.getAuthToken(); t instanceof Array ? o.each(t, function (t) { e.push("auth_token[]=" + t) }) : e.push("auth_token=" + t) } }, _getSpatialFilterParam: function _getSpatialFilterParam() { return this._bboxFilter ? this._getBoundingBoxFilterParam() : this._circleFilter ? this._getCircleFilterParam() : this._polygonFilter ? this._getPolygonFilterParam() : void 0 }, _getBoundingBoxFilterParam: function _getBoundingBoxFilterParam() { var e = ""; return this._checkBBoxFilter(), this.syncsOnBoundingBoxChanges() && (e = "bbox=" + this._bboxFilter.serialize()), e }, _getCircleFilterParam: function _getCircleFilterParam() { var e = ""; return this._checkCircleFilter(), this.syncsOnCircleChanges() && (e = "circle=" + this._circleFilter.serialize()), e }, _getPolygonFilterParam: function _getPolygonFilterParam() { var e = ""; return this._checkPolygonFilter(), this.syncsOnPolygonChanges() && (e = "polygon=" + this._polygonFilter.serialize()), e }, _getDataviewSpecificURLParams: function _getDataviewSpecificURLParams() { return [] }, initialize: function initialize(e, t) { if (e = e || {}, t = t || {}, u.checkRequiredOpts(t, d, "DataviewModelBase"), this._hasBinds = !1, this._engine = t.engine, !e.source) throw new Error("source is a required attr"); this._checkSourceAttribute(this.getSource()), this.getSource().markAsSourceOf(this), e.id || this.set("id", this.defaults.type + "-" + this.cid), this.sync = i(s).call(s, this), this.filter = r(t), r(this) && r(this).set("dataviewId", this.id), this._addSpatialFilterFrom(t), this._initBinds() }, _addSpatialFilterFrom: function _addSpatialFilterFrom(e) { e.bboxFilter && this.addBBoxFilter(e.bboxFilter), e.circleFilter && this.addCircleFilter(e.circleFilter), e.polygonFilter && this.addPolygonFilter(e.polygonFilter) }, _initBinds: function _initBinds() { this.listenToOnce(this, "change:url", function () { this._checkBBoxFilter(), this.syncsOnBoundingBoxChanges() && !this._bboxFilter.areBoundsAvailable() ? this.listenTo(this._bboxFilter, "boundsChanged", this._fetch) : this._fetch() }), r(this) && this.listenTo(r(this), "change", this._onFilterChanged), this.getSource().on("change:status", this._onAnalysisStatusChange, this) }, _onChangeBinds: function _onChangeBinds() { this.on("change:sync_on_bbox_change", function () { this.refresh() }, this), this.on("change:url", function (e, t, n) { this._newDataAvailable = !0, this._shouldFetchOnURLChange(n && o.pick(n, ["forceFetch", "sourceId"])) && this.refresh() }, this), this.on("change:enabled", function (e, t) { t && this._newDataAvailable && (this.refresh(), this._newDataAvailable = !1) }, this) }, _onMapBoundsChanged: function _onMapBoundsChanged() { this._shouldFetchOnBoundingBoxChange() && this._fetch(), this.syncsOnBoundingBoxChanges() && (this._newDataAvailable = !0) }, _onCircleChanged: function _onCircleChanged() { this._shouldFetchOnCircleChange() && this._fetch(), this.syncsOnCircleChanges() && (this._newDataAvailable = !0) }, _onPolygonChanged: function _onPolygonChanged() { this._shouldFetchOnPolygonChange() && this._fetch(), this.syncsOnPolygonChanges() && (this._newDataAvailable = !0) }, _fetch: function _fetch() { var e; this.fetch({ success: i(e = function _context() { this._hasBinds || (this._hasBinds = !0, this._onChangeBinds()) }).call(e, this) }) }, _onAnalysisStatusChange: function _onAnalysisStatusChange(e, t) { e.isLoading() ? this._triggerLoading() : e.isFailed() && this._triggerStatusError(e.get("error")) }, _triggerLoading: function _triggerLoading() { this.trigger("loading", this) }, _triggerStatusError: function _triggerStatusError(e) { this.trigger("statusError", this, e) }, _onFilterChanged: function _onFilterChanged(e) { this._reload({ sourceId: this.getSourceId() }) }, _reloadAndForceFetch: function _reloadAndForceFetch() { this._reload({ sourceId: this.getSourceId(), forceFetch: !0 }) }, _reload: function _reload(e) { e = e || {}, this._engine.reload(e) }, _shouldFetchOnURLChange: function _shouldFetchOnURLChange(e) { var t = (e = e || {}).sourceId; return !!e.forceFetch || this.isEnabled() && this._sourceAffectsMyOwnSource(t) }, _sourceAffectsMyOwnSource: function _sourceAffectsMyOwnSource(e) { if (!e) return !0; var t = this.getSource(); return t && t.findAnalysisById(e) }, _shouldFetchOnBoundingBoxChange: function _shouldFetchOnBoundingBoxChange() { return this.isEnabled() && this.syncsOnBoundingBoxChanges() }, _shouldFetchOnCircleChange: function _shouldFetchOnCircleChange() { return this.isEnabled() && this.syncsOnCircleChanges() }, _shouldFetchOnPolygonChange: function _shouldFetchOnPolygonChange() { return this.isEnabled() && this.syncsOnPolygonChanges() }, refresh: function refresh() { this.fetch() }, addBBoxFilter: function addBBoxFilter(e) { e && (this._stopListeningBBoxChanges(), this._bboxFilter = e, this._listenToBBoxChanges()) }, removeBBoxFilter: function removeBBoxFilter() { this._stopListeningBBoxChanges(), this._bboxFilter = null }, addCircleFilter: function addCircleFilter(e) { e && (this._stopListeningCircleChanges(), this._circleFilter = e, this._listenToCircleChanges()) }, removeCircleFilter: function removeCircleFilter() { this._stopListeningCircleChanges(), this._circleFilter = null }, addPolygonFilter: function addPolygonFilter(e) { e && (this._stopListeningPolygonChanges(), this._polygonFilter = e, this._listenToPolygonChanges()) }, removePolygonFilter: function removePolygonFilter() { this._stopListeningPolygonChanges(), this._polygonFilter = null }, update: function update(e) { if (o.has(e, "source")) throw new Error("Source of dataviews cannot be updated"); e = o.pick(e, this.constructor.ATTRS_NAMES), this.set(e) }, getData: function getData() { return this.get("data") }, getPreviousData: function getPreviousData() { return this.previous("data") }, fetch: function fetch(e) { var t, n; if (e = e || {}, this.set("status", "fetching"), this._triggerLoading(), e.success) var r = e && e.success; return a.prototype.fetch.call(this, o.extend(e, { success: i(t = function _context2() { this.set("status", "fetched"), r && r(arguments), this.trigger("loaded", this) }).call(t, this), error: i(n = function _context3(e, t) { if (!t || t && "abort" !== t.statusText) { this.set("status", "error"), this._errorWithBigPolygonFilter(e) && (t.statusText = "error in the dataview request. Check the Polygon filter size (reduce the number of vertices and retry)."); var n = this._parseError(t); this._triggerStatusError(n) } }).call(n, this) })) }, _errorWithBigPolygonFilter: function _errorWithBigPolygonFilter(e) { return !!(e && e.attributes && e.attributes.sync_on_polygon_change && this.url().length > 2083) }, toJSON: function toJSON() { throw new Error("toJSON should be defined for each dataview") }, getSourceType: function getSourceType() { return this.getSource().get("type") }, getSourceId: function getSourceId() { var e = this.getSource(); return e && e.id }, getSource: function getSource() { return this.get("source") }, isSourceType: function isSourceType() { return "source" === this.getSourceType() }, isFiltered: function isFiltered() { var isFiltered = !1; return r(this) && (isFiltered = !r(this).isEmpty()), isFiltered }, remove: function remove() { this._removeExistingAnalysisBindings(), this.getSource().unmarkAsSourceOf(this), this.trigger("destroy", this), this.stopListening() }, _removeExistingAnalysisBindings: function _removeExistingAnalysisBindings() { this.getSource().off("change:status", this._onAnalysisStatusChange, this) }, isFetched: function isFetched() { return "fetched" === this.get("status") }, isUnavailable: function isUnavailable() { return "error" === this.get("status") }, isEnabled: function isEnabled() { return this.get("enabled") }, setUnavailable: function setUnavailable() { return this.set("status", "error") }, syncsOnBoundingBoxChanges: function syncsOnBoundingBoxChanges() { return this.get("sync_on_bbox_change") }, syncsOnCircleChanges: function syncsOnCircleChanges() { return this.get("sync_on_circle_change") }, syncsOnPolygonChanges: function syncsOnPolygonChanges() { return this.get("sync_on_polygon_change") }, _checkSourceAttribute: function _checkSourceAttribute(e) { if (!(e instanceof l)) throw new Error("Source must be an instance of AnalysisModel") }, _checkBBoxFilter: function _checkBBoxFilter() { if (this.syncsOnBoundingBoxChanges() && !this._bboxFilter) throw new Error("Cannot sync on bounding box changes. There is no bounding box filter.") }, _checkCircleFilter: function _checkCircleFilter() { if (this.syncsOnCircleChanges() && !this._circleFilter) throw new Error("Cannot sync on circle filter changes. There is no circle filter.") }, _checkPolygonFilter: function _checkPolygonFilter() { if (this.syncsOnPolygonChanges() && !this._polygonFilter) throw new Error("Cannot sync on polygon filter changes. There is no polygon filter.") }, _listenToBBoxChanges: function _listenToBBoxChanges() { this._bboxFilter && this.listenTo(this._bboxFilter, "boundsChanged", this._onMapBoundsChanged) }, _stopListeningBBoxChanges: function _stopListeningBBoxChanges() { this._bboxFilter && this.stopListening(this._bboxFilter, "boundsChanged") }, _listenToCircleChanges: function _listenToCircleChanges() { this._circleFilter && this.listenTo(this._circleFilter, "circleChanged", this._onCircleChanged) }, _stopListeningCircleChanges: function _stopListeningCircleChanges() { this._circleFilter && this.stopListening(this._circleFilter, "circleChanged") }, _listenToPolygonChanges: function _listenToPolygonChanges() { this._polygonFilter && this.listenTo(this._polygonFilter, "polygonChanged", this._onPolygonChanged) }, _stopListeningPolygonChanges: function _stopListeningPolygonChanges() { this._polygonFilter && this.stopListening(this._polygonFilter, "polygonChanged") }, _parseError: function _parseError(e) { var t = {}, n = c(e, "dataview"); return n.length > 0 && (t = n[0]), t } }, { ATTRS_NAMES: ["id", "sync_on_bbox_change", "sync_on_circle_change", "sync_on_polygon_change", "enabled", "source"] }) }, function(e, t, n) { "use strict"; n(230).polyfill(); var r = n(334), i = n(597); function LazyFiltersResult(e) { this.filterGenerator = e } r.inherits(LazyFiltersResult, i), e.exports = LazyFiltersResult, LazyFiltersResult.prototype.get = function (e, t) { return this.filterGenerator(e, t) } }, function(e, t, n) { "use strict"; function TurboCartoError(e, t, n) { Error.captureStackTrace(this, this.constructor), this.name = this.constructor.name, t && (e += " " + t.message), this.message = e, this.originalErr = t, this.context = n } n(334).inherits(TurboCartoError, Error), e.exports = TurboCartoError }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = _interopRequireDefault(n(869)), i = _interopRequireDefault(n(268)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var o = function (e) { function Root(t) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Root); var n = function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.call(this, t)); return n.type = "root", n.nodes || (n.nodes = []), n } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(Root, e), Root.prototype.removeChild = function removeChild(t) { return 0 === (t = this.index(t)) && this.nodes.length > 1 && (this.nodes[1].raws.before = this.nodes[t].raws.before), e.prototype.removeChild.call(this, t) }, Root.prototype.normalize = function normalize(t, n, r) { var i = e.prototype.normalize.call(this, t); if (n) if ("prepend" === r) this.nodes.length > 1 ? n.raws.before = this.nodes[1].raws.before : delete n.raws.before; else if (this.first !== n) { var o = i, a = Array.isArray(o), s = 0; for (o = a ? o : o[Symbol.iterator](); ;) { var l; if (a) { if (s >= o.length) break; l = o[s++] } else { if ((s = o.next()).done) break; l = s.value } l.raws.before = n.raws.before } } return i }, Root.prototype.toResult = function toResult() { var e = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0]; return new (n(1350))(new (n(1351)), this, e).stringify() }, Root.prototype.remove = function remove(e) { (0, i.default)("Root#remove is deprecated. Use Root#removeChild"), this.removeChild(e) }, Root.prototype.prevMap = function prevMap() { return (0, i.default)("Root#prevMap is deprecated. Use Root#source.input.map"), this.source.input.map }, Root }(r.default); t.default = o, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = _interopRequireDefault(n(874)), o = _interopRequireDefault(n(268)), a = _interopRequireDefault(n(870)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var s = function (e) { function Container() { return function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Container), function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.apply(this, arguments)) } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(Container, e), Container.prototype.push = function push(e) { return e.parent = this, this.nodes.push(e), this }, Container.prototype.each = function each(e) { this.lastEach || (this.lastEach = 0), this.indexes || (this.indexes = {}), this.lastEach += 1; var t = this.lastEach; if (this.indexes[t] = 0, this.nodes) { for (var n = void 0, r = void 0; this.indexes[t] < this.nodes.length && (n = this.indexes[t], !1 !== (r = e(this.nodes[n], n)));)this.indexes[t] += 1; return delete this.indexes[t], r } }, Container.prototype.walk = function walk(e) { return this.each(function (t, n) { var r = e(t, n); return !1 !== r && t.walk && (r = t.walk(e)), r }) }, Container.prototype.walkDecls = function walkDecls(e, t) { return t ? e instanceof RegExp ? this.walk(function (n, r) { if ("decl" === n.type && e.test(n.prop)) return t(n, r) }) : this.walk(function (n, r) { if ("decl" === n.type && n.prop === e) return t(n, r) }) : (t = e, this.walk(function (e, n) { if ("decl" === e.type) return t(e, n) })) }, Container.prototype.walkRules = function walkRules(e, t) { return t ? e instanceof RegExp ? this.walk(function (n, r) { if ("rule" === n.type && e.test(n.selector)) return t(n, r) }) : this.walk(function (n, r) { if ("rule" === n.type && n.selector === e) return t(n, r) }) : (t = e, this.walk(function (e, n) { if ("rule" === e.type) return t(e, n) })) }, Container.prototype.walkAtRules = function walkAtRules(e, t) { return t ? e instanceof RegExp ? this.walk(function (n, r) { if ("atrule" === n.type && e.test(n.name)) return t(n, r) }) : this.walk(function (n, r) { if ("atrule" === n.type && n.name === e) return t(n, r) }) : (t = e, this.walk(function (e, n) { if ("atrule" === e.type) return t(e, n) })) }, Container.prototype.walkComments = function walkComments(e) { return this.walk(function (t, n) { if ("comment" === t.type) return e(t, n) }) }, Container.prototype.append = function append() { for (var e = arguments.length, t = Array(e), n = 0; n < e; n++)t[n] = arguments[n]; var r = t, i = Array.isArray(r), o = 0; for (r = i ? r : r[Symbol.iterator](); ;) { var a; if (i) { if (o >= r.length) break; a = r[o++] } else { if ((o = r.next()).done) break; a = o.value } var s = a, l = this.normalize(s, this.last), u = Array.isArray(l), c = 0; for (l = u ? l : l[Symbol.iterator](); ;) { var d; if (u) { if (c >= l.length) break; d = l[c++] } else { if ((c = l.next()).done) break; d = c.value } var f = d; this.nodes.push(f) } } return this }, Container.prototype.prepend = function prepend() { for (var e = arguments.length, t = Array(e), n = 0; n < e; n++)t[n] = arguments[n]; var r = t = t.reverse(), i = Array.isArray(r), o = 0; for (r = i ? r : r[Symbol.iterator](); ;) { var a; if (i) { if (o >= r.length) break; a = r[o++] } else { if ((o = r.next()).done) break; a = o.value } var s = a, l = this.normalize(s, this.first, "prepend").reverse(), u = l, c = Array.isArray(u), d = 0; for (u = c ? u : u[Symbol.iterator](); ;) { var f; if (c) { if (d >= u.length) break; f = u[d++] } else { if ((d = u.next()).done) break; f = d.value } var h = f; this.nodes.unshift(h) } for (var p in this.indexes) this.indexes[p] = this.indexes[p] + l.length } return this }, Container.prototype.cleanRaws = function cleanRaws(t) { if (e.prototype.cleanRaws.call(this, t), this.nodes) { var n = this.nodes, r = Array.isArray(n), i = 0; for (n = r ? n : n[Symbol.iterator](); ;) { var o; if (r) { if (i >= n.length) break; o = n[i++] } else { if ((i = n.next()).done) break; o = i.value } o.cleanRaws(t) } } }, Container.prototype.insertBefore = function insertBefore(e, t) { var n = 0 === (e = this.index(e)) && "prepend", r = this.normalize(t, this.nodes[e], n).reverse(), i = r, o = Array.isArray(i), a = 0; for (i = o ? i : i[Symbol.iterator](); ;) { var s; if (o) { if (a >= i.length) break; s = i[a++] } else { if ((a = i.next()).done) break; s = a.value } var l = s; this.nodes.splice(e, 0, l) } var u = void 0; for (var c in this.indexes) e <= (u = this.indexes[c]) && (this.indexes[c] = u + r.length); return this }, Container.prototype.insertAfter = function insertAfter(e, t) { e = this.index(e); var n = this.normalize(t, this.nodes[e]).reverse(), r = n, i = Array.isArray(r), o = 0; for (r = i ? r : r[Symbol.iterator](); ;) { var a; if (i) { if (o >= r.length) break; a = r[o++] } else { if ((o = r.next()).done) break; a = o.value } var s = a; this.nodes.splice(e + 1, 0, s) } var l = void 0; for (var u in this.indexes) e < (l = this.indexes[u]) && (this.indexes[u] = l + n.length); return this }, Container.prototype.remove = function remove(t) { return void 0 !== t ? ((0, o.default)("Container#remove is deprecated. Use Container#removeChild"), this.removeChild(t)) : e.prototype.remove.call(this), this }, Container.prototype.removeChild = function removeChild(e) { e = this.index(e), this.nodes[e].parent = void 0, this.nodes.splice(e, 1); var t = void 0; for (var n in this.indexes) (t = this.indexes[n]) >= e && (this.indexes[n] = t - 1); return this }, Container.prototype.removeAll = function removeAll() { var e = this.nodes, t = Array.isArray(e), n = 0; for (e = t ? e : e[Symbol.iterator](); ;) { var r; if (t) { if (n >= e.length) break; r = e[n++] } else { if ((n = e.next()).done) break; r = n.value } r.parent = void 0 } return this.nodes = [], this }, Container.prototype.replaceValues = function replaceValues(e, t, n) { return n || (n = t, t = {}), this.walkDecls(function (r) { t.props && -1 === t.props.indexOf(r.prop) || t.fast && -1 === r.value.indexOf(t.fast) || (r.value = r.value.replace(e, n)) }), this }, Container.prototype.every = function every(e) { return this.nodes.every(e) }, Container.prototype.some = function some(e) { return this.nodes.some(e) }, Container.prototype.index = function index(e) { return "number" == typeof e ? e : this.nodes.indexOf(e) }, Container.prototype.normalize = function normalize(e, t) { var r = this; if ("string" == typeof e) e = n(871)(e).nodes; else if (!Array.isArray(e)) if ("root" === e.type) e = e.nodes; else if (e.type) e = [e]; else if (e.prop) { if (void 0 === e.value) throw new Error("Value field is missed in node creation"); e = [new i.default(e)] } else if (e.selector) { e = [new (n(598))(e)] } else if (e.name) { e = [new (n(599))(e)] } else { if (!e.text) throw new Error("Unknown node type in node creation"); e = [new a.default(e)] } return e.map(function (e) { return void 0 === e.raws && (e = r.rebuild(e)), e.parent && (e = e.clone()), void 0 === e.raws.before && t && void 0 !== t.raws.before && (e.raws.before = t.raws.before.replace(/[^\s]/g, "")), e.parent = r, e }) }, Container.prototype.rebuild = function rebuild(e, t) { var r = this, o = void 0; if ("root" === e.type) { var s = n(868); o = new s } else if ("atrule" === e.type) { var l = n(599); o = new l } else if ("rule" === e.type) { var u = n(598); o = new u } else "decl" === e.type ? o = new i.default : "comment" === e.type && (o = new a.default); for (var c in e) "nodes" === c ? o.nodes = e.nodes.map(function (e) { return r.rebuild(e, o) }) : "parent" === c && t ? o.parent = t : e.hasOwnProperty(c) && (o[c] = e[c]); return o }, Container.prototype.eachInside = function eachInside(e) { return (0, o.default)("Container#eachInside is deprecated. Use Container#walk instead."), this.walk(e) }, Container.prototype.eachDecl = function eachDecl(e, t) { return (0, o.default)("Container#eachDecl is deprecated. Use Container#walkDecls instead."), this.walkDecls(e, t) }, Container.prototype.eachRule = function eachRule(e, t) { return (0, o.default)("Container#eachRule is deprecated. Use Container#walkRules instead."), this.walkRules(e, t) }, Container.prototype.eachAtRule = function eachAtRule(e, t) { return (0, o.default)("Container#eachAtRule is deprecated. Use Container#walkAtRules instead."), this.walkAtRules(e, t) }, Container.prototype.eachComment = function eachComment(e) { return (0, o.default)("Container#eachComment is deprecated. Use Container#walkComments instead."), this.walkComments(e) }, r(Container, [{ key: "first", get: function get() { if (this.nodes) return this.nodes[0] } }, { key: "last", get: function get() { if (this.nodes) return this.nodes[this.nodes.length - 1] } }, { key: "semicolon", get: function get() { return (0, o.default)("Node#semicolon is deprecated. Use Node#raws.semicolon"), this.raws.semicolon }, set: function set(e) { (0, o.default)("Node#semicolon is deprecated. Use Node#raws.semicolon"), this.raws.semicolon = e } }, { key: "after", get: function get() { return (0, o.default)("Node#after is deprecated. Use Node#raws.after"), this.raws.after }, set: function set(e) { (0, o.default)("Node#after is deprecated. Use Node#raws.after"), this.raws.after = e } }]), Container }(_interopRequireDefault(n(873)).default); t.default = s, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = _interopRequireDefault(n(268)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var o = function (e) { function Comment(t) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Comment); var n = function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.call(this, t)); return n.type = "comment", n } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(Comment, e), r(Comment, [{ key: "left", get: function get() { return (0, i.default)("Comment#left was deprecated. Use Comment#raws.left"), this.raws.left }, set: function set(e) { (0, i.default)("Comment#left was deprecated. Use Comment#raws.left"), this.raws.left = e } }, { key: "right", get: function get() { return (0, i.default)("Comment#right was deprecated. Use Comment#raws.right"), this.raws.right }, set: function set(e) { (0, i.default)("Comment#right was deprecated. Use Comment#raws.right"), this.raws.right = e } }]), Comment }(_interopRequireDefault(n(873)).default); t.default = o, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0, t.default = function parse(e, t) { if (t && t.safe) throw new Error('Option safe was removed. Use parser: require("postcss-safe-parser")'); var n = new i.default(e, t), o = new r.default(n); return o.tokenize(), o.loop(), o.root }; var r = _interopRequireDefault(n(3038)), i = _interopRequireDefault(n(3036)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0, t.default = function stringify(e, t) { new r.default(t).stringify(e) }; var r = function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } }(n(1352)); e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = Object.assign || function (e) { for (var t = 1; t < arguments.length; t++) { var n = arguments[t]; for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]) } return e }, i = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol ? "symbol" : typeof e }, a = _interopRequireDefault(n(1354)), s = _interopRequireDefault(n(1352)), l = _interopRequireDefault(n(872)), u = _interopRequireDefault(n(268)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var c = function () { function Node() { var e = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0]; for (var t in function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Node), this.raws = {}, e) this[t] = e[t] } return Node.prototype.error = function error(e) { var t = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1]; if (this.source) { var n = this.positionBy(t); return this.source.input.error(e, n.line, n.column, t) } return new a.default(e) }, Node.prototype.warn = function warn(e, t, n) { return e.warn(t, r({ node: this }, n)) }, Node.prototype.remove = function remove() { return this.parent && this.parent.removeChild(this), this.parent = void 0, this }, Node.prototype.toString = function toString() { var e = arguments.length <= 0 || void 0 === arguments[0] ? l.default : arguments[0]; e.stringify && (e = e.stringify); var t = ""; return e(this, function (e) { t += e }), t }, Node.prototype.clone = function clone() { var e = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0], t = function cloneNode(e, t) { var n = new e.constructor; for (var r in e) if (e.hasOwnProperty(r)) { var i = e[r], a = void 0 === i ? "undefined" : o(i); "parent" === r && "object" === a ? t && (n[r] = t) : "source" === r ? n[r] = i : i instanceof Array ? n[r] = i.map(function (e) { return cloneNode(e, n) }) : "before" !== r && "after" !== r && "between" !== r && "semicolon" !== r && ("object" === a && null !== i && (i = cloneNode(i)), n[r] = i) } return n }(this); for (var n in e) t[n] = e[n]; return t }, Node.prototype.cloneBefore = function cloneBefore() { var e = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0], t = this.clone(e); return this.parent.insertBefore(this, t), t }, Node.prototype.cloneAfter = function cloneAfter() { var e = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0], t = this.clone(e); return this.parent.insertAfter(this, t), t }, Node.prototype.replaceWith = function replaceWith() { if (this.parent) { for (var e = arguments.length, t = Array(e), n = 0; n < e; n++)t[n] = arguments[n]; var r = t, i = Array.isArray(r), o = 0; for (r = i ? r : r[Symbol.iterator](); ;) { var a; if (i) { if (o >= r.length) break; a = r[o++] } else { if ((o = r.next()).done) break; a = o.value } var s = a; this.parent.insertBefore(this, s) } this.remove() } return this }, Node.prototype.moveTo = function moveTo(e) { return this.cleanRaws(this.root() === e.root()), this.remove(), e.append(this), this }, Node.prototype.moveBefore = function moveBefore(e) { return this.cleanRaws(this.root() === e.root()), this.remove(), e.parent.insertBefore(e, this), this }, Node.prototype.moveAfter = function moveAfter(e) { return this.cleanRaws(this.root() === e.root()), this.remove(), e.parent.insertAfter(e, this), this }, Node.prototype.next = function next() { var e = this.parent.index(this); return this.parent.nodes[e + 1] }, Node.prototype.prev = function prev() { var e = this.parent.index(this); return this.parent.nodes[e - 1] }, Node.prototype.toJSON = function toJSON() { var e = {}; for (var t in this) if (this.hasOwnProperty(t) && "parent" !== t) { var n = this[t]; n instanceof Array ? e[t] = n.map(function (e) { return "object" === (void 0 === e ? "undefined" : o(e)) && e.toJSON ? e.toJSON() : e }) : "object" === (void 0 === n ? "undefined" : o(n)) && n.toJSON ? e[t] = n.toJSON() : e[t] = n } return e }, Node.prototype.raw = function raw(e, t) { return (new s.default).raw(this, e, t) }, Node.prototype.root = function root() { for (var e = this; e.parent;)e = e.parent; return e }, Node.prototype.cleanRaws = function cleanRaws(e) { delete this.raws.before, delete this.raws.after, e || delete this.raws.between }, Node.prototype.positionInside = function positionInside(e) { for (var t = this.toString(), n = this.source.start.column, r = this.source.start.line, i = 0; i < e; i++)"\n" === t[i] ? (n = 1, r += 1) : n += 1; return { line: r, column: n } }, Node.prototype.positionBy = function positionBy(e) { var t = this.source.start; if (e.index) t = this.positionInside(e.index); else if (e.word) { var n = this.toString().indexOf(e.word); -1 !== n && (t = this.positionInside(n)) } return t }, Node.prototype.removeSelf = function removeSelf() { return (0, u.default)("Node#removeSelf is deprecated. Use Node#remove."), this.remove() }, Node.prototype.replace = function replace(e) { return (0, u.default)("Node#replace is deprecated. Use Node#replaceWith"), this.replaceWith(e) }, Node.prototype.style = function style(e, t) { return (0, u.default)("Node#style() is deprecated. Use Node#raw()"), this.raw(e, t) }, Node.prototype.cleanStyles = function cleanStyles(e) { return (0, u.default)("Node#cleanStyles() is deprecated. Use Node#cleanRaws()"), this.cleanRaws(e) }, i(Node, [{ key: "before", get: function get() { return (0, u.default)("Node#before is deprecated. Use Node#raws.before"), this.raws.before }, set: function set(e) { (0, u.default)("Node#before is deprecated. Use Node#raws.before"), this.raws.before = e } }, { key: "between", get: function get() { return (0, u.default)("Node#between is deprecated. Use Node#raws.between"), this.raws.between }, set: function set(e) { (0, u.default)("Node#between is deprecated. Use Node#raws.between"), this.raws.between = e } }]), Node }(); t.default = c, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = _interopRequireDefault(n(268)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var o = function (e) { function Declaration(t) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Declaration); var n = function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.call(this, t)); return n.type = "decl", n } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(Declaration, e), r(Declaration, [{ key: "_value", get: function get() { return (0, i.default)("Node#_value was deprecated. Use Node#raws.value"), this.raws.value }, set: function set(e) { (0, i.default)("Node#_value was deprecated. Use Node#raws.value"), this.raws.value = e } }, { key: "_important", get: function get() { return (0, i.default)("Node#_important was deprecated. Use Node#raws.important"), this.raws.important }, set: function set(e) { (0, i.default)("Node#_important was deprecated. Use Node#raws.important"), this.raws.important = e } }]), Declaration }(_interopRequireDefault(n(873)).default); t.default = o, e.exports = t.default }, function(e, t, n) { var r = n(5), i = n(0), o = n(1363); e.exports = function parseWindshaftErrors(e, t) { if ((e = e || {}).responseJSON && (e = e.responseJSON), e.errors_with_context) return r(i).call(i, e.errors_with_context, function (e) { return new o(e, t) }); if (e.errors) { var n = "string" == typeof e.errors[0] ? { message: e.errors[0] } : e.errors[0]; return [new o(n, t)] } return e.statusText ? [new o({ message: e.statusText }, t, "ajax")] : [] } }, function(e, t, n) { var r = n(6), i = n(0), o = function Rule(e) { this._rule = e }; o.prototype.matchesAnyProperty = function (e) { return this._matches(this._rule.prop, e) }, o.prototype.matchesAnyMapping = function (e) { return this._matches(this._rule.mapping, e) }, o.prototype._matches = function (e, t) { return i.isString(t) && (t = [t]), i.contains(t, e) }, o.prototype.getBucketsWithRangeFilter = function () { return this._getBucketsByFilterType("range") }, o.prototype.getBucketsWithCategoryFilter = function () { return this._getBucketsByFilterType("category") }, o.prototype.getBucketsWithDefaultFilter = function () { return this._getBucketsByFilterType("default") }, o.prototype._getBucketsByFilterType = function (e) { return this._rule ? i.select(this._rule.buckets, function (t) { return r(t).type === e }) : [] }, o.prototype.getColumn = function () { return this._rule.column }, o.prototype.getMapping = function () { return this._rule.mapping }, o.prototype.getProperty = function () { return this._rule.prop }, o.prototype.getFilterAvg = function () { return this._rule.stats.filter_avg }, e.exports = o }, function(e, t, n) { "use strict"; var r = n(1365), i = n(3122); e.exports.getVersion = r.getVersion, e.exports.versions = r.versions, e.exports.AnalysisGraph = i }, function(e, t, n) { "use strict"; var r = n(247), i = n(335), o = n(191), a = n(269), s = n(300); e.exports = function (e) { var t = o.get(e); t && (t.negativeScrollAdjustment = t.isNegativeScroll ? e.scrollWidth - e.clientWidth : 0, i.css(t.scrollbarXRail, "display", "block"), i.css(t.scrollbarYRail, "display", "block"), t.railXMarginWidth = r.toInt(i.css(t.scrollbarXRail, "marginLeft")) + r.toInt(i.css(t.scrollbarXRail, "marginRight")), t.railYMarginHeight = r.toInt(i.css(t.scrollbarYRail, "marginTop")) + r.toInt(i.css(t.scrollbarYRail, "marginBottom")), i.css(t.scrollbarXRail, "display", "none"), i.css(t.scrollbarYRail, "display", "none"), a(e), s(e, "top", e.scrollTop), s(e, "left", e.scrollLeft), i.css(t.scrollbarXRail, "display", ""), i.css(t.scrollbarYRail, "display", "")) } }, function(e, t, n) { n(24), n(32); var r = n(36), i = n(0), o = n(3), a = n(192), s = o.Model.extend({ defaults: { offset: [28, 0], maxHeight: 180, autoPan: !0, template_type: "mustache", content: "", alternative_names: {}, visibility: !1 }, DEFAULT_TEMPLATE: a, TEMPLATE_ATTRIBUTES: ["template", "template_type", "alternative_names", "width", "maxHeight", "offset"], initialize: function initialize(e) { e = e || {}, this._fields = new o.Collection(e.fields || []), this.unset("fields", { silent: !0 }), this._hasTemplate() || this.set({ template: this.DEFAULT_TEMPLATE, template_type: "underscore" }) }, _hasTemplate: function _hasTemplate() { var e; return this.get("template") && r(this.get("template")) && r(e = this.get("template")).call(e) }, updateContent: function updateContent(e, t) { t = t || {}, t = i.pick(t, "showEmptyFields"); var n = this._fields.toJSON(); this.set("content", s.contentForFields(e, n, t)) }, setInfowindowTemplate: function setInfowindowTemplate(e) { var t = i.pick(e.toJSON(), this.TEMPLATE_ATTRIBUTES); t = i.pick(t, i.identity), this.set(i.clone(t)), this._fields.reset(e.fields.toJSON()), this._infowindowTemplateModel = e }, setLoading: function setLoading() { return this.set({ content: { fields: [{ type: "loading", title: "loading", value: "\u2026" }] } }), this }, setError: function setError() { return this.set({ content: { fields: [{ title: null, alternative_name: null, value: "There has been an error...", index: null, type: "error" }], data: {} } }), this }, setLatLng: function setLatLng(e) { this.set("latlng", e) }, show: function show() { this.set("visibility", !0) }, hide: function hide() { this.set("visibility", !1) }, isVisible: function isVisible() { return !!this.get("visibility") }, setCurrentFeatureId: function setCurrentFeatureId(e) { this.set("currentFeatureId", e) }, unsetCurrentFeatureId: function unsetCurrentFeatureId() { this.unset("currentFeatureId") }, getCurrentFeatureId: function getCurrentFeatureId(e) { return this.get("currentFeatureId") }, getAlternativeName: function getAlternativeName(e) { return this.get("alternative_names") && this.get("alternative_names")[e] }, hasInfowindowTemplate: function hasInfowindowTemplate(e) { return this._infowindowTemplateModel && this._infowindowTemplateModel === e } }, { contentForFields: function contentForFields(e, t, n) { n = n || {}; for (var r = [], i = 0; i < t.length; ++i) { var o = t[i], a = e[o.name]; (n.showEmptyFields || void 0 !== a && null !== a) && r.push({ name: o.name, title: o.title ? o.name : null, value: void 0 !== a && null !== a ? a : null, index: i }) } return 0 === r.length && r.push({ title: null, value: "No data available", index: 0, type: "empty" }), { fields: r, data: e } } }); e.exports = s }, function(e, t, n) { var r = n(5), i = n(0); e.exports = { convertToGMapsCoordinates: function convertToGMapsCoordinates(e) { return r(i).call(i, e, function (e) { return { lat: e[0], lng: e[1] } }) } } }, function(e, t, n) { var r = n(152).extend({ initialize: function initialize(e) { if (!e.model) throw new Error("model is required"); if (!e.mapView) throw new Error("mapView is required"); this.mapView = e.mapView, this.model.on("remove", this._onGeometryRemoved, this) }, _onGeometryRemoved: function _onGeometryRemoved() { this.clean() } }); e.exports = r }, function(e, t, n) { var r = n(5), i = n(0), o = n(3), a = n(885), s = a.extend({ initialize: function initialize(e, t) { a.prototype.initialize.apply(this, arguments), t = t || {}, this.geometries = new o.Collection, t.latlngs && this.geometries.reset(this._createGeometries(t.latlngs)), this.geometries.on("change", this._triggerChangeEvent, this), this.geometries.on("reset", this._onGeometriesReset, this) }, _createGeometries: function _createGeometries(e) { return r(i).call(i, e, this._createGeometry, this) }, _createGeometry: function _createGeometry(e) { throw new Error("subclasses of MultiGeometryBase must implement _createGeometry") }, update: function update(e) { }, remove: function remove() { a.prototype.remove.apply(this), this._removeGeometries() }, isComplete: function isComplete() { return this.geometries.all(function (e) { return e.isComplete() }) }, _onGeometriesReset: function _onGeometriesReset(e, t) { this._removeGeometries(t.previousModels), this._triggerChangeEvent() }, _removeGeometries: function _removeGeometries(e) { e = e || this.geometries.models, i.each(e, function (e) { e.remove() }, this) } }); e.exports = s }, function(e, t, n) { var r = n(302), i = n(1379).extend({ defaults: { editable: !1, expandable: !1, lineColor: "#397dba", lineWeight: "4", lineOpacity: "0.5" }, MIN_NUMBER_OF_VERTICES: 3, isComplete: function isComplete() { return this.points.length >= this.MIN_NUMBER_OF_VERTICES }, getCoordinatesForMiddlePoints: function getCoordinatesForMiddlePoints() { var e = this.getCoordinates(); return e.push(e[0]), e }, toGeoJSON: function toGeoJSON() { return { type: "Polygon", coordinates: [r.convertLatLngsToGeoJSONPolygonCoords(this.getCoordinates())] } }, getCoordinatesFromGeoJSONCoords: function getCoordinatesFromGeoJSONCoords(e) { return r.getPolygonLatLngsFromGeoJSONCoords(e) } }); e.exports = i }, function(e, t, n) { var r = n(302), i = n(1379).extend({ defaults: { editable: !1, expandable: !1, lineColor: "#397dba", lineWeight: "4", lineOpacity: "0.5" }, MIN_NUMBER_OF_VERTICES: 2, isComplete: function isComplete() { return this.points.length >= this.MIN_NUMBER_OF_VERTICES }, toGeoJSON: function toGeoJSON() { return { type: "LineString", coordinates: r.convertLatLngsToGeoJSONPolylineCoords(this.getCoordinates()) } }, getCoordinatesFromGeoJSONCoords: function getCoordinatesFromGeoJSONCoords(e) { return r.getPolylineLatLngsFromGeoJSONCoords(e) } }); e.exports = i }, function(e, t, n) { var r = n(0), i = n(144).extend({ update: function update() { throw new Error("subclasses of GeometryBase must implement update") }, remove: function remove() { this.trigger("remove") }, isComplete: function isComplete() { throw new Error("subclasses of GeometryBase must implement isComplete") }, isEditable: function isEditable() { return !!this.get("editable") }, isExpandable: function isExpandable() { return !!this.get("expandable") }, toGeoJSON: function toGeoJSON() { throw new Error("subclasses of GeometryBase must implement toGeoJSON") }, setCoordinatesFromGeoJSON: function setCoordinatesFromGeoJSON(e) { var t = this.getCoordinatesFromGeoJSONCoords(e); r.isEqual(t, this.getCoordinates()) || this.setCoordinates(t) }, getCoordinatesFromGeoJSONCoords: function getCoordinatesFromGeoJSONCoords(e) { throw new Error("subclasses of GeometryBase must implement getCoordinatesFromGeoJSONCoords") }, _triggerChangeEvent: function _triggerChangeEvent() { this.trigger("change", this) } }); e.exports = i }, function(e, t) { !function (e) { "use strict"; if (!e.fetch) { var t = { searchParams: "URLSearchParams" in e, iterable: "Symbol" in e && "iterator" in Symbol, blob: "FileReader" in e && "Blob" in e && function () { try { return new Blob, !0 } catch (e) { return !1 } }(), formData: "FormData" in e, arrayBuffer: "ArrayBuffer" in e }; if (t.arrayBuffer) var n = ["[object Int8Array]", "[object Uint8Array]", "[object Uint8ClampedArray]", "[object Int16Array]", "[object Uint16Array]", "[object Int32Array]", "[object Uint32Array]", "[object Float32Array]", "[object Float64Array]"], r = function (e) { return e && DataView.prototype.isPrototypeOf(e) }, i = ArrayBuffer.isView || function (e) { return e && n.indexOf(Object.prototype.toString.call(e)) > -1 }; Headers.prototype.append = function (e, t) { e = normalizeName(e), t = normalizeValue(t); var n = this.map[e]; this.map[e] = n ? n + "," + t : t }, Headers.prototype.delete = function (e) { delete this.map[normalizeName(e)] }, Headers.prototype.get = function (e) { return e = normalizeName(e), this.has(e) ? this.map[e] : null }, Headers.prototype.has = function (e) { return this.map.hasOwnProperty(normalizeName(e)) }, Headers.prototype.set = function (e, t) { this.map[normalizeName(e)] = normalizeValue(t) }, Headers.prototype.forEach = function (e, t) { for (var n in this.map) this.map.hasOwnProperty(n) && e.call(t, this.map[n], n, this) }, Headers.prototype.keys = function () { var e = []; return this.forEach(function (t, n) { e.push(n) }), iteratorFor(e) }, Headers.prototype.values = function () { var e = []; return this.forEach(function (t) { e.push(t) }), iteratorFor(e) }, Headers.prototype.entries = function () { var e = []; return this.forEach(function (t, n) { e.push([n, t]) }), iteratorFor(e) }, t.iterable && (Headers.prototype[Symbol.iterator] = Headers.prototype.entries); var o = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"]; Request.prototype.clone = function () { return new Request(this, { body: this._bodyInit }) }, Body.call(Request.prototype), Body.call(Response.prototype), Response.prototype.clone = function () { return new Response(this._bodyInit, { status: this.status, statusText: this.statusText, headers: new Headers(this.headers), url: this.url }) }, Response.error = function () { var e = new Response(null, { status: 0, statusText: "" }); return e.type = "error", e }; var a = [301, 302, 303, 307, 308]; Response.redirect = function (e, t) { if (-1 === a.indexOf(t)) throw new RangeError("Invalid status code"); return new Response(null, { status: t, headers: { location: e } }) }, e.Headers = Headers, e.Request = Request, e.Response = Response, e.fetch = function (e, n) { return new Promise(function (r, i) { var o = new Request(e, n), a = new XMLHttpRequest; a.onload = function () { var e = { status: a.status, statusText: a.statusText, headers: function parseHeaders(e) { var t = new Headers; return e.split(/\r?\n/).forEach(function (e) { var n = e.split(":"), r = n.shift().trim(); if (r) { var i = n.join(":").trim(); t.append(r, i) } }), t }(a.getAllResponseHeaders() || "") }; e.url = "responseURL" in a ? a.responseURL : e.headers.get("X-Request-URL"); var t = "response" in a ? a.response : a.responseText; r(new Response(t, e)) }, a.onerror = function () { i(new TypeError("Network request failed")) }, a.ontimeout = function () { i(new TypeError("Network request failed")) }, a.open(o.method, o.url, !0), "include" === o.credentials && (a.withCredentials = !0), "responseType" in a && t.blob && (a.responseType = "blob"), o.headers.forEach(function (e, t) { a.setRequestHeader(t, e) }), a.send(void 0 === o._bodyInit ? null : o._bodyInit) }) }, e.fetch.polyfill = !0 } function normalizeName(e) { if ("string" != typeof e && (e = String(e)), /[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e)) throw new TypeError("Invalid character in header field name"); return e.toLowerCase() } function normalizeValue(e) { return "string" != typeof e && (e = String(e)), e } function iteratorFor(e) { var n = { next: function () { var t = e.shift(); return { done: void 0 === t, value: t } } }; return t.iterable && (n[Symbol.iterator] = function () { return n }), n } function Headers(e) { this.map = {}, e instanceof Headers ? e.forEach(function (e, t) { this.append(t, e) }, this) : Array.isArray(e) ? e.forEach(function (e) { this.append(e[0], e[1]) }, this) : e && Object.getOwnPropertyNames(e).forEach(function (t) { this.append(t, e[t]) }, this) } function consumed(e) { if (e.bodyUsed) return Promise.reject(new TypeError("Already read")); e.bodyUsed = !0 } function fileReaderReady(e) { return new Promise(function (t, n) { e.onload = function () { t(e.result) }, e.onerror = function () { n(e.error) } }) } function readBlobAsArrayBuffer(e) { var t = new FileReader, n = fileReaderReady(t); return t.readAsArrayBuffer(e), n } function bufferClone(e) { if (e.slice) return e.slice(0); var t = new Uint8Array(e.byteLength); return t.set(new Uint8Array(e)), t.buffer } function Body() { return this.bodyUsed = !1, this._initBody = function (e) { if (this._bodyInit = e, e) if ("string" == typeof e) this._bodyText = e; else if (t.blob && Blob.prototype.isPrototypeOf(e)) this._bodyBlob = e; else if (t.formData && FormData.prototype.isPrototypeOf(e)) this._bodyFormData = e; else if (t.searchParams && URLSearchParams.prototype.isPrototypeOf(e)) this._bodyText = e.toString(); else if (t.arrayBuffer && t.blob && r(e)) this._bodyArrayBuffer = bufferClone(e.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer]); else { if (!t.arrayBuffer || !ArrayBuffer.prototype.isPrototypeOf(e) && !i(e)) throw new Error("unsupported BodyInit type"); this._bodyArrayBuffer = bufferClone(e) } else this._bodyText = ""; this.headers.get("content-type") || ("string" == typeof e ? this.headers.set("content-type", "text/plain;charset=UTF-8") : this._bodyBlob && this._bodyBlob.type ? this.headers.set("content-type", this._bodyBlob.type) : t.searchParams && URLSearchParams.prototype.isPrototypeOf(e) && this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8")) }, t.blob && (this.blob = function () { var e = consumed(this); if (e) return e; if (this._bodyBlob) return Promise.resolve(this._bodyBlob); if (this._bodyArrayBuffer) return Promise.resolve(new Blob([this._bodyArrayBuffer])); if (this._bodyFormData) throw new Error("could not read FormData body as blob"); return Promise.resolve(new Blob([this._bodyText])) }, this.arrayBuffer = function () { return this._bodyArrayBuffer ? consumed(this) || Promise.resolve(this._bodyArrayBuffer) : this.blob().then(readBlobAsArrayBuffer) }), this.text = function () { var e = consumed(this); if (e) return e; if (this._bodyBlob) return function readBlobAsText(e) { var t = new FileReader, n = fileReaderReady(t); return t.readAsText(e), n }(this._bodyBlob); if (this._bodyArrayBuffer) return Promise.resolve(function readArrayBufferAsText(e) { for (var t = new Uint8Array(e), n = new Array(t.length), r = 0; r < t.length; r++)n[r] = String.fromCharCode(t[r]); return n.join("") }(this._bodyArrayBuffer)); if (this._bodyFormData) throw new Error("could not read FormData body as text"); return Promise.resolve(this._bodyText) }, t.formData && (this.formData = function () { return this.text().then(decode) }), this.json = function () { return this.text().then(JSON.parse) }, this } function Request(e, t) { var n = (t = t || {}).body; if (e instanceof Request) { if (e.bodyUsed) throw new TypeError("Already read"); this.url = e.url, this.credentials = e.credentials, t.headers || (this.headers = new Headers(e.headers)), this.method = e.method, this.mode = e.mode, n || null == e._bodyInit || (n = e._bodyInit, e.bodyUsed = !0) } else this.url = String(e); if (this.credentials = t.credentials || this.credentials || "omit", !t.headers && this.headers || (this.headers = new Headers(t.headers)), this.method = function normalizeMethod(e) { var t = e.toUpperCase(); return o.indexOf(t) > -1 ? t : e }(t.method || this.method || "GET"), this.mode = t.mode || this.mode || null, this.referrer = null, ("GET" === this.method || "HEAD" === this.method) && n) throw new TypeError("Body not allowed for GET or HEAD requests"); this._initBody(n) } function decode(e) { var t = new FormData; return e.trim().split("&").forEach(function (e) { if (e) { var n = e.split("="), r = n.shift().replace(/\+/g, " "), i = n.join("=").replace(/\+/g, " "); t.append(decodeURIComponent(r), decodeURIComponent(i)) } }), t } function Response(e, t) { t || (t = {}), this.type = "default", this.status = "status" in t ? t.status : 200, this.ok = this.status >= 200 && this.status < 300, this.statusText = "statusText" in t ? t.statusText : "OK", this.headers = new Headers(t.headers), this.url = t.url || "", this._initBody(e) } }("undefined" != typeof self ? self : this) },, function(e, t, n) { "use strict"; var r = n(238), i = n(638), o = n(145); e.exports = function fill(e) { for (var t = r(this), n = o(t.length), a = arguments.length, s = i(a > 1 ? arguments[1] : void 0, n), l = a > 2 ? arguments[2] : void 0, u = void 0 === l ? n : i(l, n); u > s;)t[s++] = e; return t } }, function(e, t, n) { var r = n(618); e.exports = function isSameWeek(e, t, n) { var i = r(e, n), o = r(t, n); return i.getTime() === o.getTime() } }, function(e, t, n) { var r = n(22), i = n(337), o = n(438), a = 6048e5; e.exports = function getISOWeek(e) { var t = r(e), n = i(t).getTime() - o(t).getTime(); return Math.round(n / a) + 1 } }, function(e, t, n) { var r = n(22); e.exports = function endOfDay(e) { var t = r(e); return t.setHours(23, 59, 59, 999), t } }, function(e, t, n) { var r = n(3308), i = n(3307); e.exports = { distanceInWords: r(), format: i() } }, function(e, t, n) { var r = n(615); e.exports = function differenceInSeconds(e, t) { var n = r(e, t) / 1e3; return n > 0 ? Math.floor(n) : Math.ceil(n) } }, function(e, t, n) { var r = n(22), i = n(1451), o = n(437); e.exports = function differenceInMonths(e, t) { var n = r(e), a = r(t), s = o(n, a), l = Math.abs(i(n, a)); return n.setMonth(n.getMonth() - s * l), s * (l - (o(n, a) === -s)) } }, function(e, t, n) { var r = n(22); e.exports = function compareDesc(e, t) { var n = r(e).getTime(), i = r(t).getTime(); return n > i ? -1 : n < i ? 1 : 0 } }, function(e, t, n) { var r = n(440); e.exports = function addWeeks(e, t) { var n = Number(t); return r(e, 7 * n) } }, function(e, t, n) { var r = n(22); e.exports = function getDaysInMonth(e) { var t = r(e), n = t.getFullYear(), i = t.getMonth(), o = new Date(0); return o.setFullYear(n, i + 1, 0), o.setHours(0, 0, 0, 0), o.getDate() } }, function(e, t) { e.exports = function isDate(e) { return e instanceof Date } }, function(e, t, n) { var r = n(454), i = n(129), o = n(212), a = n(222).f, s = n(629), l = n(1468), u = s("meta"), c = 0, d = Object.isExtensible || function () { return !0 }, f = function (e) { a(e, u, { value: { objectID: "O" + ++c, weakData: {} } }) }, h = e.exports = { REQUIRED: !1, fastKey: function (e, t) { if (!i(e)) return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e; if (!o(e, u)) { if (!d(e)) return "F"; if (!t) return "E"; f(e) } return e[u].objectID }, getWeakData: function (e, t) { if (!o(e, u)) { if (!d(e)) return !0; if (!t) return !1; f(e) } return e[u].weakData }, onFreeze: function (e) { return l && h.REQUIRED && d(e) && !o(e, u) && f(e), e } }; r[u] = !0 }, function(e, t, n) { var r = n(1470), i = n(3430), o = n(1472); e.exports = function _unsupportedIterableToArray(e, t) { var n; if (e) { if ("string" == typeof e) return o(e, t); var a = i(n = Object.prototype.toString.call(e)).call(n, 8, -1); return "Object" === a && e.constructor && (a = e.constructor.name), "Map" === a || "Set" === a ? r(a) : "Arguments" === a || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a) ? o(e, t) : void 0 } } }, function(e, t, n) { var r, i, o, a = n(119), s = n(67), l = n(345), u = n(343), c = n(1527), d = n(919), f = n(1491), h = a.location, p = a.setImmediate, m = a.clearImmediate, g = a.process, v = a.MessageChannel, y = a.Dispatch, _ = 0, b = {}, w = function (e) { if (b.hasOwnProperty(e)) { var t = b[e]; delete b[e], t() } }, x = function (e) { return function () { w(e) } }, C = function (e) { w(e.data) }, S = function (e) { a.postMessage(e + "", h.protocol + "//" + h.host) }; p && m || (p = function setImmediate(e) { for (var t = [], n = 1; arguments.length > n;)t.push(arguments[n++]); return b[++_] = function () { ("function" == typeof e ? e : Function(e)).apply(void 0, t) }, r(_), _ }, m = function clearImmediate(e) { delete b[e] }, "process" == l(g) ? r = function (e) { g.nextTick(x(e)) } : y && y.now ? r = function (e) { y.now(x(e)) } : v && !f ? (o = (i = new v).port2, i.port1.onmessage = C, r = u(o.postMessage, o, 1)) : !a.addEventListener || "function" != typeof postMessage || a.importScripts || s(S) ? r = "onreadystatechange" in d("script") ? function (e) { c.appendChild(d("script")).onreadystatechange = function () { c.removeChild(this), w(e) } } : function (e) { setTimeout(x(e), 0) } : (r = S, a.addEventListener("message", C, !1))), e.exports = { set: p, clear: m } }, function(e, t, n) { var r = n(381); e.exports = function (e, t, n) { for (var i in t) n && n.unsafe && e[i] ? e[i] = t[i] : r(e, i, t[i], n); return e } }, function(e, t, n) { var r = n(114), i = n(444), o = r("iterator"), a = Array.prototype; e.exports = function (e) { return void 0 !== e && (i.Array === e || a[o] === e) } }, function(e, t, n) { var r = n(213); e.exports = function (e, t, n) { for (var i in t) r(e, i, t[i], n); return e } }, function(e, t, n) { var r = n(1534), i = n(917).concat("length", "prototype"); t.f = Object.getOwnPropertyNames || function getOwnPropertyNames(e) { return r(e, i) } }, function(e, t, n) { e.exports = n(3505) }, function(e, t, n) { var r = n(211), i = n(3537); e.exports = Object.setPrototypeOf || ("__proto__" in {} ? function () { var e, t = !1, n = {}; try { (e = Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set).call(n, []), t = n instanceof Array } catch (e) { } return function setPrototypeOf(n, o) { return r(n), i(o), t ? e.call(n, o) : n.__proto__ = o, n } }() : void 0) }, function(e, t, n) { var r = {}; r[n(118)("toStringTag")] = "z", e.exports = "[object z]" === String(r) }, function(e, t, n) { "use strict"; var r = n(34), i = n(1525), o = n(626), a = n(907), s = n(305), l = n(236), u = n(381), c = n(118), d = n(307), f = n(340), h = n(1524), p = h.IteratorPrototype, m = h.BUGGY_SAFARI_ITERATORS, g = c("iterator"), v = function () { return this }; e.exports = function (e, t, n, c, h, y, _) { i(n, t, c); var b, w, x, C = function (e) { if (e === h && M) return M; if (!m && e in T) return T[e]; switch (e) { case "keys": return function keys() { return new n(this, e) }; case "values": return function values() { return new n(this, e) }; case "entries": return function entries() { return new n(this, e) } }return function () { return new n(this) } }, S = t + " Iterator", k = !1, T = e.prototype, L = T[g] || T["@@iterator"] || h && T[h], M = !m && L || C(h), E = "Array" == t && T.entries || L; if (E && (b = o(E.call(new e)), p !== Object.prototype && b.next && (d || o(b) === p || (a ? a(b, p) : "function" != typeof b[g] && l(b, g, v)), s(b, S, !0, !0), d && (f[S] = v))), "values" == h && L && "values" !== L.name && (k = !0, M = function values() { return L.call(this) }), d && !_ || T[g] === M || l(T, g, M), f[t] = M, h) if (w = { values: C("values"), keys: y ? M : C("keys"), entries: C("entries") }, _) for (x in w) !m && !k && x in T || u(T, x, w[x]); else r({ target: t, proto: !0, forced: m || k }, w); return w } }, function(e, t, n) { var r = n(129), i = n(382), o = n(118)("species"); e.exports = function (e, t) { var n; return i(e) && ("function" != typeof (n = e.constructor) || n !== Array && !i(n.prototype) ? r(n) && null === (n = n[o]) && (n = void 0) : n = void 0), new (void 0 === n ? Array : n)(0 === t ? 0 : t) } }, function(e, t, n) { var r = n(344), i = "[" + n(628) + "]", o = RegExp("^" + i + i + "*"), a = RegExp(i + i + "*$"), s = function (e) { return function (t) { var n = String(r(t)); return 1 & e && (n = n.replace(o, "")), 2 & e && (n = n.replace(a, "")), n } }; e.exports = { start: s(1), end: s(2), trim: s(3) } }, function(e, t, n) { var r = n(234); e.exports = r("navigator", "userAgent") || "" }, function(e, t, n) { var r, i, o = n(119), a = n(912), s = o.process, l = s && s.versions, u = l && l.v8; u ? i = (r = u.split("."))[0] + r[1] : a && (!(r = a.match(/Edge\/(\d+)/)) || r[1] >= 74) && (r = a.match(/Chrome\/(\d+)/)) && (i = r[1]), e.exports = i && +i }, function(e, t, n) { var r = n(67); e.exports = !!Object.getOwnPropertySymbols && !r(function () { return !String(Symbol()) }) }, function(e, t, n) { var r = n(307), i = n(1532); (e.exports = function (e, t) { return i[e] || (i[e] = void 0 !== t ? t : {}) })("versions", []).push({ version: "3.6.4", mode: r ? "pure" : "global", copyright: "\xa9 2020 Denis Pushkarev (zloirock.ru)" }) }, function(e, t) { t.f = Object.getOwnPropertySymbols }, function(e, t) { e.exports = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"] }, function(e, t, n) { var r = n(237), i = n(235), o = n(630), a = function (e) { return function (t, n, a) { var s, l = r(t), u = i(l.length), c = o(a, u); if (e && n != n) { for (; u > c;)if ((s = l[c++]) != s) return !0 } else for (; u > c; c++)if ((e || c in l) && l[c] === n) return e || c || 0; return !e && -1 } }; e.exports = { includes: a(!0), indexOf: a(!1) } }, function(e, t, n) { var r = n(119), i = n(129), o = r.document, a = i(o) && i(o.createElement); e.exports = function (e) { return a ? o.createElement(e) : {} } }, function(e, t, n) { var r = n(249), i = n(251), o = function (e) { return function (t, n) { var o, a, s = String(i(t)), l = r(n), u = s.length; return l < 0 || l >= u ? e ? "" : void 0 : (o = s.charCodeAt(l)) < 55296 || o > 56319 || l + 1 === u || (a = s.charCodeAt(l + 1)) < 56320 || a > 57343 ? e ? s.charAt(l) : o : e ? s.slice(l, l + 2) : a - 56320 + (o - 55296 << 10) + 65536 } }; e.exports = { codeAt: o(!1), charAt: o(!0) } }, function(e, t, n) { "use strict"; var r = n(920).charAt; e.exports = function (e, t, n) { return t + (n ? r(e, t).length : 1) } }, function(e, t, n) { "use strict"; var r = n(139); e.exports = function () { var e = r(this), t = ""; return e.global && (t += "g"), e.ignoreCase && (t += "i"), e.multiline && (t += "m"), e.dotAll && (t += "s"), e.unicode && (t += "u"), e.sticky && (t += "y"), t } }, function(e, t, n) { var r = n(109); e.exports = !!Object.getOwnPropertySymbols && !r(function () { return !String(Symbol()) }) }, function(e, t, n) { var r = {}; r[n(114)("toStringTag")] = "z", e.exports = "[object z]" === String(r) }, function(e, t, n) { var r = n(1543), i = n(929); e.exports = Object.keys || function keys(e) { return r(e, i) } }, function(e, t, n) { var r = n(165), i = n(458); e.exports = function (e, t, n) { var o, a; return i && "function" == typeof (o = t.constructor) && o !== n && r(a = o.prototype) && a !== n.prototype && i(e, a), e } }, function(e, t, n) { "use strict"; var r = n(109); e.exports = function (e, t) { var n = [][e]; return !!n && r(function () { n.call(null, t || function () { throw 1 }, 1) }) } }, function(e, t) { t.f = Object.getOwnPropertySymbols }, function(e, t) { e.exports = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"] }, function(e, t, n) { var r = n(308), i = n(145), o = n(638), a = function (e) { return function (t, n, a) { var s, l = r(t), u = i(l.length), c = o(a, u); if (e && n != n) { for (; u > c;)if ((s = l[c++]) != s) return !0 } else for (; u > c; c++)if ((e || c in l) && l[c] === n) return e || c || 0; return !e && -1 } }; e.exports = { includes: a(!0), indexOf: a(!1) } }, function(e, t, n) { var r = n(387), i = n(1546); (e.exports = function (e, t) { return i[e] || (i[e] = void 0 !== t ? t : {}) })("versions", []).push({ version: "3.6.5", mode: r ? "pure" : "global", copyright: "\xa9 2020 Denis Pushkarev (zloirock.ru)" }) }, function(e, t, n) { var r = n(1546), i = Function.toString; "function" != typeof r.inspectSource && (r.inspectSource = function (e) { return i.call(e) }), e.exports = r.inspectSource }, function(e, t, n) { var r = n(59), i = n(214); e.exports = function (e, t) { try { i(r, e, t) } catch (n) { r[e] = t } return t } }, function(e, t, n) { var r = n(59), i = n(165), o = r.document, a = i(o) && i(o.createElement); e.exports = function (e) { return a ? o.createElement(e) : {} } }, function(e, t, n) { "use strict"; var r = {}.propertyIsEnumerable, i = Object.getOwnPropertyDescriptor, o = i && !r.call({ 1: 2 }, 1); t.f = o ? function propertyIsEnumerable(e) { var t = i(this, e); return !!t && t.enumerable } : r },,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { var r = n(1465), i = n(3395), o = n(900), a = n(1464); e.exports = function _slicedToArray(e, t) { return r(e) || i(e, t) || o(e, t) || a() } }, function(e, t, n) { e.exports = n(3439) }, function(e, t, n) { e.exports = n(2593) }, function(e, t, n) { "use strict"; function warn(e, t) { 0 } function isError(e) { return Object.prototype.toString.call(e).indexOf("Error") > -1 } function extend(e, t) { for (var n in t) e[n] = t[n]; return e } var r = { name: "RouterView", functional: !0, props: { name: { type: String, default: "default" } }, render: function render(e, t) { var n = t.props, r = t.children, i = t.parent, o = t.data; o.routerView = !0; for (var a = i.$createElement, s = n.name, l = i.$route, u = i._routerViewCache || (i._routerViewCache = {}), c = 0, d = !1; i && i._routerRoot !== i;)i.$vnode && i.$vnode.data.routerView && c++, i._inactive && (d = !0), i = i.$parent; if (o.routerViewDepth = c, d) return a(u[s], o, r); var f = l.matched[c]; if (!f) return u[s] = null, a(); var h = u[s] = f.components[s]; o.registerRouteInstance = function (e, t) { var n = f.instances[s]; (t && n !== e || !t && n === e) && (f.instances[s] = t) }, (o.hook || (o.hook = {})).prepatch = function (e, t) { f.instances[s] = t.componentInstance }; var p = o.props = function resolveProps(e, t) { switch (typeof t) { case "undefined": return; case "object": return t; case "function": return t(e); case "boolean": return t ? e.params : void 0; default: 0 } }(l, f.props && f.props[s]); if (p) { p = o.props = extend({}, p); var m = o.attrs = o.attrs || {}; for (var g in p) h.props && g in h.props || (m[g] = p[g], delete p[g]) } return a(h, o, r) } }; var i = /[!'()*]/g, o = function (e) { return "%" + e.charCodeAt(0).toString(16) }, a = /%2C/g, s = function (e) { return encodeURIComponent(e).replace(i, o).replace(a, ",") }, l = decodeURIComponent; function parseQuery(e) { var t = {}; return (e = e.trim().replace(/^(\?|#|&)/, "")) ? (e.split("&").forEach(function (e) { var n = e.replace(/\+/g, " ").split("="), r = l(n.shift()), i = n.length > 0 ? l(n.join("=")) : null; void 0 === t[r] ? t[r] = i : Array.isArray(t[r]) ? t[r].push(i) : t[r] = [t[r], i] }), t) : t } function stringifyQuery(e) { var t = e ? Object.keys(e).map(function (t) { var n = e[t]; if (void 0 === n) return ""; if (null === n) return s(t); if (Array.isArray(n)) { var r = []; return n.forEach(function (e) { void 0 !== e && (null === e ? r.push(s(t)) : r.push(s(t) + "=" + s(e))) }), r.join("&") } return s(t) + "=" + s(n) }).filter(function (e) { return e.length > 0 }).join("&") : null; return t ? "?" + t : "" } var u = /\/?$/; function createRoute(e, t, n, r) { var i = r && r.options.stringifyQuery, o = t.query || {}; try { o = clone(o) } catch (e) { } var a = { name: t.name || e && e.name, meta: e && e.meta || {}, path: t.path || "/", hash: t.hash || "", query: o, params: t.params || {}, fullPath: getFullPath(t, i), matched: e ? function formatMatch(e) { var t = []; for (; e;)t.unshift(e), e = e.parent; return t }(e) : [] }; return n && (a.redirectedFrom = getFullPath(n, i)), Object.freeze(a) } function clone(e) { if (Array.isArray(e)) return e.map(clone); if (e && "object" == typeof e) { var t = {}; for (var n in e) t[n] = clone(e[n]); return t } return e } var c = createRoute(null, { path: "/" }); function getFullPath(e, t) { var n = e.path, r = e.query; void 0 === r && (r = {}); var i = e.hash; return void 0 === i && (i = ""), (n || "/") + (t || stringifyQuery)(r) + i } function isSameRoute(e, t) { return t === c ? e === t : !!t && (e.path && t.path ? e.path.replace(u, "") === t.path.replace(u, "") && e.hash === t.hash && isObjectEqual(e.query, t.query) : !(!e.name || !t.name) && (e.name === t.name && e.hash === t.hash && isObjectEqual(e.query, t.query) && isObjectEqual(e.params, t.params))) } function isObjectEqual(e, t) { if (void 0 === e && (e = {}), void 0 === t && (t = {}), !e || !t) return e === t; var n = Object.keys(e), r = Object.keys(t); return n.length === r.length && n.every(function (n) { var r = e[n], i = t[n]; return "object" == typeof r && "object" == typeof i ? isObjectEqual(r, i) : String(r) === String(i) }) } var d, f = [String, Object], h = [String, Array], p = { name: "RouterLink", props: { to: { type: f, required: !0 }, tag: { type: String, default: "a" }, exact: Boolean, append: Boolean, replace: Boolean, activeClass: String, exactActiveClass: String, event: { type: h, default: "click" } }, render: function render(e) { var t = this, n = this.$router, r = this.$route, i = n.resolve(this.to, r, this.append), o = i.location, a = i.route, s = i.href, l = {}, c = n.options.linkActiveClass, d = n.options.linkExactActiveClass, f = null == c ? "router-link-active" : c, h = null == d ? "router-link-exact-active" : d, p = null == this.activeClass ? f : this.activeClass, m = null == this.exactActiveClass ? h : this.exactActiveClass, g = o.path ? createRoute(null, o, null, n) : a; l[m] = isSameRoute(r, g), l[p] = this.exact ? l[m] : function isIncludedRoute(e, t) { return 0 === e.path.replace(u, "/").indexOf(t.path.replace(u, "/")) && (!t.hash || e.hash === t.hash) && function queryIncludes(e, t) { for (var n in t) if (!(n in e)) return !1; return !0 }(e.query, t.query) }(r, g); var v = function (e) { guardEvent(e) && (t.replace ? n.replace(o) : n.push(o)) }, y = { click: guardEvent }; Array.isArray(this.event) ? this.event.forEach(function (e) { y[e] = v }) : y[this.event] = v; var _ = { class: l }; if ("a" === this.tag) _.on = y, _.attrs = { href: s }; else { var b = function findAnchor(e) { if (e) for (var t, n = 0; n < e.length; n++) { if ("a" === (t = e[n]).tag) return t; if (t.children && (t = findAnchor(t.children))) return t } }(this.$slots.default); if (b) b.isStatic = !1, (b.data = extend({}, b.data)).on = y, (b.data.attrs = extend({}, b.data.attrs)).href = s; else _.on = y } return e(this.tag, _, this.$slots.default) } }; function guardEvent(e) { if (!(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey || e.defaultPrevented || void 0 !== e.button && 0 !== e.button)) { if (e.currentTarget && e.currentTarget.getAttribute) { var t = e.currentTarget.getAttribute("target"); if (/\b_blank\b/i.test(t)) return } return e.preventDefault && e.preventDefault(), !0 } } function install(e) { if (!install.installed || d !== e) { install.installed = !0, d = e; var t = function (e) { return void 0 !== e }, n = function (e, n) { var r = e.$options._parentVnode; t(r) && t(r = r.data) && t(r = r.registerRouteInstance) && r(e, n) }; e.mixin({ beforeCreate: function beforeCreate() { t(this.$options.router) ? (this._routerRoot = this, this._router = this.$options.router, this._router.init(this), e.util.defineReactive(this, "_route", this._router.history.current)) : this._routerRoot = this.$parent && this.$parent._routerRoot || this, n(this, this) }, destroyed: function destroyed() { n(this) } }), Object.defineProperty(e.prototype, "$router", { get: function get() { return this._routerRoot._router } }), Object.defineProperty(e.prototype, "$route", { get: function get() { return this._routerRoot._route } }), e.component("RouterView", r), e.component("RouterLink", p); var i = e.config.optionMergeStrategies; i.beforeRouteEnter = i.beforeRouteLeave = i.beforeRouteUpdate = i.created } } var m = "undefined" != typeof window; function resolvePath(e, t, n) { var r = e.charAt(0); if ("/" === r) return e; if ("?" === r || "#" === r) return t + e; var i = t.split("/"); n && i[i.length - 1] || i.pop(); for (var o = e.replace(/^\//, "").split("/"), a = 0; a < o.length; a++) { var s = o[a]; ".." === s ? i.pop() : "." !== s && i.push(s) } return "" !== i[0] && i.unshift(""), i.join("/") } function cleanPath(e) { return e.replace(/\/\//g, "/") } var g = Array.isArray || function (e) { return "[object Array]" == Object.prototype.toString.call(e) }, v = pathToRegexp, y = parse, _ = function compile(e, t) { return tokensToFunction(parse(e, t)) }, b = tokensToFunction, w = tokensToRegExp, x = new RegExp(["(\\\\.)", "([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"), "g"); function parse(e, t) { for (var n, r = [], i = 0, o = 0, a = "", s = t && t.delimiter || "/"; null != (n = x.exec(e));) { var l = n[0], u = n[1], c = n.index; if (a += e.slice(o, c), o = c + l.length, u) a += u[1]; else { var d = e[o], f = n[2], h = n[3], p = n[4], m = n[5], g = n[6], v = n[7]; a && (r.push(a), a = ""); var y = null != f && null != d && d !== f, _ = "+" === g || "*" === g, b = "?" === g || "*" === g, w = n[2] || s, C = p || m; r.push({ name: h || i++, prefix: f || "", delimiter: w, optional: b, repeat: _, partial: y, asterisk: !!v, pattern: C ? escapeGroup(C) : v ? ".*" : "[^" + escapeString(w) + "]+?" }) } } return o < e.length && (a += e.substr(o)), a && r.push(a), r } function encodeURIComponentPretty(e) { return encodeURI(e).replace(/[\/?#]/g, function (e) { return "%" + e.charCodeAt(0).toString(16).toUpperCase() }) } function tokensToFunction(e) { for (var t = new Array(e.length), n = 0; n < e.length; n++)"object" == typeof e[n] && (t[n] = new RegExp("^(?:" + e[n].pattern + ")$")); return function (n, r) { for (var i = "", o = n || {}, a = (r || {}).pretty ? encodeURIComponentPretty : encodeURIComponent, s = 0; s < e.length; s++) { var l = e[s]; if ("string" != typeof l) { var u, c = o[l.name]; if (null == c) { if (l.optional) { l.partial && (i += l.prefix); continue } throw new TypeError('Expected "' + l.name + '" to be defined') } if (g(c)) { if (!l.repeat) throw new TypeError('Expected "' + l.name + '" to not repeat, but received `' + JSON.stringify(c) + "`"); if (0 === c.length) { if (l.optional) continue; throw new TypeError('Expected "' + l.name + '" to not be empty') } for (var d = 0; d < c.length; d++) { if (u = a(c[d]), !t[s].test(u)) throw new TypeError('Expected all "' + l.name + '" to match "' + l.pattern + '", but received `' + JSON.stringify(u) + "`"); i += (0 === d ? l.prefix : l.delimiter) + u } } else { if (u = l.asterisk ? encodeURI(c).replace(/[?#]/g, function (e) { return "%" + e.charCodeAt(0).toString(16).toUpperCase() }) : a(c), !t[s].test(u)) throw new TypeError('Expected "' + l.name + '" to match "' + l.pattern + '", but received "' + u + '"'); i += l.prefix + u } } else i += l } return i } } function escapeString(e) { return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g, "\\$1") } function escapeGroup(e) { return e.replace(/([=!:$\/()])/g, "\\$1") } function attachKeys(e, t) { return e.keys = t, e } function flags(e) { return e.sensitive ? "" : "i" } function tokensToRegExp(e, t, n) { g(t) || (n = t || n, t = []); for (var r = (n = n || {}).strict, i = !1 !== n.end, o = "", a = 0; a < e.length; a++) { var s = e[a]; if ("string" == typeof s) o += escapeString(s); else { var l = escapeString(s.prefix), u = "(?:" + s.pattern + ")"; t.push(s), s.repeat && (u += "(?:" + l + u + ")*"), o += u = s.optional ? s.partial ? l + "(" + u + ")?" : "(?:" + l + "(" + u + "))?" : l + "(" + u + ")" } } var c = escapeString(n.delimiter || "/"), d = o.slice(-c.length) === c; return r || (o = (d ? o.slice(0, -c.length) : o) + "(?:" + c + "(?=$))?"), o += i ? "$" : r && d ? "" : "(?=" + c + "|$)", attachKeys(new RegExp("^" + o, flags(n)), t) } function pathToRegexp(e, t, n) { return g(t) || (n = t || n, t = []), n = n || {}, e instanceof RegExp ? function regexpToRegexp(e, t) { var n = e.source.match(/\((?!\?)/g); if (n) for (var r = 0; r < n.length; r++)t.push({ name: r, prefix: null, delimiter: null, optional: !1, repeat: !1, partial: !1, asterisk: !1, pattern: null }); return attachKeys(e, t) }(e, t) : g(e) ? function arrayToRegexp(e, t, n) { for (var r = [], i = 0; i < e.length; i++)r.push(pathToRegexp(e[i], t, n).source); return attachKeys(new RegExp("(?:" + r.join("|") + ")", flags(n)), t) }(e, t, n) : function stringToRegexp(e, t, n) { return tokensToRegExp(parse(e, n), t, n) }(e, t, n) } v.parse = y, v.compile = _, v.tokensToFunction = b, v.tokensToRegExp = w; var C = Object.create(null); function fillParams(e, t, n) { try { return (C[e] || (C[e] = v.compile(e)))(t || {}, { pretty: !0 }) } catch (e) { return "" } } function createRouteMap(e, t, n, r) { var i = t || [], o = n || Object.create(null), a = r || Object.create(null); e.forEach(function (e) { !function addRouteRecord(e, t, n, r, i, o) { var a = r.path; var s = r.name; 0; var l = r.pathToRegexpOptions || {}; var u = function normalizePath(e, t, n) { n || (e = e.replace(/\/$/, "")); if ("/" === e[0]) return e; if (null == t) return e; return cleanPath(t.path + "/" + e) }(a, i, l.strict); "boolean" == typeof r.caseSensitive && (l.sensitive = r.caseSensitive); var c = { path: u, regex: function compileRouteRegex(e, t) { var n = v(e, [], t); 0; return n }(u, l), components: r.components || { default: r.component }, instances: {}, name: s, parent: i, matchAs: o, redirect: r.redirect, beforeEnter: r.beforeEnter, meta: r.meta || {}, props: null == r.props ? {} : r.components ? r.props : { default: r.props } }; r.children && r.children.forEach(function (r) { var i = o ? cleanPath(o + "/" + r.path) : void 0; addRouteRecord(e, t, n, r, c, i) }); if (void 0 !== r.alias) { var d = Array.isArray(r.alias) ? r.alias : [r.alias]; d.forEach(function (o) { var a = { path: o, children: r.children }; addRouteRecord(e, t, n, a, i, c.path || "/") }) } t[c.path] || (e.push(c.path), t[c.path] = c); s && (n[s] || (n[s] = c)) }(i, o, a, e) }); for (var s = 0, l = i.length; s < l; s++)"*" === i[s] && (i.push(i.splice(s, 1)[0]), l--, s--); return { pathList: i, pathMap: o, nameMap: a } } function normalizeLocation(e, t, n, r) { var i = "string" == typeof e ? { path: e } : e; if (i.name || i._normalized) return i; if (!i.path && i.params && t) { (i = extend({}, i))._normalized = !0; var o = extend(extend({}, t.params), i.params); if (t.name) i.name = t.name, i.params = o; else if (t.matched.length) { var a = t.matched[t.matched.length - 1].path; i.path = fillParams(a, o, t.path) } else 0; return i } var s = function parsePath(e) { var t = "", n = "", r = e.indexOf("#"); r >= 0 && (t = e.slice(r), e = e.slice(0, r)); var i = e.indexOf("?"); return i >= 0 && (n = e.slice(i + 1), e = e.slice(0, i)), { path: e, query: n, hash: t } }(i.path || ""), l = t && t.path || "/", u = s.path ? resolvePath(s.path, l, n || i.append) : l, c = function resolveQuery(e, t, n) { void 0 === t && (t = {}); var r, i = n || parseQuery; try { r = i(e || "") } catch (e) { r = {} } for (var o in t) r[o] = t[o]; return r }(s.query, i.query, r && r.options.parseQuery), d = i.hash || s.hash; return d && "#" !== d.charAt(0) && (d = "#" + d), { _normalized: !0, path: u, query: c, hash: d } } function createMatcher(e, t) { var n = createRouteMap(e), r = n.pathList, i = n.pathMap, o = n.nameMap; function match(e, n, a) { var s = normalizeLocation(e, n, !1, t), l = s.name; if (l) { var u = o[l]; if (!u) return _createRoute(null, s); var c = u.regex.keys.filter(function (e) { return !e.optional }).map(function (e) { return e.name }); if ("object" != typeof s.params && (s.params = {}), n && "object" == typeof n.params) for (var d in n.params) !(d in s.params) && c.indexOf(d) > -1 && (s.params[d] = n.params[d]); if (u) return s.path = fillParams(u.path, s.params), _createRoute(u, s, a) } else if (s.path) { s.params = {}; for (var f = 0; f < r.length; f++) { var h = r[f], p = i[h]; if (matchRoute(p.regex, s.path, s.params)) return _createRoute(p, s, a) } } return _createRoute(null, s) } function redirect(e, n) { var r = e.redirect, i = "function" == typeof r ? r(createRoute(e, n, null, t)) : r; if ("string" == typeof i && (i = { path: i }), !i || "object" != typeof i) return _createRoute(null, n); var a = i, s = a.name, l = a.path, u = n.query, c = n.hash, d = n.params; if (u = a.hasOwnProperty("query") ? a.query : u, c = a.hasOwnProperty("hash") ? a.hash : c, d = a.hasOwnProperty("params") ? a.params : d, s) { o[s]; return match({ _normalized: !0, name: s, query: u, hash: c, params: d }, void 0, n) } if (l) { var f = function resolveRecordPath(e, t) { return resolvePath(e, t.parent ? t.parent.path : "/", !0) }(l, e); return match({ _normalized: !0, path: fillParams(f, d), query: u, hash: c }, void 0, n) } return _createRoute(null, n) } function _createRoute(e, n, r) { return e && e.redirect ? redirect(e, r || n) : e && e.matchAs ? function alias(e, t, n) { var r = match({ _normalized: !0, path: fillParams(n, t.params) }); if (r) { var i = r.matched, o = i[i.length - 1]; return t.params = r.params, _createRoute(o, t) } return _createRoute(null, t) }(0, n, e.matchAs) : createRoute(e, n, r, t) } return { match: match, addRoutes: function addRoutes(e) { createRouteMap(e, r, i, o) } } } function matchRoute(e, t, n) { var r = t.match(e); if (!r) return !1; if (!n) return !0; for (var i = 1, o = r.length; i < o; ++i) { var a = e.keys[i - 1], s = "string" == typeof r[i] ? decodeURIComponent(r[i]) : r[i]; a && (n[a.name || "pathMatch"] = s) } return !0 } var S = Object.create(null); function setupScroll() { window.history.replaceState({ key: getStateKey() }, "", window.location.href.replace(window.location.origin, "")), window.addEventListener("popstate", function (e) { saveScrollPosition(), e.state && e.state.key && function setStateKey(e) { M = e }(e.state.key) }) } function handleScroll(e, t, n, r) { if (e.app) { var i = e.options.scrollBehavior; i && e.app.$nextTick(function () { var o = function getScrollPosition() { var e = getStateKey(); if (e) return S[e] }(), a = i.call(e, t, n, r ? o : null); a && ("function" == typeof a.then ? a.then(function (e) { scrollToPosition(e, o) }).catch(function (e) { 0 }) : scrollToPosition(a, o)) }) } } function saveScrollPosition() { var e = getStateKey(); e && (S[e] = { x: window.pageXOffset, y: window.pageYOffset }) } function isValidPosition(e) { return isNumber(e.x) || isNumber(e.y) } function normalizePosition(e) { return { x: isNumber(e.x) ? e.x : window.pageXOffset, y: isNumber(e.y) ? e.y : window.pageYOffset } } function isNumber(e) { return "number" == typeof e } function scrollToPosition(e, t) { var n = "object" == typeof e; if (n && "string" == typeof e.selector) { var r = document.querySelector(e.selector); if (r) { var i = e.offset && "object" == typeof e.offset ? e.offset : {}; t = function getElementPosition(e, t) { var n = document.documentElement.getBoundingClientRect(), r = e.getBoundingClientRect(); return { x: r.left - n.left - t.x, y: r.top - n.top - t.y } }(r, i = function normalizeOffset(e) { return { x: isNumber(e.x) ? e.x : 0, y: isNumber(e.y) ? e.y : 0 } }(i)) } else isValidPosition(e) && (t = normalizePosition(e)) } else n && isValidPosition(e) && (t = normalizePosition(e)); t && window.scrollTo(t.x, t.y) } var k, T = m && ((-1 === (k = window.navigator.userAgent).indexOf("Android 2.") && -1 === k.indexOf("Android 4.0") || -1 === k.indexOf("Mobile Safari") || -1 !== k.indexOf("Chrome") || -1 !== k.indexOf("Windows Phone")) && window.history && "pushState" in window.history), L = m && window.performance && window.performance.now ? window.performance : Date, M = genKey(); function genKey() { return L.now().toFixed(3) } function getStateKey() { return M } function pushState(e, t) { saveScrollPosition(); var n = window.history; try { t ? n.replaceState({ key: M }, "", e) : (M = genKey(), n.pushState({ key: M }, "", e)) } catch (n) { window.location[t ? "replace" : "assign"](e) } } function replaceState(e) { pushState(e, !0) } function runQueue(e, t, n) { var r = function (i) { i >= e.length ? n() : e[i] ? t(e[i], function () { r(i + 1) }) : r(i + 1) }; r(0) } function resolveAsyncComponents(e) { return function (t, n, r) { var i = !1, o = 0, a = null; flatMapComponents(e, function (e, t, n, s) { if ("function" == typeof e && void 0 === e.cid) { i = !0, o++; var l, u = once(function (t) { (function isESModule(e) { return e.__esModule || E && "Module" === e[Symbol.toStringTag] })(t) && (t = t.default), e.resolved = "function" == typeof t ? t : d.extend(t), n.components[s] = t, --o <= 0 && r() }), c = once(function (e) { var t = "Failed to resolve async component " + s + ": " + e; a || (a = isError(e) ? e : new Error(t), r(a)) }); try { l = e(u, c) } catch (e) { c(e) } if (l) if ("function" == typeof l.then) l.then(u, c); else { var f = l.component; f && "function" == typeof f.then && f.then(u, c) } } }), i || r() } } function flatMapComponents(e, t) { return flatten(e.map(function (e) { return Object.keys(e.components).map(function (n) { return t(e.components[n], e.instances[n], e, n) }) })) } function flatten(e) { return Array.prototype.concat.apply([], e) } var E = "function" == typeof Symbol && "symbol" == typeof Symbol.toStringTag; function once(e) { var t = !1; return function () { for (var n = [], r = arguments.length; r--;)n[r] = arguments[r]; if (!t) return t = !0, e.apply(this, n) } } var A = function History(e, t) { this.router = e, this.base = function normalizeBase(e) { if (!e) if (m) { var t = document.querySelector("base"); e = (e = t && t.getAttribute("href") || "/").replace(/^https?:\/\/[^\/]+/, "") } else e = "/"; "/" !== e.charAt(0) && (e = "/" + e); return e.replace(/\/$/, "") }(t), this.current = c, this.pending = null, this.ready = !1, this.readyCbs = [], this.readyErrorCbs = [], this.errorCbs = [] }; function extractGuards(e, t, n, r) { var i = flatMapComponents(e, function (e, r, i, o) { var a = function extractGuard(e, t) { "function" != typeof e && (e = d.extend(e)); return e.options[t] }(e, t); if (a) return Array.isArray(a) ? a.map(function (e) { return n(e, r, i, o) }) : n(a, r, i, o) }); return flatten(r ? i.reverse() : i) } function bindGuard(e, t) { if (t) return function boundRouteGuard() { return e.apply(t, arguments) } } A.prototype.listen = function listen(e) { this.cb = e }, A.prototype.onReady = function onReady(e, t) { this.ready ? e() : (this.readyCbs.push(e), t && this.readyErrorCbs.push(t)) }, A.prototype.onError = function onError(e) { this.errorCbs.push(e) }, A.prototype.transitionTo = function transitionTo(e, t, n) { var r = this, i = this.router.match(e, this.current); this.confirmTransition(i, function () { r.updateRoute(i), t && t(i), r.ensureURL(), r.ready || (r.ready = !0, r.readyCbs.forEach(function (e) { e(i) })) }, function (e) { n && n(e), e && !r.ready && (r.ready = !0, r.readyErrorCbs.forEach(function (t) { t(e) })) }) }, A.prototype.confirmTransition = function confirmTransition(e, t, n) { var r = this, i = this.current, o = function (e) { isError(e) && (r.errorCbs.length ? r.errorCbs.forEach(function (t) { t(e) }) : (warn(), console.error(e))), n && n(e) }; if (isSameRoute(e, i) && e.matched.length === i.matched.length) return this.ensureURL(), o(); var a = function resolveQueue(e, t) { var n, r = Math.max(e.length, t.length); for (n = 0; n < r && e[n] === t[n]; n++); return { updated: t.slice(0, n), activated: t.slice(n), deactivated: e.slice(n) } }(this.current.matched, e.matched), s = a.updated, l = a.deactivated, u = a.activated, c = [].concat(function extractLeaveGuards(e) { return extractGuards(e, "beforeRouteLeave", bindGuard, !0) }(l), this.router.beforeHooks, function extractUpdateHooks(e) { return extractGuards(e, "beforeRouteUpdate", bindGuard) }(s), u.map(function (e) { return e.beforeEnter }), resolveAsyncComponents(u)); this.pending = e; var d = function (t, n) { if (r.pending !== e) return o(); try { t(e, i, function (e) { !1 === e || isError(e) ? (r.ensureURL(!0), o(e)) : "string" == typeof e || "object" == typeof e && ("string" == typeof e.path || "string" == typeof e.name) ? (o(), "object" == typeof e && e.replace ? r.replace(e) : r.push(e)) : n(e) }) } catch (e) { o(e) } }; runQueue(c, d, function () { var n = []; runQueue(function extractEnterGuards(e, t, n) { return extractGuards(e, "beforeRouteEnter", function (e, r, i, o) { return function bindEnterGuard(e, t, n, r, i) { return function routeEnterGuard(o, a, s) { return e(o, a, function (e) { s(e), "function" == typeof e && r.push(function () { !function poll(e, t, n, r) { t[n] && !t[n]._isBeingDestroyed ? e(t[n]) : r() && setTimeout(function () { poll(e, t, n, r) }, 16) }(e, t.instances, n, i) }) }) } }(e, i, o, t, n) }) }(u, n, function () { return r.current === e }).concat(r.router.resolveHooks), d, function () { if (r.pending !== e) return o(); r.pending = null, t(e), r.router.app && r.router.app.$nextTick(function () { n.forEach(function (e) { e() }) }) }) }) }, A.prototype.updateRoute = function updateRoute(e) { var t = this.current; this.current = e, this.cb && this.cb(e), this.router.afterHooks.forEach(function (n) { n && n(e, t) }) }; var P = function (e) { function HTML5History(t, n) { var r = this; e.call(this, t, n); var i = t.options.scrollBehavior, o = T && i; o && setupScroll(); var a = getLocation(this.base); window.addEventListener("popstate", function (e) { var n = r.current, i = getLocation(r.base); r.current === c && i === a || r.transitionTo(i, function (e) { o && handleScroll(t, e, n, !0) }) }) } return e && (HTML5History.__proto__ = e), HTML5History.prototype = Object.create(e && e.prototype), HTML5History.prototype.constructor = HTML5History, HTML5History.prototype.go = function go(e) { window.history.go(e) }, HTML5History.prototype.push = function push(e, t, n) { var r = this, i = this.current; this.transitionTo(e, function (e) { pushState(cleanPath(r.base + e.fullPath)), handleScroll(r.router, e, i, !1), t && t(e) }, n) }, HTML5History.prototype.replace = function replace(e, t, n) { var r = this, i = this.current; this.transitionTo(e, function (e) { replaceState(cleanPath(r.base + e.fullPath)), handleScroll(r.router, e, i, !1), t && t(e) }, n) }, HTML5History.prototype.ensureURL = function ensureURL(e) { if (getLocation(this.base) !== this.current.fullPath) { var t = cleanPath(this.base + this.current.fullPath); e ? pushState(t) : replaceState(t) } }, HTML5History.prototype.getCurrentLocation = function getCurrentLocation() { return getLocation(this.base) }, HTML5History }(A); function getLocation(e) { var t = decodeURI(window.location.pathname); return e && 0 === t.indexOf(e) && (t = t.slice(e.length)), (t || "/") + window.location.search + window.location.hash } var R = function (e) { function HashHistory(t, n, r) { e.call(this, t, n), r && function checkFallback(e) { var t = getLocation(e); if (!/^\/#/.test(t)) return window.location.replace(cleanPath(e + "/#" + t)), !0 }(this.base) || ensureSlash() } return e && (HashHistory.__proto__ = e), HashHistory.prototype = Object.create(e && e.prototype), HashHistory.prototype.constructor = HashHistory, HashHistory.prototype.setupListeners = function setupListeners() { var e = this, t = this.router.options.scrollBehavior, n = T && t; n && setupScroll(), window.addEventListener(T ? "popstate" : "hashchange", function () { var t = e.current; ensureSlash() && e.transitionTo(getHash(), function (r) { n && handleScroll(e.router, r, t, !0), T || replaceHash(r.fullPath) }) }) }, HashHistory.prototype.push = function push(e, t, n) { var r = this, i = this.current; this.transitionTo(e, function (e) { pushHash(e.fullPath), handleScroll(r.router, e, i, !1), t && t(e) }, n) }, HashHistory.prototype.replace = function replace(e, t, n) { var r = this, i = this.current; this.transitionTo(e, function (e) { replaceHash(e.fullPath), handleScroll(r.router, e, i, !1), t && t(e) }, n) }, HashHistory.prototype.go = function go(e) { window.history.go(e) }, HashHistory.prototype.ensureURL = function ensureURL(e) { var t = this.current.fullPath; getHash() !== t && (e ? pushHash(t) : replaceHash(t)) }, HashHistory.prototype.getCurrentLocation = function getCurrentLocation() { return getHash() }, HashHistory }(A); function ensureSlash() { var e = getHash(); return "/" === e.charAt(0) || (replaceHash("/" + e), !1) } function getHash() { var e = window.location.href, t = e.indexOf("#"); return -1 === t ? "" : decodeURI(e.slice(t + 1)) } function getUrl(e) { var t = window.location.href, n = t.indexOf("#"); return (n >= 0 ? t.slice(0, n) : t) + "#" + e } function pushHash(e) { T ? pushState(getUrl(e)) : window.location.hash = e } function replaceHash(e) { T ? replaceState(getUrl(e)) : window.location.replace(getUrl(e)) } var O = function (e) { function AbstractHistory(t, n) { e.call(this, t, n), this.stack = [], this.index = -1 } return e && (AbstractHistory.__proto__ = e), AbstractHistory.prototype = Object.create(e && e.prototype), AbstractHistory.prototype.constructor = AbstractHistory, AbstractHistory.prototype.push = function push(e, t, n) { var r = this; this.transitionTo(e, function (e) { r.stack = r.stack.slice(0, r.index + 1).concat(e), r.index++, t && t(e) }, n) }, AbstractHistory.prototype.replace = function replace(e, t, n) { var r = this; this.transitionTo(e, function (e) { r.stack = r.stack.slice(0, r.index).concat(e), t && t(e) }, n) }, AbstractHistory.prototype.go = function go(e) { var t = this, n = this.index + e; if (!(n < 0 || n >= this.stack.length)) { var r = this.stack[n]; this.confirmTransition(r, function () { t.index = n, t.updateRoute(r) }) } }, AbstractHistory.prototype.getCurrentLocation = function getCurrentLocation() { var e = this.stack[this.stack.length - 1]; return e ? e.fullPath : "/" }, AbstractHistory.prototype.ensureURL = function ensureURL() { }, AbstractHistory }(A), D = function VueRouter(e) { void 0 === e && (e = {}), this.app = null, this.apps = [], this.options = e, this.beforeHooks = [], this.resolveHooks = [], this.afterHooks = [], this.matcher = createMatcher(e.routes || [], this); var t = e.mode || "hash"; switch (this.fallback = "history" === t && !T && !1 !== e.fallback, this.fallback && (t = "hash"), m || (t = "abstract"), this.mode = t, t) { case "history": this.history = new P(this, e.base); break; case "hash": this.history = new R(this, e.base, this.fallback); break; case "abstract": this.history = new O(this, e.base); break; default: 0 } }, F = { currentRoute: { configurable: !0 } }; function registerHook(e, t) { return e.push(t), function () { var n = e.indexOf(t); n > -1 && e.splice(n, 1) } } D.prototype.match = function match(e, t, n) { return this.matcher.match(e, t, n) }, F.currentRoute.get = function () { return this.history && this.history.current }, D.prototype.init = function init(e) { var t = this; if (this.apps.push(e), !this.app) { this.app = e; var n = this.history; if (n instanceof P) n.transitionTo(n.getCurrentLocation()); else if (n instanceof R) { var r = function () { n.setupListeners() }; n.transitionTo(n.getCurrentLocation(), r, r) } n.listen(function (e) { t.apps.forEach(function (t) { t._route = e }) }) } }, D.prototype.beforeEach = function beforeEach(e) { return registerHook(this.beforeHooks, e) }, D.prototype.beforeResolve = function beforeResolve(e) { return registerHook(this.resolveHooks, e) }, D.prototype.afterEach = function afterEach(e) { return registerHook(this.afterHooks, e) }, D.prototype.onReady = function onReady(e, t) { this.history.onReady(e, t) }, D.prototype.onError = function onError(e) { this.history.onError(e) }, D.prototype.push = function push(e, t, n) { this.history.push(e, t, n) }, D.prototype.replace = function replace(e, t, n) { this.history.replace(e, t, n) }, D.prototype.go = function go(e) { this.history.go(e) }, D.prototype.back = function back() { this.go(-1) }, D.prototype.forward = function forward() { this.go(1) }, D.prototype.getMatchedComponents = function getMatchedComponents(e) { var t = e ? e.matched ? e : this.resolve(e).route : this.currentRoute; return t ? [].concat.apply([], t.matched.map(function (e) { return Object.keys(e.components).map(function (t) { return e.components[t] }) })) : [] }, D.prototype.resolve = function resolve(e, t, n) { var r = normalizeLocation(e, t || this.history.current, n, this), i = this.match(r, t), o = i.redirectedFrom || i.fullPath; return { location: r, route: i, href: function createHref(e, t, n) { var r = "hash" === n ? "#" + t : t; return e ? cleanPath(e + "/" + r) : r }(this.history.base, o, this.mode), normalizedTo: r, resolved: i } }, D.prototype.addRoutes = function addRoutes(e) { this.matcher.addRoutes(e), this.history.current !== c && this.history.transitionTo(this.history.getCurrentLocation()) }, Object.defineProperties(D.prototype, F), D.install = install, D.version = "3.0.2", m && window.Vue && window.Vue.use(D), t.a = D }, function(e, t, n) { e.exports = n(3181) }, function(e, t, n) { e.exports = n(3355) }, function(e, t, n) { "use strict"; n(127), n(23), n(24), n(153), n(29), n(303), n(16), n(51), n(68), n(25), n(205), n(35), n(143); var r = n(19), i = n.n(r), o = n(28), a = n.n(o), s = n(37), l = n.n(s), u = n(239), c = n.n(u), d = n(469), f = n.n(d), h = n(313), p = n.n(h), m = n(10), g = n.n(m), v = n(65), y = n.n(v), _ = (n(40), n(111)), b = n.n(_), w = n(17), x = n.n(w), C = n(38), S = n.n(C), k = n(30), T = n.n(k), L = n(1002), M = n.n(L), E = n(18), A = n.n(E), P = n(11), R = n.n(P), O = n(116), D = n.n(O), F = n(402), I = n.n(F), N = n(12), $ = n.n(N), B = n(6), z = n.n(B), j = n(7), U = n.n(j), q = n(36), H = n.n(q), V = n(5), G = n.n(V), W = n(26), Y = n.n(W), Z = n(43), K = n.n(Z); function warn(e, t) { 0 } function extend(e, t) { for (var n in t) e[n] = t[n]; return e } var X = { name: "RouterView", functional: !0, props: { name: { type: String, default: "default" } }, render: function render(e, t) { var n = t.props, r = t.children, i = t.parent, o = t.data; o.routerView = !0; for (var a = i.$createElement, s = n.name, l = i.$route, u = i._routerViewCache || (i._routerViewCache = {}), c = 0, d = !1; i && i._routerRoot !== i;) { var f = i.$vnode ? i.$vnode.data : {}; f.routerView && c++, f.keepAlive && i._directInactive && i._inactive && (d = !0), i = i.$parent } if (o.routerViewDepth = c, d) { var h = u[s], p = h && h.component; return p ? (h.configProps && fillPropsinData(p, o, h.route, h.configProps), a(p, o, r)) : a() } var m = l.matched[c], g = m && m.components[s]; if (!m || !g) return u[s] = null, a(); u[s] = { component: g }, o.registerRouteInstance = function (e, t) { var n = m.instances[s]; (t && n !== e || !t && n === e) && (m.instances[s] = t) }, (o.hook || (o.hook = {})).prepatch = function (e, t) { m.instances[s] = t.componentInstance }, o.hook.init = function (e) { e.data.keepAlive && e.componentInstance && e.componentInstance !== m.instances[s] && (m.instances[s] = e.componentInstance) }; var v = m.props && m.props[s]; return v && (extend(u[s], { route: l, configProps: v }), fillPropsinData(g, o, l, v)), a(g, o, r) } }; function fillPropsinData(e, t, n, r) { var i = t.props = function resolveProps(e, t) { switch (K()(t)) { case "undefined": return; case "object": return t; case "function": return t(e); case "boolean": return t ? e.params : void 0; default: 0 } }(n, r); if (i) { i = t.props = extend({}, i); var o = t.attrs = t.attrs || {}; for (var a in i) e.props && a in e.props || (o[a] = i[a], delete i[a]) } } var J = /[!'()*]/g, Q = function encodeReserveReplacer(e) { return "%" + e.charCodeAt(0).toString(16) }, ee = /%2C/g, te = function encode(e) { return encodeURIComponent(e).replace(J, Q).replace(ee, ",") }, ne = decodeURIComponent; var re = function castQueryParamValue(e) { return null == e || "object" === K()(e) ? e : String(e) }; function parseQuery(e) { var t, n = {}; return (e = H()(e).call(e).replace(/^(\?|#|&)/, "")) ? (U()(t = e.split("&")).call(t, function (e) { var t = e.replace(/\+/g, " ").split("="), r = ne(t.shift()), i = t.length > 0 ? ne(t.join("=")) : null; void 0 === n[r] ? n[r] = i : Y()(n[r]) ? n[r].push(i) : n[r] = [n[r], i] }), n) : n } function stringifyQuery(e) { var t, n, r = e ? z()(t = G()(n = $()(e)).call(n, function (t) { var n = e[t]; if (void 0 === n) return ""; if (null === n) return te(t); if (Y()(n)) { var r = []; return U()(n).call(n, function (e) { void 0 !== e && (null === e ? r.push(te(t)) : r.push(te(t) + "=" + te(e))) }), r.join("&") } return te(t) + "=" + te(n) })).call(t, function (e) { return e.length > 0 }).join("&") : null; return r ? "?" + r : "" } var ie = /\/?$/; function createRoute(e, t, n, r) { var i = r && r.options.stringifyQuery, o = t.query || {}; try { o = clone(o) } catch (e) { } var a = { name: t.name || e && e.name, meta: e && e.meta || {}, path: t.path || "/", hash: t.hash || "", query: o, params: t.params || {}, fullPath: getFullPath(t, i), matched: e ? function formatMatch(e) { var t = []; for (; e;)t.unshift(e), e = e.parent; return t }(e) : [] }; return n && (a.redirectedFrom = getFullPath(n, i)), I()(a) } function clone(e) { if (Y()(e)) return G()(e).call(e, clone); if (e && "object" === K()(e)) { var t = {}; for (var n in e) t[n] = clone(e[n]); return t } return e } var oe = createRoute(null, { path: "/" }); function getFullPath(e, t) { var n = e.path, r = e.query; void 0 === r && (r = {}); var i = e.hash; return void 0 === i && (i = ""), (n || "/") + (t || stringifyQuery)(r) + i } function isSameRoute(e, t) { return t === oe ? e === t : !!t && (e.path && t.path ? e.path.replace(ie, "") === t.path.replace(ie, "") && e.hash === t.hash && isObjectEqual(e.query, t.query) : !(!e.name || !t.name) && (e.name === t.name && e.hash === t.hash && isObjectEqual(e.query, t.query) && isObjectEqual(e.params, t.params))) } function isObjectEqual(e, t) { if (void 0 === e && (e = {}), void 0 === t && (t = {}), !e || !t) return e === t; var n = $()(e), r = $()(t); return n.length === r.length && D()(n).call(n, function (n) { var r = e[n], i = t[n]; return null == r || null == i ? r === i : "object" === K()(r) && "object" === K()(i) ? isObjectEqual(r, i) : String(r) === String(i) }) } function resolvePath(e, t, n) { var r = e.charAt(0); if ("/" === r) return e; if ("?" === r || "#" === r) return t + e; var i = t.split("/"); n && i[i.length - 1] || i.pop(); for (var o = e.replace(/^\//, "").split("/"), a = 0; a < o.length; a++) { var s = o[a]; ".." === s ? i.pop() : "." !== s && i.push(s) } return "" !== i[0] && i.unshift(""), i.join("/") } function cleanPath(e) { return e.replace(/\/\//g, "/") } var ae = Y.a || function (e) { return "[object Array]" == Object.prototype.toString.call(e) }, se = pathToRegexp, le = parse, ue = function compile(e, t) { return tokensToFunction(parse(e, t), t) }, ce = tokensToFunction, de = tokensToRegExp, fe = new RegExp(["(\\\\.)", "([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"), "g"); function parse(e, t) { for (var n, r = [], i = 0, o = 0, a = "", s = t && t.delimiter || "/"; null != (n = fe.exec(e));) { var l = n[0], u = n[1], c = n.index; if (a += A()(e).call(e, o, c), o = c + l.length, u) a += u[1]; else { var d = e[o], f = n[2], h = n[3], p = n[4], m = n[5], g = n[6], v = n[7]; a && (r.push(a), a = ""); var y = null != f && null != d && d !== f, _ = "+" === g || "*" === g, b = "?" === g || "*" === g, w = n[2] || s, x = p || m; r.push({ name: h || i++, prefix: f || "", delimiter: w, optional: b, repeat: _, partial: y, asterisk: !!v, pattern: x ? escapeGroup(x) : v ? ".*" : "[^" + escapeString(w) + "]+?" }) } } return o < e.length && (a += e.substr(o)), a && r.push(a), r } function encodeURIComponentPretty(e) { return encodeURI(e).replace(/[\/?#]/g, function (e) { return "%" + e.charCodeAt(0).toString(16).toUpperCase() }) } function tokensToFunction(e, t) { for (var n = new Array(e.length), r = 0; r < e.length; r++)"object" === K()(e[r]) && (n[r] = new RegExp("^(?:" + e[r].pattern + ")$", flags(t))); return function (t, r) { for (var i = "", o = t || {}, a = (r || {}).pretty ? encodeURIComponentPretty : encodeURIComponent, s = 0; s < e.length; s++) { var l = e[s]; if ("string" != typeof l) { var u, c = o[l.name]; if (null == c) { if (l.optional) { l.partial && (i += l.prefix); continue } throw new TypeError('Expected "' + l.name + '" to be defined') } if (ae(c)) { if (!M()(l)) throw new TypeError('Expected "' + l.name + '" to not repeat, but received `' + T()(c) + "`"); if (0 === c.length) { if (l.optional) continue; throw new TypeError('Expected "' + l.name + '" to not be empty') } for (var d = 0; d < c.length; d++) { if (u = a(c[d]), !n[s].test(u)) throw new TypeError('Expected all "' + l.name + '" to match "' + l.pattern + '", but received `' + T()(u) + "`"); i += (0 === d ? l.prefix : l.delimiter) + u } } else { if (u = l.asterisk ? encodeURI(c).replace(/[?#]/g, function (e) { return "%" + e.charCodeAt(0).toString(16).toUpperCase() }) : a(c), !n[s].test(u)) throw new TypeError('Expected "' + l.name + '" to match "' + l.pattern + '", but received "' + u + '"'); i += l.prefix + u } } else i += l } return i } } function escapeString(e) { return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g, "\\$1") } function escapeGroup(e) { return e.replace(/([=!:$\/()])/g, "\\$1") } function attachKeys(e, t) { return e.keys = t, e } function flags(e) { return e && e.sensitive ? "" : "i" } function tokensToRegExp(e, t, n) { ae(t) || (n = t || n, t = []); for (var r = (n = n || {}).strict, i = !1 !== n.end, o = "", a = 0; a < e.length; a++) { var s = e[a]; if ("string" == typeof s) o += escapeString(s); else { var l = escapeString(s.prefix), u = "(?:" + s.pattern + ")"; t.push(s), M()(s) && (u += "(?:" + l + u + ")*"), o += u = s.optional ? s.partial ? l + "(" + u + ")?" : "(?:" + l + "(" + u + "))?" : l + "(" + u + ")" } } var c = escapeString(n.delimiter || "/"), d = A()(o).call(o, -c.length) === c; return r || (o = (d ? A()(o).call(o, 0, -c.length) : o) + "(?:" + c + "(?=$))?"), o += i ? "$" : r && d ? "" : "(?=" + c + "|$)", attachKeys(new RegExp("^" + o, flags(n)), t) } function pathToRegexp(e, t, n) { return ae(t) || (n = t || n, t = []), n = n || {}, e instanceof RegExp ? function regexpToRegexp(e, t) { var n = e.source.match(/\((?!\?)/g); if (n) for (var r = 0; r < n.length; r++)t.push({ name: r, prefix: null, delimiter: null, optional: !1, repeat: !1, partial: !1, asterisk: !1, pattern: null }); return attachKeys(e, t) }(e, t) : ae(e) ? function arrayToRegexp(e, t, n) { for (var r = [], i = 0; i < e.length; i++)r.push(pathToRegexp(e[i], t, n).source); return attachKeys(new RegExp("(?:" + r.join("|") + ")", flags(n)), t) }(e, t, n) : function stringToRegexp(e, t, n) { return tokensToRegExp(parse(e, n), t, n) }(e, t, n) } se.parse = le, se.compile = ue, se.tokensToFunction = ce, se.tokensToRegExp = de; var he = S()(null); function fillParams(e, t, n) { t = t || {}; try { var r = he[e] || (he[e] = se.compile(e)); return "string" == typeof t.pathMatch && (t[0] = t.pathMatch), r(t, { pretty: !0 }) } catch (e) { return "" } finally { delete t[0] } } function normalizeLocation(e, t, n, r) { var i = "string" == typeof e ? { path: e } : e; if (i._normalized) return i; if (i.name) { var o = (i = extend({}, e)).params; return o && "object" === K()(o) && (i.params = extend({}, o)), i } if (!i.path && (i.params || i.query || i.hash) && t) { (i = extend({}, i))._normalized = !0; var a = extend(extend({}, t.params), i.params); if (t.name) i.name = t.name, i.params = a; else if (t.matched.length) { var s = t.matched[t.matched.length - 1].path; i.path = fillParams(s, a, t.path) } else 0; return i } var l = function parsePath(e) { var t = "", n = "", r = R()(e).call(e, "#"); r >= 0 && (t = A()(e).call(e, r), e = A()(e).call(e, 0, r)); var i = R()(e).call(e, "?"); return i >= 0 && (n = A()(e).call(e, i + 1), e = A()(e).call(e, 0, i)), { path: e, query: n, hash: t } }(i.path || ""), u = t && t.path || "/", c = l.path ? resolvePath(l.path, u, n || i.append) : u, d = function resolveQuery(e, t, n) { void 0 === t && (t = {}); var r, i = n || parseQuery; try { r = i(e || "") } catch (e) { r = {} } for (var o in t) { var a = t[o]; r[o] = Y()(a) ? G()(a).call(a, re) : re(a) } return r }(l.query, i.query, r && r.options.parseQuery), f = i.hash || l.hash; return f && "#" !== f.charAt(0) && (f = "#" + f), { _normalized: !0, path: c, query: d, hash: f } } var pe, me = [String, Object], ge = [String, Array], ve = function noop() { }, ye = { name: "RouterLink", props: { to: { type: me, required: !0 }, tag: { type: String, default: "a" }, exact: Boolean, append: Boolean, replace: Boolean, activeClass: String, exactActiveClass: String, ariaCurrentValue: { type: String, default: "page" }, event: { type: ge, default: "click" } }, render: function render(e) { var t = this, n = this.$router, r = this.$route, i = n.resolve(this.to, r, this.append), o = i.location, a = i.route, s = i.href, l = {}, u = n.options.linkActiveClass, c = n.options.linkExactActiveClass, d = null == u ? "router-link-active" : u, f = null == c ? "router-link-exact-active" : c, h = null == this.activeClass ? d : this.activeClass, p = null == this.exactActiveClass ? f : this.exactActiveClass, m = a.redirectedFrom ? createRoute(null, normalizeLocation(a.redirectedFrom), null, n) : a; l[p] = isSameRoute(r, m), l[h] = this.exact ? l[p] : function isIncludedRoute(e, t) { var n; return 0 === R()(n = e.path.replace(ie, "/")).call(n, t.path.replace(ie, "/")) && (!t.hash || e.hash === t.hash) && function queryIncludes(e, t) { for (var n in t) if (!(n in e)) return !1; return !0 }(e.query, t.query) }(r, m); var g, v = l[p] ? this.ariaCurrentValue : null, y = function handler(e) { guardEvent(e) && (t.replace ? n.replace(o, ve) : n.push(o, ve)) }, _ = { click: guardEvent }; Y()(this.event) ? U()(g = this.event).call(g, function (e) { _[e] = y }) : _[this.event] = y; var b = { class: l }, w = !this.$scopedSlots.$hasNormal && this.$scopedSlots.default && this.$scopedSlots.default({ href: s, route: a, navigate: y, isActive: l[h], isExactActive: l[p] }); if (w) { if (1 === w.length) return w[0]; if (w.length > 1 || !w.length) return 0 === w.length ? e() : e("span", {}, w) } if ("a" === this.tag) b.on = _, b.attrs = { href: s, "aria-current": v }; else { var x = function findAnchor(e) { if (e) for (var t, n = 0; n < e.length; n++) { if ("a" === (t = e[n]).tag) return t; if (t.children && (t = findAnchor(t.children))) return t } }(this.$slots.default); if (x) { x.isStatic = !1; var C = x.data = extend({}, x.data); for (var S in C.on = C.on || {}, C.on) { var k = C.on[S]; S in _ && (C.on[S] = Y()(k) ? k : [k]) } for (var T in _) T in C.on ? C.on[T].push(_[T]) : C.on[T] = y; var L = x.data.attrs = extend({}, x.data.attrs); L.href = s, L["aria-current"] = v } else b.on = _ } return e(this.tag, b, this.$slots.default) } }; function guardEvent(e) { if (!(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey || e.defaultPrevented || void 0 !== e.button && 0 !== e.button)) { if (e.currentTarget && e.currentTarget.getAttribute) { var t = e.currentTarget.getAttribute("target"); if (/\b_blank\b/i.test(t)) return } return e.preventDefault && e.preventDefault(), !0 } } function install(e) { if (!install.installed || pe !== e) { install.installed = !0, pe = e; var t = function isDef(e) { return void 0 !== e }, n = function registerInstance(e, n) { var r = e.$options._parentVnode; t(r) && t(r = r.data) && t(r = r.registerRouteInstance) && r(e, n) }; e.mixin({ beforeCreate: function beforeCreate() { t(this.$options.router) ? (this._routerRoot = this, this._router = this.$options.router, this._router.init(this), e.util.defineReactive(this, "_route", this._router.history.current)) : this._routerRoot = this.$parent && this.$parent._routerRoot || this, n(this, this) }, destroyed: function destroyed() { n(this) } }), x()(e.prototype, "$router", { get: function get() { return this._routerRoot._router } }), x()(e.prototype, "$route", { get: function get() { return this._routerRoot._route } }), e.component("RouterView", X), e.component("RouterLink", ye); var r = e.config.optionMergeStrategies; r.beforeRouteEnter = r.beforeRouteLeave = r.beforeRouteUpdate = r.created } } var _e = "undefined" != typeof window; function createRouteMap(e, t, n, r) { var i = t || [], o = n || S()(null), a = r || S()(null); U()(e).call(e, function (e) { !function addRouteRecord(e, t, n, r, i, o) { var a = r.path; var s = r.name; 0; var l = r.pathToRegexpOptions || {}; var u = function normalizePath(e, t, n) { n || (e = e.replace(/\/$/, "")); if ("/" === e[0]) return e; if (null == t) return e; return cleanPath(t.path + "/" + e) }(a, i, l.strict); "boolean" == typeof r.caseSensitive && (l.sensitive = r.caseSensitive); var c = { path: u, regex: function compileRouteRegex(e, t) { var n = se(e, [], t); 0; return n }(u, l), components: r.components || { default: r.component }, instances: {}, name: s, parent: i, matchAs: o, redirect: r.redirect, beforeEnter: r.beforeEnter, meta: r.meta || {}, props: null == r.props ? {} : r.components ? r.props : { default: r.props } }; if (r.children) { var d; U()(d = r.children).call(d, function (r) { var i = o ? cleanPath(o + "/" + r.path) : void 0; addRouteRecord(e, t, n, r, c, i) }) } t[c.path] || (e.push(c.path), t[c.path] = c); if (void 0 !== r.alias) for (var f = Y()(r.alias) ? r.alias : [r.alias], h = 0; h < f.length; ++h) { var p = f[h]; 0; var m = { path: p, children: r.children }; addRouteRecord(e, t, n, m, i, c.path || "/") } s && (n[s] || (n[s] = c)) }(i, o, a, e) }); for (var s = 0, l = i.length; s < l; s++)"*" === i[s] && (i.push(b()(i).call(i, s, 1)[0]), l--, s--); return { pathList: i, pathMap: o, nameMap: a } } function createMatcher(e, t) { var n = createRouteMap(e), r = n.pathList, i = n.pathMap, o = n.nameMap; function match(e, n, a) { var s = normalizeLocation(e, n, !1, t), l = s.name; if (l) { var u, c, d = o[l]; if (!d) return _createRoute(null, s); var f = G()(u = z()(c = y()(d.regex)).call(c, function (e) { return !e.optional })).call(u, function (e) { return e.name }); if ("object" !== K()(s.params) && (s.params = {}), n && "object" === K()(n.params)) for (var h in n.params) !(h in s.params) && R()(f).call(f, h) > -1 && (s.params[h] = n.params[h]); return s.path = fillParams(d.path, s.params), _createRoute(d, s, a) } if (s.path) { s.params = {}; for (var p = 0; p < r.length; p++) { var m = r[p], g = i[m]; if (matchRoute(g.regex, s.path, s.params)) return _createRoute(g, s, a) } } return _createRoute(null, s) } function redirect(e, n) { var r = e.redirect, i = "function" == typeof r ? r(createRoute(e, n, null, t)) : r; if ("string" == typeof i && (i = { path: i }), !i || "object" !== K()(i)) return _createRoute(null, n); var a = i, s = a.name, l = a.path, u = n.query, c = n.hash, d = n.params; if (u = a.hasOwnProperty("query") ? a.query : u, c = a.hasOwnProperty("hash") ? a.hash : c, d = a.hasOwnProperty("params") ? a.params : d, s) { o[s]; return match({ _normalized: !0, name: s, query: u, hash: c, params: d }, void 0, n) } if (l) { var f = function resolveRecordPath(e, t) { return resolvePath(e, t.parent ? t.parent.path : "/", !0) }(l, e); return match({ _normalized: !0, path: fillParams(f, d), query: u, hash: c }, void 0, n) } return _createRoute(null, n) } function _createRoute(e, n, r) { return e && e.redirect ? redirect(e, r || n) : e && e.matchAs ? function alias(e, t, n) { var r = match({ _normalized: !0, path: fillParams(n, t.params) }); if (r) { var i = r.matched, o = i[i.length - 1]; return t.params = r.params, _createRoute(o, t) } return _createRoute(null, t) }(0, n, e.matchAs) : createRoute(e, n, r, t) } return { match: match, addRoutes: function addRoutes(e) { createRouteMap(e, r, i, o) } } } function matchRoute(e, t, n) { var r = t.match(e); if (!r) return !1; if (!n) return !0; for (var i = 1, o = r.length; i < o; ++i) { var a = y()(e)[i - 1], s = "string" == typeof r[i] ? decodeURIComponent(r[i]) : r[i]; a && (n[a.name || "pathMatch"] = s) } return !0 } var be = _e && window.performance && window.performance.now ? window.performance : Date; function genStateKey() { return be.now().toFixed(3) } var we = genStateKey(); function getStateKey() { return we } function setStateKey(e) { return we = e } var xe = S()(null); function setupScroll() { "scrollRestoration" in window.history && (window.history.scrollRestoration = "manual"); var e = window.location.protocol + "//" + window.location.host, t = window.location.href.replace(e, ""), n = extend({}, window.history.state); return n.key = getStateKey(), window.history.replaceState(n, "", t), window.addEventListener("popstate", handlePopState), function () { window.removeEventListener("popstate", handlePopState) } } function handleScroll(e, t, n, r) { if (e.app) { var i = e.options.scrollBehavior; i && e.app.$nextTick(function () { var o = function getScrollPosition() { var e = getStateKey(); if (e) return xe[e] }(), a = i.call(e, t, n, r ? o : null); a && ("function" == typeof a.then ? a.then(function (e) { scrollToPosition(e, o) }).catch(function (e) { 0 }) : scrollToPosition(a, o)) }) } } function saveScrollPosition() { var e = getStateKey(); e && (xe[e] = { x: window.pageXOffset, y: window.pageYOffset }) } function handlePopState(e) { saveScrollPosition(), e.state && e.state.key && setStateKey(e.state.key) } function isValidPosition(e) { return isNumber(e.x) || isNumber(e.y) } function normalizePosition(e) { return { x: isNumber(e.x) ? e.x : window.pageXOffset, y: isNumber(e.y) ? e.y : window.pageYOffset } } function isNumber(e) { return "number" == typeof e } var Ce = /^#\d/; function scrollToPosition(e, t) { var n = "object" === K()(e); if (n && "string" == typeof e.selector) { var r, i = Ce.test(e.selector) ? document.getElementById(A()(r = e.selector).call(r, 1)) : document.querySelector(e.selector); if (i) { var o = e.offset && "object" === K()(e.offset) ? e.offset : {}; t = function getElementPosition(e, t) { var n = document.documentElement.getBoundingClientRect(), r = e.getBoundingClientRect(); return { x: r.left - n.left - t.x, y: r.top - n.top - t.y } }(i, o = function normalizeOffset(e) { return { x: isNumber(e.x) ? e.x : 0, y: isNumber(e.y) ? e.y : 0 } }(o)) } else isValidPosition(e) && (t = normalizePosition(e)) } else n && isValidPosition(e) && (t = normalizePosition(e)); t && window.scrollTo(t.x, t.y) } var Se, ke = _e && (Se = window.navigator.userAgent, (-1 === R()(Se).call(Se, "Android 2.") && -1 === R()(Se).call(Se, "Android 4.0") || -1 === R()(Se).call(Se, "Mobile Safari") || -1 !== R()(Se).call(Se, "Chrome") || -1 !== R()(Se).call(Se, "Windows Phone")) && window.history && "function" == typeof window.history.pushState); function pushState(e, t) { saveScrollPosition(); var n = window.history; try { if (t) { var r = extend({}, n.state); r.key = getStateKey(), n.replaceState(r, "", e) } else n.pushState({ key: setStateKey(genStateKey()) }, "", e) } catch (n) { window.location[t ? "replace" : "assign"](e) } } function replaceState(e) { pushState(e, !0) } function runQueue(e, t, n) { !function step(r) { r >= e.length ? n() : e[r] ? t(e[r], function () { step(r + 1) }) : step(r + 1) }(0) } var Te = { redirected: 2, aborted: 4, cancelled: 8, duplicated: 16 }; function createNavigationRedirectedError(e, t) { return createRouterError(e, t, Te.redirected, 'Redirected when going from "' + e.fullPath + '" to "' + function stringifyRoute(e) { if ("string" == typeof e) return e; if ("path" in e) return e.path; var t = {}; return U()(Le).call(Le, function (n) { n in e && (t[n] = e[n]) }), T()(t, null, 2) }(t) + '" via a navigation guard.') } function createNavigationCancelledError(e, t) { return createRouterError(e, t, Te.cancelled, 'Navigation cancelled from "' + e.fullPath + '" to "' + t.fullPath + '" with a new navigation.') } function createRouterError(e, t, n, r) { var i = new Error(r); return i._isRouter = !0, i.from = e, i.to = t, i.type = n, i } var Le = ["params", "query", "hash"]; function isError(e) { var t; return R()(t = Object.prototype.toString.call(e)).call(t, "Error") > -1 } function isNavigationFailure(e, t) { return isError(e) && e._isRouter && (null == t || e.type === t) } function resolveAsyncComponents(e) { return function (t, n, r) { var i = !1, o = 0, a = null; flatMapComponents(e, function (e, t, n, s) { if ("function" == typeof e && void 0 === e.cid) { i = !0, o++; var l, u = once(function (t) { (function isESModule(e) { return e.__esModule || Me && "Module" === e[f.a] })(t) && (t = t.default), e.resolved = "function" == typeof t ? t : pe.extend(t), n.components[s] = t, --o <= 0 && r() }), c = once(function (e) { var t = "Failed to resolve async component " + s + ": " + e; a || (a = isError(e) ? e : new Error(t), r(a)) }); try { l = e(u, c) } catch (e) { c(e) } if (l) if ("function" == typeof l.then) l.then(u, c); else { var d = l.component; d && "function" == typeof d.then && d.then(u, c) } } }), i || r() } } function flatMapComponents(e, t) { return flatten(G()(e).call(e, function (e) { var n; return G()(n = $()(e.components)).call(n, function (n) { return t(e.components[n], e.instances[n], e, n) }) })) } function flatten(e) { return g()(Array.prototype).apply([], e) } var Me = "function" == typeof p.a && "symbol" === K()(f.a); function once(e) { var t = !1; return function () { for (var n = [], r = arguments.length; r--;)n[r] = arguments[r]; if (!t) return t = !0, e.apply(this, n) } } var Ee = function History(e, t) { this.router = e, this.base = function normalizeBase(e) { if (!e) if (_e) { var t = document.querySelector("base"); e = (e = t && t.getAttribute("href") || "/").replace(/^https?:\/\/[^\/]+/, "") } else e = "/"; "/" !== e.charAt(0) && (e = "/" + e); return e.replace(/\/$/, "") }(t), this.current = oe, this.pending = null, this.ready = !1, this.readyCbs = [], this.readyErrorCbs = [], this.errorCbs = [], this.listeners = [] }; function extractGuards(e, t, n, r) { var i = flatMapComponents(e, function (e, r, i, o) { var a = function extractGuard(e, t) { "function" != typeof e && (e = pe.extend(e)); return e.options[t] }(e, t); if (a) return Y()(a) ? G()(a).call(a, function (e) { return n(e, r, i, o) }) : n(a, r, i, o) }); return flatten(r ? c()(i).call(i) : i) } function bindGuard(e, t) { if (t) return function boundRouteGuard() { return e.apply(t, arguments) } } Ee.prototype.listen = function listen(e) { this.cb = e }, Ee.prototype.onReady = function onReady(e, t) { this.ready ? e() : (this.readyCbs.push(e), t && this.readyErrorCbs.push(t)) }, Ee.prototype.onError = function onError(e) { this.errorCbs.push(e) }, Ee.prototype.transitionTo = function transitionTo(e, t, n) { var r, i = this; try { r = this.router.match(e, this.current) } catch (e) { var o; throw U()(o = this.errorCbs).call(o, function (t) { t(e) }), e } this.confirmTransition(r, function () { var e, n, o = i.current; (i.updateRoute(r), t && t(r), i.ensureURL(), U()(e = i.router.afterHooks).call(e, function (e) { e && e(r, o) }), i.ready) || (i.ready = !0, U()(n = i.readyCbs).call(n, function (e) { e(r) })) }, function (e) { var t, o; (n && n(e), e && !i.ready) && (i.ready = !0, isNavigationFailure(e, Te.redirected) ? U()(t = i.readyCbs).call(t, function (e) { e(r) }) : U()(o = i.readyErrorCbs).call(o, function (t) { t(e) })) }) }, Ee.prototype.confirmTransition = function confirmTransition(e, t, n) { var r, i = this, o = this.current, a = function abort(e) { var t; !isNavigationFailure(e) && isError(e) && (i.errorCbs.length ? U()(t = i.errorCbs).call(t, function (t) { t(e) }) : (warn(), console.error(e))); n && n(e) }, s = e.matched.length - 1, u = o.matched.length - 1; if (isSameRoute(e, o) && s === u && e.matched[s] === o.matched[u]) return this.ensureURL(), a(function createNavigationDuplicatedError(e, t) { var n = createRouterError(e, t, Te.duplicated, 'Avoided redundant navigation to current location: "' + e.fullPath + '".'); return n.name = "NavigationDuplicated", n }(o, e)); var c = function resolveQueue(e, t) { var n, r = Math.max(e.length, t.length); for (n = 0; n < r && e[n] === t[n]; n++); return { updated: A()(t).call(t, 0, n), activated: A()(t).call(t, n), deactivated: A()(e).call(e, n) } }(this.current.matched, e.matched), d = c.updated, f = c.deactivated, h = c.activated, p = g()(r = []).call(r, function extractLeaveGuards(e) { return extractGuards(e, "beforeRouteLeave", bindGuard, !0) }(f), this.router.beforeHooks, function extractUpdateHooks(e) { return extractGuards(e, "beforeRouteUpdate", bindGuard) }(d), G()(h).call(h, function (e) { return e.beforeEnter }), resolveAsyncComponents(h)); this.pending = e; var m = function iterator(t, n) { if (i.pending !== e) return a(createNavigationCancelledError(o, e)); try { t(e, o, function (t) { !1 === t ? (i.ensureURL(!0), a(function createNavigationAbortedError(e, t) { return createRouterError(e, t, Te.aborted, 'Navigation aborted from "' + e.fullPath + '" to "' + t.fullPath + '" via a navigation guard.') }(o, e))) : isError(t) ? (i.ensureURL(!0), a(t)) : "string" == typeof t || "object" === K()(t) && ("string" == typeof t.path || "string" == typeof t.name) ? (a(createNavigationRedirectedError(o, e)), "object" === K()(t) && t.replace ? i.replace(t) : i.push(t)) : n(t) }) } catch (e) { a(e) } }; runQueue(p, m, function () { var n = [], r = function extractEnterGuards(e, t, n) { return extractGuards(e, "beforeRouteEnter", function (e, r, i, o) { return function bindEnterGuard(e, t, n, r, i) { return function routeEnterGuard(o, a, s) { return e(o, a, function (e) { "function" == typeof e && r.push(function () { !function poll(e, t, n, r) { t[n] && !t[n]._isBeingDestroyed ? e(t[n]) : r() && l()(function () { poll(e, t, n, r) }, 16) }(e, t.instances, n, i) }), s(e) }) } }(e, i, o, t, n) }) }(h, n, function isValid() { return i.current === e }); runQueue(g()(r).call(r, i.router.resolveHooks), m, function () { if (i.pending !== e) return a(createNavigationCancelledError(o, e)); i.pending = null, t(e), i.router.app && i.router.app.$nextTick(function () { U()(n).call(n, function (e) { e() }) }) }) }) }, Ee.prototype.updateRoute = function updateRoute(e) { this.current = e, this.cb && this.cb(e) }, Ee.prototype.setupListeners = function setupListeners() { }, Ee.prototype.teardownListeners = function teardownListeners() { var e; U()(e = this.listeners).call(e, function (e) { e() }), this.listeners = [] }; var Ae = function (e) { function HTML5History(t, n) { e.call(this, t, n), this._startLocation = getLocation(this.base) } return e && (HTML5History.__proto__ = e), HTML5History.prototype = S()(e && e.prototype), HTML5History.prototype.constructor = HTML5History, HTML5History.prototype.setupListeners = function setupListeners() { var e = this; if (!(this.listeners.length > 0)) { var t = this.router, n = t.options.scrollBehavior, r = ke && n; r && this.listeners.push(setupScroll()); var i = function handleRoutingEvent() { var n = e.current, i = getLocation(e.base); e.current === oe && i === e._startLocation || e.transitionTo(i, function (e) { r && handleScroll(t, e, n, !0) }) }; window.addEventListener("popstate", i), this.listeners.push(function () { window.removeEventListener("popstate", i) }) } }, HTML5History.prototype.go = function go(e) { window.history.go(e) }, HTML5History.prototype.push = function push(e, t, n) { var r = this, i = this.current; this.transitionTo(e, function (e) { pushState(cleanPath(r.base + e.fullPath)), handleScroll(r.router, e, i, !1), t && t(e) }, n) }, HTML5History.prototype.replace = function replace(e, t, n) { var r = this, i = this.current; this.transitionTo(e, function (e) { replaceState(cleanPath(r.base + e.fullPath)), handleScroll(r.router, e, i, !1), t && t(e) }, n) }, HTML5History.prototype.ensureURL = function ensureURL(e) { if (getLocation(this.base) !== this.current.fullPath) { var t = cleanPath(this.base + this.current.fullPath); e ? pushState(t) : replaceState(t) } }, HTML5History.prototype.getCurrentLocation = function getCurrentLocation() { return getLocation(this.base) }, HTML5History }(Ee); function getLocation(e) { var t, n = decodeURI(window.location.pathname); return e && 0 === R()(t = n.toLowerCase()).call(t, e.toLowerCase()) && (n = A()(n).call(n, e.length)), (n || "/") + window.location.search + window.location.hash } var Pe = function (e) { function HashHistory(t, n, r) { e.call(this, t, n), r && function checkFallback(e) { var t = getLocation(e); if (!/^\/#/.test(t)) return window.location.replace(cleanPath(e + "/#" + t)), !0 }(this.base) || ensureSlash() } return e && (HashHistory.__proto__ = e), HashHistory.prototype = S()(e && e.prototype), HashHistory.prototype.constructor = HashHistory, HashHistory.prototype.setupListeners = function setupListeners() { var e = this; if (!(this.listeners.length > 0)) { var t = this.router.options.scrollBehavior, n = ke && t; n && this.listeners.push(setupScroll()); var r = function handleRoutingEvent() { var t = e.current; ensureSlash() && e.transitionTo(getHash(), function (r) { n && handleScroll(e.router, r, t, !0), ke || replaceHash(r.fullPath) }) }, i = ke ? "popstate" : "hashchange"; window.addEventListener(i, r), this.listeners.push(function () { window.removeEventListener(i, r) }) } }, HashHistory.prototype.push = function push(e, t, n) { var r = this, i = this.current; this.transitionTo(e, function (e) { pushHash(e.fullPath), handleScroll(r.router, e, i, !1), t && t(e) }, n) }, HashHistory.prototype.replace = function replace(e, t, n) { var r = this, i = this.current; this.transitionTo(e, function (e) { replaceHash(e.fullPath), handleScroll(r.router, e, i, !1), t && t(e) }, n) }, HashHistory.prototype.go = function go(e) { window.history.go(e) }, HashHistory.prototype.ensureURL = function ensureURL(e) { var t = this.current.fullPath; getHash() !== t && (e ? pushHash(t) : replaceHash(t)) }, HashHistory.prototype.getCurrentLocation = function getCurrentLocation() { return getHash() }, HashHistory }(Ee); function ensureSlash() { var e = getHash(); return "/" === e.charAt(0) || (replaceHash("/" + e), !1) } function getHash() { var e = window.location.href, t = R()(e).call(e, "#"); if (t < 0) return ""; e = A()(e).call(e, t + 1); var n = R()(e).call(e, "?"); if (n < 0) { var r = R()(e).call(e, "#"); e = r > -1 ? decodeURI(A()(e).call(e, 0, r)) + A()(e).call(e, r) : decodeURI(e) } else e = decodeURI(A()(e).call(e, 0, n)) + A()(e).call(e, n); return e } function getUrl(e) { var t = window.location.href, n = R()(t).call(t, "#"); return (n >= 0 ? A()(t).call(t, 0, n) : t) + "#" + e } function pushHash(e) { ke ? pushState(getUrl(e)) : window.location.hash = e } function replaceHash(e) { ke ? replaceState(getUrl(e)) : window.location.replace(getUrl(e)) } var Re = function (e) { function AbstractHistory(t, n) { e.call(this, t, n), this.stack = [], this.index = -1 } return e && (AbstractHistory.__proto__ = e), AbstractHistory.prototype = S()(e && e.prototype), AbstractHistory.prototype.constructor = AbstractHistory, AbstractHistory.prototype.push = function push(e, t, n) { var r = this; this.transitionTo(e, function (e) { var n, i; r.stack = g()(n = A()(i = r.stack).call(i, 0, r.index + 1)).call(n, e), r.index++, t && t(e) }, n) }, AbstractHistory.prototype.replace = function replace(e, t, n) { var r = this; this.transitionTo(e, function (e) { var n, i; r.stack = g()(n = A()(i = r.stack).call(i, 0, r.index)).call(n, e), t && t(e) }, n) }, AbstractHistory.prototype.go = function go(e) { var t = this, n = this.index + e; if (!(n < 0 || n >= this.stack.length)) { var r = this.stack[n]; this.confirmTransition(r, function () { t.index = n, t.updateRoute(r) }, function (e) { isNavigationFailure(e, Te.duplicated) && (t.index = n) }) } }, AbstractHistory.prototype.getCurrentLocation = function getCurrentLocation() { var e = this.stack[this.stack.length - 1]; return e ? e.fullPath : "/" }, AbstractHistory.prototype.ensureURL = function ensureURL() { }, AbstractHistory }(Ee), Oe = function VueRouter(e) { void 0 === e && (e = {}), this.app = null, this.apps = [], this.options = e, this.beforeHooks = [], this.resolveHooks = [], this.afterHooks = [], this.matcher = createMatcher(e.routes || [], this); var t = e.mode || "hash"; switch (this.fallback = "history" === t && !ke && !1 !== e.fallback, this.fallback && (t = "hash"), _e || (t = "abstract"), this.mode = t, t) { case "history": this.history = new Ae(this, e.base); break; case "hash": this.history = new Pe(this, e.base, this.fallback); break; case "abstract": this.history = new Re(this, e.base); break; default: 0 } }, De = { currentRoute: { configurable: !0 } }; function registerHook(e, t) { return e.push(t), function () { var n = R()(e).call(e, t); n > -1 && b()(e).call(e, n, 1) } } Oe.prototype.match = function match(e, t, n) { return this.matcher.match(e, t, n) }, De.currentRoute.get = function () { return this.history && this.history.current }, Oe.prototype.init = function init(e) { var t = this; if (this.apps.push(e), e.$once("hook:destroyed", function () { var n, r, i = R()(n = t.apps).call(n, e); i > -1 && b()(r = t.apps).call(r, i, 1); t.app === e && (t.app = t.apps[0] || null), t.app || t.history.teardownListeners() }), !this.app) { this.app = e; var n = this.history; if (n instanceof Ae || n instanceof Pe) { var r = function setupListeners(e) { n.setupListeners(), function handleInitialScroll(e) { var r = n.current, i = t.options.scrollBehavior; ke && i && "fullPath" in e && handleScroll(t, e, r, !1) }(e) }; n.transitionTo(n.getCurrentLocation(), r, r) } n.listen(function (e) { var n; U()(n = t.apps).call(n, function (t) { t._route = e }) }) } }, Oe.prototype.beforeEach = function beforeEach(e) { return registerHook(this.beforeHooks, e) }, Oe.prototype.beforeResolve = function beforeResolve(e) { return registerHook(this.resolveHooks, e) }, Oe.prototype.afterEach = function afterEach(e) { return registerHook(this.afterHooks, e) }, Oe.prototype.onReady = function onReady(e, t) { this.history.onReady(e, t) }, Oe.prototype.onError = function onError(e) { this.history.onError(e) }, Oe.prototype.push = function push(e, t, n) { var r = this; if (!t && !n && void 0 !== a.a) return new a.a(function (t, n) { r.history.push(e, t, n) }); this.history.push(e, t, n) }, Oe.prototype.replace = function replace(e, t, n) { var r = this; if (!t && !n && void 0 !== a.a) return new a.a(function (t, n) { r.history.replace(e, t, n) }); this.history.replace(e, t, n) }, Oe.prototype.go = function go(e) { this.history.go(e) }, Oe.prototype.back = function back() { this.go(-1) }, Oe.prototype.forward = function forward() { this.go(1) }, Oe.prototype.getMatchedComponents = function getMatchedComponents(e) { var t, n = e ? e.matched ? e : this.resolve(e).route : this.currentRoute; return n ? g()([]).apply([], G()(t = n.matched).call(t, function (e) { var t; return G()(t = $()(e.components)).call(t, function (t) { return e.components[t] }) })) : [] }, Oe.prototype.resolve = function resolve(e, t, n) { var r = normalizeLocation(e, t = t || this.history.current, n, this), i = this.match(r, t), o = i.redirectedFrom || i.fullPath; return { location: r, route: i, href: function createHref(e, t, n) { var r = "hash" === n ? "#" + t : t; return e ? cleanPath(e + "/" + r) : r }(this.history.base, o, this.mode), normalizedTo: r, resolved: i } }, Oe.prototype.addRoutes = function addRoutes(e) { this.matcher.addRoutes(e), this.history.current !== oe && this.history.transitionTo(this.history.getCurrentLocation()) }, i()(Oe.prototype, De), Oe.install = install, Oe.version = "3.4.2", Oe.isNavigationFailure = isNavigationFailure, Oe.NavigationFailureType = Te, _e && window.Vue && window.Vue.use(Oe), t.a = Oe }, function(e, t, n) { e.exports = n(3374) }, function(e, n, r) { var i, o, a; r(24), r(29), r(16), r(51), r(25); var s, l = r(17), u = r(620), c = r(447), d = r(446), f = r(43); s = function (e) { "use strict"; var t = function () { function t(e, n) { var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "https://{user}.carto.com"; if (c(this, t), !e) throw new Error("Username is required"); if (!n) throw new Error("Api key is required"); this._username = e, this._apiKey = n, this._serverUrlTemplate = r } return d(t, [{ key: "username", get: function get() { return this._username }, set: function set(e) { this._username = e } }, { key: "apiKey", get: function get() { return this._apiKey }, set: function set(e) { this._apiKey = e } }, { key: "serverUrlTemplate", get: function get() { return this._serverUrlTemplate }, set: function set(e) { this._serverUrlTemplate = e } }, { key: "serverURL", get: function get() { var e = this._serverUrlTemplate.replace("{user}", this._username); return u(e).call(e, "/") || (e += "/"), e } }], [{ key: "DEFAULT_SERVER_URL_TEMPLATE", get: function get() { return "https://{user}.carto.com" } }, { key: "DEFAULT_PUBLIC_API_KEY", get: function get() { return "default_public" } }]), t }(), n = new t("username", "default_public"); e.Credentials = t, e.MetricsEvent = function () { function _class(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (e) { var t = 16 * Math.random() | 0; return ("x" === e ? t : 3 & t | 8).toString(16) }); c(this, _class), this.source = e, this.name = t, this.groupId = n } return d(_class, [{ key: "getHeaders", value: function getHeaders() { return [["Carto-Event-Source", this.source], ["Carto-Event", this.name], ["Carto-Event-Group-Id", this.groupId]] } }]), _class }(), e.defaultCredentials = n, e.setDefaultCredentials = function (e) { n.username = e.username, n.apiKey = e.apiKey || "default_public", n.serverUrlTemplate = e.serverUrlTemplate || "https://{user}.carto.com" }, l(e, "__esModule", { value: !0 }) }, "object" == f(n) && void 0 !== e ? s(n) : (o = [n], void 0 === (a = "function" == typeof (i = s) ? i.apply(n, o) : i) || (e.exports = a)) }, function(e, r, i) { "use strict"; i(23), i(24), i(128), i(29), i(16), i(51), i(68), i(25), i(35); var o = i(19), a = i.n(o), s = i(27), l = i.n(s), u = i(120), c = i.n(u), f = (i(239), i(45)), h = i.n(f), p = i(18), m = i.n(p), g = i(55), v = i.n(g), y = i(38), _ = i.n(y), b = i(36), w = i.n(b), x = i(6), C = i.n(x), S = i(7), k = i.n(S), T = i(10), L = i.n(T), M = i(17), E = i.n(M), A = i(12), P = i.n(A), R = i(116), O = i.n(R), D = i(111), F = i.n(D), I = i(11), N = i.n(I), $ = i(30), B = i.n($), z = i(26), j = i.n(z), U = i(43), q = i.n(U); function warn(e, t) { "undefined" != typeof console && (console.warn("[vue-i18n] " + e), t && console.warn(t.stack)) } function isObject(e) { return null !== e && "object" === q()(e) } var H = Object.prototype.toString, V = "[object Object]"; function isPlainObject(e) { return H.call(e) === V } function isNull(e) { return null === e || void 0 === e } function parseArgs() { for (var e = [], t = arguments.length; t--;)e[t] = arguments[t]; var n = null, r = null; return 1 === e.length ? isObject(e[0]) || j()(e[0]) ? r = e[0] : "string" == typeof e[0] && (n = e[0]) : 2 === e.length && ("string" == typeof e[0] && (n = e[0]), (isObject(e[1]) || j()(e[1])) && (r = e[1])), { locale: n, params: r } } function looseClone(e) { return JSON.parse(B()(e)) } var G = Object.prototype.hasOwnProperty; function hasOwn(e, t) { return G.call(e, t) } function merge(e) { for (var t = arguments, n = Object(e), r = 1; r < arguments.length; r++) { var i = t[r]; if (void 0 !== i && null !== i) { var o = void 0; for (o in i) hasOwn(i, o) && (isObject(i[o]) ? n[o] = merge(n[o], i[o]) : n[o] = i[o]) } } return n } function looseEqual(e, t) { if (e === t) return !0; var n = isObject(e), r = isObject(t); if (!n || !r) return !n && !r && String(e) === String(t); try { var i = j()(e), o = j()(t); if (i && o) return e.length === t.length && O()(e).call(e, function (e, n) { return looseEqual(e, t[n]) }); if (i || o) return !1; var a = P()(e), s = P()(t); return a.length === s.length && O()(a).call(a, function (n) { return looseEqual(e[n], t[n]) }) } catch (e) { return !1 } } var W, Y = { beforeCreate: function beforeCreate() { var e = this.$options; if (e.i18n = e.i18n || (e.__i18n ? {} : null), e.i18n) if (e.i18n instanceof _e) { if (e.__i18n) try { var t, n, r = {}; k()(t = e.__i18n).call(t, function (e) { r = merge(r, JSON.parse(e)) }), k()(n = P()(r)).call(n, function (t) { e.i18n.mergeLocaleMessage(t, r[t]) }) } catch (e) { 0 } this._i18n = e.i18n, this._i18nWatcher = this._i18n.watchI18nData(), this._i18n.subscribeDataChanging(this), this._subscribing = !0 } else if (isPlainObject(e.i18n)) { if (this.$root && this.$root.$i18n && this.$root.$i18n instanceof _e && (e.i18n.root = this.$root, e.i18n.formatter = this.$root.$i18n.formatter, e.i18n.fallbackLocale = this.$root.$i18n.fallbackLocale, e.i18n.silentTranslationWarn = this.$root.$i18n.silentTranslationWarn, e.i18n.silentFallbackWarn = this.$root.$i18n.silentFallbackWarn, e.i18n.pluralizationRules = this.$root.$i18n.pluralizationRules, e.i18n.preserveDirectiveContent = this.$root.$i18n.preserveDirectiveContent), e.__i18n) try { var i, o = {}; k()(i = e.__i18n).call(i, function (e) { o = merge(o, JSON.parse(e)) }), e.i18n.messages = o } catch (e) { 0 } this._i18n = new _e(e.i18n), this._i18nWatcher = this._i18n.watchI18nData(), this._i18n.subscribeDataChanging(this), this._subscribing = !0, (void 0 === e.i18n.sync || e.i18n.sync) && (this._localeWatcher = this.$i18n.watchLocale()) } else 0; else this.$root && this.$root.$i18n && this.$root.$i18n instanceof _e ? (this._i18n = this.$root.$i18n, this._i18n.subscribeDataChanging(this), this._subscribing = !0) : e.parent && e.parent.$i18n && e.parent.$i18n instanceof _e && (this._i18n = e.parent.$i18n, this._i18n.subscribeDataChanging(this), this._subscribing = !0) }, beforeDestroy: function beforeDestroy() { if (this._i18n) { var e = this; this.$nextTick(function () { e._subscribing && (e._i18n.unsubscribeDataChanging(e), delete e._subscribing), e._i18nWatcher && (e._i18nWatcher(), e._i18n.destroyVM(), delete e._i18nWatcher), e._localeWatcher && (e._localeWatcher(), delete e._localeWatcher), e._i18n = null }) } } }, Z = { name: "i18n", functional: !0, props: { tag: { type: String, default: "span" }, path: { type: String, required: !0 }, locale: { type: String }, places: { type: [Array, Object] } }, render: function render(e, t) { var n, r = t.props, i = t.data, o = t.children, a = t.parent.$i18n; if (o = C()(n = o || []).call(n, function (e) { var t; return e.tag || (e.text = w()(t = e.text).call(t)) }), !a) return o; var s, l = r.path, u = r.locale, c = {}, d = r.places || {}, f = (j()(d) ? d.length : P()(d).length, O()(o).call(o, function (e) { if (e.data && e.data.attrs) { var t = e.data.attrs.place; return void 0 !== t && "" !== t } })); j()(d) ? k()(d).call(d, function (e, t) { c[t] = e }) : k()(s = P()(d)).call(s, function (e) { c[e] = d[e] }); return k()(o).call(o, function (e, t) { var n = f ? "" + e.data.attrs.place : "" + t; c[n] = e }), e(r.tag, i, a.i(l, u, c)) } }; function bind(e, n, r) { assert(e, r) && t(e, n, r) } function update(e, n, r, i) { if (assert(e, r)) { var o = r.context.$i18n; (function localeEqual(e, t) { var n = t.context; return e._locale === n.$i18n.locale })(e, r) && looseEqual(n.value, n.oldValue) && looseEqual(e._localeMessage, o.getLocaleMessage(o.locale)) || t(e, n, r) } } function unbind(e, t, n, r) { if (n.context) { var i = n.context.$i18n || {}; t.modifiers.preserve || i.preserveDirectiveContent || (e.textContent = ""), e._vt = void 0, delete e._vt, e._locale = void 0, delete e._locale, e._localeMessage = void 0, delete e._localeMessage } else warn("Vue instance does not exists in VNode context") } function assert(e, t) { var n = t.context; return n ? !!n.$i18n || (warn("VueI18n instance does not exists in Vue instance"), !1) : (warn("Vue instance does not exists in VNode context"), !1) } function t(e, t, n) { var r, i, o = function parseValue(e) { var t, n, r, i; "string" == typeof e ? t = e : isPlainObject(e) && (t = e.path, n = e.locale, r = e.args, i = e.choice); return { path: t, locale: n, args: r, choice: i } }(t.value), a = o.path, s = o.locale, l = o.args, u = o.choice; if (a || s || l) if (a) { var c, d, f = n.context; if (u) e._vt = e.textContent = (r = f.$i18n).tc.apply(r, L()(c = [a, u]).call(c, makeParams(s, l))); else e._vt = e.textContent = (i = f.$i18n).t.apply(i, L()(d = [a]).call(d, makeParams(s, l))); e._locale = f.$i18n.locale, e._localeMessage = f.$i18n.getLocaleMessage(f.$i18n.locale) } else warn("`path` is required in v-t directive"); else warn("value type not supported") } function makeParams(e, t) { var n = []; return e && n.push(e), t && (j()(t) || isPlainObject(t)) && n.push(t), n } function install(e) { install.installed = !0; (W = e).version && Number(W.version.split(".")[0]); (function extend(e) { e.prototype.hasOwnProperty("$i18n") || E()(e.prototype, "$i18n", { get: function get() { return this._i18n } }), e.prototype.$t = function (e) { for (var t, n = [], r = arguments.length - 1; r-- > 0;)n[r] = arguments[r + 1]; var i = this.$i18n; return i._t.apply(i, L()(t = [e, i.locale, i._getMessages(), this]).call(t, n)) }, e.prototype.$tc = function (e, t) { for (var n, r = [], i = arguments.length - 2; i-- > 0;)r[i] = arguments[i + 2]; var o = this.$i18n; return o._tc.apply(o, L()(n = [e, o.locale, o._getMessages(), this, t]).call(n, r)) }, e.prototype.$te = function (e, t) { var n = this.$i18n; return n._te(e, n.locale, n._getMessages(), t) }, e.prototype.$d = function (e) { for (var t, n, r = [], i = arguments.length - 1; i-- > 0;)r[i] = arguments[i + 1]; return (n = this.$i18n).d.apply(n, L()(t = [e]).call(t, r)) }, e.prototype.$n = function (e) { for (var t, n, r = [], i = arguments.length - 1; i-- > 0;)r[i] = arguments[i + 1]; return (n = this.$i18n).n.apply(n, L()(t = [e]).call(t, r)) } })(W), W.mixin(Y), W.directive("t", { bind: bind, update: update, unbind: unbind }), W.component(Z.name, Z), W.config.optionMergeStrategies.i18n = function (e, t) { return void 0 === t ? e : t } } var K = function BaseFormatter() { this._caches = _()(null) }; K.prototype.interpolate = function interpolate(e, t) { if (!t) return [e]; var n = this._caches[e]; return n || (n = function parse(e) { var t = [], n = 0, r = ""; for (; n < e.length;) { var i = e[n++]; if ("{" === i) { r && t.push({ type: "text", value: r }), r = ""; var o = ""; for (i = e[n++]; void 0 !== i && "}" !== i;)o += i, i = e[n++]; var a = "}" === i, s = X.test(o) ? "list" : a && J.test(o) ? "named" : "unknown"; t.push({ value: o, type: s }) } else "%" === i ? "{" !== e[n] && (r += i) : r += i } return r && t.push({ type: "text", value: r }), t }(e), this._caches[e] = n), function compile(e, t) { var n = [], r = 0, i = j()(t) ? "list" : isObject(t) ? "named" : "unknown"; if ("unknown" === i) return n; for (; r < e.length;) { var o = e[r]; switch (o.type) { case "text": n.push(o.value); break; case "list": n.push(t[v()(o.value, 10)]); break; case "named": "named" === i && n.push(t[o.value]); break; case "unknown": 0 }r++ } return n }(n, t) }; var X = /^(?:\d)+/, J = /^(?:\w)+/; var Q = 0, ee = 1, te = 2, ne = 3, re = 0, ie = 4, oe = 5, ae = 6, se = 7, le = 8, ue = []; ue[re] = { ws: [re], ident: [3, Q], "[": [ie], eof: [se] }, ue[1] = { ws: [1], ".": [2], "[": [ie], eof: [se] }, ue[2] = { ws: [2], ident: [3, Q], 0: [3, Q], number: [3, Q] }, ue[3] = { ident: [3, Q], 0: [3, Q], number: [3, Q], ws: [1, ee], ".": [2, ee], "[": [ie, ee], eof: [se, ee] }, ue[ie] = { "'": [oe, Q], '"': [ae, Q], "[": [ie, te], "]": [1, ne], eof: le, else: [ie, Q] }, ue[oe] = { "'": [ie, Q], eof: le, else: [oe, Q] }, ue[ae] = { '"': [ie, Q], eof: le, else: [ae, Q] }; var ce = /^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/; function getPathCharType(e) { if (void 0 === e || null === e) return "eof"; switch (e.charCodeAt(0)) { case 91: case 93: case 46: case 34: case 39: return e; case 95: case 36: case 45: return "ident"; case 32: case 9: case 10: case 13: case 160: case 65279: case 8232: case 8233: return "ws" }return "ident" } function formatSubPath(e) { var t = w()(e).call(e); return ("0" !== e.charAt(0) || !isNaN(e)) && (function isLiteral(e) { return ce.test(e) }(t) ? function stripQuotes(e) { var t = e.charCodeAt(0); return t !== e.charCodeAt(e.length - 1) || 34 !== t && 39 !== t ? e : m()(e).call(e, 1, -1) }(t) : "*" + t) } var de = function I18nPath() { this._cache = _()(null) }; de.prototype.parsePath = function parsePath(e) { var t = this._cache[e]; return t || (t = function parse$1(e) { var t, n, r, i, o, a, s, l = [], u = -1, c = re, d = 0, f = []; function maybeUnescapeQuote() { var t = e[u + 1]; if (c === oe && "'" === t || c === ae && '"' === t) return u++, r = "\\" + t, f[Q](), !0 } for (f[ee] = function () { void 0 !== n && (l.push(n), n = void 0) }, f[Q] = function () { void 0 === n ? n = r : n += r }, f[te] = function () { f[Q](), d++ }, f[ne] = function () { if (d > 0) d--, c = ie, f[Q](); else { if (d = 0, !1 === (n = formatSubPath(n))) return !1; f[ee]() } }; null !== c;)if ("\\" !== (t = e[++u]) || !maybeUnescapeQuote()) { if (i = getPathCharType(t), (o = (s = ue[c])[i] || s.else || le) === le) return; if (c = o[0], (a = f[o[1]]) && (r = void 0 === (r = o[2]) ? t : r, !1 === a())) return; if (c === se) return l } }(e)) && (this._cache[e] = t), t || [] }, de.prototype.getPathValue = function getPathValue(e, t) { if (!isObject(e)) return null; var n = this.parsePath(t); if (0 === n.length) return null; for (var r = n.length, i = e, o = 0; o < r;) { var a = i[n[o]]; if (void 0 === a) return null; i = a, o++ } return i }; var fe, he = ["style", "currency", "currencyDisplay", "useGrouping", "minimumIntegerDigits", "minimumFractionDigits", "maximumFractionDigits", "minimumSignificantDigits", "maximumSignificantDigits", "localeMatcher", "formatMatcher"], pe = /(?:@(?:\.[a-z]+)?:(?:[\w\-_|.]+|\([\w\-_|.]+\)))/g, me = /^@(?:\.([a-z]+))?:/, ge = /[()]/g, ve = { upper: function upper(e) { return e.toLocaleUpperCase() }, lower: function lower(e) { return e.toLocaleLowerCase() } }, ye = new K, _e = function VueI18n(e) { var t = this; void 0 === e && (e = {}), !W && "undefined" != typeof window && window.Vue && install(window.Vue); var n = e.locale || "en-US", r = e.fallbackLocale || "en-US", i = e.messages || {}, o = e.dateTimeFormats || {}, a = e.numberFormats || {}; this._vm = null, this._formatter = e.formatter || ye, this._missing = e.missing || null, this._root = e.root || null, this._sync = void 0 === e.sync || !!e.sync, this._fallbackRoot = void 0 === e.fallbackRoot || !!e.fallbackRoot, this._silentTranslationWarn = void 0 !== e.silentTranslationWarn && !!e.silentTranslationWarn, this._silentFallbackWarn = void 0 !== e.silentFallbackWarn && !!e.silentFallbackWarn, this._dateTimeFormatters = {}, this._numberFormatters = {}, this._path = new de, this._dataListeners = [], this._preserveDirectiveContent = void 0 !== e.preserveDirectiveContent && !!e.preserveDirectiveContent, this.pluralizationRules = e.pluralizationRules || {}, this._exist = function (e, n) { return !(!e || !n) && (!!t._path.getPathValue(e, n) || !!e[n]) }, this._initVM({ locale: n, fallbackLocale: r, messages: i, dateTimeFormats: o, numberFormats: a }) }, be = { vm: { configurable: !0 }, messages: { configurable: !0 }, dateTimeFormats: { configurable: !0 }, numberFormats: { configurable: !0 }, locale: { configurable: !0 }, fallbackLocale: { configurable: !0 }, missing: { configurable: !0 }, formatter: { configurable: !0 }, silentTranslationWarn: { configurable: !0 }, silentFallbackWarn: { configurable: !0 }, preserveDirectiveContent: { configurable: !0 } }; _e.prototype._initVM = function _initVM(e) { var t = W.config.silent; W.config.silent = !0, this._vm = new W({ data: e }), W.config.silent = t }, _e.prototype.destroyVM = function destroyVM() { this._vm.$destroy() }, _e.prototype.subscribeDataChanging = function subscribeDataChanging(e) { this._dataListeners.push(e) }, _e.prototype.unsubscribeDataChanging = function unsubscribeDataChanging(e) { !function remove(e, t) { if (e.length) { var n = N()(e).call(e, t); if (n > -1) return F()(e).call(e, n, 1) } }(this._dataListeners, e) }, _e.prototype.watchI18nData = function watchI18nData() { var e = this; return this._vm.$watch("$data", function () { for (var t = e._dataListeners.length; t--;)W.nextTick(function () { e._dataListeners[t] && e._dataListeners[t].$forceUpdate() }) }, { deep: !0 }) }, _e.prototype.watchLocale = function watchLocale() { if (!this._sync || !this._root) return null; var e = this._vm; return this._root.$i18n.vm.$watch("locale", function (t) { e.$set(e, "locale", t), e.$forceUpdate() }, { immediate: !0 }) }, be.vm.get = function () { return this._vm }, be.messages.get = function () { return looseClone(this._getMessages()) }, be.dateTimeFormats.get = function () { return looseClone(this._getDateTimeFormats()) }, be.numberFormats.get = function () { return looseClone(this._getNumberFormats()) }, be.locale.get = function () { return this._vm.locale }, be.locale.set = function (e) { this._vm.$set(this._vm, "locale", e) }, be.fallbackLocale.get = function () { return this._vm.fallbackLocale }, be.fallbackLocale.set = function (e) { this._vm.$set(this._vm, "fallbackLocale", e) }, be.missing.get = function () { return this._missing }, be.missing.set = function (e) { this._missing = e }, be.formatter.get = function () { return this._formatter }, be.formatter.set = function (e) { this._formatter = e }, be.silentTranslationWarn.get = function () { return this._silentTranslationWarn }, be.silentTranslationWarn.set = function (e) { this._silentTranslationWarn = e }, be.silentFallbackWarn.get = function () { return this._silentFallbackWarn }, be.silentFallbackWarn.set = function (e) { this._silentFallbackWarn = e }, be.preserveDirectiveContent.get = function () { return this._preserveDirectiveContent }, be.preserveDirectiveContent.set = function (e) { this._preserveDirectiveContent = e }, _e.prototype._getMessages = function _getMessages() { return this._vm.messages }, _e.prototype._getDateTimeFormats = function _getDateTimeFormats() { return this._vm.dateTimeFormats }, _e.prototype._getNumberFormats = function _getNumberFormats() { return this._vm.numberFormats }, _e.prototype._warnDefault = function _warnDefault(e, t, n, r, i) { if (!isNull(n)) return n; if (this._missing) { var o = this._missing.apply(null, [e, t, r, i]); if ("string" == typeof o) return o } else 0; return t }, _e.prototype._isFallbackRoot = function _isFallbackRoot(e) { return !e && !isNull(this._root) && this._fallbackRoot }, _e.prototype._isSilentFallback = function _isSilentFallback(e) { return this._silentFallbackWarn && (this._isFallbackRoot() || e !== this.fallbackLocale) }, _e.prototype._interpolate = function _interpolate(e, t, n, r, i, o, a) { if (!t) return null; var s, l = this._path.getPathValue(t, n); if (j()(l) || isPlainObject(l)) return l; if (isNull(l)) { if (!isPlainObject(t)) return null; if ("string" != typeof (s = t[n])) return null } else { if ("string" != typeof l) return null; s = l } return (N()(s).call(s, "@:") >= 0 || N()(s).call(s, "@.") >= 0) && (s = this._link(e, t, s, r, "raw", o, a)), this._render(s, i, o, n) }, _e.prototype._link = function _link(e, t, n, r, i, o, a) { var s = n, l = s.match(pe); for (var u in l) if (l.hasOwnProperty(u)) { var c = l[u], d = c.match(me), f = d[0], p = d[1], m = c.replace(f, "").replace(ge, ""); if (h()(a).call(a, m)) return s; a.push(m); var g = this._interpolate(e, t, m, r, "raw" === i ? "string" : i, "raw" === i ? void 0 : o, a); if (this._isFallbackRoot(g)) { if (!this._root) throw Error("unexpected error"); var v = this._root.$i18n; g = v._translate(v._getMessages(), v.locale, v.fallbackLocale, m, r, i, o) } g = this._warnDefault(e, m, g, r, j()(o) ? o : [o]), ve.hasOwnProperty(p) && (g = ve[p](g)), a.pop(), s = g ? s.replace(c, g) : s } return s }, _e.prototype._render = function _render(e, t, n, r) { var i = this._formatter.interpolate(e, n, r); return i || (i = ye.interpolate(e, n, r)), "string" === t ? i.join("") : i }, _e.prototype._translate = function _translate(e, t, n, r, i, o, a) { var s = this._interpolate(t, e[t], r, i, o, a, [r]); return isNull(s) && isNull(s = this._interpolate(n, e[n], r, i, o, a, [r])) ? null : s }, _e.prototype._t = function _t(e, t, n, r) { for (var i, o = [], a = arguments.length - 4; a-- > 0;)o[a] = arguments[a + 4]; if (!e) return ""; var s = parseArgs.apply(void 0, o), l = s.locale || t, u = this._translate(n, l, this.fallbackLocale, e, r, "string", s.params); if (this._isFallbackRoot(u)) { var c; if (!this._root) throw Error("unexpected error"); return (i = this._root).$t.apply(i, L()(c = [e]).call(c, o)) } return this._warnDefault(l, e, u, r, o) }, _e.prototype.t = function t(e) { for (var n, r, i = [], o = arguments.length - 1; o-- > 0;)i[o] = arguments[o + 1]; return (r = this)._t.apply(r, L()(n = [e, this.locale, this._getMessages(), null]).call(n, i)) }, _e.prototype._i = function _i(e, t, n, r, i) { var o = this._translate(n, t, this.fallbackLocale, e, r, "raw", i); if (this._isFallbackRoot(o)) { if (!this._root) throw Error("unexpected error"); return this._root.$i18n.i(e, t, i) } return this._warnDefault(t, e, o, r, [i]) }, _e.prototype.i = function i(e, t, n) { return e ? ("string" != typeof t && (t = this.locale), this._i(e, t, this._getMessages(), null, n)) : "" }, _e.prototype._tc = function _tc(e, t, n, r, i) { for (var o, a, s = [], l = arguments.length - 5; l-- > 0;)s[l] = arguments[l + 5]; if (!e) return ""; void 0 === i && (i = 1); var u = { count: i, n: i }, d = parseArgs.apply(void 0, s); return d.params = c()(u, d.params), s = null === d.locale ? [d.params] : [d.locale, d.params], this.fetchChoice((a = this)._t.apply(a, L()(o = [e, t, n, r]).call(o, s)), i) }, _e.prototype.fetchChoice = function fetchChoice(e, t) { var n; if (!e && "string" != typeof e) return null; var r = e.split("|"); return r[t = this.getChoiceIndex(t, r.length)] ? w()(n = r[t]).call(n) : e }, _e.prototype.getChoiceIndex = function getChoiceIndex(e, t) { return this.locale in this.pluralizationRules ? this.pluralizationRules[this.locale].apply(this, [e, t]) : function defaultImpl(e, t) { return e = Math.abs(e), 2 === t ? e ? e > 1 ? 1 : 0 : 1 : e ? Math.min(e, 2) : 0 }(e, t) }, _e.prototype.tc = function tc(e, t) { for (var n, r, i = [], o = arguments.length - 2; o-- > 0;)i[o] = arguments[o + 2]; return (r = this)._tc.apply(r, L()(n = [e, this.locale, this._getMessages(), null, t]).call(n, i)) }, _e.prototype._te = function _te(e, t, n) { for (var r = [], i = arguments.length - 3; i-- > 0;)r[i] = arguments[i + 3]; var o = parseArgs.apply(void 0, r).locale || t; return this._exist(n[o], e) }, _e.prototype.te = function te(e, t) { return this._te(e, this.locale, this._getMessages(), t) }, _e.prototype.getLocaleMessage = function getLocaleMessage(e) { return looseClone(this._vm.messages[e] || {}) }, _e.prototype.setLocaleMessage = function setLocaleMessage(e, t) { this._vm.$set(this._vm.messages, e, t) }, _e.prototype.mergeLocaleMessage = function mergeLocaleMessage(e, t) { this._vm.$set(this._vm.messages, e, merge(this._vm.messages[e] || {}, t)) }, _e.prototype.getDateTimeFormat = function getDateTimeFormat(e) { return looseClone(this._vm.dateTimeFormats[e] || {}) }, _e.prototype.setDateTimeFormat = function setDateTimeFormat(e, t) { this._vm.$set(this._vm.dateTimeFormats, e, t) }, _e.prototype.mergeDateTimeFormat = function mergeDateTimeFormat(e, t) { this._vm.$set(this._vm.dateTimeFormats, e, merge(this._vm.dateTimeFormats[e] || {}, t)) }, _e.prototype._localizeDateTime = function _localizeDateTime(e, t, n, r, i) { var o = t, a = r[o]; if ((isNull(a) || isNull(a[i])) && (a = r[o = n]), isNull(a) || isNull(a[i])) return null; var s = a[i], l = o + "__" + i, u = this._dateTimeFormatters[l]; return u || (u = this._dateTimeFormatters[l] = new Intl.DateTimeFormat(o, s)), u.format(e) }, _e.prototype._d = function _d(e, t, n) { if (!n) return new Intl.DateTimeFormat(t).format(e); var r = this._localizeDateTime(e, t, this.fallbackLocale, this._getDateTimeFormats(), n); if (this._isFallbackRoot(r)) { if (!this._root) throw Error("unexpected error"); return this._root.$i18n.d(e, n, t) } return r || "" }, _e.prototype.d = function d(e) { for (var t = [], n = arguments.length - 1; n-- > 0;)t[n] = arguments[n + 1]; var r = this.locale, i = null; return 1 === t.length ? "string" == typeof t[0] ? i = t[0] : isObject(t[0]) && (t[0].locale && (r = t[0].locale), t[0].key && (i = t[0].key)) : 2 === t.length && ("string" == typeof t[0] && (i = t[0]), "string" == typeof t[1] && (r = t[1])), this._d(e, r, i) }, _e.prototype.getNumberFormat = function getNumberFormat(e) { return looseClone(this._vm.numberFormats[e] || {}) }, _e.prototype.setNumberFormat = function setNumberFormat(e, t) { this._vm.$set(this._vm.numberFormats, e, t) }, _e.prototype.mergeNumberFormat = function mergeNumberFormat(e, t) { this._vm.$set(this._vm.numberFormats, e, merge(this._vm.numberFormats[e] || {}, t)) }, _e.prototype._localizeNumber = function _localizeNumber(e, t, n, r, i, o) { var a = t, s = r[a]; if ((isNull(s) || isNull(s[i])) && (s = r[a = n]), isNull(s) || isNull(s[i])) return null; var l, u = s[i]; if (o) l = new Intl.NumberFormat(a, c()({}, u, o)); else { var d = a + "__" + i; (l = this._numberFormatters[d]) || (l = this._numberFormatters[d] = new Intl.NumberFormat(a, u)) } return l.format(e) }, _e.prototype._n = function _n(e, t, n, r) { if (!_e.availabilities.numberFormat) return ""; if (!n) return (r ? new Intl.NumberFormat(t, r) : new Intl.NumberFormat(t)).format(e); var i = this._localizeNumber(e, t, this.fallbackLocale, this._getNumberFormats(), n, r); if (this._isFallbackRoot(i)) { if (!this._root) throw Error("unexpected error"); return this._root.$i18n.n(e, c()({}, { key: n, locale: t }, r)) } return i || "" }, _e.prototype.n = function n(e) { for (var t = [], r = arguments.length - 1; r-- > 0;)t[r] = arguments[r + 1]; var i = this.locale, o = null, a = null; if (1 === t.length) { if ("string" == typeof t[0]) o = t[0]; else if (isObject(t[0])) { var s; t[0].locale && (i = t[0].locale), t[0].key && (o = t[0].key), a = l()(s = P()(t[0])).call(s, function (e, n) { var r; return h()(he).call(he, n) ? c()({}, e, ((r = {})[n] = t[0][n], r)) : e }, null) } } else 2 === t.length && ("string" == typeof t[0] && (o = t[0]), "string" == typeof t[1] && (i = t[1])); return this._n(e, i, o, a) }, a()(_e.prototype, be), E()(_e, "availabilities", { get: function get() { if (!fe) { var e = "undefined" != typeof Intl; fe = { dateTimeFormat: e && void 0 !== Intl.DateTimeFormat, numberFormat: e && void 0 !== Intl.NumberFormat } } return fe } }), _e.install = install, _e.version = "8.8.2", r.a = _e },,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { var r = n(133), i = n(888), o = n(1480); r({ target: "Array", proto: !0 }, { fill: i }), o("fill") },,,,,,,, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, o = _interopRequireDefault(n(2237)), a = _interopRequireDefault(n(1156)), s = _interopRequireDefault(n(259)), l = _interopRequireDefault(n(2236)), u = _interopRequireDefault(n(1153)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } function isPromise(e) { return "object" === (void 0 === e ? "undefined" : i(e)) && "function" == typeof e.then } var c = function () { function LazyResult(e, t, n) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, LazyResult), this.stringified = !1, this.processed = !1; var r = void 0; if ("object" === (void 0 === t ? "undefined" : i(t)) && "root" === t.type) r = t; else if (t instanceof LazyResult || t instanceof l.default) r = t.root, t.map && (void 0 === n.map && (n.map = {}), n.map.inline || (n.map.inline = !1), n.map.prev = t.map); else { var o = u.default; n.syntax && (o = n.syntax.parse), n.parser && (o = n.parser), o.parse && (o = o.parse); try { r = o(t, n) } catch (e) { this.error = e } } this.result = new l.default(e, r, n) } return LazyResult.prototype.warnings = function warnings() { return this.sync().warnings() }, LazyResult.prototype.toString = function toString() { return this.css }, LazyResult.prototype.then = function then(e, t) { return this.async().then(e, t) }, LazyResult.prototype.catch = function _catch(e) { return this.async().catch(e) }, LazyResult.prototype.handleError = function handleError(e, t) { try { if (this.error = e, "CssSyntaxError" !== e.name || e.plugin) { if (t.postcssVersion) { var n = t.postcssPlugin, r = t.postcssVersion, i = this.result.processor.version, o = r.split("."), a = i.split("."); (o[0] !== a[0] || parseInt(o[1]) > parseInt(a[1])) && (0, s.default)("Your current PostCSS version is " + i + ", but " + n + " uses " + r + ". Perhaps this is the source of the error below.") } } else e.plugin = t.postcssPlugin, e.setMessage() } catch (e) { console && console.error && console.error(e) } }, LazyResult.prototype.asyncTick = function asyncTick(e, t) { var n = this; if (this.plugin >= this.processor.plugins.length) return this.processed = !0, e(); try { var r = this.processor.plugins[this.plugin], i = this.run(r); this.plugin += 1, isPromise(i) ? i.then(function () { n.asyncTick(e, t) }).catch(function (e) { n.handleError(e, r), n.processed = !0, t(e) }) : this.asyncTick(e, t) } catch (e) { this.processed = !0, t(e) } }, LazyResult.prototype.async = function async() { var e = this; return this.processed ? new Promise(function (t, n) { e.error ? n(e.error) : t(e.stringify()) }) : this.processing ? this.processing : (this.processing = new Promise(function (t, n) { if (e.error) return n(e.error); e.plugin = 0, e.asyncTick(t, n) }).then(function () { return e.processed = !0, e.stringify() }), this.processing) }, LazyResult.prototype.sync = function sync() { if (this.processed) return this.result; if (this.processed = !0, this.processing) throw new Error("Use process(css).then(cb) to work with async plugins"); if (this.error) throw this.error; var e = this.result.processor.plugins, t = Array.isArray(e), n = 0; for (e = t ? e : e[Symbol.iterator](); ;) { var r; if (t) { if (n >= e.length) break; r = e[n++] } else { if ((n = e.next()).done) break; r = n.value } var i = r; if (isPromise(this.run(i))) throw new Error("Use process(css).then(cb) to work with async plugins") } return this.result }, LazyResult.prototype.run = function run(e) { this.result.lastPlugin = e; try { return e(this.result.root, this.result) } catch (t) { throw this.handleError(t, e), t } }, LazyResult.prototype.stringify = function stringify() { if (this.stringified) return this.result; this.stringified = !0, this.sync(); var e = this.result.opts, t = a.default; e.syntax && (t = e.syntax.stringify), e.stringifier && (t = e.stringifier), t.stringify && (t = t.stringify); var n = new o.default(t, this.result.root, this.result.opts).generate(); return this.result.css = n[0], this.result.map = n[1], this.result }, r(LazyResult, [{ key: "processor", get: function get() { return this.result.processor } }, { key: "opts", get: function get() { return this.result.opts } }, { key: "css", get: function get() { return this.stringify().css } }, { key: "content", get: function get() { return this.stringify().content } }, { key: "map", get: function get() { return this.stringify().map } }, { key: "root", get: function get() { return this.sync().root } }, { key: "messages", get: function get() { return this.sync().messages } }]), LazyResult }(); t.default = c, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = _interopRequireDefault(n(492)), i = _interopRequireDefault(n(259)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var o = function (e) { function Root(t) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Root); var n = function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.call(this, t)); return n.type = "root", n.nodes || (n.nodes = []), n } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(Root, e), Root.prototype.removeChild = function removeChild(t) { return 0 === (t = this.index(t)) && this.nodes.length > 1 && (this.nodes[1].raws.before = this.nodes[t].raws.before), e.prototype.removeChild.call(this, t) }, Root.prototype.normalize = function normalize(t, n, r) { var i = e.prototype.normalize.call(this, t); if (n) if ("prepend" === r) this.nodes.length > 1 ? n.raws.before = this.nodes[1].raws.before : delete n.raws.before; else if (this.first !== n) { var o = i, a = Array.isArray(o), s = 0; for (o = a ? o : o[Symbol.iterator](); ;) { var l; if (a) { if (s >= o.length) break; l = o[s++] } else { if ((s = o.next()).done) break; l = s.value } l.raws.before = n.raws.before } } return i }, Root.prototype.toResult = function toResult() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; return new (n(1151))(new (n(2234)), this, e).stringify() }, Root.prototype.remove = function remove(e) { (0, i.default)("Root#remove is deprecated. Use Root#removeChild"), this.removeChild(e) }, Root.prototype.prevMap = function prevMap() { return (0, i.default)("Root#prevMap is deprecated. Use Root#source.input.map"), this.source.input.map }, Root }(r.default); t.default = o, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0, t.default = function parse(e, t) { if (t && t.safe) throw new Error('Option safe was removed. Use parser: require("postcss-safe-parser")'); var n = new i.default(e, t), o = new r.default(n); try { o.tokenize(), o.loop() } catch (e) { throw "CssSyntaxError" === e.name && t && t.from && (/\.scss$/i.test(t.from) ? e.message += "\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser" : /\.sass/i.test(t.from) ? e.message += "\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser" : /\.less$/i.test(t.from) && (e.message += "\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser")), e } return o.root }; var r = _interopRequireDefault(n(1155)), i = _interopRequireDefault(n(774)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = _interopRequireDefault(n(259)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var o = function (e) { function Declaration(t) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Declaration); var n = function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.call(this, t)); return n.type = "decl", n } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(Declaration, e), r(Declaration, [{ key: "_value", get: function get() { return (0, i.default)("Node#_value was deprecated. Use Node#raws.value"), this.raws.value }, set: function set(e) { (0, i.default)("Node#_value was deprecated. Use Node#raws.value"), this.raws.value = e } }, { key: "_important", get: function get() { return (0, i.default)("Node#_important was deprecated. Use Node#raws.important"), this.raws.important }, set: function set(e) { (0, i.default)("Node#_important was deprecated. Use Node#raws.important"), this.raws.important = e } }]), Declaration }(_interopRequireDefault(n(772)).default); t.default = o, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = _interopRequireDefault(n(1154)), i = _interopRequireDefault(n(1158)), o = _interopRequireDefault(n(773)), a = _interopRequireDefault(n(771)), s = _interopRequireDefault(n(1152)), l = _interopRequireDefault(n(770)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var u = function () { function Parser(e) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Parser), this.input = e, this.pos = 0, this.root = new s.default, this.current = this.root, this.spaces = "", this.semicolon = !1, this.root.source = { input: e, start: { line: 1, column: 1 } } } return Parser.prototype.tokenize = function tokenize() { this.tokens = (0, i.default)(this.input) }, Parser.prototype.loop = function loop() { for (var e = void 0; this.pos < this.tokens.length;) { switch ((e = this.tokens[this.pos])[0]) { case "space": case ";": this.spaces += e[1]; break; case "}": this.end(e); break; case "comment": this.comment(e); break; case "at-word": this.atrule(e); break; case "{": this.emptyRule(e); break; default: this.other() }this.pos += 1 } this.endFile() }, Parser.prototype.comment = function comment(e) { var t = new o.default; this.init(t, e[2], e[3]), t.source.end = { line: e[4], column: e[5] }; var n = e[1].slice(2, -2); if (/^\s*$/.test(n)) t.text = "", t.raws.left = n, t.raws.right = ""; else { var r = n.match(/^(\s*)([^]*[^\s])(\s*)$/); t.text = r[2], t.raws.left = r[1], t.raws.right = r[3] } }, Parser.prototype.emptyRule = function emptyRule(e) { var t = new l.default; this.init(t, e[2], e[3]), t.selector = "", t.raws.between = "", this.current = t }, Parser.prototype.other = function other() { for (var e = void 0, t = !1, n = null, r = !1, i = null, o = [], a = this.pos; this.pos < this.tokens.length;) { if ("(" === (n = (e = this.tokens[this.pos])[0]) || "[" === n) i || (i = e), o.push("(" === n ? ")" : "]"); else if (0 === o.length) { if (";" === n) { if (r) return void this.decl(this.tokens.slice(a, this.pos + 1)); break } if ("{" === n) return void this.rule(this.tokens.slice(a, this.pos + 1)); if ("}" === n) { this.pos -= 1, t = !0; break } ":" === n && (r = !0) } else n === o[o.length - 1] && (o.pop(), 0 === o.length && (i = null)); this.pos += 1 } if (this.pos === this.tokens.length && (this.pos -= 1, t = !0), o.length > 0 && this.unclosedBracket(i), t && r) { for (; this.pos > a && ("space" === (e = this.tokens[this.pos][0]) || "comment" === e);)this.pos -= 1; this.decl(this.tokens.slice(a, this.pos + 1)) } else this.unknownWord(a) }, Parser.prototype.rule = function rule(e) { e.pop(); var t = new l.default; this.init(t, e[0][2], e[0][3]), t.raws.between = this.spacesAndCommentsFromEnd(e), this.raw(t, "selector", e), this.current = t }, Parser.prototype.decl = function decl(e) { var t = new r.default; this.init(t); var n = e[e.length - 1]; for (";" === n[0] && (this.semicolon = !0, e.pop()), n[4] ? t.source.end = { line: n[4], column: n[5] } : t.source.end = { line: n[2], column: n[3] }; "word" !== e[0][0];)t.raws.before += e.shift()[1]; for (t.source.start = { line: e[0][2], column: e[0][3] }, t.prop = ""; e.length;) { var i = e[0][0]; if (":" === i || "space" === i || "comment" === i) break; t.prop += e.shift()[1] } t.raws.between = ""; for (var o = void 0; e.length;) { if (":" === (o = e.shift())[0]) { t.raws.between += o[1]; break } t.raws.between += o[1] } "_" !== t.prop[0] && "*" !== t.prop[0] || (t.raws.before += t.prop[0], t.prop = t.prop.slice(1)), t.raws.between += this.spacesAndCommentsFromStart(e), this.precheckMissedSemicolon(e); for (var a = e.length - 1; a > 0; a--) { if ("!important" === (o = e[a])[1]) { t.important = !0; var s = this.stringFrom(e, a); " !important" !== (s = this.spacesFromEnd(e) + s) && (t.raws.important = s); break } if ("important" === o[1]) { for (var l = e.slice(0), u = "", c = a; c > 0; c--) { var d = l[c][0]; if (0 === u.trim().indexOf("!") && "space" !== d) break; u = l.pop()[1] + u } 0 === u.trim().indexOf("!") && (t.important = !0, t.raws.important = u, e = l) } if ("space" !== o[0] && "comment" !== o[0]) break } this.raw(t, "value", e), -1 !== t.value.indexOf(":") && this.checkMissedSemicolon(e) }, Parser.prototype.atrule = function atrule(e) { var t = new a.default; t.name = e[1].slice(1), "" === t.name && this.unnamedAtrule(t, e), this.init(t, e[2], e[3]); var n = !1, r = !1, i = []; for (this.pos += 1; this.pos < this.tokens.length;) { if (";" === (e = this.tokens[this.pos])[0]) { t.source.end = { line: e[2], column: e[3] }, this.semicolon = !0; break } if ("{" === e[0]) { r = !0; break } if ("}" === e[0]) { this.end(e); break } i.push(e), this.pos += 1 } this.pos === this.tokens.length && (n = !0), t.raws.between = this.spacesAndCommentsFromEnd(i), i.length ? (t.raws.afterName = this.spacesAndCommentsFromStart(i), this.raw(t, "params", i), n && (e = i[i.length - 1], t.source.end = { line: e[4], column: e[5] }, this.spaces = t.raws.between, t.raws.between = "")) : (t.raws.afterName = "", t.params = ""), r && (t.nodes = [], this.current = t) }, Parser.prototype.end = function end(e) { this.current.nodes && this.current.nodes.length && (this.current.raws.semicolon = this.semicolon), this.semicolon = !1, this.current.raws.after = (this.current.raws.after || "") + this.spaces, this.spaces = "", this.current.parent ? (this.current.source.end = { line: e[2], column: e[3] }, this.current = this.current.parent) : this.unexpectedClose(e) }, Parser.prototype.endFile = function endFile() { this.current.parent && this.unclosedBlock(), this.current.nodes && this.current.nodes.length && (this.current.raws.semicolon = this.semicolon), this.current.raws.after = (this.current.raws.after || "") + this.spaces }, Parser.prototype.init = function init(e, t, n) { this.current.push(e), e.source = { start: { line: t, column: n }, input: this.input }, e.raws.before = this.spaces, this.spaces = "", "comment" !== e.type && (this.semicolon = !1) }, Parser.prototype.raw = function raw(e, t, n) { for (var r = void 0, i = void 0, o = n.length, a = "", s = !0, l = 0; l < o; l += 1)"comment" === (i = (r = n[l])[0]) || "space" === i && l === o - 1 ? s = !1 : a += r[1]; if (!s) { var raw = n.reduce(function (e, t) { return e + t[1] }, ""); e.raws[t] = { value: a, raw: raw } } e[t] = a }, Parser.prototype.spacesAndCommentsFromEnd = function spacesAndCommentsFromEnd(e) { for (var t = void 0, n = ""; e.length && ("space" === (t = e[e.length - 1][0]) || "comment" === t);)n = e.pop()[1] + n; return n }, Parser.prototype.spacesAndCommentsFromStart = function spacesAndCommentsFromStart(e) { for (var t = void 0, n = ""; e.length && ("space" === (t = e[0][0]) || "comment" === t);)n += e.shift()[1]; return n }, Parser.prototype.spacesFromEnd = function spacesFromEnd(e) { for (var t = ""; e.length && "space" === e[e.length - 1][0];)t = e.pop()[1] + t; return t }, Parser.prototype.stringFrom = function stringFrom(e, t) { for (var n = "", r = t; r < e.length; r++)n += e[r][1]; return e.splice(t, e.length - t), n }, Parser.prototype.colon = function colon(e) { for (var t = 0, n = void 0, r = void 0, i = void 0, o = 0; o < e.length; o++) { if ("(" === (r = (n = e[o])[0])) t += 1; else if (")" === r) t -= 1; else if (0 === t && ":" === r) { if (i) { if ("word" === i[0] && "progid" === i[1]) continue; return o } this.doubleColon(n) } i = n } return !1 }, Parser.prototype.unclosedBracket = function unclosedBracket(e) { throw this.input.error("Unclosed bracket", e[2], e[3]) }, Parser.prototype.unknownWord = function unknownWord(e) { var t = this.tokens[e]; throw this.input.error("Unknown word", t[2], t[3]) }, Parser.prototype.unexpectedClose = function unexpectedClose(e) { throw this.input.error("Unexpected }", e[2], e[3]) }, Parser.prototype.unclosedBlock = function unclosedBlock() { var e = this.current.source.start; throw this.input.error("Unclosed block", e.line, e.column) }, Parser.prototype.doubleColon = function doubleColon(e) { throw this.input.error("Double colon", e[2], e[3]) }, Parser.prototype.unnamedAtrule = function unnamedAtrule(e, t) { throw this.input.error("At-rule without name", t[2], t[3]) }, Parser.prototype.precheckMissedSemicolon = function precheckMissedSemicolon(e) { }, Parser.prototype.checkMissedSemicolon = function checkMissedSemicolon(e) { var t = this.colon(e); if (!1 !== t) { for (var n = 0, r = void 0, i = t - 1; i >= 0 && ("space" === (r = e[i])[0] || 2 !== (n += 1)); i--); throw this.input.error("Missed semicolon", r[2], r[3]) } }, Parser }(); t.default = u, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0, t.default = function stringify(e, t) { new r.default(t).stringify(e) }; var r = function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } }(n(775)); e.exports = t.default },, function(e, t, n) { "use strict"; t.__esModule = !0, t.default = function tokenize(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = [], k = e.css.valueOf(), T = t.ignoreErrors, L = void 0, M = void 0, E = void 0, A = void 0, P = void 0, R = void 0, O = void 0, D = void 0, F = void 0, I = void 0, N = void 0, $ = void 0, B = void 0, z = k.length, j = -1, U = 1, q = 0; function unclosed(t) { throw e.error("Unclosed " + t, U, q - j) } for (; q < z;) { switch (((L = k.charCodeAt(q)) === s || L === u || L === d && k.charCodeAt(q + 1) !== s) && (j = q, U += 1), L) { case s: case l: case c: case d: case u: M = q; do { M += 1, (L = k.charCodeAt(M)) === s && (j = M, U += 1) } while (L === l || L === s || L === c || L === d || L === u); n.push(["space", k.slice(q, M)]), q = M - 1; break; case f: n.push(["[", "[", U, q - j]); break; case h: n.push(["]", "]", U, q - j]); break; case g: n.push(["{", "{", U, q - j]); break; case v: n.push(["}", "}", U, q - j]); break; case b: n.push([":", ":", U, q - j]); break; case y: n.push([";", ";", U, q - j]); break; case p: if ($ = n.length ? n[n.length - 1][1] : "", B = k.charCodeAt(q + 1), "url" === $ && B !== r && B !== i && B !== l && B !== s && B !== c && B !== u && B !== d) { M = q; do { if (I = !1, -1 === (M = k.indexOf(")", M + 1))) { if (T) { M = q; break } unclosed("bracket") } for (N = M; k.charCodeAt(N - 1) === o;)N -= 1, I = !I } while (I); n.push(["brackets", k.slice(q, M + 1), U, q - j, U, M - j]), q = M } else M = k.indexOf(")", q + 1), R = k.slice(q, M + 1), -1 === M || S.test(R) ? n.push(["(", "(", U, q - j]) : (n.push(["brackets", R, U, q - j, U, M - j]), q = M); break; case m: n.push([")", ")", U, q - j]); break; case r: case i: E = L === r ? "'" : '"', M = q; do { if (I = !1, -1 === (M = k.indexOf(E, M + 1))) { if (T) { M = q + 1; break } unclosed("string") } for (N = M; k.charCodeAt(N - 1) === o;)N -= 1, I = !I } while (I); R = k.slice(q, M + 1), A = R.split("\n"), (P = A.length - 1) > 0 ? (D = U + P, F = M - A[P].length) : (D = U, F = j), n.push(["string", k.slice(q, M + 1), U, q - j, D, M - F]), j = F, U = D, q = M; break; case w: x.lastIndex = q + 1, x.test(k), M = 0 === x.lastIndex ? k.length - 1 : x.lastIndex - 2, n.push(["at-word", k.slice(q, M + 1), U, q - j, U, M - j]), q = M; break; case o: for (M = q, O = !0; k.charCodeAt(M + 1) === o;)M += 1, O = !O; L = k.charCodeAt(M + 1), O && L !== a && L !== l && L !== s && L !== c && L !== d && L !== u && (M += 1), n.push(["word", k.slice(q, M + 1), U, q - j, U, M - j]), q = M; break; default: L === a && k.charCodeAt(q + 1) === _ ? (0 === (M = k.indexOf("*/", q + 2) + 1) && (T ? M = k.length : unclosed("comment")), R = k.slice(q, M + 1), A = R.split("\n"), (P = A.length - 1) > 0 ? (D = U + P, F = M - A[P].length) : (D = U, F = j), n.push(["comment", R, U, q - j, D, M - F]), j = F, U = D, q = M) : (C.lastIndex = q + 1, C.test(k), M = 0 === C.lastIndex ? k.length - 1 : C.lastIndex - 2, n.push(["word", k.slice(q, M + 1), U, q - j, U, M - j]), q = M) }q++ } return n }; var r = 39, i = 34, o = 92, a = 47, s = 10, l = 32, u = 12, c = 9, d = 13, f = 91, h = 93, p = 40, m = 41, g = 123, v = 125, y = 59, _ = 42, b = 58, w = 64, x = /[ \n\t\r\f\{\(\)'"\\;/\[\]#]/g, C = /[ \n\t\r\f\(\)\{\}:;@!'"\\\]\[#]|\/(?=\*)/g, S = /.[\\\/\("'\n]/; e.exports = t.default }, function(e, t, n) { "use strict"; e.exports = function () { return /[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g } }, function(e, t, n) { "use strict"; (function (t) { var r = n(2246), i = n(2245), o = n(2244), a = n(2243), s = n(2242), l = Object.defineProperties, u = "win32" === t.platform && !/^xterm/i.test(t.env.TERM); function Chalk(e) { this.enabled = e && void 0 !== e.enabled ? e.enabled : s } u && (i.blue.open = "\x1b[94m"); var c, d = (c = {}, Object.keys(i).forEach(function (e) { i[e].closeRe = new RegExp(r(i[e].close), "g"), c[e] = { get: function () { return build.call(this, this._styles.concat(e)) } } }), c), f = l(function chalk() { }, d); function build(e) { var t = function () { return function applyStyle() { var e = arguments, t = e.length, n = 0 !== t && String(arguments[0]); if (t > 1) for (var r = 1; r < t; r++)n += " " + e[r]; if (!this.enabled || !n) return n; var o = this._styles, a = o.length, s = i.dim.open; !u || -1 === o.indexOf("gray") && -1 === o.indexOf("grey") || (i.dim.open = ""); for (; a--;) { var l = i[o[a]]; n = l.open + n.replace(l.closeRe, l.open) + l.close } return i.dim.open = s, n }.apply(t, arguments) }; return t._styles = e, t.enabled = this.enabled, t.__proto__ = f, t } l(Chalk.prototype, function init() { var e = {}; return Object.keys(d).forEach(function (t) { e[t] = { get: function () { return build.call(this, [t]) } } }), e }()), e.exports = new Chalk, e.exports.styles = i, e.exports.hasColor = a, e.exports.stripColor = o, e.exports.supportsColor = s }).call(this, n(197)) }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = _interopRequireDefault(n(1353)), o = _interopRequireDefault(n(1160)), a = _interopRequireDefault(n(2241)), s = _interopRequireDefault(n(259)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var l = function () { function CssSyntaxError(e, t, n, r, i, o) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, CssSyntaxError), this.name = "CssSyntaxError", this.reason = e, i && (this.file = i), r && (this.source = r), o && (this.plugin = o), void 0 !== t && void 0 !== n && (this.line = t, this.column = n), this.setMessage(), Error.captureStackTrace && Error.captureStackTrace(this, CssSyntaxError) } return CssSyntaxError.prototype.setMessage = function setMessage() { this.message = this.plugin ? this.plugin + ": " : "", this.message += this.file ? this.file : "<css input>", void 0 !== this.line && (this.message += ":" + this.line + ":" + this.column), this.message += ": " + this.reason }, CssSyntaxError.prototype.showSourceCode = function showSourceCode(e) { var t = this; if (!this.source) return ""; var n = this.source; void 0 === e && (e = i.default), e && (n = (0, a.default)(n)); var r = n.split(/\r?\n/), s = Math.max(this.line - 3, 0), l = Math.min(this.line + 2, r.length), u = String(l).length, c = new o.default.constructor({ enabled: !0 }); function mark(t) { return e ? c.red.bold(t) : t } function aside(t) { return e ? c.gray(t) : t } return r.slice(s, l).map(function (e, n) { var r = s + 1 + n, i = " " + (" " + r).slice(-u) + " | "; if (r === t.line) { var o = aside(i.replace(/\d/g, " ")) + e.slice(0, t.column - 1).replace(/[^\t]/g, " "); return mark(">") + aside(i) + e + "\n " + o + mark("^") } return " " + aside(i) + e }).join("\n") }, CssSyntaxError.prototype.toString = function toString() { var e = this.showSourceCode(); return e && (e = "\n\n" + e + "\n"), this.name + ": " + this.message + e }, r(CssSyntaxError, [{ key: "generated", get: function get() { return (0, s.default)("CssSyntaxError#generated is deprecated. Use input instead."), this.input } }]), CssSyntaxError }(); t.default = l, e.exports = t.default },,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { var r, i; !function (o, a) { "use strict"; "object" == typeof e && e.exports ? e.exports = a() : void 0 === (i = "function" == typeof (r = a) ? r.call(t, n, t, e) : r) || (e.exports = i) }(0, function (e) { "use strict"; var t = e && e.SecondLevelDomains, n = { list: { ac: " com gov mil net org ", ae: " ac co gov mil name net org pro sch ", af: " com edu gov net org ", al: " com edu gov mil net org ", ao: " co ed gv it og pb ", ar: " com edu gob gov int mil net org tur ", at: " ac co gv or ", au: " asn com csiro edu gov id net org ", ba: " co com edu gov mil net org rs unbi unmo unsa untz unze ", bb: " biz co com edu gov info net org store tv ", bh: " biz cc com edu gov info net org ", bn: " com edu gov net org ", bo: " com edu gob gov int mil net org tv ", br: " adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ", bs: " com edu gov net org ", bz: " du et om ov rg ", ca: " ab bc mb nb nf nl ns nt nu on pe qc sk yk ", ck: " biz co edu gen gov info net org ", cn: " ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ", co: " com edu gov mil net nom org ", cr: " ac c co ed fi go or sa ", cy: " ac biz com ekloges gov ltd name net org parliament press pro tm ", do: " art com edu gob gov mil net org sld web ", dz: " art asso com edu gov net org pol ", ec: " com edu fin gov info med mil net org pro ", eg: " com edu eun gov mil name net org sci ", er: " com edu gov ind mil net org rochest w ", es: " com edu gob nom org ", et: " biz com edu gov info name net org ", fj: " ac biz com info mil name net org pro ", fk: " ac co gov net nom org ", fr: " asso com f gouv nom prd presse tm ", gg: " co net org ", gh: " com edu gov mil org ", gn: " ac com gov net org ", gr: " com edu gov mil net org ", gt: " com edu gob ind mil net org ", gu: " com edu gov net org ", hk: " com edu gov idv net org ", hu: " 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ", id: " ac co go mil net or sch web ", il: " ac co gov idf k12 muni net org ", in: " ac co edu ernet firm gen gov i ind mil net nic org res ", iq: " com edu gov i mil net org ", ir: " ac co dnssec gov i id net org sch ", it: " edu gov ", je: " co net org ", jo: " com edu gov mil name net org sch ", jp: " ac ad co ed go gr lg ne or ", ke: " ac co go info me mobi ne or sc ", kh: " com edu gov mil net org per ", ki: " biz com de edu gov info mob net org tel ", km: " asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ", kn: " edu gov net org ", kr: " ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ", kw: " com edu gov net org ", ky: " com edu gov net org ", kz: " com edu gov mil net org ", lb: " com edu gov net org ", lk: " assn com edu gov grp hotel int ltd net ngo org sch soc web ", lr: " com edu gov net org ", lv: " asn com conf edu gov id mil net org ", ly: " com edu gov id med net org plc sch ", ma: " ac co gov m net org press ", mc: " asso tm ", me: " ac co edu gov its net org priv ", mg: " com edu gov mil nom org prd tm ", mk: " com edu gov inf name net org pro ", ml: " com edu gov net org presse ", mn: " edu gov org ", mo: " com edu gov net org ", mt: " com edu gov net org ", mv: " aero biz com coop edu gov info int mil museum name net org pro ", mw: " ac co com coop edu gov int museum net org ", mx: " com edu gob net org ", my: " com edu gov mil name net org sch ", nf: " arts com firm info net other per rec store web ", ng: " biz com edu gov mil mobi name net org sch ", ni: " ac co com edu gob mil net nom org ", np: " com edu gov mil net org ", nr: " biz com edu gov info net org ", om: " ac biz co com edu gov med mil museum net org pro sch ", pe: " com edu gob mil net nom org sld ", ph: " com edu gov i mil net ngo org ", pk: " biz com edu fam gob gok gon gop gos gov net org web ", pl: " art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ", pr: " ac biz com edu est gov info isla name net org pro prof ", ps: " com edu gov net org plo sec ", pw: " belau co ed go ne or ", ro: " arts com firm info nom nt org rec store tm www ", rs: " ac co edu gov in org ", sb: " com edu gov net org ", sc: " com edu gov net org ", sh: " co com edu gov net nom org ", sl: " com edu gov net org ", st: " co com consulado edu embaixada gov mil net org principe saotome store ", sv: " com edu gob org red ", sz: " ac co org ", tr: " av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ", tt: " aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ", tw: " club com ebiz edu game gov idv mil net org ", mu: " ac co com gov net or org ", mz: " ac co edu gov org ", na: " co com ", nz: " ac co cri geek gen govt health iwi maori mil net org parliament school ", pa: " abo ac com edu gob ing med net nom org sld ", pt: " com edu gov int net nome org publ ", py: " com edu gov mil net org ", qa: " com edu gov mil net org ", re: " asso com nom ", ru: " ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ", rw: " ac co com edu gouv gov int mil net ", sa: " com edu gov med net org pub sch ", sd: " com edu gov info med net org tv ", se: " a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ", sg: " com edu gov idn net org per ", sn: " art com edu gouv org perso univ ", sy: " com edu gov mil net news org ", th: " ac co go in mi net or ", tj: " ac biz co com edu go gov info int mil name net nic org test web ", tn: " agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ", tz: " ac co go ne or ", ua: " biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ", ug: " ac co go ne or org sc ", uk: " ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ", us: " dni fed isa kids nsn ", uy: " com edu gub mil net org ", ve: " co com edu gob info mil net org web ", vi: " co com k12 net org ", vn: " ac biz com edu gov health info int name net org pro ", ye: " co com gov ltd me net org plc ", yu: " ac co edu gov org ", za: " ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ", zm: " ac co com edu gov net org sch ", com: "ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ", net: "gb jp se uk ", org: "ae", de: "com " }, has: function (e) { var t = e.lastIndexOf("."); if (t <= 0 || t >= e.length - 1) return !1; var r = e.lastIndexOf(".", t - 1); if (r <= 0 || r >= t - 1) return !1; var i = n.list[e.slice(t + 1)]; return !!i && i.indexOf(" " + e.slice(r + 1, t) + " ") >= 0 }, is: function (e) { var t = e.lastIndexOf("."); if (t <= 0 || t >= e.length - 1) return !1; if (e.lastIndexOf(".", t - 1) >= 0) return !1; var r = n.list[e.slice(t + 1)]; return !!r && r.indexOf(" " + e.slice(0, t) + " ") >= 0 }, get: function (e) { var t = e.lastIndexOf("."); if (t <= 0 || t >= e.length - 1) return null; var r = e.lastIndexOf(".", t - 1); if (r <= 0 || r >= t - 1) return null; var i = n.list[e.slice(t + 1)]; return i ? i.indexOf(" " + e.slice(r + 1, t) + " ") < 0 ? null : e.slice(r + 1) : null }, noConflict: function () { return e.SecondLevelDomains === this && (e.SecondLevelDomains = t), this } }; return n }) }, function(e, t, n) { var r, i; !function (o, a) { "use strict"; "object" == typeof e && e.exports ? e.exports = a() : void 0 === (i = "function" == typeof (r = a) ? r.call(t, n, t, e) : r) || (e.exports = i) }(0, function (e) { "use strict"; var t = e && e.IPv6; return { best: function bestPresentation(e) { var t, n, r = e.toLowerCase().split(":"), i = r.length, o = 8; for ("" === r[0] && "" === r[1] && "" === r[2] ? (r.shift(), r.shift()) : "" === r[0] && "" === r[1] ? r.shift() : "" === r[i - 1] && "" === r[i - 2] && r.pop(), -1 !== r[(i = r.length) - 1].indexOf(".") && (o = 7), t = 0; t < i && "" !== r[t]; t++); if (t < o) for (r.splice(t, 1, "0000"); r.length < o;)r.splice(t, 0, "0000"); for (var a = 0; a < o; a++) { n = r[a].split(""); for (var s = 0; s < 3 && "0" === n[0] && n.length > 1; s++)n.splice(0, 1); r[a] = n.join("") } var l = -1, u = 0, c = 0, d = -1, f = !1; for (a = 0; a < o; a++)f ? "0" === r[a] ? c += 1 : (f = !1, c > u && (l = d, u = c)) : "0" === r[a] && (f = !0, d = a, c = 1); c > u && (l = d, u = c), u > 1 && r.splice(l, u, ""), i = r.length; var h = ""; for ("" === r[0] && (h = ":"), a = 0; a < i && (h += r[a], a !== i - 1); a++)h += ":"; return "" === r[i - 1] && (h += ":"), h }, noConflict: function noConflict() { return e.IPv6 === this && (e.IPv6 = t), this } } }) }, function(e, t, n) { (function (e, r) { var i; !function (o) { "object" == typeof t && t && t.nodeType, "object" == typeof e && e && e.nodeType; var a = "object" == typeof r && r; a.global !== a && a.window !== a && a.self; var s, l = 2147483647, u = 36, c = 1, d = 26, f = 38, h = 700, p = 72, m = 128, g = "-", v = /^xn--/, y = /[^\x20-\x7E]/, _ = /[\x2E\u3002\uFF0E\uFF61]/g, b = { overflow: "Overflow: input needs wider integers to process", "not-basic": "Illegal input >= 0x80 (not a basic code point)", "invalid-input": "Invalid input" }, w = u - c, x = Math.floor, C = String.fromCharCode; function error(e) { throw new RangeError(b[e]) } function map(e, t) { for (var n = e.length, r = []; n--;)r[n] = t(e[n]); return r } function mapDomain(e, t) { var n = e.split("@"), r = ""; return n.length > 1 && (r = n[0] + "@", e = n[1]), r + map((e = e.replace(_, ".")).split("."), t).join(".") } function ucs2decode(e) { for (var t, n, r = [], i = 0, o = e.length; i < o;)(t = e.charCodeAt(i++)) >= 55296 && t <= 56319 && i < o ? 56320 == (64512 & (n = e.charCodeAt(i++))) ? r.push(((1023 & t) << 10) + (1023 & n) + 65536) : (r.push(t), i--) : r.push(t); return r } function ucs2encode(e) { return map(e, function (e) { var t = ""; return e > 65535 && (t += C((e -= 65536) >>> 10 & 1023 | 55296), e = 56320 | 1023 & e), t += C(e) }).join("") } function digitToBasic(e, t) { return e + 22 + 75 * (e < 26) - ((0 != t) << 5) } function adapt(e, t, n) { var r = 0; for (e = n ? x(e / h) : e >> 1, e += x(e / t); e > w * d >> 1; r += u)e = x(e / w); return x(r + (w + 1) * e / (e + f)) } function decode(e) { var t, n, r, i, o, a, s, f, h, v, y, _ = [], b = e.length, w = 0, C = m, S = p; for ((n = e.lastIndexOf(g)) < 0 && (n = 0), r = 0; r < n; ++r)e.charCodeAt(r) >= 128 && error("not-basic"), _.push(e.charCodeAt(r)); for (i = n > 0 ? n + 1 : 0; i < b;) { for (o = w, a = 1, s = u; i >= b && error("invalid-input"), ((f = (y = e.charCodeAt(i++)) - 48 < 10 ? y - 22 : y - 65 < 26 ? y - 65 : y - 97 < 26 ? y - 97 : u) >= u || f > x((l - w) / a)) && error("overflow"), w += f * a, !(f < (h = s <= S ? c : s >= S + d ? d : s - S)); s += u)a > x(l / (v = u - h)) && error("overflow"), a *= v; S = adapt(w - o, t = _.length + 1, 0 == o), x(w / t) > l - C && error("overflow"), C += x(w / t), w %= t, _.splice(w++, 0, C) } return ucs2encode(_) } function encode(e) { var t, n, r, i, o, a, s, f, h, v, y, _, b, w, S, k = []; for (_ = (e = ucs2decode(e)).length, t = m, n = 0, o = p, a = 0; a < _; ++a)(y = e[a]) < 128 && k.push(C(y)); for (r = i = k.length, i && k.push(g); r < _;) { for (s = l, a = 0; a < _; ++a)(y = e[a]) >= t && y < s && (s = y); for (s - t > x((l - n) / (b = r + 1)) && error("overflow"), n += (s - t) * b, t = s, a = 0; a < _; ++a)if ((y = e[a]) < t && ++n > l && error("overflow"), y == t) { for (f = n, h = u; !(f < (v = h <= o ? c : h >= o + d ? d : h - o)); h += u)S = f - v, w = u - v, k.push(C(digitToBasic(v + S % w, 0))), f = x(S / w); k.push(C(digitToBasic(f, 0))), o = adapt(n, b, r == i), n = 0, ++r } ++n, ++t } return k.join("") } s = { version: "1.3.2", ucs2: { decode: ucs2decode, encode: ucs2encode }, decode: decode, encode: encode, toASCII: function toASCII(e) { return mapDomain(e, function (e) { return y.test(e) ? "xn--" + encode(e) : e }) }, toUnicode: function toUnicode(e) { return mapDomain(e, function (e) { return v.test(e) ? decode(e.slice(4).toLowerCase()) : e }) } }, void 0 === (i = function () { return s }.call(t, n, t, e)) || (e.exports = i) }() }).call(this, n(624)(e), n(48)) },,,,,,,,,,,,,,,,,, function(e, t, n) { e.exports = n(2476) }, function(e, t, n) { var r = n(1220), i = n(2475), o = n(2473); e.exports = function _objectWithoutProperties(e, t) { if (null == e) return {}; var n, a, s = o(e, t); if (i) { var l = i(e); for (a = 0; a < l.length; a++)n = l[a], r(t).call(t, n) >= 0 || Object.prototype.propertyIsEnumerable.call(e, n) && (s[n] = e[n]) } return s } },,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, function(e, t) { var n = { version: "2.1.1", style: { "filter-mode": { type: ["all", "first"], doc: "Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)", "default-value": "all", "default-meaning": "All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true." }, "image-filters": { css: "image-filters", "default-value": "none", "default-meaning": "no filters", type: "functions", functions: [["agg-stack-blur", 2], ["emboss", 0], ["blur", 0], ["gray", 0], ["sobel", 0], ["edge-detect", 0], ["x-gradient", 0], ["y-gradient", 0], ["invert", 0], ["sharpen", 0], ["colorize-alpha", -1], ["color-to-alpha", 1], ["scale-hsla", 8]], doc: "A list of image filters." }, "comp-op": { css: "comp-op", "default-value": "src-over", "default-meaning": "add the current layer on top of other layers", doc: "Composite operation. This defines how this layer should behave relative to layers atop or below it.", type: ["clear", "src", "dst", "src-over", "source-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "lighter", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] }, opacity: { css: "opacity", type: "float", doc: "An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)", "default-value": 1, "default-meaning": "no separate buffer will be used and no alpha will be applied to the style after rendering" } }, layer: { name: { "default-value": "", type: "string", required: !0, "default-meaning": "No layer name has been provided", doc: "The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map" }, srs: { "default-value": "", type: "string", "default-meaning": "No srs value is provided and the value will be inherited from the Map's srs", doc: "The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'" }, status: { "default-value": !0, type: "boolean", "default-meaning": "This layer will be marked as active and available for processing", doc: "A property that can be set to false to disable this layer from being processed" }, minzoom: { "default-value": "0", type: "float", "default-meaning": "The layer will be visible at the minimum possible scale", doc: "The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6" }, maxzoom: { "default-value": "1.79769e+308", type: "float", "default-meaning": "The layer will be visible at the maximum possible scale", doc: "The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6" }, queryable: { "default-value": !1, type: "boolean", "default-meaning": "The layer will not be available for the direct querying of data values", doc: "This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true" }, "clear-label-cache": { "default-value": !1, type: "boolean", "default-meaning": "The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer", doc: "This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers" }, "group-by": { "default-value": "", type: "string", "default-meaning": "No special layer grouping will be used during rendering", doc: "https://github.com/mapnik/mapnik/wiki/Grouped-rendering" }, "buffer-size": { "default-value": "0", type: "float", "default-meaning": "No buffer will be used", doc: "Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering" }, "maximum-extent": { "default-value": "none", type: "bbox", "default-meaning": "No clipping extent will be used", doc: "An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer." } }, symbolizers: { "*": { "image-filters": { css: "image-filters", "default-value": "none", "default-meaning": "no filters", type: "functions", functions: [["agg-stack-blur", 2], ["emboss", 0], ["blur", 0], ["gray", 0], ["sobel", 0], ["edge-detect", 0], ["x-gradient", 0], ["y-gradient", 0], ["invert", 0], ["sharpen", 0], ["colorize-alpha", -1], ["color-to-alpha", 1], ["scale-hsla", 8], ["buckets", -1], ["category", -1], ["equal", -1], ["headtails", -1], ["jenks", -1], ["quantiles", -1], ["cartocolor", -1], ["colorbrewer", -1], ["range", -1], ["ramp", -1]], doc: "A list of image filters." }, "comp-op": { css: "comp-op", "default-value": "src-over", "default-meaning": "add the current layer on top of other layers", doc: "Composite operation. This defines how this layer should behave relative to layers atop or below it.", type: ["clear", "src", "dst", "src-over", "source-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "lighter", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] }, opacity: { css: "opacity", type: "float", doc: "An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)", "default-value": 1, "default-meaning": "no separate buffer will be used and no alpha will be applied to the style after rendering" } }, map: { "background-color": { css: "background-color", "default-value": "none", "default-meaning": "transparent", type: "color", doc: "Map Background color" }, "background-image": { css: "background-image", type: "uri", "default-value": "", "default-meaning": "transparent", doc: "An image that is repeated below all features on a map as a background.", description: "Map Background image" }, srs: { css: "srs", type: "string", "default-value": "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs", "default-meaning": "The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space", doc: "Map spatial reference (proj4 string)" }, "buffer-size": { css: "buffer-size", "default-value": "0", type: "float", "default-meaning": "No buffer will be used", doc: 'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".' }, "maximum-extent": { css: "", "default-value": "none", type: "bbox", "default-meaning": "No clipping extent will be used", doc: "An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map." }, base: { css: "base", "default-value": "", "default-meaning": "This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.", type: "string", doc: "Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet." }, "paths-from-xml": { css: "", "default-value": !0, "default-meaning": "Paths read from XML will be interpreted from the location of the XML", type: "boolean", doc: "value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()" }, "minimum-version": { css: "", "default-value": "none", "default-meaning": "Mapnik version will not be detected and no error will be thrown about compatibility", type: "string", doc: "The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet" }, "font-directory": { css: "font-directory", type: "uri", "default-value": "none", "default-meaning": "No map-specific fonts will be registered", doc: "Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)." } }, polygon: { fill: { css: "polygon-fill", type: "color", "default-value": "rgba(128,128,128,1)", "default-meaning": "gray and fully opaque (alpha = 1), same as rgb(128,128,128)", doc: "Fill color to assign to a polygon", expression: !0 }, "fill-opacity": { css: "polygon-opacity", type: "float", doc: "The opacity of the polygon", "default-value": 1, "default-meaning": "opaque", expression: !0 }, gamma: { css: "polygon-gamma", type: "float", "default-value": 1, "default-meaning": "fully antialiased", range: "0-1", doc: "Level of antialiasing of polygon edges" }, "gamma-method": { css: "polygon-gamma-method", type: ["power", "linear", "none", "threshold", "multiply"], "default-value": "power", "default-meaning": "pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA", doc: "An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h" }, clip: { css: "polygon-clip", type: "boolean", "default-value": !0, "default-meaning": "geometry will be clipped to map bounds before rendering", doc: "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts." }, smooth: { css: "polygon-smooth", type: "float", "default-value": 0, "default-meaning": "no smoothing", range: "0-1", doc: "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries." }, "geometry-transform": { css: "polygon-geometry-transform", type: "functions", "default-value": "none", "default-meaning": "geometry will not be transformed", doc: "Allows transformation functions to be applied to the geometry.", functions: [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]] }, "comp-op": { css: "polygon-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, line: { stroke: { css: "line-color", "default-value": "rgba(0,0,0,1)", type: "color", "default-meaning": "black and fully opaque (alpha = 1), same as rgb(0,0,0)", doc: "The color of a drawn line", expression: !0 }, "stroke-width": { css: "line-width", "default-value": 1, type: "float", doc: "The width of a line in pixels", expression: !0 }, "stroke-opacity": { css: "line-opacity", "default-value": 1, type: "float", "default-meaning": "opaque", doc: "The opacity of a line" }, "stroke-linejoin": { css: "line-join", "default-value": "miter", type: ["miter", "round", "bevel"], doc: "The behavior of lines when joining" }, "stroke-linecap": { css: "line-cap", "default-value": "butt", type: ["butt", "round", "square"], doc: "The display of line endings" }, "stroke-gamma": { css: "line-gamma", type: "float", "default-value": 1, "default-meaning": "fully antialiased", range: "0-1", doc: "Level of antialiasing of stroke line" }, "stroke-gamma-method": { css: "line-gamma-method", type: ["power", "linear", "none", "threshold", "multiply"], "default-value": "power", "default-meaning": "pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA", doc: "An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h" }, "stroke-dasharray": { css: "line-dasharray", type: "numbers", doc: "A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.", "default-value": "none", "default-meaning": "solid line" }, "stroke-dashoffset": { css: "line-dash-offset", type: "numbers", doc: "valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)", "default-value": "none", "default-meaning": "solid line" }, "stroke-miterlimit": { css: "line-miterlimit", type: "float", doc: "The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.", "default-value": 4, "default-meaning": "Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'" }, clip: { css: "line-clip", type: "boolean", "default-value": !0, "default-meaning": "geometry will be clipped to map bounds before rendering", doc: "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts." }, smooth: { css: "line-smooth", type: "float", "default-value": 0, "default-meaning": "no smoothing", range: "0-1", doc: "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries." }, offset: { css: "line-offset", type: "float", "default-value": 0, "default-meaning": "no offset", doc: "Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)." }, rasterizer: { css: "line-rasterizer", type: ["full", "fast"], "default-value": "full", doc: "Exposes an alternate AGG rendering method that sacrifices some accuracy for speed." }, "geometry-transform": { css: "line-geometry-transform", type: "functions", "default-value": "none", "default-meaning": "geometry will not be transformed", doc: "Allows transformation functions to be applied to the geometry.", functions: [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]] }, "comp-op": { css: "line-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, markers: { file: { css: "marker-file", doc: "An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.", "default-value": "", "default-meaning": "An ellipse or circle, if width equals height", type: "uri", expression: !0 }, opacity: { css: "marker-opacity", doc: "The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke", "default-value": 1, "default-meaning": "The stroke-opacity and fill-opacity will be used", type: "float" }, "fill-opacity": { css: "marker-fill-opacity", doc: "The fill opacity of the marker", "default-value": 1, "default-meaning": "opaque", type: "float" }, stroke: { css: "marker-line-color", doc: "The color of the stroke around a marker shape.", "default-value": "black", type: "color" }, "stroke-width": { css: "marker-line-width", doc: "The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.", type: "float" }, "stroke-opacity": { css: "marker-line-opacity", "default-value": 1, "default-meaning": "opaque", doc: "The opacity of a line", type: "float" }, placement: { css: "marker-placement", type: ["point", "line", "interior"], "default-value": "point", "default-meaning": "Place markers at the center point (centroid) of the geometry", doc: "Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior" }, "multi-policy": { css: "marker-multi-policy", type: ["each", "whole", "largest"], "default-value": "each", "default-meaning": "If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each", doc: "A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)." }, "marker-type": { css: "marker-type", type: ["arrow", "ellipse", "rectangle"], "default-value": "ellipse", doc: "The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)" }, width: { css: "marker-width", "default-value": 10, doc: "The width of the marker, if using one of the default types.", type: "float", expression: !0 }, height: { css: "marker-height", "default-value": 10, doc: "The height of the marker, if using one of the default types.", type: "float", expression: !0 }, fill: { css: "marker-fill", "default-value": "blue", doc: "The color of the area of the marker.", type: "color", expression: !0 }, "allow-overlap": { css: "marker-allow-overlap", type: "boolean", "default-value": !1, doc: "Control whether overlapping markers are shown or hidden.", "default-meaning": "Do not allow makers to overlap with each other - overlapping markers will not be shown." }, "ignore-placement": { css: "marker-ignore-placement", type: "boolean", "default-value": !1, "default-meaning": "do not store the bbox of this geometry in the collision detector cache", doc: "value to control whether the placement of the feature will prevent the placement of other features" }, spacing: { css: "marker-spacing", doc: "Space between repeated labels", "default-value": 100, type: "float" }, "max-error": { css: "marker-max-error", type: "float", "default-value": .2, doc: "The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers." }, transform: { css: "marker-transform", type: "functions", functions: [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]], "default-value": "", "default-meaning": "No transformation", doc: "SVG transformation definition" }, clip: { css: "marker-clip", type: "boolean", "default-value": !0, "default-meaning": "geometry will be clipped to map bounds before rendering", doc: "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts." }, smooth: { css: "marker-smooth", type: "float", "default-value": 0, "default-meaning": "no smoothing", range: "0-1", doc: "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries." }, "geometry-transform": { css: "marker-geometry-transform", type: "functions", "default-value": "none", "default-meaning": "geometry will not be transformed", doc: "Allows transformation functions to be applied to the geometry.", functions: [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]] }, "comp-op": { css: "marker-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, shield: { name: { css: "shield-name", type: "string", expression: !0, serialization: "content", doc: 'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]' }, file: { css: "shield-file", required: !0, type: "uri", "default-value": "none", doc: "Image file to render behind the shield text" }, "face-name": { css: "shield-face-name", type: "string", validate: "font", doc: "Font name and style to use for the shield text", "default-value": "", required: !0 }, "unlock-image": { css: "shield-unlock-image", type: "boolean", doc: "This parameter should be set to true if you are trying to position text beside rather than on top of the shield image", "default-value": !1, "default-meaning": "text alignment relative to the shield image uses the center of the image as the anchor for text positioning." }, size: { css: "shield-size", type: "float", doc: "The size of the shield text in pixels" }, fill: { css: "shield-fill", type: "color", doc: "The color of the shield text" }, placement: { css: "shield-placement", type: ["point", "line", "vertex", "interior"], "default-value": "point", doc: "How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons." }, "placement-type": { css: "shield-placement-type", doc: 'Re-position and/or re-size shield to avoid overlaps. "simple" for basic algorithm (using shield-placements string,) "dummy" to turn this feature off.', type: ["dummy", "simple", "list"], expression: !0, "default-meaning": "Alternative placements will not be enabled.", "default-value": "dummy" }, "avoid-edges": { css: "shield-avoid-edges", doc: "Tell positioning algorithm to avoid labeling near intersection edges.", type: "boolean", "default-value": !1 }, "allow-overlap": { css: "shield-allow-overlap", type: "boolean", "default-value": !1, doc: "Control whether overlapping shields are shown or hidden.", "default-meaning": "Do not allow shields to overlap with other map elements already placed." }, "minimum-distance": { css: "shield-min-distance", type: "float", "default-value": 0, doc: "Minimum distance to the next shield symbol, not necessarily the same shield." }, spacing: { css: "shield-spacing", type: "float", "default-value": 0, doc: "The spacing between repeated occurrences of the same shield on a line" }, "minimum-padding": { css: "shield-min-padding", "default-value": 0, doc: "Determines the minimum amount of padding that a shield gets relative to other shields", type: "float" }, "wrap-width": { css: "shield-wrap-width", type: "unsigned", "default-value": 0, doc: "Length of a chunk of text in characters before wrapping text" }, "wrap-before": { css: "shield-wrap-before", type: "boolean", "default-value": !1, doc: "Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width." }, "wrap-character": { css: "shield-wrap-character", type: "string", "default-value": " ", doc: "Use this character instead of a space to wrap long names." }, "halo-fill": { css: "shield-halo-fill", type: "color", "default-value": "#FFFFFF", "default-meaning": "white", doc: "Specifies the color of the halo around the text." }, "halo-radius": { css: "shield-halo-radius", doc: "Specify the radius of the halo in pixels", "default-value": 0, "default-meaning": "no halo", type: "float" }, "character-spacing": { css: "shield-character-spacing", type: "unsigned", "default-value": 0, doc: "Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement." }, "line-spacing": { css: "shield-line-spacing", doc: "Vertical spacing between lines of multiline labels (in pixels)", type: "unsigned" }, dx: { css: "shield-text-dx", type: "float", doc: "Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right", "default-value": 0 }, dy: { css: "shield-text-dy", type: "float", doc: "Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down", "default-value": 0 }, "shield-dx": { css: "shield-dx", type: "float", doc: "Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right", "default-value": 0 }, "shield-dy": { css: "shield-dy", type: "float", doc: "Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down", "default-value": 0 }, opacity: { css: "shield-opacity", type: "float", doc: "(Default 1.0) - opacity of the image used for the shield", "default-value": 1 }, "text-opacity": { css: "shield-text-opacity", type: "float", doc: "(Default 1.0) - opacity of the text placed on top of the shield", "default-value": 1 }, "horizontal-alignment": { css: "shield-horizontal-alignment", type: ["left", "middle", "right", "auto"], doc: "The shield's horizontal alignment from its centerpoint", "default-value": "auto" }, "vertical-alignment": { css: "shield-vertical-alignment", type: ["top", "middle", "bottom", "auto"], doc: "The shield's vertical alignment from its centerpoint", "default-value": "middle" }, "text-transform": { css: "shield-text-transform", type: ["none", "uppercase", "lowercase", "capitalize"], doc: "Transform the case of the characters", "default-value": "none" }, "justify-alignment": { css: "shield-justify-alignment", type: ["left", "center", "right", "auto"], doc: "Define how text in a shield's label is justified", "default-value": "auto" }, clip: { css: "shield-clip", type: "boolean", "default-value": !0, "default-meaning": "geometry will be clipped to map bounds before rendering", doc: "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts." }, "comp-op": { css: "shield-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, "line-pattern": { file: { css: "line-pattern-file", type: "uri", "default-value": "none", required: !0, doc: "An image file to be repeated and warped along a line", expression: !0 }, clip: { css: "line-pattern-clip", type: "boolean", "default-value": !0, "default-meaning": "geometry will be clipped to map bounds before rendering", doc: "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts." }, smooth: { css: "line-pattern-smooth", type: "float", "default-value": 0, "default-meaning": "no smoothing", range: "0-1", doc: "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries." }, "geometry-transform": { css: "line-pattern-geometry-transform", type: "functions", "default-value": "none", "default-meaning": "geometry will not be transformed", doc: "Allows transformation functions to be applied to the geometry.", functions: [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]] }, "comp-op": { css: "line-pattern-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, "polygon-pattern": { file: { css: "polygon-pattern-file", type: "uri", "default-value": "none", required: !0, doc: "Image to use as a repeated pattern fill within a polygon", expression: !0 }, alignment: { css: "polygon-pattern-alignment", type: ["local", "global"], "default-value": "local", doc: "Specify whether to align pattern fills to the layer or to the map." }, gamma: { css: "polygon-pattern-gamma", type: "float", "default-value": 1, "default-meaning": "fully antialiased", range: "0-1", doc: "Level of antialiasing of polygon pattern edges" }, opacity: { css: "polygon-pattern-opacity", type: "float", doc: "(Default 1.0) - Apply an opacity level to the image used for the pattern", "default-value": 1, "default-meaning": "The image is rendered without modifications" }, clip: { css: "polygon-pattern-clip", type: "boolean", "default-value": !0, "default-meaning": "geometry will be clipped to map bounds before rendering", doc: "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts." }, smooth: { css: "polygon-pattern-smooth", type: "float", "default-value": 0, "default-meaning": "no smoothing", range: "0-1", doc: "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries." }, "geometry-transform": { css: "polygon-pattern-geometry-transform", type: "functions", "default-value": "none", "default-meaning": "geometry will not be transformed", doc: "Allows transformation functions to be applied to the geometry.", functions: [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]] }, "comp-op": { css: "polygon-pattern-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, raster: { opacity: { css: "raster-opacity", "default-value": 1, "default-meaning": "opaque", type: "float", doc: "The opacity of the raster symbolizer on top of other symbolizers." }, "filter-factor": { css: "raster-filter-factor", "default-value": -1, "default-meaning": "Allow the datasource to choose appropriate downscaling.", type: "float", doc: "This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed." }, scaling: { css: "raster-scaling", type: ["near", "fast", "bilinear", "bilinear8", "bicubic", "spline16", "spline36", "hanning", "hamming", "hermite", "kaiser", "quadric", "catrom", "gaussian", "bessel", "mitchell", "sinc", "lanczos", "blackman"], "default-value": "near", doc: "The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality." }, "mesh-size": { css: "raster-mesh-size", "default-value": 16, "default-meaning": "Reprojection mesh will be 1/16 of the resolution of the source image", type: "unsigned", doc: "A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion." }, "comp-op": { css: "raster-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, point: { file: { css: "point-file", type: "uri", required: !1, "default-value": "none", doc: "Image file to represent a point" }, "allow-overlap": { css: "point-allow-overlap", type: "boolean", "default-value": !1, doc: "Control whether overlapping points are shown or hidden.", "default-meaning": "Do not allow points to overlap with each other - overlapping markers will not be shown." }, "ignore-placement": { css: "point-ignore-placement", type: "boolean", "default-value": !1, "default-meaning": "do not store the bbox of this geometry in the collision detector cache", doc: "value to control whether the placement of the feature will prevent the placement of other features" }, opacity: { css: "point-opacity", type: "float", "default-value": 1, "default-meaning": "Fully opaque", doc: "A value from 0 to 1 to control the opacity of the point" }, placement: { css: "point-placement", type: ["centroid", "interior"], doc: "How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.", "default-value": "centroid" }, transform: { css: "point-transform", type: "functions", functions: [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]], "default-value": "", "default-meaning": "No transformation", doc: "SVG transformation definition" }, "comp-op": { css: "point-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, text: { name: { css: "text-name", type: "string", expression: !0, required: !0, "default-value": "", serialization: "content", doc: "Value to use for a text label. Data columns are specified using brackets like [column_name]" }, "face-name": { css: "text-face-name", type: "string", validate: "font", doc: "Font name and style to render a label in", required: !0 }, size: { css: "text-size", type: "float", "default-value": 10, doc: "Text size in pixels" }, "text-ratio": { css: "text-ratio", doc: "Define the amount of text (of the total) present on successive lines when wrapping occurs", "default-value": 0, type: "unsigned" }, "wrap-width": { css: "text-wrap-width", doc: "Length of a chunk of text in characters before wrapping text", "default-value": 0, type: "unsigned" }, "wrap-before": { css: "text-wrap-before", type: "boolean", "default-value": !1, doc: "Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width." }, "wrap-character": { css: "text-wrap-character", type: "string", "default-value": " ", doc: "Use this character instead of a space to wrap long text." }, spacing: { css: "text-spacing", type: "unsigned", doc: "Distance between repeated text labels on a line (aka. label-spacing)" }, "character-spacing": { css: "text-character-spacing", type: "float", "default-value": 0, doc: "Horizontal spacing adjustment between characters in pixels" }, "line-spacing": { css: "text-line-spacing", "default-value": 0, type: "unsigned", doc: "Vertical spacing adjustment between lines in pixels" }, "label-position-tolerance": { css: "text-label-position-tolerance", "default-value": 0, type: "unsigned", doc: "Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)" }, "max-char-angle-delta": { css: "text-max-char-angle-delta", type: "float", "default-value": "22.5", doc: "The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners." }, fill: { css: "text-fill", doc: "Specifies the color for the text", "default-value": "#000000", type: "color" }, opacity: { css: "text-opacity", doc: "A number from 0 to 1 specifying the opacity for the text", "default-value": 1, "default-meaning": "Fully opaque", type: "float" }, "halo-fill": { css: "text-halo-fill", type: "color", "default-value": "#FFFFFF", "default-meaning": "white", doc: "Specifies the color of the halo around the text." }, "halo-radius": { css: "text-halo-radius", doc: "Specify the radius of the halo in pixels", "default-value": 0, "default-meaning": "no halo", type: "float" }, dx: { css: "text-dx", type: "float", doc: "Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right", "default-value": 0 }, dy: { css: "text-dy", type: "float", doc: "Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down", "default-value": 0 }, "vertical-alignment": { css: "text-vertical-alignment", type: ["top", "middle", "bottom", "auto"], doc: "Position of label relative to point position.", "default-value": "auto", "default-meaning": 'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.' }, "avoid-edges": { css: "text-avoid-edges", doc: "Tell positioning algorithm to avoid labeling near intersection edges.", "default-value": !1, type: "boolean" }, "minimum-distance": { css: "text-min-distance", doc: "Minimum permitted distance to the next text symbolizer.", type: "float" }, "minimum-padding": { css: "text-min-padding", doc: "Determines the minimum amount of padding that a text symbolizer gets relative to other text", type: "float" }, "minimum-path-length": { css: "text-min-path-length", type: "float", "default-value": 0, "default-meaning": "place labels on all paths", doc: "Place labels only on paths longer than this value." }, "allow-overlap": { css: "text-allow-overlap", type: "boolean", "default-value": !1, doc: "Control whether overlapping text is shown or hidden.", "default-meaning": "Do not allow text to overlap with other text - overlapping markers will not be shown." }, orientation: { css: "text-orientation", type: "float", expression: !0, doc: "Rotate the text." }, placement: { css: "text-placement", type: ["point", "line", "vertex", "interior"], "default-value": "point", doc: "Control the style of placement of a point versus the geometry it is attached to." }, "placement-type": { css: "text-placement-type", doc: 'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.', type: ["dummy", "simple"], "default-value": "dummy" }, placements: { css: "text-placements", type: "string", "default-value": "", doc: 'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` ' }, "text-transform": { css: "text-transform", type: ["none", "uppercase", "lowercase", "capitalize"], doc: "Transform the case of the characters", "default-value": "none" }, "horizontal-alignment": { css: "text-horizontal-alignment", type: ["left", "middle", "right", "auto"], doc: "The text's horizontal alignment from its centerpoint", "default-value": "auto" }, "justify-alignment": { css: "text-align", type: ["left", "right", "center", "auto"], doc: "Define how text is justified", "default-value": "auto", "default-meaning": "Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives" }, clip: { css: "text-clip", type: "boolean", "default-value": !0, "default-meaning": "geometry will be clipped to map bounds before rendering", doc: "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts." }, "comp-op": { css: "text-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, building: { fill: { css: "building-fill", "default-value": "#FFFFFF", doc: "The color of the buildings walls.", type: "color" }, "fill-opacity": { css: "building-fill-opacity", type: "float", doc: "The opacity of the building as a whole, including all walls.", "default-value": 1 }, height: { css: "building-height", doc: "The height of the building in pixels.", type: "float", expression: !0, "default-value": "0" } }, torque: { "-torque-clear-color": { css: "-torque-clear-color", type: "color", "default-value": "rgba(255, 255, 255, 0)", "default-meaning": "full clear", doc: "color used to clear canvas on each frame" }, "-torque-frame-count": { css: "-torque-frame-count", "default-value": "128", type: "float", "default-meaning": "the data is broken into 128 time frames", doc: "Number of animation steps/frames used in the animation. If the data contains a fewere number of total frames, the lesser value will be used." }, "-torque-resolution": { css: "-torque-resolution", "default-value": "2", type: "float", "default-meaning": "", doc: "Spatial resolution in pixels. A resolution of 1 means no spatial aggregation of the data. Any other resolution of N results in spatial aggregation into cells of NxN pixels. The value N must be power of 2" }, "-torque-animation-duration": { css: "-torque-animation-duration", "default-value": "30", type: "float", "default-meaning": "the animation lasts 30 seconds", doc: "Animation duration in seconds" }, "-torque-aggregation-function": { css: "-torque-aggregation-function", "default-value": "count(cartodb_id)", type: "string", "default-meaning": "the value for each cell is the count of points in that cell", doc: "A function used to calculate a value from the aggregate data for each cell. See -torque-resolution" }, "-torque-time-attribute": { css: "-torque-time-attribute", "default-value": "time", type: "string", "default-meaning": "the data column in your table that is of a time based type", doc: "The table column that contains the time information used create the animation" }, "-torque-data-aggregation": { css: "-torque-data-aggregation", "default-value": "linear", type: ["linear", "cumulative"], "default-meaning": "previous values are discarded", doc: "A linear animation will discard previous values while a cumulative animation will accumulate them until it restarts" } } }, colors: { aliceblue: [240, 248, 255], antiquewhite: [250, 235, 215], aqua: [0, 255, 255], aquamarine: [127, 255, 212], azure: [240, 255, 255], beige: [245, 245, 220], bisque: [255, 228, 196], black: [0, 0, 0], blanchedalmond: [255, 235, 205], blue: [0, 0, 255], blueviolet: [138, 43, 226], brown: [165, 42, 42], burlywood: [222, 184, 135], cadetblue: [95, 158, 160], chartreuse: [127, 255, 0], chocolate: [210, 105, 30], coral: [255, 127, 80], cornflowerblue: [100, 149, 237], cornsilk: [255, 248, 220], crimson: [220, 20, 60], cyan: [0, 255, 255], darkblue: [0, 0, 139], darkcyan: [0, 139, 139], darkgoldenrod: [184, 134, 11], darkgray: [169, 169, 169], darkgreen: [0, 100, 0], darkgrey: [169, 169, 169], darkkhaki: [189, 183, 107], darkmagenta: [139, 0, 139], darkolivegreen: [85, 107, 47], darkorange: [255, 140, 0], darkorchid: [153, 50, 204], darkred: [139, 0, 0], darksalmon: [233, 150, 122], darkseagreen: [143, 188, 143], darkslateblue: [72, 61, 139], darkslategrey: [47, 79, 79], darkturquoise: [0, 206, 209], darkviolet: [148, 0, 211], deeppink: [255, 20, 147], deepskyblue: [0, 191, 255], dimgray: [105, 105, 105], dimgrey: [105, 105, 105], dodgerblue: [30, 144, 255], firebrick: [178, 34, 34], floralwhite: [255, 250, 240], forestgreen: [34, 139, 34], fuchsia: [255, 0, 255], gainsboro: [220, 220, 220], ghostwhite: [248, 248, 255], gold: [255, 215, 0], goldenrod: [218, 165, 32], gray: [128, 128, 128], grey: [128, 128, 128], green: [0, 128, 0], greenyellow: [173, 255, 47], honeydew: [240, 255, 240], hotpink: [255, 105, 180], indianred: [205, 92, 92], indigo: [75, 0, 130], ivory: [255, 255, 240], khaki: [240, 230, 140], lavender: [230, 230, 250], lavenderblush: [255, 240, 245], lawngreen: [124, 252, 0], lemonchiffon: [255, 250, 205], lightblue: [173, 216, 230], lightcoral: [240, 128, 128], lightcyan: [224, 255, 255], lightgoldenrodyellow: [250, 250, 210], lightgray: [211, 211, 211], lightgreen: [144, 238, 144], lightgrey: [211, 211, 211], lightpink: [255, 182, 193], lightsalmon: [255, 160, 122], lightseagreen: [32, 178, 170], lightskyblue: [135, 206, 250], lightslategray: [119, 136, 153], lightslategrey: [119, 136, 153], lightsteelblue: [176, 196, 222], lightyellow: [255, 255, 224], lime: [0, 255, 0], limegreen: [50, 205, 50], linen: [250, 240, 230], magenta: [255, 0, 255], maroon: [128, 0, 0], mediumaquamarine: [102, 205, 170], mediumblue: [0, 0, 205], mediumorchid: [186, 85, 211], mediumpurple: [147, 112, 219], mediumseagreen: [60, 179, 113], mediumslateblue: [123, 104, 238], mediumspringgreen: [0, 250, 154], mediumturquoise: [72, 209, 204], mediumvioletred: [199, 21, 133], midnightblue: [25, 25, 112], mintcream: [245, 255, 250], mistyrose: [255, 228, 225], moccasin: [255, 228, 181], navajowhite: [255, 222, 173], navy: [0, 0, 128], oldlace: [253, 245, 230], olive: [128, 128, 0], olivedrab: [107, 142, 35], orange: [255, 165, 0], orangered: [255, 69, 0], orchid: [218, 112, 214], palegoldenrod: [238, 232, 170], palegreen: [152, 251, 152], paleturquoise: [175, 238, 238], palevioletred: [219, 112, 147], papayawhip: [255, 239, 213], peachpuff: [255, 218, 185], peru: [205, 133, 63], pink: [255, 192, 203], plum: [221, 160, 221], powderblue: [176, 224, 230], purple: [128, 0, 128], red: [255, 0, 0], rosybrown: [188, 143, 143], royalblue: [65, 105, 225], saddlebrown: [139, 69, 19], salmon: [250, 128, 114], sandybrown: [244, 164, 96], seagreen: [46, 139, 87], seashell: [255, 245, 238], sienna: [160, 82, 45], silver: [192, 192, 192], skyblue: [135, 206, 235], slateblue: [106, 90, 205], slategray: [112, 128, 144], slategrey: [112, 128, 144], snow: [255, 250, 250], springgreen: [0, 255, 127], steelblue: [70, 130, 180], tan: [210, 180, 140], teal: [0, 128, 128], thistle: [216, 191, 216], tomato: [255, 99, 71], turquoise: [64, 224, 208], violet: [238, 130, 238], wheat: [245, 222, 179], white: [255, 255, 255], whitesmoke: [245, 245, 245], yellow: [255, 255, 0], yellowgreen: [154, 205, 50], transparent: [0, 0, 0, 0] }, filter: { value: ["true", "false", "null", "point", "linestring", "polygon", "collection"] } }; e.exports = { version: { latest: n, "2.1.1": n } } }, function(e, t, n) { var r = n(40), i = n(65), o = n(21), a = n(12), s = n(10), l = n(0), u = n(2920), c = n(2919), d = n(2918), f = n(2917), h = { bubble: { modelClass: c, definitionAttrs: [{ fillColor: "color" }, { topLabel: "top_label" }, { bottomLabel: "bottom_label" }], dynamic: !0 }, category: { modelClass: u, definitionAttrs: ["prefix", "suffix"], dynamic: !0 }, choropleth: { modelClass: d, definitionAttrs: ["prefix", "suffix", { leftLabel: "left_label" }, { rightLabel: "right_label" }], dynamic: !0 }, custom: { modelClass: f, definitionAttrs: [{ items: "categories" }, "html"] }, html: { modelClass: f, definitionAttrs: [{ items: "categories" }, "html"] }, custom_choropleth: { modelClass: n(2916), definitionAttrs: ["prefix", "suffix", { leftLabel: "left_label" }, { rightLabel: "right_label" }, "colors"] }, torque: { modelClass: n(2915), definitionAttrs: [{ items: "categories" }, "html"] } }, p = ["title", { preHTMLSnippet: "pre_html" }, { postHTMLSnippet: "post_html" }], m = function Legends(e, t) { if (!t.engine) throw new Error("engine is required"); this._legendsData = e || [], this._engine = t.engine, l.each(h, function (e, t) { this[t] = this._createLegendModel(t, e) }, this), this._findDataForLegend("html") && (this.custom = this.html), delete this.html }; m.prototype._createLegendModel = function (e, t) { var n = t.modelClass, r = s(p).call(p, t.definitionAttrs), i = this._findDataForLegend(e); i = i && l.extend({}, l.omit(i, "definition"), i.definition); var o = {}; l.each(r, function (e) { var t = e, n = e; l.isObject(e) && (t = e[n = a(e)[0]]), o[n] = i && i[t] }); var u = new n(o, { engine: this._engine }); return i && u.show(), u }, m.prototype._findDataForLegend = function (e) { return o(l).call(l, this._legendsData, { type: e }) }, m.prototype.hasAnyLegend = function () { var e = i(l).call(l, h); return r(l).call(l, e, function (e) { var t = this[e]; return t && t.isVisible() }, this) }, e.exports = m }, function(e, t, n) { n(24), n(32); var r = n(5), i = n(0), o = function getFieldNames(e) { return r(i).call(i, e, function (e) { var t = {}; return t[e.name] = e.title, t }) }, a = n(3).Collection.extend({ equals: function equals(e) { var t = this.toJSON(); return i.isEqual(o(t), o(e)) } }); e.exports = a }, function(e, t, n) { var r = n(65), i = n(40), o = n(18), a = n(0), s = { second: { unit: "second", factor: 1 }, minute: { unit: "minute", factor: 1 }, hour: { unit: "hour", factor: 1 }, day: { unit: "day", factor: 1 }, week: { unit: "day", factor: 7 }, month: { unit: "month", factor: 1 }, quarter: { unit: "month", factor: 3 }, year: { unit: "month", factor: 12 }, decade: { unit: "month", factor: 120 }, century: { unit: "month", factor: 1200 }, millennium: { unit: "month", factor: 12e3 } }, l = {}; l.fillTimestampBuckets = function (e, t, n, r, i, s) { for (var l = [], u = !1, c = 0; c < r; c++) { u = void 0 !== e[c], l.push(u); var d = this.add(t, c, n), f = this.add(t, c + 1, n); e[c] = a.extend({ bin: c, start: d, end: f - 1, next: f, freq: 0 }, e[c]), delete e[c].timestamp } return "totals" === i ? e : function trimBuckets(e, t, n) { for (var r = null, i = !0, s = t.length - 1; s >= 0 && i && (!a.isFinite(n) || s >= n); s--)t[s] ? i = !1 : r = s; return null !== r ? o(e).call(e, 0, r) : e }(e, l, s) }, l.fillNumericBuckets = function (e, t, n, r) { for (var i = 0; i < r; i++) { var o = t + i * n, s = t + (i + 1) * n, l = i + 1 === r && e[i] ? e[i].max : s, u = a.extend({}, { bin: i, start: o, end: l, freq: 0 }, e[i]); e[i] = u } }, l.hasChangedSomeOf = function (e, t) { return i(a).call(a, r(a).call(a, t), function (t) { return a.contains(e, t) }) }, l.add = function (e, t, n) { if (!s.hasOwnProperty(n)) throw Error('aggregation "' + n + '" is not defined'); var r = new Date(1e3 * e), i = s[n].unit, o = t * s[n].factor; switch (i) { case "second": return r.setUTCSeconds(r.getUTCSeconds() + o) / 1e3; case "minute": return r.setUTCMinutes(r.getUTCMinutes() + o) / 1e3; case "hour": return r.setUTCHours(r.getUTCHours() + o) / 1e3; case "day": return r.setUTCDate(r.getUTCDate() + o) / 1e3; case "month": var a = r.getUTCDate(); return r.setUTCDate(1), r.setUTCMonth(r.getUTCMonth() + o), r.setUTCDate(Math.min(a, function _getDaysInMonth(e, t) { return [31, function _isLeapYear(e) { return e % 4 == 0 && e % 100 != 0 || e % 400 == 0 }(e) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][t] }(r.getUTCFullYear(), r.getUTCMonth()))), r.getTime() / 1e3; default: return 0 } }, e.exports = l }, function(e, t, n) { var r = n(6), i = n(3), o = n(0), a = n(2936); e.exports = i.Collection.extend({ model: a, initialize: function initialize(e, t) { this.aggregationModel = t.aggregationModel, this.aggregation = t.aggregationModel.get("aggregation") }, reset: function reset(e, t) { "count" !== this.aggregationModel.get("aggregation") && (e = r(o).call(o, e, function (e) { return null != (e instanceof i.Model ? e.get("value") : e.value) })), i.Collection.prototype.reset.call(this, e, t) }, comparator: function comparator(e, t) { return "Other" === e.get("name") ? 1 : "Other" === t.get("name") ? -1 : e.get("value") === t.get("value") ? e.get("selected") < t.get("selected") ? 1 : -1 : e.get("value") < t.get("value") ? 1 : -1 }, isOtherAvailable: function isOtherAvailable() { return this.where({ agg: !0, name: "Other" }).length > 0 } }) }, function(e, t, n) { var r = n(144); e.exports = r.extend({ isEmpty: function isEmpty() { throw new Error("Filters must implement the .isEmpty method") }, toJSON: function toJSON() { throw new Error("Filters must implement the .toJSON method") }, remove: function remove() { this.trigger("destroy", this), this.stopListening() } }) }, function(e, t, n) { n(209); var r = n(1), i = n(5), o = n(9), a = n(152), s = n(144), l = n(159), u = n(270); e.exports = a.extend({ className: "CDB-Limits CDB-Limits--short", events: { "click .js-button": "_toggleLimits", dblclick: "killEvent" }, initialize: function initialize() { var e, t; this.model = new s({ visible: !1 }), this.map = i(this.options), this._onDocumentClick = r(e = this._onDocumentClick).call(e, this), this._onDocumentKeyDown = r(t = this._onDocumentKeyDown).call(t, this), this._initBinds() }, render: function render() { return this.$el.html(l({ limits: u.html("Some tiles might not be rendering correctly.") })), this }, _initBinds: function _initBinds() { this.model.on("change:visible", this._onVisibleChanged, this) }, _enableDocumentBinds: function _enableDocumentBinds() { var e, t; r(e = o(document)).call(e, "keydown", this._onDocumentKeyDown), r(t = o(document)).call(t, "click", this._onDocumentClick) }, _disableDocumentBinds: function _disableDocumentBinds() { o(document).unbind("keydown", this._onDocumentKeyDown), o(document).unbind("click", this._onDocumentClick) }, _onDocumentKeyDown: function _onDocumentKeyDown(e) { e && 27 === e.keyCode && this._toggleLimits() }, _showLimits: function _showLimits() { this.$el.addClass("is-active"), this._enableDocumentBinds() }, _hideLimits: function _hideLimits() { this.$el.removeClass("is-active"), this._disableDocumentBinds() }, _toggleLimits: function _toggleLimits() { this.model.set("visible", !this.model.get("visible")) }, _onDocumentClick: function _onDocumentClick(e) { o(e.target).closest(this.el).length || this._toggleLimits() }, _onVisibleChanged: function _onVisibleChanged(e, t) { t ? this._showLimits() : this._hideLimits() }, clean: function clean() { this._disableDocumentBinds(), a.prototype.clean.call(this) } }) }, function(e, t, n) { n(153), n(16), n(68), n(25), n(35); var r = n(0), i = n(1574), o = n(1575), a = {}; a.formatNumber = function (e, t) { var n = +e; if (isNaN(n) || 0 === n) return e; e = n; var i = o.format(".2s"), a = 0, s = Math.abs(e); if (e > 1e3) return e = i(e) + (t ? " " + t : ""); if (s < .01) return e = function formatExponential(e) { var t = r.template('<%= mantissa %><span class="Legend-exponential">x</span>10<sup class="Legend-exponential"><%= decimals %></sup>'), n = e.toExponential(10).split("e"); return t({ mantissa: (1 * n[0]).toFixed(1), decimals: n[1] || 0 }) }(e) + (t ? " " + t : ""); s > 100 ? a = 0 : s > 10 ? a = 1 : s > .01 && (a = Math.min(Math.ceil(Math.abs(Math.log(s) / Math.log(10))) + 2, 2)); var l = (e = e.toFixed(a)).match(/(\.0+)$/); return l && (e = e.replace(l[0], "")), e }, a.formatDate = function (e) { return i.timeFormat("%Y-%m-%d")(e) }, a.formatValue = function (e) { return r.isNumber(e) ? a.formatNumber(e) : r.isDate(e) ? a.formatDate(e) : e }, e.exports = a }, function(e, t) { function Projector(e) { this.setMap(e) } Projector.prototype = new google.maps.OverlayView, Projector.prototype.draw = function () { }, Projector.prototype.latLngToPixel = function (e) { var t = this.getProjection(); return t ? t.fromLatLngToContainerPixel(e) : (console.warn("Projector has no projection"), new google.maps.Point(0, 0)) }, Projector.prototype.pixelToLatLng = function (e) { var t = this.getProjection(); return t ? t.fromContainerPixelToLatLng(e) : (console.warn("Projector has no projection"), new google.maps.LatLng(0, 0)) }, e.exports = Projector }, function(e, t) { e.exports = { AUTO: "auto", RASTER: "raster", VECTOR: "vector" } }, function(e, t, n) { var r = n(1), i = n(37), o = n(18), a = n(0), s = { setNativeTorqueLayer: function setNativeTorqueLayer(e) { var t = this.model; this.nativeTorqueLayer = e, t.get("visible") && this.nativeTorqueLayer.play(), this.nativeTorqueLayer.on("tilesLoaded", function () { this.trigger("load") }, this), this.nativeTorqueLayer.on("tilesLoading", function () { this.trigger("loading") }, this), this.nativeTorqueLayer.on("change:time", function (e) { this._setModelAttrs({ step: e.step, time: e.time, renderRange: { start: e.start, end: e.end } }) }, this), this.nativeTorqueLayer.on("tileError", function (e) { this.showLimitErrors && this.mapModel.trigger("error:limit", a.extend(e, { type: "limit" })) }, this), this.nativeTorqueLayer.on("change:steps", function (e) { this._setModelAttrs({ steps: e.steps }) }, this), this.nativeTorqueLayer.on("play", function () { this._callModel("play") }, this), this.nativeTorqueLayer.on("pause", function () { this._callModel("pause") }, this); var n = t.get("torque-steps") || this.nativeTorqueLayer.provider && this.nativeTorqueLayer.provider.getSteps() || this.nativeTorqueLayer.options.steps || 0; t.set({ isRunning: this.nativeTorqueLayer.isRunning(), time: this.nativeTorqueLayer.getTime(), step: this.nativeTorqueLayer.getStep(), steps: n }), this._onModel() }, _initialAttrs: function _initialAttrs(e) { return { table: e.get("table_name"), user: e.get("user_name"), column: e.get("property"), blendmode: e.get("torque-blend-mode"), resolution: 1, countby: "count(cartodb_id)", maps_api_template: e.get("maps_api_template"), client: e.get("client"), animationDuration: e.get("torque-duration"), steps: e.get("torque-steps"), sql: this._getQuery(e), visible: e.get("visible"), extra_params: { api_key: e.get("api_key") }, attribution: e.get("attribution"), cartocss: e.get("cartocss") || e.get("tile_style"), named_map: e.get("named_map"), auth_token: e.get("auth_token"), no_cdn: e.get("no_cdn"), loop: !(!1 === e.get("loop")) } }, _setModelAttrs: function _setModelAttrs(e) { this._unonModel(), this.model.set(e), this._onModel() }, _callModel: function _callModel(e) { this._unonModel(); var t = o(Array.prototype).call(arguments, 1); this.model[e].apply(this.model, t), this._onModel() }, _onModel: function _onModel() { this._unonModel(), this.listenTo(this.model, "change:isRunning", this._isRunningChanged), this.listenTo(this.model, "change:time", this._timeChanged), this.listenTo(this.model, "change:step", this._stepChanged), this.listenTo(this.model, "change:steps", this._stepsChanged), this.listenTo(this.model, "change:renderRange", this._renderRangeChanged), this.listenTo(this.model, "change", this._onModelChanged), this.listenTo(this.model, "change:cartocss", this._cartoCSSChanged), this.listenTo(this.model, "change:customDuration", this._onUpdateDuration) }, _unonModel: function _unonModel() { this.stopListening(this.model, "change:isRunning", this._isRunningChanged), this.stopListening(this.model, "change:time", this._timeChanged), this.stopListening(this.model, "change:step", this._stepChanged), this.stopListening(this.model, "change:steps", this._stepsChanged), this.stopListening(this.model, "change:renderRange", this._renderRangeChanged), this.stopListening(this.model, "change", this._onModelChanged), this.stopListening(this.model, "change:cartocss", this._cartoCSSChanged), this.stopListening(this.model, "change:customDuration", this._onUpdateDuration) }, _onUpdateDuration: function _onUpdateDuration() { var e = this.model.get("customDuration"); (e = e || this.model.getAnimationDuration(this.model.get("cartocss"))) && this.nativeTorqueLayer.animator.duration(e) }, _isRunningChanged: function _isRunningChanged(e, t) { t ? this.nativeTorqueLayer.play() : this.nativeTorqueLayer.pause() }, _timeChanged: function _timeChanged(e, t) { this.nativeTorqueLayer.setStep(this.nativeTorqueLayer.timeToStep(t)) }, _stepChanged: function _stepChanged(e, t) { this.nativeTorqueLayer.setStep(t) }, _stepsChanged: function _stepsChanged(e, t) { this.nativeTorqueLayer.setSteps(t) }, _cartoCSSChanged: function _cartoCSSChanged(e, t) { this.nativeTorqueLayer.setCartoCSS(this.model.get("cartocss")), this._onUpdateDuration() }, _renderRangeChanged: function _renderRangeChanged(e, t) { a.isObject(t) && a.isNumber(t.start) && a.isNumber(t.end) ? this.nativeTorqueLayer.renderRange(t.start, t.end) : this.nativeTorqueLayer.resetRenderRange() }, _onModelChanged: function _onModelChanged() { var e; this.model.hasChanged() && (this.model.hasChanged("visible") && (this.model.get("visible") ? this.nativeTorqueLayer.show() : this.nativeTorqueLayer.hide()), this.model.hasChanged("tileURLTemplates") && (this.nativeTorqueLayer.provider.templateUrl = this.model.getTileURLTemplates()[0], this.nativeTorqueLayer.provider.options.subdomains = this.model.get("subdomains"), a.extend(this.nativeTorqueLayer.provider.options, this.model.get("meta")), i(r(e = function _context() { this.nativeTorqueLayer.provider._setReady(!0), this.nativeTorqueLayer._reloadTiles() }).call(e, this), 0))) }, _getQuery: function _getQuery(e) { var t = e.get("source"), n = t ? t.get("query") : "select * from " + e.get("table_name"), r = e.get("sql_wrap"); return r && (n = a.template(r)({ sql: n })), n } }; e.exports = s }, function(e, t) { function GMapsTileLoader() { } GMapsTileLoader.prototype = { _initTileLoader: function (e, t) { this._map = e, this._projection = t, this._tiles = {}, this._tilesLoading = {}, this._tilesToLoad = 0, this._updateTiles = this._updateTiles.bind(this), this._listeners = [], this._listeners.push(google.maps.event.addListener(this._map, "dragend", this._updateTiles), google.maps.event.addListener(this._map, "zoom_changed", this._updateTiles)), this.tileSize = 256, this._updateTiles() }, _removeTileLoader: function () { this._listeners.forEach(function (e) { google.maps.event.removeListener(e) }), this._removeTiles() }, _removeTiles: function () { for (var e in this._tiles) this._removeTile(e) }, _reloadTiles: function () { this._removeTiles(), this._updateTiles() }, _updateTiles: function () { if (this._map) { var e = this._map.getBounds(), t = this._map.getZoom(), n = this.tileSize, r = 1 << t, i = new google.maps.LatLng(e.getNorthEast().lat(), e.getSouthWest().lng()), o = new google.maps.LatLng(e.getSouthWest().lat(), e.getNorthEast().lng()); this._projection = this._map.getProjection(); var a = this._projection.fromLatLngToPoint(i), s = this._projection.fromLatLngToPoint(o), l = new google.maps.Point(Math.floor(a.x * r / n), Math.floor(a.y * r / n)), u = new google.maps.Point(Math.floor(s.x * r / n), Math.floor(s.y * r / n)); this._addTilesFromCenterOut(l, u), this._removeOtherTiles(l, u) } }, _removeOtherTiles: function (e, t) { var n, r, i, o, a = this._map.getZoom(); for (o in this._tiles) this._tiles.hasOwnProperty(o) && (n = o.split(":"), r = parseInt(n[0], 10), i = parseInt(n[1], 10), z = parseInt(n[2], 10), (z !== a || r < e.x || r > t.x || i < e.y || i > t.y) && this._removeTile(o)) }, _removeTile: function (e) { this.onTileRemoved && this.onTileRemoved(this._tiles[e]), delete this._tiles[e], delete this._tilesLoading[e] }, _tileKey: function (e) { return e.x + ":" + e.y + ":" + e.zoom }, _tileShouldBeLoaded: function (e) { var t = this._tileKey(e); return !(t in this._tiles || t in this._tilesLoading) }, _tileLoaded: function (e, t) { this._tilesToLoad--; var n = e.x + ":" + e.y + ":" + e.zoom; this._tiles[n] = t, delete this._tilesLoading[n], 0 === this._tilesToLoad && this.onTilesLoaded && this.onTilesLoaded() }, getTilePos: function (e) { var t = 1 << this._map.getZoom(); e = { x: (e.x % t + t) % t, y: e.y }, e = new google.maps.Point(e.x * this.tileSize, e.y * this.tileSize); var n = this._map.getBounds(), r = new google.maps.LatLng(n.getNorthEast().lat(), n.getSouthWest().lng()), i = this._map.getProjection().fromLatLngToPoint(r); return zoom = 1 << this._map.getZoom(), i.x = i.x * zoom, i.y = i.y * zoom, new google.maps.Point(e.x - i.x, e.y - i.y) }, _addTilesFromCenterOut: function (e, t) { var n, r, i, o = [], a = new google.maps.Point(.5 * (e.x + t.x), .5 * (e.y + t.y)), s = this._map.getZoom(); for (n = e.y; n <= t.y; n++)for (r = e.x; r <= t.x; r++)(i = new google.maps.Point(r, n)).zoom = s, this._tileShouldBeLoaded(i) && o.push(i); var l = o.length; if (0 !== l) { for (o.sort(function (e, t) { return distanceToCenterSq(e) - distanceToCenterSq(t) }), this._tilesToLoad += l, r = 0; r < l; r++) { var u = o[r], c = this._tileKey(u); this._tilesLoading[c] = u, this.onTileAdded && this.onTileAdded(u) } this.onTilesLoading && this.onTilesLoading() } function distanceToCenterSq(e) { var t = e.x - a.x, n = e.y - a.y; return t * t + n * n } } }, e.exports = GMapsTileLoader }, function(e, t, n) { "use strict"; e.exports = function (e, t, n) { Array.isArray(e) && (n = t, t = e[1], e = e[0]); var r = [], i = (t - e) / (n - 1); i !== Number.POSITIVE_INFINITY && i !== Number.NEGATIVE_INFINITY || (i = 0); for (var o = 0; o < n; o++)r.push(e + o * i); return r } }, function(e, t, n) { "use strict"; e.exports = function minMaxNumericKey(e) { return Object.keys(e).reduce(function (e, t) { return Number.isFinite(+t) && (null === e.min && (e.min = +t), null === e.max && (e.max = +t), e.max = Math.max(e.max, +t), e.min = Math.min(e.min, +t)), e }, { min: null, max: null }) } }, function(e, t, n) { e.exports = n(3014) }, function(e, t, n) { "use strict"; e.exports = function columnName(e) { return e.replace("[", "").replace("]", "") } }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = { split: function split(e, t, n) { for (var r = [], i = "", split = !1, o = 0, a = !1, s = !1, l = 0; l < e.length; l++) { var u = e[l]; a ? s ? s = !1 : "\\" === u ? s = !0 : u === a && (a = !1) : '"' === u || "'" === u ? a = u : "(" === u ? o += 1 : ")" === u ? o > 0 && (o -= 1) : 0 === o && -1 !== t.indexOf(u) && (split = !0), split ? ("" !== i && r.push(i.trim()), i = "", split = !1) : i += u } return (n || "" !== i) && r.push(i.trim()), r }, space: function space(e) { return r.split(e, [" ", "\n", "\t"]) }, comma: function comma(e) { return r.split(e, [","], !0) } }; t.default = r, e.exports = t.default }, function(e, t, n) { var r = n(432), i = Object.prototype.hasOwnProperty, o = "undefined" != typeof Map; function ArraySet() { this._array = [], this._set = o ? new Map : Object.create(null) } ArraySet.fromArray = function ArraySet_fromArray(e, t) { for (var n = new ArraySet, r = 0, i = e.length; r < i; r++)n.add(e[r], t); return n }, ArraySet.prototype.size = function ArraySet_size() { return o ? this._set.size : Object.getOwnPropertyNames(this._set).length }, ArraySet.prototype.add = function ArraySet_add(e, t) { var n = o ? e : r.toSetString(e), a = o ? this.has(e) : i.call(this._set, n), s = this._array.length; a && !t || this._array.push(e), a || (o ? this._set.set(e, s) : this._set[n] = s) }, ArraySet.prototype.has = function ArraySet_has(e) { if (o) return this._set.has(e); var t = r.toSetString(e); return i.call(this._set, t) }, ArraySet.prototype.indexOf = function ArraySet_indexOf(e) { if (o) { var t = this._set.get(e); if (t >= 0) return t } else { var n = r.toSetString(e); if (i.call(this._set, n)) return this._set[n] } throw new Error('"' + e + '" is not in the set.') }, ArraySet.prototype.at = function ArraySet_at(e) { if (e >= 0 && e < this._array.length) return this._array[e]; throw new Error("No element indexed by " + e) }, ArraySet.prototype.toArray = function ArraySet_toArray() { return this._array.slice() }, t.ArraySet = ArraySet }, function(e, t, n) { var r = n(3046); t.encode = function base64VLQ_encode(e) { var t, n = "", i = function toVLQSigned(e) { return e < 0 ? 1 + (-e << 1) : 0 + (e << 1) }(e); do { t = 31 & i, (i >>>= 5) > 0 && (t |= 32), n += r.encode(t) } while (i > 0); return n }, t.decode = function base64VLQ_decode(e, t, n) { var i, o, a = e.length, s = 0, l = 0; do { if (t >= a) throw new Error("Expected more digits in base 64 VLQ value."); if (-1 === (o = r.decode(e.charCodeAt(t++)))) throw new Error("Invalid base64 digit: " + e.charAt(t - 1)); i = !!(32 & o), s += (o &= 31) << l, l += 5 } while (i); n.value = function fromVLQSigned(e) { var t = e >> 1; return 1 == (1 & e) ? -t : t }(s), n.rest = t } }, function(e, t, n) { var r = n(1348), i = n(432), o = n(1347).ArraySet, a = n(3045).MappingList; function SourceMapGenerator(e) { e || (e = {}), this._file = i.getArg(e, "file", null), this._sourceRoot = i.getArg(e, "sourceRoot", null), this._skipValidation = i.getArg(e, "skipValidation", !1), this._sources = new o, this._names = new o, this._mappings = new a, this._sourcesContents = null } SourceMapGenerator.prototype._version = 3, SourceMapGenerator.fromSourceMap = function SourceMapGenerator_fromSourceMap(e) { var t = e.sourceRoot, n = new SourceMapGenerator({ file: e.file, sourceRoot: t }); return e.eachMapping(function (e) { var r = { generated: { line: e.generatedLine, column: e.generatedColumn } }; null != e.source && (r.source = e.source, null != t && (r.source = i.relative(t, r.source)), r.original = { line: e.originalLine, column: e.originalColumn }, null != e.name && (r.name = e.name)), n.addMapping(r) }), e.sources.forEach(function (t) { var r = e.sourceContentFor(t); null != r && n.setSourceContent(t, r) }), n }, SourceMapGenerator.prototype.addMapping = function SourceMapGenerator_addMapping(e) { var t = i.getArg(e, "generated"), n = i.getArg(e, "original", null), r = i.getArg(e, "source", null), o = i.getArg(e, "name", null); this._skipValidation || this._validateMapping(t, n, r, o), null != r && (r = String(r), this._sources.has(r) || this._sources.add(r)), null != o && (o = String(o), this._names.has(o) || this._names.add(o)), this._mappings.add({ generatedLine: t.line, generatedColumn: t.column, originalLine: null != n && n.line, originalColumn: null != n && n.column, source: r, name: o }) }, SourceMapGenerator.prototype.setSourceContent = function SourceMapGenerator_setSourceContent(e, t) { var n = e; null != this._sourceRoot && (n = i.relative(this._sourceRoot, n)), null != t ? (this._sourcesContents || (this._sourcesContents = Object.create(null)), this._sourcesContents[i.toSetString(n)] = t) : this._sourcesContents && (delete this._sourcesContents[i.toSetString(n)], 0 === Object.keys(this._sourcesContents).length && (this._sourcesContents = null)) }, SourceMapGenerator.prototype.applySourceMap = function SourceMapGenerator_applySourceMap(e, t, n) { var r = t; if (null == t) { if (null == e.file) throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.'); r = e.file } var a = this._sourceRoot; null != a && (r = i.relative(a, r)); var s = new o, l = new o; this._mappings.unsortedForEach(function (t) { if (t.source === r && null != t.originalLine) { var o = e.originalPositionFor({ line: t.originalLine, column: t.originalColumn }); null != o.source && (t.source = o.source, null != n && (t.source = i.join(n, t.source)), null != a && (t.source = i.relative(a, t.source)), t.originalLine = o.line, t.originalColumn = o.column, null != o.name && (t.name = o.name)) } var u = t.source; null == u || s.has(u) || s.add(u); var c = t.name; null == c || l.has(c) || l.add(c) }, this), this._sources = s, this._names = l, e.sources.forEach(function (t) { var r = e.sourceContentFor(t); null != r && (null != n && (t = i.join(n, t)), null != a && (t = i.relative(a, t)), this.setSourceContent(t, r)) }, this) }, SourceMapGenerator.prototype._validateMapping = function SourceMapGenerator_validateMapping(e, t, n, r) { if (t && "number" != typeof t.line && "number" != typeof t.column) throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values."); if ((!(e && "line" in e && "column" in e && e.line > 0 && e.column >= 0) || t || n || r) && !(e && "line" in e && "column" in e && t && "line" in t && "column" in t && e.line > 0 && e.column >= 0 && t.line > 0 && t.column >= 0 && n)) throw new Error("Invalid mapping: " + JSON.stringify({ generated: e, source: n, original: t, name: r })) }, SourceMapGenerator.prototype._serializeMappings = function SourceMapGenerator_serializeMappings() { for (var e, t, n, o, a = 0, s = 1, l = 0, u = 0, c = 0, d = 0, f = "", h = this._mappings.toArray(), p = 0, m = h.length; p < m; p++) { if (e = "", (t = h[p]).generatedLine !== s) for (a = 0; t.generatedLine !== s;)e += ";", s++; else if (p > 0) { if (!i.compareByGeneratedPositionsInflated(t, h[p - 1])) continue; e += "," } e += r.encode(t.generatedColumn - a), a = t.generatedColumn, null != t.source && (o = this._sources.indexOf(t.source), e += r.encode(o - d), d = o, e += r.encode(t.originalLine - 1 - u), u = t.originalLine - 1, e += r.encode(t.originalColumn - l), l = t.originalColumn, null != t.name && (n = this._names.indexOf(t.name), e += r.encode(n - c), c = n)), f += e } return f }, SourceMapGenerator.prototype._generateSourcesContent = function SourceMapGenerator_generateSourcesContent(e, t) { return e.map(function (e) { if (!this._sourcesContents) return null; null != t && (e = i.relative(t, e)); var n = i.toSetString(e); return Object.prototype.hasOwnProperty.call(this._sourcesContents, n) ? this._sourcesContents[n] : null }, this) }, SourceMapGenerator.prototype.toJSON = function SourceMapGenerator_toJSON() { var e = { version: this._version, sources: this._sources.toArray(), names: this._names.toArray(), mappings: this._serializeMappings() }; return null != this._file && (e.file = this._file), null != this._sourceRoot && (e.sourceRoot = this._sourceRoot), this._sourcesContents && (e.sourcesContent = this._generateSourcesContent(e.sources, e.sourceRoot)), e }, SourceMapGenerator.prototype.toString = function SourceMapGenerator_toString() { return JSON.stringify(this.toJSON()) }, t.SourceMapGenerator = SourceMapGenerator }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol ? "symbol" : typeof e }, o = _interopRequireDefault(n(3047)), a = _interopRequireDefault(n(872)), s = _interopRequireDefault(n(268)), l = _interopRequireDefault(n(3040)), u = _interopRequireDefault(n(871)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } function isPromise(e) { return "object" === (void 0 === e ? "undefined" : i(e)) && "function" == typeof e.then } var c = function () { function LazyResult(e, t, n) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, LazyResult), this.stringified = !1, this.processed = !1; var r = void 0; if ("object" === (void 0 === t ? "undefined" : i(t)) && "root" === t.type) r = t; else if (t instanceof LazyResult || t instanceof l.default) r = t.root, t.map && (void 0 === n.map && (n.map = {}), n.map.inline || (n.map.inline = !1), n.map.prev = t.map); else { var o = u.default; n.syntax && (o = n.syntax.parse), n.parser && (o = n.parser), o.parse && (o = o.parse); try { r = o(t, n) } catch (e) { this.error = e } } this.result = new l.default(e, r, n) } return LazyResult.prototype.warnings = function warnings() { return this.sync().warnings() }, LazyResult.prototype.toString = function toString() { return this.css }, LazyResult.prototype.then = function then(e, t) { return this.async().then(e, t) }, LazyResult.prototype.catch = function _catch(e) { return this.async().catch(e) }, LazyResult.prototype.handleError = function handleError(e, t) { try { if (this.error = e, "CssSyntaxError" !== e.name || e.plugin) { if (t.postcssVersion) { var n = t.postcssPlugin, r = t.postcssVersion, i = this.result.processor.version, o = r.split("."), a = i.split("."); (o[0] !== a[0] || parseInt(o[1]) > parseInt(a[1])) && (0, s.default)("Your current PostCSS version is " + i + ", but " + n + " uses " + r + ". Perhaps this is the source of the error below.") } } else e.plugin = t.postcssPlugin, e.setMessage() } catch (e) { console && console.error && console.error(e) } }, LazyResult.prototype.asyncTick = function asyncTick(e, t) { var n, r, i = this; if (this.plugin >= this.processor.plugins.length) return this.processed = !0, e(); try { n = i.processor.plugins[i.plugin], r = i.run(n), i.plugin += 1, isPromise(r) ? r.then(function () { i.asyncTick(e, t) }).catch(function (e) { i.handleError(e, n), i.processed = !0, t(e) }) : i.asyncTick(e, t) } catch (e) { this.processed = !0, t(e) } }, LazyResult.prototype.async = function async() { var e = this; return this.processed ? new Promise(function (t, n) { e.error ? n(e.error) : t(e.stringify()) }) : this.processing ? this.processing : (this.processing = new Promise(function (t, n) { if (e.error) return n(e.error); e.plugin = 0, e.asyncTick(t, n) }).then(function () { return e.processed = !0, e.stringify() }), this.processing) }, LazyResult.prototype.sync = function sync() { if (this.processed) return this.result; if (this.processed = !0, this.processing) throw new Error("Use process(css).then(cb) to work with async plugins"); if (this.error) throw this.error; var e = this.result.processor.plugins, t = Array.isArray(e), n = 0; for (e = t ? e : e[Symbol.iterator](); ;) { var r; if (t) { if (n >= e.length) break; r = e[n++] } else { if ((n = e.next()).done) break; r = n.value } var i = r; if (isPromise(this.run(i))) throw new Error("Use process(css).then(cb) to work with async plugins") } return this.result }, LazyResult.prototype.run = function run(e) { this.result.lastPlugin = e; try { return e(this.result.root, this.result) } catch (t) { throw this.handleError(t, e), t } }, LazyResult.prototype.stringify = function stringify() { if (this.stringified) return this.result; this.stringified = !0, this.sync(); var e = this.result.opts, t = a.default; e.syntax && (t = e.syntax.stringify), e.stringifier && (t = e.stringifier), t.stringify && (t = t.stringify); var n = new o.default(t, this.result.root, this.result.opts).generate(); return this.result.css = n[0], this.result.map = n[1], this.result }, r(LazyResult, [{ key: "processor", get: function get() { return this.result.processor } }, { key: "opts", get: function get() { return this.result.opts } }, { key: "css", get: function get() { return this.stringify().css } }, { key: "content", get: function get() { return this.stringify().content } }, { key: "map", get: function get() { return this.stringify().map } }, { key: "root", get: function get() { return this.sync().root } }, { key: "messages", get: function get() { return this.sync().messages } }]), LazyResult }(); t.default = c, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol ? "symbol" : typeof e }, i = function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } }(n(1350)); var o = function () { function Processor() { var e = arguments.length <= 0 || void 0 === arguments[0] ? [] : arguments[0]; !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Processor), this.version = "5.0.14", this.plugins = this.normalize(e) } return Processor.prototype.use = function use(e) { return this.plugins = this.plugins.concat(this.normalize([e])), this }, Processor.prototype.process = function process(e) { var t = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1]; return new i.default(this, e, t) }, Processor.prototype.normalize = function normalize(e) { var t = [], n = e, i = Array.isArray(n), o = 0; for (n = i ? n : n[Symbol.iterator](); ;) { var a; if (i) { if (o >= n.length) break; a = n[o++] } else { if ((o = n.next()).done) break; a = o.value } var s = a; if (s.postcss && (s = s.postcss), "object" === (void 0 === s ? "undefined" : r(s)) && Array.isArray(s.plugins)) t = t.concat(s.plugins); else { if ("function" != typeof s) throw new Error(s + " is not a PostCSS plugin"); t.push(s) } } return t }, Processor }(); t.default = o, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = { colon: ": ", indent: "    ", beforeDecl: "\n", beforeRule: "\n", beforeOpen: " ", beforeClose: "\n", beforeComment: "\n", after: "\n", emptyBody: "", commentLeft: " ", commentRight: " " }; var i = function () { function Stringifier(e) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Stringifier), this.builder = e } return Stringifier.prototype.stringify = function stringify(e, t) { this[e.type](e, t) }, Stringifier.prototype.root = function root(e) { this.body(e), e.raws.after && this.builder(e.raws.after) }, Stringifier.prototype.comment = function comment(e) { var t = this.raw(e, "left", "commentLeft"), n = this.raw(e, "right", "commentRight"); this.builder("/*" + t + e.text + n + "*/", e) }, Stringifier.prototype.decl = function decl(e, t) { var n = this.raw(e, "between", "colon"), r = e.prop + n + this.rawValue(e, "value"); e.important && (r += e.raws.important || " !important"), t && (r += ";"), this.builder(r, e) }, Stringifier.prototype.rule = function rule(e) { this.block(e, this.rawValue(e, "selector")) }, Stringifier.prototype.atrule = function atrule(e, t) { var n = "@" + e.name, r = e.params ? this.rawValue(e, "params") : ""; if (void 0 !== e.raws.afterName ? n += e.raws.afterName : r && (n += " "), e.nodes) this.block(e, n + r); else { var i = (e.raws.between || "") + (t ? ";" : ""); this.builder(n + r + i, e) } }, Stringifier.prototype.body = function body(e) { for (var t = e.nodes.length - 1; t > 0 && "comment" === e.nodes[t].type;)t -= 1; for (var n = this.raw(e, "semicolon"), r = 0; r < e.nodes.length; r++) { var i = e.nodes[r], o = this.raw(i, "before"); o && this.builder(o), this.stringify(i, t !== r || n) } }, Stringifier.prototype.block = function block(e, t) { var n = this.raw(e, "between", "beforeOpen"); this.builder(t + n + "{", e, "start"); var r = void 0; e.nodes && e.nodes.length ? (this.body(e), r = this.raw(e, "after")) : r = this.raw(e, "after", "emptyBody"), r && this.builder(r), this.builder("}", e, "end") }, Stringifier.prototype.raw = function raw(e, t, n) { var i = void 0; if (n || (n = t), t && void 0 !== (i = e.raws[t])) return i; var o = e.parent; if ("before" === n && (!o || "root" === o.type && o.first === e)) return ""; if (!o) return r[n]; var a = e.root(); if (a.rawCache || (a.rawCache = {}), void 0 !== a.rawCache[n]) return a.rawCache[n]; if ("before" === n || "after" === n) return this.beforeAfter(e, n); var s = "raw" + function capitalize(e) { return e[0].toUpperCase() + e.slice(1) }(n); return this[s] ? i = this[s](a, e) : a.walk(function (e) { if (void 0 !== (i = e.raws[t])) return !1 }), void 0 === i && (i = r[n]), a.rawCache[n] = i, i }, Stringifier.prototype.rawSemicolon = function rawSemicolon(e) { var t = void 0; return e.walk(function (e) { if (e.nodes && e.nodes.length && "decl" === e.last.type && void 0 !== (t = e.raws.semicolon)) return !1 }), t }, Stringifier.prototype.rawEmptyBody = function rawEmptyBody(e) { var t = void 0; return e.walk(function (e) { if (e.nodes && 0 === e.nodes.length && void 0 !== (t = e.raws.after)) return !1 }), t }, Stringifier.prototype.rawIndent = function rawIndent(e) { if (e.raws.indent) return e.raws.indent; var t = void 0; return e.walk(function (n) { var r = n.parent; if (r && r !== e && r.parent && r.parent === e && void 0 !== n.raws.before) { var i = n.raws.before.split("\n"); return t = (t = i[i.length - 1]).replace(/[^\s]/g, ""), !1 } }), t }, Stringifier.prototype.rawBeforeComment = function rawBeforeComment(e, t) { var n = void 0; return e.walkComments(function (e) { if (void 0 !== e.raws.before) return -1 !== (n = e.raws.before).indexOf("\n") && (n = n.replace(/[^\n]+$/, "")), !1 }), void 0 === n && (n = this.raw(t, null, "beforeDecl")), n }, Stringifier.prototype.rawBeforeDecl = function rawBeforeDecl(e, t) { var n = void 0; return e.walkDecls(function (e) { if (void 0 !== e.raws.before) return -1 !== (n = e.raws.before).indexOf("\n") && (n = n.replace(/[^\n]+$/, "")), !1 }), void 0 === n && (n = this.raw(t, null, "beforeRule")), n }, Stringifier.prototype.rawBeforeRule = function rawBeforeRule(e) { var t = void 0; return e.walk(function (n) { if (n.nodes && (n.parent !== e || e.first !== n) && void 0 !== n.raws.before) return -1 !== (t = n.raws.before).indexOf("\n") && (t = t.replace(/[^\n]+$/, "")), !1 }), t }, Stringifier.prototype.rawBeforeClose = function rawBeforeClose(e) { var t = void 0; return e.walk(function (e) { if (e.nodes && e.nodes.length > 0 && void 0 !== e.raws.after) return -1 !== (t = e.raws.after).indexOf("\n") && (t = t.replace(/[^\n]+$/, "")), !1 }), t }, Stringifier.prototype.rawBeforeOpen = function rawBeforeOpen(e) { var t = void 0; return e.walk(function (e) { if ("decl" !== e.type && void 0 !== (t = e.raws.between)) return !1 }), t }, Stringifier.prototype.rawColon = function rawColon(e) { var t = void 0; return e.walkDecls(function (e) { if (void 0 !== e.raws.between) return t = e.raws.between.replace(/[^\s:]/g, ""), !1 }), t }, Stringifier.prototype.beforeAfter = function beforeAfter(e, t) { var n = void 0; n = "decl" === e.type ? this.raw(e, null, "beforeDecl") : "comment" === e.type ? this.raw(e, null, "beforeComment") : "before" === t ? this.raw(e, null, "beforeRule") : this.raw(e, null, "beforeClose"); for (var r = e.parent, i = 0; r && "root" !== r.type;)i += 1, r = r.parent; if (-1 !== n.indexOf("\n")) { var o = this.raw(e, null, "indent"); if (o.length) for (var a = 0; a < i; a++)n += o } return n }, Stringifier.prototype.rawValue = function rawValue(e, t) { var n = e[t], r = e.raws[t]; return r && r.value === n ? r.raw : n }, Stringifier }(); t.default = i, e.exports = t.default }, function(e, t, n) { "use strict"; e.exports = !1 }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = _interopRequireDefault(n(1353)), o = _interopRequireDefault(n(268)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var a = function () { function CssSyntaxError(e, t, n, r, i, o) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, CssSyntaxError), this.name = "CssSyntaxError", this.reason = e, i && (this.file = i), r && (this.source = r), o && (this.plugin = o), void 0 !== t && void 0 !== n && (this.line = t, this.column = n), this.setMessage(), Error.captureStackTrace && Error.captureStackTrace(this, CssSyntaxError) } return CssSyntaxError.prototype.setMessage = function setMessage() { this.message = this.plugin ? this.plugin + ": " : "", this.message += this.file ? this.file : "<css input>", void 0 !== this.line && (this.message += ":" + this.line + ":" + this.column), this.message += ": " + this.reason }, CssSyntaxError.prototype.showSourceCode = function showSourceCode(e) { if (!this.source) return ""; for (var t = this.line - 1, n = this.source.split("\n"), r = t > 0 ? n[t - 1] + "\n" : "", o = n[t], a = t < n.length - 1 ? "\n" + n[t + 1] : "", s = "\n", l = 0; l < this.column - 1; l++)s += " "; return void 0 === e && (e = i.default), "\n" + r + o + (s += e ? "\x1b[1;31m^\x1b[0m" : "^") + a }, CssSyntaxError.prototype.toString = function toString() { return this.name + ": " + this.message + this.showSourceCode() }, r(CssSyntaxError, [{ key: "generated", get: function get() { return (0, o.default)("CssSyntaxError#generated is depreacted. Use input instead."), this.input } }]), CssSyntaxError }(); t.default = a, e.exports = t.default }, function(e, t) { var n = 2 * Math.PI, r = .05, i = 255; e.exports = { renderPoint: function renderPoint(e, t) { e.fillStyle = t["marker-fill"]; var i = t["marker-width"]; e.beginPath(), e.arc(0, 0, i, 0, n, !0, !0), e.closePath(), void 0 !== t["marker-opacity"] && (t["marker-fill-opacity"] = t["marker-line-opacity"] = t["marker-opacity"]), t["marker-fill"] && (e.globalAlpha = t["marker-fill-opacity"] >= 0 ? t["marker-fill-opacity"] : 1, e.globalAlpha > 0 && e.fill()), t["marker-line-color"] && t["marker-line-width"] && t["marker-line-width"] > r && (e.globalAlpha = t["marker-line-opacity"] >= 0 ? t["marker-line-opacity"] : 1, void 0 !== t["marker-line-width"] && (e.lineWidth = t["marker-line-width"]), e.strokeStyle = t["marker-line-color"], e.globalAlpha > 0 && e.stroke()) }, renderSprite: function renderSprite(e, t, n) { t.complete && (void 0 === n["marker-fill-opacity"] && void 0 === n["marker-opacity"] || (e.globalAlpha = n["marker-fill-opacity"] || n["marker-opacity"]), e.drawImage(t, 0, 0, Math.min(t.width, i), Math.min(t.height, i))) }, renderRectangle: function renderRectangle(e, t) { e.fillStyle = t["marker-fill"]; var n = t["marker-width"], r = 2 * n; t["marker-fill"] && (void 0 === t["marker-fill-opacity"] && void 0 === t["marker-opacity"] || (e.globalAlpha = t["marker-fill-opacity"] || t["marker-opacity"]), e.fillRect(-n, -n, r, r)), e.globalAlpha = 1, t["marker-line-color"] && t["marker-line-width"] && (t["marker-line-opacity"] && (e.globalAlpha = t["marker-line-opacity"]), t["marker-line-width"] && (e.lineWidth = t["marker-line-width"]), e.strokeStyle = t["marker-line-color"], e.globalAlpha > 0 && e.strokeRect(-n, -n, r, r)) }, MAX_SPRITE_RADIUS: i } }, function(e, t, n) { (function (t) { n(433); var r = n(246), i = n(433).existsSync || n(246).existsSync; e.exports.version = {};["2.0.0", "2.0.1", "2.0.2", "2.1.0", "2.1.1", "2.2.0", "2.3.0", "3.0.0"].map(function (o) { e.exports.version[o] = n(160)(r.join(t, o, "reference.json")); var a = r.join(t, o, "datasources.json"); i(a) && (e.exports.version[o].datasources = n(160)(a).datasources) }) }).call(this, "/") }, function(e, t, n) { var r = n(334), i = Array.prototype.slice, o = Object.prototype.hasOwnProperty, a = e.exports = ok; function replacer(e, t) { return r.isUndefined(t) ? "" + t : r.isNumber(t) && !isFinite(t) ? t.toString() : r.isFunction(t) || r.isRegExp(t) ? t.toString() : t } function truncate(e, t) { return r.isString(e) ? e.length < t ? e : e.slice(0, t) : e } function fail(e, t, n, r, i) { throw new a.AssertionError({ message: n, actual: e, expected: t, operator: r, stackStartFunction: i }) } function ok(e, t) { e || fail(e, !0, t, "==", a.ok) } function _deepEqual(e, t) { if (e === t) return !0; if (r.isBuffer(e) && r.isBuffer(t)) { if (e.length != t.length) return !1; for (var n = 0; n < e.length; n++)if (e[n] !== t[n]) return !1; return !0 } return r.isDate(e) && r.isDate(t) ? e.getTime() === t.getTime() : r.isRegExp(e) && r.isRegExp(t) ? e.source === t.source && e.global === t.global && e.multiline === t.multiline && e.lastIndex === t.lastIndex && e.ignoreCase === t.ignoreCase : r.isObject(e) || r.isObject(t) ? function objEquiv(e, t) { if (r.isNullOrUndefined(e) || r.isNullOrUndefined(t)) return !1; if (e.prototype !== t.prototype) return !1; if (r.isPrimitive(e) || r.isPrimitive(t)) return e === t; var n = isArguments(e), o = isArguments(t); if (n && !o || !n && o) return !1; if (n) return e = i.call(e), t = i.call(t), _deepEqual(e, t); var a, l, u = s(e), c = s(t); if (u.length != c.length) return !1; for (u.sort(), c.sort(), l = u.length - 1; l >= 0; l--)if (u[l] != c[l]) return !1; for (l = u.length - 1; l >= 0; l--)if (a = u[l], !_deepEqual(e[a], t[a])) return !1; return !0 }(e, t) : e == t } function isArguments(e) { return "[object Arguments]" == Object.prototype.toString.call(e) } function expectedException(e, t) { return !(!e || !t) && ("[object RegExp]" == Object.prototype.toString.call(t) ? t.test(e) : e instanceof t || !0 === t.call({}, e)) } function _throws(e, t, n, i) { var o; r.isString(n) && (i = n, n = null); try { t() } catch (e) { o = e } if (i = (n && n.name ? " (" + n.name + ")." : ".") + (i ? " " + i : "."), e && !o && fail(o, n, "Missing expected exception" + i), !e && expectedException(o, n) && fail(o, n, "Got unwanted exception" + i), e && o && n && !expectedException(o, n) || !e && o) throw o } a.AssertionError = function AssertionError(e) { this.name = "AssertionError", this.actual = e.actual, this.expected = e.expected, this.operator = e.operator, e.message ? (this.message = e.message, this.generatedMessage = !1) : (this.message = function getMessage(e) { return truncate(JSON.stringify(e.actual, replacer), 128) + " " + e.operator + " " + truncate(JSON.stringify(e.expected, replacer), 128) }(this), this.generatedMessage = !0); var t = e.stackStartFunction || fail; if (Error.captureStackTrace) Error.captureStackTrace(this, t); else { var n = new Error; if (n.stack) { var r = n.stack, i = t.name, o = r.indexOf("\n" + i); if (o >= 0) { var a = r.indexOf("\n", o + 1); r = r.substring(a + 1) } this.stack = r } } }, r.inherits(a.AssertionError, Error), a.fail = fail, a.ok = ok, a.equal = function equal(e, t, n) { e != t && fail(e, t, n, "==", a.equal) }, a.notEqual = function notEqual(e, t, n) { e == t && fail(e, t, n, "!=", a.notEqual) }, a.deepEqual = function deepEqual(e, t, n) { _deepEqual(e, t) || fail(e, t, n, "deepEqual", a.deepEqual) }, a.notDeepEqual = function notDeepEqual(e, t, n) { _deepEqual(e, t) && fail(e, t, n, "notDeepEqual", a.notDeepEqual) }, a.strictEqual = function strictEqual(e, t, n) { e !== t && fail(e, t, n, "===", a.strictEqual) }, a.notStrictEqual = function notStrictEqual(e, t, n) { e === t && fail(e, t, n, "!==", a.notStrictEqual) }, a.throws = function (e, t, n) { _throws.apply(this, [!0].concat(i.call(arguments))) }, a.doesNotThrow = function (e, t) { _throws.apply(this, [!1].concat(i.call(arguments))) }, a.ifError = function (e) { if (e) throw e }; var s = Object.keys || function (e) { var t = []; for (var n in e) o.call(e, n) && t.push(n); return t } }, function(e, t) { var n = { version: "2.1.1", style: { "filter-mode": { type: ["all", "first"], doc: "Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)", "default-value": "all", "default-meaning": "All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true." }, "image-filters": { css: "image-filters", "default-value": "none", "default-meaning": "no filters", type: "functions", functions: [["agg-stack-blur", 2], ["emboss", 0], ["blur", 0], ["gray", 0], ["sobel", 0], ["edge-detect", 0], ["x-gradient", 0], ["y-gradient", 0], ["invert", 0], ["sharpen", 0], ["colorize-alpha", -1], ["color-to-alpha", 1], ["scale-hsla", 8]], doc: "A list of image filters." }, "comp-op": { css: "comp-op", "default-value": "src-over", "default-meaning": "add the current layer on top of other layers", doc: "Composite operation. This defines how this layer should behave relative to layers atop or below it.", type: ["clear", "src", "dst", "src-over", "source-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "lighter", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] }, opacity: { css: "opacity", type: "float", doc: "An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)", "default-value": 1, "default-meaning": "no separate buffer will be used and no alpha will be applied to the style after rendering" } }, layer: { name: { "default-value": "", type: "string", required: !0, "default-meaning": "No layer name has been provided", doc: "The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map" }, srs: { "default-value": "", type: "string", "default-meaning": "No srs value is provided and the value will be inherited from the Map's srs", doc: "The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'" }, status: { "default-value": !0, type: "boolean", "default-meaning": "This layer will be marked as active and available for processing", doc: "A property that can be set to false to disable this layer from being processed" }, minzoom: { "default-value": "0", type: "float", "default-meaning": "The layer will be visible at the minimum possible scale", doc: "The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6" }, maxzoom: { "default-value": "1.79769e+308", type: "float", "default-meaning": "The layer will be visible at the maximum possible scale", doc: "The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6" }, queryable: { "default-value": !1, type: "boolean", "default-meaning": "The layer will not be available for the direct querying of data values", doc: "This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true" }, "clear-label-cache": { "default-value": !1, type: "boolean", "default-meaning": "The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer", doc: "This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers" }, "group-by": { "default-value": "", type: "string", "default-meaning": "No special layer grouping will be used during rendering", doc: "https://github.com/mapnik/mapnik/wiki/Grouped-rendering" }, "buffer-size": { "default-value": "0", type: "float", "default-meaning": "No buffer will be used", doc: "Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering" }, "maximum-extent": { "default-value": "none", type: "bbox", "default-meaning": "No clipping extent will be used", doc: "An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer." } }, symbolizers: { "*": { "image-filters": { css: "image-filters", "default-value": "none", "default-meaning": "no filters", type: "functions", functions: [["agg-stack-blur", 2], ["emboss", 0], ["blur", 0], ["gray", 0], ["sobel", 0], ["edge-detect", 0], ["x-gradient", 0], ["y-gradient", 0], ["invert", 0], ["sharpen", 0], ["colorize-alpha", -1], ["color-to-alpha", 1], ["scale-hsla", 8], ["buckets", -1], ["category", -1], ["equal", -1], ["headtails", -1], ["jenks", -1], ["quantiles", -1], ["cartocolor", -1], ["colorbrewer", -1], ["range", -1], ["ramp", -1]], doc: "A list of image filters." }, "comp-op": { css: "comp-op", "default-value": "src-over", "default-meaning": "add the current layer on top of other layers", doc: "Composite operation. This defines how this layer should behave relative to layers atop or below it.", type: ["clear", "src", "dst", "src-over", "source-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "lighter", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] }, opacity: { css: "opacity", type: "float", doc: "An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)", "default-value": 1, "default-meaning": "no separate buffer will be used and no alpha will be applied to the style after rendering" } }, map: { "background-color": { css: "background-color", "default-value": "none", "default-meaning": "transparent", type: "color", doc: "Map Background color" }, "background-image": { css: "background-image", type: "uri", "default-value": "", "default-meaning": "transparent", doc: "An image that is repeated below all features on a map as a background.", description: "Map Background image" }, srs: { css: "srs", type: "string", "default-value": "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs", "default-meaning": "The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space", doc: "Map spatial reference (proj4 string)" }, "buffer-size": { css: "buffer-size", "default-value": "0", type: "float", "default-meaning": "No buffer will be used", doc: 'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".' }, "maximum-extent": { css: "", "default-value": "none", type: "bbox", "default-meaning": "No clipping extent will be used", doc: "An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map." }, base: { css: "base", "default-value": "", "default-meaning": "This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.", type: "string", doc: "Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet." }, "paths-from-xml": { css: "", "default-value": !0, "default-meaning": "Paths read from XML will be interpreted from the location of the XML", type: "boolean", doc: "value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()" }, "minimum-version": { css: "", "default-value": "none", "default-meaning": "Mapnik version will not be detected and no error will be thrown about compatibility", type: "string", doc: "The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet" }, "font-directory": { css: "font-directory", type: "uri", "default-value": "none", "default-meaning": "No map-specific fonts will be registered", doc: "Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)." } }, polygon: { fill: { css: "polygon-fill", type: "color", "default-value": "rgba(128,128,128,1)", "default-meaning": "gray and fully opaque (alpha = 1), same as rgb(128,128,128)", doc: "Fill color to assign to a polygon", expression: !0 }, "fill-opacity": { css: "polygon-opacity", type: "float", doc: "The opacity of the polygon", "default-value": 1, "default-meaning": "opaque", expression: !0 }, gamma: { css: "polygon-gamma", type: "float", "default-value": 1, "default-meaning": "fully antialiased", range: "0-1", doc: "Level of antialiasing of polygon edges" }, "gamma-method": { css: "polygon-gamma-method", type: ["power", "linear", "none", "threshold", "multiply"], "default-value": "power", "default-meaning": "pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA", doc: "An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h" }, clip: { css: "polygon-clip", type: "boolean", "default-value": !0, "default-meaning": "geometry will be clipped to map bounds before rendering", doc: "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts." }, smooth: { css: "polygon-smooth", type: "float", "default-value": 0, "default-meaning": "no smoothing", range: "0-1", doc: "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries." }, "geometry-transform": { css: "polygon-geometry-transform", type: "functions", "default-value": "none", "default-meaning": "geometry will not be transformed", doc: "Allows transformation functions to be applied to the geometry.", functions: [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]] }, "comp-op": { css: "polygon-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, line: { stroke: { css: "line-color", "default-value": "rgba(0,0,0,1)", type: "color", "default-meaning": "black and fully opaque (alpha = 1), same as rgb(0,0,0)", doc: "The color of a drawn line", expression: !0 }, "stroke-width": { css: "line-width", "default-value": 1, type: "float", doc: "The width of a line in pixels", expression: !0 }, "stroke-opacity": { css: "line-opacity", "default-value": 1, type: "float", "default-meaning": "opaque", doc: "The opacity of a line" }, "stroke-linejoin": { css: "line-join", "default-value": "miter", type: ["miter", "round", "bevel"], doc: "The behavior of lines when joining" }, "stroke-linecap": { css: "line-cap", "default-value": "butt", type: ["butt", "round", "square"], doc: "The display of line endings" }, "stroke-gamma": { css: "line-gamma", type: "float", "default-value": 1, "default-meaning": "fully antialiased", range: "0-1", doc: "Level of antialiasing of stroke line" }, "stroke-gamma-method": { css: "line-gamma-method", type: ["power", "linear", "none", "threshold", "multiply"], "default-value": "power", "default-meaning": "pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA", doc: "An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h" }, "stroke-dasharray": { css: "line-dasharray", type: "numbers", doc: "A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.", "default-value": "none", "default-meaning": "solid line" }, "stroke-dashoffset": { css: "line-dash-offset", type: "numbers", doc: "valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)", "default-value": "none", "default-meaning": "solid line" }, "stroke-miterlimit": { css: "line-miterlimit", type: "float", doc: "The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.", "default-value": 4, "default-meaning": "Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'" }, clip: { css: "line-clip", type: "boolean", "default-value": !0, "default-meaning": "geometry will be clipped to map bounds before rendering", doc: "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts." }, smooth: { css: "line-smooth", type: "float", "default-value": 0, "default-meaning": "no smoothing", range: "0-1", doc: "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries." }, offset: { css: "line-offset", type: "float", "default-value": 0, "default-meaning": "no offset", doc: "Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)." }, rasterizer: { css: "line-rasterizer", type: ["full", "fast"], "default-value": "full", doc: "Exposes an alternate AGG rendering method that sacrifices some accuracy for speed." }, "geometry-transform": { css: "line-geometry-transform", type: "functions", "default-value": "none", "default-meaning": "geometry will not be transformed", doc: "Allows transformation functions to be applied to the geometry.", functions: [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]] }, "comp-op": { css: "line-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, markers: { file: { css: "marker-file", doc: "An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.", "default-value": "", "default-meaning": "An ellipse or circle, if width equals height", type: "uri", expression: !0 }, opacity: { css: "marker-opacity", doc: "The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke", "default-value": 1, "default-meaning": "The stroke-opacity and fill-opacity will be used", type: "float" }, "fill-opacity": { css: "marker-fill-opacity", doc: "The fill opacity of the marker", "default-value": 1, "default-meaning": "opaque", type: "float" }, stroke: { css: "marker-line-color", doc: "The color of the stroke around a marker shape.", "default-value": "black", type: "color" }, "stroke-width": { css: "marker-line-width", doc: "The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.", type: "float" }, "stroke-opacity": { css: "marker-line-opacity", "default-value": 1, "default-meaning": "opaque", doc: "The opacity of a line", type: "float" }, placement: { css: "marker-placement", type: ["point", "line", "interior"], "default-value": "point", "default-meaning": "Place markers at the center point (centroid) of the geometry", doc: "Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior" }, "multi-policy": { css: "marker-multi-policy", type: ["each", "whole", "largest"], "default-value": "each", "default-meaning": "If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each", doc: "A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)." }, "marker-type": { css: "marker-type", type: ["arrow", "ellipse", "rectangle"], "default-value": "ellipse", doc: "The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)" }, width: { css: "marker-width", "default-value": 10, doc: "The width of the marker, if using one of the default types.", type: "float", expression: !0 }, height: { css: "marker-height", "default-value": 10, doc: "The height of the marker, if using one of the default types.", type: "float", expression: !0 }, fill: { css: "marker-fill", "default-value": "blue", doc: "The color of the area of the marker.", type: "color", expression: !0 }, "allow-overlap": { css: "marker-allow-overlap", type: "boolean", "default-value": !1, doc: "Control whether overlapping markers are shown or hidden.", "default-meaning": "Do not allow makers to overlap with each other - overlapping markers will not be shown." }, "ignore-placement": { css: "marker-ignore-placement", type: "boolean", "default-value": !1, "default-meaning": "do not store the bbox of this geometry in the collision detector cache", doc: "value to control whether the placement of the feature will prevent the placement of other features" }, spacing: { css: "marker-spacing", doc: "Space between repeated labels", "default-value": 100, type: "float" }, "max-error": { css: "marker-max-error", type: "float", "default-value": .2, doc: "The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers." }, transform: { css: "marker-transform", type: "functions", functions: [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]], "default-value": "", "default-meaning": "No transformation", doc: "SVG transformation definition" }, clip: { css: "marker-clip", type: "boolean", "default-value": !0, "default-meaning": "geometry will be clipped to map bounds before rendering", doc: "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts." }, smooth: { css: "marker-smooth", type: "float", "default-value": 0, "default-meaning": "no smoothing", range: "0-1", doc: "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries." }, "geometry-transform": { css: "marker-geometry-transform", type: "functions", "default-value": "none", "default-meaning": "geometry will not be transformed", doc: "Allows transformation functions to be applied to the geometry.", functions: [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]] }, "comp-op": { css: "marker-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, shield: { name: { css: "shield-name", type: "string", expression: !0, serialization: "content", doc: 'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]' }, file: { css: "shield-file", required: !0, type: "uri", "default-value": "none", doc: "Image file to render behind the shield text" }, "face-name": { css: "shield-face-name", type: "string", validate: "font", doc: "Font name and style to use for the shield text", "default-value": "", required: !0 }, "unlock-image": { css: "shield-unlock-image", type: "boolean", doc: "This parameter should be set to true if you are trying to position text beside rather than on top of the shield image", "default-value": !1, "default-meaning": "text alignment relative to the shield image uses the center of the image as the anchor for text positioning." }, size: { css: "shield-size", type: "float", doc: "The size of the shield text in pixels" }, fill: { css: "shield-fill", type: "color", doc: "The color of the shield text" }, placement: { css: "shield-placement", type: ["point", "line", "vertex", "interior"], "default-value": "point", doc: "How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons." }, "placement-type": { css: "shield-placement-type", doc: 'Re-position and/or re-size shield to avoid overlaps. "simple" for basic algorithm (using shield-placements string,) "dummy" to turn this feature off.', type: ["dummy", "simple", "list"], expression: !0, "default-meaning": "Alternative placements will not be enabled.", "default-value": "dummy" }, "avoid-edges": { css: "shield-avoid-edges", doc: "Tell positioning algorithm to avoid labeling near intersection edges.", type: "boolean", "default-value": !1 }, "allow-overlap": { css: "shield-allow-overlap", type: "boolean", "default-value": !1, doc: "Control whether overlapping shields are shown or hidden.", "default-meaning": "Do not allow shields to overlap with other map elements already placed." }, "minimum-distance": { css: "shield-min-distance", type: "float", "default-value": 0, doc: "Minimum distance to the next shield symbol, not necessarily the same shield." }, spacing: { css: "shield-spacing", type: "float", "default-value": 0, doc: "The spacing between repeated occurrences of the same shield on a line" }, "minimum-padding": { css: "shield-min-padding", "default-value": 0, doc: "Determines the minimum amount of padding that a shield gets relative to other shields", type: "float" }, "wrap-width": { css: "shield-wrap-width", type: "unsigned", "default-value": 0, doc: "Length of a chunk of text in characters before wrapping text" }, "wrap-before": { css: "shield-wrap-before", type: "boolean", "default-value": !1, doc: "Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width." }, "wrap-character": { css: "shield-wrap-character", type: "string", "default-value": " ", doc: "Use this character instead of a space to wrap long names." }, "halo-fill": { css: "shield-halo-fill", type: "color", "default-value": "#FFFFFF", "default-meaning": "white", doc: "Specifies the color of the halo around the text." }, "halo-radius": { css: "shield-halo-radius", doc: "Specify the radius of the halo in pixels", "default-value": 0, "default-meaning": "no halo", type: "float" }, "character-spacing": { css: "shield-character-spacing", type: "unsigned", "default-value": 0, doc: "Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement." }, "line-spacing": { css: "shield-line-spacing", doc: "Vertical spacing between lines of multiline labels (in pixels)", type: "unsigned" }, dx: { css: "shield-text-dx", type: "float", doc: "Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right", "default-value": 0 }, dy: { css: "shield-text-dy", type: "float", doc: "Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down", "default-value": 0 }, "shield-dx": { css: "shield-dx", type: "float", doc: "Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right", "default-value": 0 }, "shield-dy": { css: "shield-dy", type: "float", doc: "Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down", "default-value": 0 }, opacity: { css: "shield-opacity", type: "float", doc: "(Default 1.0) - opacity of the image used for the shield", "default-value": 1 }, "text-opacity": { css: "shield-text-opacity", type: "float", doc: "(Default 1.0) - opacity of the text placed on top of the shield", "default-value": 1 }, "horizontal-alignment": { css: "shield-horizontal-alignment", type: ["left", "middle", "right", "auto"], doc: "The shield's horizontal alignment from its centerpoint", "default-value": "auto" }, "vertical-alignment": { css: "shield-vertical-alignment", type: ["top", "middle", "bottom", "auto"], doc: "The shield's vertical alignment from its centerpoint", "default-value": "middle" }, "text-transform": { css: "shield-text-transform", type: ["none", "uppercase", "lowercase", "capitalize"], doc: "Transform the case of the characters", "default-value": "none" }, "justify-alignment": { css: "shield-justify-alignment", type: ["left", "center", "right", "auto"], doc: "Define how text in a shield's label is justified", "default-value": "auto" }, clip: { css: "shield-clip", type: "boolean", "default-value": !0, "default-meaning": "geometry will be clipped to map bounds before rendering", doc: "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts." }, "comp-op": { css: "shield-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, "line-pattern": { file: { css: "line-pattern-file", type: "uri", "default-value": "none", required: !0, doc: "An image file to be repeated and warped along a line", expression: !0 }, clip: { css: "line-pattern-clip", type: "boolean", "default-value": !0, "default-meaning": "geometry will be clipped to map bounds before rendering", doc: "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts." }, smooth: { css: "line-pattern-smooth", type: "float", "default-value": 0, "default-meaning": "no smoothing", range: "0-1", doc: "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries." }, "geometry-transform": { css: "line-pattern-geometry-transform", type: "functions", "default-value": "none", "default-meaning": "geometry will not be transformed", doc: "Allows transformation functions to be applied to the geometry.", functions: [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]] }, "comp-op": { css: "line-pattern-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, "polygon-pattern": { file: { css: "polygon-pattern-file", type: "uri", "default-value": "none", required: !0, doc: "Image to use as a repeated pattern fill within a polygon", expression: !0 }, alignment: { css: "polygon-pattern-alignment", type: ["local", "global"], "default-value": "local", doc: "Specify whether to align pattern fills to the layer or to the map." }, gamma: { css: "polygon-pattern-gamma", type: "float", "default-value": 1, "default-meaning": "fully antialiased", range: "0-1", doc: "Level of antialiasing of polygon pattern edges" }, opacity: { css: "polygon-pattern-opacity", type: "float", doc: "(Default 1.0) - Apply an opacity level to the image used for the pattern", "default-value": 1, "default-meaning": "The image is rendered without modifications" }, clip: { css: "polygon-pattern-clip", type: "boolean", "default-value": !0, "default-meaning": "geometry will be clipped to map bounds before rendering", doc: "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts." }, smooth: { css: "polygon-pattern-smooth", type: "float", "default-value": 0, "default-meaning": "no smoothing", range: "0-1", doc: "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries." }, "geometry-transform": { css: "polygon-pattern-geometry-transform", type: "functions", "default-value": "none", "default-meaning": "geometry will not be transformed", doc: "Allows transformation functions to be applied to the geometry.", functions: [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]] }, "comp-op": { css: "polygon-pattern-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, raster: { opacity: { css: "raster-opacity", "default-value": 1, "default-meaning": "opaque", type: "float", doc: "The opacity of the raster symbolizer on top of other symbolizers." }, "filter-factor": { css: "raster-filter-factor", "default-value": -1, "default-meaning": "Allow the datasource to choose appropriate downscaling.", type: "float", doc: "This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed." }, scaling: { css: "raster-scaling", type: ["near", "fast", "bilinear", "bilinear8", "bicubic", "spline16", "spline36", "hanning", "hamming", "hermite", "kaiser", "quadric", "catrom", "gaussian", "bessel", "mitchell", "sinc", "lanczos", "blackman"], "default-value": "near", doc: "The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality." }, "mesh-size": { css: "raster-mesh-size", "default-value": 16, "default-meaning": "Reprojection mesh will be 1/16 of the resolution of the source image", type: "unsigned", doc: "A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion." }, "comp-op": { css: "raster-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, point: { file: { css: "point-file", type: "uri", required: !1, "default-value": "none", doc: "Image file to represent a point" }, "allow-overlap": { css: "point-allow-overlap", type: "boolean", "default-value": !1, doc: "Control whether overlapping points are shown or hidden.", "default-meaning": "Do not allow points to overlap with each other - overlapping markers will not be shown." }, "ignore-placement": { css: "point-ignore-placement", type: "boolean", "default-value": !1, "default-meaning": "do not store the bbox of this geometry in the collision detector cache", doc: "value to control whether the placement of the feature will prevent the placement of other features" }, opacity: { css: "point-opacity", type: "float", "default-value": 1, "default-meaning": "Fully opaque", doc: "A value from 0 to 1 to control the opacity of the point" }, placement: { css: "point-placement", type: ["centroid", "interior"], doc: "How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.", "default-value": "centroid" }, transform: { css: "point-transform", type: "functions", functions: [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]], "default-value": "", "default-meaning": "No transformation", doc: "SVG transformation definition" }, "comp-op": { css: "point-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, text: { name: { css: "text-name", type: "string", expression: !0, required: !0, "default-value": "", serialization: "content", doc: "Value to use for a text label. Data columns are specified using brackets like [column_name]" }, "face-name": { css: "text-face-name", type: "string", validate: "font", doc: "Font name and style to render a label in", required: !0 }, size: { css: "text-size", type: "float", "default-value": 10, doc: "Text size in pixels" }, "text-ratio": { css: "text-ratio", doc: "Define the amount of text (of the total) present on successive lines when wrapping occurs", "default-value": 0, type: "unsigned" }, "wrap-width": { css: "text-wrap-width", doc: "Length of a chunk of text in characters before wrapping text", "default-value": 0, type: "unsigned" }, "wrap-before": { css: "text-wrap-before", type: "boolean", "default-value": !1, doc: "Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width." }, "wrap-character": { css: "text-wrap-character", type: "string", "default-value": " ", doc: "Use this character instead of a space to wrap long text." }, spacing: { css: "text-spacing", type: "unsigned", doc: "Distance between repeated text labels on a line (aka. label-spacing)" }, "character-spacing": { css: "text-character-spacing", type: "float", "default-value": 0, doc: "Horizontal spacing adjustment between characters in pixels" }, "line-spacing": { css: "text-line-spacing", "default-value": 0, type: "unsigned", doc: "Vertical spacing adjustment between lines in pixels" }, "label-position-tolerance": { css: "text-label-position-tolerance", "default-value": 0, type: "unsigned", doc: "Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)" }, "max-char-angle-delta": { css: "text-max-char-angle-delta", type: "float", "default-value": "22.5", doc: "The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners." }, fill: { css: "text-fill", doc: "Specifies the color for the text", "default-value": "#000000", type: "color" }, opacity: { css: "text-opacity", doc: "A number from 0 to 1 specifying the opacity for the text", "default-value": 1, "default-meaning": "Fully opaque", type: "float" }, "halo-fill": { css: "text-halo-fill", type: "color", "default-value": "#FFFFFF", "default-meaning": "white", doc: "Specifies the color of the halo around the text." }, "halo-radius": { css: "text-halo-radius", doc: "Specify the radius of the halo in pixels", "default-value": 0, "default-meaning": "no halo", type: "float" }, dx: { css: "text-dx", type: "float", doc: "Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right", "default-value": 0 }, dy: { css: "text-dy", type: "float", doc: "Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down", "default-value": 0 }, "vertical-alignment": { css: "text-vertical-alignment", type: ["top", "middle", "bottom", "auto"], doc: "Position of label relative to point position.", "default-value": "auto", "default-meaning": 'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.' }, "avoid-edges": { css: "text-avoid-edges", doc: "Tell positioning algorithm to avoid labeling near intersection edges.", "default-value": !1, type: "boolean" }, "minimum-distance": { css: "text-min-distance", doc: "Minimum permitted distance to the next text symbolizer.", type: "float" }, "minimum-padding": { css: "text-min-padding", doc: "Determines the minimum amount of padding that a text symbolizer gets relative to other text", type: "float" }, "minimum-path-length": { css: "text-min-path-length", type: "float", "default-value": 0, "default-meaning": "place labels on all paths", doc: "Place labels only on paths longer than this value." }, "allow-overlap": { css: "text-allow-overlap", type: "boolean", "default-value": !1, doc: "Control whether overlapping text is shown or hidden.", "default-meaning": "Do not allow text to overlap with other text - overlapping markers will not be shown." }, orientation: { css: "text-orientation", type: "float", expression: !0, doc: "Rotate the text." }, placement: { css: "text-placement", type: ["point", "line", "vertex", "interior"], "default-value": "point", doc: "Control the style of placement of a point versus the geometry it is attached to." }, "placement-type": { css: "text-placement-type", doc: 'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.', type: ["dummy", "simple"], "default-value": "dummy" }, placements: { css: "text-placements", type: "string", "default-value": "", doc: 'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` ' }, "text-transform": { css: "text-transform", type: ["none", "uppercase", "lowercase", "capitalize"], doc: "Transform the case of the characters", "default-value": "none" }, "horizontal-alignment": { css: "text-horizontal-alignment", type: ["left", "middle", "right", "auto"], doc: "The text's horizontal alignment from its centerpoint", "default-value": "auto" }, "justify-alignment": { css: "text-align", type: ["left", "right", "center", "auto"], doc: "Define how text is justified", "default-value": "auto", "default-meaning": "Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives" }, clip: { css: "text-clip", type: "boolean", "default-value": !0, "default-meaning": "geometry will be clipped to map bounds before rendering", doc: "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts." }, "comp-op": { css: "text-comp-op", "default-value": "src-over", "default-meaning": "add the current symbolizer on top of other symbolizer", doc: "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.", type: ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"] } }, building: { fill: { css: "building-fill", "default-value": "#FFFFFF", doc: "The color of the buildings walls.", type: "color" }, "fill-opacity": { css: "building-fill-opacity", type: "float", doc: "The opacity of the building as a whole, including all walls.", "default-value": 1 }, height: { css: "building-height", doc: "The height of the building in pixels.", type: "float", expression: !0, "default-value": "0" } }, torque: { "-torque-clear-color": { css: "-torque-clear-color", type: "color", "default-value": "rgba(255, 255, 255, 0)", "default-meaning": "full clear", doc: "color used to clear canvas on each frame" }, "-torque-frame-count": { css: "-torque-frame-count", "default-value": "128", type: "float", "default-meaning": "the data is broken into 128 time frames", doc: "Number of animation steps/frames used in the animation. If the data contains a fewere number of total frames, the lesser value will be used." }, "-torque-resolution": { css: "-torque-resolution", "default-value": "2", type: "float", "default-meaning": "", doc: "Spatial resolution in pixels. A resolution of 1 means no spatial aggregation of the data. Any other resolution of N results in spatial aggregation into cells of NxN pixels. The value N must be power of 2" }, "-torque-animation-duration": { css: "-torque-animation-duration", "default-value": "30", type: "float", "default-meaning": "the animation lasts 30 seconds", doc: "Animation duration in seconds" }, "-torque-aggregation-function": { css: "-torque-aggregation-function", "default-value": "count(cartodb_id)", type: "string", "default-meaning": "the value for each cell is the count of points in that cell", doc: "A function used to calculate a value from the aggregate data for each cell. See -torque-resolution" }, "-torque-time-attribute": { css: "-torque-time-attribute", "default-value": "time", type: "string", "default-meaning": "the data column in your table that is of a time based type", doc: "The table column that contains the time information used create the animation" }, "-torque-data-aggregation": { css: "-torque-data-aggregation", "default-value": "linear", type: ["linear", "cumulative"], "default-meaning": "previous values are discarded", doc: "A linear animation will discard previous values while a cumulative animation will accumulate them until it restarts" } } }, colors: { aliceblue: [240, 248, 255], antiquewhite: [250, 235, 215], aqua: [0, 255, 255], aquamarine: [127, 255, 212], azure: [240, 255, 255], beige: [245, 245, 220], bisque: [255, 228, 196], black: [0, 0, 0], blanchedalmond: [255, 235, 205], blue: [0, 0, 255], blueviolet: [138, 43, 226], brown: [165, 42, 42], burlywood: [222, 184, 135], cadetblue: [95, 158, 160], chartreuse: [127, 255, 0], chocolate: [210, 105, 30], coral: [255, 127, 80], cornflowerblue: [100, 149, 237], cornsilk: [255, 248, 220], crimson: [220, 20, 60], cyan: [0, 255, 255], darkblue: [0, 0, 139], darkcyan: [0, 139, 139], darkgoldenrod: [184, 134, 11], darkgray: [169, 169, 169], darkgreen: [0, 100, 0], darkgrey: [169, 169, 169], darkkhaki: [189, 183, 107], darkmagenta: [139, 0, 139], darkolivegreen: [85, 107, 47], darkorange: [255, 140, 0], darkorchid: [153, 50, 204], darkred: [139, 0, 0], darksalmon: [233, 150, 122], darkseagreen: [143, 188, 143], darkslateblue: [72, 61, 139], darkslategrey: [47, 79, 79], darkturquoise: [0, 206, 209], darkviolet: [148, 0, 211], deeppink: [255, 20, 147], deepskyblue: [0, 191, 255], dimgray: [105, 105, 105], dimgrey: [105, 105, 105], dodgerblue: [30, 144, 255], firebrick: [178, 34, 34], floralwhite: [255, 250, 240], forestgreen: [34, 139, 34], fuchsia: [255, 0, 255], gainsboro: [220, 220, 220], ghostwhite: [248, 248, 255], gold: [255, 215, 0], goldenrod: [218, 165, 32], gray: [128, 128, 128], grey: [128, 128, 128], green: [0, 128, 0], greenyellow: [173, 255, 47], honeydew: [240, 255, 240], hotpink: [255, 105, 180], indianred: [205, 92, 92], indigo: [75, 0, 130], ivory: [255, 255, 240], khaki: [240, 230, 140], lavender: [230, 230, 250], lavenderblush: [255, 240, 245], lawngreen: [124, 252, 0], lemonchiffon: [255, 250, 205], lightblue: [173, 216, 230], lightcoral: [240, 128, 128], lightcyan: [224, 255, 255], lightgoldenrodyellow: [250, 250, 210], lightgray: [211, 211, 211], lightgreen: [144, 238, 144], lightgrey: [211, 211, 211], lightpink: [255, 182, 193], lightsalmon: [255, 160, 122], lightseagreen: [32, 178, 170], lightskyblue: [135, 206, 250], lightslategray: [119, 136, 153], lightslategrey: [119, 136, 153], lightsteelblue: [176, 196, 222], lightyellow: [255, 255, 224], lime: [0, 255, 0], limegreen: [50, 205, 50], linen: [250, 240, 230], magenta: [255, 0, 255], maroon: [128, 0, 0], mediumaquamarine: [102, 205, 170], mediumblue: [0, 0, 205], mediumorchid: [186, 85, 211], mediumpurple: [147, 112, 219], mediumseagreen: [60, 179, 113], mediumslateblue: [123, 104, 238], mediumspringgreen: [0, 250, 154], mediumturquoise: [72, 209, 204], mediumvioletred: [199, 21, 133], midnightblue: [25, 25, 112], mintcream: [245, 255, 250], mistyrose: [255, 228, 225], moccasin: [255, 228, 181], navajowhite: [255, 222, 173], navy: [0, 0, 128], oldlace: [253, 245, 230], olive: [128, 128, 0], olivedrab: [107, 142, 35], orange: [255, 165, 0], orangered: [255, 69, 0], orchid: [218, 112, 214], palegoldenrod: [238, 232, 170], palegreen: [152, 251, 152], paleturquoise: [175, 238, 238], palevioletred: [219, 112, 147], papayawhip: [255, 239, 213], peachpuff: [255, 218, 185], peru: [205, 133, 63], pink: [255, 192, 203], plum: [221, 160, 221], powderblue: [176, 224, 230], purple: [128, 0, 128], red: [255, 0, 0], rosybrown: [188, 143, 143], royalblue: [65, 105, 225], saddlebrown: [139, 69, 19], salmon: [250, 128, 114], sandybrown: [244, 164, 96], seagreen: [46, 139, 87], seashell: [255, 245, 238], sienna: [160, 82, 45], silver: [192, 192, 192], skyblue: [135, 206, 235], slateblue: [106, 90, 205], slategray: [112, 128, 144], slategrey: [112, 128, 144], snow: [255, 250, 250], springgreen: [0, 255, 127], steelblue: [70, 130, 180], tan: [210, 180, 140], teal: [0, 128, 128], thistle: [216, 191, 216], tomato: [255, 99, 71], turquoise: [64, 224, 208], violet: [238, 130, 238], wheat: [245, 222, 179], white: [255, 255, 255], whitesmoke: [245, 245, 245], yellow: [255, 255, 0], yellowgreen: [154, 205, 50], transparent: [0, 0, 0, 0] }, filter: { value: ["true", "false", "null", "point", "linestring", "polygon", "collection"] } }; e.exports = { version: { latest: n, "2.1.1": n } } }, function(e, t, n) { (function (t) { var n = {}; function extend() { for (var e = arguments, t = e[0], n = 1; n < e.length; ++n) { var r = e[n]; for (var i in r) t[i] = r[i] } return t } n.on = function (e, t) { var n = this._evt_callbacks = this._evt_callbacks || {}; return (n[e] || (n[e] = [])).push(t), this }, n.trigger = function (e) { for (var t = this._evt_callbacks && this._evt_callbacks[e], n = 0; t && n < t.length; ++n)t[n].apply(this, Array.prototype.slice.call(arguments, 1)); return this }, n.fire = n.trigger, n.off = function (e, t) { var n = this._evt_callbacks && this._evt_callbacks[e]; if (n && !t) return delete this._evt_callbacks[e], this; for (var r = [], i = 0; n && i < n.length; ++i)n[i] === t && r.push(i); for (; void 0 !== (i = r.pop());)n.splice(i, 1); return this }, n.callbacks = function (e) { return this._evt_callbacks && this._evt_callbacks[e] || [] }; var r = { Uint8Array: void 0 !== t.Uint8Array ? t.Uint8Array : Array, Uint8ClampedArray: void 0 !== t.Uint8ClampedArray ? t.Uint8ClampedArray : Array, Uint32Array: void 0 !== t.Uint32Array ? t.Uint32Array : Array, Int16Array: void 0 !== t.Int16Array ? t.Int16Array : Array, Int32Array: void 0 !== t.Int32Array ? t.Int32Array : Array }; function userAgent() { return "undefined" != typeof navigator ? navigator.userAgent : "" } var i = { sprites_to_images: -1 === userAgent().indexOf("Safari") && -1 === userAgent().indexOf("Firefox") }; e.exports = { Event: n, extend: extend, clone: function clone(e) { return extend({}, e) }, isFunction: function isFunction(e) { return "function" == typeof e || !1 }, isArray: function isArray(e) { return e && "object" == typeof e && "[object Array]" == Object.prototype.toString.call(e) }, types: r, isBrowserSupported: function isBrowserSupported() { return !!document.createElement("canvas") }, flags: i } }).call(this, n(48)) }, function(e, t, n) { !function webpackUniversalModuleDefinition(t, n) { e.exports = n() }(0, function () { return function (e) { var t = {}; function __webpack_require__(n) { if (t[n]) return t[n].exports; var r = t[n] = { i: n, l: !1, exports: {} }; return e[n].call(r.exports, r, r.exports, __webpack_require__), r.l = !0, r.exports } return __webpack_require__.m = e, __webpack_require__.c = t, __webpack_require__.d = function (e, t, n) { __webpack_require__.o(e, t) || Object.defineProperty(e, t, { configurable: !1, enumerable: !0, get: n }) }, __webpack_require__.n = function (e) { var t = e && e.__esModule ? function getDefault() { return e.default } : function getModuleExports() { return e }; return __webpack_require__.d(t, "a", t), t }, __webpack_require__.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, __webpack_require__.p = "", __webpack_require__(__webpack_require__.s = 0) }([function (e, t, n) { "use strict"; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(); var i = n(1), o = n(4), a = n(5), s = function () { function Interactive(e, t) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Interactive), e && this._bindMap(e), this._tileLoader = new a(t), this._tileSize = 256, this._eventEmitter = new o } return r(Interactive, [{ key: "tilejson", value: function tilejson(e) { return this._tileLoader.setUrl(e.grids[0]), this } }, { key: "map", value: function map(e) { return this._bindMap(e), this } }, { key: "_bindMap", value: function _bindMap(e) { this._map = new i(e), this._map.on("click", this._onMapClick.bind(this)), this._map.on("mousemove", this._onMapMouseMove.bind(this)) } }, { key: "on", value: function on(e, t) { switch (e) { case "on": this._eventEmitter.addEventListener("mousemove", t), this._eventEmitter.addEventListener("click", t); break; case "off": this._eventEmitter.addEventListener("featureout", t); break; case "error": this._eventEmitter.addEventListener("error", t) }return this } }, { key: "_onMapClick", value: function _onMapClick(e) { var t = this, n = this._map.cloneEvent(e), r = this._getTileCoordsFromMouseEvent(n); this._tileLoader.loadTile(r.z, r.x, r.y).then(function (e) { if ("fetching" !== e) return t._objectForEvent(e, n, "click") }).catch(function (e) { t._eventEmitter.dispatchEvent("error", e) }) } }, { key: "_onMapMouseMove", value: function _onMapMouseMove(e) { var t = this, n = this._map.cloneEvent(e), r = this._getTileCoordsFromMouseEvent(n); this._tileLoader.loadTile(r.z, r.x, r.y).then(function (e) { if ("fetching" !== e) return t._objectForEvent(e, n, "mousemove") }).catch(function (e) { t._eventEmitter.dispatchEvent("error", e) }) } }, { key: "_getTileCoordsFromMouseEvent", value: function _getTileCoordsFromMouseEvent(e) { var t = this._map.project(e), n = this._unscale(t, this._tileSize); return n.z = Math.round(this._map.getZoom()), n } }, { key: "_unscale", value: function _unscale(e, t) { return { x: Math.floor(e.x / t), y: Math.floor(e.y / t) } } }, { key: "_objectForEvent", value: function _objectForEvent(e, t, n) { var r = this._map.project(t), i = this._unscale(r, this._tileSize), o = i.x, a = i.y, s = Math.pow(2, this._map.getZoom()); if (o = (o + s) % s, a = (a + s) % s, e && e.grid) { var l = Math.floor((r.x - o * this._tileSize) / 4), u = Math.floor((r.y - a * this._tileSize) / 4), c = this._utfDecode(e.grid[u].charCodeAt(l)), d = e.keys[c]; e.data.hasOwnProperty(d) && (t.data = e.data[d]) } t.e = t.originalEvent || { type: n }, this._triggerEvent(n, t) } }, { key: "_triggerEvent", value: function _triggerEvent(e, t) { t.data ? "mousemove" !== e ? "click" === e && (this._eventEmitter.dispatchEvent("featureout", {}), this._eventEmitter.dispatchEvent("click", t)) : this._eventEmitter.dispatchEvent("mousemove", t) : this._eventEmitter.dispatchEvent("featureout", {}) } }, { key: "remove", value: function remove() { this._eventEmitter.clear(), this._map.off("click"), this._map.off("mousemove") } }, { key: "_utfDecode", value: function _utfDecode(e) { return e >= 93 && e--, e >= 35 && e--, e - 32 } }]), Interactive }(); e.exports = { Interactive: s } }, function (e, t, n) { "use strict"; var r = n(2), i = n(3); e.exports = function Map(e) { return e.__gm ? new r(e) : new i(e) } }, function (e, t, n) { "use strict"; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(); var i = function () { function GoogleMap(e) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, GoogleMap), this._map = e, this._listeners = {} } return r(GoogleMap, [{ key: "project", value: function project(e) { var t = e.latLng, n = this._map.getProjection().fromLatLngToPoint(t), r = Math.pow(2, this.getZoom()); return { x: Math.floor(r * n.x), y: Math.floor(r * n.y) } } }, { key: "getZoom", value: function getZoom() { return this._map.getZoom() } }, { key: "on", value: function on(e, t) { this._listeners[e] = this._map.addListener(e, t) } }, { key: "off", value: function off(e) { this._listeners[e] && this._listeners[e].remove() } }, { key: "cloneEvent", value: function cloneEvent(e) { return { da: e.da, latLng: e.latLng, pixel: e.pixel } } }]), GoogleMap }(); e.exports = i }, function (e, t, n) { "use strict"; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(); var i = function () { function LeafletMap(e) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, LeafletMap), this._map = e, this._listeners = {} } return r(LeafletMap, [{ key: "project", value: function project(e) { var t = e.latlng.wrap(); return this._map.project(t, this._map.getZoom()).floor() } }, { key: "getZoom", value: function getZoom() { return this._map.getZoom() } }, { key: "on", value: function on(e, t) { return this._listeners[e] = t, this._map.on(e, t) } }, { key: "off", value: function off(e) { return this._map.off(e, this._listeners[e]) } }, { key: "cloneEvent", value: function cloneEvent(e) { return { containerPoint: e.containerPoint, latlng: e.latlng, layerPoint: e.layerPoint, originalEvent: e.originalEvent, target: e.target, type: e.type } } }]), LeafletMap }(); e.exports = i }, function (e, t, n) { "use strict"; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(); var i = function () { function EventEmitter() { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, EventEmitter), this._listeners = { click: void 0, move: void 0, out: void 0, error: void 0 } } return r(EventEmitter, [{ key: "dispatchEvent", value: function dispatchEvent(e, t) { switch (e) { case "mousemove": this._listeners.move && this._listeners.move(t); break; case "click": this._listeners.click && this._listeners.click(t); break; case "featureout": this._listeners.out && this._listeners.out(); break; case "error": this._listeners.error && this._listeners.error(t) } } }, { key: "addEventListener", value: function addEventListener(e, t) { switch (e) { case "mousemove": this._listeners.move = t; break; case "click": this._listeners.click = t; break; case "featureout": this._listeners.out = t; break; case "error": this._listeners.error = t } } }, { key: "removeEventListener", value: function removeEventListener(e) { switch (e) { case "mousemove": delete this._listeners.move; break; case "click": delete this._listeners.click; break; case "featureout": delete this._listeners.out; break; case "error": delete this._listeners.error } } }, { key: "clear", value: function clear() { this._listeners = { click: void 0, move: void 0, out: void 0, error: void 0 } } }]), EventEmitter }(); e.exports = i }, function (e, t, n) { "use strict"; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(); var i = function () { function TileLoader(e) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, TileLoader), this._url = e, this._cache = {} } return r(TileLoader, [{ key: "setUrl", value: function setUrl(e) { this._url = e } }, { key: "loadTile", value: function loadTile(e, t, n) { var r = this; return this._cache[e + "_" + t + "_" + n] ? Promise.resolve(this._cache[e + "_" + t + "_" + n]) : (this._cache[e + "_" + t + "_" + n] = "fetching", fetch(this._buildTileUrl(e, t, n)).then(this._handleLimitErrors).then(function (i) { return r._cache[e + "_" + t + "_" + n] = i, i })) } }, { key: "_buildTileUrl", value: function _buildTileUrl(e, t, n) { var r = this._url; return r = (r = (r = r.replace(/{z}/, e)).replace(/{x}/, t)).replace(/{y}/, n) } }, { key: "_handleLimitErrors", value: function _handleLimitErrors(e) { return 429 === e.status ? e.json().then(function (e) { return Promise.reject(e) }) : e.json() } }]), TileLoader }(); e.exports = i }]) }) }, function(e, t, n) { var r = n(5), i = n(1), o = n(875); function CartoDBLayerGroupViewBase(e, t) { var n; t = t || {}, this.interaction = [], this.nativeMap = t.nativeMap, this._mapModel = t.mapModel, e.on("change:urls", this._reload, this), e.onLayerVisibilityChanged(i(n = this._reload).call(n, this)), this._reload() } CartoDBLayerGroupViewBase.prototype = { _reload: function _reload() { throw new Error("_reload must be implemented") }, _reloadInteraction: function _reloadInteraction() { this._clearInteraction(), this.model.forEachGroupedLayer(function (e, t) { e.isVisible() && (e.isInteractive() || this._mapModel && this._mapModel.isFeatureInteractivityEnabled()) && this._enableInteraction(t) }, this) }, _clearInteraction: function _clearInteraction() { for (var e in this.interaction) this.interaction.hasOwnProperty(e) && this.interaction[e] && (this.interaction[e].remove(), this.interaction[e] = null) }, _enableInteraction: function _enableInteraction(e) { var t = this, n = this._generateTileJSON(e); if (n) { var i, o = this.interaction[e]; o && o.remove(), this.interaction[e] = r(i = new this.interactionClass).call(i, this.nativeMap).tilejson(n).on("on", function (n) { t._interactionDisabled || (n.layer = e, t._manageOnEvents(t.nativeMap, n)) }).on("off", function (n) { t._interactionDisabled || (null != (n = n || {}).errors && t._manageInteractivityErrors(n), n.layer = e, t._manageOffEvents(t.nativeMap, n)) }) } }, _manageInteractivityErrors: function _manageInteractivityErrors(e) { var t = o(e); t.length > 0 && this.trigger("featureError", t[0]) }, _generateTileJSON: function _generateTileJSON(e) { if (this.model.hasURLs()) return { tilejson: "2.0.0", scheme: "xyz", grids: this.model.getGridURLTemplatesWithSubdomains(e), tiles: this.model.getTileURLTemplatesWithSubdomains(), formatter: function formatter(e, t) { return t } } }, error: function error(e) { }, tilesOk: function tilesOk() { } }, e.exports = CartoDBLayerGroupViewBase }, function(e, t, n) { var r = n(1), i = n(0), o = n(434), a = function generateLeafletLayerOptions(e) { return { attribution: e.get("attribution"), layers: e.get("layers"), format: e.get("format"), transparent: e.get("transparent"), minZoom: e.get("minZomm"), maxZoom: e.get("maxZoom"), subdomains: e.get("subdomains") || "abc", errorTileUrl: e.get("errorTileUrl"), opacity: e.get("opacity") } }, s = function LeafletWMSLayerView(e, t) { var n, i; o.apply(this, arguments), this.leafletLayer.on("load", r(n = function _context(e) { this.trigger("load") }).call(n, this)), this.leafletLayer.on("loading", r(i = function _context2(e) { this.trigger("loading") }).call(i, this)) }; s.prototype = i.extend({}, o.prototype, { _createLeafletLayer: function _createLeafletLayer() { return new L.TileLayer.WMS(this.model.get("urlTemplate"), a(this.model)) }, _modelUpdated: function _modelUpdated() { L.Util.setOptions(this.leafletLayer, a(this.model)), this.leafletLayer.setUrl(this.model.get("urlTemplate")) } }), e.exports = s }, function(e, t, n) { var r = n(435).WINDSHAFT_ERRORS, i = function WindshaftError(e, t, n) { this._error = e, this.origin = n || "windshaft", this.type = function getType(e, t, n) { return e && e !== r.UNKNOWN ? e : t || (e !== r.UNKNOWN ? n : r.UNKNOWN) }(e.type, t, r.GENERIC), this.subtype = e.subtype, this.message = function truncateMessage(e) { return e && e.length > 256 ? e.substring(0, 256) : e }(e.message), this.context = e.context, this.isLayerError(e.type) && (this.context = e.layer && e.layer.context, this.layerId = e.layer && e.layer.id), this.isAnalysisError(e.type) && e.analysis && (this.context = e.analysis.context, this.analysisId = e.analysis.node_id || e.analysis.id) }; i.prototype.isGlobalError = function (e) { return !this.isLayerError(e) && !this.isAnalysisError(e) }, i.prototype.isLayerError = function (e) { return (e = e || this._error.type) === r.LAYER }, i.prototype.isAnalysisError = function (e) { return (e = e || this._error.type) === r.ANALYSIS }, e.exports = i }, function(e, t) { e.exports = { MAPS_API_BASE_URL: "api/v1/map" } }, function(e, t, n) { "use strict"; var r = n(3123); e.exports.getVersion = function (e) { if ("latest" === e) e = r.target; else if (!r.versions.includes(e)) throw new Error('Invalid camshaft-reference version: "' + e + '". Valid versions are: ' + r.versions.join(", ") + "."); return n(190)("./" + e + "/reference.json") }, e.exports.versions = r.versions }, function(e, t, n) { n(24), n(29), n(16), n(51), n(68); var r = n(30), i = n(1), o = n(5), a = n(0), s = n(9), l = n(301); n(3130); var u = n(270), c = n(378), d = n(152), f = n(231), h = d.extend({ options: { imageTransitionSpeed: 300, hookMargin: 24, hookHeight: 16 }, className: "CDB-infowindow-wrapper", events: { "click .js-close": "_closeInfowindow", "click .close": "_closeInfowindow", "touchstart .js-close": "_closeInfowindow", "MSPointerDown .js-close": "_closeInfowindow", dragstart: "_stopPropagation", mousedown: "_stopPropagation", pointerdown: "_stopPropagation", touchstart: "_stopPropagation", MSPointerDown: "_stopPropagation", dblclick: "_stopPropagation", DOMMouseScroll: "killEvent", MozMousePixelScroll: "killEvent", mousewheel: "killEvent", dbclick: "_stopPropagation", click: "_stopPropagation" }, initialize: function initialize() { this.mapView = this.options.mapView, this._compileTemplate(), this._initBinds(), this.$el.hide() }, render: function render() { if (this.clearSubViews(), this.$el.empty(), this.template) { var e = o(a).call(a, this.model.attributes.content.fields, function (e) { return a.clone(e) }), t = this.model.get("content") ? this.model.get("content").data : {}; e = o(a).call(a, e, this._sanitizeField, this); var n = {}; a.each(e, function (e) { n[e.name] = e.value }); var r = a.extend({ content: { fields: e, data: t } }, n); this.$el.html(u.html(this.template(r), this.model.get("sanitizeTemplate"))), this.model.get("width") && this.$(".js-infowindow").css("width", this.model.get("width") + "px"), this.model.get("maxHeight") && this._getContent().css("max-height", this.model.get("maxHeight") + "px"), this._containsCover() && this._loadCover(), this._setupClasses(), this._renderScroll(), this._renderShadows(), this._bindScroll() } return this }, _initBinds: function _initBinds() { a.bindAll(this, "_onKeyUp", "_onLoadImageSuccess", "_onLoadImageError"), this.render = a.debounce(this.render, 300), this.listenTo(this.model, "change:content change:alternative_names change:width change:maxHeight", this.render, this), this._debouncedUpdateAndAdjustPan = a.debounce(this._updateAndAdjustPan, 300), this.listenTo(this.model, "change:latlng", this._debouncedUpdateAndAdjustPan, this), this._debouncedToggle = a.debounce(this.toggle, 300), this.listenTo(this.model, "change:visibility", this._debouncedToggle, this), this._debouncedCompileTemplate = a.debounce(this._compileTemplate, 300), this.listenTo(this.model, "change:template change:sanitizeTemplate", this._debouncedCompileTemplate, this), this.listenTo(o(this.mapView), "change", this._updatePosition, this), this.listenTo(this.mapView, "zoomstart", function () { this.hide(!0) }), this.listenTo(this.mapView, "zoomend", function () { this.show() }) }, _getContent: function _getContent() { var e = this.$(".js-content"); return 0 === e.length && (e = this.$(".cartodb-popup-content")), e }, _onKeyUp: function _onKeyUp(e) { e && 27 === e.keyCode && this._closeInfowindow() }, _setupClasses: function _setupClasses() { var e = this.$(".js-infowindow"), t = this.$(".js-header").length, n = this.$(".js-cover").length, r = this._getContent().length, i = this.$(".CDB-infowindow-title").length, o = this.model.get("content") && this.model.get("content").fields.length; n && e.addClass("has-header-image").toggleClass("no-content", o < 3), t && e.addClass("has-header"), r && e.addClass("has-fields"), i && e.addClass("has-title") }, _renderScroll: function _renderScroll() { 0 !== this._getContent().length && (this._content = this._getContent().get(0), this.$(".js-infowindow").addClass("has-scroll"), l.initialize(this._content, { wheelSpeed: 1, wheelPropagation: !0, minScrollbarLength: 20 })) }, _renderShadows: function _renderShadows() { var e; this.$shadowTop = s("<div>").addClass("CDB-infowindow-canvasShadow CDB-infowindow-canvasShadow--top"), this.$shadowBottom = s("<div>").addClass("CDB-infowindow-canvasShadow CDB-infowindow-canvasShadow--bottom"); var t = this.$(".js-inner"); t.append(this.$shadowTop), t.append(this.$shadowBottom), a.defer(i(e = function _context() { this._showOrHideShadows() }).call(e, this)) }, _bindScroll: function _bindScroll() { this.$(this._content).on("ps-y-reach-start", i(a).call(a, this._onScrollTop, this)).on("ps-y-reach-end", i(a).call(a, this._onScrollBottom, this)).on("ps-scroll-y", i(a).call(a, this._onScroll, this)) }, _onScrollTop: function _onScrollTop() { this.$shadowTop.removeClass("is-visible") }, _onScroll: function _onScroll() { this._showOrHideShadows() }, _showOrHideShadows: function _showOrHideShadows() { var e = s(this._content); if (e.length) { var t = e.scrollTop(), n = e.get(0).scrollHeight - e.outerHeight(); this.$shadowTop.toggleClass("is-visible", t > 0), this.$shadowBottom.toggleClass("is-visible", t < n) } }, _onScrollBottom: function _onScrollBottom() { this.$shadowBottom.removeClass("is-visible") }, _container: function _container() { return this.el.querySelector(".js-container") }, _compileTemplate: function _compileTemplate() { var e = this.model.get("template"); this.template = "function" != typeof e ? new c({ template: e, type: this.model.get("template_type") || "mustache" }).asFunction() : e, this.render() }, _sanitizeValue: function _sanitizeValue(e, t) { return a.isObject(t) ? t : String(t) }, _sanitizeField: function _sanitizeField(e) { null !== e.value && void 0 !== e.value || (e.value = ""); var t = this.model.getAlternativeName(e.name); return e.title = e.title && t ? t : e.title, e.value = JSON.parse(r(e.value), this._sanitizeValue), e }, _containsCover: function _containsCover() { return !!this.$(".js-infowindow").attr("data-cover") }, _containsTemplateCover: function _containsTemplateCover() { return this.$(".js-cover img").length > 0 }, _getCoverURL: function _getCoverURL() { var e = this.model.get("content"), t = this.$(".js-cover img").attr("src"); return t || !!(e && e.fields && e.fields.length > 0) && (e.fields[0].value || "").toString() }, _imageOnHookNotSupported: function _imageOnHookNotSupported() { return f.ie || f.browser.ie || f.browser.edge }, _loadImageHook: function _loadImageHook(e, t, n) { var r, o = this.$(".CDB-hook"); if (o) if (this._imageOnHookNotSupported()) o.hide(); else { var a = s("<img />").addClass("CDB-hookImage js-hookImage").attr("src", n); o.append(a), a.css({ marginTop: -(e.height - this.options.hookHeight), width: t.width, display: "none" }), a.load(i(r = function _context2() { o.parent().addClass("has-image"), a.clipPath(this._getHookPoints(e.height - this.options.hookHeight)), a.show() }).call(r, this)) } }, _getHookPoints: function _getHookPoints(e) { return [[24, e], [24, e + 16], [48, e], [24, e]] }, _loadCoverFromTemplate: function _loadCoverFromTemplate(e) { this.$(".js-cover img").remove(), this._loadCoverFromUrl(e) }, _loadCoverFromUrl: function _loadCoverFromUrl(e) { var t = this.$(".js-cover"); this._startCoverLoader(); var n = s("<img class='CDB-infowindow-media-item' />"); t.append(n), n.load(this._onLoadImageSuccess).error(this._onLoadImageError).attr("src", e) }, _onLoadImageError: function _onLoadImageError() { this._stopCoverLoader(), this._showInfowindowImageError() }, _onLoadImageSuccess: function _onLoadImageSuccess() { var e = this.$(".js-cover"), t = this.$(".CDB-infowindow-media-item"), n = t.attr("src"), r = this.model.get("content").fields.length, i = { width: t.width(), height: t.height() }, o = { width: e.width(), height: e.height() }, a = this._calcImageStyle(i, o); t.css(a), e.css({ height: i.height - this.options.hookHeight }), this._stopCoverLoader(), t.fadeIn(150), r < 3 && i.height >= this.$el.height() && this._loadImageHook(i, o, n) }, _calcImageStyle: function _calcImageStyle(e, t) { var n = {}, r = e.height / e.width, i = t.height / t.width; return e.width > t.width && e.height > t.height ? r < i && (n = { height: t.height }) : n = { width: e.width }, n }, _loadCover: function _loadCover() { this._renderCoverLoader(), this._startCoverLoader(); var e = this._getCoverURL(); if (!this._isLoadingFields()) return this._isValidURL(e) ? void (this._containsTemplateCover() ? this._loadCoverFromTemplate(e) : this._loadCoverFromUrl(e)) : (this._stopCoverLoader(), void this._showInfowindowImageError()) }, _isLoadingFields: function _isLoadingFields() { var e = this.model.get("content"); return !e || 1 === e.fields.length && "loading" === e.fields[0].type }, _renderCoverLoader: function _renderCoverLoader() { var e = s("<div>").addClass("CDB-Loader js-loader"); this.$(".js-cover").length > 0 && this.$(".js-cover").append(e) }, _startCoverLoader: function _startCoverLoader() { this.$(".js-infowindow").addClass("is-loading"), this.$(".js-loader").addClass("is-visible") }, _clearInfowindowImageError: function _clearInfowindowImageError() { this.$(".js-infowindow").removeClass("is-fail") }, _showInfowindowImageError: function _showInfowindowImageError() { this.$(".js-infowindow").addClass("is-fail"), this.$(".js-cover").append('<p class="CDB-infowindow-fail">Non-valid picture URL</p>') }, _stopCoverLoader: function _stopCoverLoader() { this.$(".js-infowindow").removeClass("is-loading"), this.$(".js-loader").removeClass("is-visible") }, _isValidURL: function _isValidURL(e) { if (e) { return null !== String(e).match(/^(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-|]*[\w@?^=%&amp;\/~+#-])?$/) } return !1 }, toggle: function toggle() { this.model.get("visibility") ? this.show(!0) : this.hide() }, _stopPropagation: function _stopPropagation(e) { e.stopPropagation() }, _closeInfowindow: function _closeInfowindow(e) { e && (e.preventDefault(), e.stopImmediatePropagation()), this.model.get("visibility") && this.model.set("visibility", !1) }, show: function show(e) { s(document).off("keyup", this._onKeyUp).on("keyup", this._onKeyUp), this.model.get("visibility") && (this.$el.css({ left: -5e3 }), this._update(e)) }, isHidden: function isHidden() { return !this.model.get("visibility") }, hide: function hide(e) { s(document).off("keyup", this._onKeyUp), !e && this.model.get("visibility") || this._animateOut() }, _updateAndAdjustPan: function _updateAndAdjustPan() { this._update(!0) }, _update: function _update(e) { if (!this.isHidden()) { var t = 0; e && (t = this.adjustPan()), this._updatePosition(), this._animateIn(t) } }, _animateIn: function _animateIn(e) { !f.ie || f.browser.ie && f.browser.ie.version > 8 ? (this.$el.css({ marginBottom: "-10px", display: "block", visibility: "visible", opacity: 0 }), this.$el.delay(e).animate({ opacity: 1, marginBottom: 0 }, 300)) : this.$el.show() }, _animateOut: function _animateOut() { if (!f.ie || f.browser.ie && f.browser.ie.version > 8) { var e = this; this.$el.animate({ marginBottom: "-10px", opacity: "0", display: "block" }, 180, function () { e.$el.css({ visibility: "hidden" }) }) } else this.$el.hide() }, adjustPan: function adjustPan() { var e = this.model.get("offset"); if (this.model.get("autoPan") && !this.isHidden()) { var t = this.$el.outerHeight(!0) + 15, n = this.$el.width(), r = this.mapView.latLngToContainerPoint(this.model.get("latlng")), i = { x: 0, y: 0 }, o = this.mapView.getSize(), a = 0; return r.x - e[0] < 0 && (i.x = r.x - e[0] - 10), r.x - e[0] + n > o.x && (i.x = r.x + n - o.x - e[0] + 10), r.y - t < 0 && (i.y = r.y - t - 10), r.y - t > o.y && (i.y = r.y + t - o.y), (i.x || i.y) && (this.mapView.panBy(i), a = 300), a } }, _updatePosition: function _updatePosition() { if (!this.isHidden()) { var e = this.model.get("offset"), t = this.mapView.latLngToContainerPoint(this.model.get("latlng")), n = t.x - e[0], r = this.mapView.getSize(), i = -1 * (t.y - e[1] - r.y); this.$el.css({ bottom: i, left: n }) } }, showInfowindow: function showInfowindow() { this.model.set("visibility", !0) } }); e.exports = h }, function(e, t, n) { var r = n(609), i = n(608), o = n(1368), a = n(880), s = r.extend({ PointViewClass: i, _createGeometry: function _createGeometry() { var e = a.convertToGMapsCoordinates(this.model.getCoordinates()), t = new google.maps.Polyline({ path: e, strokeColor: this.model.get("lineColor"), strokeWeight: this.model.get("lineWeight"), strokeOpacity: this.model.get("lineOpacity") }); return new o(t) } }); e.exports = s }, function(e, t, n) { var r = n(5), i = n(0), o = n(1371), a = n(880), s = function GMapsPathAdapter(e) { this._nativePath = e }; (s.prototype = new o).constructor = s, s.prototype.addToMap = function (e) { this._nativePath.setMap(e) }, s.prototype.removeFromMap = function (e) { this._nativePath.setMap(null) }, s.prototype.isAddedToMap = function (e) { return !!this._nativePath.getMap() }, s.prototype.getCoordinates = function () { var e = this._nativePath.getPath(); return r(i).call(i, e.getArray(), function (e) { return { lat: e.lat(), lng: e.lng() } }) }, s.prototype.setCoordinates = function (e) { var t = a.convertToGMapsCoordinates(e); this._nativePath.setPath(t) }, e.exports = s }, function(e, t, n) { var r = n(609), i = n(608), o = n(1368), a = n(880), s = r.extend({ PointViewClass: i, _createGeometry: function _createGeometry() { var e = a.convertToGMapsCoordinates(this.model.getCoordinates()), t = new google.maps.Polygon({ paths: e, strokeColor: this.model.get("lineColor"), strokeWeight: this.model.get("lineWeight"), strokeOpacity: this.model.get("lineOpacity") }); return new o(t) } }); e.exports = s }, function(e, t, n) { var r = n(609), i = n(610), o = n(1372), a = r.extend({ PointViewClass: i, _createGeometry: function _createGeometry() { var e = L.polyline(this.model.getCoordinates(), { color: this.model.get("lineColor"), weight: this.model.get("lineWeight"), opacity: this.model.get("lineOpacity") }); return new o(e) } }); e.exports = a }, function(e, t) { var n = function PathAdapterBase(e) { }; n.prototype.addToMap = function (e) { throw new Error("subclasses of PathAdapterBase must implement addToMap") }, n.prototype.removeFromMap = function (e) { throw new Error("subclasses of PathAdapterBase must implement removeFromMap") }, n.prototype.isAddedToMap = function (e) { throw new Error("subclasses of PathAdapterBase must implement isAddedToMap") }, n.prototype.getCoordinates = function () { throw new Error("subclasses of PathAdapterBase must implement getCoordinates") }, n.prototype.setCoordinates = function (e) { throw new Error("subclasses of PathAdapterBase must implement setCoordinates") }, e.exports = n }, function(e, t, n) { var r = n(5), i = n(0), o = n(1371), a = function LeafletPathAdapter(e) { this._nativePath = e }; (a.prototype = new o).constructor = a, a.prototype.addToMap = function (e) { e.addLayer(this._nativePath) }, a.prototype.removeFromMap = function (e) { e.removeLayer(this._nativePath) }, a.prototype.isAddedToMap = function (e) { return e.hasLayer(this._nativePath) }, a.prototype.getCoordinates = function () { var e = i.flatten(this._nativePath.getLatLngs()); return r(i).call(i, e, function (e) { return { lat: e.lat, lng: e.lng } }) }, a.prototype.setCoordinates = function (e) { this._nativePath.setLatLngs(e) }, e.exports = a }, function(e, t, n) { var r = n(609), i = n(610), o = n(1372), a = r.extend({ PointViewClass: i, _createGeometry: function _createGeometry() { var e = L.polygon(this.model.getCoordinates(), { color: this.model.get("lineColor"), weight: this.model.get("lineWeight"), opacity: this.model.get("lineOpacity") }); return new o(e) } }); e.exports = a }, function(e, t) { var n = function MarkerAdapterBase(e) { }; n.prototype.addToMap = function (e) { throw new Error("subclasses of MarkerAdapterBase must implement addToMap") }, n.prototype.removeFromMap = function (e) { throw new Error("subclasses of MarkerAdapterBase must implement removeFromMap") }, n.prototype.isAddedToMap = function (e) { throw new Error("subclasses of MarkerAdapterBase must implement isAddedToMap") }, n.prototype.getCoordinates = function () { throw new Error("subclasses of MarkerAdapterBase must implement getCoordinates") }, n.prototype.setCoordinates = function (e) { throw new Error("subclasses of MarkerAdapterBase must implement setCoordinates") }, n.prototype.isDraggable = function () { throw new Error("subclasses of MarkerAdapterBase must implement isDraggable") }, n.prototype.getIconURL = function () { throw new Error("subclasses of MarkerAdapterBase must implement getIconURL") }, n.prototype.setIcon = function (e, t) { throw new Error("subclasses of MarkerAdapterBase must implement setIcon") }, n.prototype.on = function () { throw new Error("subclasses of MarkerAdapterBase must implement on") }, n.prototype.off = function () { throw new Error("subclasses of MarkerAdapterBase must implement off") }, n.prototype.trigger = function () { throw new Error("subclasses of MarkerAdapterBase must implement trigger") }, e.exports = n }, function(e, t, n) { var r = n(1), i = n(0), o = n(881), a = o.extend({ initialize: function initialize(e) { var t; o.prototype.initialize.apply(this, arguments), this.model.on("change:latlng", this._onLatlngChanged, this), this.model.on("change:iconUrl change:iconAnchor", this._updateMarkersIcon, this), this._marker = null, e.marker && (this._marker = e.marker, this._updateMarkersIcon()), this._onDrag = i.debounce(r(t = this._updateModelFromMarker).call(t, this), 10), i.bindAll(this, "_onDragStart", "_onDrag", "_onDragEnd", "_onMouseDown", "_onMouseClick", "_onMouseDblclick") }, getMarker: function getMarker() { return this._marker }, unsetMarker: function unsetMarker() { this._unbindMarkerEvents(), delete this._marker }, _onLatlngChanged: function _onLatlngChanged() { this._renderMarkerIfNotRendered(), this.isDragging() || this._updateMarkerFromModel() }, render: function render() { this.model.get("latlng") && this._renderMarkerIfNotRendered() }, _renderMarkerIfNotRendered: function _renderMarkerIfNotRendered() { var e = this.model.isEditable(); this._isMarkerRendered() ? this._unbindMarkerEvents() : (this._marker = this._createMarker(), this.mapView.addMarker(this._marker)), e && this._bindMarkerEvents() }, _isMarkerRendered: function _isMarkerRendered() { return this._marker && this.mapView.hasMarker(this._marker) }, _removeMarker: function _removeMarker() { this._marker && this.mapView.removeMarker(this._marker) }, _onDragStart: function _onDragStart() { this._isDragging = !0 }, _onDragEnd: function _onDragEnd() { this._isDragging = !1 }, _onMouseDown: function _onMouseDown() { this._mouseDownClicked = !0, this.trigger("mousedown", this.model) }, _onMouseClick: function _onMouseClick() { this._mouseDownClicked && (this.trigger("click", this.model), this._mouseDownClicked = !1) }, _onMouseDblclick: function _onMouseDblclick() { this._mouseDownClicked && (this.model.trigger("dblclick", this.model), this._mouseDownClicked = !1) }, isDragging: function isDragging() { return !!this._isDragging }, clean: function clean() { o.prototype.clean.apply(this), this._removeMarker() }, _updateModelFromMarker: function _updateModelFromMarker() { if (this._marker) { var e = this._marker.getCoordinates(); this.model.setCoordinates([e.lat, e.lng]) } }, _updateMarkerFromModel: function _updateMarkerFromModel() { this._marker.setCoordinates(this.model.getCoordinates()) }, _updateMarkersIcon: function _updateMarkersIcon() { this._marker && this._marker.setIconURL(this.model.get("iconUrl"), this.model.get("iconAnchor")) }, _createMarker: function _createMarker() { throw new Error("subclasses of PointViewBase must implement _createMarker") }, _unbindMarkerEvents: function _unbindMarkerEvents() { this._marker.off("mousedown", this._onMouseDown), this._marker.off("dblclick", this._onMouseDblclick), this._marker.off("dragstart", this._onDragStart), this._marker.off("drag", this._onDrag), this._marker.off("dragend", this._onDragEnd) }, _bindMarkerEvents: function _bindMarkerEvents() { this._marker.on("mousedown", this._onMouseDown), this._marker.on("dblclick", this._onMouseDblclick), this._marker.on("dragstart", this._onDragStart), this._marker.on("drag", this._onDrag), this._marker.on("dragend", this._onDragEnd) } }); e.exports = a }, function(e, t, n) { var r = n(5), i = n(884), o = n(302), a = n(882).extend({ defaults: { editable: !1, expandable: !1 }, _createGeometry: function _createGeometry(e) { return new i({ editable: this.isEditable(), expandable: this.isExpandable() }, { latlngs: e }) }, toGeoJSON: function toGeoJSON() { var e; return { type: "MultiLineString", coordinates: r(e = this.geometries).call(e, function (e) { return o.convertLatLngsToGeoJSONPolylineCoords(e.getCoordinates()) }) } }, setCoordinatesFromGeoJSON: function setCoordinatesFromGeoJSON(e) { var t = this.getCoordinatesFromGeoJSONCoords(e); this.geometries.reset(this._createGeometries(t)) }, getCoordinatesFromGeoJSONCoords: function getCoordinatesFromGeoJSONCoords(e) { return o.getMultiPolylineLatLngsFromGeoJSONCoords(e) } }); e.exports = a }, function(e, t, n) { var r = n(5), i = n(883), o = n(302), a = n(882).extend({ defaults: { editable: !1, expandable: !1 }, _createGeometry: function _createGeometry(e) { return new i({ editable: this.isEditable(), expandable: this.isExpandable() }, { latlngs: e }) }, toGeoJSON: function toGeoJSON() { var e; return { type: "MultiPolygon", coordinates: r(e = this.geometries).call(e, function (e) { return [o.convertLatLngsToGeoJSONPolygonCoords(e.getCoordinates())] }) } }, setCoordinatesFromGeoJSON: function setCoordinatesFromGeoJSON(e) { var t = this.getCoordinatesFromGeoJSONCoords(e); this.geometries.reset(this._createGeometries(t)) }, getCoordinatesFromGeoJSONCoords: function getCoordinatesFromGeoJSONCoords(e) { return o.getMultiPolygonLatLngsFromGeoJSONCoords(e) } }); e.exports = a }, function(e, t, n) { var r = n(5), i = n(377), o = n(302), a = n(882).extend({ defaults: { editable: !1 }, _createGeometry: function _createGeometry(e) { return new i({ latlng: e, editable: this.isEditable() }) }, toGeoJSON: function toGeoJSON() { var e; return { type: "MultiPoint", coordinates: r(e = this.geometries).call(e, function (e) { return o.convertLatLngsToGeoJSONPointCoords(e.getCoordinates()) }) } }, setCoordinatesFromGeoJSON: function setCoordinatesFromGeoJSON(e) { var t = this.getCoordinatesFromGeoJSONCoords(e); this.geometries.reset(this._createGeometries(t)) }, getCoordinatesFromGeoJSONCoords: function getCoordinatesFromGeoJSONCoords(e) { return o.getMultiPointLatLngsFromGeoJSONCoords(e) } }); e.exports = a }, function(e, t, n) { var r = n(5), i = n(0), o = n(3), a = n(377), s = n(885), l = s.extend({ initialize: function initialize(e, t) { s.prototype.initialize.apply(this, arguments), t = t || {}, this.points = new o.Collection, t.latlngs && this.points.reset(this._createPoints(t.latlngs)), this.points.on("change", this._triggerChangeEvent, this), this.points.on("remove", this._triggerChangeEvent, this) }, getCoordinates: function getCoordinates() { var e; return r(e = this.points).call(e, function (e) { return e.getCoordinates() }) }, setCoordinates: function setCoordinates(e) { this.points.reset(this._createPoints(e)), this._triggerChangeEvent() }, getCoordinatesForMiddlePoints: function getCoordinatesForMiddlePoints() { return this.getCoordinates() }, update: function update(e) { var t = this.getCoordinates(); t.push(e), this.setCoordinates(t) }, _createPoints: function _createPoints(e) { return r(i).call(i, e, this._createPoint, this) }, _createPoint: function _createPoint(e) { var t = new a({ latlng: e, editable: this.isEditable() }); return t.once("dblclick", function (e) { this.removePoint(t) }, this), t }, addPoint: function addPoint(e, t) { var n = (t = t || {}).at || 0; e.once("dblclick", function () { this.removePoint(e) }, this), this.points.add(e, { at: n }) }, removePoint: function removePoint(e) { this.points.remove(e) } }); e.exports = l }, function(e, t, n) { var r = n(69), i = n(27), o = n(1), a = n(55), s = n(0), l = n(3).Collection.extend({ initialize: function initialize() { var e, t; this.comparator = function (e) { return a(e.get("order"), 10) }, o(e = this).call(e, "add", this._assignIndexes), o(t = this).call(t, "remove", this._assignIndexes) }, _assignIndexes: function _assignIndexes(e, t, n) { var o; if (this.size() > 0 && (this.at(0).set({ order: 0 }), this.size() > 1)) { var a, l = i(a = this).call(a, function (e, t, n) { var r = t.get("type"); return 0 === n && "Tiled" === r ? e : (e[r] = e[r] || [], e[r].push(t), e) }, {}), u = 1, c = ["CartoDB", "torque", "Tiled"]; s.each(c, function (e) { var t = l[e] || []; s.each(t, function (e) { e.set({ order: u }), u += 1 }) }) } r(o = this).call(o) }, getCartoDBLayers: function getCartoDBLayers() { return this._getLayersByType("CartoDB") }, getTiledLayers: function getTiledLayers() { return this._getLayersByType("Tiled") }, getTorqueLayers: function getTorqueLayers() { return this._getLayersByType("torque") }, _getLayersByType: function _getLayersByType(e) { return this.select(function (t) { return t.get("type") === e }) }, getLayersWithLegends: function getLayersWithLegends() { return this.select(function (e) { return !!e.legends }) }, moveCartoDBLayer: function moveCartoDBLayer(e, t) { if (e === t) return !1; var n = this.at(e); return !(!n || "CartoDB" !== n.get("type")) && (this.remove(n, { silent: !0 }), this.add(n, { at: t, silent: !0 }), this.trigger("layerMoved", n), n) } }); e.exports = l }, function(e, t, n) { var r = new (n(3155)); r.set({ cartodb_attributions: '\xa9 <a href="https://carto.com/about-carto/" target="_blank">CARTO</a>', cartodb_logo_link: "http://www.carto.com" }), e.exports = r }, function(e, t, n) { var r = n(55), i = n(43), o = n(5), a = n(1), s = n(0), l = n(3), u = n(1381), c = n(193), d = n(144), f = n(231), h = n(1380), p = n(270), m = n(3154), g = d.extend({ defaults: { attribution: [u.get("cartodb_attributions")], center: [0, 0], zoom: 4, minZoom: 0, maxZoom: 20, scrollwheel: !0, drag: !0, keyboard: !f.supportsTouch(), provider: "leaflet", popupsEnabled: !0, isFeatureInteractivityEnabled: !1 }, initialize: function initialize(e, t) { var n, r, i, o, s; if (!(t = t || {}).layersFactory) throw new Error("layersFactory is required"); this._layersFactory = t.layersFactory, e = e || {}, this.layers = t.layersCollection || new h, this.geometries = new l.Collection; var u = e.center || this.defaults.center; "string" == typeof u && (u = JSON.parse(u)), this.set({ center: u, original_center: u }), e.bounds ? (this.set({ view_bounds_sw: e.bounds[0], view_bounds_ne: e.bounds[1] }), this.unset("bounds")) : this.set({ zoom: e.zoom || this.defaults.zoom }), a(n = this.layers).call(n, "reset", this._updateAttributions, this), a(r = this.layers).call(r, "add", this._updateAttributions, this), a(i = this.layers).call(i, "remove", this._updateAttributions, this), a(o = this.layers).call(o, "change:attribution", this._updateAttributions, this), a(s = this.layers).call(s, "reset", this._onLayersResetted, this), this._updateAttributions() }, _onLayersResetted: function _onLayersResetted() { this.layers.size() >= 1 && this._adjustZoomtoLayer(this.layers.first()) }, _updateAttributions: function _updateAttributions() { var e, t = this.defaults.attribution[0], n = o(e = s.chain(this.layers.models)).call(e, function (e) { return p.html(e.get("attribution")) }).reject(function (e) { return e === t }).compact().uniq().value(); n.push(t), this.set("attribution", n) }, moveCartoDBLayer: function moveCartoDBLayer(e, t) { this.layers.moveCartoDBLayer(e, t) && this.trigger("cartodbLayerMoved", {}, this) }, createCartoDBLayer: function createCartoDBLayer(e, t) { return this._addNewLayerModel("cartodb", e, t) }, createTorqueLayer: function createTorqueLayer(e, t) { return this._addNewLayerModel("torque", e, t) }, createTileLayer: function createTileLayer(e, t) { return this._addNewLayerModel("tiled", e, t) }, createWMSLayer: function createWMSLayer(e, t) { return this._addNewLayerModel("wms", e, t) }, createGMapsBaseLayer: function createGMapsBaseLayer(e, t) { return this._addNewLayerModel("gmapsbase", e, t) }, createPlainLayer: function createPlainLayer(e, t) { return this._addNewLayerModel("plain", e, t) }, _addNewLayerModel: function _addNewLayerModel(e, t, n) { n = n || {}; var r = this._layersFactory.createLayer(e, t); return this.listenTo(r, "destroy", this._removeLayerModelFromCollection), this.layers.add(r, { silent: n.silent, at: n.at }), r }, _removeLayerModelFromCollection: function _removeLayerModelFromCollection(e, t, n) { return this.layers.remove(e, n) }, disableInteractivity: function disableInteractivity() { this.disablePopups(), this.disableFeatureInteractivity() }, enableInteractivity: function enableInteractivity() { this.enablePopups(), this.enableFeatureInteractivity() }, enableFeatureInteractivity: function enableFeatureInteractivity() { this.set("isFeatureInteractivityEnabled", !0) }, disableFeatureInteractivity: function disableFeatureInteractivity() { this.set("isFeatureInteractivityEnabled", !1) }, isFeatureInteractivityEnabled: function isFeatureInteractivityEnabled() { return !!this.get("isFeatureInteractivityEnabled") }, enablePopups: function enablePopups() { this.set("popupsEnabled", !0) }, disablePopups: function disablePopups() { this.set("popupsEnabled", !1) }, arePopupsEnabled: function arePopupsEnabled() { return !!this.get("popupsEnabled") }, arePopupsDisabled: function arePopupsDisabled() { return !this.arePopupsEnabled() }, drawPoint: function drawPoint() { return this._drawGeometry(m.createPoint({ editable: !0 })) }, drawPolyline: function drawPolyline() { return this._drawGeometry(m.createPolyline({ editable: !0 })) }, drawPolygon: function drawPolygon() { return this._drawGeometry(m.createPolygon({ editable: !0 })) }, _drawGeometry: function _drawGeometry(e) { return this.trigger("enterDrawingMode", e), e }, stopDrawingGeometry: function stopDrawingGeometry() { this.trigger("exitDrawingMode") }, editGeometry: function editGeometry(e) { var t = m.createGeometryFromGeoJSON(e, { editable: !0, expandable: !0 }); return this.trigger("enterEditMode", t), t }, stopEditingGeometry: function stopEditingGeometry(e) { this.trigger("exitEditMode") }, setView: function setView(e, t, n) { var r = n || { silent: !0 }; this.set({ center: e, zoom: t }, r), this.trigger("set_view") }, setZoom: function setZoom(e) { this.set({ zoom: e }) }, enableKeyboard: function enableKeyboard() { this.set({ keyboard: !0 }) }, disableKeyboard: function disableKeyboard() { this.set({ keyboard: !1 }) }, enableScrollWheel: function enableScrollWheel() { this.set({ scrollwheel: !0 }) }, disableScrollWheel: function disableScrollWheel() { this.set({ scrollwheel: !1 }) }, getZoom: function getZoom() { return this.get("zoom") }, setCenter: function setCenter(e) { this.set({ center: e }) }, setOptions: function setOptions(e) { if ("object" !== i(e) || e.length) { if (this.options.debug) throw Error(e + " options has to be an object") } else s.defaults(this.options, e) }, getViewBounds: function getViewBounds() { return this.has("view_bounds_sw") && this.has("view_bounds_ne") ? [this.get("view_bounds_sw"), this.get("view_bounds_ne")] : [[0, 0], [0, 0]] }, getLayerAt: function getLayerAt(e) { return this.layers.at(e) }, getLayerById: function getLayerById(e) { return this.layers.get(e) }, getLayerViewByLayerCid: function getLayerViewByLayerCid(e) { return this.layers.get(e) }, _adjustZoomtoLayer: function _adjustZoomtoLayer(e) { var t = r(e.get("maxZoom"), 10), n = r(e.get("minZoom"), 10); s.isNumber(t) && !s.isNaN(t) && (this.get("zoom") > t ? this.set({ zoom: t, maxZoom: t }) : this.set("maxZoom", t)), s.isNumber(n) && !s.isNaN(n) && (this.get("zoom") < n ? this.set({ minZoom: n, zoom: n }) : this.set("minZoom", n)) }, addLayer: function addLayer(e, t) { return 0 === this.layers.size() && this._adjustZoomtoLayer(e), this.layers.add(e, t), this.trigger("layerAdded"), 1 === this.layers.length && this.trigger("firstLayerAdded"), e.cid }, removeLayer: function removeLayer(e) { this.layers.remove(e) }, removeLayerByCid: function removeLayerByCid(e) { var t = this.layers.get(e); t ? this.removeLayer(t) : c.error("There's no layer with cid = " + e + ".") }, removeLayerAt: function removeLayerAt(e) { var t = this.layers.at(e); t ? this.removeLayer(t) : c.error("There's no layer in that position.") }, clearLayers: function clearLayers() { for (; this.layers.length > 0;)this.removeLayer(this.layers.at(0)) }, getBaseLayer: function getBaseLayer() { return this.layers.at(0) }, getLayerTemplate: function getLayerTemplate() { var e = this.getBaseLayer(); if (e && e.get("options")) return e.get("options").urlTemplate }, addGeometry: function addGeometry(e) { this.geometries.add(e) }, removeGeometry: function removeGeometry(e) { this.geometries.remove(e) }, setBounds: function setBounds(e) { this.attributes.view_bounds_sw = [e[0][0], e[0][1]], this.attributes.view_bounds_ne = [e[1][0], e[1][1]], this.trigger("change:view_bounds_ne", this) }, fitBounds: function fitBounds(e, t) { var n = this.getBoundsZoom(e, t); if (null !== n) { var r = g.latlngToMercator(e[0], n), i = g.latlngToMercator(e[1], n), o = g.mercatorToLatLng({ x: .5 * (r[0] + i[0]), y: .5 * (r[1] + i[1]) }, n); this.set({ center: o, zoom: n }) } }, getBoundsZoom: function getBoundsZoom(e, t) { if (0 === t.x || 0 === t.y) return null; var n, r, i = [t.x, t.y], o = this.get("minZoom") || 0, a = this.get("maxZoom") || 24, s = e[1], l = e[0], u = [], c = !0; do { o++, n = g.latlngToMercator(s, o), r = g.latlngToMercator(l, o), u[0] = Math.abs(n[0] - r[0]), u[1] = Math.abs(r[1] - n[1]), c = u[0] <= i[0] && u[1] <= i[1] } while (c && o <= a); return c ? a : o - 1 }, setPixelToLatLngConverter: function setPixelToLatLngConverter(e) { this._pixelToLatLngConverter = e }, setLatLngToPixelConverter: function setLatLngToPixelConverter(e) { this._latLngToPixelConverter = e }, pixelToLatLng: function pixelToLatLng() { return this._pixelToLatLngConverter }, latLngToPixel: function latLngToPixel() { return this._latLngToPixelConverter }, setMapViewSize: function setMapViewSize(e) { this._mapViewSize = e, this.trigger("mapViewSizeChanged") }, getMapViewSize: function getMapViewSize() { return this._mapViewSize }, getEstimatedFeatureCount: function getEstimatedFeatureCount() { var e = 0, t = 0, n = this.layers.getCartoDBLayers(); if (n) { for (var r = 0; r < n.length; r++) { if (void 0 === (t = n[r].getEstimatedFeatureCount())) return; e += t } return e } } }, { PROVIDERS: { GMAPS: "googlemaps", LEAFLET: "leaflet" }, latlngToMercator: function latlngToMercator(e, t) { var n = new L.LatLng(e[0], e[1]), r = L.CRS.EPSG3857.latLngToPoint(n, t); return [r.x, r.y] }, mercatorToLatLng: function mercatorToLatLng(e, t) { var n = L.CRS.EPSG3857.pointToLatLng(e, t); return [n.lat, n.lng] } }); e.exports = g }, function(e, t, n) { n(209); var r = n(198), i = n(1), o = n(5), a = n(0), s = n(193), l = n(152), u = n(3156), c = n(879), d = n(1366), f = n(3129), h = n(3106), p = n(3105), m = n(3104), g = n(3103), v = n(3102), y = n(3101), _ = l.extend({ className: "CDB-Map-wrapper", initialize: function initialize(e) { var t, n, r; if (l.prototype.initialize.apply(this, arguments), window.mapView = this, !e.mapModel) throw new Error("mapModel is required"); if (!e.engine) throw new Error("engine is required"); if (!e.layerGroupModel) throw new Error("layerGroupModel is required"); this._showEmptyInfowindowFields = e.showEmptyInfowindowFields, this._showLimitErrors = e.showLimitErrors, this._mapModel = this.map = e.mapModel, this._engine = e.engine, this._cartoDBLayerGroup = e.layerGroupModel, this.add_related_model(o(this)), this._cartoDBLayerGroupView = null, this._layerViews = {}, this._bindModel(), i(t = o(this).layers).call(t, "reset", this._addLayers, this), i(n = o(this).layers).call(n, "add", this._addLayer, this), i(r = o(this).layers).call(r, "remove", this._removeLayer, this), this.add_related_model(o(this).layers), o(this).geometries.on("add", this._onGeometryAdded, this), this.add_related_model(o(this).geometries); var a = new c, s = new h({ offset: [4, 10] }); this._infowindowView = new d({ model: a, mapView: this }), this._tooltipView = new p({ model: s, mapView: this }), this._infowindowManager = new f({ engine: this._engine, mapModel: this._mapModel, tooltipModel: s, infowindowModel: a }, { showEmptyFields: this._showEmptyInfowindowFields }), this._tooltipManager = new m({ mapModel: this._mapModel, tooltipModel: s, infowindowModel: a }), this._geometryManagementController = new y(this, this._mapModel), this._mapCursorManager = new g({ mapView: this, mapModel: this._mapModel }), this._mapEventsManager = new v({ mapModel: this._mapModel }), this._linkMapHelpers() }, clean: function clean() { this._removeLayers(), delete this._cartoDBLayerGroupView, this._infowindowView.clean(), this._tooltipView.clean(), this._geometryManagementController.stop(), this._infowindowManager.stop(), this._tooltipManager.stop(), this._mapCursorManager.stop(), this._mapEventsManager.stop(), this._unbindModel(), l.prototype.clean.call(this) }, render: function render() { return this._createNativeMap(), this._addLayers(), this._geometryManagementController.start(), o(this).setMapViewSize(this.getSize()), this }, _linkMapHelpers: function _linkMapHelpers() { var e, t; o(this).setPixelToLatLngConverter(i(e = this.containerPointToLatLng).call(e, this)), o(this).setLatLngToPixelConverter(i(t = this.latLngToContainerPoint).call(t, this)) }, _onGeometryAdded: function _onGeometryAdded(e) { u.createGeometryView(o(this).get("provider"), e, this).render() }, _setModelProperty: function _setModelProperty(e) { if (this._unbindModel(), o(this).set(e), void 0 !== e.center || void 0 !== e.zoom) { var t = this.getBounds(); o(this).set({ view_bounds_sw: t[0], view_bounds_ne: t[1] }) } this._bindModel() }, _bindModel: function _bindModel() { var e, t, n, r, a; this._unbindModel(), i(e = o(this)).call(e, "change:view_bounds_sw", this._changeBounds, this), i(t = o(this)).call(t, "change:view_bounds_ne", this._changeBounds, this), i(n = o(this)).call(n, "change", this._setView, this), i(r = o(this)).call(r, "change:scrollwheel", this._setScrollWheel, this), i(a = o(this)).call(a, "change:keyboard", this._setKeyboard, this) }, _unbindModel: function _unbindModel() { o(this).unbind("change:view_bounds_sw", this._changeBounds, this), o(this).unbind("change:view_bounds_ne", this._changeBounds, this), o(this).unbind("change", this._setView, this), o(this).unbind("change:scrollwheel", this._setScrollWheel, this), o(this).unbind("change:keyboard", this._setKeyboard, this), o(this).unbind("change:attribution", null, this) }, _changeBounds: function _changeBounds() { var e = o(this).getViewBounds(); e && this._fitBounds(e) }, _fitBounds: function _fitBounds(e) { o(this).fitBounds(e, this.getSize()) }, _addLayers: function _addLayers(e, t) { var n = this; this._removeLayers(), o(this).layers.each(function (r, i) { n._addLayer(r, e, { silent: t && t.silent || !1, index: i }) }) }, _addLayer: function _addLayer(e, t, n) { var r; n = n || {}, (r = "CartoDB" === e.get("type") ? this._addGroupedLayer(e) : this._addIndividualLayer(e)) && (this._addLayerToMap(r), n.silent || this.trigger("newLayerView", r)) }, _addGroupedLayer: function _addGroupedLayer(e) { if (!this._cartoDBLayerGroupView) return this._cartoDBLayerGroupView = this._createLayerView(this._cartoDBLayerGroup), this._layerViews[e.cid] = this._cartoDBLayerGroupView, this._infowindowView.render(), this.$el.append(this._infowindowView.el), this._tooltipView.render(), this.$el.append(this._tooltipView.el), this._infowindowManager.start(this._cartoDBLayerGroupView), this._tooltipManager.start(this._cartoDBLayerGroupView), this._mapCursorManager.start(this._cartoDBLayerGroupView), this._mapEventsManager.start(this._cartoDBLayerGroupView), this._cartoDBLayerGroupView; this._layerViews[e.cid] = this._cartoDBLayerGroupView }, _addIndividualLayer: function _addIndividualLayer(e) { var t = this._createLayerView(e); return t && (this._layerViews[e.cid] = t), t }, _createLayerView: function _createLayerView(e) { return this._getLayerViewFactory().createLayerView(e, { nativeMap: this.getNativeMap(), mapModel: o(this), showLimitErrors: this._showLimitErrors }) }, _removeLayers: function _removeLayers() { var e = a.uniq(r(a).call(a, this._layerViews)); for (var t in e) { e[t].remove() } this._layerViews = {} }, _removeLayer: function _removeLayer(e) { var t = this._layerViews[e.cid]; t && ("CartoDB" === e.get("type") ? 0 === o(this).layers.getCartoDBLayers().length && (t.remove(), this._cartoDBLayerGroupView = null) : t.remove(), delete this._layerViews[e.cid]) }, getLayerViewByLayerCid: function getLayerViewByLayerCid(e) { var t = this._layerViews[e]; return t || s.debug("layer with cid " + e + " can't be get"), t }, setCursor: function setCursor() { throw new Error("subclasses of MapView must implement setCursor") }, getSize: function getSize() { throw new Error("subclasses of MapView must implement getSize") }, addMarker: function addMarker(e) { throw new Error("subclasses of MapView must implement addMarker") }, removeMarker: function removeMarker(e) { throw new Error("subclasses of MapView must implement removeMarker") }, hasMarker: function hasMarker(e) { throw new Error("subclasses of MapView must implement hasMarker") }, addPath: function addPath(e) { throw new Error("subclasses of MapView must implement addPath") }, removePath: function removePath(e) { throw new Error("subclasses of MapView must implement removePath") }, latLngToContainerPoint: function latLngToContainerPoint(e) { throw new Error("subclasses of MapView must implement latLngToContainerPoint") }, containerPointToLatLng: function containerPointToLatLng(e) { throw new Error("subclasses of MapView must implement containerPointToLatLng") }, getNativeMap: function getNativeMap() { throw new Error("Subclasses of src/geo/map-view.js must implement getNativeMap") }, _getLayerViewFactory: function _getLayerViewFactory() { throw new Error("subclasses of MapView must implement _getLayerViewFactory") }, _addLayerToMap: function _addLayerToMap() { throw new Error("Subclasses of src/geo/map-view.js must implement _addLayerToMap") }, _setZoom: function _setZoom(e, t) { throw new Error("Subclasses of src/geo/map-view.js must implement _setZoom") }, _setCenter: function _setCenter(e, t) { throw new Error("Subclasses of src/geo/map-view.js must implement _setCenter") }, _addGeomToMap: function _addGeomToMap(e) { throw new Error("Subclasses of src/geo/map-view.js must implement _addGeomToMap") }, _removeGeomFromMap: function _removeGeomFromMap(e) { throw new Error("Subclasses of src/geo/map-view.js must implement _removeGeomFromMap") }, _createNativeMap: function _createNativeMap() { throw new Error("Subclasses of src/geo/map-view.js must implement _createNativeMap") } }); e.exports = _ }, function(e, t, n) { n(127), n(24), n(128), n(29), n(3165), n(1416), n(1415), n(1414), n(1413), n(1412), n(1411), n(1410), n(1409), n(1408), n(1407), n(1406), n(1405), n(1404), n(1403), n(1401), n(1400), n(1399), n(1398), n(1397), n(1396), n(1395), n(1394), n(1393); function Profiler() { } function Metric(e) { this.t0 = null, this.name = e, this.count = 0 } Profiler.metrics = {}, Profiler._backend = null, Profiler.get = function (e) { return Profiler.metrics[e] || { max: 0, min: Number.MAX_VALUE, avg: 0, total: 0, count: 0, last: 0, history: "undefined" != typeof Float32Array ? new Float32Array(1024) : [] } }, Profiler.backend = function (e) { Profiler._backend = e }, Profiler.new_value = function (e, t, n, r) { n = n || "i"; var i = Profiler.metrics[e] = Profiler.get(e); if (i.max = Math.max(i.max, t), i.min = Math.min(i.min, t), i.total += t, ++i.count, i.avg = i.total / i.count, i.history[i.count % 1024] = t, r) { var o = performance.now(); o - i.last > 1e3 && (Profiler._backend && Profiler._backend([n, e, i.avg]), i.last = o) } else Profiler._backend && Profiler._backend([n, e, t]) }, Profiler.print_stats = function () { for (var e in Profiler.metrics) { var t = Profiler.metrics[e]; console.log(" === " + e + " === "), console.log(" max: " + t.max), console.log(" min: " + t.min), console.log(" avg: " + t.avg), console.log(" count: " + t.count), console.log(" total: " + t.total) } }, Metric.prototype = { start: function start() { return this.t0 = performance.now(), this }, _elapsed: function _elapsed() { return performance.now() - this.t0 }, end: function end(e) { null !== this.t0 && (Profiler.new_value(this.name, this._elapsed(), "t", e), this.t0 = null) }, inc: function inc(e) { e = void 0 === e ? 1 : e, Profiler.new_value(this.name, e, "i") }, dec: function dec(e) { e = void 0 === e ? 1 : e, Profiler.new_value(this.name, e, "d") }, mark: function mark() { (++this.count, null !== this.t0) ? this._elapsed() > 1 && (Profiler.new_value(this.name, this.count), this.count = 0, this.start()) : this.start() } }, Profiler.metric = function (e) { return new Metric(e) }, e.exports = Profiler }, function(e, t, n) { var r, i, o, a; a = function (e) { var t = Object.prototype.toString, n = Array.isArray || function (e) { return "[object Array]" === t.call(e) }; function isFunction(e) { return "function" == typeof e } function escapeRegExp(e) { return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&") } var r = RegExp.prototype.test; var i = /\S/; function isWhitespace(e) { return !function testRegExp(e, t) { return r.call(e, t) }(i, e) } var o = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;", "/": "&#x2F;" }; var a = /\s*/, s = /\s+/, l = /\s*=/, u = /\s*\}/, c = /#|\^|\/|>|\{|&|=|!/; function Scanner(e) { this.string = e, this.tail = e, this.pos = 0 } function Context(e, t) { this.view = null == e ? {} : e, this.cache = { ".": this.view }, this.parent = t } function Writer() { this.cache = {} } Scanner.prototype.eos = function () { return "" === this.tail }, Scanner.prototype.scan = function (e) { var t = this.tail.match(e); if (!t || 0 !== t.index) return ""; var n = t[0]; return this.tail = this.tail.substring(n.length), this.pos += n.length, n }, Scanner.prototype.scanUntil = function (e) { var t, n = this.tail.search(e); switch (n) { case -1: t = this.tail, this.tail = ""; break; case 0: t = ""; break; default: t = this.tail.substring(0, n), this.tail = this.tail.substring(n) }return this.pos += t.length, t }, Context.prototype.push = function (e) { return new Context(e, this) }, Context.prototype.lookup = function (e) { var t, n = this.cache; if (e in n) t = n[e]; else { for (var r, i, o = this; o;) { if (e.indexOf(".") > 0) for (t = o.view, r = e.split("."), i = 0; null != t && i < r.length;)t = t[r[i++]]; else "object" == typeof o.view && (t = o.view[e]); if (null != t) break; o = o.parent } n[e] = t } return isFunction(t) && (t = t.call(this.view)), t }, Writer.prototype.clearCache = function () { this.cache = {} }, Writer.prototype.parse = function (t, r) { var i = this.cache, o = i[t]; return null == o && (o = i[t] = function parseTemplate(t, r) { if (!t) return []; var i, o, d, f = [], h = [], p = [], m = !1, g = !1; function stripSpace() { if (m && !g) for (; p.length;)delete h[p.pop()]; else p = []; m = !1, g = !1 } function compileTags(e) { if ("string" == typeof e && (e = e.split(s, 2)), !n(e) || 2 !== e.length) throw new Error("Invalid tags: " + e); i = new RegExp(escapeRegExp(e[0]) + "\\s*"), o = new RegExp("\\s*" + escapeRegExp(e[1])), d = new RegExp("\\s*" + escapeRegExp("}" + e[1])) } compileTags(r || e.tags); for (var v, y, _, b, w, x, C = new Scanner(t); !C.eos();) { if (v = C.pos, _ = C.scanUntil(i)) for (var S = 0, k = _.length; S < k; ++S)isWhitespace(b = _.charAt(S)) ? p.push(h.length) : g = !0, h.push(["text", b, v, v + 1]), v += 1, "\n" === b && stripSpace(); if (!C.scan(i)) break; if (m = !0, y = C.scan(c) || "name", C.scan(a), "=" === y ? (_ = C.scanUntil(l), C.scan(l), C.scanUntil(o)) : "{" === y ? (_ = C.scanUntil(d), C.scan(u), C.scanUntil(o), y = "&") : _ = C.scanUntil(o), !C.scan(o)) throw new Error("Unclosed tag at " + C.pos); if (w = [y, _, v, C.pos], h.push(w), "#" === y || "^" === y) f.push(w); else if ("/" === y) { if (!(x = f.pop())) throw new Error('Unopened section "' + _ + '" at ' + v); if (x[1] !== _) throw new Error('Unclosed section "' + x[1] + '" at ' + v) } else "name" === y || "{" === y || "&" === y ? g = !0 : "=" === y && compileTags(_) } if (x = f.pop()) throw new Error('Unclosed section "' + x[1] + '" at ' + C.pos); return function nestTokens(e) { for (var t, n = [], r = n, i = [], o = 0, a = e.length; o < a; ++o)switch ((t = e[o])[0]) { case "#": case "^": r.push(t), i.push(t), r = t[4] = []; break; case "/": i.pop()[5] = t[2], r = i.length > 0 ? i[i.length - 1][4] : n; break; default: r.push(t) }return n }(function squashTokens(e) { for (var t, n, r = [], i = 0, o = e.length; i < o; ++i)(t = e[i]) && ("text" === t[0] && n && "text" === n[0] ? (n[1] += t[1], n[3] = t[3]) : (r.push(t), n = t)); return r }(h)) }(t, r)), o }, Writer.prototype.render = function (e, t, n) { var r = this.parse(e), i = t instanceof Context ? t : new Context(t); return this.renderTokens(r, i, n, e) }, Writer.prototype.renderTokens = function (e, t, n, r) { for (var i, o, a, s = "", l = 0, u = e.length; l < u; ++l)a = void 0, "#" === (o = (i = e[l])[0]) ? a = this._renderSection(i, t, n, r) : "^" === o ? a = this._renderInverted(i, t, n, r) : ">" === o ? a = this._renderPartial(i, t, n, r) : "&" === o ? a = this._unescapedValue(i, t) : "name" === o ? a = this._escapedValue(i, t) : "text" === o && (a = this._rawValue(i)), void 0 !== a && (s += a); return s }, Writer.prototype._renderSection = function (e, t, r, i) { var o = this, a = "", s = t.lookup(e[1]); if (s) { if (n(s)) for (var l = 0, u = s.length; l < u; ++l)a += this.renderTokens(e[4], t.push(s[l]), r, i); else if ("object" == typeof s || "string" == typeof s) a += this.renderTokens(e[4], t.push(s), r, i); else if (isFunction(s)) { if ("string" != typeof i) throw new Error("Cannot use higher-order sections without the original template"); null != (s = s.call(t.view, i.slice(e[3], e[5]), function subRender(e) { return o.render(e, t, r) })) && (a += s) } else a += this.renderTokens(e[4], t, r, i); return a } }, Writer.prototype._renderInverted = function (e, t, r, i) { var o = t.lookup(e[1]); if (!o || n(o) && 0 === o.length) return this.renderTokens(e[4], t, r, i) }, Writer.prototype._renderPartial = function (e, t, n) { if (n) { var r = isFunction(n) ? n(e[1]) : n[e[1]]; return null != r ? this.renderTokens(this.parse(r), t, n, r) : void 0 } }, Writer.prototype._unescapedValue = function (e, t) { var n = t.lookup(e[1]); if (null != n) return n }, Writer.prototype._escapedValue = function (t, n) { var r = n.lookup(t[1]); if (null != r) return e.escape(r) }, Writer.prototype._rawValue = function (e) { return e[1] }, e.name = "mustache.js", e.version = "1.1.0", e.tags = ["{{", "}}"]; var d = new Writer; e.clearCache = function () { return d.clearCache() }, e.parse = function (e, t) { return d.parse(e, t) }, e.render = function (e, t, n) { return d.render(e, t, n) }, e.to_html = function (t, n, r, i) { var o = e.render(t, n, r); if (!isFunction(i)) return o; i(o) }, e.escape = function escapeHtml(e) { return String(e).replace(/[&<>"'\/]/g, function (e) { return o[e] }) }, e.Scanner = Scanner, e.Context = Context, e.Writer = Writer }, "object" == typeof t && t ? a(t) : (i = [t], void 0 === (o = "function" == typeof (r = a) ? r.apply(t, i) : r) || (e.exports = o)) }, function(e, t, n) { var r = {}; r.VERSION = n(194).version, r.DEBUG = !1, r.helpers = {}, e.exports = r },,,,,, function(e, t, n) { var r = n(109), i = n(114), o = n(387), a = i("iterator"); e.exports = !r(function () { var e = new URL("b?a=1&b=2&c=3", "http://a"), t = e.searchParams, n = ""; return e.pathname = "c%20d", t.forEach(function (e, r) { t.delete("b"), n += r + e }), o && !e.toJSON || !t.sort || "http://a/c%20d?a=1&c=3" !== e.href || "3" !== t.get("c") || "a=1" !== String(new URLSearchParams("?a=1")) || !t[a] || "a" !== new URL("https://a@b").username || "b" !== new URLSearchParams(new URLSearchParams("a=b")).get("a") || "xn--e1aybc" !== new URL("http://\u0442\u0435\u0441\u0442").host || "#%D0%B1" !== new URL("http://a#\u0431").hash || "a1c3" !== n || "x" !== new URL("http://x", void 0).host }) }, function(e, t, n) { "use strict"; var r = n(110).exportTypedArrayMethod, i = n(109), o = n(59).Uint8Array, a = o && o.prototype || {}, s = [].toString, l = [].join; i(function () { s.call({}) }) && (s = function toString() { return l.call(this) }); var u = a.toString != s; r("toString", s, u) }, function(e, t, n) { "use strict"; var r = n(59), i = n(110), o = n(109), a = r.Int8Array, s = i.aTypedArray, l = i.exportTypedArrayMethod, u = [].toLocaleString, c = [].slice, d = !!a && o(function () { u.call(new a(1)) }); l("toLocaleString", function toLocaleString() { return u.apply(d ? c.call(s(this)) : s(this), arguments) }, o(function () { return [1, 2].toLocaleString() != new a([1, 2]).toLocaleString() }) || !o(function () { a.prototype.toLocaleString.call([1, 2]) })) }, function(e, t, n) { "use strict"; var r = n(110), i = n(145), o = n(638), a = n(385), s = r.aTypedArray; (0, r.exportTypedArrayMethod)("subarray", function subarray(e, t) { var n = s(this), r = n.length, l = o(e, r); return new (a(n, n.constructor))(n.buffer, n.byteOffset + l * n.BYTES_PER_ELEMENT, i((void 0 === t ? r : o(t, r)) - l)) }) }, function(e, t, n) { "use strict"; var r = n(110), i = r.aTypedArray, o = r.exportTypedArrayMethod, a = [].sort; o("sort", function sort(e) { return a.call(i(this), e) }) }, function(e, t, n) { "use strict"; var r = n(110), i = n(219).some, o = r.aTypedArray; (0, r.exportTypedArrayMethod)("some", function some(e) { return i(o(this), e, arguments.length > 1 ? arguments[1] : void 0) }) }, function(e, t, n) { "use strict"; var r = n(110), i = n(385), o = n(109), a = r.aTypedArray, s = r.aTypedArrayConstructor, l = r.exportTypedArrayMethod, u = [].slice; l("slice", function slice(e, t) { for (var n = u.call(a(this), e, t), r = i(this, this.constructor), o = 0, l = n.length, c = new (s(r))(l); l > o;)c[o] = n[o++]; return c }, o(function () { new Int8Array(1).slice() })) }, function(e, t, n) { "use strict"; var r = n(110), i = n(145), o = n(1417), a = n(238), s = n(109), l = r.aTypedArray; (0, r.exportTypedArrayMethod)("set", function set(e) { l(this); var t = o(arguments.length > 1 ? arguments[1] : void 0, 1), n = this.length, r = a(e), s = i(r.length), u = 0; if (s + t > n) throw RangeError("Wrong length"); for (; u < s;)this[t + u] = r[u++] }, s(function () { new Int8Array(1).set({}) })) }, function(e, t, n) { "use strict"; var r = n(110), i = r.aTypedArray, o = r.exportTypedArrayMethod, a = Math.floor; o("reverse", function reverse() { for (var e, t = i(this).length, n = a(t / 2), r = 0; r < n;)e = this[r], this[r++] = this[--t], this[t] = e; return this }) }, function(e, t, n) { "use strict"; var r = n(110), i = n(1402).right, o = r.aTypedArray; (0, r.exportTypedArrayMethod)("reduceRight", function reduceRight(e) { return i(o(this), e, arguments.length, arguments.length > 1 ? arguments[1] : void 0) }) }, function(e, t, n) { var r = n(456), i = n(238), o = n(459), a = n(145), s = function (e) { return function (t, n, s, l) { r(n); var u = i(t), c = o(u), d = a(u.length), f = e ? d - 1 : 0, h = e ? -1 : 1; if (s < 2) for (; ;) { if (f in c) { l = c[f], f += h; break } if (f += h, e ? f < 0 : d <= f) throw TypeError("Reduce of empty array with no initial value") } for (; e ? f >= 0 : d > f; f += h)f in c && (l = n(l, c[f], f, u)); return l } }; e.exports = { left: s(!1), right: s(!0) } }, function(e, t, n) { "use strict"; var r = n(110), i = n(1402).left, o = r.aTypedArray; (0, r.exportTypedArrayMethod)("reduce", function reduce(e) { return i(o(this), e, arguments.length, arguments.length > 1 ? arguments[1] : void 0) }) }, function(e, t, n) { "use strict"; var r = n(110), i = n(219).map, o = n(385), a = r.aTypedArray, s = r.aTypedArrayConstructor; (0, r.exportTypedArrayMethod)("map", function map(e) { return i(a(this), e, arguments.length > 1 ? arguments[1] : void 0, function (e, t) { return new (s(o(e, e.constructor)))(t) }) }) }, function(e, t, n) { "use strict"; var r = n(110), i = n(3189), o = r.aTypedArray; (0, r.exportTypedArrayMethod)("lastIndexOf", function lastIndexOf(e) { return i.apply(o(this), arguments) }) }, function(e, t, n) { "use strict"; var r = n(110), i = r.aTypedArray, o = r.exportTypedArrayMethod, a = [].join; o("join", function join(e) { return a.apply(i(this), arguments) }) }, function(e, t, n) { "use strict"; var r = n(59), i = n(110), o = n(127), a = n(114)("iterator"), s = r.Uint8Array, l = o.values, u = o.keys, c = o.entries, d = i.aTypedArray, f = i.exportTypedArrayMethod, h = s && s.prototype[a], p = !!h && ("values" == h.name || void 0 == h.name), m = function values() { return l.call(d(this)) }; f("entries", function entries() { return c.call(d(this)) }), f("keys", function keys() { return u.call(d(this)) }), f("values", m, !p), f(a, m, !p) }, function(e, t, n) { "use strict"; var r = n(110), i = n(930).indexOf, o = r.aTypedArray; (0, r.exportTypedArrayMethod)("indexOf", function indexOf(e) { return i(o(this), e, arguments.length > 1 ? arguments[1] : void 0) }) }, function(e, t, n) { "use strict"; var r = n(110), i = n(930).includes, o = r.aTypedArray; (0, r.exportTypedArrayMethod)("includes", function includes(e) { return i(o(this), e, arguments.length > 1 ? arguments[1] : void 0) }) }, function(e, t, n) { "use strict"; var r = n(110), i = n(219).forEach, o = r.aTypedArray; (0, r.exportTypedArrayMethod)("forEach", function forEach(e) { i(o(this), e, arguments.length > 1 ? arguments[1] : void 0) }) }, function(e, t, n) { "use strict"; var r = n(110), i = n(219).findIndex, o = r.aTypedArray; (0, r.exportTypedArrayMethod)("findIndex", function findIndex(e) { return i(o(this), e, arguments.length > 1 ? arguments[1] : void 0) }) }, function(e, t, n) { "use strict"; var r = n(110), i = n(219).find, o = r.aTypedArray; (0, r.exportTypedArrayMethod)("find", function find(e) { return i(o(this), e, arguments.length > 1 ? arguments[1] : void 0) }) }, function(e, t, n) { "use strict"; var r = n(110), i = n(219).filter, o = n(385), a = r.aTypedArray, s = r.aTypedArrayConstructor; (0, r.exportTypedArrayMethod)("filter", function filter(e) { for (var t = i(a(this), e, arguments.length > 1 ? arguments[1] : void 0), n = o(this, this.constructor), r = 0, l = t.length, u = new (s(n))(l); l > r;)u[r] = t[r++]; return u }) }, function(e, t, n) { "use strict"; var r = n(110), i = n(888), o = r.aTypedArray; (0, r.exportTypedArrayMethod)("fill", function fill(e) { return i.apply(o(this), arguments) }) }, function(e, t, n) { "use strict"; var r = n(110), i = n(219).every, o = r.aTypedArray; (0, r.exportTypedArrayMethod)("every", function every(e) { return i(o(this), e, arguments.length > 1 ? arguments[1] : void 0) }) }, function(e, t, n) { "use strict"; var r = n(110), i = n(3190), o = r.aTypedArray; (0, r.exportTypedArrayMethod)("copyWithin", function copyWithin(e, t) { return i.call(o(this), e, t, arguments.length > 2 ? arguments[2] : void 0) }) }, function(e, t, n) { var r = n(3192); e.exports = function (e, t) { var n = r(e); if (n % t) throw RangeError("Wrong offset"); return n } }, function(e, t, n) { "use strict"; var r = n(133), i = n(59), o = n(146), a = n(3193), s = n(110), l = n(1421), u = n(445), c = n(349), d = n(214), f = n(145), h = n(1419), p = n(1417), m = n(388), g = n(140), v = n(457), y = n(165), _ = n(386), b = n(458), w = n(347).f, x = n(3191), C = n(219).forEach, S = n(623), k = n(154), T = n(389), L = n(250), M = n(926), E = L.get, A = L.set, P = k.f, R = T.f, O = Math.round, D = i.RangeError, F = l.ArrayBuffer, I = l.DataView, N = s.NATIVE_ARRAY_BUFFER_VIEWS, $ = s.TYPED_ARRAY_TAG, B = s.TypedArray, z = s.TypedArrayPrototype, j = s.aTypedArrayConstructor, U = s.isTypedArray, q = function (e, t) { for (var n = 0, r = t.length, i = new (j(e))(r); r > n;)i[n] = t[n++]; return i }, H = function (e, t) { P(e, t, { get: function () { return E(this)[t] } }) }, V = function (e) { var t; return e instanceof F || "ArrayBuffer" == (t = v(e)) || "SharedArrayBuffer" == t }, G = function (e, t) { return U(e) && "symbol" != typeof t && t in e && String(+t) == String(t) }, W = function getOwnPropertyDescriptor(e, t) { return G(e, t = m(t, !0)) ? c(2, e[t]) : R(e, t) }, Y = function defineProperty(e, t, n) { return !(G(e, t = m(t, !0)) && y(n) && g(n, "value")) || g(n, "get") || g(n, "set") || n.configurable || g(n, "writable") && !n.writable || g(n, "enumerable") && !n.enumerable ? P(e, t, n) : (e[t] = n.value, e) }; o ? (N || (T.f = W, k.f = Y, H(z, "buffer"), H(z, "byteOffset"), H(z, "byteLength"), H(z, "length")), r({ target: "Object", stat: !0, forced: !N }, { getOwnPropertyDescriptor: W, defineProperty: Y }), e.exports = function (e, t, n) { var o = e.match(/\d+$/)[0] / 8, s = e + (n ? "Clamped" : "") + "Array", l = "get" + e, c = "set" + e, m = i[s], g = m, v = g && g.prototype, k = {}, T = function (e, t) { P(e, t, { get: function () { return function (e, t) { var n = E(e); return n.view[l](t * o + n.byteOffset, !0) }(this, t) }, set: function (e) { return function (e, t, r) { var i = E(e); n && (r = (r = O(r)) < 0 ? 0 : r > 255 ? 255 : 255 & r), i.view[c](t * o + i.byteOffset, r, !0) }(this, t, e) }, enumerable: !0 }) }; N ? a && (g = t(function (e, t, n, r) { return u(e, g, s), M(y(t) ? V(t) ? void 0 !== r ? new m(t, p(n, o), r) : void 0 !== n ? new m(t, p(n, o)) : new m(t) : U(t) ? q(g, t) : x.call(g, t) : new m(h(t)), e, g) }), b && b(g, B), C(w(m), function (e) { e in g || d(g, e, m[e]) }), g.prototype = v) : (g = t(function (e, t, n, r) { u(e, g, s); var i, a, l, c = 0, d = 0; if (y(t)) { if (!V(t)) return U(t) ? q(g, t) : x.call(g, t); i = t, d = p(n, o); var m = t.byteLength; if (void 0 === r) { if (m % o) throw D("Wrong length"); if ((a = m - d) < 0) throw D("Wrong length") } else if ((a = f(r) * o) + d > m) throw D("Wrong length"); l = a / o } else l = h(t), i = new F(a = l * o); for (A(e, { buffer: i, byteOffset: d, byteLength: a, length: l, view: new I(i) }); c < l;)T(e, c++) }), b && b(g, B), v = g.prototype = _(z)), v.constructor !== g && d(v, "constructor", g), $ && d(v, $, s), k[s] = g, r({ global: !0, forced: g != m, sham: !N }, k), "BYTES_PER_ELEMENT" in g || d(g, "BYTES_PER_ELEMENT", o), "BYTES_PER_ELEMENT" in v || d(v, "BYTES_PER_ELEMENT", o), S(s) }) : e.exports = function () { } }, function(e, t, n) { var r = n(249), i = n(145); e.exports = function (e) { if (void 0 === e) return 0; var t = r(e), n = i(t); if (t !== n) throw RangeError("Wrong length or index"); return n } }, function(e, t) { e.exports = "undefined" != typeof ArrayBuffer && "undefined" != typeof DataView }, function(e, t, n) { "use strict"; var r = n(59), i = n(146), o = n(1420), a = n(214), s = n(904), l = n(109), u = n(445), c = n(249), d = n(145), f = n(1419), h = n(3195), p = n(619), m = n(458), g = n(347).f, v = n(154).f, y = n(888), _ = n(339), b = n(250), w = b.get, x = b.set, C = r.ArrayBuffer, S = C, k = r.DataView, T = k && k.prototype, L = Object.prototype, M = r.RangeError, E = h.pack, A = h.unpack, P = function (e) { return [255 & e] }, R = function (e) { return [255 & e, e >> 8 & 255] }, O = function (e) { return [255 & e, e >> 8 & 255, e >> 16 & 255, e >> 24 & 255] }, D = function (e) { return e[3] << 24 | e[2] << 16 | e[1] << 8 | e[0] }, F = function (e) { return E(e, 23, 4) }, I = function (e) { return E(e, 52, 8) }, N = function (e, t) { v(e.prototype, t, { get: function () { return w(this)[t] } }) }, $ = function (e, t, n, r) { var i = f(n), o = w(e); if (i + t > o.byteLength) throw M("Wrong index"); var a = w(o.buffer).bytes, s = i + o.byteOffset, l = a.slice(s, s + t); return r ? l : l.reverse() }, B = function (e, t, n, r, i, o) { var a = f(n), s = w(e); if (a + t > s.byteLength) throw M("Wrong index"); for (var l = w(s.buffer).bytes, u = a + s.byteOffset, c = r(+i), d = 0; d < t; d++)l[u + d] = c[o ? d : t - d - 1] }; if (o) { if (!l(function () { C(1) }) || !l(function () { new C(-1) }) || l(function () { return new C, new C(1.5), new C(NaN), "ArrayBuffer" != C.name })) { for (var z, j = (S = function ArrayBuffer(e) { return u(this, S), new C(f(e)) }).prototype = C.prototype, U = g(C), q = 0; U.length > q;)(z = U[q++]) in S || a(S, z, C[z]); j.constructor = S } m && p(T) !== L && m(T, L); var H = new k(new S(2)), V = T.setInt8; H.setInt8(0, 2147483648), H.setInt8(1, 2147483649), !H.getInt8(0) && H.getInt8(1) || s(T, { setInt8: function setInt8(e, t) { V.call(this, e, t << 24 >> 24) }, setUint8: function setUint8(e, t) { V.call(this, e, t << 24 >> 24) } }, { unsafe: !0 }) } else S = function ArrayBuffer(e) { u(this, S, "ArrayBuffer"); var t = f(e); x(this, { bytes: y.call(new Array(t), 0), byteLength: t }), i || (this.byteLength = t) }, k = function DataView(e, t, n) { u(this, k, "DataView"), u(e, S, "DataView"); var r = w(e).byteLength, o = c(t); if (o < 0 || o > r) throw M("Wrong offset"); if (o + (n = void 0 === n ? r - o : d(n)) > r) throw M("Wrong length"); x(this, { buffer: e, byteLength: n, byteOffset: o }), i || (this.buffer = e, this.byteLength = n, this.byteOffset = o) }, i && (N(S, "byteLength"), N(k, "buffer"), N(k, "byteLength"), N(k, "byteOffset")), s(k.prototype, { getInt8: function getInt8(e) { return $(this, 1, e)[0] << 24 >> 24 }, getUint8: function getUint8(e) { return $(this, 1, e)[0] }, getInt16: function getInt16(e) { var t = $(this, 2, e, arguments.length > 1 ? arguments[1] : void 0); return (t[1] << 8 | t[0]) << 16 >> 16 }, getUint16: function getUint16(e) { var t = $(this, 2, e, arguments.length > 1 ? arguments[1] : void 0); return t[1] << 8 | t[0] }, getInt32: function getInt32(e) { return D($(this, 4, e, arguments.length > 1 ? arguments[1] : void 0)) }, getUint32: function getUint32(e) { return D($(this, 4, e, arguments.length > 1 ? arguments[1] : void 0)) >>> 0 }, getFloat32: function getFloat32(e) { return A($(this, 4, e, arguments.length > 1 ? arguments[1] : void 0), 23) }, getFloat64: function getFloat64(e) { return A($(this, 8, e, arguments.length > 1 ? arguments[1] : void 0), 52) }, setInt8: function setInt8(e, t) { B(this, 1, e, P, t) }, setUint8: function setUint8(e, t) { B(this, 1, e, P, t) }, setInt16: function setInt16(e, t) { B(this, 2, e, R, t, arguments.length > 2 ? arguments[2] : void 0) }, setUint16: function setUint16(e, t) { B(this, 2, e, R, t, arguments.length > 2 ? arguments[2] : void 0) }, setInt32: function setInt32(e, t) { B(this, 4, e, O, t, arguments.length > 2 ? arguments[2] : void 0) }, setUint32: function setUint32(e, t) { B(this, 4, e, O, t, arguments.length > 2 ? arguments[2] : void 0) }, setFloat32: function setFloat32(e, t) { B(this, 4, e, F, t, arguments.length > 2 ? arguments[2] : void 0) }, setFloat64: function setFloat64(e, t) { B(this, 8, e, I, t, arguments.length > 2 ? arguments[2] : void 0) } }); _(S, "ArrayBuffer"), _(k, "DataView"), e.exports = { ArrayBuffer: S, DataView: k } }, function(e, t, n) { "use strict"; var r = n(219).forEach, i = n(927), o = n(613), a = i("forEach"), s = o("forEach"); e.exports = a && s ? [].forEach : function forEach(e) { return r(this, e, arguments.length > 1 ? arguments[1] : void 0) } }, function(e, t, n) { var r = n(109), i = n(114), o = n(1500), a = i("species"); e.exports = function (e) { return o >= 51 || !r(function () { var t = []; return (t.constructor = {})[a] = function () { return { foo: 1 } }, 1 !== t[e](Boolean).foo }) } },,, function(e, t, n) { var r = n(22), i = n(897); e.exports = function setMonth(e, t) { var n = r(e), o = Number(t), a = n.getFullYear(), s = n.getDate(), l = new Date(0); l.setFullYear(a, o, 15), l.setHours(0, 0, 0, 0); var u = i(l); return n.setMonth(o, Math.min(s, u)), n } }, function(e, t, n) { var r = n(22); e.exports = function lastDayOfWeek(e, t) { var n = t && Number(t.weekStartsOn) || 0, i = r(e), o = i.getDay(), a = 6 + (o < n ? -7 : 0) - (o - n); return i.setHours(0, 0, 0, 0), i.setDate(i.getDate() + a), i } }, function(e, t, n) { var r = n(22); e.exports = function isSameYear(e, t) { var n = r(e), i = r(t); return n.getFullYear() === i.getFullYear() } }, function(e, t, n) { var r = n(22); e.exports = function startOfSecond(e) { var t = r(e); return t.setMilliseconds(0), t } }, function(e, t, n) { var r = n(1429); e.exports = function isSameSecond(e, t) { var n = r(e), i = r(t); return n.getTime() === i.getTime() } }, function(e, t, n) { var r = n(22); e.exports = function startOfQuarter(e) { var t = r(e), n = t.getMonth(), i = n - n % 3; return t.setMonth(i, 1), t.setHours(0, 0, 0, 0), t } }, function(e, t, n) { var r = n(1431); e.exports = function isSameQuarter(e, t) { var n = r(e), i = r(t); return n.getTime() === i.getTime() } }, function(e, t, n) { var r = n(22); e.exports = function isSameMonth(e, t) { var n = r(e), i = r(t); return n.getFullYear() === i.getFullYear() && n.getMonth() === i.getMonth() } }, function(e, t, n) { var r = n(22); e.exports = function startOfMinute(e) { var t = r(e); return t.setSeconds(0, 0), t } }, function(e, t, n) { var r = n(1434); e.exports = function isSameMinute(e, t) { var n = r(e), i = r(t); return n.getTime() === i.getTime() } }, function(e, t, n) { var r = n(438); e.exports = function isSameISOYear(e, t) { var n = r(e), i = r(t); return n.getTime() === i.getTime() } }, function(e, t, n) { var r = n(889); e.exports = function isSameISOWeek(e, t) { return r(e, t, { weekStartsOn: 1 }) } }, function(e, t, n) { var r = n(22); e.exports = function startOfHour(e) { var t = r(e); return t.setMinutes(0, 0, 0), t } }, function(e, t, n) { var r = n(1438); e.exports = function isSameHour(e, t) { var n = r(e), i = r(t); return n.getTime() === i.getTime() } }, function(e, t, n) { var r = n(22); e.exports = function getISODay(e) { var t = r(e).getDay(); return 0 === t && (t = 7), t } }, function(e, t, n) { var r = n(22); e.exports = function isLeapYear(e) { var t = r(e).getFullYear(); return t % 400 == 0 || t % 4 == 0 && t % 100 != 0 } }, function(e, t, n) { var r = n(898); e.exports = function isValid(e) { if (r(e)) return !isNaN(e); throw new TypeError(toString.call(e) + " is not an instance of Date") } }, function(e, t, n) { var r = n(22); e.exports = function startOfYear(e) { var t = r(e), n = new Date(0); return n.setFullYear(t.getFullYear(), 0, 1), n.setHours(0, 0, 0, 0), n } }, function(e, t, n) { var r = n(22), i = n(1443), o = n(617); e.exports = function getDayOfYear(e) { var t = r(e); return o(t, i(t)) + 1 } }, function(e, t, n) { var r = n(22); e.exports = function endOfMonth(e) { var t = r(e), n = t.getMonth(); return t.setFullYear(t.getFullYear(), n + 1, 0), t.setHours(23, 59, 59, 999), t } }, function(e, t, n) { var r = n(22); e.exports = function endOfWeek(e, t) { var n = t && Number(t.weekStartsOn) || 0, i = r(e), o = i.getDay(), a = 6 + (o < n ? -7 : 0) - (o - n); return i.setDate(i.getDate() + a), i.setHours(23, 59, 59, 999), i } }, function(e, t, n) { var r = n(895), i = n(22), o = n(893), a = n(894), s = n(892), l = 1440, u = 2520, c = 43200, d = 86400; e.exports = function distanceInWords(e, t, n) { var f = n || {}, h = r(e, t), p = f.locale, m = s.distanceInWords.localize; p && p.distanceInWords && p.distanceInWords.localize && (m = p.distanceInWords.localize); var g, v, y = { addSuffix: Boolean(f.addSuffix), comparison: h }; h > 0 ? (g = i(e), v = i(t)) : (g = i(t), v = i(e)); var _, b = o(v, g), w = v.getTimezoneOffset() - g.getTimezoneOffset(), x = Math.round(b / 60) - w; if (x < 2) return f.includeSeconds ? b < 5 ? m("lessThanXSeconds", 5, y) : b < 10 ? m("lessThanXSeconds", 10, y) : b < 20 ? m("lessThanXSeconds", 20, y) : b < 40 ? m("halfAMinute", null, y) : m(b < 60 ? "lessThanXMinutes" : "xMinutes", 1, y) : 0 === x ? m("lessThanXMinutes", 1, y) : m("xMinutes", x, y); if (x < 45) return m("xMinutes", x, y); if (x < 90) return m("aboutXHours", 1, y); if (x < l) return m("aboutXHours", Math.round(x / 60), y); if (x < u) return m("xDays", 1, y); if (x < c) return m("xDays", Math.round(x / l), y); if (x < d) return m("aboutXMonths", _ = Math.round(x / c), y); if ((_ = a(v, g)) < 12) return m("xMonths", Math.round(x / c), y); var C = _ % 12, S = Math.floor(_ / 12); return C < 3 ? m("aboutXYears", S, y) : C < 9 ? m("overXYears", S, y) : m("almostXYears", S + 1, y) } }, function(e, t, n) { var r = n(1458); e.exports = function subISOYears(e, t) { var n = Number(t); return r(e, -n) } }, function(e, t, n) { var r = n(22); e.exports = function differenceInCalendarYears(e, t) { var n = r(e), i = r(t); return n.getFullYear() - i.getFullYear() } }, function(e, t, n) { var r = n(22); e.exports = function getQuarter(e) { var t = r(e); return Math.floor(t.getMonth() / 3) + 1 } }, function(e, t, n) { var r = n(22); e.exports = function differenceInCalendarMonths(e, t) { var n = r(e), i = r(t); return 12 * (n.getFullYear() - i.getFullYear()) + (n.getMonth() - i.getMonth()) } }, function(e, t, n) { var r = n(338); e.exports = function differenceInCalendarISOYears(e, t) { return r(e) - r(t) } }, function(e, t, n) { var r = n(616); e.exports = function addYears(e, t) { var n = Number(t); return r(e, 12 * n) } }, function(e, t, n) { var r = n(439); e.exports = function addSeconds(e, t) { var n = Number(t); return r(e, 1e3 * n) } }, function(e, t, n) { var r = n(616); e.exports = function addQuarters(e, t) { var n = Number(t); return r(e, 3 * n) } }, function(e, t, n) { var r = n(439), i = 6e4; e.exports = function addMinutes(e, t) { var n = Number(t); return r(e, n * i) } }, function(e, t, n) { var r = n(22), i = n(438), o = n(617); e.exports = function setISOYear(e, t) { var n = r(e), a = Number(t), s = o(n, i(n)), l = new Date(0); return l.setFullYear(a, 0, 4), l.setHours(0, 0, 0, 0), (n = i(l)).setDate(n.getDate() + s), n } }, function(e, t, n) { var r = n(338), i = n(1457); e.exports = function addISOYears(e, t) { var n = Number(t); return i(e, r(e) + n) } }, function(e, t, n) { var r = n(439), i = 36e5; e.exports = function addHours(e, t) { var n = Number(t); return r(e, n * i) } },, function(e, t, n) { "use strict"; var r = n(222).f, i = n(341), o = n(902), a = n(343), s = n(622), l = n(379), u = n(909), c = n(1496), d = n(138), f = n(899).fastKey, h = n(306), p = h.set, m = h.getterFor; e.exports = { getConstructor: function (e, t, n, u) { var c = e(function (e, r) { s(e, c, t), p(e, { type: t, index: i(null), first: void 0, last: void 0, size: 0 }), d || (e.size = 0), void 0 != r && l(r, e[u], e, n) }), h = m(t), g = function (e, t, n) { var r, i, o = h(e), a = v(e, t); return a ? a.value = n : (o.last = a = { index: i = f(t, !0), key: t, value: n, previous: r = o.last, next: void 0, removed: !1 }, o.first || (o.first = a), r && (r.next = a), d ? o.size++ : e.size++, "F" !== i && (o.index[i] = a)), e }, v = function (e, t) { var n, r = h(e), i = f(t); if ("F" !== i) return r.index[i]; for (n = r.first; n; n = n.next)if (n.key == t) return n }; return o(c.prototype, { clear: function clear() { for (var e = h(this), t = e.index, n = e.first; n;)n.removed = !0, n.previous && (n.previous = n.previous.next = void 0), delete t[n.index], n = n.next; e.first = e.last = void 0, d ? e.size = 0 : this.size = 0 }, delete: function (e) { var t = h(this), n = v(this, e); if (n) { var r = n.next, i = n.previous; delete t.index[n.index], n.removed = !0, i && (i.next = r), r && (r.previous = i), t.first == n && (t.first = r), t.last == n && (t.last = i), d ? t.size-- : this.size-- } return !!n }, forEach: function forEach(e) { for (var t, n = h(this), r = a(e, arguments.length > 1 ? arguments[1] : void 0, 3); t = t ? t.next : n.first;)for (r(t.value, t.key, this); t && t.removed;)t = t.previous }, has: function has(e) { return !!v(this, e) } }), o(c.prototype, n ? { get: function get(e) { var t = v(this, e); return t && t.value }, set: function set(e, t) { return g(this, 0 === e ? 0 : e, t) } } : { add: function add(e) { return g(this, e = 0 === e ? 0 : e, e) } }), d && r(c.prototype, "size", { get: function () { return h(this).size } }), c }, setStrong: function (e, t, n) { var r = t + " Iterator", i = m(t), o = m(r); u(e, t, function (e, t) { p(this, { type: r, target: e, state: i(e), kind: t, last: void 0 }) }, function () { for (var e = o(this), t = e.kind, n = e.last; n && n.removed;)n = n.previous; return e.target && (e.last = n = n ? n.next : e.state.first) ? "keys" == t ? { value: n.key, done: !1 } : "values" == t ? { value: n.value, done: !1 } : { value: [n.key, n.value], done: !1 } : (e.target = void 0, { value: void 0, done: !0 }) }, n ? "entries" : "values", !n, !0), c(t) } } }, function(e, t, n) { "use strict"; var r = n(34), i = n(119), o = n(899), a = n(67), s = n(236), l = n(379), u = n(622), c = n(129), d = n(305), f = n(222).f, h = n(272).forEach, p = n(138), m = n(306), g = m.set, v = m.getterFor; e.exports = function (e, t, n) { var m, y = -1 !== e.indexOf("Map"), _ = -1 !== e.indexOf("Weak"), b = y ? "set" : "add", w = i[e], x = w && w.prototype, C = {}; if (p && "function" == typeof w && (_ || x.forEach && !a(function () { (new w).entries().next() }))) { m = t(function (t, n) { g(u(t, m, e), { type: e, collection: new w }), void 0 != n && l(n, t[b], t, y) }); var S = v(e); h(["add", "clear", "delete", "forEach", "get", "has", "set", "keys", "values", "entries"], function (e) { var t = "add" == e || "set" == e; e in x && (!_ || "clear" != e) && s(m.prototype, e, function (n, r) { var i = S(this).collection; if (!t && _ && !c(n)) return "get" == e && void 0; var o = i[e](0 === n ? 0 : n, r); return t ? this : o }) }), _ || f(m.prototype, "size", { configurable: !0, get: function () { return S(this).collection.size } }) } else m = n.getConstructor(t, e, y, b), o.REQUIRED = !0; return d(m, e, !1, !0), C[e] = m, r({ global: !0, forced: !0 }, C), _ || n.setStrong(m, e, y), m } }, function(e, t, n) { var r = n(34), i = n(119), o = n(912), a = [].slice, s = function (e) { return function (t, n) { var r = arguments.length > 2, i = r ? a.call(arguments, 2) : void 0; return e(r ? function () { ("function" == typeof t ? t : Function(t)).apply(this, i) } : t, n) } }; r({ global: !0, bind: !0, forced: /MSIE .\./.test(o) }, { setTimeout: s(i.setTimeout), setInterval: s(i.setInterval) }) }, function(e, t) { e.exports = function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } }, function(e, t, n) { var r = n(1473); e.exports = function _arrayWithHoles(e) { if (r(e)) return e } }, function(e, t, n) { n(1514); var r = n(52); e.exports = r.Object.getOwnPropertySymbols }, function(e, t, n) { var r = n(234), i = n(905), o = n(916), a = n(211); e.exports = r("Reflect", "ownKeys") || function ownKeys(e) { var t = i.f(a(e)), n = o.f; return n ? t.concat(n(e)) : t } }, function(e, t, n) { var r = n(67); e.exports = !r(function () { return Object.isExtensible(Object.preventExtensions({})) }) }, function(e, t, n) { e.exports = n(3432) }, function(e, t, n) { e.exports = n(3433) }, function(e, t, n) { var r = n(1470), i = n(1469), o = n(906); e.exports = function _iterableToArray(e) { if (void 0 !== o && i(Object(e))) return r(e) } }, function(e, t) { e.exports = function _arrayLikeToArray(e, t) { (null == t || t > e.length) && (t = e.length); for (var n = 0, r = new Array(t); n < t; n++)r[n] = e[n]; return r } }, function(e, t, n) { e.exports = n(3434) }, function(e, t, n) { n(304), n(3437); var r = n(52); e.exports = r.Array.from }, function(e, t, n) { var r = n(211), i = n(442); e.exports = function (e) { var t = i(e); if ("function" != typeof t) throw TypeError(String(e) + " is not iterable"); return r(t.call(e)) } }, function(e, t) { e.exports = { CSSRuleList: 0, CSSStyleDeclaration: 0, CSSValueList: 0, ClientRectList: 0, DOMRectList: 0, DOMStringList: 0, DOMTokenList: 1, DataTransferItemList: 0, FileList: 0, HTMLAllCollection: 0, HTMLCollection: 0, HTMLFormElement: 0, HTMLSelectElement: 0, MediaList: 0, MimeTypeArray: 0, NamedNodeMap: 0, NodeList: 1, PaintRequestList: 0, Plugin: 0, PluginArray: 0, SVGLengthList: 0, SVGNumberList: 0, SVGPathSegList: 0, SVGPointList: 0, SVGStringList: 0, SVGTransformList: 0, SourceBufferList: 0, StyleSheetList: 0, TextTrackCueList: 0, TextTrackList: 0, TouchList: 0 } }, function(e, t, n) { "use strict"; var r, i, o, a = n(619), s = n(214), l = n(140), u = n(114), c = n(387), d = u("iterator"), f = !1;[].keys && ("next" in (o = [].keys()) ? (i = a(a(o))) !== Object.prototype && (r = i) : f = !0), void 0 == r && (r = {}), c || l(r, d) || s(r, d, function () { return this }), e.exports = { IteratorPrototype: r, BUGGY_SAFARI_ITERATORS: f } }, function(e, t, n) { "use strict"; var r = n(1477).IteratorPrototype, i = n(386), o = n(349), a = n(339), s = n(444), l = function () { return this }; e.exports = function (e, t, n) { var u = t + " Iterator"; return e.prototype = i(r, { next: o(1, n) }), a(e, u, !1, !0), s[u] = l, e } }, function(e, t, n) { "use strict"; var r = n(133), i = n(1478), o = n(619), a = n(458), s = n(339), l = n(214), u = n(213), c = n(114), d = n(387), f = n(444), h = n(1477), p = h.IteratorPrototype, m = h.BUGGY_SAFARI_ITERATORS, g = c("iterator"), v = function () { return this }; e.exports = function (e, t, n, c, h, y, _) { i(n, t, c); var b, w, x, C = function (e) { if (e === h && M) return M; if (!m && e in T) return T[e]; switch (e) { case "keys": return function keys() { return new n(this, e) }; case "values": return function values() { return new n(this, e) }; case "entries": return function entries() { return new n(this, e) } }return function () { return new n(this) } }, S = t + " Iterator", k = !1, T = e.prototype, L = T[g] || T["@@iterator"] || h && T[h], M = !m && L || C(h), E = "Array" == t && T.entries || L; if (E && (b = o(E.call(new e)), p !== Object.prototype && b.next && (d || o(b) === p || (a ? a(b, p) : "function" != typeof b[g] && l(b, g, v)), s(b, S, !0, !0), d && (f[S] = v))), "values" == h && L && "values" !== L.name && (k = !0, M = function values() { return L.call(this) }), d && !_ || T[g] === M || l(T, g, M), f[t] = M, h) if (w = { values: C("values"), keys: y ? M : C("keys"), entries: C("entries") }, _) for (x in w) !m && !k && x in T || u(T, x, w[x]); else r({ target: t, proto: !0, forced: m || k }, w); return w } }, function(e, t, n) { var r = n(114), i = n(386), o = n(154), a = r("unscopables"), s = Array.prototype; void 0 == s[a] && o.f(s, a, { configurable: !0, value: i(null) }), e.exports = function (e) { s[a][e] = !0 } }, function(e, t, n) { var r = n(1544), i = n(140), o = n(1482), a = n(154).f; e.exports = function (e) { var t = r.Symbol || (r.Symbol = {}); i(t, e) || a(t, e, { value: o.f(e) }) } }, function(e, t, n) { var r = n(114); t.f = r }, function(e, t, n) { var r = n(252); e.exports = Array.isArray || function isArray(e) { return "Array" == r(e) } }, function(e, t, n) { var r = n(3450), i = n(3448); e.exports = function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = r(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), t && i(e, t) } }, function(e, t, n) { n(3451); var r = n(52); e.exports = r.Object.setPrototypeOf }, function(e, t, n) { e.exports = n(3452) }, function(e, t, n) { var r = n(3456), i = n(1486); function _getPrototypeOf(t) { return e.exports = _getPrototypeOf = i ? r : function _getPrototypeOf(e) { return e.__proto__ || r(e) }, _getPrototypeOf(t) } e.exports = _getPrototypeOf }, function(e, t, n) { var r = n(43), i = n(3457); e.exports = function _possibleConstructorReturn(e, t) { return !t || "object" !== r(t) && "function" != typeof t ? i(e) : t } }, function(e, t, n) { "use strict"; var r = n(34), i = n(248), o = n(441), a = n(621), s = n(379); r({ target: "Promise", stat: !0 }, { allSettled: function allSettled(e) { var t = this, n = o.f(t), r = n.resolve, l = n.reject, u = a(function () { var n = i(t.resolve), o = [], a = 0, l = 1; s(e, function (e) { var i = a++, s = !1; o.push(void 0), l++, n.call(t, e).then(function (e) { s || (s = !0, o[i] = { status: "fulfilled", value: e }, --l || r(o)) }, function (e) { s || (s = !0, o[i] = { status: "rejected", reason: e }, --l || r(o)) }) }), --l || r(o) }); return u.error && l(u.value), n.promise } }) }, function(e, t, n) { var r = n(211), i = n(129), o = n(441); e.exports = function (e, t) { if (r(e), i(t) && t.constructor === e) return t; var n = o.f(e); return (0, n.resolve)(t), n.promise } }, function(e, t, n) { var r = n(912); e.exports = /(iphone|ipod|ipad).*applewebkit/i.test(r) }, function(e, t, n) { var r = n(211), i = n(248), o = n(118)("species"); e.exports = function (e, t) { var n, a = r(e).constructor; return void 0 === a || void 0 == (n = r(a)[o]) ? t : i(n) } }, function(e, t, n) { var r = n(118)("iterator"), i = !1; try { var o = 0, a = { next: function () { return { done: !!o++ } }, return: function () { i = !0 } }; a[r] = function () { return this }, Array.from(a, function () { throw 2 }) } catch (e) { } e.exports = function (e, t) { if (!t && !i) return !1; var n = !1; try { var o = {}; o[r] = function () { return { next: function () { return { done: n = !0 } } } }, e(o) } catch (e) { } return n } }, function(e, t, n) { var r = n(211); e.exports = function (e, t, n, i) { try { return i ? t(r(n)[0], n[1]) : t(n) } catch (t) { var o = e.return; throw void 0 !== o && r(o.call(e)), t } } }, function(e, t, n) { var r = n(118), i = n(340), o = r("iterator"), a = Array.prototype; e.exports = function (e) { return void 0 !== e && (i.Array === e || a[o] === e) } }, function(e, t, n) { "use strict"; var r = n(234), i = n(222), o = n(118), a = n(138), s = o("species"); e.exports = function (e) { var t = r(e), n = i.f; a && t && !t[s] && n(t, s, { configurable: !0, get: function () { return this } }) } }, function(e, t, n) { var r = n(119); e.exports = r.Promise }, function(e, t, n) { n(449), n(304), n(233), n(3465), n(1489), n(3462); var r = n(52); e.exports = r.Promise }, function(e, t, n) { e.exports = n(3470) }, function(e, t, n) { var r, i, o = n(59), a = n(1502), s = o.process, l = s && s.versions, u = l && l.v8; u ? i = (r = u.split("."))[0] + r[1] : a && (!(r = a.match(/Edge\/(\d+)/)) || r[1] >= 74) && (r = a.match(/Chrome\/(\d+)/)) && (i = r[1]), e.exports = i && +i }, function(e, t, n) { "use strict"; var r = n(456); e.exports.f = function (e) { return new function (e) { var t, n; this.promise = new e(function (e, r) { if (void 0 !== t || void 0 !== n) throw TypeError("Bad Promise constructor"); t = e, n = r }), this.resolve = r(t), this.reject = r(n) }(e) } }, function(e, t, n) { var r = n(348); e.exports = r("navigator", "userAgent") || "" }, function(e, t, n) { var r = n(1502); e.exports = /(iphone|ipod|ipad).*applewebkit/i.test(r) }, function(e, t, n) { var r, i, o, a = n(59), s = n(109), l = n(252), u = n(380), c = n(1541), d = n(934), f = n(1503), h = a.location, p = a.setImmediate, m = a.clearImmediate, g = a.process, v = a.MessageChannel, y = a.Dispatch, _ = 0, b = {}, w = function (e) { if (b.hasOwnProperty(e)) { var t = b[e]; delete b[e], t() } }, x = function (e) { return function () { w(e) } }, C = function (e) { w(e.data) }, S = function (e) { a.postMessage(e + "", h.protocol + "//" + h.host) }; p && m || (p = function setImmediate(e) { for (var t = [], n = 1; arguments.length > n;)t.push(arguments[n++]); return b[++_] = function () { ("function" == typeof e ? e : Function(e)).apply(void 0, t) }, r(_), _ }, m = function clearImmediate(e) { delete b[e] }, "process" == l(g) ? r = function (e) { g.nextTick(x(e)) } : y && y.now ? r = function (e) { y.now(x(e)) } : v && !f ? (o = (i = new v).port2, i.port1.onmessage = C, r = u(o.postMessage, o, 1)) : !a.addEventListener || "function" != typeof postMessage || a.importScripts || s(S) || "file:" === h.protocol ? r = "onreadystatechange" in d("script") ? function (e) { c.appendChild(d("script")).onreadystatechange = function () { c.removeChild(this), w(e) } } : function (e) { setTimeout(x(e), 0) } : (r = S, a.addEventListener("message", C, !1))), e.exports = { set: p, clear: m } }, function(e, t, n) { var r = n(114)("iterator"), i = !1; try { var o = 0, a = { next: function () { return { done: !!o++ } }, return: function () { i = !0 } }; a[r] = function () { return this }, Array.from(a, function () { throw 2 }) } catch (e) { } e.exports = function (e, t) { if (!t && !i) return !1; var n = !1; try { var o = {}; o[r] = function () { return { next: function () { return { done: n = !0 } } } }, e(o) } catch (e) { } return n } }, function(e, t, n) { var r = n(139); e.exports = function (e, t, n, i) { try { return i ? t(r(n)[0], n[1]) : t(n) } catch (t) { var o = e.return; throw void 0 !== o && r(o.call(e)), t } } },, function(e, t, n) { e.exports = n(3483) }, function(e, t, n) { "use strict"; var r = n(248), i = n(129), o = [].slice, a = {}; e.exports = Function.bind || function bind(e) { var t = r(this), n = o.call(arguments, 1), s = function bound() { var r = n.concat(o.call(arguments)); return this instanceof s ? function (e, t, n) { if (!(t in a)) { for (var r = [], i = 0; i < t; i++)r[i] = "a[" + i + "]"; a[t] = Function("C,a", "return new C(" + r.join(",") + ")") } return a[t](e, n) }(t, r.length, r) : t.apply(e, r) }; return i(t.prototype) && (s.prototype = t.prototype), s } }, function(e, t, n) { var r = n(119); n(305)(r.JSON, "JSON", !0) }, function(e, t, n) { n(305)(Math, "Math", !0) }, function(e, t, n) { n(132)("toStringTag") }, function(e, t, n) { var r = n(237), i = n(905).f, o = {}.toString, a = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : []; e.exports.f = function getOwnPropertyNames(e) { return a && "[object Window]" == o.call(e) ? function (e) { try { return i(e) } catch (e) { return a.slice() } }(e) : i(r(e)) } }, function(e, t, n) { "use strict"; var r = n(34), i = n(119), o = n(234), a = n(307), s = n(138), l = n(914), u = n(1531), c = n(67), d = n(212), f = n(382), h = n(129), p = n(211), m = n(221), g = n(237), v = n(631), y = n(346), _ = n(341), b = n(455), w = n(905), x = n(1513), C = n(916), S = n(384), k = n(222), T = n(633), L = n(236), M = n(381), E = n(915), A = n(627), P = n(454), R = n(629), O = n(118), D = n(625), F = n(132), I = n(305), N = n(306), $ = n(272).forEach, B = A("hidden"), z = O("toPrimitive"), j = N.set, U = N.getterFor("Symbol"), q = Object.prototype, H = i.Symbol, V = o("JSON", "stringify"), G = S.f, W = k.f, Y = x.f, Z = T.f, K = E("symbols"), X = E("op-symbols"), J = E("string-to-symbol-registry"), Q = E("symbol-to-string-registry"), ee = E("wks"), te = i.QObject, ne = !te || !te.prototype || !te.prototype.findChild, re = s && c(function () { return 7 != _(W({}, "a", { get: function () { return W(this, "a", { value: 7 }).a } })).a }) ? function (e, t, n) { var r = G(q, t); r && delete q[t], W(e, t, n), r && e !== q && W(q, t, r) } : W, ie = function (e, t) { var n = K[e] = _(H.prototype); return j(n, { type: "Symbol", tag: e, description: t }), s || (n.description = t), n }, oe = u ? function (e) { return "symbol" == typeof e } : function (e) { return Object(e) instanceof H }, ae = function defineProperty(e, t, n) { e === q && ae(X, t, n), p(e); var r = v(t, !0); return p(n), d(K, r) ? (n.enumerable ? (d(e, B) && e[B][r] && (e[B][r] = !1), n = _(n, { enumerable: y(0, !1) })) : (d(e, B) || W(e, B, y(1, {})), e[B][r] = !0), re(e, r, n)) : W(e, r, n) }, se = function defineProperties(e, t) { p(e); var n = g(t), r = b(n).concat(de(n)); return $(r, function (t) { s && !le.call(n, t) || ae(e, t, n[t]) }), e }, le = function propertyIsEnumerable(e) { var t = v(e, !0), n = Z.call(this, t); return !(this === q && d(K, t) && !d(X, t)) && (!(n || !d(this, t) || !d(K, t) || d(this, B) && this[B][t]) || n) }, ue = function getOwnPropertyDescriptor(e, t) { var n = g(e), r = v(t, !0); if (n !== q || !d(K, r) || d(X, r)) { var i = G(n, r); return !i || !d(K, r) || d(n, B) && n[B][r] || (i.enumerable = !0), i } }, ce = function getOwnPropertyNames(e) { var t = Y(g(e)), n = []; return $(t, function (e) { d(K, e) || d(P, e) || n.push(e) }), n }, de = function getOwnPropertySymbols(e) { var t = e === q, n = Y(t ? X : g(e)), r = []; return $(n, function (e) { !d(K, e) || t && !d(q, e) || r.push(K[e]) }), r }; (l || (M((H = function Symbol() { if (this instanceof H) throw TypeError("Symbol is not a constructor"); var e = arguments.length && void 0 !== arguments[0] ? String(arguments[0]) : void 0, t = R(e), n = function (e) { this === q && n.call(X, e), d(this, B) && d(this[B], t) && (this[B][t] = !1), re(this, t, y(1, e)) }; return s && ne && re(q, t, { configurable: !0, set: n }), ie(t, e) }).prototype, "toString", function toString() { return U(this).tag }), M(H, "withoutSetter", function (e) { return ie(R(e), e) }), T.f = le, k.f = ae, S.f = ue, w.f = x.f = ce, C.f = de, D.f = function (e) { return ie(O(e), e) }, s && (W(H.prototype, "description", { configurable: !0, get: function description() { return U(this).description } }), a || M(q, "propertyIsEnumerable", le, { unsafe: !0 }))), r({ global: !0, wrap: !0, forced: !l, sham: !l }, { Symbol: H }), $(b(ee), function (e) { F(e) }), r({ target: "Symbol", stat: !0, forced: !l }, { for: function (e) { var t = String(e); if (d(J, t)) return J[t]; var n = H(t); return J[t] = n, Q[n] = t, n }, keyFor: function keyFor(e) { if (!oe(e)) throw TypeError(e + " is not a symbol"); if (d(Q, e)) return Q[e] }, useSetter: function () { ne = !0 }, useSimple: function () { ne = !1 } }), r({ target: "Object", stat: !0, forced: !l, sham: !s }, { create: function create(e, t) { return void 0 === t ? _(e) : se(_(e), t) }, defineProperty: ae, defineProperties: se, getOwnPropertyDescriptor: ue }), r({ target: "Object", stat: !0, forced: !l }, { getOwnPropertyNames: ce, getOwnPropertySymbols: de }), r({ target: "Object", stat: !0, forced: c(function () { C.f(1) }) }, { getOwnPropertySymbols: function getOwnPropertySymbols(e) { return C.f(m(e)) } }), V) && r({ target: "JSON", stat: !0, forced: !l || c(function () { var e = H(); return "[null]" != V([e]) || "{}" != V({ a: e }) || "{}" != V(Object(e)) }) }, { stringify: function stringify(e, t, n) { for (var r, i = [e], o = 1; arguments.length > o;)i.push(arguments[o++]); if (r = t, (h(t) || void 0 !== e) && !oe(e)) return f(t) || (t = function (e, t) { if ("function" == typeof r && (t = r.call(this, e, t)), !oe(t)) return t }), i[1] = t, V.apply(null, i) } }); H.prototype[z] || L(H.prototype, z, H.prototype.valueOf), I(H, "Symbol"), P[B] = !0 }, function(e, t, n) { n(1522), n(449), n(1514), n(3504), n(3503), n(3502), n(3501), n(1516), n(3500), n(3499), n(3498), n(3497), n(3496), n(3495), n(3494), n(1512), n(3493), n(1511), n(1510); var r = n(52); e.exports = r.Symbol }, function(e, t, n) { n(132)("iterator") }, function(e, t, n) { n(1516), n(304), n(233); var r = n(625); e.exports = r.f("iterator") }, function(e, t, n) { n(3509); var r = n(52); e.exports = r.Array.isArray }, function(e, t, n) { var r = n(3515), i = Array.prototype; e.exports = function (e) { var t = e.indexOf; return e === i || e instanceof Array && t === i.indexOf ? r : t } }, function(e, t, n) { n(3525); var r = n(52); e.exports = r.Object.keys }, function(e, t, n) { n(3527); var r = n(52).Object, i = e.exports = function defineProperty(e, t, n) { return r.defineProperty(e, t, n) }; r.defineProperty.sham && (i.sham = !0) }, function(e, t, n) { "use strict"; var r = n(34), i = n(67), o = n(382), a = n(129), s = n(221), l = n(235), u = n(452), c = n(910), d = n(451), f = n(118), h = n(913), p = f("isConcatSpreadable"), m = h >= 51 || !i(function () { var e = []; return e[p] = !1, e.concat()[0] !== e }), g = d("concat"), v = function (e) { if (!a(e)) return !1; var t = e[p]; return void 0 !== t ? !!t : o(e) }; r({ target: "Array", proto: !0, forced: !m || !g }, { concat: function concat(e) { var t, n, r, i, o, a = s(this), d = c(a, 0), f = 0; for (t = -1, r = arguments.length; t < r; t++)if (o = -1 === t ? a : arguments[t], v(o)) { if (f + (i = l(o.length)) > 9007199254740991) throw TypeError("Maximum allowed index exceeded"); for (n = 0; n < i; n++, f++)n in o && u(d, f, o[n]) } else { if (f >= 9007199254740991) throw TypeError("Maximum allowed index exceeded"); u(d, f++, o) } return d.length = f, d } }) }, function(e, t, n) { var r = n(67); e.exports = !r(function () { function F() { } return F.prototype.constructor = null, Object.getPrototypeOf(new F) !== F.prototype }) }, function(e, t, n) { "use strict"; var r, i, o, a = n(626), s = n(236), l = n(212), u = n(118), c = n(307), d = u("iterator"), f = !1;[].keys && ("next" in (o = [].keys()) ? (i = a(a(o))) !== Object.prototype && (r = i) : f = !0), void 0 == r && (r = {}), c || l(r, d) || s(r, d, function () { return this }), e.exports = { IteratorPrototype: r, BUGGY_SAFARI_ITERATORS: f } }, function(e, t, n) { "use strict"; var r = n(1524).IteratorPrototype, i = n(341), o = n(346), a = n(305), s = n(340), l = function () { return this }; e.exports = function (e, t, n) { var u = t + " Iterator"; return e.prototype = i(r, { next: o(1, n) }), a(e, u, !1, !0), s[u] = l, e } }, function(e, t, n) { var r = n(1532), i = Function.toString; "function" != typeof r.inspectSource && (r.inspectSource = function (e) { return i.call(e) }), e.exports = r.inspectSource }, function(e, t, n) { var r = n(234); e.exports = r("document", "documentElement") }, function(e, t, n) { n(3550); var r = n(52).Object; e.exports = function create(e, t) { return r.create(e, t) } }, function(e, t, n) { var r = n(3557), i = Array.prototype; e.exports = function (e) { var t = e.slice; return e === i || e instanceof Array && t === i.slice ? r : t } }, function(e, t, n) { var r = n(118)("match"); e.exports = function (e) { var t = /./; try { "/./"[e](t) } catch (n) { try { return t[r] = !1, "/./"[e](t) } catch (e) { } } return !1 } }, function(e, t, n) { var r = n(914); e.exports = r && !Symbol.sham && "symbol" == typeof Symbol.iterator }, function(e, t, n) { var r = n(119), i = n(3559), o = r["__core-js_shared__"] || i("__core-js_shared__", {}); e.exports = o }, function(e, t, n) { var r = n(3560); e.exports = function (e) { if (r(e)) throw TypeError("The method doesn't accept regular expressions"); return e } }, function(e, t, n) { var r = n(212), i = n(237), o = n(918).indexOf, a = n(454); e.exports = function (e, t) { var n, s = i(e), l = 0, u = []; for (n in s) !r(a, n) && r(s, n) && u.push(n); for (; t.length > l;)r(s, n = t[l++]) && (~o(u, n) || u.push(n)); return u } }, function(e, t, n) { var r = n(138), i = n(222), o = n(211), a = n(455); e.exports = r ? Object.defineProperties : function defineProperties(e, t) { o(e); for (var n, r = a(t), s = r.length, l = 0; s > l;)i.f(e, n = r[l++], t[n]); return e } }, function(e, t, n) { var r = n(67), i = /#|\.prototype\./, o = function (e, t) { var n = s[a(e)]; return n == u || n != l && ("function" == typeof t ? r(t) : !!t) }, a = o.normalize = function (e) { return String(e).replace(i, ".").toLowerCase() }, s = o.data = {}, l = o.NATIVE = "N", u = o.POLYFILL = "P"; e.exports = o }, function(e, t, n) { var r = n(138), i = n(67), o = n(919); e.exports = !r && !i(function () { return 7 != Object.defineProperty(o("div"), "a", { get: function () { return 7 } }).a }) }, function(e, t, n) { var r = n(165), i = n(252), o = n(114)("match"); e.exports = function (e) { var t; return r(e) && (void 0 !== (t = e[o]) ? !!t : "RegExp" == i(e)) } }, function(e, t, n) { "use strict"; var r = n(109); function RE(e, t) { return RegExp(e, t) } t.UNSUPPORTED_Y = r(function () { var e = RE("a", "y"); return e.lastIndex = 2, null != e.exec("abcd") }), t.BROKEN_CARET = r(function () { var e = RE("^r", "gy"); return e.lastIndex = 2, null != e.exec("str") }) }, function(e, t, n) { var r = n(923); e.exports = r && !Symbol.sham && "symbol" == typeof Symbol.iterator }, function(e, t, n) { var r = n(348); e.exports = r("document", "documentElement") }, function(e, t, n) { var r = n(146), i = n(154), o = n(139), a = n(925); e.exports = r ? Object.defineProperties : function defineProperties(e, t) { o(e); for (var n, r = a(t), s = r.length, l = 0; s > l;)i.f(e, n = r[l++], t[n]); return e } }, function(e, t, n) { var r = n(140), i = n(308), o = n(930).indexOf, a = n(639); e.exports = function (e, t) { var n, s = i(e), l = 0, u = []; for (n in s) !r(a, n) && r(s, n) && u.push(n); for (; t.length > l;)r(s, n = t[l++]) && (~o(u, n) || u.push(n)); return u } }, function(e, t, n) { var r = n(59); e.exports = r }, function(e, t, n) { var r = n(140), i = n(3588), o = n(389), a = n(154); e.exports = function (e, t) { for (var n = i(t), s = a.f, l = o.f, u = 0; u < n.length; u++) { var c = n[u]; r(e, c) || s(e, c, l(t, c)) } } }, function(e, t, n) { var r = n(59), i = n(933), o = r["__core-js_shared__"] || i("__core-js_shared__", {}); e.exports = o }, function(e, t, n) { var r = n(146), i = n(109), o = n(934); e.exports = !r && !i(function () { return 7 != Object.defineProperty(o("div"), "a", { get: function () { return 7 } }).a }) }, function(e, t, n) { (function (e) { var r = void 0 !== e && e || "undefined" != typeof self && self || window, i = Function.prototype.apply; function Timeout(e, t) { this._id = e, this._clearFn = t } t.setTimeout = function () { return new Timeout(i.call(setTimeout, r, arguments), clearTimeout) }, t.setInterval = function () { return new Timeout(i.call(setInterval, r, arguments), clearInterval) }, t.clearTimeout = t.clearInterval = function (e) { e && e.close() }, Timeout.prototype.unref = Timeout.prototype.ref = function () { }, Timeout.prototype.close = function () { this._clearFn.call(r, this._id) }, t.enroll = function (e, t) { clearTimeout(e._idleTimeoutId), e._idleTimeout = t }, t.unenroll = function (e) { clearTimeout(e._idleTimeoutId), e._idleTimeout = -1 }, t._unrefActive = t.active = function (e) { clearTimeout(e._idleTimeoutId); var t = e._idleTimeout; t >= 0 && (e._idleTimeoutId = setTimeout(function onTimeout() { e._onTimeout && e._onTimeout() }, t)) }, n(3590), t.setImmediate = "undefined" != typeof self && self.setImmediate || void 0 !== e && e.setImmediate || this && this.setImmediate, t.clearImmediate = "undefined" != typeof self && self.clearImmediate || void 0 !== e && e.clearImmediate || this && this.clearImmediate }).call(this, n(48)) },,,,,,,,, function(e, t, n) { "use strict"; n.d(t, "a", function () { return r }); var r = function (e, t, n) { "use awesome"; var r = function (e, t) { this.config = e, this.onError = t, e.enabled && this.watch() }; r.prototype = { watch: function () { h.forEach(["EventTarget", "Node", "XMLHttpRequest"], function (t) { h.has(e, t + ".prototype.addEventListener") && h.hasOwn(e[t].prototype, "addEventListener") && this.wrapEventTarget(e[t].prototype) }, this), this.wrapTimer("setTimeout"), this.wrapTimer("setInterval") }, wrap: function (e) { function b() { try { return e.apply(this, arguments) } catch (e) { throw r.onError("catch", e, { bindTime: t, bindStack: n }), h.wrapError(e) } } var t, n, r = this; try { if (!h.isFunction(e) || h.hasOwn(e, "__trackjs__")) return e; if (h.hasOwn(e, "__trackjs_state__")) return e.__trackjs_state__ } catch (t) { return e } if (r.config.bindStack) try { throw Error() } catch (e) { n = e.stack, t = h.isoNow() } for (var i in e) h.hasOwn(e, i) && (b[i] = e[i]); return b.prototype = e.prototype, b.__trackjs__ = !0, e.__trackjs_state__ = b }, wrapEventTarget: function (e) { var t = this; h.has(e, "addEventListener.call") && h.has(e, "removeEventListener.call") && (h.patch(e, "addEventListener", function (e) { return function (n, r, i, o) { try { h.has(r, "handleEvent") && (r.handleEvent = t.wrap(r.handleEvent)) } catch (e) { } return e.call(this, n, t.wrap(r), i, o) } }), h.patch(e, "removeEventListener", function (e) { return function (t, n, r, i) { try { n = n && (n.__trackjs_state__ || n) } catch (e) { } return e.call(this, t, n, r, i) } })) }, wrapTimer: function (t) { var n = this; h.patch(e, t, function (e) { return function (t, r) { var i = Array.prototype.slice.call(arguments), o = i[0]; return h.isFunction(o) && (i[0] = n.wrap(o)), h.has(e, "apply") ? e.apply(this, i) : e(i[0], i[1]) } }) } }; var i = function (e) { this.initCurrent(e) }; i.prototype = { current: {}, initOnly: { application: !0, cookie: !0, enabled: !0, token: !0, callback: { enabled: !0 }, console: { enabled: !0 }, navigation: { enabled: !0 }, network: { enabled: !0, fetch: !0 }, visitor: { enabled: !0 }, window: { enabled: !0, promise: !0 } }, defaults: { application: "", cookie: !1, dedupe: !0, dependencies: !0, enabled: !0, errorURL: "https://capture.trackjs.com/capture", errorNoSSLURL: "http://capture.trackjs.com/capture", faultURL: "https://usage.trackjs.com/fault.gif", onError: function () { return !0 }, serialize: function (e) { function b(e) { var t = "<" + e.tagName.toLowerCase(); e = e.attributes || []; for (var n = 0; n < e.length; n++)t += " " + e[n].name + '="' + e[n].value + '"'; return t + ">" } if ("" === e) return "Empty String"; if (e === n) return "undefined"; if (h.isString(e) || h.isNumber(e) || h.isBoolean(e) || h.isFunction(e)) return "" + e; if (h.isElement(e)) return b(e); var t; try { t = JSON.stringify(e, function (e, t) { return t === n ? "undefined" : h.isNumber(t) && isNaN(t) ? "NaN" : h.isError(t) ? { name: t.name, message: t.message, stack: t.stack } : h.isElement(t) ? b(t) : t }) } catch (n) { for (var r in t = "", e) e.hasOwnProperty(r) && (t += ',"' + r + '":"' + e[r] + '"'); t = t ? "{" + t.replace(",", "") + "}" : "Unserializable Object" } return t.replace(/"undefined"/g, "undefined").replace(/"NaN"/g, "NaN") }, sessionId: "", token: "", userId: "", version: "", callback: { enabled: !0, bindStack: !1 }, console: { enabled: !0, display: !0, error: !0, warn: !1, watch: ["log", "debug", "info", "warn", "error"] }, navigation: { enabled: !0 }, network: { enabled: !0, error: !0, fetch: !0 }, visitor: { enabled: !0 }, usageURL: "https://usage.trackjs.com/usage.gif", window: { enabled: !0, promise: !0 } }, initCurrent: function (e) { return this.validate(e, this.defaults, "config", {}) ? (this.current = h.defaultsDeep({}, e, this.defaults), !0) : (this.current = h.defaultsDeep({}, this.defaults), console.log("init current config", this.current), !1) }, setCurrent: function (e) { return !!this.validate(e, this.defaults, "config", this.initOnly) && (this.current = h.defaultsDeep({}, e, this.current), !0) }, validate: function (e, t, n, r) { var i = !0; for (var o in n = n || "", r = r || {}, e) if (e.hasOwnProperty(o)) if (t.hasOwnProperty(o)) { var a = typeof t[o]; a !== typeof e[o] ? (console.warn(n + "." + o + ": property must be type " + a + "."), i = !1) : "[object Array]" !== Object.prototype.toString.call(e[o]) || this.validateArray(e[o], t[o], n + "." + o) ? "[object Object]" === Object.prototype.toString.call(e[o]) ? i = this.validate(e[o], t[o], n + "." + o, r[o]) : r.hasOwnProperty(o) && (console.warn(n + "." + o + ": property cannot be set after load."), i = !1) : i = !1 } else console.warn(n + "." + o + ": property not supported."), i = !1; return i }, validateArray: function (e, t, n) { var r = !0; n = n || ""; for (var i = 0; i < e.length; i++)h.contains(t, e[i]) || (console.warn(n + "[" + i + "]: invalid value: " + e[i] + "."), r = !1); return r } }; var o = function (e, t, n, r, i, o, a) { this.util = e, this.log = t, this.onError = n, this.onFault = r, this.serialize = i, a.enabled && (o.console = this.wrapConsoleObject(o.console, a)) }; o.prototype = { wrapConsoleObject: function (e, t) { var n, r = (e = e || {}).log || function () { }, i = this; for (n = 0; n < t.watch.length; n++)!function (n) { var o = e[n] || r; e[n] = function () { try { var e = Array.prototype.slice.call(arguments); if (i.log.add("c", { timestamp: i.util.isoNow(), severity: n, message: i.serialize(1 === e.length ? e[0] : e) }), t[n]) if (h.isError(e[0]) && 1 === e.length) i.onError("console", e[0]); else try { throw Error(i.serialize(1 === e.length ? e[0] : e)) } catch (e) { i.onError("console", e) } t.display && (i.util.hasFunction(o, "apply") ? o.apply(this, e) : o(e[0])) } catch (e) { i.onFault(e) } } }(t.watch[n]); return e }, report: function () { return this.log.all("c") } }; var s = function (e, t, n, r, i) { this.config = e, this.util = t, this.log = n, this.window = r, this.document = i, this.correlationId = this.token = null, this.initialize() }; s.prototype = { initialize: function () { this.token = this.getCustomerToken(), this.correlationId = this.getCorrelationId() }, getCustomerToken: function () { if (this.config.current.token) return this.config.current.token; var e = this.document.getElementsByTagName("script"); return e[e.length - 1].getAttribute("data-token") }, getCorrelationId: function () { var e; if (!this.config.current.cookie) return this.util.uuid(); try { (e = this.document.cookie.replace(/(?:(?:^|.*;\s*)TrackJS\s*\=\s*([^;]*).*$)|^.*$/, "$1")) || (e = this.util.uuid(), this.document.cookie = "TrackJS=" + e + "; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/") } catch (t) { e = this.util.uuid() } return e }, report: function () { return { application: this.config.current.application, correlationId: this.correlationId, sessionId: this.config.current.sessionId, token: this.token, userId: this.config.current.userId, version: this.config.current.version } } }; var l = function (e) { this.config = e, this.loadedOn = (new Date).getTime(), this.originalUrl = h.getLocation(), this.referrer = t.referrer }; l.prototype = { discoverDependencies: function () { var t = {}; for (var n in e.jQuery && e.jQuery.fn && e.jQuery.fn.jquery && (t.jQuery = e.jQuery.fn.jquery), e.jQuery && e.jQuery.ui && e.jQuery.ui.version && (t.jQueryUI = e.jQuery.ui.version), e.angular && e.angular.version && e.angular.version.full && (t.angular = e.angular.version.full), e) if ("_trackJs" !== n && "_trackJS" !== n && "_trackjs" !== n && "webkitStorageInfo" !== n && "webkitIndexedDB" !== n && "top" !== n && "parent" !== n && "frameElement" !== n) try { if (e[n]) { var r = e[n].version || e[n].Version || e[n].VERSION; "string" == typeof r && (t[n] = r) } } catch (e) { } return t }, report: function () { return { age: (new Date).getTime() - this.loadedOn, dependencies: this.config.current.dependencies ? this.discoverDependencies() : { trackJs: "3.1.2" }, originalUrl: this.originalUrl, referrer: this.referrer, userAgent: e.navigator.userAgent, viewportHeight: e.document.documentElement.clientHeight, viewportWidth: e.document.documentElement.clientWidth } } }; var u = function (e) { this.util = e, this.appender = [], this.maxLength = 30 }; u.prototype = { all: function (e) { var t, n, r = []; for (n = 0; n < this.appender.length; n++)(t = this.appender[n]) && t.category === e && r.push(t.value); return r }, clear: function () { this.appender.length = 0 }, truncate: function () { this.appender.length > this.maxLength && (this.appender = this.appender.slice(Math.max(this.appender.length - this.maxLength, 0))) }, add: function (e, t) { var n = this.util.uuid(); return this.appender.push({ key: n, category: e, value: t }), this.truncate(), n }, get: function (e, t) { var n, r; for (r = 0; r < this.appender.length; r++)if ((n = this.appender[r]).category === e && n.key === t) return n.value; return !1 } }; var c = function (e, t) { this.log = e, this.options = t, t.enabled && this.watch() }; c.prototype = { isCompatible: function (t) { return t = t || e, !h.has(t, "chrome.app.runtime") && h.has(t, "addEventListener") && h.has(t, "history.pushState") }, record: function (e, t, n) { this.log.add("h", { type: e, from: h.truncate(t, 250), to: h.truncate(n, 250), on: h.isoNow() }) }, report: function () { return this.log.all("h") }, watch: function () { if (this.isCompatible()) { var t = this, n = h.getLocationURL().relative; e.addEventListener("popstate", function () { var e = h.getLocationURL().relative; t.record("popState", n, e), n = e }, !0), h.forEach(["pushState", "replaceState"], function (e) { h.patch(history, e, function (r) { return function () { n = h.getLocationURL().relative; var i = r.apply(this, arguments), o = h.getLocationURL().relative; return t.record(e, n, o), n = o, i } }) }) } } }; var d = function (e, t, n, r, i, o) { this.util = e, this.log = t, this.onError = n, this.onFault = r, this.window = i, this.options = o, o.enabled && this.initialize(i) }; d.prototype = { initialize: function (e) { e.XMLHttpRequest && this.util.hasFunction(e.XMLHttpRequest.prototype.open, "apply") && this.watchNetworkObject(e.XMLHttpRequest), e.XDomainRequest && this.util.hasFunction(e.XDomainRequest.prototype.open, "apply") && this.watchNetworkObject(e.XDomainRequest), this.options.fetch && h.isWrappableFunction(e.fetch) && this.watchFetch() }, watchFetch: function () { var t = this.log, n = this.options, r = this.onError; h.patch(e, "fetch", function (i) { return function (o, a) { var s; try { throw Error() } catch (e) { s = e.stack } var l = o instanceof Request ? o : new Request(o, a), u = i.apply(e, arguments); return u.__trackjs_state__ = t.add("n", { type: "fetch", startedOn: h.isoNow(), method: l.method, url: h.truncate(l.url, 2e3) }), u.then(function (e) { var i = t.get("n", u.__trackjs_state__); return i && (h.defaults(i, { completedOn: h.isoNow(), statusCode: e.status, statusText: e.statusText }), n.error && 400 <= e.status && ((i = Error(i.statusCode + " " + i.statusText + ": " + i.method + " " + i.url)).stack = s, r("ajax", i))), e }).catch(function (e) { e = e || {}; var i = t.get("n", u.__trackjs_state__); throw i && (h.defaults(i, { completedOn: h.isoNow(), statusCode: 0, statusText: e.toString() }), n.error && (e.message = e.message + ": " + i.method + " " + i.url, e.stack = e.stack || s, r("ajax", e))), e }) } }) }, watchNetworkObject: function (e) { var t = this, n = e.prototype.open, r = e.prototype.send; return e.prototype.open = function (e, t) { var r = (t || "").toString(); return 0 > r.indexOf("localhost:0") && (this._trackJs = { method: e, url: r }), n.apply(this, arguments) }, e.prototype.send = function () { try { if (!this._trackJs) return r.apply(this, arguments); this._trackJs.logId = t.log.add("n", { type: "xhr", startedOn: t.util.isoNow(), method: this._trackJs.method, url: h.truncate(this._trackJs.url, 2e3) }), t.listenForNetworkComplete(this) } catch (e) { t.onFault(e) } return r.apply(this, arguments) }, e }, listenForNetworkComplete: function (e) { var t = this; t.window.ProgressEvent && e.addEventListener && e.addEventListener("readystatechange", function () { 4 === e.readyState && t.finalizeNetworkEvent(e) }, !0), e.addEventListener ? e.addEventListener("load", function () { t.finalizeNetworkEvent(e), t.checkNetworkFault(e) }, !0) : setTimeout(function () { try { var n = e.onload; e.onload = function () { t.finalizeNetworkEvent(e), t.checkNetworkFault(e), "function" == typeof n && t.util.hasFunction(n, "apply") && n.apply(e, arguments) }; var r = e.onerror; e.onerror = function () { t.finalizeNetworkEvent(e), t.checkNetworkFault(e), "function" == typeof oldOnError && r.apply(e, arguments) } } catch (e) { t.onFault(e) } }, 0) }, finalizeNetworkEvent: function (e) { if (e._trackJs) { var t = this.log.get("n", e._trackJs.logId); t && (t.completedOn = this.util.isoNow(), t.statusCode = 1223 == e.status ? 204 : e.status, t.statusText = 1223 == e.status ? "No Content" : e.statusText) } }, checkNetworkFault: function (e) { if (this.options.error && 400 <= e.status && 1223 != e.status) { var t = e._trackJs || {}; this.onError("ajax", e.status + " " + e.statusText + ": " + t.method + " " + t.url) } }, report: function () { return this.log.all("n") } }; var f = function (t, n) { this.util = t, this.config = n, this.disabled = !1, this.throttleStats = { attemptCount: 0, throttledCount: 0, lastAttempt: (new Date).getTime() }, e.JSON && e.JSON.stringify || (this.disabled = !0) }; f.prototype = { errorEndpoint: function (t) { var n = this.config.current.errorURL; return this.util.testCrossdomainXhr() || -1 !== e.location.protocol.indexOf("https") || (n = this.config.current.errorNoSSLURL), n + "?token=" + t }, usageEndpoint: function (e) { return this.appendObjectAsQuery(e, this.config.current.usageURL) }, trackerFaultEndpoint: function (e) { return this.appendObjectAsQuery(e, this.config.current.faultURL) }, appendObjectAsQuery: function (e, t) { for (var n in t += "?", e) e.hasOwnProperty(n) && (t += encodeURIComponent(n) + "=" + encodeURIComponent(e[n]) + "&"); return t }, getCORSRequest: function (t, n) { var r; return this.util.testCrossdomainXhr() ? ((r = new e.XMLHttpRequest).open(t, n), r.setRequestHeader("Content-Type", "text/plain")) : void 0 !== e.XDomainRequest ? (r = new e.XDomainRequest).open(t, n) : r = null, r }, sendTrackerFault: function (e) { this.throttle(e) || ((new Image).src = this.trackerFaultEndpoint(e)) }, sendUsage: function (e) { (new Image).src = this.usageEndpoint(e) }, sendError: function (t, r) { var i = this; if (!this.disabled && !this.throttle(t)) try { var o = this.getCORSRequest("POST", this.errorEndpoint(r)); o.onreadystatechange = function () { 4 === o.readyState && 200 !== o.status && (i.disabled = !0) }, o._trackJs = n, o.send(e.JSON.stringify(t)) } catch (e) { throw this.disabled = !0, e } }, throttle: function (e) { var t = (new Date).getTime(); if (this.throttleStats.attemptCount++, this.throttleStats.lastAttempt + 1e3 >= t) { if (this.throttleStats.lastAttempt = t, 10 < this.throttleStats.attemptCount) return this.throttleStats.throttledCount++, !0 } else e.throttled = this.throttleStats.throttledCount, this.throttleStats.attemptCount = 0, this.throttleStats.lastAttempt = t, this.throttleStats.throttledCount = 0; return !1 } }; var h = function () { function a(e, t, r, i) { return r = r || !1, i = i || 0, h.forEach(t, function (t) { h.forEach(h.keys(t), function (o) { null === t[o] || t[o] === n ? e[o] = t[o] : r && 10 > i && "[object Object]" === b(t[o]) ? (e[o] = e[o] || {}, a(e[o], [t[o]], r, i + 1)) : e.hasOwnProperty(o) || (e[o] = t[o]) }) }), e } function b(e) { return Object.prototype.toString.call(e) } return { addEventListenerSafe: function (e, t, n, r) { e.addEventListener ? e.addEventListener(t, n, r) : e.attachEvent && e.attachEvent("on" + t, n) }, afterDocumentLoad: function (e) { var n = !1; "complete" === t.readyState ? h.defer(e) : (h.addEventListenerSafe(t, "readystatechange", function () { "complete" !== t.readyState || n || (h.defer(e), n = !0) }), setTimeout(function () { n || (h.defer(e), n = !0) }, 1e4)) }, bind: function (e, t) { return function () { return e.apply(t, Array.prototype.slice.call(arguments)) } }, contains: function (e, t) { var n; for (n = 0; n < e.length; n++)if (e[n] === t) return !0; return !1 }, defaults: function (e) { return a(e, Array.prototype.slice.call(arguments, 1), !1) }, defaultsDeep: function (e) { return a(e, Array.prototype.slice.call(arguments, 1), !0) }, defer: function (e, t) { setTimeout(function () { e.apply(t) }) }, forEach: function (e, t, n) { if (h.isArray(e)) { if (e.forEach) return e.forEach(t, n); for (var r = 0; r < e.length;)t.call(n, e[r], r, e), r++ } }, getLocation: function () { return e.location.toString().replace(/ /g, "%20") }, getLocationURL: function () { return h.parseURL(h.getLocation()) }, has: function (e, t) { try { for (var n = t.split("."), r = e, i = 0; i < n.length; i++) { if (!r[n[i]]) return !1; r = r[n[i]] } return !0 } catch (e) { return !1 } }, hasFunction: function (e, t) { try { return !!e[t] } catch (e) { return !1 } }, hasOwn: function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, isArray: function (e) { return "[object Array]" === b(e) }, isBoolean: function (e) { return "boolean" == typeof e || h.isObject(e) && "[object Boolean]" === b(e) }, isBrowserIE: function (t) { var n = (t = t || e.navigator.userAgent).match(/Trident\/([\d.]+)/); return n && "7.0" === n[1] ? 11 : !!(t = t.match(/MSIE ([\d.]+)/)) && parseInt(t[1], 10) }, isBrowserSupported: function () { var e = this.isBrowserIE(); return !e || 8 <= e }, isError: function (e) { if (!h.isObject(e)) return !1; var t = b(e); return "[object Error]" === t || "[object DOMException]" === t || h.isString(e.name) && h.isString(e.message) }, isElement: function (e) { return h.isObject(e) && 1 === e.nodeType }, isFunction: function (e) { return !(!e || "function" != typeof e) }, isNumber: function (e) { return "number" == typeof e || h.isObject(e) && "[object Number]" === b(e) }, isObject: function (e) { return !(!e || "object" != typeof e) }, isString: function (e) { return "string" == typeof e || !h.isArray(e) && h.isObject(e) && "[object String]" === b(e) }, isWrappableFunction: function (e) { return this.isFunction(e) && this.hasFunction(e, "apply") }, isoNow: function () { var e = new Date; return e.toISOString ? e.toISOString() : e.getUTCFullYear() + "-" + this.pad(e.getUTCMonth() + 1) + "-" + this.pad(e.getUTCDate()) + "T" + this.pad(e.getUTCHours()) + ":" + this.pad(e.getUTCMinutes()) + ":" + this.pad(e.getUTCSeconds()) + "." + String((e.getUTCMilliseconds() / 1e3).toFixed(3)).slice(2, 5) + "Z" }, keys: function (e) { if (!h.isObject(e)) return []; var t, n = []; for (t in e) e.hasOwnProperty(t) && n.push(t); return n }, noop: function () { }, pad: function (e) { return 1 === (e = String(e)).length && (e = "0" + e), e }, parseURL: function (e) { var t = e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/); return t ? ((t = { protocol: t[2], host: t[4], path: t[5], query: t[6], hash: t[8] }).origin = (t.protocol || "") + "://" + (t.host || ""), t.relative = (t.path || "") + (t.query || "") + (t.hash || ""), t.href = e, t) : {} }, patch: function (e, t, n) { e[t] = n(e[t] || h.noop) }, testCrossdomainXhr: function () { return "withCredentials" in new XMLHttpRequest }, truncate: function (e, t) { if (e.length <= t) return e; var n = e.length - t; return e.substr(0, t) + "...{" + n + "}" }, tryGet: function (e, t) { try { return e[t] } catch (e) { } }, uuid: function () { return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (e) { var t = 16 * Math.random() | 0; return ("x" == e ? t : 3 & t | 8).toString(16) }) }, wrapError: function (e) { if (e.innerError) return e; var t = Error("TrackJS Caught: " + (e.message || e)); return t.description = "TrackJS Caught: " + e.description, t.file = e.file, t.line = e.line || e.lineNumber, t.column = e.column || e.columnNumber, t.stack = e.stack, t.innerError = e, t } } }(), p = function (e, t, n, r, i, o) { this.util = e, this.log = t, this.onError = n, this.onFault = r, this.options = o, this.document = i, o.enabled && this.initialize(i) }; p.prototype = { initialize: function (e) { var t = this.util.bind(this.onDocumentClicked, this), n = this.util.bind(this.onInputChanged, this); e.addEventListener ? (e.addEventListener("click", t, !0), e.addEventListener("blur", n, !0)) : e.attachEvent && (e.attachEvent("onclick", t), e.attachEvent("onfocusout", n)) }, onDocumentClicked: function (e) { try { var t = this.getElementFromEvent(e); t && t.tagName && (this.isDescribedElement(t, "a") || this.isDescribedElement(t, "button") || this.isDescribedElement(t, "input", ["button", "submit"]) ? this.writeVisitorEvent(t, "click") : this.isDescribedElement(t, "input", ["checkbox", "radio"]) && this.writeVisitorEvent(t, "input", t.value, t.checked)) } catch (e) { this.onFault(e) } }, onInputChanged: function (e) { try { var t = this.getElementFromEvent(e); t && t.tagName && (this.isDescribedElement(t, "textarea") ? this.writeVisitorEvent(t, "input", t.value) : this.isDescribedElement(t, "select") && t.options && t.options.length ? this.onSelectInputChanged(t) : this.isDescribedElement(t, "input") && !this.isDescribedElement(t, "input", ["button", "submit", "hidden", "checkbox", "radio"]) && this.writeVisitorEvent(t, "input", t.value)) } catch (e) { this.onFault(e) } }, onSelectInputChanged: function (e) { if (e.multiple) for (var t = 0; t < e.options.length; t++)e.options[t].selected && this.writeVisitorEvent(e, "input", e.options[t].value); else 0 <= e.selectedIndex && e.options[e.selectedIndex] && this.writeVisitorEvent(e, "input", e.options[e.selectedIndex].value) }, writeVisitorEvent: function (e, t, r, i) { "password" === this.getElementType(e) && (r = n), this.log.add("v", { timestamp: this.util.isoNow(), action: t, element: { tag: e.tagName.toLowerCase(), attributes: this.getElementAttributes(e), value: this.getMetaValue(r, i) } }) }, getElementFromEvent: function (e) { return e.target || t.elementFromPoint(e.clientX, e.clientY) }, isDescribedElement: function (e, t, n) { if (e.tagName.toLowerCase() !== t.toLowerCase()) return !1; if (!n) return !0; for (e = this.getElementType(e), t = 0; t < n.length; t++)if (n[t] === e) return !0; return !1 }, getElementType: function (e) { return (e.getAttribute("type") || "").toLowerCase() }, getElementAttributes: function (e) { for (var t = {}, n = Math.min(e.attributes.length, 10), r = 0; r < n; r++) { var i = e.attributes[r]; h.contains(["data-value", "value"], i.name.toLowerCase()) || (t[i.name] = h.truncate(i.value, 100)) } return t }, getMetaValue: function (e, t) { return e === n ? n : { length: e.length, pattern: this.matchInputPattern(e), checked: t } }, matchInputPattern: function (e) { return "" === e ? "empty" : /^[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/.test(e) ? "email" : /^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/.test(e) || /^(\d{4}[\/\-](0?[1-9]|1[012])[\/\-]0?[1-9]|[12][0-9]|3[01])$/.test(e) ? "date" : /^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/.test(e) ? "usphone" : /^\s*$/.test(e) ? "whitespace" : /^\d*$/.test(e) ? "numeric" : /^[a-zA-Z]*$/.test(e) ? "alpha" : /^[a-zA-Z0-9]*$/.test(e) ? "alphanumeric" : "characters" }, report: function () { return this.log.all("v") } }; var m = function (e, t, n, r, i) { this.onError = e, this.onFault = t, this.serialize = n, i.enabled && this.watchWindowErrors(r), i.promise && this.watchPromiseErrors(r) }; m.prototype = { watchPromiseErrors: function (e) { var t = this; e.addEventListener ? e.addEventListener("unhandledrejection", function (e) { if ((e = (e = e || {}).detail ? h.tryGet(e.detail, "reason") : h.tryGet(e, "reason")) !== n) { if (!h.isError(e)) try { throw Error(t.serialize(e)) } catch (t) { e = t } t.onError("promise", e) } }) : e.onunhandledrejection = function (e) { t.onError("promise", e) } }, watchWindowErrors: function (e) { var t = this; h.patch(e, "onerror", function (e) { return function (n, r, i, o, a) { try { (a = a || {}).message = a.message || t.serialize(n), a.name = a.name || "Error", a.line = a.line || parseInt(i, 10) || null, a.column = a.column || parseInt(o, 10) || null, "[object Event]" !== Object.prototype.toString.call(n) || r ? a.file = a.file || t.serialize(r) : a.file = (n.target || {}).src, t.onError("window", a) } catch (e) { t.onFault(e) } e.apply(this, arguments) } }) } }; var g, v, y = function () { this.hasInstalled = !1, this.hasEnabled = !0, this.window = e, this.document = t, this.util = h, this.install = h.bind(this.install, this), this.onError = h.bind(this.onError, this), this.onFault = h.bind(this.onFault, this), this.serialize = h.bind(this.serialize, this), this.log = new u(h), this.metadata = new function (e) { var t = {}; return { addMetadata: function (e, n) { t[e] = n }, removeMetadata: function (e) { delete t[e] }, report: function () { var n, r = []; for (n in t) t.hasOwnProperty(n) && r.push({ key: n, value: e(t[n]) }); return r }, store: t } }(this.serialize); var n = e._trackJs || e._trackJS || e._trackjs; n && this.install(n) }; return y.prototype = { install: function (e) { try { if (void 0 === t) return this.warn("monitoring disabled in node"), !1; if (!h.has(e, "token")) return this.warn("missing token"), !1; if (this.hasInstalled) return this.warn("already installed"), !1; if (this.config = new i(e), this.transmitter = new f(this.util, this.config), this.environment = new l(this.config), this.customer = new s(this.config, this.util, this.log, this.window, this.document), !this.config.current.enabled) return this.hasEnabled = !1; if (this.windowConsoleWatcher = new o(this.util, this.log, this.onError, this.onFault, this.serialize, this.window, this.config.current.console), !this.util.isBrowserSupported()) return !1; this.callbackWatcher = new r(this.config.current.callback, this.onError, this.onFault), this.visitorWatcher = new p(this.util, this.log, this.onError, this.onFault, this.document, this.config.current.visitor), this.navigationWatcher = new c(this.log, this.config.current.navigation), this.networkWatcher = new d(this.util, this.log, this.onError, this.onFault, this.window, this.config.current.network), this.windowWatcher = new m(this.onError, this.onFault, this.serialize, this.window, this.config.current.window); var n = this; return h.afterDocumentLoad(function () { n.transmitter.sendUsage({ token: n.customer.token, correlationId: n.customer.correlationId, application: n.config.current.application, x: n.util.uuid() }) }), this.hasInstalled = !0 } catch (e) { return this.onFault(e), !1 } }, pub: function () { var e = this, t = { addMetadata: this.metadata.addMetadata, attempt: function (t, n) { try { var r = Array.prototype.slice.call(arguments, 2); return t.apply(n || this, r) } catch (t) { throw e.onError("catch", t), h.wrapError(t) } }, configure: function (t) { return !e.hasInstalled && e.hasEnabled ? (e.warn("agent must be installed"), !1) : e.config.setCurrent(t) }, hash: "f3d53c46e7c05dce8a6d11a6cc27aaa5096cd7ed", install: this.install, removeMetadata: this.metadata.removeMetadata, track: function (t) { if (!e.hasInstalled && e.hasEnabled) e.warn("agent must be installed"); else { var n = h.isError(t) ? t.message : e.serialize(t); if (!(t = t || {}).stack) try { throw Error(n) } catch (e) { t = e } e.onError("direct", t) } }, version: "3.1.2", watch: function (t, n) { return function () { try { var r = Array.prototype.slice.call(arguments, 0); return t.apply(n || this, r) } catch (t) { throw e.onError("catch", t), h.wrapError(t) } } }, watchAll: function (e) { var t, n = Array.prototype.slice.call(arguments, 1); for (t in e) "function" != typeof e[t] || h.contains(n, t) || (e[t] = this.watch(e[t], e)); return e } }; return new o(h, e.log, e.onError, e.onFault, e.serialize, t, i.prototype.defaults.console), t }, onError: (v = !1, function (t, n, r) { if (this.hasInstalled && this.hasEnabled && h.isBrowserSupported()) try { if (r = r || { bindStack: null, bindTime: null, force: !1 }, n && h.isError(n) || (n = { name: "Error", message: this.serialize(n, r.force) }), -1 === n.message.indexOf("TrackJS Caught")) if (v && -1 !== n.message.indexOf("Script error")) v = !1; else { var i = h.defaultsDeep({}, { bindStack: r.bindStack, bindTime: r.bindTime, column: n.column || n.columnNumber, console: this.windowConsoleWatcher.report(), customer: this.customer.report(), entry: t, environment: this.environment.report(), file: n.file || n.fileName, line: n.line || n.lineNumber, message: n.message, metadata: this.metadata.report(), nav: this.navigationWatcher.report(), network: this.networkWatcher.report(), url: (e.location || "").toString(), stack: n.stack, timestamp: this.util.isoNow(), visitor: this.visitorWatcher.report(), version: "3.1.2" }); if (!r.force) try { if (!this.config.current.onError(i, n)) return } catch (e) { i.console.push({ timestamp: this.util.isoNow(), severity: "error", message: e.message }); var o = this; setTimeout(function () { o.onError("catch", e, { force: !0 }) }, 0) } if (this.config.current.dedupe) { var s = (i.message + i.stack).substr(0, 1e4); if (s === g) return; g = s } !function () { function a() { var e = 0; return h.forEach(i.console, function (t) { e += (t.message || "").length }), 8e4 <= e } for (var e = 0; a() && e < i.console.length;)i.console[e].message = h.truncate(i.console[e].message, 1e3), e++ }(), this.log.clear(), setTimeout(function () { v = !1 }), v = !0, this.transmitter.sendError(i, this.customer.token) } } catch (e) { this.onFault(e) } }), onFault: function (e) { var t = this.transmitter || new f; e = e || {}, e = { token: this.customer.token, file: e.file || e.fileName, msg: e.message || "unknown", stack: (e.stack || "unknown").substr(0, 1e3), url: this.window.location, v: "3.1.2", h: "f3d53c46e7c05dce8a6d11a6cc27aaa5096cd7ed", x: this.util.uuid() }, t.sendTrackerFault(e) }, serialize: function (e, t) { if (this.hasInstalled && this.config.current.serialize && !t) try { return this.config.current.serialize(e) } catch (e) { this.onError("catch", e, { force: !0 }) } return i.prototype.defaults.serialize(e) }, warn: function (t) { h.has(e, "console.warn") && e.console.warn("TrackJS: " + t) } }, (new y).pub() }("undefined" == typeof window ? void 0 : window, "undefined" == typeof document ? void 0 : document) },,,,,,, function(e, t, n) { e.exports = n(3177) }, function(e, t, n) { "use strict"; n.d(t, "a", function () { return updateFrequencyName }); var r = { "6_months": "6 months", daily: "Daily", weekly: "Weekly", yearly: "Yearly", quarterly: "Quarterly", monthly: "Monthly" }; function updateFrequencyName(e) { return e ? r[e] : "-" } }, function(e, t, n) { e.exports = { addDays: n(440), addHours: n(1459), addISOYears: n(1458), addMilliseconds: n(439), addMinutes: n(1456), addMonths: n(616), addQuarters: n(1455), addSeconds: n(1454), addWeeks: n(896), addYears: n(1453), areRangesOverlapping: n(3320), closestIndexTo: n(3319), closestTo: n(3318), compareAsc: n(437), compareDesc: n(895), differenceInCalendarDays: n(617), differenceInCalendarISOWeeks: n(3317), differenceInCalendarISOYears: n(1452), differenceInCalendarMonths: n(1451), differenceInCalendarQuarters: n(3316), differenceInCalendarWeeks: n(3315), differenceInCalendarYears: n(1449), differenceInDays: n(707), differenceInHours: n(3314), differenceInISOYears: n(3313), differenceInMilliseconds: n(615), differenceInMinutes: n(3312), differenceInMonths: n(894), differenceInQuarters: n(3311), differenceInSeconds: n(893), differenceInWeeks: n(3310), differenceInYears: n(3309), distanceInWords: n(1447), distanceInWordsStrict: n(399), distanceInWordsToNow: n(3305), eachDay: n(3304), endOfDay: n(891), endOfHour: n(3303), endOfISOWeek: n(3302), endOfISOYear: n(3301), endOfMinute: n(3300), endOfMonth: n(1445), endOfQuarter: n(3299), endOfSecond: n(3298), endOfToday: n(3297), endOfTomorrow: n(3296), endOfWeek: n(1446), endOfYear: n(3295), endOfYesterday: n(3294), format: n(462), getDate: n(3293), getDay: n(3292), getDayOfYear: n(1444), getDaysInMonth: n(897), getDaysInYear: n(3291), getHours: n(3290), getISODay: n(1440), getISOWeek: n(890), getISOWeeksInYear: n(3289), getISOYear: n(338), getMilliseconds: n(3288), getMinutes: n(3287), getMonth: n(3286), getOverlappingDaysInRanges: n(3285), getQuarter: n(1450), getSeconds: n(3284), getTime: n(3283), getYear: n(3282), isAfter: n(467), isBefore: n(3281), isDate: n(898), isEqual: n(3280), isFirstDayOfMonth: n(3279), isFriday: n(3278), isFuture: n(3277), isLastDayOfMonth: n(3276), isLeapYear: n(1441), isMonday: n(3275), isPast: n(3274), isSameDay: n(3273), isSameHour: n(1439), isSameISOWeek: n(1437), isSameISOYear: n(1436), isSameMinute: n(1435), isSameMonth: n(1433), isSameQuarter: n(1432), isSameSecond: n(1430), isSameWeek: n(889), isSameYear: n(1428), isSaturday: n(3272), isSunday: n(3271), isThisHour: n(3270), isThisISOWeek: n(3269), isThisISOYear: n(3268), isThisMinute: n(3267), isThisMonth: n(3266), isThisQuarter: n(3265), isThisSecond: n(3264), isThisWeek: n(3263), isThisYear: n(3262), isThursday: n(3261), isToday: n(3260), isTomorrow: n(3259), isTuesday: n(3258), isValid: n(1442), isWednesday: n(3257), isWeekend: n(3256), isWithinRange: n(3255), isYesterday: n(3254), lastDayOfISOWeek: n(3253), lastDayOfISOYear: n(3252), lastDayOfMonth: n(3251), lastDayOfQuarter: n(3250), lastDayOfWeek: n(1427), lastDayOfYear: n(3249), max: n(3248), min: n(3247), parse: n(22), setDate: n(3246), setDay: n(3245), setDayOfYear: n(3244), setHours: n(3243), setISODay: n(3242), setISOWeek: n(3241), setISOYear: n(1457), setMilliseconds: n(3240), setMinutes: n(3239), setMonth: n(1426), setQuarter: n(3238), setSeconds: n(3237), setYear: n(3236), startOfDay: n(336), startOfHour: n(1438), startOfISOWeek: n(337), startOfISOYear: n(438), startOfMinute: n(1434), startOfMonth: n(3235), startOfQuarter: n(1431), startOfSecond: n(1429), startOfToday: n(3234), startOfTomorrow: n(3233), startOfWeek: n(618), startOfYear: n(1443), startOfYesterday: n(3232), subDays: n(3231), subHours: n(3230), subISOYears: n(1448), subMilliseconds: n(3229), subMinutes: n(3228), subMonths: n(3227), subQuarters: n(3226), subSeconds: n(3225), subWeeks: n(3224), subYears: n(3223) } }, function(e, t, n) { e.exports = n(3380) }, function(e, t, n) { e.exports = n(3385) }, function(e, t, n) { "use strict"; (function (e) { n(127), n(23), n(24), n(128), n(29), n(46), n(303), n(16), n(51), n(68), n(25), n(35), n(143); var r, i = n(284), o = n.n(i), a = n(6), s = n.n(a), l = n(36), u = n.n(l), c = n(55), d = n.n(c), f = n(65), h = n.n(f), p = n(1568), m = n.n(p), g = n(469), v = n.n(g), y = n(718), _ = n.n(y), b = n(998), w = n.n(b), x = n(1567), C = n.n(x), S = n(745), k = n.n(S), T = n(37), L = n.n(T), M = n(28), E = n.n(M), A = n(40), P = n.n(A), R = n(13), O = n.n(R), D = n(1004), F = n.n(D), I = n(468), N = n.n(I), $ = n(7), B = n.n($), z = n(19), j = n.n(z), U = n(69), q = n.n(U), H = n(5), V = n.n(H), G = n(401), W = n.n(G), Y = n(744), Z = n.n(Y), K = n(313), X = n.n(K), J = n(17), Q = n.n(J), ee = n(12), te = n.n(ee), ne = n(116), re = n.n(ne), ie = n(10), oe = n.n(ie), ae = n(27), se = n.n(ae), le = n(1), ue = n.n(le), ce = n(111), de = n.n(ce), fe = n(11), he = n.n(fe), pe = n(38), me = n.n(pe), ge = n(30), ve = n.n(ge), ye = n(26), _e = n.n(ye), be = n(216), we = n.n(be), xe = n(18), Ce = n.n(xe), Se = n(43), ke = n.n(Se), Te = n(402), Le = n.n(Te), Me = Le()({}); function isUndef(e) { return void 0 === e || null === e } function isDef(e) { return void 0 !== e && null !== e } function isTrue(e) { return !0 === e } function isPrimitive(e) { return "string" == typeof e || "number" == typeof e || "symbol" === ke()(e) || "boolean" == typeof e } function isObject(e) { return null !== e && "object" === ke()(e) } var Ee = Object.prototype.toString; function isPlainObject(e) { return "[object Object]" === Ee.call(e) } function isRegExp(e) { return "[object RegExp]" === Ee.call(e) } function isValidArrayIndex(e) { var t = we()(String(e)); return t >= 0 && Math.floor(t) === t && isFinite(e) } function isPromise(e) { return isDef(e) && "function" == typeof e.then && "function" == typeof e.catch } function toString(e) { return null == e ? "" : _e()(e) || isPlainObject(e) && e.toString === Ee ? ve()(e, null, 2) : String(e) } function toNumber(e) { var t = we()(e); return isNaN(t) ? e : t } function makeMap(e, t) { for (var n = me()(null), r = e.split(","), i = 0; i < r.length; i++)n[r[i]] = !0; return t ? function (e) { return n[e.toLowerCase()] } : function (e) { return n[e] } } var Ae = makeMap("slot,component", !0), Pe = makeMap("key,ref,slot,slot-scope,is"); function remove(e, t) { if (e.length) { var n = he()(e).call(e, t); if (n > -1) return de()(e).call(e, n, 1) } } var Re = Object.prototype.hasOwnProperty; function hasOwn(e, t) { return Re.call(e, t) } function cached(e) { var t = me()(null); return function cachedFn(n) { return t[n] || (t[n] = e(n)) } } var Oe = /-(\w)/g, De = cached(function (e) { return e.replace(Oe, function (e, t) { return t ? t.toUpperCase() : "" }) }), Fe = cached(function (e) { return e.charAt(0).toUpperCase() + Ce()(e).call(e, 1) }), Ie = /\B([A-Z])/g, Ne = cached(function (e) { return e.replace(Ie, "-$1").toLowerCase() }); var $e = ue()(Function.prototype) ? function nativeBind(e, t) { return ue()(e).call(e, t) } : function polyfillBind(e, t) { function boundFn(n) { var r = arguments.length; return r ? r > 1 ? e.apply(t, arguments) : e.call(t, n) : e.call(t) } return boundFn._length = e.length, boundFn }; function toArray(e, t) { t = t || 0; for (var n = e.length - t, r = new Array(n); n--;)r[n] = e[n + t]; return r } function extend(e, t) { for (var n in t) e[n] = t[n]; return e } function toObject(e) { for (var t = {}, n = 0; n < e.length; n++)e[n] && extend(t, e[n]); return t } function noop(e, t, n) { } var Be = function no(e, t, n) { return !1 }, ze = function identity(e) { return e }; function looseEqual(e, t) { if (e === t) return !0; var n = isObject(e), r = isObject(t); if (!n || !r) return !n && !r && String(e) === String(t); try { var i = _e()(e), o = _e()(t); if (i && o) return e.length === t.length && re()(e).call(e, function (e, n) { return looseEqual(e, t[n]) }); if (e instanceof Date && t instanceof Date) return e.getTime() === t.getTime(); if (i || o) return !1; var a = te()(e), s = te()(t); return a.length === s.length && re()(a).call(a, function (n) { return looseEqual(e[n], t[n]) }) } catch (e) { return !1 } } function looseIndexOf(e, t) { for (var n = 0; n < e.length; n++)if (looseEqual(e[n], t)) return n; return -1 } function once(e) { var t = !1; return function () { t || (t = !0, e.apply(this, arguments)) } } var je = "data-server-rendered", Ue = ["component", "directive", "filter"], qe = ["beforeCreate", "created", "beforeMount", "mounted", "beforeUpdate", "updated", "beforeDestroy", "destroyed", "activated", "deactivated", "errorCaptured", "serverPrefetch"], He = { optionMergeStrategies: me()(null), silent: !1, productionTip: !1, devtools: !1, performance: !1, errorHandler: null, warnHandler: null, ignoredElements: [], keyCodes: me()(null), isReservedTag: Be, isReservedAttr: Be, isUnknownElement: Be, getTagNamespace: noop, parsePlatformTagName: ze, mustUseProp: Be, async: !0, _lifecycleHooks: qe }, Ve = /a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/; function def(e, t, n, r) { Q()(e, t, { value: n, enumerable: !!r, writable: !0, configurable: !0 }) } var Ge = new RegExp("[^" + Ve.source + ".$_\\d]"); var We, Ye = "__proto__" in {}, Ze = "undefined" != typeof window, Ke = "undefined" != typeof WXEnvironment && !!WXEnvironment.platform, Xe = Ke && WXEnvironment.platform.toLowerCase(), Je = Ze && window.navigator.userAgent.toLowerCase(), Qe = Je && /msie|trident/.test(Je), et = Je && he()(Je).call(Je, "msie 9.0") > 0, tt = Je && he()(Je).call(Je, "edge/") > 0, nt = (Je && he()(Je).call(Je, "android"), Je && /iphone|ipad|ipod|ios/.test(Je) || "ios" === Xe), rt = (Je && /chrome\/\d+/.test(Je), Je && /phantomjs/.test(Je), Je && Je.match(/firefox\/(\d+)/)), it = {}.watch, ot = !1; if (Ze) try { var at = {}; Q()(at, "passive", { get: function get() { ot = !0 } }), window.addEventListener("test-passive", null, at) } catch (e) { } var st = function isServerRendering() { return void 0 === We && (We = !Ze && !Ke && void 0 !== e && (e.process && "server" === e.process.env.VUE_ENV)), We }, lt = Ze && window.__VUE_DEVTOOLS_GLOBAL_HOOK__; function isNative(e) { return "function" == typeof e && /native code/.test(e.toString()) } var ut, ct = void 0 !== X.a && isNative(X.a) && "undefined" != typeof Reflect && isNative(Z.a); ut = void 0 !== W.a && isNative(W.a) ? W.a : function () { function Set() { this.set = me()(null) } return Set.prototype.has = function has(e) { return !0 === this.set[e] }, Set.prototype.add = function add(e) { this.set[e] = !0 }, Set.prototype.clear = function clear() { this.set = me()(null) }, Set }(); var dt = noop, ft = 0, ht = function Dep() { this.id = ft++, this.subs = [] }; ht.prototype.addSub = function addSub(e) { this.subs.push(e) }, ht.prototype.removeSub = function removeSub(e) { remove(this.subs, e) }, ht.prototype.depend = function depend() { ht.target && ht.target.addDep(this) }, ht.prototype.notify = function notify() { var e, t = Ce()(e = this.subs).call(e); for (var n = 0, r = t.length; n < r; n++)t[n].update() }, ht.target = null; var pt = []; function pushTarget(e) { pt.push(e), ht.target = e } function popTarget() { pt.pop(), ht.target = pt[pt.length - 1] } var mt = function VNode(e, t, n, r, i, o, a, s) { this.tag = e, this.data = t, this.children = n, this.text = r, this.elm = i, this.ns = void 0, this.context = o, this.fnContext = void 0, this.fnOptions = void 0, this.fnScopeId = void 0, this.key = t && t.key, this.componentOptions = a, this.componentInstance = void 0, this.parent = void 0, this.raw = !1, this.isStatic = !1, this.isRootInsert = !0, this.isComment = !1, this.isCloned = !1, this.isOnce = !1, this.asyncFactory = s, this.asyncMeta = void 0, this.isAsyncPlaceholder = !1 }, gt = { child: { configurable: !0 } }; gt.child.get = function () { return this.componentInstance }, j()(mt.prototype, gt); var vt = function createEmptyVNode(e) { void 0 === e && (e = ""); var t = new mt; return t.text = e, t.isComment = !0, t }; function createTextVNode(e) { return new mt(void 0, void 0, void 0, String(e)) } function cloneVNode(e) { var t, n = new mt(e.tag, e.data, e.children && Ce()(t = e.children).call(t), e.text, e.elm, e.context, e.componentOptions, e.asyncFactory); return n.ns = e.ns, n.isStatic = e.isStatic, n.key = e.key, n.isComment = e.isComment, n.fnContext = e.fnContext, n.fnOptions = e.fnOptions, n.fnScopeId = e.fnScopeId, n.asyncMeta = e.asyncMeta, n.isCloned = !0, n } var yt = Array.prototype, _t = me()(yt), bt = ["push", "pop", "shift", "unshift", "splice", "sort", "reverse"]; B()(bt).call(bt, function (e) { var t = yt[e]; def(_t, e, function mutator() { for (var n = [], r = arguments.length; r--;)n[r] = arguments[r]; var i, o = t.apply(this, n), a = this.__ob__; switch (e) { case "push": case "unshift": i = n; break; case "splice": i = Ce()(n).call(n, 2) }return i && a.observeArray(i), a.dep.notify(), o }) }); var wt = N()(_t), xt = !0; function toggleObserving(e) { xt = e } var Ct = function Observer(e) { this.value = e, this.dep = new ht, this.vmCount = 0, def(e, "__ob__", this), _e()(e) ? (Ye ? function protoAugment(e, t) { e.__proto__ = t }(e, _t) : function copyAugment(e, t, n) { for (var r = 0, i = n.length; r < i; r++) { var o = n[r]; def(e, o, t[o]) } }(e, _t, wt), this.observeArray(e)) : this.walk(e) }; function observe(e, t) { var n; if (isObject(e) && !(e instanceof mt)) return hasOwn(e, "__ob__") && e.__ob__ instanceof Ct ? n = e.__ob__ : xt && !st() && (_e()(e) || isPlainObject(e)) && F()(e) && !e._isVue && (n = new Ct(e)), t && n && n.vmCount++, n } function defineReactive$$1(e, t, n, r, i) { var o = new ht, a = O()(e, t); if (!a || !1 !== a.configurable) { var s = a && a.get, l = a && a.set; s && !l || 2 !== arguments.length || (n = e[t]); var u = !i && observe(n); Q()(e, t, { enumerable: !0, configurable: !0, get: function reactiveGetter() { var t = s ? s.call(e) : n; return ht.target && (o.depend(), u && (u.dep.depend(), _e()(t) && function dependArray(e) { for (var t = void 0, n = 0, r = e.length; n < r; n++)(t = e[n]) && t.__ob__ && t.__ob__.dep.depend(), _e()(t) && dependArray(t) }(t))), t }, set: function reactiveSetter(t) { var r = s ? s.call(e) : n; t === r || t != t && r != r || s && !l || (l ? l.call(e, t) : n = t, u = !i && observe(t), o.notify()) } }) } } function set(e, t, n) { if (_e()(e) && isValidArrayIndex(t)) return e.length = Math.max(e.length, t), de()(e).call(e, t, 1, n), n; if (t in e && !(t in Object.prototype)) return e[t] = n, n; var r = e.__ob__; return e._isVue || r && r.vmCount ? n : r ? (defineReactive$$1(r.value, t, n), r.dep.notify(), n) : (e[t] = n, n) } function del(e, t) { if (_e()(e) && isValidArrayIndex(t)) de()(e).call(e, t, 1); else { var n = e.__ob__; e._isVue || n && n.vmCount || hasOwn(e, t) && (delete e[t], n && n.dep.notify()) } } Ct.prototype.walk = function walk(e) { for (var t = te()(e), n = 0; n < t.length; n++)defineReactive$$1(e, t[n]) }, Ct.prototype.observeArray = function observeArray(e) { for (var t = 0, n = e.length; t < n; t++)observe(e[t]) }; var St = He.optionMergeStrategies; function mergeData(e, t) { if (!t) return e; for (var n, r, i, o = ct ? Z()(t) : te()(t), a = 0; a < o.length; a++)"__ob__" !== (n = o[a]) && (r = e[n], i = t[n], hasOwn(e, n) ? r !== i && isPlainObject(r) && isPlainObject(i) && mergeData(r, i) : set(e, n, i)); return e } function mergeDataOrFn(e, t, n) { return n ? function mergedInstanceDataFn() { var r = "function" == typeof t ? t.call(n, n) : t, i = "function" == typeof e ? e.call(n, n) : e; return r ? mergeData(r, i) : i } : t ? e ? function mergedDataFn() { return mergeData("function" == typeof t ? t.call(this, this) : t, "function" == typeof e ? e.call(this, this) : e) } : t : e } function mergeHook(e, t) { var n = t ? e ? oe()(e).call(e, t) : _e()(t) ? t : [t] : e; return n ? function dedupeHooks(e) { for (var t = [], n = 0; n < e.length; n++)-1 === he()(t).call(t, e[n]) && t.push(e[n]); return t }(n) : n } function mergeAssets(e, t, n, r) { var i = me()(e || null); return t ? extend(i, t) : i } St.data = function (e, t, n) { return n ? mergeDataOrFn(e, t, n) : t && "function" != typeof t ? e : mergeDataOrFn(e, t) }, B()(qe).call(qe, function (e) { St[e] = mergeHook }), B()(Ue).call(Ue, function (e) { St[e + "s"] = mergeAssets }), St.watch = function (e, t, n, r) { if (e === it && (e = void 0), t === it && (t = void 0), !t) return me()(e || null); if (!e) return t; var i = {}; for (var o in extend(i, e), t) { var a = i[o], s = t[o]; a && !_e()(a) && (a = [a]), i[o] = a ? oe()(a).call(a, s) : _e()(s) ? s : [s] } return i }, St.props = St.methods = St.inject = St.computed = function (e, t, n, r) { if (!e) return t; var i = me()(null); return extend(i, e), t && extend(i, t), i }, St.provide = mergeDataOrFn; var kt = function defaultStrat(e, t) { return void 0 === t ? e : t }; function mergeOptions(e, t, n) { if ("function" == typeof t && (t = t.options), function normalizeProps(e, t) { var n = e.props; if (n) { var r, i, o = {}; if (_e()(n)) for (r = n.length; r--;)"string" == typeof (i = n[r]) && (o[De(i)] = { type: null }); else if (isPlainObject(n)) for (var a in n) i = n[a], o[De(a)] = isPlainObject(i) ? i : { type: i }; e.props = o } }(t), function normalizeInject(e, t) { var n = e.inject; if (n) { var r = e.inject = {}; if (_e()(n)) for (var i = 0; i < n.length; i++)r[n[i]] = { from: n[i] }; else if (isPlainObject(n)) for (var o in n) { var a = n[o]; r[o] = isPlainObject(a) ? extend({ from: o }, a) : { from: a } } } }(t), function normalizeDirectives(e) { var t = e.directives; if (t) for (var n in t) { var r = t[n]; "function" == typeof r && (t[n] = { bind: r, update: r }) } }(t), !t._base && (t.extends && (e = mergeOptions(e, t.extends, n)), t.mixins)) for (var r = 0, i = t.mixins.length; r < i; r++)e = mergeOptions(e, t.mixins[r], n); var o, a = {}; for (o in e) mergeField(o); for (o in t) hasOwn(e, o) || mergeField(o); function mergeField(r) { var i = St[r] || kt; a[r] = i(e[r], t[r], n, r) } return a } function resolveAsset(e, t, n, r) { if ("string" == typeof n) { var i = e[t]; if (hasOwn(i, n)) return i[n]; var o = De(n); if (hasOwn(i, o)) return i[o]; var a = Fe(o); return hasOwn(i, a) ? i[a] : i[n] || i[o] || i[a] } } function validateProp(e, t, n, r) { var i = t[e], o = !hasOwn(n, e), a = n[e], s = getTypeIndex(Boolean, i.type); if (s > -1) if (o && !hasOwn(i, "default")) a = !1; else if ("" === a || a === Ne(e)) { var l = getTypeIndex(String, i.type); (l < 0 || s < l) && (a = !0) } if (void 0 === a) { a = function getPropDefaultValue(e, t, n) { if (!hasOwn(t, "default")) return; var r = t.default; 0; if (e && e.$options.propsData && void 0 === e.$options.propsData[n] && void 0 !== e._props[n]) return e._props[n]; return "function" == typeof r && "Function" !== getType(t.type) ? r.call(e) : r }(r, i, e); var u = xt; toggleObserving(!0), observe(a), toggleObserving(u) } return a } function getType(e) { var t = e && e.toString().match(/^\s*function (\w+)/); return t ? t[1] : "" } function isSameType(e, t) { return getType(e) === getType(t) } function getTypeIndex(e, t) { if (!_e()(t)) return isSameType(t, e) ? 0 : -1; for (var n = 0, r = t.length; n < r; n++)if (isSameType(t[n], e)) return n; return -1 } function handleError(e, t, n) { pushTarget(); try { if (t) for (var r = t; r = r.$parent;) { var i = r.$options.errorCaptured; if (i) for (var o = 0; o < i.length; o++)try { if (!1 === i[o].call(r, e, t, n)) return } catch (e) { globalHandleError(e, r, "errorCaptured hook") } } globalHandleError(e, t, n) } finally { popTarget() } } function invokeWithErrorHandling(e, t, n, r, i) { var o; try { (o = n ? e.apply(t, n) : e.call(t)) && !o._isVue && isPromise(o) && !o._handled && (o.catch(function (e) { return handleError(e, r, i + " (Promise/async)") }), o._handled = !0) } catch (e) { handleError(e, r, i) } return o } function globalHandleError(e, t, n) { if (He.errorHandler) try { return He.errorHandler.call(null, e, t, n) } catch (t) { t !== e && logError(t, null, "config.errorHandler") } logError(e, t, n) } function logError(e, t, n) { if (!Ze && !Ke || "undefined" == typeof console) throw e; console.error(e) } var Tt, Lt = !1, Mt = [], Et = !1; function flushCallbacks() { Et = !1; var e = Ce()(Mt).call(Mt, 0); Mt.length = 0; for (var t = 0; t < e.length; t++)e[t]() } if (void 0 !== E.a && isNative(E.a)) { var At = E.a.resolve(); Tt = function timerFunc() { At.then(flushCallbacks), nt && L()(noop) }, Lt = !0 } else if (Qe || "undefined" == typeof MutationObserver || !isNative(MutationObserver) && "[object MutationObserverConstructor]" !== MutationObserver.toString()) Tt = void 0 !== k.a && isNative(k.a) ? function timerFunc() { k()(flushCallbacks) } : function timerFunc() { L()(flushCallbacks, 0) }; else { var Pt = 1, Rt = new MutationObserver(flushCallbacks), Ot = document.createTextNode(String(Pt)); Rt.observe(Ot, { characterData: !0 }), Tt = function timerFunc() { Pt = (Pt + 1) % 2, Ot.data = String(Pt) }, Lt = !0 } function nextTick(e, t) { var n; if (Mt.push(function () { if (e) try { e.call(t) } catch (e) { handleError(e, t, "nextTick") } else n && n(t) }), Et || (Et = !0, Tt()), !e && void 0 !== E.a) return new E.a(function (e) { n = e }) } var Dt = new ut; function traverse(e) { !function _traverse(e, t) { var n, r; var i = _e()(e); if (!i && !isObject(e) || C()(e) || e instanceof mt) return; if (e.__ob__) { var o = e.__ob__.dep.id; if (t.has(o)) return; t.add(o) } if (i) for (n = e.length; n--;)_traverse(e[n], t); else for (r = te()(e), n = r.length; n--;)_traverse(e[r[n]], t) }(e, Dt), Dt.clear() } var Ft = cached(function (e) { var t = "&" === e.charAt(0), n = "~" === (e = t ? Ce()(e).call(e, 1) : e).charAt(0), r = "!" === (e = n ? Ce()(e).call(e, 1) : e).charAt(0); return { name: e = r ? Ce()(e).call(e, 1) : e, once: n, capture: r, passive: t } }); function createFnInvoker(e, t) { function invoker() { var e = arguments, n = invoker.fns; if (!_e()(n)) return invokeWithErrorHandling(n, null, arguments, t, "v-on handler"); for (var r = Ce()(n).call(n), i = 0; i < r.length; i++)invokeWithErrorHandling(r[i], null, e, t, "v-on handler") } return invoker.fns = e, invoker } function updateListeners(e, t, n, r, i, o) { var a, s, l, u; for (a in e) s = e[a], l = t[a], u = Ft(a), isUndef(s) || (isUndef(l) ? (isUndef(s.fns) && (s = e[a] = createFnInvoker(s, o)), isTrue(u.once) && (s = e[a] = i(u.name, s, u.capture)), n(u.name, s, u.capture, u.passive, u.params)) : s !== l && (l.fns = s, e[a] = l)); for (a in t) isUndef(e[a]) && r((u = Ft(a)).name, t[a], u.capture) } function mergeVNodeHook(e, t, n) { var r; e instanceof mt && (e = e.data.hook || (e.data.hook = {})); var i = e[t]; function wrappedHook() { n.apply(this, arguments), remove(r.fns, wrappedHook) } isUndef(i) ? r = createFnInvoker([wrappedHook]) : isDef(i.fns) && isTrue(i.merged) ? (r = i).fns.push(wrappedHook) : r = createFnInvoker([i, wrappedHook]), r.merged = !0, e[t] = r } function checkProp(e, t, n, r, i) { if (isDef(t)) { if (hasOwn(t, n)) return e[n] = t[n], i || delete t[n], !0; if (hasOwn(t, r)) return e[n] = t[r], i || delete t[r], !0 } return !1 } function normalizeChildren(e) { return isPrimitive(e) ? [createTextVNode(e)] : _e()(e) ? function normalizeArrayChildren(e, t) { var n = []; var r, i, o, a; for (r = 0; r < e.length; r++)isUndef(i = e[r]) || "boolean" == typeof i || (o = n.length - 1, a = n[o], _e()(i) ? i.length > 0 && (isTextNode((i = normalizeArrayChildren(i, (t || "") + "_" + r))[0]) && isTextNode(a) && (n[o] = createTextVNode(a.text + i[0].text), i.shift()), n.push.apply(n, i)) : isPrimitive(i) ? isTextNode(a) ? n[o] = createTextVNode(a.text + i) : "" !== i && n.push(createTextVNode(i)) : isTextNode(i) && isTextNode(a) ? n[o] = createTextVNode(a.text + i.text) : (isTrue(e._isVList) && isDef(i.tag) && isUndef(i.key) && isDef(t) && (i.key = "__vlist" + t + "_" + r + "__"), n.push(i))); return n }(e) : void 0 } function isTextNode(e) { return isDef(e) && isDef(e.text) && function isFalse(e) { return !1 === e }(e.isComment) } function resolveInject(e, t) { if (e) { for (var n = me()(null), r = ct ? Z()(e) : te()(e), i = 0; i < r.length; i++) { var o = r[i]; if ("__ob__" !== o) { for (var a = e[o].from, s = t; s;) { if (s._provided && hasOwn(s._provided, a)) { n[o] = s._provided[a]; break } s = s.$parent } if (!s) if ("default" in e[o]) { var l = e[o].default; n[o] = "function" == typeof l ? l.call(t) : l } else 0 } } return n } } function resolveSlots(e, t) { if (!e || !e.length) return {}; for (var n = {}, r = 0, i = e.length; r < i; r++) { var o = e[r], a = o.data; if (a && a.attrs && a.attrs.slot && delete a.attrs.slot, o.context !== t && o.fnContext !== t || !a || null == a.slot) (n.default || (n.default = [])).push(o); else { var s = a.slot, l = n[s] || (n[s] = []); "template" === o.tag ? l.push.apply(l, o.children || []) : l.push(o) } } for (var u in n) { var c; re()(c = n[u]).call(c, isWhitespace) && delete n[u] } return n } function isWhitespace(e) { return e.isComment && !e.asyncFactory || " " === e.text } function normalizeScopedSlots(e, t, n) { var r, i = te()(t).length > 0, o = e ? !!e.$stable : !i, a = e && e.$key; if (e) { if (e._normalized) return e._normalized; if (o && n && n !== Me && a === n.$key && !i && !n.$hasNormal) return n; for (var s in r = {}, e) e[s] && "$" !== s[0] && (r[s] = normalizeScopedSlot(t, s, e[s])) } else r = {}; for (var l in t) l in r || (r[l] = proxyNormalSlot(t, l)); return e && F()(e) && (e._normalized = r), def(r, "$stable", o), def(r, "$key", a), def(r, "$hasNormal", i), r } function normalizeScopedSlot(e, t, n) { var r = function normalized() { var e = arguments.length ? n.apply(null, arguments) : n({}); return (e = e && "object" === ke()(e) && !_e()(e) ? [e] : normalizeChildren(e)) && (0 === e.length || 1 === e.length && e[0].isComment) ? void 0 : e }; return n.proxy && Q()(e, t, { get: r, enumerable: !0, configurable: !0 }), r } function proxyNormalSlot(e, t) { return function () { return e[t] } } function renderList(e, t) { var n, r, i, o, a; if (_e()(e) || "string" == typeof e) for (n = new Array(e.length), r = 0, i = e.length; r < i; r++)n[r] = t(e[r], r); else if ("number" == typeof e) for (n = new Array(e), r = 0; r < e; r++)n[r] = t(r + 1, r); else if (isObject(e)) if (ct && w()(e)) { n = []; for (var s = _()(e), l = s.next(); !l.done;)n.push(t(l.value, n.length)), l = s.next() } else for (o = te()(e), n = new Array(o.length), r = 0, i = o.length; r < i; r++)a = o[r], n[r] = t(e[a], a, r); return isDef(n) || (n = []), n._isVList = !0, n } function renderSlot(e, t, n, r) { var i, o = this.$scopedSlots[e]; o ? (n = n || {}, r && (n = extend(extend({}, r), n)), i = o(n) || t) : i = this.$slots[e] || t; var a = n && n.slot; return a ? this.$createElement("template", { slot: a }, i) : i } function resolveFilter(e) { return resolveAsset(this.$options, "filters", e) || ze } function isKeyNotMatch(e, t) { return _e()(e) ? -1 === he()(e).call(e, t) : e !== t } function checkKeyCodes(e, t, n, r, i) { var o = He.keyCodes[t] || n; return i && r && !He.keyCodes[t] ? isKeyNotMatch(i, r) : o ? isKeyNotMatch(o, e) : r ? Ne(r) !== t : void 0 } function bindObjectProps(e, t, n, r, i) { if (n) if (isObject(n)) { var o; _e()(n) && (n = toObject(n)); var a = function loop(a) { if ("class" === a || "style" === a || Pe(a)) o = e; else { var s = e.attrs && e.attrs.type; o = r || He.mustUseProp(t, s, a) ? e.domProps || (e.domProps = {}) : e.attrs || (e.attrs = {}) } var l = De(a), u = Ne(a); l in o || u in o || (o[a] = n[a], i && ((e.on || (e.on = {}))["update:" + a] = function (e) { n[a] = e })) }; for (var s in n) a(s) } else; return e } function renderStatic(e, t) { var n = this._staticTrees || (this._staticTrees = []), r = n[e]; return r && !t ? r : (markStatic(r = n[e] = this.$options.staticRenderFns[e].call(this._renderProxy, null, this), "__static__" + e, !1), r) } function markOnce(e, t, n) { return markStatic(e, "__once__" + t + (n ? "_" + n : ""), !0), e } function markStatic(e, t, n) { if (_e()(e)) for (var r = 0; r < e.length; r++)e[r] && "string" != typeof e[r] && markStaticNode(e[r], t + "_" + r, n); else markStaticNode(e, t, n) } function markStaticNode(e, t, n) { e.isStatic = !0, e.key = t, e.isOnce = n } function bindObjectListeners(e, t) { if (t) if (isPlainObject(t)) { var n = e.on = e.on ? extend({}, e.on) : {}; for (var r in t) { var i, o = n[r], a = t[r]; n[r] = o ? oe()(i = []).call(i, o, a) : a } } else; return e } function resolveScopedSlots(e, t, n, r) { t = t || { $stable: !n }; for (var i = 0; i < e.length; i++) { var o = e[i]; _e()(o) ? resolveScopedSlots(o, t, n) : o && (o.proxy && (o.fn.proxy = !0), t[o.key] = o.fn) } return r && (t.$key = r), t } function bindDynamicKeys(e, t) { for (var n = 0; n < t.length; n += 2) { var r = t[n]; "string" == typeof r && r && (e[t[n]] = t[n + 1]) } return e } function prependModifier(e, t) { return "string" == typeof e ? t + e : e } function installRenderHelpers(e) { e._o = markOnce, e._n = toNumber, e._s = toString, e._l = renderList, e._t = renderSlot, e._q = looseEqual, e._i = looseIndexOf, e._m = renderStatic, e._f = resolveFilter, e._k = checkKeyCodes, e._b = bindObjectProps, e._v = createTextVNode, e._e = vt, e._u = resolveScopedSlots, e._g = bindObjectListeners, e._d = bindDynamicKeys, e._p = prependModifier } function FunctionalRenderContext(e, t, n, r, i) { var o, a = this, s = i.options; hasOwn(r, "_uid") ? (o = me()(r))._original = r : (o = r, r = r._original); var l = isTrue(s._compiled), u = !l; this.data = e, this.props = t, this.children = n, this.parent = r, this.listeners = e.on || Me, this.injections = resolveInject(s.inject, r), this.slots = function () { return a.$slots || normalizeScopedSlots(e.scopedSlots, a.$slots = resolveSlots(n, r)), a.$slots }, Q()(this, "scopedSlots", { enumerable: !0, get: function get() { return normalizeScopedSlots(e.scopedSlots, this.slots()) } }), l && (this.$options = s, this.$slots = this.slots(), this.$scopedSlots = normalizeScopedSlots(e.scopedSlots, this.$slots)), s._scopeId ? this._c = function (e, t, n, i) { var a = createElement(o, e, t, n, i, u); return a && !_e()(a) && (a.fnScopeId = s._scopeId, a.fnContext = r), a } : this._c = function (e, t, n, r) { return createElement(o, e, t, n, r, u) } } function cloneAndMarkFunctionalResult(e, t, n, r, i) { var o = cloneVNode(e); return o.fnContext = n, o.fnOptions = r, t.slot && ((o.data || (o.data = {})).slot = t.slot), o } function mergeProps(e, t) { for (var n in t) e[De(n)] = t[n] } installRenderHelpers(FunctionalRenderContext.prototype); var It = { init: function init(e, t) { if (e.componentInstance && !e.componentInstance._isDestroyed && e.data.keepAlive) { var n = e; It.prepatch(n, n) } else { (e.componentInstance = function createComponentInstanceForVnode(e, t) { var n = { _isComponent: !0, _parentVnode: e, parent: t }, r = e.data.inlineTemplate; isDef(r) && (n.render = r.render, n.staticRenderFns = r.staticRenderFns); return new e.componentOptions.Ctor(n) }(e, Ut)).$mount(t ? e.elm : void 0, t) } }, prepatch: function prepatch(e, t) { var n = t.componentOptions; !function updateChildComponent(e, t, n, r, i) { 0; var o = r.data.scopedSlots, a = e.$scopedSlots, s = !!(o && !o.$stable || a !== Me && !a.$stable || o && e.$scopedSlots.$key !== o.$key), l = !!(i || e.$options._renderChildren || s); e.$options._parentVnode = r, e.$vnode = r, e._vnode && (e._vnode.parent = r); if (e.$options._renderChildren = i, e.$attrs = r.data.attrs || Me, e.$listeners = n || Me, t && e.$options.props) { toggleObserving(!1); for (var u = e._props, c = e.$options._propKeys || [], d = 0; d < c.length; d++) { var f = c[d], h = e.$options.props; u[f] = validateProp(f, h, t, e) } toggleObserving(!0), e.$options.propsData = t } n = n || Me; var p = e.$options._parentListeners; e.$options._parentListeners = n, updateComponentListeners(e, n, p), l && (e.$slots = resolveSlots(i, r.context), e.$forceUpdate()); 0 }(t.componentInstance = e.componentInstance, n.propsData, n.listeners, t, n.children) }, insert: function insert(e) { var t = e.context, n = e.componentInstance; n._isMounted || (n._isMounted = !0, callHook(n, "mounted")), e.data.keepAlive && (t._isMounted ? function queueActivatedComponent(e) { e._inactive = !1, Ht.push(e) }(n) : activateChildComponent(n, !0)) }, destroy: function destroy(e) { var t = e.componentInstance; t._isDestroyed || (e.data.keepAlive ? function deactivateChildComponent(e, t) { if (t && (e._directInactive = !0, isInInactiveTree(e))) return; if (!e._inactive) { e._inactive = !0; for (var n = 0; n < e.$children.length; n++)deactivateChildComponent(e.$children[n]); callHook(e, "deactivated") } }(t, !0) : t.$destroy()) } }, Nt = te()(It); function createComponent(e, t, n, r, i) { if (!isUndef(e)) { var o = n.$options._base; if (isObject(e) && (e = o.extend(e)), "function" == typeof e) { var a; if (isUndef(e.cid) && void 0 === (e = function resolveAsyncComponent(e, t) { var n; if (isTrue(e.error) && isDef(e.errorComp)) return e.errorComp; if (isDef(e.resolved)) return e.resolved; var r = jt; r && isDef(e.owners) && -1 === he()(n = e.owners).call(n, r) && e.owners.push(r); if (isTrue(e.loading) && isDef(e.loadingComp)) return e.loadingComp; if (r && !isDef(e.owners)) { var i = e.owners = [r], o = !0, a = null, s = null; r.$on("hook:destroyed", function () { return remove(i, r) }); var l = function forceRender(e) { for (var t = 0, n = i.length; t < n; t++)i[t].$forceUpdate(); e && (i.length = 0, null !== a && (clearTimeout(a), a = null), null !== s && (clearTimeout(s), s = null)) }, u = once(function (n) { e.resolved = ensureCtor(n, t), o ? i.length = 0 : l(!0) }), c = once(function (t) { isDef(e.errorComp) && (e.error = !0, l(!0)) }), d = e(u, c); return isObject(d) && (isPromise(d) ? isUndef(e.resolved) && d.then(u, c) : isPromise(d.component) && (d.component.then(u, c), isDef(d.error) && (e.errorComp = ensureCtor(d.error, t)), isDef(d.loading) && (e.loadingComp = ensureCtor(d.loading, t), 0 === d.delay ? e.loading = !0 : a = L()(function () { a = null, isUndef(e.resolved) && isUndef(e.error) && (e.loading = !0, l(!1)) }, d.delay || 200)), isDef(d.timeout) && (s = L()(function () { s = null, isUndef(e.resolved) && c(null) }, d.timeout)))), o = !1, e.loading ? e.loadingComp : e.resolved } }(a = e, o))) return function createAsyncPlaceholder(e, t, n, r, i) { var o = vt(); return o.asyncFactory = e, o.asyncMeta = { data: t, context: n, children: r, tag: i }, o }(a, t, n, r, i); t = t || {}, resolveConstructorOptions(e), isDef(t.model) && function transformModel(e, t) { var n = e.model && e.model.prop || "value", r = e.model && e.model.event || "input"; (t.attrs || (t.attrs = {}))[n] = t.model.value; var i = t.on || (t.on = {}), o = i[r], a = t.model.callback; if (isDef(o)) { var s; if (_e()(o) ? -1 === he()(o).call(o, a) : o !== a) i[r] = oe()(s = [a]).call(s, o) } else i[r] = a }(e.options, t); var s = function extractPropsFromVNodeData(e, t, n) { var r = t.options.props; if (!isUndef(r)) { var i = {}, o = e.attrs, a = e.props; if (isDef(o) || isDef(a)) for (var s in r) { var l = Ne(s); checkProp(i, a, s, l, !0) || checkProp(i, o, s, l, !1) } return i } }(t, e); if (isTrue(e.options.functional)) return function createFunctionalComponent(e, t, n, r, i) { var o = e.options, a = {}, s = o.props; if (isDef(s)) for (var l in s) a[l] = validateProp(l, s, t || Me); else isDef(n.attrs) && mergeProps(a, n.attrs), isDef(n.props) && mergeProps(a, n.props); var u = new FunctionalRenderContext(n, a, i, r, e), c = o.render.call(null, u._c, u); if (c instanceof mt) return cloneAndMarkFunctionalResult(c, n, u.parent, o); if (_e()(c)) { for (var d = normalizeChildren(c) || [], f = new Array(d.length), h = 0; h < d.length; h++)f[h] = cloneAndMarkFunctionalResult(d[h], n, u.parent, o); return f } }(e, s, t, n, r); var l = t.on; if (t.on = t.nativeOn, isTrue(e.options.abstract)) { var u = t.slot; t = {}, u && (t.slot = u) } !function installComponentHooks(e) { for (var t = e.hook || (e.hook = {}), n = 0; n < Nt.length; n++) { var r = Nt[n], i = t[r], o = It[r]; i === o || i && i._merged || (t[r] = i ? mergeHook$1(o, i) : o) } }(t); var c = e.options.name || i; return new mt("vue-component-" + e.cid + (c ? "-" + c : ""), t, void 0, void 0, void 0, n, { Ctor: e, propsData: s, listeners: l, tag: i, children: r }, a) } } } function mergeHook$1(e, t) { var n = function merged(n, r) { e(n, r), t(n, r) }; return n._merged = !0, n } var $t = 1, Bt = 2; function createElement(e, t, n, r, i, o) { return (_e()(n) || isPrimitive(n)) && (i = r, r = n, n = void 0), isTrue(o) && (i = Bt), function _createElement(e, t, n, r, i) { if (isDef(n) && isDef(n.__ob__)) return vt(); isDef(n) && isDef(n.is) && (t = n.is); if (!t) return vt(); 0; _e()(r) && "function" == typeof r[0] && ((n = n || {}).scopedSlots = { default: r[0] }, r.length = 0); i === Bt ? r = normalizeChildren(r) : i === $t && (r = function simpleNormalizeChildren(e) { for (var t = 0; t < e.length; t++)if (_e()(e[t])) return oe()(Array.prototype).apply([], e); return e }(r)); var o, a; if ("string" == typeof t) { var s; a = e.$vnode && e.$vnode.ns || He.getTagNamespace(t), o = He.isReservedTag(t) ? new mt(He.parsePlatformTagName(t), n, r, void 0, void 0, e) : n && n.pre || !isDef(s = resolveAsset(e.$options, "components", t)) ? new mt(t, n, r, void 0, void 0, e) : createComponent(s, n, e, r, t) } else o = createComponent(t, n, e, r); return _e()(o) ? o : isDef(o) ? (isDef(a) && function applyNS(e, t, n) { e.ns = t; "foreignObject" === e.tag && (t = void 0, n = !0); if (isDef(e.children)) for (var r = 0, i = e.children.length; r < i; r++) { var o = e.children[r]; isDef(o.tag) && (isUndef(o.ns) || isTrue(n) && "svg" !== o.tag) && applyNS(o, t, n) } }(o, a), isDef(n) && function registerDeepBindings(e) { isObject(e.style) && traverse(e.style); isObject(e.class) && traverse(e.class) }(n), o) : vt() }(e, t, n, r, i) } var zt, jt = null; function ensureCtor(e, t) { return (e.__esModule || ct && "Module" === e[v.a]) && (e = e.default), isObject(e) ? t.extend(e) : e } function isAsyncPlaceholder(e) { return e.isComment && e.asyncFactory } function getFirstComponentChild(e) { if (_e()(e)) for (var t = 0; t < e.length; t++) { var n = e[t]; if (isDef(n) && (isDef(n.componentOptions) || isAsyncPlaceholder(n))) return n } } function add(e, t) { zt.$on(e, t) } function remove$1(e, t) { zt.$off(e, t) } function createOnceHandler(e, t) { var n = zt; return function onceHandler() { null !== t.apply(null, arguments) && n.$off(e, onceHandler) } } function updateComponentListeners(e, t, n) { zt = e, updateListeners(t, n || {}, add, remove$1, createOnceHandler, e), zt = void 0 } var Ut = null; function setActiveInstance(e) { var t = Ut; return Ut = e, function () { Ut = t } } function isInInactiveTree(e) { for (; e && (e = e.$parent);)if (e._inactive) return !0; return !1 } function activateChildComponent(e, t) { if (t) { if (e._directInactive = !1, isInInactiveTree(e)) return } else if (e._directInactive) return; if (e._inactive || null === e._inactive) { e._inactive = !1; for (var n = 0; n < e.$children.length; n++)activateChildComponent(e.$children[n]); callHook(e, "activated") } } function callHook(e, t) { pushTarget(); var n = e.$options[t], r = t + " hook"; if (n) for (var i = 0, o = n.length; i < o; i++)invokeWithErrorHandling(n[i], e, null, e, r); e._hasHookEvent && e.$emit("hook:" + t), popTarget() } var qt = [], Ht = [], Vt = {}, Gt = !1, Wt = !1, Yt = 0; var Zt = 0, Kt = m.a; if (Ze && !Qe) { var Xt = window.performance; Xt && "function" == typeof Xt.now && Kt() > document.createEvent("Event").timeStamp && (Kt = function getNow() { return Xt.now() }) } function flushSchedulerQueue() { var e, t; for (Zt = Kt(), Wt = !0, q()(qt).call(qt, function (e, t) { return e.id - t.id }), Yt = 0; Yt < qt.length; Yt++)(e = qt[Yt]).before && e.before(), t = e.id, Vt[t] = null, e.run(); var n = Ce()(Ht).call(Ht), r = Ce()(qt).call(qt); !function resetSchedulerState() { Yt = qt.length = Ht.length = 0, Vt = {}, Gt = Wt = !1 }(), function callActivatedHooks(e) { for (var t = 0; t < e.length; t++)e[t]._inactive = !0, activateChildComponent(e[t], !0) }(n), function callUpdatedHooks(e) { var t = e.length; for (; t--;) { var n = e[t], r = n.vm; r._watcher === n && r._isMounted && !r._isDestroyed && callHook(r, "updated") } }(r), lt && He.devtools && lt.emit("flush") } var Jt = 0, Qt = function Watcher(e, t, n, r, i) { this.vm = e, i && (e._watcher = this), e._watchers.push(this), r ? (this.deep = !!r.deep, this.user = !!r.user, this.lazy = !!r.lazy, this.sync = !!r.sync, this.before = r.before) : this.deep = this.user = this.lazy = this.sync = !1, this.cb = n, this.id = ++Jt, this.active = !0, this.dirty = this.lazy, this.deps = [], this.newDeps = [], this.depIds = new ut, this.newDepIds = new ut, this.expression = "", "function" == typeof t ? this.getter = t : (this.getter = function parsePath(e) { if (!Ge.test(e)) { var t = e.split("."); return function (e) { for (var n = 0; n < t.length; n++) { if (!e) return; e = e[t[n]] } return e } } }(t), this.getter || (this.getter = noop)), this.value = this.lazy ? void 0 : this.get() }; Qt.prototype.get = function get() { var e; pushTarget(this); var t = this.vm; try { e = this.getter.call(t, t) } catch (e) { if (!this.user) throw e; handleError(e, t, 'getter for watcher "' + this.expression + '"') } finally { this.deep && traverse(e), popTarget(), this.cleanupDeps() } return e }, Qt.prototype.addDep = function addDep(e) { var t = e.id; this.newDepIds.has(t) || (this.newDepIds.add(t), this.newDeps.push(e), this.depIds.has(t) || e.addSub(this)) }, Qt.prototype.cleanupDeps = function cleanupDeps() { for (var e = this.deps.length; e--;) { var t = this.deps[e]; this.newDepIds.has(t.id) || t.removeSub(this) } var n = this.depIds; this.depIds = this.newDepIds, this.newDepIds = n, this.newDepIds.clear(), n = this.deps, this.deps = this.newDeps, this.newDeps = n, this.newDeps.length = 0 }, Qt.prototype.update = function update() { this.lazy ? this.dirty = !0 : this.sync ? this.run() : function queueWatcher(e) { var t = e.id; if (null == Vt[t]) { if (Vt[t] = !0, Wt) { for (var n = qt.length - 1; n > Yt && qt[n].id > e.id;)n--; de()(qt).call(qt, n + 1, 0, e) } else qt.push(e); Gt || (Gt = !0, nextTick(flushSchedulerQueue)) } }(this) }, Qt.prototype.run = function run() { if (this.active) { var e = this.get(); if (e !== this.value || isObject(e) || this.deep) { var t = this.value; if (this.value = e, this.user) try { this.cb.call(this.vm, e, t) } catch (e) { handleError(e, this.vm, 'callback for watcher "' + this.expression + '"') } else this.cb.call(this.vm, e, t) } } }, Qt.prototype.evaluate = function evaluate() { this.value = this.get(), this.dirty = !1 }, Qt.prototype.depend = function depend() { for (var e = this.deps.length; e--;)this.deps[e].depend() }, Qt.prototype.teardown = function teardown() { if (this.active) { this.vm._isBeingDestroyed || remove(this.vm._watchers, this); for (var e = this.deps.length; e--;)this.deps[e].removeSub(this); this.active = !1 } }; var en = { enumerable: !0, configurable: !0, get: noop, set: noop }; function proxy(e, t, n) { en.get = function proxyGetter() { return this[t][n] }, en.set = function proxySetter(e) { this[t][n] = e }, Q()(e, n, en) } function initState(e) { e._watchers = []; var t = e.$options; t.props && function initProps(e, t) { var n = e.$options.propsData || {}, r = e._props = {}, i = e.$options._propKeys = []; e.$parent && toggleObserving(!1); var o = function loop(o) { i.push(o); var a = validateProp(o, t, n, e); defineReactive$$1(r, o, a), o in e || proxy(e, "_props", o) }; for (var a in t) o(a); toggleObserving(!0) }(e, t.props), t.methods && function initMethods(e, t) { e.$options.props; for (var n in t) e[n] = "function" != typeof t[n] ? noop : $e(t[n], e) }(e, t.methods), t.data ? function initData(e) { var t = e.$options.data; isPlainObject(t = e._data = "function" == typeof t ? function getData(e, t) { pushTarget(); try { return e.call(t, t) } catch (e) { return handleError(e, t, "data()"), {} } finally { popTarget() } }(t, e) : t || {}) || (t = {}); var n = te()(t), r = e.$options.props, i = (e.$options.methods, n.length); for (; i--;) { var o = n[i]; 0, r && hasOwn(r, o) || (void 0, 36 !== (a = (o + "").charCodeAt(0)) && 95 !== a && proxy(e, "_data", o)) } var a; observe(t, !0) }(e) : observe(e._data = {}, !0), t.computed && function initComputed(e, t) { var n = e._computedWatchers = me()(null), r = st(); for (var i in t) { var o = t[i], a = "function" == typeof o ? o : o.get; 0, r || (n[i] = new Qt(e, a || noop, noop, tn)), i in e || defineComputed(e, i, o) } }(e, t.computed), t.watch && t.watch !== it && function initWatch(e, t) { for (var n in t) { var r = t[n]; if (_e()(r)) for (var i = 0; i < r.length; i++)createWatcher(e, n, r[i]); else createWatcher(e, n, r) } }(e, t.watch) } var tn = { lazy: !0 }; function defineComputed(e, t, n) { var r = !st(); "function" == typeof n ? (en.get = r ? createComputedGetter(t) : createGetterInvoker(n), en.set = noop) : (en.get = n.get ? r && !1 !== n.cache ? createComputedGetter(t) : createGetterInvoker(n.get) : noop, en.set = n.set || noop), Q()(e, t, en) } function createComputedGetter(e) { return function computedGetter() { var t = this._computedWatchers && this._computedWatchers[e]; if (t) return t.dirty && t.evaluate(), ht.target && t.depend(), t.value } } function createGetterInvoker(e) { return function computedGetter() { return e.call(this, this) } } function createWatcher(e, t, n, r) { return isPlainObject(n) && (r = n, n = n.handler), "string" == typeof n && (n = e[n]), e.$watch(t, n, r) } var nn = 0; function resolveConstructorOptions(e) { var t = e.options; if (e.super) { var n = resolveConstructorOptions(e.super); if (n !== e.superOptions) { e.superOptions = n; var r = function resolveModifiedOptions(e) { var t, n = e.options, r = e.sealedOptions; for (var i in n) n[i] !== r[i] && (t || (t = {}), t[i] = n[i]); return t }(e); r && extend(e.extendOptions, r), (t = e.options = mergeOptions(n, e.extendOptions)).name && (t.components[t.name] = e) } } return t } function Vue(e) { this._init(e) } function initExtend(e) { e.cid = 0; var t = 1; e.extend = function (e) { e = e || {}; var n = this, r = n.cid, i = e._Ctor || (e._Ctor = {}); if (i[r]) return i[r]; var o = e.name || n.options.name; var a = function VueComponent(e) { this._init(e) }; return (a.prototype = me()(n.prototype)).constructor = a, a.cid = t++, a.options = mergeOptions(n.options, e), a.super = n, a.options.props && function initProps$1(e) { var t = e.options.props; for (var n in t) proxy(e.prototype, "_props", n) }(a), a.options.computed && function initComputed$1(e) { var t = e.options.computed; for (var n in t) defineComputed(e.prototype, n, t[n]) }(a), a.extend = n.extend, a.mixin = n.mixin, a.use = n.use, B()(Ue).call(Ue, function (e) { a[e] = n[e] }), o && (a.options.components[o] = a), a.superOptions = n.options, a.extendOptions = e, a.sealedOptions = extend({}, a.options), i[r] = a, a } } function getComponentName(e) { return e && (e.Ctor.options.name || e.tag) } function matches(e, t) { return _e()(e) ? he()(e).call(e, t) > -1 : "string" == typeof e ? he()(n = e.split(",")).call(n, t) > -1 : !!isRegExp(e) && e.test(t); var n } function pruneCache(e, t) { var n = e.cache, r = h()(e), i = e._vnode; for (var o in n) { var a = n[o]; if (a) { var s = getComponentName(a.componentOptions); s && !t(s) && pruneCacheEntry(n, o, r, i) } } } function pruneCacheEntry(e, t, n, r) { var i = e[t]; !i || r && i.tag === r.tag || i.componentInstance.$destroy(), e[t] = null, remove(n, t) } !function initMixin(e) { e.prototype._init = function (e) { var t = this; t._uid = nn++, t._isVue = !0, e && e._isComponent ? function initInternalComponent(e, t) { var n = e.$options = me()(e.constructor.options), r = t._parentVnode; n.parent = t.parent, n._parentVnode = r; var i = r.componentOptions; n.propsData = i.propsData, n._parentListeners = i.listeners, n._renderChildren = i.children, n._componentTag = i.tag, t.render && (n.render = t.render, n.staticRenderFns = t.staticRenderFns) }(t, e) : t.$options = mergeOptions(resolveConstructorOptions(t.constructor), e || {}, t), t._renderProxy = t, t._self = t, function initLifecycle(e) { var t = e.$options, n = t.parent; if (n && !t.abstract) { for (; n.$options.abstract && n.$parent;)n = n.$parent; n.$children.push(e) } e.$parent = n, e.$root = n ? n.$root : e, e.$children = [], e.$refs = {}, e._watcher = null, e._inactive = null, e._directInactive = !1, e._isMounted = !1, e._isDestroyed = !1, e._isBeingDestroyed = !1 }(t), function initEvents(e) { e._events = me()(null), e._hasHookEvent = !1; var t = e.$options._parentListeners; t && updateComponentListeners(e, t) }(t), function initRender(e) { e._vnode = null, e._staticTrees = null; var t = e.$options, n = e.$vnode = t._parentVnode, r = n && n.context; e.$slots = resolveSlots(t._renderChildren, r), e.$scopedSlots = Me, e._c = function (t, n, r, i) { return createElement(e, t, n, r, i, !1) }, e.$createElement = function (t, n, r, i) { return createElement(e, t, n, r, i, !0) }; var i = n && n.data; defineReactive$$1(e, "$attrs", i && i.attrs || Me, null, !0), defineReactive$$1(e, "$listeners", t._parentListeners || Me, null, !0) }(t), callHook(t, "beforeCreate"), function initInjections(e) { var t, n = resolveInject(e.$options.inject, e); n && (toggleObserving(!1), B()(t = te()(n)).call(t, function (t) { defineReactive$$1(e, t, n[t]) }), toggleObserving(!0)) }(t), initState(t), function initProvide(e) { var t = e.$options.provide; t && (e._provided = "function" == typeof t ? t.call(e) : t) }(t), callHook(t, "created"), t.$options.el && t.$mount(t.$options.el) } }(Vue), function stateMixin(e) { var t = { get: function () { return this._data } }, n = { get: function () { return this._props } }; Q()(e.prototype, "$data", t), Q()(e.prototype, "$props", n), e.prototype.$set = set, e.prototype.$delete = del, e.prototype.$watch = function (e, t, n) { if (isPlainObject(t)) return createWatcher(this, e, t, n); (n = n || {}).user = !0; var r = new Qt(this, e, t, n); if (n.immediate) try { t.call(this, r.value) } catch (e) { handleError(e, this, 'callback for immediate watcher "' + r.expression + '"') } return function unwatchFn() { r.teardown() } } }(Vue), function eventsMixin(e) { var t = /^hook:/; e.prototype.$on = function (e, n) { var r = this; if (_e()(e)) for (var i = 0, o = e.length; i < o; i++)r.$on(e[i], n); else (r._events[e] || (r._events[e] = [])).push(n), t.test(e) && (r._hasHookEvent = !0); return r }, e.prototype.$once = function (e, t) { var n = this; function on() { n.$off(e, on), t.apply(n, arguments) } return on.fn = t, n.$on(e, on), n }, e.prototype.$off = function (e, t) { var n = this; if (!arguments.length) return n._events = me()(null), n; if (_e()(e)) { for (var r = 0, i = e.length; r < i; r++)n.$off(e[r], t); return n } var o, a = n._events[e]; if (!a) return n; if (!t) return n._events[e] = null, n; for (var s = a.length; s--;)if ((o = a[s]) === t || o.fn === t) { de()(a).call(a, s, 1); break } return n }, e.prototype.$emit = function (e) { var t = this._events[e]; if (t) { t = t.length > 1 ? toArray(t) : t; for (var n = toArray(arguments, 1), r = 'event handler for "' + e + '"', i = 0, o = t.length; i < o; i++)invokeWithErrorHandling(t[i], this, n, this, r) } return this } }(Vue), function lifecycleMixin(e) { e.prototype._update = function (e, t) { var n = this, r = n.$el, i = n._vnode, o = setActiveInstance(n); n._vnode = e, n.$el = i ? n.__patch__(i, e) : n.__patch__(n.$el, e, t, !1), o(), r && (r.__vue__ = null), n.$el && (n.$el.__vue__ = n), n.$vnode && n.$parent && n.$vnode === n.$parent._vnode && (n.$parent.$el = n.$el) }, e.prototype.$forceUpdate = function () { this._watcher && this._watcher.update() }, e.prototype.$destroy = function () { var e = this; if (!e._isBeingDestroyed) { callHook(e, "beforeDestroy"), e._isBeingDestroyed = !0; var t = e.$parent; !t || t._isBeingDestroyed || e.$options.abstract || remove(t.$children, e), e._watcher && e._watcher.teardown(); for (var n = e._watchers.length; n--;)e._watchers[n].teardown(); e._data.__ob__ && e._data.__ob__.vmCount--, e._isDestroyed = !0, e.__patch__(e._vnode, null), callHook(e, "destroyed"), e.$off(), e.$el && (e.$el.__vue__ = null), e.$vnode && (e.$vnode.parent = null) } } }(Vue), function renderMixin(e) { installRenderHelpers(e.prototype), e.prototype.$nextTick = function (e) { return nextTick(e, this) }, e.prototype._render = function () { var e, t = this, n = t.$options, r = n.render, i = n._parentVnode; i && (t.$scopedSlots = normalizeScopedSlots(i.data.scopedSlots, t.$slots, t.$scopedSlots)), t.$vnode = i; try { jt = t, e = r.call(t._renderProxy, t.$createElement) } catch (n) { handleError(n, t, "render"), e = t._vnode } finally { jt = null } return _e()(e) && 1 === e.length && (e = e[0]), e instanceof mt || (e = vt()), e.parent = i, e } }(Vue); var rn = [String, RegExp, Array], an = { KeepAlive: { name: "keep-alive", abstract: !0, props: { include: rn, exclude: rn, max: [String, Number] }, created: function created() { this.cache = me()(null), this.keys = [] }, destroyed: function destroyed() { for (var e in this.cache) pruneCacheEntry(this.cache, e, h()(this)) }, mounted: function mounted() { var e = this; this.$watch("include", function (t) { pruneCache(e, function (e) { return matches(t, e) }) }), this.$watch("exclude", function (t) { pruneCache(e, function (e) { return !matches(t, e) }) }) }, render: function render() { var e = this.$slots.default, t = getFirstComponentChild(e), n = t && t.componentOptions; if (n) { var r = getComponentName(n), i = this.include, o = this.exclude; if (i && (!r || !matches(i, r)) || o && r && matches(o, r)) return t; var a = this.cache, s = h()(this), l = null == t.key ? n.Ctor.cid + (n.tag ? "::" + n.tag : "") : t.key; a[l] ? (t.componentInstance = a[l].componentInstance, remove(s, l), s.push(l)) : (a[l] = t, s.push(l), this.max && s.length > d()(this.max) && pruneCacheEntry(a, s[0], s, this._vnode)), t.data.keepAlive = !0 } return t || e && e[0] } } }; !function initGlobalAPI(e) { var t = { get: function () { return He } }; Q()(e, "config", t), e.util = { warn: dt, extend: extend, mergeOptions: mergeOptions, defineReactive: defineReactive$$1 }, e.set = set, e.delete = del, e.nextTick = nextTick, e.observable = function (e) { return observe(e), e }, e.options = me()(null), B()(Ue).call(Ue, function (t) { e.options[t + "s"] = me()(null) }), e.options._base = e, extend(e.options.components, an), function initUse(e) { e.use = function (e) { var t = this._installedPlugins || (this._installedPlugins = []); if (he()(t).call(t, e) > -1) return this; var n = toArray(arguments, 1); return n.unshift(this), "function" == typeof e.install ? e.install.apply(e, n) : "function" == typeof e && e.apply(null, n), t.push(e), this } }(e), function initMixin$1(e) { e.mixin = function (e) { return this.options = mergeOptions(this.options, e), this } }(e), initExtend(e), function initAssetRegisters(e) { B()(Ue).call(Ue, function (t) { e[t] = function (e, n) { return n ? ("component" === t && isPlainObject(n) && (n.name = n.name || e, n = this.options._base.extend(n)), "directive" === t && "function" == typeof n && (n = { bind: n, update: n }), this.options[t + "s"][e] = n, n) : this.options[t + "s"][e] } }) }(e) }(Vue), Q()(Vue.prototype, "$isServer", { get: st }), Q()(Vue.prototype, "$ssrContext", { get: function get() { return this.$vnode && this.$vnode.ssrContext } }), Q()(Vue, "FunctionalRenderContext", { value: FunctionalRenderContext }), Vue.version = "2.6.11"; var sn = makeMap("style,class"), ln = makeMap("input,textarea,option,select,progress"), un = function mustUseProp(e, t, n) { return "value" === n && ln(e) && "button" !== t || "selected" === n && "option" === e || "checked" === n && "input" === e || "muted" === n && "video" === e }, cn = makeMap("contenteditable,draggable,spellcheck"), dn = makeMap("events,caret,typing,plaintext-only"), fn = function convertEnumeratedValue(e, t) { return vn(t) || "false" === t ? "false" : "contenteditable" === e && dn(t) ? t : "true" }, hn = makeMap("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"), pn = "http://www.w3.org/1999/xlink", mn = function isXlink(e) { return ":" === e.charAt(5) && "xlink" === Ce()(e).call(e, 0, 5) }, gn = function getXlinkProp(e) { return mn(e) ? Ce()(e).call(e, 6, e.length) : "" }, vn = function isFalsyAttrValue(e) { return null == e || !1 === e }; function genClassForVnode(e) { for (var t = e.data, n = e, r = e; isDef(r.componentInstance);)(r = r.componentInstance._vnode) && r.data && (t = mergeClassData(r.data, t)); for (; isDef(n = n.parent);)n && n.data && (t = mergeClassData(t, n.data)); return function renderClass(e, t) { if (isDef(e) || isDef(t)) return concat(e, stringifyClass(t)); return "" }(t.staticClass, t.class) } function mergeClassData(e, t) { return { staticClass: concat(e.staticClass, t.staticClass), class: isDef(e.class) ? [e.class, t.class] : t.class } } function concat(e, t) { return e ? t ? e + " " + t : e : t || "" } function stringifyClass(e) { return _e()(e) ? function stringifyArray(e) { for (var t, n = "", r = 0, i = e.length; r < i; r++)isDef(t = stringifyClass(e[r])) && "" !== t && (n && (n += " "), n += t); return n }(e) : isObject(e) ? function stringifyObject(e) { var t = ""; for (var n in e) e[n] && (t && (t += " "), t += n); return t }(e) : "string" == typeof e ? e : "" } var yn = { svg: "http://www.w3.org/2000/svg", math: "http://www.w3.org/1998/Math/MathML" }, _n = makeMap("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"), bn = makeMap("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view", !0), wn = function isReservedTag(e) { return _n(e) || bn(e) }; function getTagNamespace(e) { return bn(e) ? "svg" : "math" === e ? "math" : void 0 } var xn = me()(null); var Cn = makeMap("text,number,password,search,email,tel,url"); function query(e) { if ("string" == typeof e) { var t = document.querySelector(e); return t || document.createElement("div") } return e } var Sn = Le()({ createElement: function createElement$1(e, t) { var n = document.createElement(e); return "select" !== e ? n : (t.data && t.data.attrs && void 0 !== t.data.attrs.multiple && n.setAttribute("multiple", "multiple"), n) }, createElementNS: function createElementNS(e, t) { return document.createElementNS(yn[e], t) }, createTextNode: function createTextNode(e) { return document.createTextNode(e) }, createComment: function createComment(e) { return document.createComment(e) }, insertBefore: function insertBefore(e, t, n) { e.insertBefore(t, n) }, removeChild: function removeChild(e, t) { e.removeChild(t) }, appendChild: function appendChild(e, t) { e.appendChild(t) }, parentNode: function parentNode(e) { return e.parentNode }, nextSibling: function nextSibling(e) { return e.nextSibling }, tagName: function tagName(e) { return e.tagName }, setTextContent: function setTextContent(e, t) { e.textContent = t }, setStyleScope: function setStyleScope(e, t) { e.setAttribute(t, "") } }), kn = { create: function create(e, t) { registerRef(t) }, update: function update(e, t) { e.data.ref !== t.data.ref && (registerRef(e, !0), registerRef(t)) }, destroy: function destroy(e) { registerRef(e, !0) } }; function registerRef(e, t) { var n = e.data.ref; if (isDef(n)) { var r, i = e.context, o = e.componentInstance || e.elm, a = i.$refs; if (t) _e()(a[n]) ? remove(a[n], o) : a[n] === o && (a[n] = void 0); else if (e.data.refInFor) _e()(a[n]) ? he()(r = a[n]).call(r, o) < 0 && a[n].push(o) : a[n] = [o]; else a[n] = o } } var Tn = new mt("", {}, []), Ln = ["create", "activate", "update", "remove", "destroy"]; function sameVnode(e, t) { return e.key === t.key && (e.tag === t.tag && e.isComment === t.isComment && isDef(e.data) === isDef(t.data) && function sameInputType(e, t) { if ("input" !== e.tag) return !0; var n, r = isDef(n = e.data) && isDef(n = n.attrs) && n.type, i = isDef(n = t.data) && isDef(n = n.attrs) && n.type; return r === i || Cn(r) && Cn(i) }(e, t) || isTrue(e.isAsyncPlaceholder) && e.asyncFactory === t.asyncFactory && isUndef(t.asyncFactory.error)) } function createKeyToOldIdx(e, t, n) { var r, i, o = {}; for (r = t; r <= n; ++r)isDef(i = e[r].key) && (o[i] = r); return o } var Mn = { create: updateDirectives, update: updateDirectives, destroy: function unbindDirectives(e) { updateDirectives(e, Tn) } }; function updateDirectives(e, t) { (e.data.directives || t.data.directives) && function _update(e, t) { var n, r, i, o = e === Tn, a = t === Tn, s = normalizeDirectives$1(e.data.directives, e.context), l = normalizeDirectives$1(t.data.directives, t.context), u = [], c = []; for (n in l) r = s[n], i = l[n], r ? (i.oldValue = r.value, i.oldArg = r.arg, callHook$1(i, "update", t, e), i.def && i.def.componentUpdated && c.push(i)) : (callHook$1(i, "bind", t, e), i.def && i.def.inserted && u.push(i)); if (u.length) { var d = function callInsert() { for (var n = 0; n < u.length; n++)callHook$1(u[n], "inserted", t, e) }; o ? mergeVNodeHook(t, "insert", d) : d() } c.length && mergeVNodeHook(t, "postpatch", function () { for (var n = 0; n < c.length; n++)callHook$1(c[n], "componentUpdated", t, e) }); if (!o) for (n in s) l[n] || callHook$1(s[n], "unbind", e, e, a) }(e, t) } var En = me()(null); function normalizeDirectives$1(e, t) { var n, r, i = me()(null); if (!e) return i; for (n = 0; n < e.length; n++)(r = e[n]).modifiers || (r.modifiers = En), i[getRawDirName(r)] = r, r.def = resolveAsset(t.$options, "directives", r.name); return i } function getRawDirName(e) { return e.rawName || e.name + "." + te()(e.modifiers || {}).join(".") } function callHook$1(e, t, n, r, i) { var o = e.def && e.def[t]; if (o) try { o(n.elm, e, n, r, i) } catch (r) { handleError(r, n.context, "directive " + e.name + " " + t + " hook") } } var An = [kn, Mn]; function updateAttrs(e, t) { var n = t.componentOptions; if (!(isDef(n) && !1 === n.Ctor.options.inheritAttrs || isUndef(e.data.attrs) && isUndef(t.data.attrs))) { var r, i, o = t.elm, a = e.data.attrs || {}, s = t.data.attrs || {}; for (r in isDef(s.__ob__) && (s = t.data.attrs = extend({}, s)), s) i = s[r], a[r] !== i && setAttr(o, r, i); for (r in (Qe || tt) && s.value !== a.value && setAttr(o, "value", s.value), a) isUndef(s[r]) && (mn(r) ? o.removeAttributeNS(pn, gn(r)) : cn(r) || o.removeAttribute(r)) } } function setAttr(e, t, n) { var r; he()(r = e.tagName).call(r, "-") > -1 ? baseSetAttr(e, t, n) : hn(t) ? vn(n) ? e.removeAttribute(t) : (n = "allowfullscreen" === t && "EMBED" === e.tagName ? "true" : t, e.setAttribute(t, n)) : cn(t) ? e.setAttribute(t, fn(t, n)) : mn(t) ? vn(n) ? e.removeAttributeNS(pn, gn(t)) : e.setAttributeNS(pn, t, n) : baseSetAttr(e, t, n) } function baseSetAttr(e, t, n) { if (vn(n)) e.removeAttribute(t); else { if (Qe && !et && "TEXTAREA" === e.tagName && "placeholder" === t && "" !== n && !e.__ieph) { e.addEventListener("input", function blocker(t) { t.stopImmediatePropagation(), e.removeEventListener("input", blocker) }), e.__ieph = !0 } e.setAttribute(t, n) } } var Pn = { create: updateAttrs, update: updateAttrs }; function updateClass(e, t) { var n = t.elm, r = t.data, i = e.data; if (!(isUndef(r.staticClass) && isUndef(r.class) && (isUndef(i) || isUndef(i.staticClass) && isUndef(i.class)))) { var o = genClassForVnode(t), a = n._transitionClasses; isDef(a) && (o = concat(o, stringifyClass(a))), o !== n._prevClass && (n.setAttribute("class", o), n._prevClass = o) } } var Rn, On, Dn, Fn, In, Nn, $n = { create: updateClass, update: updateClass }, Bn = /[\w).+\-_$\]]/; function parseFilters(e) { var t, n, r, i, o, a, s = !1, l = !1, c = !1, d = !1, f = 0, h = 0, p = 0, m = 0; for (r = 0; r < e.length; r++)if (n = t, t = e.charCodeAt(r), s) 39 === t && 92 !== n && (s = !1); else if (l) 34 === t && 92 !== n && (l = !1); else if (c) 96 === t && 92 !== n && (c = !1); else if (d) 47 === t && 92 !== n && (d = !1); else if (124 !== t || 124 === e.charCodeAt(r + 1) || 124 === e.charCodeAt(r - 1) || f || h || p) { switch (t) { case 34: l = !0; break; case 39: s = !0; break; case 96: c = !0; break; case 40: p++; break; case 41: p--; break; case 91: h++; break; case 93: h--; break; case 123: f++; break; case 125: f-- }if (47 === t) { for (var g = r - 1, v = void 0; g >= 0 && " " === (v = e.charAt(g)); g--); v && Bn.test(v) || (d = !0) } } else { var y; if (void 0 === i) m = r + 1, i = u()(y = Ce()(e).call(e, 0, r)).call(y); else pushFilter() } void 0 === i ? i = u()(a = Ce()(e).call(e, 0, r)).call(a) : 0 !== m && pushFilter(); function pushFilter() { var t; (o || (o = [])).push(u()(t = Ce()(e).call(e, m, r)).call(t)), m = r + 1 } if (o) for (r = 0; r < o.length; r++)i = wrapFilter(i, o[r]); return i } function wrapFilter(e, t) { var n = he()(t).call(t, "("); if (n < 0) return '_f("' + t + '")(' + e + ")"; var r = Ce()(t).call(t, 0, n), i = Ce()(t).call(t, n + 1); return '_f("' + r + '")(' + e + (")" !== i ? "," + i : i) } function baseWarn(e, t) { console.error("[Vue compiler]: " + e) } function pluckModuleFunction(e, t) { var n; return e ? s()(n = V()(e).call(e, function (e) { return e[t] })).call(n, function (e) { return e }) : [] } function addProp(e, t, n, r, i) { (e.props || (e.props = [])).push(rangeSetItem({ name: t, value: n, dynamic: i }, r)), e.plain = !1 } function addAttr(e, t, n, r, i) { (i ? e.dynamicAttrs || (e.dynamicAttrs = []) : e.attrs || (e.attrs = [])).push(rangeSetItem({ name: t, value: n, dynamic: i }, r)), e.plain = !1 } function addRawAttr(e, t, n, r) { e.attrsMap[t] = n, e.attrsList.push(rangeSetItem({ name: t, value: n }, r)) } function addDirective(e, t, n, r, i, o, a, s) { (e.directives || (e.directives = [])).push(rangeSetItem({ name: t, rawName: n, value: r, arg: i, isDynamicArg: o, modifiers: a }, s)), e.plain = !1 } function prependModifierMarker(e, t, n) { return n ? "_p(" + t + ',"' + e + '")' : e + t } function addHandler(e, t, n, r, i, o, a, s) { var l; (r = r || Me).right ? s ? t = "(" + t + ")==='click'?'contextmenu':(" + t + ")" : "click" === t && (t = "contextmenu", delete r.right) : r.middle && (s ? t = "(" + t + ")==='click'?'mouseup':(" + t + ")" : "click" === t && (t = "mouseup")), r.capture && (delete r.capture, t = prependModifierMarker("!", t, s)), r.once && (delete r.once, t = prependModifierMarker("~", t, s)), r.passive && (delete r.passive, t = prependModifierMarker("&", t, s)), r.native ? (delete r.native, l = e.nativeEvents || (e.nativeEvents = {})) : l = e.events || (e.events = {}); var c = rangeSetItem({ value: u()(n).call(n), dynamic: s }, a); r !== Me && (c.modifiers = r); var d = l[t]; _e()(d) ? i ? d.unshift(c) : d.push(c) : l[t] = d ? i ? [c, d] : [d, c] : c, e.plain = !1 } function getBindingAttr(e, t, n) { var r = getAndRemoveAttr(e, ":" + t) || getAndRemoveAttr(e, "v-bind:" + t); if (null != r) return parseFilters(r); if (!1 !== n) { var i = getAndRemoveAttr(e, t); if (null != i) return ve()(i) } } function getAndRemoveAttr(e, t, n) { var r; if (null != (r = e.attrsMap[t])) for (var i = e.attrsList, o = 0, a = i.length; o < a; o++)if (i[o].name === t) { de()(i).call(i, o, 1); break } return n && delete e.attrsMap[t], r } function getAndRemoveAttrByRegex(e, t) { for (var n = e.attrsList, r = 0, i = n.length; r < i; r++) { var o = n[r]; if (t.test(o.name)) return de()(n).call(n, r, 1), o } } function rangeSetItem(e, t) { return t && (null != t.start && (e.start = t.start), null != t.end && (e.end = t.end)), e } function genComponentModel(e, t, n) { var r = n || {}, i = r.number, o = "$$v"; u()(r) && (o = "(typeof $$v === 'string'? $$v.trim(): $$v)"), i && (o = "_n(" + o + ")"); var a = genAssignmentCode(t, o); e.model = { value: "(" + t + ")", expression: ve()(t), callback: "function ($$v) {" + a + "}" } } function genAssignmentCode(e, t) { var n = function parseModel(e) { if (e = u()(e).call(e), Rn = e.length, he()(e).call(e, "[") < 0 || o()(e).call(e, "]") < Rn - 1) return (Fn = o()(e).call(e, ".")) > -1 ? { exp: Ce()(e).call(e, 0, Fn), key: '"' + Ce()(e).call(e, Fn + 1) + '"' } : { exp: e, key: null }; On = e, Fn = In = Nn = 0; for (; !eof();)isStringStart(Dn = next()) ? parseString(Dn) : 91 === Dn && parseBracket(Dn); return { exp: Ce()(e).call(e, 0, In), key: Ce()(e).call(e, In + 1, Nn) } }(e); return null === n.key ? e + "=" + t : "$set(" + n.exp + ", " + n.key + ", " + t + ")" } function next() { return On.charCodeAt(++Fn) } function eof() { return Fn >= Rn } function isStringStart(e) { return 34 === e || 39 === e } function parseBracket(e) { var t = 1; for (In = Fn; !eof();)if (isStringStart(e = next())) parseString(e); else if (91 === e && t++, 93 === e && t--, 0 === t) { Nn = Fn; break } } function parseString(e) { for (var t = e; !eof() && (e = next()) !== t;); } var zn, jn = "__r", Un = "__c"; function createOnceHandler$1(e, t, n) { var r = zn; return function onceHandler() { null !== t.apply(null, arguments) && remove$2(e, onceHandler, n, r) } } var qn = Lt && !(rt && Number(rt[1]) <= 53); function add$1(e, t, n, r) { if (qn) { var i = Zt, o = t; t = o._wrapper = function (e) { if (e.target === e.currentTarget || e.timeStamp >= i || e.timeStamp <= 0 || e.target.ownerDocument !== document) return o.apply(this, arguments) } } zn.addEventListener(e, t, ot ? { capture: n, passive: r } : n) } function remove$2(e, t, n, r) { (r || zn).removeEventListener(e, t._wrapper || t, n) } function updateDOMListeners(e, t) { if (!isUndef(e.data.on) || !isUndef(t.data.on)) { var n = t.data.on || {}, r = e.data.on || {}; zn = t.elm, function normalizeEvents(e) { if (isDef(e[jn])) { var t, n = Qe ? "change" : "input"; e[n] = oe()(t = []).call(t, e[jn], e[n] || []), delete e[jn] } var r; isDef(e[Un]) && (e.change = oe()(r = []).call(r, e[Un], e.change || []), delete e[Un]) }(n), updateListeners(n, r, add$1, remove$2, createOnceHandler$1, t.context), zn = void 0 } } var Hn, Vn = { create: updateDOMListeners, update: updateDOMListeners }; function updateDOMProps(e, t) { if (!isUndef(e.data.domProps) || !isUndef(t.data.domProps)) { var n, r, i = t.elm, o = e.data.domProps || {}, a = t.data.domProps || {}; for (n in isDef(a.__ob__) && (a = t.data.domProps = extend({}, a)), o) n in a || (i[n] = ""); for (n in a) { if (r = a[n], "textContent" === n || "innerHTML" === n) { if (t.children && (t.children.length = 0), r === o[n]) continue; 1 === i.childNodes.length && i.removeChild(i.childNodes[0]) } if ("value" === n && "PROGRESS" !== i.tagName) { i._value = r; var s = isUndef(r) ? "" : String(r); shouldUpdateValue(i, s) && (i.value = s) } else if ("innerHTML" === n && bn(i.tagName) && isUndef(i.innerHTML)) { (Hn = Hn || document.createElement("div")).innerHTML = "<svg>" + r + "</svg>"; for (var l = Hn.firstChild; i.firstChild;)i.removeChild(i.firstChild); for (; l.firstChild;)i.appendChild(l.firstChild) } else if (r !== o[n]) try { i[n] = r } catch (e) { } } } } function shouldUpdateValue(e, t) { return !e.composing && ("OPTION" === e.tagName || function isNotInFocusAndDirty(e, t) { var n = !0; try { n = document.activeElement !== e } catch (e) { } return n && e.value !== t }(e, t) || function isDirtyWithModifiers(e, t) { var n = e.value, r = e._vModifiers; if (isDef(r)) { if (r.number) return toNumber(n) !== toNumber(t); if (u()(r)) return u()(n).call(n) !== u()(t).call(t) } return n !== t }(e, t)) } var Gn = { create: updateDOMProps, update: updateDOMProps }, Wn = cached(function (e) { var t, n = {}, r = /:(.+)/; return B()(t = e.split(/;(?![^(]*\))/g)).call(t, function (e) { if (e) { var t, i, o = e.split(r); o.length > 1 && (n[u()(t = o[0]).call(t)] = u()(i = o[1]).call(i)) } }), n }); function normalizeStyleData(e) { var t = normalizeStyleBinding(e.style); return e.staticStyle ? extend(e.staticStyle, t) : t } function normalizeStyleBinding(e) { return _e()(e) ? toObject(e) : "string" == typeof e ? Wn(e) : e } var Yn, Zn = /^--/, Kn = /\s*!important$/, Xn = function setProp(e, t, n) { if (Zn.test(t)) e.style.setProperty(t, n); else if (Kn.test(n)) e.style.setProperty(Ne(t), n.replace(Kn, ""), "important"); else { var r = Qn(t); if (_e()(n)) for (var i = 0, o = n.length; i < o; i++)e.style[r] = n[i]; else e.style[r] = n } }, Jn = ["Webkit", "Moz", "ms"], Qn = cached(function (e) { if (Yn = Yn || document.createElement("div").style, "filter" !== (e = De(e)) && e in Yn) return e; for (var t = e.charAt(0).toUpperCase() + Ce()(e).call(e, 1), n = 0; n < Jn.length; n++) { var r = Jn[n] + t; if (r in Yn) return r } }); function updateStyle(e, t) { var n = t.data, r = e.data; if (!(isUndef(n.staticStyle) && isUndef(n.style) && isUndef(r.staticStyle) && isUndef(r.style))) { var i, o, a = t.elm, s = r.staticStyle, l = r.normalizedStyle || r.style || {}, u = s || l, c = normalizeStyleBinding(t.data.style) || {}; t.data.normalizedStyle = isDef(c.__ob__) ? extend({}, c) : c; var d = function getStyle(e, t) { var n, r = {}; if (t) for (var i = e; i.componentInstance;)(i = i.componentInstance._vnode) && i.data && (n = normalizeStyleData(i.data)) && extend(r, n); (n = normalizeStyleData(e.data)) && extend(r, n); for (var o = e; o = o.parent;)o.data && (n = normalizeStyleData(o.data)) && extend(r, n); return r }(t, !0); for (o in u) isUndef(d[o]) && Xn(a, o, ""); for (o in d) (i = d[o]) !== u[o] && Xn(a, o, null == i ? "" : i) } } var er = { create: updateStyle, update: updateStyle }, tr = /\s+/; function addClass(e, t) { if (t && (t = u()(t).call(t))) if (e.classList) { var n; if (he()(t).call(t, " ") > -1) B()(n = t.split(tr)).call(n, function (t) { return e.classList.add(t) }); else e.classList.add(t) } else { var r, i = " " + (e.getAttribute("class") || "") + " "; if (he()(i).call(i, " " + t + " ") < 0) e.setAttribute("class", u()(r = i + t).call(r)) } } function removeClass(e, t) { if (t && (t = u()(t).call(t))) if (e.classList) { var n; if (he()(t).call(t, " ") > -1) B()(n = t.split(tr)).call(n, function (t) { return e.classList.remove(t) }); else e.classList.remove(t); e.classList.length || e.removeAttribute("class") } else { for (var r = " " + (e.getAttribute("class") || "") + " ", i = " " + t + " "; he()(r).call(r, i) >= 0;)r = r.replace(i, " "); (r = u()(r).call(r)) ? e.setAttribute("class", r) : e.removeAttribute("class") } } function resolveTransition(e) { if (e) { if ("object" === ke()(e)) { var t = {}; return !1 !== e.css && extend(t, nr(e.name || "v")), extend(t, e), t } return "string" == typeof e ? nr(e) : void 0 } } var nr = cached(function (e) { return { enterClass: e + "-enter", enterToClass: e + "-enter-to", enterActiveClass: e + "-enter-active", leaveClass: e + "-leave", leaveToClass: e + "-leave-to", leaveActiveClass: e + "-leave-active" } }), rr = Ze && !et, ir = "transition", or = "animation", ar = "transition", sr = "transitionend", lr = "animation", ur = "animationend"; rr && (void 0 === window.ontransitionend && void 0 !== window.onwebkittransitionend && (ar = "WebkitTransition", sr = "webkitTransitionEnd"), void 0 === window.onanimationend && void 0 !== window.onwebkitanimationend && (lr = "WebkitAnimation", ur = "webkitAnimationEnd")); var cr = Ze ? window.requestAnimationFrame ? ue()(r = window.requestAnimationFrame).call(r, window) : L.a : function (e) { return e() }; function nextFrame(e) { cr(function () { cr(e) }) } function addTransitionClass(e, t) { var n = e._transitionClasses || (e._transitionClasses = []); he()(n).call(n, t) < 0 && (n.push(t), addClass(e, t)) } function removeTransitionClass(e, t) { e._transitionClasses && remove(e._transitionClasses, t), removeClass(e, t) } function whenTransitionEnds(e, t, n) { var r = getTransitionInfo(e, t), i = r.type, o = r.timeout, a = r.propCount; if (!i) return n(); var s = i === ir ? sr : ur, l = 0, u = function end() { e.removeEventListener(s, c), n() }, c = function onEnd(t) { t.target === e && ++l >= a && u() }; L()(function () { l < a && u() }, o + 1), e.addEventListener(s, c) } var dr = /\b(transform|all)(,|$)/; function getTransitionInfo(e, t) { var n, r = window.getComputedStyle(e), i = (r[ar + "Delay"] || "").split(", "), o = (r[ar + "Duration"] || "").split(", "), a = getTimeout(i, o), s = (r[lr + "Delay"] || "").split(", "), l = (r[lr + "Duration"] || "").split(", "), u = getTimeout(s, l), c = 0, d = 0; return t === ir ? a > 0 && (n = ir, c = a, d = o.length) : t === or ? u > 0 && (n = or, c = u, d = l.length) : d = (n = (c = Math.max(a, u)) > 0 ? a > u ? ir : or : null) ? n === ir ? o.length : l.length : 0, { type: n, timeout: c, propCount: d, hasTransform: n === ir && dr.test(r[ar + "Property"]) } } function getTimeout(e, t) { for (; e.length < t.length;)e = oe()(e).call(e, e); return Math.max.apply(null, V()(t).call(t, function (t, n) { return toMs(t) + toMs(e[n]) })) } function toMs(e) { return 1e3 * Number(Ce()(e).call(e, 0, -1).replace(",", ".")) } function enter(e, t) { var n = e.elm; isDef(n._leaveCb) && (n._leaveCb.cancelled = !0, n._leaveCb()); var r = resolveTransition(e.data.transition); if (!isUndef(r) && !isDef(n._enterCb) && 1 === n.nodeType) { for (var i = r.css, o = r.type, a = r.enterClass, s = r.enterToClass, l = r.enterActiveClass, u = r.appearClass, c = r.appearToClass, d = r.appearActiveClass, f = r.beforeEnter, h = r.enter, p = r.afterEnter, m = r.enterCancelled, g = r.beforeAppear, v = r.appear, y = r.afterAppear, _ = r.appearCancelled, b = r.duration, w = Ut, x = Ut.$vnode; x && x.parent;)w = x.context, x = x.parent; var C = !w._isMounted || !e.isRootInsert; if (!C || v || "" === v) { var S = C && u ? u : a, k = C && d ? d : l, T = C && c ? c : s, M = C && g || f, E = C && "function" == typeof v ? v : h, A = C && y || p, P = C && _ || m, R = toNumber(isObject(b) ? b.enter : b); 0; var O = !1 !== i && !et, D = getHookArgumentsLength(E), F = n._enterCb = once(function () { O && (removeTransitionClass(n, T), removeTransitionClass(n, k)), F.cancelled ? (O && removeTransitionClass(n, S), P && P(n)) : A && A(n), n._enterCb = null }); e.data.show || mergeVNodeHook(e, "insert", function () { var t = n.parentNode, r = t && t._pending && t._pending[e.key]; r && r.tag === e.tag && r.elm._leaveCb && r.elm._leaveCb(), E && E(n, F) }), M && M(n), O && (addTransitionClass(n, S), addTransitionClass(n, k), nextFrame(function () { removeTransitionClass(n, S), F.cancelled || (addTransitionClass(n, T), D || (isValidDuration(R) ? L()(F, R) : whenTransitionEnds(n, o, F))) })), e.data.show && (t && t(), E && E(n, F)), O || D || F() } } } function leave(e, t) { var n = e.elm; isDef(n._enterCb) && (n._enterCb.cancelled = !0, n._enterCb()); var r = resolveTransition(e.data.transition); if (isUndef(r) || 1 !== n.nodeType) return t(); if (!isDef(n._leaveCb)) { var i = r.css, o = r.type, a = r.leaveClass, s = r.leaveToClass, l = r.leaveActiveClass, u = r.beforeLeave, c = r.leave, d = r.afterLeave, f = r.leaveCancelled, h = r.delayLeave, p = r.duration, m = !1 !== i && !et, g = getHookArgumentsLength(c), v = toNumber(isObject(p) ? p.leave : p); 0; var y = n._leaveCb = once(function () { n.parentNode && n.parentNode._pending && (n.parentNode._pending[e.key] = null), m && (removeTransitionClass(n, s), removeTransitionClass(n, l)), y.cancelled ? (m && removeTransitionClass(n, a), f && f(n)) : (t(), d && d(n)), n._leaveCb = null }); h ? h(performLeave) : performLeave() } function performLeave() { y.cancelled || (!e.data.show && n.parentNode && ((n.parentNode._pending || (n.parentNode._pending = {}))[e.key] = e), u && u(n), m && (addTransitionClass(n, a), addTransitionClass(n, l), nextFrame(function () { removeTransitionClass(n, a), y.cancelled || (addTransitionClass(n, s), g || (isValidDuration(v) ? L()(y, v) : whenTransitionEnds(n, o, y))) })), c && c(n, y), m || g || y()) } } function isValidDuration(e) { return "number" == typeof e && !isNaN(e) } function getHookArgumentsLength(e) { if (isUndef(e)) return !1; var t = e.fns; return isDef(t) ? getHookArgumentsLength(_e()(t) ? t[0] : t) : (e._length || e.length) > 1 } function _enter(e, t) { !0 !== t.data.show && enter(t) } var fr = [Pn, $n, Vn, Gn, er, Ze ? { create: _enter, activate: _enter, remove: function remove$$1(e, t) { !0 !== e.data.show ? leave(e, t) : t() } } : {}], hr = function createPatchFunction(e) { var t, n, r = {}, i = e.modules, o = e.nodeOps; for (t = 0; t < Ln.length; ++t)for (r[Ln[t]] = [], n = 0; n < i.length; ++n)isDef(i[n][Ln[t]]) && r[Ln[t]].push(i[n][Ln[t]]); function removeNode(e) { var t = o.parentNode(e); isDef(t) && o.removeChild(t, e) } function createElm(e, t, n, i, a, s, l) { if (isDef(e.elm) && isDef(s) && (e = s[l] = cloneVNode(e)), e.isRootInsert = !a, !function createComponent(e, t, n, i) { var o = e.data; if (isDef(o)) { var a = isDef(e.componentInstance) && o.keepAlive; if (isDef(o = o.hook) && isDef(o = o.init) && o(e, !1), isDef(e.componentInstance)) return initComponent(e, t), insert(n, e.elm, i), isTrue(a) && function reactivateComponent(e, t, n, i) { for (var o, a = e; a.componentInstance;)if (a = a.componentInstance._vnode, isDef(o = a.data) && isDef(o = o.transition)) { for (o = 0; o < r.activate.length; ++o)r.activate[o](Tn, a); t.push(a); break } insert(n, e.elm, i) }(e, t, n, i), !0 } }(e, t, n, i)) { var u = e.data, c = e.children, d = e.tag; isDef(d) ? (e.elm = e.ns ? o.createElementNS(e.ns, d) : o.createElement(d, e), setScope(e), createChildren(e, c, t), isDef(u) && invokeCreateHooks(e, t), insert(n, e.elm, i)) : isTrue(e.isComment) ? (e.elm = o.createComment(e.text), insert(n, e.elm, i)) : (e.elm = o.createTextNode(e.text), insert(n, e.elm, i)) } } function initComponent(e, t) { isDef(e.data.pendingInsert) && (t.push.apply(t, e.data.pendingInsert), e.data.pendingInsert = null), e.elm = e.componentInstance.$el, isPatchable(e) ? (invokeCreateHooks(e, t), setScope(e)) : (registerRef(e), t.push(e)) } function insert(e, t, n) { isDef(e) && (isDef(n) ? o.parentNode(n) === e && o.insertBefore(e, t, n) : o.appendChild(e, t)) } function createChildren(e, t, n) { if (_e()(t)) for (var r = 0; r < t.length; ++r)createElm(t[r], n, e.elm, null, !0, t, r); else isPrimitive(e.text) && o.appendChild(e.elm, o.createTextNode(String(e.text))) } function isPatchable(e) { for (; e.componentInstance;)e = e.componentInstance._vnode; return isDef(e.tag) } function invokeCreateHooks(e, n) { for (var i = 0; i < r.create.length; ++i)r.create[i](Tn, e); isDef(t = e.data.hook) && (isDef(t.create) && t.create(Tn, e), isDef(t.insert) && n.push(e)) } function setScope(e) { var t; if (isDef(t = e.fnScopeId)) o.setStyleScope(e.elm, t); else for (var n = e; n;)isDef(t = n.context) && isDef(t = t.$options._scopeId) && o.setStyleScope(e.elm, t), n = n.parent; isDef(t = Ut) && t !== e.context && t !== e.fnContext && isDef(t = t.$options._scopeId) && o.setStyleScope(e.elm, t) } function addVnodes(e, t, n, r, i, o) { for (; r <= i; ++r)createElm(n[r], o, e, t, !1, n, r) } function invokeDestroyHook(e) { var t, n, i = e.data; if (isDef(i)) for (isDef(t = i.hook) && isDef(t = t.destroy) && t(e), t = 0; t < r.destroy.length; ++t)r.destroy[t](e); if (isDef(t = e.children)) for (n = 0; n < e.children.length; ++n)invokeDestroyHook(e.children[n]) } function removeVnodes(e, t, n) { for (; t <= n; ++t) { var r = e[t]; isDef(r) && (isDef(r.tag) ? (removeAndInvokeRemoveHook(r), invokeDestroyHook(r)) : removeNode(r.elm)) } } function removeAndInvokeRemoveHook(e, t) { if (isDef(t) || isDef(e.data)) { var n, i = r.remove.length + 1; for (isDef(t) ? t.listeners += i : t = function createRmCb(e, t) { function remove$$1() { 0 == --remove$$1.listeners && removeNode(e) } return remove$$1.listeners = t, remove$$1 }(e.elm, i), isDef(n = e.componentInstance) && isDef(n = n._vnode) && isDef(n.data) && removeAndInvokeRemoveHook(n, t), n = 0; n < r.remove.length; ++n)r.remove[n](e, t); isDef(n = e.data.hook) && isDef(n = n.remove) ? n(e, t) : t() } else removeNode(e.elm) } function findIdxInOld(e, t, n, r) { for (var i = n; i < r; i++) { var o = t[i]; if (isDef(o) && sameVnode(e, o)) return i } } function patchVnode(e, t, n, i, a, s) { if (e !== t) { isDef(t.elm) && isDef(i) && (t = i[a] = cloneVNode(t)); var l = t.elm = e.elm; if (isTrue(e.isAsyncPlaceholder)) isDef(t.asyncFactory.resolved) ? hydrate(e.elm, t, n) : t.isAsyncPlaceholder = !0; else if (isTrue(t.isStatic) && isTrue(e.isStatic) && t.key === e.key && (isTrue(t.isCloned) || isTrue(t.isOnce))) t.componentInstance = e.componentInstance; else { var u, c = t.data; isDef(c) && isDef(u = c.hook) && isDef(u = u.prepatch) && u(e, t); var d = e.children, f = t.children; if (isDef(c) && isPatchable(t)) { for (u = 0; u < r.update.length; ++u)r.update[u](e, t); isDef(u = c.hook) && isDef(u = u.update) && u(e, t) } isUndef(t.text) ? isDef(d) && isDef(f) ? d !== f && function updateChildren(e, t, n, r, i) { for (var a, s, l, u = 0, c = 0, d = t.length - 1, f = t[0], h = t[d], p = n.length - 1, m = n[0], g = n[p], v = !i; u <= d && c <= p;)isUndef(f) ? f = t[++u] : isUndef(h) ? h = t[--d] : sameVnode(f, m) ? (patchVnode(f, m, r, n, c), f = t[++u], m = n[++c]) : sameVnode(h, g) ? (patchVnode(h, g, r, n, p), h = t[--d], g = n[--p]) : sameVnode(f, g) ? (patchVnode(f, g, r, n, p), v && o.insertBefore(e, f.elm, o.nextSibling(h.elm)), f = t[++u], g = n[--p]) : sameVnode(h, m) ? (patchVnode(h, m, r, n, c), v && o.insertBefore(e, h.elm, f.elm), h = t[--d], m = n[++c]) : (isUndef(a) && (a = createKeyToOldIdx(t, u, d)), isUndef(s = isDef(m.key) ? a[m.key] : findIdxInOld(m, t, u, d)) ? createElm(m, r, e, f.elm, !1, n, c) : sameVnode(l = t[s], m) ? (patchVnode(l, m, r, n, c), t[s] = void 0, v && o.insertBefore(e, l.elm, f.elm)) : createElm(m, r, e, f.elm, !1, n, c), m = n[++c]); u > d ? addVnodes(e, isUndef(n[p + 1]) ? null : n[p + 1].elm, n, c, p, r) : c > p && removeVnodes(t, u, d) }(l, d, f, n, s) : isDef(f) ? (isDef(e.text) && o.setTextContent(l, ""), addVnodes(l, null, f, 0, f.length - 1, n)) : isDef(d) ? removeVnodes(d, 0, d.length - 1) : isDef(e.text) && o.setTextContent(l, "") : e.text !== t.text && o.setTextContent(l, t.text), isDef(c) && isDef(u = c.hook) && isDef(u = u.postpatch) && u(e, t) } } } function invokeInsertHook(e, t, n) { if (isTrue(n) && isDef(e.parent)) e.parent.data.pendingInsert = t; else for (var r = 0; r < t.length; ++r)t[r].data.hook.insert(t[r]) } var a = makeMap("attrs,class,staticClass,staticStyle,key"); function hydrate(e, t, n, r) { var i, o = t.tag, s = t.data, l = t.children; if (r = r || s && s.pre, t.elm = e, isTrue(t.isComment) && isDef(t.asyncFactory)) return t.isAsyncPlaceholder = !0, !0; if (isDef(s) && (isDef(i = s.hook) && isDef(i = i.init) && i(t, !0), isDef(i = t.componentInstance))) return initComponent(t, n), !0; if (isDef(o)) { if (isDef(l)) if (e.hasChildNodes()) if (isDef(i = s) && isDef(i = i.domProps) && isDef(i = i.innerHTML)) { if (i !== e.innerHTML) return !1 } else { for (var u = !0, c = e.firstChild, d = 0; d < l.length; d++) { if (!c || !hydrate(c, l[d], n, r)) { u = !1; break } c = c.nextSibling } if (!u || c) return !1 } else createChildren(t, l, n); if (isDef(s)) { var f = !1; for (var h in s) if (!a(h)) { f = !0, invokeCreateHooks(t, n); break } !f && s.class && traverse(s.class) } } else e.data !== t.text && (e.data = t.text); return !0 } return function patch(e, t, n, i) { if (!isUndef(t)) { var a = !1, s = []; if (isUndef(e)) a = !0, createElm(t, s); else { var l = isDef(e.nodeType); if (!l && sameVnode(e, t)) patchVnode(e, t, s, null, null, i); else { if (l) { if (1 === e.nodeType && e.hasAttribute(je) && (e.removeAttribute(je), n = !0), isTrue(n) && hydrate(e, t, s)) return invokeInsertHook(t, s, !0), e; e = function emptyNodeAt(e) { return new mt(o.tagName(e).toLowerCase(), {}, [], void 0, e) }(e) } var u = e.elm, c = o.parentNode(u); if (createElm(t, s, u._leaveCb ? null : c, o.nextSibling(u)), isDef(t.parent)) for (var d = t.parent, f = isPatchable(t); d;) { for (var h = 0; h < r.destroy.length; ++h)r.destroy[h](d); if (d.elm = t.elm, f) { for (var p = 0; p < r.create.length; ++p)r.create[p](Tn, d); var m = d.data.hook.insert; if (m.merged) for (var g = 1; g < m.fns.length; g++)m.fns[g]() } else registerRef(d); d = d.parent } isDef(c) ? removeVnodes([e], 0, 0) : isDef(e.tag) && invokeDestroyHook(e) } } return invokeInsertHook(t, s, a), t.elm } isDef(e) && invokeDestroyHook(e) } }({ nodeOps: Sn, modules: oe()(fr).call(fr, An) }); et && document.addEventListener("selectionchange", function () { var e = document.activeElement; e && e.vmodel && trigger(e, "input") }); var pr = { inserted: function inserted(e, t, n, r) { "select" === n.tag ? (r.elm && !r.elm._vOptions ? mergeVNodeHook(n, "postpatch", function () { pr.componentUpdated(e, t, n) }) : setSelected(e, t, n.context), e._vOptions = V()([]).call(e.options, getValue)) : ("textarea" === n.tag || Cn(e.type)) && (e._vModifiers = t.modifiers, t.modifiers.lazy || (e.addEventListener("compositionstart", onCompositionStart), e.addEventListener("compositionend", onCompositionEnd), e.addEventListener("change", onCompositionEnd), et && (e.vmodel = !0))) }, componentUpdated: function componentUpdated(e, t, n) { if ("select" === n.tag) { setSelected(e, t, n.context); var r, i = e._vOptions, o = e._vOptions = V()([]).call(e.options, getValue); if (P()(o).call(o, function (e, t) { return !looseEqual(e, i[t]) })) (e.multiple ? P()(r = t.value).call(r, function (e) { return hasNoMatchingOption(e, o) }) : t.value !== t.oldValue && hasNoMatchingOption(t.value, o)) && trigger(e, "change") } } }; function setSelected(e, t, n) { actuallySetSelected(e, t, n), (Qe || tt) && L()(function () { actuallySetSelected(e, t, n) }, 0) } function actuallySetSelected(e, t, n) { var r = t.value, i = e.multiple; if (!i || _e()(r)) { for (var o, a, s = 0, l = e.options.length; s < l; s++)if (a = e.options[s], i) o = looseIndexOf(r, getValue(a)) > -1, a.selected !== o && (a.selected = o); else if (looseEqual(getValue(a), r)) return void (e.selectedIndex !== s && (e.selectedIndex = s)); i || (e.selectedIndex = -1) } else; } function hasNoMatchingOption(e, t) { return re()(t).call(t, function (t) { return !looseEqual(t, e) }) } function getValue(e) { return "_value" in e ? e._value : e.value } function onCompositionStart(e) { e.target.composing = !0 } function onCompositionEnd(e) { e.target.composing && (e.target.composing = !1, trigger(e.target, "input")) } function trigger(e, t) { var n = document.createEvent("HTMLEvents"); n.initEvent(t, !0, !0), e.dispatchEvent(n) } function locateNode(e) { return !e.componentInstance || e.data && e.data.transition ? e : locateNode(e.componentInstance._vnode) } var mr = { model: pr, show: { bind: function bind(e, t, n) { var r = t.value, i = (n = locateNode(n)).data && n.data.transition, o = e.__vOriginalDisplay = "none" === e.style.display ? "" : e.style.display; r && i ? (n.data.show = !0, enter(n, function () { e.style.display = o })) : e.style.display = r ? o : "none" }, update: function update(e, t, n) { var r = t.value; !r != !t.oldValue && ((n = locateNode(n)).data && n.data.transition ? (n.data.show = !0, r ? enter(n, function () { e.style.display = e.__vOriginalDisplay }) : leave(n, function () { e.style.display = "none" })) : e.style.display = r ? e.__vOriginalDisplay : "none") }, unbind: function unbind(e, t, n, r, i) { i || (e.style.display = e.__vOriginalDisplay) } } }, gr = { name: String, appear: Boolean, css: Boolean, mode: String, type: String, enterClass: String, leaveClass: String, enterToClass: String, leaveToClass: String, enterActiveClass: String, leaveActiveClass: String, appearClass: String, appearActiveClass: String, appearToClass: String, duration: [Number, String, Object] }; function getRealChild(e) { var t = e && e.componentOptions; return t && t.Ctor.options.abstract ? getRealChild(getFirstComponentChild(t.children)) : e } function extractTransitionData(e) { var t = {}, n = e.$options; for (var r in n.propsData) t[r] = e[r]; var i = n._parentListeners; for (var o in i) t[De(o)] = i[o]; return t } function placeholder(e, t) { if (/\d-keep-alive$/.test(t.tag)) return e("keep-alive", { props: t.componentOptions.propsData }) } var vr = function isNotTextNode(e) { return e.tag || isAsyncPlaceholder(e) }, yr = function isVShowDirective(e) { return "show" === e.name }, _r = { name: "transition", props: gr, abstract: !0, render: function render(e) { var t, n, r = this, i = this.$slots.default; if (i && (i = s()(i).call(i, vr)).length) { 0; var o = this.mode; 0; var a = i[0]; if (function hasParentTransition(e) { for (; e = e.parent;)if (e.data.transition) return !0 }(this.$vnode)) return a; var l = getRealChild(a); if (!l) return a; if (this._leaving) return placeholder(e, a); var u = "__transition-" + this._uid + "-"; l.key = null == l.key ? l.isComment ? u + "comment" : u + l.tag : isPrimitive(l.key) ? 0 === he()(t = String(l.key)).call(t, u) ? l.key : u + l.key : l.key; var c = (l.data || (l.data = {})).transition = extractTransitionData(this), d = this._vnode, f = getRealChild(d); if (l.data.directives && P()(n = l.data.directives).call(n, yr) && (l.data.show = !0), f && f.data && !function isSameChild(e, t) { return t.key === e.key && t.tag === e.tag }(l, f) && !isAsyncPlaceholder(f) && (!f.componentInstance || !f.componentInstance._vnode.isComment)) { var h = f.data.transition = extend({}, c); if ("out-in" === o) return this._leaving = !0, mergeVNodeHook(h, "afterLeave", function () { r._leaving = !1, r.$forceUpdate() }), placeholder(e, a); if ("in-out" === o) { if (isAsyncPlaceholder(l)) return d; var p, m = function performLeave() { p() }; mergeVNodeHook(c, "afterEnter", m), mergeVNodeHook(c, "enterCancelled", m), mergeVNodeHook(h, "delayLeave", function (e) { p = e }) } } return a } } }, br = extend({ tag: String, moveClass: String }, gr); function callPendingCbs(e) { e.elm._moveCb && e.elm._moveCb(), e.elm._enterCb && e.elm._enterCb() } function recordPosition(e) { e.data.newPos = e.elm.getBoundingClientRect() } function applyTranslation(e) { var t = e.data.pos, n = e.data.newPos, r = t.left - n.left, i = t.top - n.top; if (r || i) { e.data.moved = !0; var o = e.elm.style; o.transform = o.WebkitTransform = "translate(" + r + "px," + i + "px)", o.transitionDuration = "0s" } } delete br.mode; var wr = { Transition: _r, TransitionGroup: { props: br, beforeMount: function beforeMount() { var e = this, t = this._update; this._update = function (n, r) { var i = setActiveInstance(e); e.__patch__(e._vnode, e.kept, !1, !0), e._vnode = e.kept, i(), t.call(e, n, r) } }, render: function render(e) { for (var t = this.tag || this.$vnode.data.tag || "span", n = me()(null), r = this.prevChildren = this.children, i = this.$slots.default || [], o = this.children = [], a = extractTransitionData(this), s = 0; s < i.length; s++) { var l, u = i[s]; if (u.tag) if (null != u.key && 0 !== he()(l = String(u.key)).call(l, "__vlist")) o.push(u), n[u.key] = u, (u.data || (u.data = {})).transition = a; else; } if (r) { for (var c = [], d = [], f = 0; f < r.length; f++) { var h = r[f]; h.data.transition = a, h.data.pos = h.elm.getBoundingClientRect(), n[h.key] ? c.push(h) : d.push(h) } this.kept = e(t, null, c), this.removed = d } return e(t, null, o) }, updated: function updated() { var e = this.prevChildren, t = this.moveClass || (this.name || "v") + "-move"; e.length && this.hasMove(e[0].elm, t) && (B()(e).call(e, callPendingCbs), B()(e).call(e, recordPosition), B()(e).call(e, applyTranslation), this._reflow = document.body.offsetHeight, B()(e).call(e, function (e) { if (e.data.moved) { var n = e.elm, r = n.style; addTransitionClass(n, t), r.transform = r.WebkitTransform = r.transitionDuration = "", n.addEventListener(sr, n._moveCb = function cb(e) { e && e.target !== n || e && !/transform$/.test(e.propertyName) || (n.removeEventListener(sr, cb), n._moveCb = null, removeTransitionClass(n, t)) }) } })) }, methods: { hasMove: function hasMove(e, t) { if (!rr) return !1; if (this._hasMove) return this._hasMove; var n, r = e.cloneNode(); e._transitionClasses && B()(n = e._transitionClasses).call(n, function (e) { removeClass(r, e) }); addClass(r, t), r.style.display = "none", this.$el.appendChild(r); var i = getTransitionInfo(r); return this.$el.removeChild(r), this._hasMove = i.hasTransform } } } }; Vue.config.mustUseProp = un, Vue.config.isReservedTag = wn, Vue.config.isReservedAttr = sn, Vue.config.getTagNamespace = getTagNamespace, Vue.config.isUnknownElement = function isUnknownElement(e) { if (!Ze) return !0; if (wn(e)) return !1; if (e = e.toLowerCase(), null != xn[e]) return xn[e]; var t = document.createElement(e); return he()(e).call(e, "-") > -1 ? xn[e] = t.constructor === window.HTMLUnknownElement || t.constructor === window.HTMLElement : xn[e] = /HTMLUnknownElement/.test(t.toString()) }, extend(Vue.options.directives, mr), extend(Vue.options.components, wr), Vue.prototype.__patch__ = Ze ? hr : noop, Vue.prototype.$mount = function (e, t) { return function mountComponent(e, t, n) { return e.$el = t, e.$options.render || (e.$options.render = vt), callHook(e, "beforeMount"), new Qt(e, function updateComponent() { e._update(e._render(), n) }, noop, { before: function before() { e._isMounted && !e._isDestroyed && callHook(e, "beforeUpdate") } }, !0), n = !1, null == e.$vnode && (e._isMounted = !0, callHook(e, "mounted")), e }(this, e = e && Ze ? query(e) : void 0, t) }, Ze && L()(function () { He.devtools && lt && lt.emit("init", Vue) }, 0); var xr = /\{\{((?:.|\r?\n)+?)\}\}/g, Cr = /[-.*+?^${}()|[\]\/\\]/g, Sr = cached(function (e) { var t = e[0].replace(Cr, "\\$&"), n = e[1].replace(Cr, "\\$&"); return new RegExp(t + "((?:.|\\n)+?)" + n, "g") }); var kr = { staticKeys: ["staticClass"], transformNode: function transformNode(e, t) { t.warn; var n = getAndRemoveAttr(e, "class"); n && (e.staticClass = ve()(n)); var r = getBindingAttr(e, "class", !1); r && (e.classBinding = r) }, genData: function genData(e) { var t = ""; return e.staticClass && (t += "staticClass:" + e.staticClass + ","), e.classBinding && (t += "class:" + e.classBinding + ","), t } }; var Tr, Lr = { staticKeys: ["staticStyle"], transformNode: function transformNode$1(e, t) { t.warn; var n = getAndRemoveAttr(e, "style"); n && (e.staticStyle = ve()(Wn(n))); var r = getBindingAttr(e, "style", !1); r && (e.styleBinding = r) }, genData: function genData$1(e) { var t = ""; return e.staticStyle && (t += "staticStyle:" + e.staticStyle + ","), e.styleBinding && (t += "style:(" + e.styleBinding + "),"), t } }, Mr = function decode(e) { return (Tr = Tr || document.createElement("div")).innerHTML = e, Tr.textContent }, Er = makeMap("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"), Ar = makeMap("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"), Pr = makeMap("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"), Rr = /^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/, Or = /^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/, Dr = "[a-zA-Z_][\\-\\.0-9_a-zA-Z" + Ve.source + "]*", Fr = "((?:" + Dr + "\\:)?" + Dr + ")", Ir = new RegExp("^<" + Fr), Nr = /^\s*(\/?)>/, $r = new RegExp("^<\\/" + Fr + "[^>]*>"), Br = /^<!DOCTYPE [^>]+>/i, zr = /^<!\--/, jr = /^<!\[/, Ur = makeMap("script,style,textarea", !0), qr = {}, Hr = { "&lt;": "<", "&gt;": ">", "&quot;": '"', "&amp;": "&", "&#10;": "\n", "&#9;": "\t", "&#39;": "'" }, Vr = /&(?:lt|gt|quot|amp|#39);/g, Gr = /&(?:lt|gt|quot|amp|#39|#10|#9);/g, Wr = makeMap("pre,textarea", !0), Yr = function shouldIgnoreFirstNewline(e, t) { return e && Wr(e) && "\n" === t[0] }; function decodeAttr(e, t) { var n = t ? Gr : Vr; return e.replace(n, function (e) { return Hr[e] }) } var Zr, Kr, Xr, Jr, Qr, ei, ti, ni, ri = /^@|^v-on:/, ii = /^v-|^@|^:|^#/, oi = /([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/, ai = /,([^,\}\]]*)(?:,([^,\}\]]*))?$/, si = /^\(|\)$/g, li = /^\[.*\]$/, ui = /:(.*)$/, ci = /^:|^\.|^v-bind:/, di = /\.[^.\]]+(?=[^\]]*$)/g, fi = /^v-slot(:|$)|^#/, hi = /[\r\n]/, pi = /\s+/g, mi = cached(Mr), gi = "_empty_"; function createASTElement(e, t, n) { return { type: 1, tag: e, attrsList: t, attrsMap: function makeAttrsMap(e) { for (var t = {}, n = 0, r = e.length; n < r; n++)t[e[n].name] = e[n].value; return t }(t), rawAttrsMap: {}, parent: n, children: [] } } function parse(e, t) { Zr = t.warn || baseWarn, ei = t.isPreTag || Be, ti = t.mustUseProp || Be, ni = t.getTagNamespace || Be; var n = t.isReservedTag || Be; (function maybeComponent(e) { return !!e.component || !n(e.tag) }), Xr = pluckModuleFunction(t.modules, "transformNode"), Jr = pluckModuleFunction(t.modules, "preTransformNode"), Qr = pluckModuleFunction(t.modules, "postTransformNode"), Kr = t.delimiters; var r, i, o = [], a = !1 !== t.preserveWhitespace, l = t.whitespace, c = !1, d = !1; function closeElement(e) { var n; if (trimEndingWhitespace(e), c || e.processed || (e = processElement(e, t)), o.length || e === r || r.if && (e.elseif || e.else) && addIfCondition(r, { exp: e.elseif, block: e }), i && !e.forbidden) if (e.elseif || e.else) !function processIfConditions(e, t) { var n = function findPrevElement(e) { var t = e.length; for (; t--;) { if (1 === e[t].type) return e[t]; e.pop() } }(t.children); n && n.if && addIfCondition(n, { exp: e.elseif, block: e }) }(e, i); else { if (e.slotScope) { var a = e.slotTarget || '"default"'; (i.scopedSlots || (i.scopedSlots = {}))[a] = e } i.children.push(e), e.parent = i } e.children = s()(n = e.children).call(n, function (e) { return !e.slotScope }), trimEndingWhitespace(e), e.pre && (c = !1), ei(e.tag) && (d = !1); for (var l = 0; l < Qr.length; l++)Qr[l](e, t) } function trimEndingWhitespace(e) { if (!d) for (var t; (t = e.children[e.children.length - 1]) && 3 === t.type && " " === t.text;)e.children.pop() } return function parseHTML(e, t) { for (var n, r, i = [], o = t.expectHTML, a = t.isUnaryTag || Be, s = t.canBeLeftOpenTag || Be, l = 0; e;) { if (n = e, r && Ur(r)) { var u = 0, c = r.toLowerCase(), d = qr[c] || (qr[c] = new RegExp("([\\s\\S]*?)(</" + c + "[^>]*>)", "i")), f = e.replace(d, function (e, n, r) { return u = r.length, Ur(c) || "noscript" === c || (n = n.replace(/<!\--([\s\S]*?)-->/g, "$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g, "$1")), Yr(c, n) && (n = Ce()(n).call(n, 1)), t.chars && t.chars(n), "" }); l += e.length - f.length, e = f, parseEndTag(c, l - u, l) } else { var h = he()(e).call(e, "<"); if (0 === h) { if (zr.test(e)) { var p = he()(e).call(e, "--\x3e"); if (p >= 0) { t.shouldKeepComment && t.comment(e.substring(4, p), l, l + p + 3), advance(p + 3); continue } } if (jr.test(e)) { var m = he()(e).call(e, "]>"); if (m >= 0) { advance(m + 2); continue } } var g = e.match(Br); if (g) { advance(g[0].length); continue } var v = e.match($r); if (v) { var y = l; advance(v[0].length), parseEndTag(v[1], y, l); continue } var _ = parseStartTag(); if (_) { handleStartTag(_), Yr(_.tagName, e) && advance(1); continue } } var b = void 0, w = void 0, x = void 0; if (h >= 0) { for (w = Ce()(e).call(e, h); !($r.test(w) || Ir.test(w) || zr.test(w) || jr.test(w) || (x = he()(w).call(w, "<", 1)) < 0);)h += x, w = Ce()(e).call(e, h); b = e.substring(0, h) } h < 0 && (b = e), b && advance(b.length), t.chars && b && t.chars(b, l - b.length, l) } if (e === n) { t.chars && t.chars(e); break } } function advance(t) { l += t, e = e.substring(t) } function parseStartTag() { var t = e.match(Ir); if (t) { var n, r, i = { tagName: t[1], attrs: [], start: l }; for (advance(t[0].length); !(n = e.match(Nr)) && (r = e.match(Or) || e.match(Rr));)r.start = l, advance(r[0].length), r.end = l, i.attrs.push(r); if (n) return i.unarySlash = n[1], advance(n[0].length), i.end = l, i } } function handleStartTag(e) { var n = e.tagName, l = e.unarySlash; o && ("p" === r && Pr(n) && parseEndTag(r), s(n) && r === n && parseEndTag(n)); for (var u = a(n) || !!l, c = e.attrs.length, d = new Array(c), f = 0; f < c; f++) { var h = e.attrs[f], p = h[3] || h[4] || h[5] || "", m = "a" === n && "href" === h[1] ? t.shouldDecodeNewlinesForHref : t.shouldDecodeNewlines; d[f] = { name: h[1], value: decodeAttr(p, m) } } u || (i.push({ tag: n, lowerCasedTag: n.toLowerCase(), attrs: d, start: e.start, end: e.end }), r = n), t.start && t.start(n, d, u, e.start, e.end) } function parseEndTag(e, n, o) { var a, s; if (null == n && (n = l), null == o && (o = l), e) for (s = e.toLowerCase(), a = i.length - 1; a >= 0 && i[a].lowerCasedTag !== s; a--); else a = 0; if (a >= 0) { for (var u = i.length - 1; u >= a; u--)t.end && t.end(i[u].tag, n, o); i.length = a, r = a && i[a - 1].tag } else "br" === s ? t.start && t.start(e, [], !0, n, o) : "p" === s && (t.start && t.start(e, [], !1, n, o), t.end && t.end(e, n, o)) } parseEndTag() }(e, { warn: Zr, expectHTML: t.expectHTML, isUnaryTag: t.isUnaryTag, canBeLeftOpenTag: t.canBeLeftOpenTag, shouldDecodeNewlines: t.shouldDecodeNewlines, shouldDecodeNewlinesForHref: t.shouldDecodeNewlinesForHref, shouldKeepComment: t.comments, outputSourceRange: t.outputSourceRange, start: function start(e, n, a, s, l) { var u = i && i.ns || ni(e); Qe && "svg" === u && (n = function guardIESVGBug(e) { for (var t = [], n = 0; n < e.length; n++) { var r = e[n]; vi.test(r.name) || (r.name = r.name.replace(yi, ""), t.push(r)) } return t }(n)); var f = createASTElement(e, n, i); u && (f.ns = u), function isForbiddenTag(e) { return "style" === e.tag || "script" === e.tag && (!e.attrsMap.type || "text/javascript" === e.attrsMap.type) }(f) && !st() && (f.forbidden = !0); for (var h = 0; h < Jr.length; h++)f = Jr[h](f, t) || f; c || (!function processPre(e) { null != getAndRemoveAttr(e, "v-pre") && (e.pre = !0) }(f), f.pre && (c = !0)), ei(f.tag) && (d = !0), c ? function processRawAttrs(e) { var t = e.attrsList, n = t.length; if (n) for (var r = e.attrs = new Array(n), i = 0; i < n; i++)r[i] = { name: t[i].name, value: ve()(t[i].value) }, null != t[i].start && (r[i].start = t[i].start, r[i].end = t[i].end); else e.pre || (e.plain = !0) }(f) : f.processed || (processFor(f), function processIf(e) { var t = getAndRemoveAttr(e, "v-if"); if (t) e.if = t, addIfCondition(e, { exp: t, block: e }); else { null != getAndRemoveAttr(e, "v-else") && (e.else = !0); var n = getAndRemoveAttr(e, "v-else-if"); n && (e.elseif = n) } }(f), function processOnce(e) { null != getAndRemoveAttr(e, "v-once") && (e.once = !0) }(f)), r || (r = f), a ? closeElement(f) : (i = f, o.push(f)) }, end: function end(e, t, n) { var r = o[o.length - 1]; o.length -= 1, i = o[o.length - 1], closeElement(r) }, chars: function chars(e, t, n) { if (i && (!Qe || "textarea" !== i.tag || i.attrsMap.placeholder !== e)) { var r, o, s = i.children; if (e = d || u()(e).call(e) ? function isTextTag(e) { return "script" === e.tag || "style" === e.tag }(i) ? e : mi(e) : s.length ? l ? "condense" === l && hi.test(e) ? "" : " " : a ? " " : "" : "") d || "condense" !== l || (e = e.replace(pi, " ")), !c && " " !== e && (r = function parseText(e, t) { var n = t ? Sr(t) : xr; if (n.test(e)) { for (var r, i, o, a = [], s = [], l = n.lastIndex = 0; r = n.exec(e);) { var c; (i = r.index) > l && (s.push(o = Ce()(e).call(e, l, i)), a.push(ve()(o))); var d = parseFilters(u()(c = r[1]).call(c)); a.push("_s(" + d + ")"), s.push({ "@binding": d }), l = i + r[0].length } return l < e.length && (s.push(o = Ce()(e).call(e, l)), a.push(ve()(o))), { expression: a.join("+"), tokens: s } } }(e, Kr)) ? o = { type: 2, expression: r.expression, tokens: r.tokens, text: e } : " " === e && s.length && " " === s[s.length - 1].text || (o = { type: 3, text: e }), o && s.push(o) } }, comment: function comment(e, t, n) { if (i) { var r = { type: 3, text: e, isComment: !0 }; 0, i.children.push(r) } } }), r } function processElement(e, t) { !function processKey(e) { var t = getBindingAttr(e, "key"); if (t) { e.key = t } }(e), e.plain = !e.key && !e.scopedSlots && !e.attrsList.length, function processRef(e) { var t = getBindingAttr(e, "ref"); t && (e.ref = t, e.refInFor = function checkInFor(e) { var t = e; for (; t;) { if (void 0 !== t.for) return !0; t = t.parent } return !1 }(e)) }(e), function processSlotContent(e) { var t; "template" === e.tag ? (t = getAndRemoveAttr(e, "scope"), e.slotScope = t || getAndRemoveAttr(e, "slot-scope")) : (t = getAndRemoveAttr(e, "slot-scope")) && (e.slotScope = t); var n = getBindingAttr(e, "slot"); n && (e.slotTarget = '""' === n ? '"default"' : n, e.slotTargetDynamic = !(!e.attrsMap[":slot"] && !e.attrsMap["v-bind:slot"]), "template" === e.tag || e.slotScope || addAttr(e, "slot", n, function getRawBindingAttr(e, t) { return e.rawAttrsMap[":" + t] || e.rawAttrsMap["v-bind:" + t] || e.rawAttrsMap[t] }(e, "slot"))); if ("template" === e.tag) { var r = getAndRemoveAttrByRegex(e, fi); if (r) { 0; var i = getSlotName(r), o = i.name, a = i.dynamic; e.slotTarget = o, e.slotTargetDynamic = a, e.slotScope = r.value || gi } } else { var l = getAndRemoveAttrByRegex(e, fi); if (l) { var u; 0; var c = e.scopedSlots || (e.scopedSlots = {}), d = getSlotName(l), f = d.name, h = d.dynamic, p = c[f] = createASTElement("template", [], e); p.slotTarget = f, p.slotTargetDynamic = h, p.children = s()(u = e.children).call(u, function (e) { if (!e.slotScope) return e.parent = p, !0 }), p.slotScope = l.value || gi, e.children = [], e.plain = !1 } } }(e), function processSlotOutlet(e) { "slot" === e.tag && (e.slotName = getBindingAttr(e, "name")) }(e), function processComponent(e) { var t; (t = getBindingAttr(e, "is")) && (e.component = t); null != getAndRemoveAttr(e, "inline-template") && (e.inlineTemplate = !0) }(e); for (var n = 0; n < Xr.length; n++)e = Xr[n](e, t) || e; return function processAttrs(e) { var t, n, r, i, o, a, s, l, u = e.attrsList; for (t = 0, n = u.length; t < n; t++) { if (r = i = u[t].name, o = u[t].value, ii.test(r)) if (e.hasBindings = !0, (a = parseModifiers(r.replace(ii, ""))) && (r = r.replace(di, "")), ci.test(r)) r = r.replace(ci, ""), o = parseFilters(o), (l = li.test(r)) && (r = Ce()(r).call(r, 1, -1)), a && (a.prop && !l && "innerHtml" === (r = De(r)) && (r = "innerHTML"), a.camel && !l && (r = De(r)), a.sync && (s = genAssignmentCode(o, "$event"), l ? addHandler(e, '"update:"+(' + r + ")", s, null, !1, 0, u[t], !0) : (addHandler(e, "update:" + De(r), s, null, !1, 0, u[t]), Ne(r) !== De(r) && addHandler(e, "update:" + Ne(r), s, null, !1, 0, u[t])))), a && a.prop || !e.component && ti(e.tag, e.attrsMap.type, r) ? addProp(e, r, o, u[t], l) : addAttr(e, r, o, u[t], l); else if (ri.test(r)) r = r.replace(ri, ""), (l = li.test(r)) && (r = Ce()(r).call(r, 1, -1)), addHandler(e, r, o, a, !1, 0, u[t], l); else { var c = (r = r.replace(ii, "")).match(ui), d = c && c[1]; l = !1, d && (r = Ce()(r).call(r, 0, -(d.length + 1)), li.test(d) && (d = Ce()(d).call(d, 1, -1), l = !0)), addDirective(e, r, i, o, d, l, a, u[t]) } else addAttr(e, r, ve()(o), u[t]), !e.component && "muted" === r && ti(e.tag, e.attrsMap.type, r) && addProp(e, r, "true", u[t]) } }(e), e } function processFor(e) { var t; if (t = getAndRemoveAttr(e, "v-for")) { var n = function parseFor(e) { var t, n, r = e.match(oi); if (!r) return; var i = {}; i.for = u()(t = r[2]).call(t); var o = u()(n = r[1]).call(n).replace(si, ""), a = o.match(ai); if (a) { var s, l, c; if (i.alias = u()(s = o.replace(ai, "")).call(s), i.iterator1 = u()(l = a[1]).call(l), a[2]) i.iterator2 = u()(c = a[2]).call(c) } else i.alias = o; return i }(t); n && extend(e, n) } } function addIfCondition(e, t) { e.ifConditions || (e.ifConditions = []), e.ifConditions.push(t) } function getSlotName(e) { var t = e.name.replace(fi, ""); return t || "#" !== e.name[0] && (t = "default"), li.test(t) ? { name: Ce()(t).call(t, 1, -1), dynamic: !0 } : { name: '"' + t + '"', dynamic: !1 } } function parseModifiers(e) { var t = e.match(di); if (t) { var n = {}; return B()(t).call(t, function (e) { n[Ce()(e).call(e, 1)] = !0 }), n } } var vi = /^xmlns:NS\d+/, yi = /^NS\d+:/; function cloneASTElement(e) { var t; return createASTElement(e.tag, Ce()(t = e.attrsList).call(t), e.parent) } var _i = [kr, Lr, { preTransformNode: function preTransformNode(e, t) { if ("input" === e.tag) { var n, r = e.attrsMap; if (!r["v-model"]) return; if ((r[":type"] || r["v-bind:type"]) && (n = getBindingAttr(e, "type")), r.type || n || !r["v-bind"] || (n = "(" + r["v-bind"] + ").type"), n) { var i = getAndRemoveAttr(e, "v-if", !0), o = i ? "&&(" + i + ")" : "", a = null != getAndRemoveAttr(e, "v-else", !0), s = getAndRemoveAttr(e, "v-else-if", !0), l = cloneASTElement(e); processFor(l), addRawAttr(l, "type", "checkbox"), processElement(l, t), l.processed = !0, l.if = "(" + n + ")==='checkbox'" + o, addIfCondition(l, { exp: l.if, block: l }); var u = cloneASTElement(e); getAndRemoveAttr(u, "v-for", !0), addRawAttr(u, "type", "radio"), processElement(u, t), addIfCondition(l, { exp: "(" + n + ")==='radio'" + o, block: u }); var c = cloneASTElement(e); return getAndRemoveAttr(c, "v-for", !0), addRawAttr(c, ":type", n), processElement(c, t), addIfCondition(l, { exp: i, block: c }), a ? l.else = !0 : s && (l.elseif = s), l } } } }]; var bi, wi, xi = { expectHTML: !0, modules: _i, directives: { model: function model(e, t, n) { n; var r = t.value, i = t.modifiers, o = e.tag, a = e.attrsMap.type; if (e.component) return genComponentModel(e, r, i), !1; if ("select" === o) !function genSelect(e, t, n) { var r = 'var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return ' + (n && n.number ? "_n(val)" : "val") + "});"; r = r + " " + genAssignmentCode(t, "$event.target.multiple ? $$selectedVal : $$selectedVal[0]"), addHandler(e, "change", r, null, !0) }(e, r, i); else if ("input" === o && "checkbox" === a) !function genCheckboxModel(e, t, n) { var r = n && n.number, i = getBindingAttr(e, "value") || "null", o = getBindingAttr(e, "true-value") || "true", a = getBindingAttr(e, "false-value") || "false"; addProp(e, "checked", "Array.isArray(" + t + ")?_i(" + t + "," + i + ")>-1" + ("true" === o ? ":(" + t + ")" : ":_q(" + t + "," + o + ")")), addHandler(e, "change", "var $$a=" + t + ",$$el=$event.target,$$c=$$el.checked?(" + o + "):(" + a + ");if(Array.isArray($$a)){var $$v=" + (r ? "_n(" + i + ")" : i) + ",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&(" + genAssignmentCode(t, "$$a.concat([$$v])") + ")}else{$$i>-1&&(" + genAssignmentCode(t, "$$a.slice(0,$$i).concat($$a.slice($$i+1))") + ")}}else{" + genAssignmentCode(t, "$$c") + "}", null, !0) }(e, r, i); else if ("input" === o && "radio" === a) !function genRadioModel(e, t, n) { var r = n && n.number, i = getBindingAttr(e, "value") || "null"; addProp(e, "checked", "_q(" + t + "," + (i = r ? "_n(" + i + ")" : i) + ")"), addHandler(e, "change", genAssignmentCode(t, i), null, !0) }(e, r, i); else if ("input" === o || "textarea" === o) !function genDefaultModel(e, t, n) { var r = e.attrsMap.type, i = n || {}, o = i.lazy, a = i.number, s = u()(i), l = !o && "range" !== r, c = o ? "change" : "range" === r ? jn : "input", d = "$event.target.value"; s && (d = "$event.target.value.trim()"), a && (d = "_n(" + d + ")"); var f = genAssignmentCode(t, d); l && (f = "if($event.target.composing)return;" + f), addProp(e, "value", "(" + t + ")"), addHandler(e, c, f, null, !0), (s || a) && addHandler(e, "blur", "$forceUpdate()") }(e, r, i); else if (!He.isReservedTag(o)) return genComponentModel(e, r, i), !1; return !0 }, text: function text(e, t) { t.value && addProp(e, "textContent", "_s(" + t.value + ")", t) }, html: function html(e, t) { t.value && addProp(e, "innerHTML", "_s(" + t.value + ")", t) } }, isPreTag: function isPreTag(e) { return "pre" === e }, isUnaryTag: Er, mustUseProp: un, canBeLeftOpenTag: Ar, isReservedTag: wn, getTagNamespace: getTagNamespace, staticKeys: function genStaticKeys(e) { return se()(e).call(e, function (e, t) { return oe()(e).call(e, t.staticKeys || []) }, []).join(",") }(_i) }, Ci = cached(function genStaticKeys$1(e) { return makeMap("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap" + (e ? "," + e : "")) }); function optimize(e, t) { e && (bi = Ci(t.staticKeys || ""), wi = t.isReservedTag || Be, function markStatic$1(e) { e.static = function isStatic(e) { var t; if (2 === e.type) return !1; if (3 === e.type) return !0; return !(!e.pre && (e.hasBindings || e.if || e.for || Ae(e.tag) || !wi(e.tag) || function isDirectChildOfTemplateFor(e) { for (; e.parent;) { if ("template" !== (e = e.parent).tag) return !1; if (e.for) return !0 } return !1 }(e) || !re()(t = te()(e)).call(t, bi))) }(e); if (1 === e.type) { if (!wi(e.tag) && "slot" !== e.tag && null == e.attrsMap["inline-template"]) return; for (var t = 0, n = e.children.length; t < n; t++) { var r = e.children[t]; markStatic$1(r), r.static || (e.static = !1) } if (e.ifConditions) for (var i = 1, o = e.ifConditions.length; i < o; i++) { var a = e.ifConditions[i].block; markStatic$1(a), a.static || (e.static = !1) } } }(e), function markStaticRoots(e, t) { if (1 === e.type) { if ((e.static || e.once) && (e.staticInFor = t), e.static && e.children.length && (1 !== e.children.length || 3 !== e.children[0].type)) return void (e.staticRoot = !0); if (e.staticRoot = !1, e.children) for (var n = 0, r = e.children.length; n < r; n++)markStaticRoots(e.children[n], t || !!e.for); if (e.ifConditions) for (var i = 1, o = e.ifConditions.length; i < o; i++)markStaticRoots(e.ifConditions[i].block, t) } }(e, !1)) } var Si = /^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/, ki = /\([^)]*?\);*$/, Ti = /^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/, Li = { esc: 27, tab: 9, enter: 13, space: 32, up: 38, left: 37, right: 39, down: 40, delete: [8, 46] }, Mi = { esc: ["Esc", "Escape"], tab: "Tab", enter: "Enter", space: [" ", "Spacebar"], up: ["Up", "ArrowUp"], left: ["Left", "ArrowLeft"], right: ["Right", "ArrowRight"], down: ["Down", "ArrowDown"], delete: ["Backspace", "Delete", "Del"] }, Ei = function genGuard(e) { return "if(" + e + ")return null;" }, Ai = { stop: "$event.stopPropagation();", prevent: "$event.preventDefault();", self: Ei("$event.target !== $event.currentTarget"), ctrl: Ei("!$event.ctrlKey"), shift: Ei("!$event.shiftKey"), alt: Ei("!$event.altKey"), meta: Ei("!$event.metaKey"), left: Ei("'button' in $event && $event.button !== 0"), middle: Ei("'button' in $event && $event.button !== 1"), right: Ei("'button' in $event && $event.button !== 2") }; function genHandlers(e, t) { var n = t ? "nativeOn:" : "on:", r = "", i = ""; for (var o in e) { var a = genHandler(e[o]); e[o] && e[o].dynamic ? i += o + "," + a + "," : r += '"' + o + '":' + a + "," } return r = "{" + Ce()(r).call(r, 0, -1) + "}", i ? n + "_d(" + r + ",[" + Ce()(i).call(i, 0, -1) + "])" : n + r } function genHandler(e) { if (!e) return "function(){}"; if (_e()(e)) return "[" + V()(e).call(e, function (e) { return genHandler(e) }).join(",") + "]"; var t = Ti.test(e.value), n = Si.test(e.value), r = Ti.test(e.value.replace(ki, "")); if (e.modifiers) { var i = "", o = "", a = []; for (var l in e.modifiers) if (Ai[l]) o += Ai[l], Li[l] && a.push(l); else if ("exact" === l) { var u, c, d = e.modifiers; o += Ei(V()(u = s()(c = ["ctrl", "shift", "alt", "meta"]).call(c, function (e) { return !d[e] })).call(u, function (e) { return "$event." + e + "Key" }).join("||")) } else a.push(l); return a.length && (i += function genKeyFilter(e) { return "if(!$event.type.indexOf('key')&&" + V()(e).call(e, genFilterCode).join("&&") + ")return null;" }(a)), o && (i += o), "function($event){" + i + (t ? "return " + e.value + "($event)" : n ? "return (" + e.value + ")($event)" : r ? "return " + e.value : e.value) + "}" } return t || n ? e.value : "function($event){" + (r ? "return " + e.value : e.value) + "}" } function genFilterCode(e) { var t = d()(e, 10); if (t) return "$event.keyCode!==" + t; var n = Li[e], r = Mi[e]; return "_k($event.keyCode," + ve()(e) + "," + ve()(n) + ",$event.key," + ve()(r) + ")" } var Pi = { on: function on(e, t) { e.wrapListeners = function (e) { return "_g(" + e + "," + t.value + ")" } }, bind: function bind$1(e, t) { e.wrapData = function (n) { return "_b(" + n + ",'" + e.tag + "'," + t.value + "," + (t.modifiers && t.modifiers.prop ? "true" : "false") + (t.modifiers && t.modifiers.sync ? ",true" : "") + ")" } }, cloak: noop }, Ri = function CodegenState(e) { this.options = e, this.warn = e.warn || baseWarn, this.transforms = pluckModuleFunction(e.modules, "transformCode"), this.dataGenFns = pluckModuleFunction(e.modules, "genData"), this.directives = extend(extend({}, Pi), e.directives); var t = e.isReservedTag || Be; this.maybeComponent = function (e) { return !!e.component || !t(e.tag) }, this.onceId = 0, this.staticRenderFns = [], this.pre = !1 }; function generate(e, t) { var n = new Ri(t); return { render: "with(this){return " + (e ? genElement(e, n) : '_c("div")') + "}", staticRenderFns: n.staticRenderFns } } function genElement(e, t) { if (e.parent && (e.pre = e.pre || e.parent.pre), e.staticRoot && !e.staticProcessed) return genStatic(e, t); if (e.once && !e.onceProcessed) return genOnce(e, t); if (e.for && !e.forProcessed) return genFor(e, t); if (e.if && !e.ifProcessed) return genIf(e, t); if ("template" !== e.tag || e.slotTarget || t.pre) { if ("slot" === e.tag) return function genSlot(e, t) { var n, r, i = e.slotName || '"default"', o = genChildren(e, t), a = "_t(" + i + (o ? "," + o : ""), s = e.attrs || e.dynamicAttrs ? genProps(V()(n = oe()(r = e.attrs || []).call(r, e.dynamicAttrs || [])).call(n, function (e) { return { name: De(e.name), value: e.value, dynamic: e.dynamic } })) : null, l = e.attrsMap["v-bind"]; !s && !l || o || (a += ",null"); s && (a += "," + s); l && (a += (s ? "" : ",null") + "," + l); return a + ")" }(e, t); var n; if (e.component) n = function genComponent(e, t, n) { var r = t.inlineTemplate ? null : genChildren(t, n, !0); return "_c(" + e + "," + genData$2(t, n) + (r ? "," + r : "") + ")" }(e.component, e, t); else { var r; (!e.plain || e.pre && t.maybeComponent(e)) && (r = genData$2(e, t)); var i = e.inlineTemplate ? null : genChildren(e, t, !0); n = "_c('" + e.tag + "'" + (r ? "," + r : "") + (i ? "," + i : "") + ")" } for (var o = 0; o < t.transforms.length; o++)n = t.transforms[o](e, n); return n } return genChildren(e, t) || "void 0" } function genStatic(e, t) { e.staticProcessed = !0; var n = t.pre; return e.pre && (t.pre = e.pre), t.staticRenderFns.push("with(this){return " + genElement(e, t) + "}"), t.pre = n, "_m(" + (t.staticRenderFns.length - 1) + (e.staticInFor ? ",true" : "") + ")" } function genOnce(e, t) { if (e.onceProcessed = !0, e.if && !e.ifProcessed) return genIf(e, t); if (e.staticInFor) { for (var n = "", r = e.parent; r;) { if (r.for) { n = r.key; break } r = r.parent } return n ? "_o(" + genElement(e, t) + "," + t.onceId++ + "," + n + ")" : genElement(e, t) } return genStatic(e, t) } function genIf(e, t, n, r) { var i; return e.ifProcessed = !0, function genIfConditions(e, t, n, r) { if (!e.length) return r || "_e()"; var i = e.shift(); return i.exp ? "(" + i.exp + ")?" + genTernaryExp(i.block) + ":" + genIfConditions(e, t, n, r) : "" + genTernaryExp(i.block); function genTernaryExp(e) { return n ? n(e, t) : e.once ? genOnce(e, t) : genElement(e, t) } }(Ce()(i = e.ifConditions).call(i), t, n, r) } function genFor(e, t, n, r) { var i = e.for, o = e.alias, a = e.iterator1 ? "," + e.iterator1 : "", s = e.iterator2 ? "," + e.iterator2 : ""; return e.forProcessed = !0, (r || "_l") + "((" + i + "),function(" + o + a + s + "){return " + (n || genElement)(e, t) + "})" } function genData$2(e, t) { var n = "{", r = function genDirectives(e, t) { var n = e.directives; if (!n) return; var r, i, o, a, s = "directives:[", l = !1; for (r = 0, i = n.length; r < i; r++) { o = n[r], a = !0; var u = t.directives[o.name]; u && (a = !!u(e, o, t.warn)), a && (l = !0, s += '{name:"' + o.name + '",rawName:"' + o.rawName + '"' + (o.value ? ",value:(" + o.value + "),expression:" + ve()(o.value) : "") + (o.arg ? ",arg:" + (o.isDynamicArg ? o.arg : '"' + o.arg + '"') : "") + (o.modifiers ? ",modifiers:" + ve()(o.modifiers) : "") + "},") } if (l) return Ce()(s).call(s, 0, -1) + "]" }(e, t); r && (n += r + ","), e.key && (n += "key:" + e.key + ","), e.ref && (n += "ref:" + e.ref + ","), e.refInFor && (n += "refInFor:true,"), e.pre && (n += "pre:true,"), e.component && (n += 'tag:"' + e.tag + '",'); for (var i = 0; i < t.dataGenFns.length; i++)n += t.dataGenFns[i](e); if (e.attrs && (n += "attrs:" + genProps(e.attrs) + ","), e.props && (n += "domProps:" + genProps(e.props) + ","), e.events && (n += genHandlers(e.events, !1) + ","), e.nativeEvents && (n += genHandlers(e.nativeEvents, !0) + ","), e.slotTarget && !e.slotScope && (n += "slot:" + e.slotTarget + ","), e.scopedSlots && (n += function genScopedSlots(e, t, n) { var r, i, o = e.for || P()(r = te()(t)).call(r, function (e) { var n = t[e]; return n.slotTargetDynamic || n.if || n.for || containsSlotChild(n) }), a = !!e.if; if (!o) for (var s = e.parent; s;) { if (s.slotScope && s.slotScope !== gi || s.for) { o = !0; break } s.if && (a = !0), s = s.parent } var l = V()(i = te()(t)).call(i, function (e) { return genScopedSlot(t[e], n) }).join(","); return "scopedSlots:_u([" + l + "]" + (o ? ",null,true" : "") + (!o && a ? ",null,false," + function hash(e) { var t = 5381, n = e.length; for (; n;)t = 33 * t ^ e.charCodeAt(--n); return t >>> 0 }(l) : "") + ")" }(e, e.scopedSlots, t) + ","), e.model && (n += "model:{value:" + e.model.value + ",callback:" + e.model.callback + ",expression:" + e.model.expression + "},"), e.inlineTemplate) { var o = function genInlineTemplate(e, t) { var n = e.children[0]; 0; if (n && 1 === n.type) { var r, i = generate(n, t.options); return "inlineTemplate:{render:function(){" + i.render + "},staticRenderFns:[" + V()(r = i.staticRenderFns).call(r, function (e) { return "function(){" + e + "}" }).join(",") + "]}" } }(e, t); o && (n += o + ",") } return n = n.replace(/,$/, "") + "}", e.dynamicAttrs && (n = "_b(" + n + ',"' + e.tag + '",' + genProps(e.dynamicAttrs) + ")"), e.wrapData && (n = e.wrapData(n)), e.wrapListeners && (n = e.wrapListeners(n)), n } function containsSlotChild(e) { var t; return 1 === e.type && ("slot" === e.tag || P()(t = e.children).call(t, containsSlotChild)) } function genScopedSlot(e, t) { var n = e.attrsMap["slot-scope"]; if (e.if && !e.ifProcessed && !n) return genIf(e, t, genScopedSlot, "null"); if (e.for && !e.forProcessed) return genFor(e, t, genScopedSlot); var r = e.slotScope === gi ? "" : String(e.slotScope), i = "function(" + r + "){return " + ("template" === e.tag ? e.if && n ? "(" + e.if + ")?" + (genChildren(e, t) || "undefined") + ":undefined" : genChildren(e, t) || "undefined" : genElement(e, t)) + "}", o = r ? "" : ",proxy:true"; return "{key:" + (e.slotTarget || '"default"') + ",fn:" + i + o + "}" } function genChildren(e, t, n, r, i) { var o = e.children; if (o.length) { var a = o[0]; if (1 === o.length && a.for && "template" !== a.tag && "slot" !== a.tag) { var s = n ? t.maybeComponent(a) ? ",1" : ",0" : ""; return "" + (r || genElement)(a, t) + s } var l = n ? function getNormalizationType(e, t) { for (var n = 0, r = 0; r < e.length; r++) { var i, o, a = e[r]; if (1 === a.type) { if (needsNormalization(a) || a.ifConditions && P()(i = a.ifConditions).call(i, function (e) { return needsNormalization(e.block) })) { n = 2; break } (t(a) || a.ifConditions && P()(o = a.ifConditions).call(o, function (e) { return t(e.block) })) && (n = 1) } } return n }(o, t.maybeComponent) : 0, u = i || genNode; return "[" + V()(o).call(o, function (e) { return u(e, t) }).join(",") + "]" + (l ? "," + l : "") } } function needsNormalization(e) { return void 0 !== e.for || "template" === e.tag || "slot" === e.tag } function genNode(e, t) { return 1 === e.type ? genElement(e, t) : 3 === e.type && e.isComment ? function genComment(e) { return "_e(" + ve()(e.text) + ")" }(e) : function genText(e) { return "_v(" + (2 === e.type ? e.expression : transformSpecialNewlines(ve()(e.text))) + ")" }(e) } function genProps(e) { for (var t = "", n = "", r = 0; r < e.length; r++) { var i = e[r], o = transformSpecialNewlines(i.value); i.dynamic ? n += i.name + "," + o + "," : t += '"' + i.name + '":' + o + "," } return t = "{" + Ce()(t).call(t, 0, -1) + "}", n ? "_d(" + t + ",[" + Ce()(n).call(n, 0, -1) + "])" : t } function transformSpecialNewlines(e) { return e.replace(/\u2028/g, "\\u2028").replace(/\u2029/g, "\\u2029") } new RegExp("\\b" + "do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b") + "\\b"), new RegExp("\\b" + "delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b") + "\\s*\\([^\\)]*\\)"); function createFunction(e, t) { try { return new Function(e) } catch (n) { return t.push({ err: n, code: e }), noop } } var Oi, Di = function createCompilerCreator(e) { return function createCompiler(t) { function compile(n, r) { var i, o = me()(t), a = [], s = []; if (r) for (var l in r.modules && (o.modules = oe()(i = t.modules || []).call(i, r.modules)), r.directives && (o.directives = extend(me()(t.directives || null), r.directives)), r) "modules" !== l && "directives" !== l && (o[l] = r[l]); o.warn = function warn(e, t, n) { (n ? s : a).push(e) }; var c = e(u()(n).call(n), o); return c.errors = a, c.tips = s, c } return { compile: compile, compileToFunctions: function createCompileToFunctionFn(e) { var t = me()(null); return function compileToFunctions(n, r, i) { var o; (r = extend({}, r)).warn, delete r.warn; var a = r.delimiters ? String(r.delimiters) + n : n; if (t[a]) return t[a]; var s = e(n, r), l = {}, u = []; return l.render = createFunction(s.render, u), l.staticRenderFns = V()(o = s.staticRenderFns).call(o, function (e) { return createFunction(e, u) }), t[a] = l } }(compile) } } }(function baseCompile(e, t) { var n = parse(u()(e).call(e), t); !1 !== t.optimize && optimize(n, t); var r = generate(n, t); return { ast: n, render: r.render, staticRenderFns: r.staticRenderFns } })(xi), Fi = (Di.compile, Di.compileToFunctions); function getShouldDecode(e) { var t; return (Oi = Oi || document.createElement("div")).innerHTML = e ? '<a href="\n"/>' : '<div a="\n"/>', he()(t = Oi.innerHTML).call(t, "&#10;") > 0 } var Ii = !!Ze && getShouldDecode(!1), Ni = !!Ze && getShouldDecode(!0), $i = cached(function (e) { var t = query(e); return t && t.innerHTML }), Bi = Vue.prototype.$mount; Vue.prototype.$mount = function (e, t) { if ((e = e && query(e)) === document.body || e === document.documentElement) return this; var n = this.$options; if (!n.render) { var r = n.template; if (r) if ("string" == typeof r) "#" === r.charAt(0) && (r = $i(r)); else { if (!r.nodeType) return this; r = r.innerHTML } else e && (r = function getOuterHTML(e) { if (e.outerHTML) return e.outerHTML; var t = document.createElement("div"); return t.appendChild(e.cloneNode(!0)), t.innerHTML }(e)); if (r) { 0; var i = Fi(r, { outputSourceRange: !1, shouldDecodeNewlines: Ii, shouldDecodeNewlinesForHref: Ni, delimiters: n.delimiters, comments: n.comments }, this), o = i.render, a = i.staticRenderFns; n.render = o, n.staticRenderFns = a } } return Bi.call(this, e, t) }, Vue.compile = Fi, t.a = Vue }).call(this, n(48)) }, function(l, u, c) { var d, f, p; c(196), c(195), c(127), c(23), c(24), c(29), c(46), c(16), c(51), c(147), c(25), c(35), c(143); var m = c(718), v = c(26), _ = c(998), x = c(463), C = c(18), k = c(1499), M = c(41), A = c(40), P = c(120), O = c(254), D = c(10), F = c(112); c(404); var I, N = c(1488), $ = c(1487), B = c(1484), z = c(36), j = c(5), U = c(45), q = c(55), H = c(11), V = c(6), G = c(7), W = c(17), Y = c(3419), Z = c(402), K = c(742), X = c(313), J = c(38), Q = c(3409), ee = c(620), te = c(447), ne = c(446), re = c(28), ie = c(43); function _createForOfIteratorHelper(t) { if (void 0 === X || null == _(t)) { if (v(t) || (t = function _unsupportedIterableToArray(e, t) { var n; if (!e) return; if ("string" == typeof e) return _arrayLikeToArray(e, t); var r = C(n = Object.prototype.toString.call(e)).call(n, 8, -1); "Object" === r && e.constructor && (r = e.constructor.name); if ("Map" === r || "Set" === r) return x(r); if ("Arguments" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)) return _arrayLikeToArray(e, t) }(t))) { var r = 0, i = function F() { }; return { s: i, n: function n() { return r >= t.length ? { done: !0 } : { done: !1, value: t[r++] } }, e: function e(t) { throw t }, f: i } } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } var o, a, l = !0, u = !1; return { s: function s() { o = m(t) }, n: function n() { var e = o.next(); return l = e.done, e }, e: function e(t) { u = !0, a = t }, f: function f() { try { l || null == o.return || o.return() } finally { if (u) throw a } } } } function _arrayLikeToArray(e, t) { (null == t || t > e.length) && (t = e.length); for (var n = 0, r = new Array(t); n < t; n++)r[n] = e[n]; return r } function _createSuper(e) { return function () { var t, n = $(e); if (function _isNativeReflectConstruct() { if ("undefined" == typeof Reflect || !k) return !1; if (k.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Date.prototype.toString.call(k(Date, [], function () { })), !0 } catch (e) { return !1 } }()) { var r = $(this).constructor; t = k(n, arguments, r) } else t = n.apply(this, arguments); return N(this, t) } } I = function (r) { "use strict"; function t(e, t, n, r) { return new (n || (n = re))(function (i, s) { function a(e) { try { u(r.next(e)) } catch (e) { s(e) } } function o(e) { try { u(r.throw(e)) } catch (e) { s(e) } } function u(e) { e.done ? i(e.value) : new n(function (t) { t(e.value) }).then(a, o) } u((r = r.apply(e, t || [])).next()) }) } var l = function () { function i(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "https://{user}.carto.com"; if (te(this, i), !e) throw new Error("Username is required"); if (!t) throw new Error("Api key is required"); this._username = e, this._apiKey = t, this._serverUrlTemplate = n } return ne(i, [{ key: "username", get: function get() { return this._username }, set: function set(e) { this._username = e } }, { key: "apiKey", get: function get() { return this._apiKey }, set: function set(e) { this._apiKey = e } }, { key: "serverUrlTemplate", get: function get() { return this._serverUrlTemplate }, set: function set(e) { this._serverUrlTemplate = e } }, { key: "serverURL", get: function get() { var e = this._serverUrlTemplate.replace("{user}", this._username); return ee(e).call(e, "/") || (e += "/"), e } }], [{ key: "DEFAULT_SERVER_URL_TEMPLATE", get: function get() { return "https://{user}.carto.com" } }, { key: "DEFAULT_PUBLIC_API_KEY", get: function get() { return "default_public" } }]), i }(); new l("username", "default_public"); var u = function () { function r(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (e) { var t = 16 * Math.random() | 0; return ("x" === e ? t : 3 & t | 8).toString(16) }); te(this, r), this.source = e, this.name = t, this.groupId = n } return ne(r, [{ key: "getHeaders", value: function getHeaders() { return [["Carto-Event-Source", this.source], ["Carto-Event", this.name], ["Carto-Event-Group-Id", this.groupId]] } }]), r }(), c = function s(e, t) { return (c = Q || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]) })(e, t) }; function n(e, t) { function i() { this.constructor = e } c(e, t), e.prototype = null === t ? J(t) : (i.prototype = t.prototype, new i) } function a(e, t, n, r) { return new (n || (n = re))(function (i, s) { function a(e) { try { u(r.next(e)) } catch (e) { s(e) } } function o(e) { try { u(r.throw(e)) } catch (e) { s(e) } } function u(e) { e.done ? i(e.value) : new n(function (t) { t(e.value) }).then(a, o) } u((r = r.apply(e, t || [])).next()) }) } function o(e, t) { var n, r, i, a, s = { label: 0, sent: function sent() { if (1 & i[0]) throw i[1]; return i[1] }, trys: [], ops: [] }; return a = { next: o(0), throw: o(1), return: o(2) }, "function" == typeof X && (a[K] = function () { return this }), a; function o(o) { return function (a) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; s;)try { if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i; switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) { case 0: case 1: i = o; break; case 4: return s.label++, { value: o[1], done: !1 }; case 5: s.label++, r = o[1], o = [0]; continue; case 7: o = s.ops.pop(), s.trys.pop(); continue; default: if (!(i = (i = s.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) { s = 0; continue } if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) { s.label = o[1]; break } if (6 === o[0] && s.label < i[1]) { s.label = i[1], i = o; break } if (i && s.label < i[2]) { s.label = i[2], s.ops.push(o); break } i[2] && s.ops.pop(), s.trys.pop(); continue }o = t.call(e, s) } catch (e) { o = [6, e], r = 0 } finally { n = i = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, a]) } } } var d = { TOO_MANY_REQUESTS: 429, SERVICE_UNAVAILABLE: 503 }, f = Z({ __proto__: null, QUERY_LIMIT: 1024, DEFAULT_MAX_API_REQUESTS_RETRIES: 0, HTTP_ERRORS: d }), p = function () { function e(e, t, n) { var r = (void 0 === n ? {} : n).maxApiRequestsRetries; this._callsLeft = -1, this._retryAfter = -1, this._retryTimeoutId = -1, this._fetching = !1, this._scheduleDebounce = -1, this._maxApiRequestsRetries = 0, this._credentials = e, this._endpointServerURL = t, this._queue = [], Y(r) && r >= 0 && (this._maxApiRequestsRetries = r) } return W(e.prototype, "apiKey", { get: function get() { return this._credentials.apiKey }, set: function set(e) { this._credentials.apiKey = e }, enumerable: !0, configurable: !0 }), W(e.prototype, "endpointServerURL", { get: function get() { return this._endpointServerURL }, enumerable: !0, configurable: !0 }), W(e.prototype, "callsLeft", { get: function get() { return this._callsLeft }, set: function set(e) { this._callsLeft = e }, enumerable: !0, configurable: !0 }), W(e.prototype, "maxApiRequestsRetries", { set: function set(e) { this._maxApiRequestsRetries = e }, enumerable: !0, configurable: !0 }), e.prototype._scheduleRequest = function (e, t, n, r) { var i = this; this._queue.push({ resolve: e, reject: t, requestInfo: n, requestInit: r, retries_count: -1 }), clearTimeout(this._scheduleDebounce), this._scheduleDebounce = window.setTimeout(function () { i._scheduler() }, 0) }, e.prototype.addHeadersTo = function (e, t) { void 0 === t && (t = []), void 0 !== e && (e.headers || (e.headers = new Headers), t.length > 0 && G(t).call(t, function (t) { e.headers.append(t[0], t[1]) })) }, e.prototype._scheduler = function () { var e = this; if (0 !== this._queue.length && -1 === this._retryTimeoutId && !this._fetching) if (-1 === this._retryAfter) { for (var t = -1 !== this._callsLeft ? Math.min(Math.max(1, this._callsLeft), this._queue.length) : 1, n = [], r = 0; r < t; r++)this._fetching = !0, n.push(this._fetch(this._queue[r], r)); re.all(n).then(function (t) { var n; e._queue = V(n = e._queue).call(n, function (e, n) { return -1 === H(t).call(t, n) }), e._fetching = !1, e._queue.length > 0 && e._scheduler() }) } else this._retryTimeoutId = window.setTimeout(function () { e._retryTimeoutId = -1, e._retryAfter = -1, e._callsLeft += 1, e._scheduler() }, 1e3 * this._retryAfter) }, e.prototype._fetch = function (e, t) { var n = this, r = e.resolve, i = e.reject, s = e.requestInfo, l = e.requestInit, u = e.retries_count; return fetch(s, l).then(function (t) { return a(n, void 0, void 0, function () { var n, r, i; return o(this, function (s) { switch (s.label) { case 0: return this._retryAfter = this._getRateLimitHeader(t.headers, "Retry-After", this._retryAfter), this._callsLeft = this._getRateLimitHeader(t.headers, "Carto-Rate-Limit-Remaining", this._callsLeft), [4, function h(e) { return a(this, void 0, void 0, function () { var t; return o(this, function (n) { var r; switch (n.label) { case 0: return U(r = e.headers.get("content-type") || "").call(r, "application/json") ? [4, e.json()] : [3, 2]; case 1: return t = n.sent(), [3, 4]; case 2: return [4, e.text()]; case 3: t = n.sent(), n.label = 4; case 4: return [2, t] } }) }) }(t)]; case 1: if (n = s.sent(), r = t.status === d.TOO_MANY_REQUESTS && ("datasource" === n.detail || "rate-limit" === n.detail), (t.status === d.SERVICE_UNAVAILABLE || r) && (e.retries_count = -1 !== u ? u - 1 : this._maxApiRequestsRetries, i = .5 * (this._maxApiRequestsRetries - e.retries_count) + .5, this._retryAfter = Math.max(this._retryAfter, i)), 0 === e.retries_count) throw new Error("Too many retries"); return t.status === d.TOO_MANY_REQUESTS || t.status === d.SERVICE_UNAVAILABLE ? (this._scheduler(), [2, null]) : [2, n] } }) }) }).then(function (e) { var n, o; if (null !== e) { if (e.error) { var a = (null === (o = null === (n = e) || void 0 === n ? void 0 : n.error) || void 0 === o ? void 0 : o.length) ? e.error[0] : "Unknown error"; i(new Error(a)) } else r(e); return t } }).catch(function (e) { return i(e), t }) }, e.prototype._getRateLimitHeader = function (e, t, n) { var r = e.get(t); return null !== r ? q(r, 10) : n }, W(e.prototype, "queued", { get: function get() { return this._queue.length }, enumerable: !0, configurable: !0 }), e }(); var m = function (e) { function t(t, n) { void 0 === n && (n = {}); var r = t.serverURL + "api/v2/sql/copyfrom"; return e.call(this, t, r, n) || this } return n(t, e), t.prototype.copy = function (e, t, n, r) { var i = this; void 0 === r && (r = {}); var o = "COPY " + t + " (" + n + ") FROM STDIN WITH (FORMAT csv, HEADER true);", a = this.endpointServerURL + "?api_key=" + this.apiKey + "&q=" + o, s = { method: "POST", body: new Blob([e]) }, l = r.event ? r.event.getHeaders() : []; return this.addHeadersTo(s, l), new re(function (e, t) { i._scheduleRequest(e, t, a, s) }) }, t }(p), v = function (e) { function t(t, n) { void 0 === n && (n = {}); var r = t.serverURL + "api/v2/sql/copyto"; return e.call(this, t, r, n) || this } return n(t, e), t.prototype.copyUrl = function (e, t, n) { void 0 === t && (t = "carto_copyto.csv"), void 0 === n && (n = "FORMAT csv, HEADER true"); var r = "COPY (" + e + ") TO stdout WITH(" + n + ")"; return this.endpointServerURL + "?api_key=" + this.apiKey + "&q=" + r + "&filename=" + t }, t.prototype.copy = function (e, t, n) { var r = this, i = this.copyUrl(e, t, n); return new re(function (e, t) { r._scheduleRequest(e, t, i) }) }, t }(p), y = { string: "text", integer: "numeric", geojson: "json" }, _ = function () { function e() { } return e.drop = function (e, t) { return t && t.ifExists ? "DROP TABLE IF EXISTS " + e + ";" : "DROP TABLE " + e + ";" }, e.create = function (e, t, n) { var r = "CREATE TABLE " + e + " ({rows});"; n && n.ifNotExists && (r = "CREATE TABLE IF NOT EXISTS " + e + " ({rows});"); var i = j(t).call(t, function (e) { if ("string" == typeof e) return e; var t; e.type = (t = e.type, y[t] || t); var n = '"' + e.name + '" ' + e.type; return e.extra ? n + " " + e.extra : n }).join(", "); return r.replace(/{rows}/, i) }, e }(), x = function (e) { function t(t, n) { void 0 === n && (n = {}); var r = t.serverURL + "api/v2/sql"; return e.call(this, t, r, n) || this } return n(t, e), t.prototype.query = function (e, t) { void 0 === t && (t = {}); var n = [["api_key", this.apiKey], ["q", e]]; t.extraParams && n.push.apply(n, t.extraParams); var r = t.event ? t.event.getHeaders() : []; return e.length < 1024 ? this.prepareGetRequest(n, r) : this.preparePostRequest(n, r) }, t.prototype.prepareGetRequest = function (e, t) { var n = this; void 0 === t && (t = []); var r = encodeURI(j(e).call(e, function (e) { return e[0] + "=" + e[1] }).join("&")), i = { method: "GET" }; return this.addHeadersTo(i, t), new re(function (e, t) { n._scheduleRequest(e, t, n.endpointServerURL + "?" + r, i) }) }, t.prototype.preparePostRequest = function (e, t) { var n = this; void 0 === t && (t = []); var r = new FormData; G(e).call(e, function (e) { return r.set(e[0], e[1]) }); var i = { method: "POST", body: r }; return this.addHeadersTo(i, t), new re(function (e, t) { n._scheduleRequest(e, t, "" + n.endpointServerURL, i) }) }, t }(p), C = function () { function e(e, t) { var n = (void 0 === t ? {} : t).maxApiRequestsRetries; this._credentials = e, this._copyToManager = new v(this._credentials, { maxApiRequestsRetries: n }), this._queryManager = new x(this._credentials, { maxApiRequestsRetries: n }), this._copyFromManager = new m(this._credentials, { maxApiRequestsRetries: n }); var r = new l(e.username, l.DEFAULT_PUBLIC_API_KEY, e.serverUrlTemplate); this._publicQueryManager = new x(r, { maxApiRequestsRetries: n }) } return W(e, "DDL", { get: function get() { return _ }, enumerable: !0, configurable: !0 }), e.prototype.copyFrom = function (e, t, n, r) { return void 0 === r && (r = {}), this._copyFromManager.copy(e, t, n, r) }, e.prototype.exportURL = function (e) { return this._copyToManager.copyUrl(e) }, e.prototype.query = function (e, t) { var n; void 0 === t && (t = {}); var r = z(n = e.replace(/\s+/g, " ")).call(n); return this._queryManager.query(r, t) }, e.prototype.truncate = function (e) { return this._queryManager.query("TRUNCATE " + e + ";") }, e.prototype.create = function (e, t, n) { void 0 === n && (n = {}); var r = _.create(e, t, n.createOptions); return this._queryManager.query(r, { event: n.event }) }, e.prototype.drop = function (e, t) { void 0 === t && (t = {}); var n = _.drop(e, t.dropOptions); return this._queryManager.query(n, { event: t.event }) }, e.prototype.grantPublicRead = function (e, t) { return void 0 === t && (t = {}), a(this, void 0, void 0, function () { var n, r; return o(this, function (i) { switch (i.label) { case 0: return (r = this._publicRole) ? [3, 2] : [4, this.getRole(t)]; case 1: r = i.sent(), i.label = 2; case 2: return n = r, [2, this.grantReadToRole(e, n, t)] } }) }) }, e.prototype.grantReadToRole = function (e, t, n) { void 0 === t && (t = "publicuser"), void 0 === n && (n = {}); var r = "GRANT SELECT on " + e + ' TO "' + t + '"'; return this.query(r, n) }, e.prototype.transaction = function (e) { var t = "\n      BEGIN;\n        " + e.join("\n") + "\n      COMMIT;\n    "; return this._queryManager.query(t) }, e.prototype.setApiKey = function (e) { this._credentials.apiKey = e, this._queryManager.apiKey = e, this._copyToManager.apiKey = e, this._copyFromManager.apiKey = e }, e.prototype.getRole = function (e) { var t = this; return void 0 === e && (e = {}), this._publicQueryManager.query("SELECT current_user as rolename", e).then(function (e) { if (e.error) throw new Error(e.error); if (0 === e.rows.length) throw new Error("Cannot grant: got no current_user data"); var n = e.rows[0].rolename; return t._publicRole = n, n }) }, e }(), k = function (e) { B(y, function () { function _class(e, t) { te(this, _class); this.errorCode = e, this.message = t } return _class }()); var t = _createSuper(y); function y(e) { var n; return te(this, y), (n = t.call(this, "DUPLICATED_DATASETS", "Some datasets are duplicated")).datasets = e, n } return y }(); function E(e) { return { id: e.id, name: e.name, description: e.description, thumbnail: e.thumbnail, isprivate: e.isprivate, config: e.config, lastmodified: e.lastmodified } } function T(e, n, r) { var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}; return t(this, void 0, void 0, F.mark(function _callee() { var t, o; return F.wrap(function _callee$(a) { for (; ;)switch (a.prev = a.next) { case 0: return t = { extraParams: [["format", "csv"]], event: i.event }, a.next = 3, r.query("SELECT * FROM ".concat(n), t); case 3: if ("string" == typeof (o = a.sent)) { a.next = 6; break } throw new Error(o.error); case 6: return a.abrupt("return", { name: e, file: o }); case 7: case "end": return a.stop() } }, _callee) })) } function g(e, n, r) { var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}; return t(this, void 0, void 0, F.mark(function _callee3() { var o, a, s, l; return F.wrap(function _callee3$(u) { for (; ;)switch (u.prev = u.next) { case 0: return u.next = 2, r.query(D(o = "SELECT * FROM ".concat(e.vis, " WHERE id = '")).call(o, n, "'"), i); case 2: if (!(a = u.sent).error) { u.next = 5; break } throw new Error(a.error); case 5: if (0 !== a.rows.length) { u.next = 7; break } return u.abrupt("return", null); case 7: return s = E(a.rows[0]), u.next = 10, function (e, n, r) { var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}; return t(this, void 0, void 0, F.mark(function _callee2() { var t, o, a; return F.wrap(function _callee2$(s) { for (; ;)switch (s.prev = s.next) { case 0: return s.next = 2, r.query(D(t = D(o = "\n    WITH datasets AS (SELECT dataset FROM ".concat(e.visToDatasets, " WHERE vis = '")).call(o, n, "')\n    SELECT t.id, t.name, t.tablename FROM ")).call(t, e.datasets, " t, datasets u\n    WHERE t.id = u.dataset\n  "), i); case 2: if (!(a = s.sent).error) { s.next = 5; break } throw new Error(a.error); case 5: return s.abrupt("return", a.rows); case 6: case "end": return s.stop() } }, _callee2) })) }(e, n, r, i); case 10: if (0 !== (l = u.sent).length) { u.next = 15; break } u.t0 = { vis: s, datasets: [] }, u.next = 20; break; case 15: return u.t1 = s, u.next = 18, re.all(j(l).call(l, function (e) { return T(e.name, e.tablename, r, i) })); case 18: u.t2 = u.sent, u.t0 = { vis: u.t1, datasets: u.t2 }; case 20: return u.abrupt("return", u.t0); case 21: case "end": return u.stop() } }, _callee3) })) } function S(e, t, n) { var r, i; return D(r = D(i = "".concat(e, "_")).call(i, t ? "public" : "private", "_v")).call(r, n) } function R(e) { return "".concat(e, "_datasets") } function b(e) { return "".concat(e, "_datasets_vis") } var I = function () { function L(e, t, n, r) { var i, o, a; te(this, L), this._isReady = !1, this._namespace = e, this._tableName = S(e, r, n), this._datasetsTableName = R(this._tableName), this._datasetsVisTableName = b(this._tableName), this._isPublic = r, this.VIS_FIELDS = { id: { name: "id", type: "uuid", extra: "PRIMARY KEY DEFAULT ".concat(this._namespace, "_create_uuid()"), omitOnInsert: !0 }, name: { name: "name", type: "text", extra: "NOT NULL", format: this.escapeOrNull }, description: { name: "description", type: "text", format: this.escapeOrNull }, thumbnail: { name: "thumbnail", type: "text", format: this.escapeOrNull }, isprivate: { name: "isprivate", type: "boolean", format: function format(e) { return void 0 !== e && e } }, config: { name: "config", type: "json", format: this.escapeOrNull }, lastmodified: { name: "lastmodified", type: "timestamp", extra: "NOT NULL DEFAULT now()", omitOnInsert: !0 } }, this.DATASET_COLUMNS = ['"id" uuid PRIMARY KEY DEFAULT '.concat(this._namespace, "_create_uuid()"), '"tablename" text UNIQUE NOT NULL', '"name" text UNIQUE NOT NULL'], this.DATASET_VIS_COLUMNS = ['"vis" uuid NOT NULL', '"dataset" uuid NOT NULL'], this.FIELD_NAMES = j(i = O(this.VIS_FIELDS)).call(i, function (e) { return e.name }), this.FIELD_NAMES_INSERT = j(o = V(a = O(this.VIS_FIELDS)).call(a, function (e) { return !e.omitOnInsert })).call(o, function (e) { return e.name }), this._sql = t } return ne(L, [{ key: "init", value: function init() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; return t(this, void 0, void 0, F.mark(function _callee4() { var t; return F.wrap(function _callee4$(n) { for (; ;)switch (n.prev = n.next) { case 0: return n.next = 2, this._checkMissingTables(); case 2: if (t = n.sent, n.t0 = t, !n.t0) { n.next = 7; break } return n.next = 7, this._initTables({ event: e.event }); case 7: return this._isReady = !0, n.abrupt("return", t); case 9: case "end": return n.stop() } }, _callee4, this) })) } }, { key: "isInitialized", value: function isInitialized() { return t(this, void 0, void 0, F.mark(function _callee5() { var e; return F.wrap(function _callee5$(t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, this._checkMissingTables(); case 2: return e = t.sent, t.abrupt("return", (this._isReady = !e, this._isReady)); case 4: case "end": return t.stop() } }, _callee5, this) })) } }, { key: "getVisualizations", value: function getVisualizations() { var e, t, n, r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; return this._sql.query(D(e = "\n      SELECT ".concat(j(t = V(n = this.FIELD_NAMES).call(n, function (e) { return "config" !== e })).call(t, function (e) { return '"'.concat(e, '"') }).join(", "), "\n      FROM ")).call(e, this._tableName, "\n      "), r).then(function (e) { var t; if (e.error) throw new Error(e.error); return 0 === e.rows.length ? [] : j(t = e.rows).call(t, E) }) } }, { key: "getVisualization", value: function getVisualization(e) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return t(this, void 0, void 0, F.mark(function _callee6() { return F.wrap(function _callee6$(t) { for (; ;)switch (t.prev = t.next) { case 0: return t.abrupt("return", g({ vis: this._tableName, datasets: this._datasetsTableName, visToDatasets: this._datasetsVisTableName }, e, this._sql, n)); case 1: case "end": return t.stop() } }, _callee6, this) })) } }, { key: "getDatasetData", value: function getDatasetData(e, n) { return t(this, void 0, void 0, F.mark(function _callee7() { return F.wrap(function _callee7$(t) { for (; ;)switch (t.prev = t.next) { case 0: return t.abrupt("return", T(e, n, this._sql)); case 1: case "end": return t.stop() } }, _callee7, this) })) } }, { key: "getDataset", value: function getDataset(e) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return t(this, void 0, void 0, F.mark(function _callee8() { var t, r; return F.wrap(function _callee8$(i) { for (; ;)switch (i.prev = i.next) { case 0: return i.next = 2, this._sql.query(D(t = "\n      SELECT * FROM ".concat(this._datasetsTableName, ' WHERE "name"=\'')).call(t, e, "'\n    "), n); case 2: if (!(r = i.sent).error) { i.next = 5; break } throw new Error("Failed to get dataset ".concat(e)); case 5: return i.abrupt("return", r.rows[0] || null); case 6: case "end": return i.stop() } }, _callee8, this) })) } }, { key: "getDatasets", value: function getDatasets() { return t(this, void 0, void 0, F.mark(function _callee9() { var e; return F.wrap(function _callee9$(t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, this._sql.query("\n      SELECT * FROM ".concat(this._datasetsTableName, "\n    ")); case 2: if (!(e = t.sent).error) { t.next = 5; break } throw new Error("Failed to read datasets"); case 5: return t.abrupt("return", e.rows); case 6: case "end": return t.stop() } }, _callee9, this) })) } }, { key: "getVisForDataset", value: function getVisForDataset(e) { return t(this, void 0, void 0, F.mark(function _callee10() { var t, n, r, i; return F.wrap(function _callee10$(o) { for (; ;)switch (o.prev = o.next) { case 0: return o.next = 2, this._sql.query(D(t = D(n = "\n      WITH dataset_vis as (SELECT * FROM ".concat(this._datasetsVisTableName, ' WHERE "dataset" = \'')).call(n, e, '\')\n\n      SELECT t."name", t."id", t."thumbnail", t."isprivate"\n      FROM ')).call(t, this._tableName, ' t, dataset_vis u WHERE t."id" = u."vis"\n    ')); case 2: if (!(i = o.sent).error) { o.next = 5; break } throw new Error("Failed to read visualizations"); case 5: return o.abrupt("return", j(r = i.rows).call(r, E)); case 6: case "end": return o.stop() } }, _callee10, this) })) } }, { key: "deleteVisualization", value: function deleteVisualization(e) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return t(this, void 0, void 0, F.mark(function _callee11() { var t, r; return F.wrap(function _callee11$(i) { for (; ;)switch (i.prev = i.next) { case 0: return i.next = 2, this._sql.query(D(t = "DELETE FROM ".concat(this._datasetsVisTableName, ' WHERE "vis"=\'')).call(t, e, "'"), n); case 2: return i.next = 4, this._sql.query(D(r = "DELETE FROM ".concat(this._tableName, ' WHERE "id"=\'')).call(r, e, "'"), n); case 4: return i.next = 6, this.deleteOrphanDatasets(n); case 6: case "end": return i.stop() } }, _callee11, this) })) } }, { key: "deleteDataset", value: function deleteDataset() { return t(this, void 0, void 0, F.mark(function _callee12() { return F.wrap(function _callee12$(e) { for (; ;)switch (e.prev = e.next) { case 0: throw new Error("deleteDataset Not implemented yet"); case 1: case "end": return e.stop() } }, _callee12) })) } }, { key: "createVisualization", value: function createVisualization(e, n) { var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; return t(this, void 0, void 0, F.mark(function _callee13() { var t; return F.wrap(function _callee13$(i) { for (; ;)switch (i.prev = i.next) { case 0: return i.next = 2, this.preventAccidentalDatasetsOverwrite(r.overwriteDatasets, n); case 2: return i.next = 4, this.insertVisTable(e, { event: r.event }); case 4: if (null !== (t = i.sent)) { i.next = 9; break } i.t0 = null, i.next = 12; break; case 9: return i.next = 11, this.uploadAndLinkDatasetsTo(t.id, n, e.isprivate, r); case 11: i.t0 = P(P({}, t), e); case 12: return i.abrupt("return", i.t0); case 13: case "end": return i.stop() } }, _callee13, this) })) } }, { key: "uploadDataset", value: function uploadDataset(e) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : { overwrite: !1 }; return t(this, void 0, void 0, F.mark(function _callee14() { var t, r, i, o, a, s, l, u, c, d, f, h, p, m, g, v; return F.wrap(function _callee14$(y) { for (; ;)switch (y.prev = y.next) { case 0: if (o = D(t = "".concat(this._tableName, "_")).call(t, e.name), e.columns) { y.next = 3; break } throw new Error("Need dataset column information"); case 3: return y.next = 5, this.getDataset(e.name, { event: n.event }); case 5: if (a = y.sent, y.t0 = n.overwrite && null !== a, !y.t0) { y.next = 10; break } return y.next = 10, this._sql.query("DROP TABLE IF EXISTS ".concat(o), { event: n.event }); case 10: return s = { createOptions: { ifNotExists: !1 }, event: n.event }, y.next = 13, this._sql.create(o, e.columns, s); case 13: if (!(l = y.sent).error) { y.next = 16; break } throw new Error(D(r = "Failed to create table for dataset ".concat(e.name, ": ")).call(r, l.error)); case 16: return y.prev = 16, d = j(c = e.columns).call(c, function (e) { return '"'.concat("string" == typeof e ? e : e.name, '"') }), y.next = 20, this._sql.copyFrom(e.file, o, d, { event: n.event }); case 20: u = y.sent, y.next = 26; break; case 23: throw y.prev = 23, y.t1 = y.catch(16), new Error(D(f = "Failed to copy to ".concat(o, ": ")).call(f, y.t1.message)); case 26: if (!u.error) { y.next = 28; break } throw new Error(D(i = "Failed to copy to ".concat(o, ": ")).call(i, u.error)); case 28: if (null !== a) { y.next = 35; break } return y.next = 31, this._sql.query(D(h = D(p = D(m = "\n        INSERT INTO ".concat(this._datasetsTableName, ' ("id", "name", "tablename")\n        VALUES (')).call(m, this._namespace, "_create_uuid(), '")).call(p, e.name, "', '")).call(h, o, "')\n        RETURNING *\n      "), { event: n.event }); case 31: if (!(v = y.sent).error) { y.next = 34; break } throw new Error(D(g = "Failed to register dataset ".concat(o, " ")).call(g, v.error)); case 34: return y.abrupt("return", v.rows[0]); case 35: return y.abrupt("return", a); case 36: case "end": return y.stop() } }, _callee14, this, [[16, 23]]) })) } }, { key: "shareDataset", value: function shareDataset(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return this._sql.grantPublicRead(e, t) } }, { key: "updateVisualization", value: function updateVisualization(e, n) { var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; return t(this, void 0, void 0, F.mark(function _callee15() { var t; return F.wrap(function _callee15$(i) { for (; ;)switch (i.prev = i.next) { case 0: return i.next = 2, this.updateVisTable(e, r); case 2: if (null !== (t = i.sent)) { i.next = 7; break } i.t0 = null, i.next = 14; break; case 7: return i.next = 9, this.cleanVisAndDatasetLinks(t.id, r); case 9: return i.next = 11, this.uploadAndLinkDatasetsTo(t.id, n, e.isprivate, { overwriteDatasets: !0, event: r.event }); case 11: return i.next = 13, this.deleteOrphanDatasets(r); case 13: i.t0 = P(P({}, e), t); case 14: return i.abrupt("return", i.t0); case 15: case "end": return i.stop() } }, _callee15, this) })) } }, { key: "setApiKey", value: function setApiKey(e) { this._sql.setApiKey(e) } }, { key: "destroy", value: function destroy() { return t(this, void 0, void 0, F.mark(function _callee16() { var e, t, n, r, i; return F.wrap(function _callee16$(o) { for (; ;)switch (o.prev = o.next) { case 0: return o.t0 = j, o.next = 3, this.getDatasets(); case 3: return o.t1 = e = o.sent, i = (0, o.t0)(o.t1).call(e, function (e) { return e.name }), o.abrupt("return", this._sql.query(D(t = D(n = D(r = "\n      BEGIN;\n        ".concat(j(i).call(i, function (e) { return "DROP TABLE IF EXISTS ".concat(e, ";") }).join("\n"), "\n        DROP TABLE IF EXISTS ")).call(r, this._tableName, " CASCADE;\n        DROP TABLE IF EXISTS ")).call(n, this._datasetsTableName, " CASCADE;\n        DROP TABLE IF EXISTS ")).call(t, this._datasetsVisTableName, " CASCADE;\n      COMMIT;\n    "))); case 6: case "end": return o.stop() } }, _callee16, this) })) } }, { key: "checkIfDatasetExists", value: function checkIfDatasetExists(e) { return t(this, void 0, void 0, F.mark(function _callee17() { var t, n, r; return F.wrap(function _callee17$(i) { for (; ;)switch (i.prev = i.next) { case 0: return n = "string" == typeof e ? e : e.name, i.next = 3, this._sql.query(D(t = "SELECT * FROM ".concat(this._datasetsTableName, ' WHERE "name" = \'')).call(t, n, "'")); case 3: if (!(r = i.sent).error) { i.next = 6; break } throw new Error(r.error); case 6: return i.abrupt("return", 0 === r.rows.length ? null : r.rows[0]); case 7: case "end": return i.stop() } }, _callee17, this) })) } }, { key: "preventAccidentalDatasetsOverwrite", value: function preventAccidentalDatasetsOverwrite() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0], n = arguments.length > 1 ? arguments[1] : void 0; return t(this, void 0, void 0, F.mark(function _callee18() { var t, r; return F.wrap(function _callee18$(i) { for (; ;)switch (i.prev = i.next) { case 0: return t = V(n).call(n, function (e) { return "string" != typeof e }), i.next = 3, this.checkExistingDataset(t); case 3: if (r = i.sent, e || !(r.length > 0)) { i.next = 6; break } throw new k(j(r).call(r, function (e) { return e.name })); case 6: case "end": return i.stop() } }, _callee18, this) })) } }, { key: "deleteOrphanDatasets", value: function deleteOrphanDatasets() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; return t(this, void 0, void 0, F.mark(function _callee19() { var t, n, r, i, o, a, s = this; return F.wrap(function _callee19$(l) { for (; ;)switch (l.prev = l.next) { case 0: return l.next = 2, this._sql.query(D(t = "\n      SELECT * FROM ".concat(this._datasetsTableName, ' WHERE "id" NOT IN (SELECT distinct("dataset") FROM ')).call(t, this._datasetsVisTableName, ")\n    "), e); case 2: return i = l.sent, o = { dropOptions: { ifExists: !0 }, event: e.event }, a = j(n = i.rows).call(n, function (e) { s._sql.drop(e.tablename, o) }), l.next = 7, re.all(a); case 7: return l.next = 9, this._sql.query(D(r = "DELETE FROM ".concat(this._datasetsTableName, ' WHERE "id" NOT IN (SELECT distinct("dataset") FROM ')).call(r, this._datasetsVisTableName, ")"), e); case 9: case "end": return l.stop() } }, _callee19, this) })) } }, { key: "insertVisTable", value: function insertVisTable(e) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return t(this, void 0, void 0, F.mark(function _callee20() { var t, r, i, o, a, s, l, u = this; return F.wrap(function _callee20$(c) { for (; ;)switch (c.prev = c.next) { case 0: return a = D(t = D(r = "INSERT INTO ".concat(this._tableName, "\n     (")).call(r, j(i = this.FIELD_NAMES_INSERT).call(i, function (e) { return '"'.concat(e, '"') }).join(", "), ")\n     VALUES\n     (\n       ")).call(t, j(o = this.FIELD_NAMES_INSERT).call(o, function (t) { var n = u.VIS_FIELDS[t], r = e[t], i = n && n.format ? n.format(r) : r; return null === i ? "null" : i }).join(), '\n     )\n     RETURNING "id", "lastmodified"\n   '), c.next = 3, this._sql.query(a, n); case 3: if (!(s = c.sent).error) { c.next = 6; break } throw new Error(s.error); case 6: return l = s.rows[0], c.abrupt("return", { id: l.id, lastmodified: l.lastmodified }); case 8: case "end": return c.stop() } }, _callee20, this) })) } }, { key: "updateVisTable", value: function updateVisTable(e) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return t(this, void 0, void 0, F.mark(function _callee21() { var t, r, i, o, a, s, l, u, c, d = this; return F.wrap(function _callee21$(f) { for (; ;)switch (f.prev = f.next) { case 0: return u = D(t = D(r = D(i = D(o = D(a = D(s = "UPDATE ".concat(this._tableName, "\n      SET\n        ")).call(s, j(l = this.FIELD_NAMES_INSERT).call(l, function (t) { var n, r = d.VIS_FIELDS[t], i = e[t], o = r && r.format ? r.format(i) : i; return D(n = '"'.concat(t, '" = ')).call(n, null === o ? "null" : o) }).join(), "\n        ,")).call(a, this.VIS_FIELDS.lastmodified.name, "=NOW()\n      WHERE ")).call(o, this.VIS_FIELDS.id.name, " = '")).call(i, e.id, "'\n      RETURNING \"")).call(r, this.VIS_FIELDS.id.name, '", "')).call(t, this.VIS_FIELDS.lastmodified.name, '"\n    '), f.next = 3, this._sql.query(u, n); case 3: if (!(c = f.sent).error) { f.next = 6; break } throw new Error(c.error); case 6: return f.abrupt("return", { id: e.id, lastmodified: c.rows.length ? c.rows[0].lastmodified : e.lastmodified }); case 7: case "end": return f.stop() } }, _callee21, this) })) } }, { key: "uploadAndLinkDatasetsTo", value: function uploadAndLinkDatasetsTo(e, n, r) { var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}; return t(this, void 0, void 0, F.mark(function _callee22() { var t, o, a, s, l, u; return F.wrap(function _callee22$(c) { for (; ;)switch (c.prev = c.next) { case 0: t = _createForOfIteratorHelper(n), c.prev = 1, t.s(); case 3: if ((o = t.n()).done) { c.next = 29; break } if (a = o.value, s = void 0, "string" != typeof a) { c.next = 17; break } return c.next = 9, this.getDataset(a); case 9: if (null !== (l = c.sent)) { c.next = 12; break } return c.abrupt("continue", 27); case 12: return s = l.tablename, c.next = 15, this.linkVisAndDataset(e, l.id, { event: i.event }); case 15: c.next = 23; break; case 17: return c.next = 19, this.uploadDataset(a, { overwrite: i.overwriteDatasets || !1, event: i.event }); case 19: return u = c.sent, s = u.tablename, c.next = 23, this.linkVisAndDataset(e, u.id, { event: i.event }); case 23: if (c.t0 = r, c.t0) { c.next = 27; break } return c.next = 27, this.shareDataset(s, { event: i.event }); case 27: c.next = 3; break; case 29: c.next = 34; break; case 31: c.prev = 31, c.t1 = c.catch(1), t.e(c.t1); case 34: return c.prev = 34, t.f(), c.finish(34); case 37: case "end": return c.stop() } }, _callee22, this, [[1, 31, 34, 37]]) })) } }, { key: "checkExistingDataset", value: function checkExistingDataset(e) { return t(this, void 0, void 0, F.mark(function _callee23() { var t, n = this; return F.wrap(function _callee23$(r) { for (; ;)switch (r.prev = r.next) { case 0: return r.t0 = V, r.next = 3, re.all(j(e).call(e, function (e) { return n.checkIfDatasetExists(e) })); case 3: return r.t1 = t = r.sent, r.abrupt("return", (0, r.t0)(r.t1).call(t, function (e) { return null !== e })); case 5: case "end": return r.stop() } }, _callee23) })) } }, { key: "escapeOrNull", value: function escapeOrNull(e) { return null === e ? null : "E'".concat(e = e.replace(/\'/gi, "\\'"), "'") } }, { key: "cleanVisAndDatasetLinks", value: function cleanVisAndDatasetLinks(e) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return t(this, void 0, void 0, F.mark(function _callee24() { var t; return F.wrap(function _callee24$(r) { for (; ;)switch (r.prev = r.next) { case 0: return r.next = 2, this._sql.query(D(t = "\n      DELETE FROM ".concat(this._datasetsVisTableName, "\n      WHERE vis='")).call(t, e, "'\n    "), n); case 2: if (!r.sent.error) { r.next = 4; break } throw new Error("Failed to clean vis-dataset links for visualization '".concat(e, "'")); case 4: case "end": return r.stop() } }, _callee24, this) })) } }, { key: "linkVisAndDataset", value: function linkVisAndDataset(e, n) { var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; return t(this, void 0, void 0, F.mark(function _callee25() { var t, i, o; return F.wrap(function _callee25$(a) { for (; ;)switch (a.prev = a.next) { case 0: return o = D(t = D(i = "\n      INSERT INTO ".concat(this._datasetsVisTableName, ' ("vis", "dataset")\n      VALUES (\'')).call(i, e, "', '")).call(t, n, "')\n    "), a.next = 3, this._sql.query(o, r); case 3: if (!a.sent.error) { a.next = 5; break } throw new Error("Failed to link dataset id to vis id"); case 5: case "end": return a.stop() } }, _callee25, this) })) } }, { key: "_checkMissingTables", value: function _checkMissingTables() { var e = this; return new re(function (n, r) { return t(e, void 0, void 0, F.mark(function _callee26() { var e, t, i, o, a = this; return F.wrap(function _callee26$(s) { for (; ;)switch (s.prev = s.next) { case 0: return s.prev = 0, i = j(e = [this._tableName, this._datasetsTableName, this._datasetsVisTableName]).call(e, function (e) { return a._sql.query("SELECT to_regclass('".concat(e, "')")) }), s.t0 = A, s.next = 5, re.all(i); case 5: s.t1 = t = s.sent, o = (0, s.t0)(s.t1).call(t, function (e) { return null === e.rows[0].to_regclass }), n(o), s.next = 13; break; case 10: s.prev = 10, s.t2 = s.catch(0), r(s.t2); case 13: case "end": return s.stop() } }, _callee26, this, [[0, 10]]) })) }) } }, { key: "_initTables", value: function _initTables() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; return t(this, void 0, void 0, F.mark(function _callee27() { var t, n; return F.wrap(function _callee27$(r) { for (; ;)switch (r.prev = r.next) { case 0: return t = M(O(this.VIS_FIELDS)), n = { createConfig: { ifNotExists: !0 }, event: e.event }, r.next = 3, this._sql.create(this._tableName, t, n); case 3: return r.next = 5, this._sql.create(this._datasetsTableName, this.DATASET_COLUMNS, n); case 5: return r.next = 7, this._sql.create(this._datasetsVisTableName, this.DATASET_VIS_COLUMNS, n); case 7: if (r.t0 = this._isPublic, !r.t0) { r.next = 15; break } return r.next = 11, this._sql.grantPublicRead(this._tableName, e); case 11: return r.next = 13, this._sql.grantPublicRead(this._datasetsTableName, e); case 13: return r.next = 15, this._sql.grantPublicRead(this._datasetsVisTableName, e); case 15: case "end": return r.stop() } }, _callee27, this) })) } }, { key: "isReady", get: function get() { return this._isReady } }]), L }(), N = function () { function w(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; te(this, w); var r = P({ client: "keplergl", maxApiRequestsRetries: f.DEFAULT_MAX_API_REQUESTS_RETRIES }, n); this.client = r.client, this._sqlClient = new C(t, { maxApiRequestsRetries: r.maxApiRequestsRetries }), this._checkNamespace(e), this._namespace = e, this._publicSQLStorage = new I(this._namespace, this._sqlClient, this.getVersion(), !0), this._privateSQLStorage = new I(this._namespace, this._sqlClient, this.getVersion(), !1) } return ne(w, [{ key: "init", value: function init() { return t(this, void 0, void 0, F.mark(function _callee28() { var e, t; return F.wrap(function _callee28$(n) { for (; ;)switch (n.prev = n.next) { case 0: return n.next = 2, this.isInitialized(); case 2: if (!n.sent) { n.next = 4; break } return n.abrupt("return", !0); case 4: return n.next = 6, this._sqlClient.query("\n      BEGIN;\n        CREATE OR REPLACE FUNCTION ".concat(this._namespace, "_create_uuid()\n        RETURNS UUID AS\n        $$\n        DECLARE\n          _output UUID;\n        BEGIN\n          SELECT uuid_in(md5(random()::text || clock_timestamp()::text)::cstring) INTO _output;\n          RETURN _output;\n        END\n        $$ LANGUAGE plpgsql PARALLEL SAFE;\n      COMMIT;\n    ")); case 6: return e = new u(this.client, "custom_storage_init"), n.next = 9, re.all([this._publicSQLStorage.init({ event: e }), this._privateSQLStorage.init({ event: e })]); case 9: return t = n.sent, n.abrupt("return", t[0] || t[1]); case 11: case "end": return n.stop() } }, _callee28, this) })) } }, { key: "getVisualizations", value: function getVisualizations() { this._checkReady(); var e = new u(this.client, "custom_storage_visualization_list_load"); return re.all([this._privateSQLStorage.getVisualizations({ event: e }), this._publicSQLStorage.getVisualizations({ event: e })]).then(function (e) { var t; return D(t = []).call(t, M(e[0]), M(e[1])) }) } }, { key: "getPublicVisualizations", value: function getPublicVisualizations() { this._checkReady(); var e = new u(this.client, "custom_storage_public_visualizations_load"); return this._publicSQLStorage.getVisualizations({ event: e }) } }, { key: "getPrivateVisualizations", value: function getPrivateVisualizations() { this._checkReady(); var e = new u(this.client, "custom_storage_private_visualizations_load"); return this._privateSQLStorage.getVisualizations({ event: e }) } }, { key: "getVisualization", value: function getVisualization(e) { this._checkReady(); var t = new u(this.client, "custom_storage_visualization_load"); return re.all([this._publicSQLStorage.getVisualization(e, { event: t }), this._privateSQLStorage.getVisualization(e, { event: t })]).then(function (e) { return e[0] || e[1] }) } }, { key: "deleteVisualization", value: function deleteVisualization(e) { this._checkReady(); var t = new u(this.client, "custom_storage_visualization_delete"); return re.all([this._publicSQLStorage.deleteVisualization(e, { event: t }), this._privateSQLStorage.deleteVisualization(e, { event: t })]).then(function () { return !0 }).catch(function () { return !1 }) } }, { key: "createVisualization", value: function createVisualization(e, t, n) { this._checkReady(); var r = e.isprivate ? this._privateSQLStorage : this._publicSQLStorage, i = e.isprivate ? "custom_storage_private_visualization_create" : "custom_storage_public_visualization_create", o = new u(this.client, i); return r.createVisualization(e, t, { overwriteDatasets: n, event: o }) } }, { key: "updateVisualization", value: function updateVisualization(e, t) { this._checkReady(); var n = e.isprivate ? this._privateSQLStorage : this._publicSQLStorage, r = new u(this.client, "custom_storage_visualization_update"); return n.updateVisualization(e, t, { event: r }) } }, { key: "getDatasets", value: function getDatasets() { return re.all([this._publicSQLStorage.getDatasets(), this._privateSQLStorage.getDatasets()]).then(function (e) { var t; return D(t = []).call(t, M(e[0]), M(e[1])) }) } }, { key: "getVisForDataset", value: function getVisForDataset(e) { return re.all([this._publicSQLStorage.getVisForDataset(e), this._privateSQLStorage.getVisForDataset(e)]).then(function (e) { var t; return D(t = []).call(t, M(e[0]), M(e[1])) }) } }, { key: "uploadPublicDataset", value: function uploadPublicDataset(e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; return this._uploadDataset(e, this._publicSQLStorage, !0, t) } }, { key: "uploadPrivateDataset", value: function uploadPrivateDataset(e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; return this._uploadDataset(e, this._privateSQLStorage, !1, t) } }, { key: "getVersion", value: function getVersion() { return w.version } }, { key: "migrate", value: function migrate() { return re.resolve() } }, { key: "getSQLClient", value: function getSQLClient() { return this._sqlClient } }, { key: "setApiKey", value: function setApiKey(e) { this._sqlClient.setApiKey(e), this._privateSQLStorage.setApiKey(e), this._publicSQLStorage.setApiKey(e) } }, { key: "destroy", value: function destroy() { return t(this, void 0, void 0, F.mark(function _callee29() { return F.wrap(function _callee29$(e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, this._sqlClient.query("DROP FUNCTION ".concat(this._namespace, "_create_uuid CASCADE;")); case 2: return e.next = 4, this._privateSQLStorage.destroy(); case 4: return e.next = 6, this._publicSQLStorage.destroy(); case 6: case "end": return e.stop() } }, _callee29, this) })) } }, { key: "isInitialized", value: function isInitialized() { return t(this, void 0, void 0, F.mark(function _callee30() { var e; return F.wrap(function _callee30$(t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, re.all([this._publicSQLStorage.isInitialized(), this._privateSQLStorage.isInitialized()]); case 2: return e = t.sent, t.abrupt("return", e[0] || e[1]); case 4: case "end": return t.stop() } }, _callee30, this) })) } }, { key: "_checkNamespace", value: function _checkNamespace(e) { if (e.split(" ").length > 1) throw new Error("Namespace for custom-storage must be 1 word") } }, { key: "_checkReady", value: function _checkReady() { if (!this._privateSQLStorage.isReady || !this._publicSQLStorage.isReady) throw new Error(".init has not finished") } }, { key: "_uploadDataset", value: function _uploadDataset(e, n, r, i) { return t(this, void 0, void 0, F.mark(function _callee31() { var t; return F.wrap(function _callee31$(o) { for (; ;)switch (o.prev = o.next) { case 0: return o.next = 2, n.uploadDataset(e, { overwrite: i }); case 2: if (t = o.sent, o.t0 = r, !o.t0) { o.next = 7; break } return o.next = 7, n.shareDataset(t.tablename); case 7: return o.abrupt("return", t); case 8: case "end": return o.stop() } }, _callee31) })) } }]), w }(); N.version = 0, r.CustomStorage = N, r.PublicStorageReader = function (e) { B(_class2, e); var t = _createSuper(_class2); function _class2() { return te(this, _class2), t.apply(this, arguments) } return _class2 }(function () { function _class3(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : l.DEFAULT_SERVER_URL_TEMPLATE, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; te(this, _class3), this._client = n.client ? n.client : "keplergl", this._clientMap = {}, this._serverUrlTemplate = t, this._tableName = S(e, !0, N.version), this._datasetTableName = R(this._tableName), this._datasetsVisTableName = b(this._tableName) } return ne(_class3, [{ key: "getVisualization", value: function getVisualization(e, t) { if (void 0 === this._clientMap[e]) { var n = new l(e, l.DEFAULT_PUBLIC_API_KEY, this._serverUrlTemplate); this._clientMap[e] = new C(n) } var r = { vis: this._tableName, datasets: this._datasetTableName, visToDatasets: this._datasetsVisTableName }, i = new u(this._client, "public_sql_reader_visualization_load"); return g(r, t, this._clientMap[e], { event: i }) } }]), _class3 }()), W(r, "__esModule", { value: !0 }) }, "object" == ie(u) && void 0 !== l ? I(u) : (f = [u], void 0 === (p = "function" == typeof (d = I) ? d.apply(u, f) : d) || (l.exports = p)) }, function(e, t, n) { "use strict"; n(147); var r, i = n(133), o = n(146), a = n(1392), s = n(59), l = n(1542), u = n(213), c = n(445), d = n(140), f = n(3187), h = n(3186), p = n(920).codeAt, m = n(3184), g = n(339), v = n(3183), y = n(250), _ = s.URL, b = v.URLSearchParams, w = v.getState, x = y.set, C = y.getterFor("URL"), S = Math.floor, k = Math.pow, T = /[A-Za-z]/, L = /[\d+-.A-Za-z]/, M = /\d/, E = /^(0x|0X)/, A = /^[0-7]+$/, P = /^\d+$/, R = /^[\dA-Fa-f]+$/, O = /[\u0000\u0009\u000A\u000D #%/:?@[\\]]/, D = /[\u0000\u0009\u000A\u000D #/:?@[\\]]/, F = /^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g, I = /[\u0009\u000A\u000D]/g, N = function (e, t) { var n, r, i; if ("[" == t.charAt(0)) { if ("]" != t.charAt(t.length - 1)) return "Invalid host"; if (!(n = B(t.slice(1, -1)))) return "Invalid host"; e.host = n } else if (W(e)) { if (t = m(t), O.test(t)) return "Invalid host"; if (null === (n = $(t))) return "Invalid host"; e.host = n } else { if (D.test(t)) return "Invalid host"; for (n = "", r = h(t), i = 0; i < r.length; i++)n += V(r[i], j); e.host = n } }, $ = function (e) { var t, n, r, i, o, a, s, l = e.split("."); if (l.length && "" == l[l.length - 1] && l.pop(), (t = l.length) > 4) return e; for (n = [], r = 0; r < t; r++) { if ("" == (i = l[r])) return e; if (o = 10, i.length > 1 && "0" == i.charAt(0) && (o = E.test(i) ? 16 : 8, i = i.slice(8 == o ? 1 : 2)), "" === i) a = 0; else { if (!(10 == o ? P : 8 == o ? A : R).test(i)) return e; a = parseInt(i, o) } n.push(a) } for (r = 0; r < t; r++)if (a = n[r], r == t - 1) { if (a >= k(256, 5 - t)) return null } else if (a > 255) return null; for (s = n.pop(), r = 0; r < n.length; r++)s += n[r] * k(256, 3 - r); return s }, B = function (e) { var t, n, r, i, o, a, s, l = [0, 0, 0, 0, 0, 0, 0, 0], u = 0, c = null, d = 0, f = function () { return e.charAt(d) }; if (":" == f()) { if (":" != e.charAt(1)) return; d += 2, c = ++u } for (; f();) { if (8 == u) return; if (":" != f()) { for (t = n = 0; n < 4 && R.test(f());)t = 16 * t + parseInt(f(), 16), d++, n++; if ("." == f()) { if (0 == n) return; if (d -= n, u > 6) return; for (r = 0; f();) { if (i = null, r > 0) { if (!("." == f() && r < 4)) return; d++ } if (!M.test(f())) return; for (; M.test(f());) { if (o = parseInt(f(), 10), null === i) i = o; else { if (0 == i) return; i = 10 * i + o } if (i > 255) return; d++ } l[u] = 256 * l[u] + i, 2 != ++r && 4 != r || u++ } if (4 != r) return; break } if (":" == f()) { if (d++, !f()) return } else if (f()) return; l[u++] = t } else { if (null !== c) return; d++, c = ++u } } if (null !== c) for (a = u - c, u = 7; 0 != u && a > 0;)s = l[u], l[u--] = l[c + a - 1], l[c + --a] = s; else if (8 != u) return; return l }, z = function (e) { var t, n, r, i; if ("number" == typeof e) { for (t = [], n = 0; n < 4; n++)t.unshift(e % 256), e = S(e / 256); return t.join(".") } if ("object" == typeof e) { for (t = "", r = function (e) { for (var t = null, n = 1, r = null, i = 0, o = 0; o < 8; o++)0 !== e[o] ? (i > n && (t = r, n = i), r = null, i = 0) : (null === r && (r = o), ++i); return i > n && (t = r, n = i), t }(e), n = 0; n < 8; n++)i && 0 === e[n] || (i && (i = !1), r === n ? (t += n ? ":" : "::", i = !0) : (t += e[n].toString(16), n < 7 && (t += ":"))); return "[" + t + "]" } return e }, j = {}, U = f({}, j, { " ": 1, '"': 1, "<": 1, ">": 1, "`": 1 }), q = f({}, U, { "#": 1, "?": 1, "{": 1, "}": 1 }), H = f({}, q, { "/": 1, ":": 1, ";": 1, "=": 1, "@": 1, "[": 1, "\\": 1, "]": 1, "^": 1, "|": 1 }), V = function (e, t) { var n = p(e, 0); return n > 32 && n < 127 && !d(t, e) ? e : encodeURIComponent(e) }, G = { ftp: 21, file: null, http: 80, https: 443, ws: 80, wss: 443 }, W = function (e) { return d(G, e.scheme) }, Y = function (e) { return "" != e.username || "" != e.password }, Z = function (e) { return !e.host || e.cannotBeABaseURL || "file" == e.scheme }, K = function (e, t) { var n; return 2 == e.length && T.test(e.charAt(0)) && (":" == (n = e.charAt(1)) || !t && "|" == n) }, X = function (e) { var t; return e.length > 1 && K(e.slice(0, 2)) && (2 == e.length || "/" === (t = e.charAt(2)) || "\\" === t || "?" === t || "#" === t) }, J = function (e) { var t = e.path, n = t.length; !n || "file" == e.scheme && 1 == n && K(t[0], !0) || t.pop() }, Q = function (e) { return "." === e || "%2e" === e.toLowerCase() }, ee = {}, te = {}, ne = {}, re = {}, ie = {}, oe = {}, ae = {}, se = {}, le = {}, ue = {}, ce = {}, de = {}, fe = {}, he = {}, pe = {}, me = {}, ge = {}, ve = {}, ye = {}, _e = {}, be = {}, we = function (e, t, n, i) { var o, a, s, l, u, c = n || ee, f = 0, p = "", m = !1, g = !1, v = !1; for (n || (e.scheme = "", e.username = "", e.password = "", e.host = null, e.port = null, e.path = [], e.query = null, e.fragment = null, e.cannotBeABaseURL = !1, t = t.replace(F, "")), t = t.replace(I, ""), o = h(t); f <= o.length;) { switch (a = o[f], c) { case ee: if (!a || !T.test(a)) { if (n) return "Invalid scheme"; c = ne; continue } p += a.toLowerCase(), c = te; break; case te: if (a && (L.test(a) || "+" == a || "-" == a || "." == a)) p += a.toLowerCase(); else { if (":" != a) { if (n) return "Invalid scheme"; p = "", c = ne, f = 0; continue } if (n && (W(e) != d(G, p) || "file" == p && (Y(e) || null !== e.port) || "file" == e.scheme && !e.host)) return; if (e.scheme = p, n) return void (W(e) && G[e.scheme] == e.port && (e.port = null)); p = "", "file" == e.scheme ? c = he : W(e) && i && i.scheme == e.scheme ? c = re : W(e) ? c = se : "/" == o[f + 1] ? (c = ie, f++) : (e.cannotBeABaseURL = !0, e.path.push(""), c = ye) } break; case ne: if (!i || i.cannotBeABaseURL && "#" != a) return "Invalid scheme"; if (i.cannotBeABaseURL && "#" == a) { e.scheme = i.scheme, e.path = i.path.slice(), e.query = i.query, e.fragment = "", e.cannotBeABaseURL = !0, c = be; break } c = "file" == i.scheme ? he : oe; continue; case re: if ("/" != a || "/" != o[f + 1]) { c = oe; continue } c = le, f++; break; case ie: if ("/" == a) { c = ue; break } c = ve; continue; case oe: if (e.scheme = i.scheme, a == r) e.username = i.username, e.password = i.password, e.host = i.host, e.port = i.port, e.path = i.path.slice(), e.query = i.query; else if ("/" == a || "\\" == a && W(e)) c = ae; else if ("?" == a) e.username = i.username, e.password = i.password, e.host = i.host, e.port = i.port, e.path = i.path.slice(), e.query = "", c = _e; else { if ("#" != a) { e.username = i.username, e.password = i.password, e.host = i.host, e.port = i.port, e.path = i.path.slice(), e.path.pop(), c = ve; continue } e.username = i.username, e.password = i.password, e.host = i.host, e.port = i.port, e.path = i.path.slice(), e.query = i.query, e.fragment = "", c = be } break; case ae: if (!W(e) || "/" != a && "\\" != a) { if ("/" != a) { e.username = i.username, e.password = i.password, e.host = i.host, e.port = i.port, c = ve; continue } c = ue } else c = le; break; case se: if (c = le, "/" != a || "/" != p.charAt(f + 1)) continue; f++; break; case le: if ("/" != a && "\\" != a) { c = ue; continue } break; case ue: if ("@" == a) { m && (p = "%40" + p), m = !0, s = h(p); for (var y = 0; y < s.length; y++) { var _ = s[y]; if (":" != _ || v) { var b = V(_, H); v ? e.password += b : e.username += b } else v = !0 } p = "" } else if (a == r || "/" == a || "?" == a || "#" == a || "\\" == a && W(e)) { if (m && "" == p) return "Invalid authority"; f -= h(p).length + 1, p = "", c = ce } else p += a; break; case ce: case de: if (n && "file" == e.scheme) { c = me; continue } if (":" != a || g) { if (a == r || "/" == a || "?" == a || "#" == a || "\\" == a && W(e)) { if (W(e) && "" == p) return "Invalid host"; if (n && "" == p && (Y(e) || null !== e.port)) return; if (l = N(e, p)) return l; if (p = "", c = ge, n) return; continue } "[" == a ? g = !0 : "]" == a && (g = !1), p += a } else { if ("" == p) return "Invalid host"; if (l = N(e, p)) return l; if (p = "", c = fe, n == de) return } break; case fe: if (!M.test(a)) { if (a == r || "/" == a || "?" == a || "#" == a || "\\" == a && W(e) || n) { if ("" != p) { var w = parseInt(p, 10); if (w > 65535) return "Invalid port"; e.port = W(e) && w === G[e.scheme] ? null : w, p = "" } if (n) return; c = ge; continue } return "Invalid port" } p += a; break; case he: if (e.scheme = "file", "/" == a || "\\" == a) c = pe; else { if (!i || "file" != i.scheme) { c = ve; continue } if (a == r) e.host = i.host, e.path = i.path.slice(), e.query = i.query; else if ("?" == a) e.host = i.host, e.path = i.path.slice(), e.query = "", c = _e; else { if ("#" != a) { X(o.slice(f).join("")) || (e.host = i.host, e.path = i.path.slice(), J(e)), c = ve; continue } e.host = i.host, e.path = i.path.slice(), e.query = i.query, e.fragment = "", c = be } } break; case pe: if ("/" == a || "\\" == a) { c = me; break } i && "file" == i.scheme && !X(o.slice(f).join("")) && (K(i.path[0], !0) ? e.path.push(i.path[0]) : e.host = i.host), c = ve; continue; case me: if (a == r || "/" == a || "\\" == a || "?" == a || "#" == a) { if (!n && K(p)) c = ve; else if ("" == p) { if (e.host = "", n) return; c = ge } else { if (l = N(e, p)) return l; if ("localhost" == e.host && (e.host = ""), n) return; p = "", c = ge } continue } p += a; break; case ge: if (W(e)) { if (c = ve, "/" != a && "\\" != a) continue } else if (n || "?" != a) if (n || "#" != a) { if (a != r && (c = ve, "/" != a)) continue } else e.fragment = "", c = be; else e.query = "", c = _e; break; case ve: if (a == r || "/" == a || "\\" == a && W(e) || !n && ("?" == a || "#" == a)) { if (".." === (u = (u = p).toLowerCase()) || "%2e." === u || ".%2e" === u || "%2e%2e" === u ? (J(e), "/" == a || "\\" == a && W(e) || e.path.push("")) : Q(p) ? "/" == a || "\\" == a && W(e) || e.path.push("") : ("file" == e.scheme && !e.path.length && K(p) && (e.host && (e.host = ""), p = p.charAt(0) + ":"), e.path.push(p)), p = "", "file" == e.scheme && (a == r || "?" == a || "#" == a)) for (; e.path.length > 1 && "" === e.path[0];)e.path.shift(); "?" == a ? (e.query = "", c = _e) : "#" == a && (e.fragment = "", c = be) } else p += V(a, q); break; case ye: "?" == a ? (e.query = "", c = _e) : "#" == a ? (e.fragment = "", c = be) : a != r && (e.path[0] += V(a, j)); break; case _e: n || "#" != a ? a != r && ("'" == a && W(e) ? e.query += "%27" : e.query += "#" == a ? "%23" : V(a, j)) : (e.fragment = "", c = be); break; case be: a != r && (e.fragment += V(a, U)) }f++ } }, xe = function URL(e) { var t, n, r = c(this, xe, "URL"), i = arguments.length > 1 ? arguments[1] : void 0, a = String(e), s = x(r, { type: "URL" }); if (void 0 !== i) if (i instanceof xe) t = C(i); else if (n = we(t = {}, String(i))) throw TypeError(n); if (n = we(s, a, null, t)) throw TypeError(n); var l = s.searchParams = new b, u = w(l); u.updateSearchParams(s.query), u.updateURL = function () { s.query = String(l) || null }, o || (r.href = Se.call(r), r.origin = ke.call(r), r.protocol = Te.call(r), r.username = Le.call(r), r.password = Me.call(r), r.host = Ee.call(r), r.hostname = Ae.call(r), r.port = Pe.call(r), r.pathname = Re.call(r), r.search = Oe.call(r), r.searchParams = De.call(r), r.hash = Fe.call(r)) }, Ce = xe.prototype, Se = function () { var e = C(this), t = e.scheme, n = e.username, r = e.password, i = e.host, o = e.port, a = e.path, s = e.query, l = e.fragment, u = t + ":"; return null !== i ? (u += "//", Y(e) && (u += n + (r ? ":" + r : "") + "@"), u += z(i), null !== o && (u += ":" + o)) : "file" == t && (u += "//"), u += e.cannotBeABaseURL ? a[0] : a.length ? "/" + a.join("/") : "", null !== s && (u += "?" + s), null !== l && (u += "#" + l), u }, ke = function () { var e = C(this), t = e.scheme, n = e.port; if ("blob" == t) try { return new URL(t.path[0]).origin } catch (e) { return "null" } return "file" != t && W(e) ? t + "://" + z(e.host) + (null !== n ? ":" + n : "") : "null" }, Te = function () { return C(this).scheme + ":" }, Le = function () { return C(this).username }, Me = function () { return C(this).password }, Ee = function () { var e = C(this), t = e.host, n = e.port; return null === t ? "" : null === n ? z(t) : z(t) + ":" + n }, Ae = function () { var e = C(this).host; return null === e ? "" : z(e) }, Pe = function () { var e = C(this).port; return null === e ? "" : String(e) }, Re = function () { var e = C(this), t = e.path; return e.cannotBeABaseURL ? t[0] : t.length ? "/" + t.join("/") : "" }, Oe = function () { var e = C(this).query; return e ? "?" + e : "" }, De = function () { return C(this).searchParams }, Fe = function () { var e = C(this).fragment; return e ? "#" + e : "" }, Ie = function (e, t) { return { get: e, set: t, configurable: !0, enumerable: !0 } }; if (o && l(Ce, { href: Ie(Se, function (e) { var t = C(this), n = String(e), r = we(t, n); if (r) throw TypeError(r); w(t.searchParams).updateSearchParams(t.query) }), origin: Ie(ke), protocol: Ie(Te, function (e) { var t = C(this); we(t, String(e) + ":", ee) }), username: Ie(Le, function (e) { var t = C(this), n = h(String(e)); if (!Z(t)) { t.username = ""; for (var r = 0; r < n.length; r++)t.username += V(n[r], H) } }), password: Ie(Me, function (e) { var t = C(this), n = h(String(e)); if (!Z(t)) { t.password = ""; for (var r = 0; r < n.length; r++)t.password += V(n[r], H) } }), host: Ie(Ee, function (e) { var t = C(this); t.cannotBeABaseURL || we(t, String(e), ce) }), hostname: Ie(Ae, function (e) { var t = C(this); t.cannotBeABaseURL || we(t, String(e), de) }), port: Ie(Pe, function (e) { var t = C(this); Z(t) || ("" == (e = String(e)) ? t.port = null : we(t, e, fe)) }), pathname: Ie(Re, function (e) { var t = C(this); t.cannotBeABaseURL || (t.path = [], we(t, e + "", ge)) }), search: Ie(Oe, function (e) { var t = C(this); "" == (e = String(e)) ? t.query = null : ("?" == e.charAt(0) && (e = e.slice(1)), t.query = "", we(t, e, _e)), w(t.searchParams).updateSearchParams(t.query) }), searchParams: Ie(De), hash: Ie(Fe, function (e) { var t = C(this); "" != (e = String(e)) ? ("#" == e.charAt(0) && (e = e.slice(1)), t.fragment = "", we(t, e, be)) : t.fragment = null }) }), u(Ce, "toJSON", function toJSON() { return Se.call(this) }, { enumerable: !0 }), u(Ce, "toString", function toString() { return Se.call(this) }, { enumerable: !0 }), _) { var Ne = _.createObjectURL, $e = _.revokeObjectURL; Ne && u(xe, "createObjectURL", function createObjectURL(e) { return Ne.apply(_, arguments) }), $e && u(xe, "revokeObjectURL", function revokeObjectURL(e) { return $e.apply(_, arguments) }) } g(xe, "URL"), i({ global: !0, forced: !a, sham: !o }, { URL: xe }) },, function(e, t, n) { "use strict"; n.r(t); var r = [].slice, i = {}; function Queue(e) { this._size = e, this._call = this._error = null, this._tasks = [], this._data = [], this._waiting = this._active = this._ended = this._start = 0 } function poke(e) { if (!e._start) try { !function start(e) { for (; e._start = e._waiting && e._active < e._size;) { var t = e._ended + e._active, n = e._tasks[t], r = n.length - 1, o = n[r]; n[r] = end(e, t), --e._waiting, ++e._active, n = o.apply(null, n), e._tasks[t] && (e._tasks[t] = n || i) } }(e) } catch (t) { if (e._tasks[e._ended + e._active - 1]) abort(e, t); else if (!e._data) throw t } } function end(e, t) { return function (n, r) { e._tasks[t] && (--e._active, ++e._ended, e._tasks[t] = null, null == e._error && (null != n ? abort(e, n) : (e._data[t] = r, e._waiting ? poke(e) : maybeNotify(e)))) } } function abort(e, t) { var n, r = e._tasks.length; for (e._error = t, e._data = void 0, e._waiting = NaN; --r >= 0;)if ((n = e._tasks[r]) && (e._tasks[r] = null, n.abort)) try { n.abort() } catch (t) { } e._active = NaN, maybeNotify(e) } function maybeNotify(e) { if (!e._active && e._call) { var t = e._data; e._data = void 0, e._call(e._error, t) } } function queue(e) { if (null == e) e = 1 / 0; else if (!((e = +e) >= 1)) throw new Error("invalid concurrency"); return new Queue(e) } Queue.prototype = queue.prototype = { constructor: Queue, defer: function (e) { if ("function" != typeof e) throw new Error("invalid callback"); if (this._call) throw new Error("defer after await"); if (null != this._error) return this; var t = r.call(arguments, 1); return t.push(e), ++this._waiting, this._tasks.push(t), poke(this), this }, abort: function () { return null == this._error && abort(this, new Error("abort")), this }, await: function (e) { if ("function" != typeof e) throw new Error("invalid callback"); if (this._call) throw new Error("multiple await"); return this._call = function (t, n) { e.apply(null, [t].concat(n)) }, maybeNotify(this), this }, awaitAll: function (e) { if ("function" != typeof e) throw new Error("invalid callback"); if (this._call) throw new Error("multiple await"); return this._call = e, maybeNotify(this), this } }, n.d(t, "queue", function () { return queue }) }, function(e, t, n) { "use strict"; n.r(t); var r = new Date, i = new Date; function newInterval(e, t, n, o) { function interval(t) { return e(t = 0 === arguments.length ? new Date : new Date(+t)), t } return interval.floor = function (t) { return e(t = new Date(+t)), t }, interval.ceil = function (n) { return e(n = new Date(n - 1)), t(n, 1), e(n), n }, interval.round = function (e) { var t = interval(e), n = interval.ceil(e); return e - t < n - e ? t : n }, interval.offset = function (e, n) { return t(e = new Date(+e), null == n ? 1 : Math.floor(n)), e }, interval.range = function (n, r, i) { var o, a = []; if (n = interval.ceil(n), i = null == i ? 1 : Math.floor(i), !(n < r && i > 0)) return a; do { a.push(o = new Date(+n)), t(n, i), e(n) } while (o < n && n < r); return a }, interval.filter = function (n) { return newInterval(function (t) { if (t >= t) for (; e(t), !n(t);)t.setTime(t - 1) }, function (e, r) { if (e >= e) if (r < 0) for (; ++r <= 0;)for (; t(e, -1), !n(e);); else for (; --r >= 0;)for (; t(e, 1), !n(e);); }) }, n && (interval.count = function (t, o) { return r.setTime(+t), i.setTime(+o), e(r), e(i), Math.floor(n(r, i)) }, interval.every = function (e) { return e = Math.floor(e), isFinite(e) && e > 0 ? e > 1 ? interval.filter(o ? function (t) { return o(t) % e == 0 } : function (t) { return interval.count(0, t) % e == 0 }) : interval : null }), interval } var o = 6e4, a = 6048e5; function utcWeekday(e) { return newInterval(function (t) { t.setUTCDate(t.getUTCDate() - (t.getUTCDay() + 7 - e) % 7), t.setUTCHours(0, 0, 0, 0) }, function (e, t) { e.setUTCDate(e.getUTCDate() + 7 * t) }, function (e, t) { return (t - e) / a }) } var s = utcWeekday(0), l = utcWeekday(1), u = utcWeekday(2), c = utcWeekday(3), d = utcWeekday(4), f = utcWeekday(5), h = utcWeekday(6), p = (s.range, l.range, u.range, c.range, d.range, f.range, h.range, newInterval(function (e) { e.setUTCHours(0, 0, 0, 0) }, function (e, t) { e.setUTCDate(e.getUTCDate() + t) }, function (e, t) { return (t - e) / 864e5 }, function (e) { return e.getUTCDate() - 1 })), m = p; p.range; function weekday(e) { return newInterval(function (t) { t.setDate(t.getDate() - (t.getDay() + 7 - e) % 7), t.setHours(0, 0, 0, 0) }, function (e, t) { e.setDate(e.getDate() + 7 * t) }, function (e, t) { return (t - e - (t.getTimezoneOffset() - e.getTimezoneOffset()) * o) / a }) } var g = weekday(0), v = weekday(1), y = weekday(2), _ = weekday(3), b = weekday(4), w = weekday(5), x = weekday(6), C = (g.range, v.range, y.range, _.range, b.range, w.range, x.range, newInterval(function (e) { e.setHours(0, 0, 0, 0) }, function (e, t) { e.setDate(e.getDate() + t) }, function (e, t) { return (t - e - (t.getTimezoneOffset() - e.getTimezoneOffset()) * o) / 864e5 }, function (e) { return e.getDate() - 1 })), S = C, k = (C.range, newInterval(function (e) { e.setMonth(0, 1), e.setHours(0, 0, 0, 0) }, function (e, t) { e.setFullYear(e.getFullYear() + t) }, function (e, t) { return t.getFullYear() - e.getFullYear() }, function (e) { return e.getFullYear() })); k.every = function (e) { return isFinite(e = Math.floor(e)) && e > 0 ? newInterval(function (t) { t.setFullYear(Math.floor(t.getFullYear() / e) * e), t.setMonth(0, 1), t.setHours(0, 0, 0, 0) }, function (t, n) { t.setFullYear(t.getFullYear() + n * e) }) : null }; var T = k, L = (k.range, newInterval(function (e) { e.setUTCMonth(0, 1), e.setUTCHours(0, 0, 0, 0) }, function (e, t) { e.setUTCFullYear(e.getUTCFullYear() + t) }, function (e, t) { return t.getUTCFullYear() - e.getUTCFullYear() }, function (e) { return e.getUTCFullYear() })); L.every = function (e) { return isFinite(e = Math.floor(e)) && e > 0 ? newInterval(function (t) { t.setUTCFullYear(Math.floor(t.getUTCFullYear() / e) * e), t.setUTCMonth(0, 1), t.setUTCHours(0, 0, 0, 0) }, function (t, n) { t.setUTCFullYear(t.getUTCFullYear() + n * e) }) : null }; var M = L; L.range; function localDate(e) { if (0 <= e.y && e.y < 100) { var t = new Date(-1, e.m, e.d, e.H, e.M, e.S, e.L); return t.setFullYear(e.y), t } return new Date(e.y, e.m, e.d, e.H, e.M, e.S, e.L) } function utcDate(e) { if (0 <= e.y && e.y < 100) { var t = new Date(Date.UTC(-1, e.m, e.d, e.H, e.M, e.S, e.L)); return t.setUTCFullYear(e.y), t } return new Date(Date.UTC(e.y, e.m, e.d, e.H, e.M, e.S, e.L)) } function newYear(e) { return { y: e, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0 } } function formatLocale(e) { var t = e.dateTime, n = e.date, r = e.time, i = e.periods, o = e.days, a = e.shortDays, s = e.months, u = e.shortMonths, c = formatRe(i), d = formatLookup(i), f = formatRe(o), h = formatLookup(o), p = formatRe(a), g = formatLookup(a), y = formatRe(s), _ = formatLookup(s), b = formatRe(u), w = formatLookup(u), x = { a: function formatShortWeekday(e) { return a[e.getDay()] }, A: function formatWeekday(e) { return o[e.getDay()] }, b: function formatShortMonth(e) { return u[e.getMonth()] }, B: function formatMonth(e) { return s[e.getMonth()] }, c: null, d: formatDayOfMonth, e: formatDayOfMonth, f: formatMicroseconds, H: formatHour24, I: formatHour12, j: formatDayOfYear, L: formatMilliseconds, m: formatMonthNumber, M: formatMinutes, p: function formatPeriod(e) { return i[+(e.getHours() >= 12)] }, Q: formatUnixTimestamp, s: formatUnixTimestampSeconds, S: formatSeconds, u: formatWeekdayNumberMonday, U: formatWeekNumberSunday, V: formatWeekNumberISO, w: formatWeekdayNumberSunday, W: formatWeekNumberMonday, x: null, X: null, y: formatYear, Y: formatFullYear, Z: formatZone, "%": formatLiteralPercent }, C = { a: function formatUTCShortWeekday(e) { return a[e.getUTCDay()] }, A: function formatUTCWeekday(e) { return o[e.getUTCDay()] }, b: function formatUTCShortMonth(e) { return u[e.getUTCMonth()] }, B: function formatUTCMonth(e) { return s[e.getUTCMonth()] }, c: null, d: formatUTCDayOfMonth, e: formatUTCDayOfMonth, f: formatUTCMicroseconds, H: formatUTCHour24, I: formatUTCHour12, j: formatUTCDayOfYear, L: formatUTCMilliseconds, m: formatUTCMonthNumber, M: formatUTCMinutes, p: function formatUTCPeriod(e) { return i[+(e.getUTCHours() >= 12)] }, Q: formatUnixTimestamp, s: formatUnixTimestampSeconds, S: formatUTCSeconds, u: formatUTCWeekdayNumberMonday, U: formatUTCWeekNumberSunday, V: formatUTCWeekNumberISO, w: formatUTCWeekdayNumberSunday, W: formatUTCWeekNumberMonday, x: null, X: null, y: formatUTCYear, Y: formatUTCFullYear, Z: formatUTCZone, "%": formatLiteralPercent }, k = { a: function parseShortWeekday(e, t, n) { var r = p.exec(t.slice(n)); return r ? (e.w = g[r[0].toLowerCase()], n + r[0].length) : -1 }, A: function parseWeekday(e, t, n) { var r = f.exec(t.slice(n)); return r ? (e.w = h[r[0].toLowerCase()], n + r[0].length) : -1 }, b: function parseShortMonth(e, t, n) { var r = b.exec(t.slice(n)); return r ? (e.m = w[r[0].toLowerCase()], n + r[0].length) : -1 }, B: function parseMonth(e, t, n) { var r = y.exec(t.slice(n)); return r ? (e.m = _[r[0].toLowerCase()], n + r[0].length) : -1 }, c: function parseLocaleDateTime(e, n, r) { return parseSpecifier(e, t, n, r) }, d: parseDayOfMonth, e: parseDayOfMonth, f: parseMicroseconds, H: parseHour24, I: parseHour24, j: parseDayOfYear, L: parseMilliseconds, m: parseMonthNumber, M: parseMinutes, p: function parsePeriod(e, t, n) { var r = c.exec(t.slice(n)); return r ? (e.p = d[r[0].toLowerCase()], n + r[0].length) : -1 }, Q: parseUnixTimestamp, s: parseUnixTimestampSeconds, S: parseSeconds, u: parseWeekdayNumberMonday, U: parseWeekNumberSunday, V: parseWeekNumberISO, w: parseWeekdayNumberSunday, W: parseWeekNumberMonday, x: function parseLocaleDate(e, t, r) { return parseSpecifier(e, n, t, r) }, X: function parseLocaleTime(e, t, n) { return parseSpecifier(e, r, t, n) }, y: parseYear, Y: parseFullYear, Z: parseZone, "%": parseLiteralPercent }; function newFormat(e, t) { return function (n) { var r, i, o, a = [], s = -1, l = 0, u = e.length; for (n instanceof Date || (n = new Date(+n)); ++s < u;)37 === e.charCodeAt(s) && (a.push(e.slice(l, s)), null != (i = D[r = e.charAt(++s)]) ? r = e.charAt(++s) : i = "e" === r ? " " : "0", (o = t[r]) && (r = o(n, i)), a.push(r), l = s + 1); return a.push(e.slice(l, s)), a.join("") } } function newParse(e, t) { return function (n) { var r, i, o = newYear(1900); if (parseSpecifier(o, e, n += "", 0) != n.length) return null; if ("Q" in o) return new Date(o.Q); if ("p" in o && (o.H = o.H % 12 + 12 * o.p), "V" in o) { if (o.V < 1 || o.V > 53) return null; "w" in o || (o.w = 1), "Z" in o ? (r = (i = (r = utcDate(newYear(o.y))).getUTCDay()) > 4 || 0 === i ? l.ceil(r) : l(r), r = m.offset(r, 7 * (o.V - 1)), o.y = r.getUTCFullYear(), o.m = r.getUTCMonth(), o.d = r.getUTCDate() + (o.w + 6) % 7) : (r = (i = (r = t(newYear(o.y))).getDay()) > 4 || 0 === i ? v.ceil(r) : v(r), r = S.offset(r, 7 * (o.V - 1)), o.y = r.getFullYear(), o.m = r.getMonth(), o.d = r.getDate() + (o.w + 6) % 7) } else ("W" in o || "U" in o) && ("w" in o || (o.w = "u" in o ? o.u % 7 : "W" in o ? 1 : 0), i = "Z" in o ? utcDate(newYear(o.y)).getUTCDay() : t(newYear(o.y)).getDay(), o.m = 0, o.d = "W" in o ? (o.w + 6) % 7 + 7 * o.W - (i + 5) % 7 : o.w + 7 * o.U - (i + 6) % 7); return "Z" in o ? (o.H += o.Z / 100 | 0, o.M += o.Z % 100, utcDate(o)) : t(o) } } function parseSpecifier(e, t, n, r) { for (var i, o, a = 0, s = t.length, l = n.length; a < s;) { if (r >= l) return -1; if (37 === (i = t.charCodeAt(a++))) { if (i = t.charAt(a++), !(o = k[i in D ? t.charAt(a++) : i]) || (r = o(e, n, r)) < 0) return -1 } else if (i != n.charCodeAt(r++)) return -1 } return r } return x.x = newFormat(n, x), x.X = newFormat(r, x), x.c = newFormat(t, x), C.x = newFormat(n, C), C.X = newFormat(r, C), C.c = newFormat(t, C), { format: function (e) { var t = newFormat(e += "", x); return t.toString = function () { return e }, t }, parse: function (e) { var t = newParse(e += "", localDate); return t.toString = function () { return e }, t }, utcFormat: function (e) { var t = newFormat(e += "", C); return t.toString = function () { return e }, t }, utcParse: function (e) { var t = newParse(e, utcDate); return t.toString = function () { return e }, t } } } var E, A, P, R, O, D = { "-": "", _: " ", 0: "0" }, F = /^\s*\d+/, I = /^%/, N = /[\\^$*+?|[\]().{}]/g; function pad(e, t, n) { var r = e < 0 ? "-" : "", i = (r ? -e : e) + "", o = i.length; return r + (o < n ? new Array(n - o + 1).join(t) + i : i) } function requote(e) { return e.replace(N, "\\$&") } function formatRe(e) { return new RegExp("^(?:" + e.map(requote).join("|") + ")", "i") } function formatLookup(e) { for (var t = {}, n = -1, r = e.length; ++n < r;)t[e[n].toLowerCase()] = n; return t } function parseWeekdayNumberSunday(e, t, n) { var r = F.exec(t.slice(n, n + 1)); return r ? (e.w = +r[0], n + r[0].length) : -1 } function parseWeekdayNumberMonday(e, t, n) { var r = F.exec(t.slice(n, n + 1)); return r ? (e.u = +r[0], n + r[0].length) : -1 } function parseWeekNumberSunday(e, t, n) { var r = F.exec(t.slice(n, n + 2)); return r ? (e.U = +r[0], n + r[0].length) : -1 } function parseWeekNumberISO(e, t, n) { var r = F.exec(t.slice(n, n + 2)); return r ? (e.V = +r[0], n + r[0].length) : -1 } function parseWeekNumberMonday(e, t, n) { var r = F.exec(t.slice(n, n + 2)); return r ? (e.W = +r[0], n + r[0].length) : -1 } function parseFullYear(e, t, n) { var r = F.exec(t.slice(n, n + 4)); return r ? (e.y = +r[0], n + r[0].length) : -1 } function parseYear(e, t, n) { var r = F.exec(t.slice(n, n + 2)); return r ? (e.y = +r[0] + (+r[0] > 68 ? 1900 : 2e3), n + r[0].length) : -1 } function parseZone(e, t, n) { var r = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n, n + 6)); return r ? (e.Z = r[1] ? 0 : -(r[2] + (r[3] || "00")), n + r[0].length) : -1 } function parseMonthNumber(e, t, n) { var r = F.exec(t.slice(n, n + 2)); return r ? (e.m = r[0] - 1, n + r[0].length) : -1 } function parseDayOfMonth(e, t, n) { var r = F.exec(t.slice(n, n + 2)); return r ? (e.d = +r[0], n + r[0].length) : -1 } function parseDayOfYear(e, t, n) { var r = F.exec(t.slice(n, n + 3)); return r ? (e.m = 0, e.d = +r[0], n + r[0].length) : -1 } function parseHour24(e, t, n) { var r = F.exec(t.slice(n, n + 2)); return r ? (e.H = +r[0], n + r[0].length) : -1 } function parseMinutes(e, t, n) { var r = F.exec(t.slice(n, n + 2)); return r ? (e.M = +r[0], n + r[0].length) : -1 } function parseSeconds(e, t, n) { var r = F.exec(t.slice(n, n + 2)); return r ? (e.S = +r[0], n + r[0].length) : -1 } function parseMilliseconds(e, t, n) { var r = F.exec(t.slice(n, n + 3)); return r ? (e.L = +r[0], n + r[0].length) : -1 } function parseMicroseconds(e, t, n) { var r = F.exec(t.slice(n, n + 6)); return r ? (e.L = Math.floor(r[0] / 1e3), n + r[0].length) : -1 } function parseLiteralPercent(e, t, n) { var r = I.exec(t.slice(n, n + 1)); return r ? n + r[0].length : -1 } function parseUnixTimestamp(e, t, n) { var r = F.exec(t.slice(n)); return r ? (e.Q = +r[0], n + r[0].length) : -1 } function parseUnixTimestampSeconds(e, t, n) { var r = F.exec(t.slice(n)); return r ? (e.Q = 1e3 * +r[0], n + r[0].length) : -1 } function formatDayOfMonth(e, t) { return pad(e.getDate(), t, 2) } function formatHour24(e, t) { return pad(e.getHours(), t, 2) } function formatHour12(e, t) { return pad(e.getHours() % 12 || 12, t, 2) } function formatDayOfYear(e, t) { return pad(1 + S.count(T(e), e), t, 3) } function formatMilliseconds(e, t) { return pad(e.getMilliseconds(), t, 3) } function formatMicroseconds(e, t) { return formatMilliseconds(e, t) + "000" } function formatMonthNumber(e, t) { return pad(e.getMonth() + 1, t, 2) } function formatMinutes(e, t) { return pad(e.getMinutes(), t, 2) } function formatSeconds(e, t) { return pad(e.getSeconds(), t, 2) } function formatWeekdayNumberMonday(e) { var t = e.getDay(); return 0 === t ? 7 : t } function formatWeekNumberSunday(e, t) { return pad(g.count(T(e), e), t, 2) } function formatWeekNumberISO(e, t) { var n = e.getDay(); return e = n >= 4 || 0 === n ? b(e) : b.ceil(e), pad(b.count(T(e), e) + (4 === T(e).getDay()), t, 2) } function formatWeekdayNumberSunday(e) { return e.getDay() } function formatWeekNumberMonday(e, t) { return pad(v.count(T(e), e), t, 2) } function formatYear(e, t) { return pad(e.getFullYear() % 100, t, 2) } function formatFullYear(e, t) { return pad(e.getFullYear() % 1e4, t, 4) } function formatZone(e) { var t = e.getTimezoneOffset(); return (t > 0 ? "-" : (t *= -1, "+")) + pad(t / 60 | 0, "0", 2) + pad(t % 60, "0", 2) } function formatUTCDayOfMonth(e, t) { return pad(e.getUTCDate(), t, 2) } function formatUTCHour24(e, t) { return pad(e.getUTCHours(), t, 2) } function formatUTCHour12(e, t) { return pad(e.getUTCHours() % 12 || 12, t, 2) } function formatUTCDayOfYear(e, t) { return pad(1 + m.count(M(e), e), t, 3) } function formatUTCMilliseconds(e, t) { return pad(e.getUTCMilliseconds(), t, 3) } function formatUTCMicroseconds(e, t) { return formatUTCMilliseconds(e, t) + "000" } function formatUTCMonthNumber(e, t) { return pad(e.getUTCMonth() + 1, t, 2) } function formatUTCMinutes(e, t) { return pad(e.getUTCMinutes(), t, 2) } function formatUTCSeconds(e, t) { return pad(e.getUTCSeconds(), t, 2) } function formatUTCWeekdayNumberMonday(e) { var t = e.getUTCDay(); return 0 === t ? 7 : t } function formatUTCWeekNumberSunday(e, t) { return pad(s.count(M(e), e), t, 2) } function formatUTCWeekNumberISO(e, t) { var n = e.getUTCDay(); return e = n >= 4 || 0 === n ? d(e) : d.ceil(e), pad(d.count(M(e), e) + (4 === M(e).getUTCDay()), t, 2) } function formatUTCWeekdayNumberSunday(e) { return e.getUTCDay() } function formatUTCWeekNumberMonday(e, t) { return pad(l.count(M(e), e), t, 2) } function formatUTCYear(e, t) { return pad(e.getUTCFullYear() % 100, t, 2) } function formatUTCFullYear(e, t) { return pad(e.getUTCFullYear() % 1e4, t, 4) } function formatUTCZone() { return "+0000" } function formatLiteralPercent() { return "%" } function formatUnixTimestamp(e) { return +e } function formatUnixTimestampSeconds(e) { return Math.floor(+e / 1e3) } function defaultLocale(e) { return E = formatLocale(e), A = E.format, P = E.parse, R = E.utcFormat, O = E.utcParse, E } defaultLocale({ dateTime: "%x, %X", date: "%-m/%-d/%Y", time: "%-I:%M:%S %p", periods: ["AM", "PM"], days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"] }); var $ = Date.prototype.toISOString ? function formatIsoNative(e) { return e.toISOString() } : R("%Y-%m-%dT%H:%M:%S.%LZ"); var B = +new Date("2000-01-01T00:00:00.000Z") ? function parseIsoNative(e) { var t = new Date(e); return isNaN(t) ? null : t } : O("%Y-%m-%dT%H:%M:%S.%LZ"); n.d(t, "timeFormatDefaultLocale", function () { return defaultLocale }), n.d(t, "timeFormat", function () { return A }), n.d(t, "timeParse", function () { return P }), n.d(t, "utcFormat", function () { return R }), n.d(t, "utcParse", function () { return O }), n.d(t, "timeFormatLocale", function () { return formatLocale }), n.d(t, "isoFormat", function () { return $ }), n.d(t, "isoParse", function () { return B }) }, function(e, t, n) { "use strict"; n.r(t); var r, i = function (e, t) { if ((n = (e = t ? e.toExponential(t - 1) : e.toExponential()).indexOf("e")) < 0) return null; var n, r = e.slice(0, n); return [r.length > 1 ? r[0] + r.slice(2) : r, +e.slice(n + 1)] }, o = function (e) { return (e = i(Math.abs(e))) ? e[1] : NaN }, a = function (e, t) { var n = i(e, t); if (!n) return e + ""; var r = n[0], o = n[1]; return o < 0 ? "0." + new Array(-o).join("0") + r : r.length > o + 1 ? r.slice(0, o + 1) + "." + r.slice(o + 1) : r + new Array(o - r.length + 2).join("0") }, s = { "": function (e, t) { e = e.toPrecision(t); e: for (var n, r = e.length, i = 1, o = -1; i < r; ++i)switch (e[i]) { case ".": o = n = i; break; case "0": 0 === o && (o = i), n = i; break; case "e": break e; default: o > 0 && (o = 0) }return o > 0 ? e.slice(0, o) + e.slice(n + 1) : e }, "%": function (e, t) { return (100 * e).toFixed(t) }, b: function (e) { return Math.round(e).toString(2) }, c: function (e) { return e + "" }, d: function (e) { return Math.round(e).toString(10) }, e: function (e, t) { return e.toExponential(t) }, f: function (e, t) { return e.toFixed(t) }, g: function (e, t) { return e.toPrecision(t) }, o: function (e) { return Math.round(e).toString(8) }, p: function (e, t) { return a(100 * e, t) }, r: a, s: function (e, t) { var n = i(e, t); if (!n) return e + ""; var o = n[0], a = n[1], s = a - (r = 3 * Math.max(-8, Math.min(8, Math.floor(a / 3)))) + 1, l = o.length; return s === l ? o : s > l ? o + new Array(s - l + 1).join("0") : s > 0 ? o.slice(0, s) + "." + o.slice(s) : "0." + new Array(1 - s).join("0") + i(e, Math.max(0, t + s - 1))[0] }, X: function (e) { return Math.round(e).toString(16).toUpperCase() }, x: function (e) { return Math.round(e).toString(16) } }, l = /^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i; function formatSpecifier(e) { return new FormatSpecifier(e) } function FormatSpecifier(e) { if (!(t = l.exec(e))) throw new Error("invalid format: " + e); var t, n = t[1] || " ", r = t[2] || ">", i = t[3] || "-", o = t[4] || "", a = !!t[5], u = t[6] && +t[6], c = !!t[7], d = t[8] && +t[8].slice(1), f = t[9] || ""; "n" === f ? (c = !0, f = "g") : s[f] || (f = ""), (a || "0" === n && "=" === r) && (a = !0, n = "0", r = "="), this.fill = n, this.align = r, this.sign = i, this.symbol = o, this.zero = a, this.width = u, this.comma = c, this.precision = d, this.type = f } formatSpecifier.prototype = FormatSpecifier.prototype, FormatSpecifier.prototype.toString = function () { return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (null == this.width ? "" : Math.max(1, 0 | this.width)) + (this.comma ? "," : "") + (null == this.precision ? "" : "." + Math.max(0, 0 | this.precision)) + this.type }; var u, c, d, f = function (e) { return e }, h = ["y", "z", "a", "f", "p", "n", "\xb5", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"], p = function (e) { var t, n, i = e.grouping && e.thousands ? (t = e.grouping, n = e.thousands, function (e, r) { for (var i = e.length, o = [], a = 0, s = t[0], l = 0; i > 0 && s > 0 && (l + s + 1 > r && (s = Math.max(1, r - l)), o.push(e.substring(i -= s, i + s)), !((l += s + 1) > r));)s = t[a = (a + 1) % t.length]; return o.reverse().join(n) }) : f, a = e.currency, l = e.decimal, u = e.numerals ? function (e) { return function (t) { return t.replace(/[0-9]/g, function (t) { return e[+t] }) } }(e.numerals) : f, c = e.percent || "%"; function newFormat(e) { var t = (e = formatSpecifier(e)).fill, n = e.align, o = e.sign, d = e.symbol, f = e.zero, p = e.width, m = e.comma, g = e.precision, v = e.type, y = "$" === d ? a[0] : "#" === d && /[boxX]/.test(v) ? "0" + v.toLowerCase() : "", _ = "$" === d ? a[1] : /[%p]/.test(v) ? c : "", b = s[v], w = !v || /[defgprs%]/.test(v); function format(e) { var a, s, c, d = y, x = _; if ("c" === v) x = b(e) + x, e = ""; else { var C = (e = +e) < 0; if (e = b(Math.abs(e), g), C && 0 == +e && (C = !1), d = (C ? "(" === o ? o : "-" : "-" === o || "(" === o ? "" : o) + d, x = x + ("s" === v ? h[8 + r / 3] : "") + (C && "(" === o ? ")" : ""), w) for (a = -1, s = e.length; ++a < s;)if (48 > (c = e.charCodeAt(a)) || c > 57) { x = (46 === c ? l + e.slice(a + 1) : e.slice(a)) + x, e = e.slice(0, a); break } } m && !f && (e = i(e, 1 / 0)); var S = d.length + e.length + x.length, k = S < p ? new Array(p - S + 1).join(t) : ""; switch (m && f && (e = i(k + e, k.length ? p - x.length : 1 / 0), k = ""), n) { case "<": e = d + e + x + k; break; case "=": e = d + k + e + x; break; case "^": e = k.slice(0, S = k.length >> 1) + d + e + x + k.slice(S); break; default: e = k + d + e + x }return u(e) } return g = null == g ? v ? 6 : 12 : /[gprs]/.test(v) ? Math.max(1, Math.min(21, g)) : Math.max(0, Math.min(20, g)), format.toString = function () { return e + "" }, format } return { format: newFormat, formatPrefix: function formatPrefix(e, t) { var n = newFormat(((e = formatSpecifier(e)).type = "f", e)), r = 3 * Math.max(-8, Math.min(8, Math.floor(o(t) / 3))), i = Math.pow(10, -r), a = h[8 + r / 3]; return function (e) { return n(i * e) + a } } } }; function defaultLocale(e) { return u = p(e), c = u.format, d = u.formatPrefix, u } defaultLocale({ decimal: ".", thousands: ",", grouping: [3], currency: ["$", ""] }); var m = function (e) { return Math.max(0, -o(Math.abs(e))) }, g = function (e, t) { return Math.max(0, 3 * Math.max(-8, Math.min(8, Math.floor(o(t) / 3))) - o(Math.abs(e))) }, v = function (e, t) { return e = Math.abs(e), t = Math.abs(t) - e, Math.max(0, o(t) - o(e)) + 1 }; n.d(t, "formatDefaultLocale", function () { return defaultLocale }), n.d(t, "format", function () { return c }), n.d(t, "formatPrefix", function () { return d }), n.d(t, "formatLocale", function () { return p }), n.d(t, "formatSpecifier", function () { return formatSpecifier }), n.d(t, "precisionFixed", function () { return m }), n.d(t, "precisionPrefix", function () { return g }), n.d(t, "precisionRound", function () { return v }) },,, function(e, t, n) { "use strict"; n.r(t); var r = function (e, t, n) { e.prototype = t.prototype = n, n.constructor = e }; function extend(e, t) { var n = Object.create(e.prototype); for (var r in t) n[r] = t[r]; return n } function Color() { } var i = "\\s*([+-]?\\d+)\\s*", o = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*", a = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*", s = /^#([0-9a-f]{3})$/, l = /^#([0-9a-f]{6})$/, u = new RegExp("^rgb\\(" + [i, i, i] + "\\)$"), c = new RegExp("^rgb\\(" + [a, a, a] + "\\)$"), d = new RegExp("^rgba\\(" + [i, i, i, o] + "\\)$"), f = new RegExp("^rgba\\(" + [a, a, a, o] + "\\)$"), h = new RegExp("^hsl\\(" + [o, a, a] + "\\)$"), p = new RegExp("^hsla\\(" + [o, a, a, o] + "\\)$"), m = { aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 }; function color_color(e) { var t; return e = (e + "").trim().toLowerCase(), (t = s.exec(e)) ? new Rgb((t = parseInt(t[1], 16)) >> 8 & 15 | t >> 4 & 240, t >> 4 & 15 | 240 & t, (15 & t) << 4 | 15 & t, 1) : (t = l.exec(e)) ? rgbn(parseInt(t[1], 16)) : (t = u.exec(e)) ? new Rgb(t[1], t[2], t[3], 1) : (t = c.exec(e)) ? new Rgb(255 * t[1] / 100, 255 * t[2] / 100, 255 * t[3] / 100, 1) : (t = d.exec(e)) ? rgba(t[1], t[2], t[3], t[4]) : (t = f.exec(e)) ? rgba(255 * t[1] / 100, 255 * t[2] / 100, 255 * t[3] / 100, t[4]) : (t = h.exec(e)) ? hsla(t[1], t[2] / 100, t[3] / 100, 1) : (t = p.exec(e)) ? hsla(t[1], t[2] / 100, t[3] / 100, t[4]) : m.hasOwnProperty(e) ? rgbn(m[e]) : "transparent" === e ? new Rgb(NaN, NaN, NaN, 0) : null } function rgbn(e) { return new Rgb(e >> 16 & 255, e >> 8 & 255, 255 & e, 1) } function rgba(e, t, n, r) { return r <= 0 && (e = t = n = NaN), new Rgb(e, t, n, r) } function rgbConvert(e) { return e instanceof Color || (e = color_color(e)), e ? new Rgb((e = e.rgb()).r, e.g, e.b, e.opacity) : new Rgb } function color_rgb(e, t, n, r) { return 1 === arguments.length ? rgbConvert(e) : new Rgb(e, t, n, null == r ? 1 : r) } function Rgb(e, t, n, r) { this.r = +e, this.g = +t, this.b = +n, this.opacity = +r } function hex(e) { return ((e = Math.max(0, Math.min(255, Math.round(e) || 0))) < 16 ? "0" : "") + e.toString(16) } function hsla(e, t, n, r) { return r <= 0 ? e = t = n = NaN : n <= 0 || n >= 1 ? e = t = NaN : t <= 0 && (e = NaN), new Hsl(e, t, n, r) } function hsl(e, t, n, r) { return 1 === arguments.length ? function hslConvert(e) { if (e instanceof Hsl) return new Hsl(e.h, e.s, e.l, e.opacity); if (e instanceof Color || (e = color_color(e)), !e) return new Hsl; if (e instanceof Hsl) return e; var t = (e = e.rgb()).r / 255, n = e.g / 255, r = e.b / 255, i = Math.min(t, n, r), o = Math.max(t, n, r), a = NaN, s = o - i, l = (o + i) / 2; return s ? (a = t === o ? (n - r) / s + 6 * (n < r) : n === o ? (r - t) / s + 2 : (t - n) / s + 4, s /= l < .5 ? o + i : 2 - o - i, a *= 60) : s = l > 0 && l < 1 ? 0 : a, new Hsl(a, s, l, e.opacity) }(e) : new Hsl(e, t, n, null == r ? 1 : r) } function Hsl(e, t, n, r) { this.h = +e, this.s = +t, this.l = +n, this.opacity = +r } function hsl2rgb(e, t, n) { return 255 * (e < 60 ? t + (n - t) * e / 60 : e < 180 ? n : e < 240 ? t + (n - t) * (240 - e) / 60 : t) } r(Color, color_color, { displayable: function () { return this.rgb().displayable() }, hex: function () { return this.rgb().hex() }, toString: function () { return this.rgb() + "" } }), r(Rgb, color_rgb, extend(Color, { brighter: function (e) { return e = null == e ? 1 / .7 : Math.pow(1 / .7, e), new Rgb(this.r * e, this.g * e, this.b * e, this.opacity) }, darker: function (e) { return e = null == e ? .7 : Math.pow(.7, e), new Rgb(this.r * e, this.g * e, this.b * e, this.opacity) }, rgb: function () { return this }, displayable: function () { return 0 <= this.r && this.r <= 255 && 0 <= this.g && this.g <= 255 && 0 <= this.b && this.b <= 255 && 0 <= this.opacity && this.opacity <= 1 }, hex: function () { return "#" + hex(this.r) + hex(this.g) + hex(this.b) }, toString: function () { var e = this.opacity; return (1 === (e = isNaN(e) ? 1 : Math.max(0, Math.min(1, e))) ? "rgb(" : "rgba(") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (1 === e ? ")" : ", " + e + ")") } })), r(Hsl, hsl, extend(Color, { brighter: function (e) { return e = null == e ? 1 / .7 : Math.pow(1 / .7, e), new Hsl(this.h, this.s, this.l * e, this.opacity) }, darker: function (e) { return e = null == e ? .7 : Math.pow(.7, e), new Hsl(this.h, this.s, this.l * e, this.opacity) }, rgb: function () { var e = this.h % 360 + 360 * (this.h < 0), t = isNaN(e) || isNaN(this.s) ? 0 : this.s, n = this.l, r = n + (n < .5 ? n : 1 - n) * t, i = 2 * n - r; return new Rgb(hsl2rgb(e >= 240 ? e - 240 : e + 120, i, r), hsl2rgb(e, i, r), hsl2rgb(e < 120 ? e + 240 : e - 120, i, r), this.opacity) }, displayable: function () { return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1 } })); var g = Math.PI / 180, v = 180 / Math.PI, y = .96422, _ = 1, b = .82521, w = 4 / 29, x = 6 / 29, C = 3 * x * x, S = x * x * x; function labConvert(e) { if (e instanceof Lab) return new Lab(e.l, e.a, e.b, e.opacity); if (e instanceof Hcl) { if (isNaN(e.h)) return new Lab(e.l, 0, 0, e.opacity); var t = e.h * g; return new Lab(e.l, Math.cos(t) * e.c, Math.sin(t) * e.c, e.opacity) } e instanceof Rgb || (e = rgbConvert(e)); var n, r, i = rgb2lrgb(e.r), o = rgb2lrgb(e.g), a = rgb2lrgb(e.b), s = xyz2lab((.2225045 * i + .7168786 * o + .0606169 * a) / _); return i === o && o === a ? n = r = s : (n = xyz2lab((.4360747 * i + .3850649 * o + .1430804 * a) / y), r = xyz2lab((.0139322 * i + .0971045 * o + .7141733 * a) / b)), new Lab(116 * s - 16, 500 * (n - s), 200 * (s - r), e.opacity) } function lab(e, t, n, r) { return 1 === arguments.length ? labConvert(e) : new Lab(e, t, n, null == r ? 1 : r) } function Lab(e, t, n, r) { this.l = +e, this.a = +t, this.b = +n, this.opacity = +r } function xyz2lab(e) { return e > S ? Math.pow(e, 1 / 3) : e / C + w } function lab2xyz(e) { return e > x ? e * e * e : C * (e - w) } function lrgb2rgb(e) { return 255 * (e <= .0031308 ? 12.92 * e : 1.055 * Math.pow(e, 1 / 2.4) - .055) } function rgb2lrgb(e) { return (e /= 255) <= .04045 ? e / 12.92 : Math.pow((e + .055) / 1.055, 2.4) } function hclConvert(e) { if (e instanceof Hcl) return new Hcl(e.h, e.c, e.l, e.opacity); if (e instanceof Lab || (e = labConvert(e)), 0 === e.a && 0 === e.b) return new Hcl(NaN, 0, e.l, e.opacity); var t = Math.atan2(e.b, e.a) * v; return new Hcl(t < 0 ? t + 360 : t, Math.sqrt(e.a * e.a + e.b * e.b), e.l, e.opacity) } function hcl(e, t, n, r) { return 1 === arguments.length ? hclConvert(e) : new Hcl(e, t, n, null == r ? 1 : r) } function Hcl(e, t, n, r) { this.h = +e, this.c = +t, this.l = +n, this.opacity = +r } r(Lab, lab, extend(Color, { brighter: function (e) { return new Lab(this.l + 18 * (null == e ? 1 : e), this.a, this.b, this.opacity) }, darker: function (e) { return new Lab(this.l - 18 * (null == e ? 1 : e), this.a, this.b, this.opacity) }, rgb: function () { var e = (this.l + 16) / 116, t = isNaN(this.a) ? e : e + this.a / 500, n = isNaN(this.b) ? e : e - this.b / 200; return new Rgb(lrgb2rgb(3.1338561 * (t = y * lab2xyz(t)) - 1.6168667 * (e = _ * lab2xyz(e)) - .4906146 * (n = b * lab2xyz(n))), lrgb2rgb(-.9787684 * t + 1.9161415 * e + .033454 * n), lrgb2rgb(.0719453 * t - .2289914 * e + 1.4052427 * n), this.opacity) } })), r(Hcl, hcl, extend(Color, { brighter: function (e) { return new Hcl(this.h, this.c, this.l + 18 * (null == e ? 1 : e), this.opacity) }, darker: function (e) { return new Hcl(this.h, this.c, this.l - 18 * (null == e ? 1 : e), this.opacity) }, rgb: function () { return labConvert(this).rgb() } })); var k = -.14861, T = 1.78277, L = -.29227, M = -.90649, E = 1.97294, A = E * M, P = E * T, R = T * L - M * k; function cubehelix_cubehelix(e, t, n, r) { return 1 === arguments.length ? function cubehelixConvert(e) { if (e instanceof Cubehelix) return new Cubehelix(e.h, e.s, e.l, e.opacity); e instanceof Rgb || (e = rgbConvert(e)); var t = e.r / 255, n = e.g / 255, r = e.b / 255, i = (R * r + A * t - P * n) / (R + A - P), o = r - i, a = (E * (n - i) - L * o) / M, s = Math.sqrt(a * a + o * o) / (E * i * (1 - i)), l = s ? Math.atan2(a, o) * v - 120 : NaN; return new Cubehelix(l < 0 ? l + 360 : l, s, i, e.opacity) }(e) : new Cubehelix(e, t, n, null == r ? 1 : r) } function Cubehelix(e, t, n, r) { this.h = +e, this.s = +t, this.l = +n, this.opacity = +r } function basis(e, t, n, r, i) { var o = e * e, a = o * e; return ((1 - 3 * e + 3 * o - a) * t + (4 - 6 * o + 3 * a) * n + (1 + 3 * e + 3 * o - 3 * a) * r + a * i) / 6 } r(Cubehelix, cubehelix_cubehelix, extend(Color, { brighter: function (e) { return e = null == e ? 1 / .7 : Math.pow(1 / .7, e), new Cubehelix(this.h, this.s, this.l * e, this.opacity) }, darker: function (e) { return e = null == e ? .7 : Math.pow(.7, e), new Cubehelix(this.h, this.s, this.l * e, this.opacity) }, rgb: function () { var e = isNaN(this.h) ? 0 : (this.h + 120) * g, t = +this.l, n = isNaN(this.s) ? 0 : this.s * t * (1 - t), r = Math.cos(e), i = Math.sin(e); return new Rgb(255 * (t + n * (k * r + T * i)), 255 * (t + n * (L * r + M * i)), 255 * (t + n * (E * r)), this.opacity) } })); var O = function (e) { var t = e.length - 1; return function (n) { var r = n <= 0 ? n = 0 : n >= 1 ? (n = 1, t - 1) : Math.floor(n * t), i = e[r], o = e[r + 1], a = r > 0 ? e[r - 1] : 2 * i - o, s = r < t - 1 ? e[r + 2] : 2 * o - i; return basis((n - r / t) * t, a, i, o, s) } }, D = function (e) { var t = e.length; return function (n) { var r = Math.floor(((n %= 1) < 0 ? ++n : n) * t), i = e[(r + t - 1) % t], o = e[r % t], a = e[(r + 1) % t], s = e[(r + 2) % t]; return basis((n - r / t) * t, i, o, a, s) } }, F = function (e) { return function () { return e } }; function linear(e, t) { return function (n) { return e + n * t } } function color_hue(e, t) { var n = t - e; return n ? linear(e, n > 180 || n < -180 ? n - 360 * Math.round(n / 360) : n) : F(isNaN(e) ? t : e) } function gamma(e) { return 1 == (e = +e) ? nogamma : function (t, n) { return n - t ? function exponential(e, t, n) { return e = Math.pow(e, n), t = Math.pow(t, n) - e, n = 1 / n, function (r) { return Math.pow(e + r * t, n) } }(t, n, e) : F(isNaN(t) ? n : t) } } function nogamma(e, t) { var n = t - e; return n ? linear(e, n) : F(isNaN(e) ? t : e) } var I = function rgbGamma(e) { var t = gamma(e); function rgb(e, n) { var r = t((e = color_rgb(e)).r, (n = color_rgb(n)).r), i = t(e.g, n.g), o = t(e.b, n.b), a = nogamma(e.opacity, n.opacity); return function (t) { return e.r = r(t), e.g = i(t), e.b = o(t), e.opacity = a(t), e + "" } } return rgb.gamma = rgbGamma, rgb }(1); function rgbSpline(e) { return function (t) { var n, r, i = t.length, o = new Array(i), a = new Array(i), s = new Array(i); for (n = 0; n < i; ++n)r = color_rgb(t[n]), o[n] = r.r || 0, a[n] = r.g || 0, s[n] = r.b || 0; return o = e(o), a = e(a), s = e(s), r.opacity = 1, function (e) { return r.r = o(e), r.g = a(e), r.b = s(e), r + "" } } } var N = rgbSpline(O), $ = rgbSpline(D), B = function (e, t) { var n, r = t ? t.length : 0, i = e ? Math.min(r, e.length) : 0, o = new Array(i), a = new Array(r); for (n = 0; n < i; ++n)o[n] = K(e[n], t[n]); for (; n < r; ++n)a[n] = t[n]; return function (e) { for (n = 0; n < i; ++n)a[n] = o[n](e); return a } }, z = function (e, t) { var n = new Date; return t -= e = +e, function (r) { return n.setTime(e + t * r), n } }, j = function (e, t) { return t -= e = +e, function (n) { return e + t * n } }, U = function (e, t) { var n, r = {}, i = {}; for (n in null !== e && "object" == typeof e || (e = {}), null !== t && "object" == typeof t || (t = {}), t) n in e ? r[n] = K(e[n], t[n]) : i[n] = t[n]; return function (e) { for (n in r) i[n] = r[n](e); return i } }, q = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, H = new RegExp(q.source, "g"); var V, G, W, Y, Z = function (e, t) { var n, r, i, o = q.lastIndex = H.lastIndex = 0, a = -1, s = [], l = []; for (e += "", t += ""; (n = q.exec(e)) && (r = H.exec(t));)(i = r.index) > o && (i = t.slice(o, i), s[a] ? s[a] += i : s[++a] = i), (n = n[0]) === (r = r[0]) ? s[a] ? s[a] += r : s[++a] = r : (s[++a] = null, l.push({ i: a, x: j(n, r) })), o = H.lastIndex; return o < t.length && (i = t.slice(o), s[a] ? s[a] += i : s[++a] = i), s.length < 2 ? l[0] ? function one(e) { return function (t) { return e(t) + "" } }(l[0].x) : function zero(e) { return function () { return e } }(t) : (t = l.length, function (e) { for (var n, r = 0; r < t; ++r)s[(n = l[r]).i] = n.x(e); return s.join("") }) }, K = function (e, t) { var n, r = typeof t; return null == t || "boolean" === r ? F(t) : ("number" === r ? j : "string" === r ? (n = color_color(t)) ? (t = n, I) : Z : t instanceof color_color ? I : t instanceof Date ? z : Array.isArray(t) ? B : "function" != typeof t.valueOf && "function" != typeof t.toString || isNaN(t) ? U : j)(e, t) }, X = function (e) { var t = e.length; return function (n) { return e[Math.max(0, Math.min(t - 1, Math.floor(n * t)))] } }, J = function (e, t) { var n = color_hue(+e, +t); return function (e) { var t = n(e); return t - 360 * Math.floor(t / 360) } }, Q = function (e, t) { return t -= e = +e, function (n) { return Math.round(e + t * n) } }, ee = 180 / Math.PI, te = { translateX: 0, translateY: 0, rotate: 0, skewX: 0, scaleX: 1, scaleY: 1 }, ne = function (e, t, n, r, i, o) { var a, s, l; return (a = Math.sqrt(e * e + t * t)) && (e /= a, t /= a), (l = e * n + t * r) && (n -= e * l, r -= t * l), (s = Math.sqrt(n * n + r * r)) && (n /= s, r /= s, l /= s), e * r < t * n && (e = -e, t = -t, l = -l, a = -a), { translateX: i, translateY: o, rotate: Math.atan2(t, e) * ee, skewX: Math.atan(l) * ee, scaleX: a, scaleY: s } }; function interpolateTransform(e, t, n, r) { function pop(e) { return e.length ? e.pop() + " " : "" } return function (i, o) { var a = [], s = []; return i = e(i), o = e(o), function translate(e, r, i, o, a, s) { if (e !== i || r !== o) { var l = a.push("translate(", null, t, null, n); s.push({ i: l - 4, x: j(e, i) }, { i: l - 2, x: j(r, o) }) } else (i || o) && a.push("translate(" + i + t + o + n) }(i.translateX, i.translateY, o.translateX, o.translateY, a, s), function rotate(e, t, n, i) { e !== t ? (e - t > 180 ? t += 360 : t - e > 180 && (e += 360), i.push({ i: n.push(pop(n) + "rotate(", null, r) - 2, x: j(e, t) })) : t && n.push(pop(n) + "rotate(" + t + r) }(i.rotate, o.rotate, a, s), function skewX(e, t, n, i) { e !== t ? i.push({ i: n.push(pop(n) + "skewX(", null, r) - 2, x: j(e, t) }) : t && n.push(pop(n) + "skewX(" + t + r) }(i.skewX, o.skewX, a, s), function scale(e, t, n, r, i, o) { if (e !== n || t !== r) { var a = i.push(pop(i) + "scale(", null, ",", null, ")"); o.push({ i: a - 4, x: j(e, n) }, { i: a - 2, x: j(t, r) }) } else 1 === n && 1 === r || i.push(pop(i) + "scale(" + n + "," + r + ")") }(i.scaleX, i.scaleY, o.scaleX, o.scaleY, a, s), i = o = null, function (e) { for (var t, n = -1, r = s.length; ++n < r;)a[(t = s[n]).i] = t.x(e); return a.join("") } } } var re = interpolateTransform(function parseCss(e) { return "none" === e ? te : (V || (V = document.createElement("DIV"), G = document.documentElement, W = document.defaultView), V.style.transform = e, e = W.getComputedStyle(G.appendChild(V), null).getPropertyValue("transform"), G.removeChild(V), e = e.slice(7, -1).split(","), ne(+e[0], +e[1], +e[2], +e[3], +e[4], +e[5])) }, "px, ", "px)", "deg)"), ie = interpolateTransform(function parseSvg(e) { return null == e ? te : (Y || (Y = document.createElementNS("http://www.w3.org/2000/svg", "g")), Y.setAttribute("transform", e), (e = Y.transform.baseVal.consolidate()) ? (e = e.matrix, ne(e.a, e.b, e.c, e.d, e.e, e.f)) : te) }, ", ", ")", ")"), oe = Math.SQRT2; function zoom_cosh(e) { return ((e = Math.exp(e)) + 1 / e) / 2 } var ae = function (e, t) { var n, r, i = e[0], o = e[1], a = e[2], s = t[0], l = t[1], u = t[2], c = s - i, d = l - o, f = c * c + d * d; if (f < 1e-12) r = Math.log(u / a) / oe, n = function (e) { return [i + e * c, o + e * d, a * Math.exp(oe * e * r)] }; else { var h = Math.sqrt(f), p = (u * u - a * a + 4 * f) / (2 * a * 2 * h), m = (u * u - a * a - 4 * f) / (2 * u * 2 * h), g = Math.log(Math.sqrt(p * p + 1) - p), v = Math.log(Math.sqrt(m * m + 1) - m); r = (v - g) / oe, n = function (e) { var t = e * r, n = zoom_cosh(g), s = a / (2 * h) * (n * function tanh(e) { return ((e = Math.exp(2 * e)) - 1) / (e + 1) }(oe * t + g) - function zoom_sinh(e) { return ((e = Math.exp(e)) - 1 / e) / 2 }(g)); return [i + s * c, o + s * d, a * n / zoom_cosh(oe * t + g)] } } return n.duration = 1e3 * r, n }; function hsl_hsl(e) { return function (t, n) { var r = e((t = hsl(t)).h, (n = hsl(n)).h), i = nogamma(t.s, n.s), o = nogamma(t.l, n.l), a = nogamma(t.opacity, n.opacity); return function (e) { return t.h = r(e), t.s = i(e), t.l = o(e), t.opacity = a(e), t + "" } } } var se = hsl_hsl(color_hue), le = hsl_hsl(nogamma); function lab_lab(e, t) { var n = nogamma((e = lab(e)).l, (t = lab(t)).l), r = nogamma(e.a, t.a), i = nogamma(e.b, t.b), o = nogamma(e.opacity, t.opacity); return function (t) { return e.l = n(t), e.a = r(t), e.b = i(t), e.opacity = o(t), e + "" } } function hcl_hcl(e) { return function (t, n) { var r = e((t = hcl(t)).h, (n = hcl(n)).h), i = nogamma(t.c, n.c), o = nogamma(t.l, n.l), a = nogamma(t.opacity, n.opacity); return function (e) { return t.h = r(e), t.c = i(e), t.l = o(e), t.opacity = a(e), t + "" } } } var ue = hcl_hcl(color_hue), ce = hcl_hcl(nogamma); function src_cubehelix_cubehelix(e) { return function cubehelixGamma(t) { function cubehelix(n, r) { var i = e((n = cubehelix_cubehelix(n)).h, (r = cubehelix_cubehelix(r)).h), o = nogamma(n.s, r.s), a = nogamma(n.l, r.l), s = nogamma(n.opacity, r.opacity); return function (e) { return n.h = i(e), n.s = o(e), n.l = a(Math.pow(e, t)), n.opacity = s(e), n + "" } } return t = +t, cubehelix.gamma = cubehelixGamma, cubehelix }(1) } var de = src_cubehelix_cubehelix(color_hue), fe = src_cubehelix_cubehelix(nogamma); function piecewise(e, t) { for (var n = 0, r = t.length - 1, i = t[0], o = new Array(r < 0 ? 0 : r); n < r;)o[n] = e(i, i = t[++n]); return function (e) { var t = Math.max(0, Math.min(r - 1, Math.floor(e *= r))); return o[t](e - t) } } var he = function (e, t) { for (var n = new Array(t), r = 0; r < t; ++r)n[r] = e(r / (t - 1)); return n }; n.d(t, "interpolate", function () { return K }), n.d(t, "interpolateArray", function () { return B }), n.d(t, "interpolateBasis", function () { return O }), n.d(t, "interpolateBasisClosed", function () { return D }), n.d(t, "interpolateDate", function () { return z }), n.d(t, "interpolateDiscrete", function () { return X }), n.d(t, "interpolateHue", function () { return J }), n.d(t, "interpolateNumber", function () { return j }), n.d(t, "interpolateObject", function () { return U }), n.d(t, "interpolateRound", function () { return Q }), n.d(t, "interpolateString", function () { return Z }), n.d(t, "interpolateTransformCss", function () { return re }), n.d(t, "interpolateTransformSvg", function () { return ie }), n.d(t, "interpolateZoom", function () { return ae }), n.d(t, "interpolateRgb", function () { return I }), n.d(t, "interpolateRgbBasis", function () { return N }), n.d(t, "interpolateRgbBasisClosed", function () { return $ }), n.d(t, "interpolateHsl", function () { return se }), n.d(t, "interpolateHslLong", function () { return le }), n.d(t, "interpolateLab", function () { return lab_lab }), n.d(t, "interpolateHcl", function () { return ue }), n.d(t, "interpolateHclLong", function () { return ce }), n.d(t, "interpolateCubehelix", function () { return de }), n.d(t, "interpolateCubehelixLong", function () { return fe }), n.d(t, "piecewise", function () { return piecewise }), n.d(t, "quantize", function () { return he }) }, function(e, t, n) { "use strict"; n.r(t); var r = function (e, t) { return e < t ? -1 : e > t ? 1 : e >= t ? 0 : NaN }, i = function (e) { return 1 === e.length && (e = function ascendingComparator(e) { return function (t, n) { return r(e(t), n) } }(e)), { left: function (t, n, r, i) { for (null == r && (r = 0), null == i && (i = t.length); r < i;) { var o = r + i >>> 1; e(t[o], n) < 0 ? r = o + 1 : i = o } return r }, right: function (t, n, r, i) { for (null == r && (r = 0), null == i && (i = t.length); r < i;) { var o = r + i >>> 1; e(t[o], n) > 0 ? i = o : r = o + 1 } return r } } }; var o = i(r), a = o.right, s = o.left, l = a, u = function (e, t) { null == t && (t = pair); for (var n = 0, r = e.length - 1, i = e[0], o = new Array(r < 0 ? 0 : r); n < r;)o[n] = t(i, i = e[++n]); return o }; function pair(e, t) { return [e, t] } var c = function (e, t, n) { var r, i, o, a, s = e.length, l = t.length, u = new Array(s * l); for (null == n && (n = pair), r = o = 0; r < s; ++r)for (a = e[r], i = 0; i < l; ++i, ++o)u[o] = n(a, t[i]); return u }, d = function (e, t) { return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN }, f = function (e) { return null === e ? NaN : +e }, h = function (e, t) { var n, r, i = e.length, o = 0, a = -1, s = 0, l = 0; if (null == t) for (; ++a < i;)isNaN(n = f(e[a])) || (l += (r = n - s) * (n - (s += r / ++o))); else for (; ++a < i;)isNaN(n = f(t(e[a], a, e))) || (l += (r = n - s) * (n - (s += r / ++o))); if (o > 1) return l / (o - 1) }, p = function (e, t) { var n = h(e, t); return n ? Math.sqrt(n) : n }, m = function (e, t) { var n, r, i, o = e.length, a = -1; if (null == t) { for (; ++a < o;)if (null != (n = e[a]) && n >= n) for (r = i = n; ++a < o;)null != (n = e[a]) && (r > n && (r = n), i < n && (i = n)) } else for (; ++a < o;)if (null != (n = t(e[a], a, e)) && n >= n) for (r = i = n; ++a < o;)null != (n = t(e[a], a, e)) && (r > n && (r = n), i < n && (i = n)); return [r, i] }, g = Array.prototype, v = g.slice, y = g.map, _ = function (e) { return function () { return e } }, b = function (e) { return e }, w = function (e, t, n) { e = +e, t = +t, n = (i = arguments.length) < 2 ? (t = e, e = 0, 1) : i < 3 ? 1 : +n; for (var r = -1, i = 0 | Math.max(0, Math.ceil((t - e) / n)), o = new Array(i); ++r < i;)o[r] = e + r * n; return o }, x = Math.sqrt(50), C = Math.sqrt(10), S = Math.sqrt(2), k = function (e, t, n) { var r, i, o, a, s = -1; if (n = +n, (e = +e) === (t = +t) && n > 0) return [e]; if ((r = t < e) && (i = e, e = t, t = i), 0 === (a = tickIncrement(e, t, n)) || !isFinite(a)) return []; if (a > 0) for (e = Math.ceil(e / a), t = Math.floor(t / a), o = new Array(i = Math.ceil(t - e + 1)); ++s < i;)o[s] = (e + s) * a; else for (e = Math.floor(e * a), t = Math.ceil(t * a), o = new Array(i = Math.ceil(e - t + 1)); ++s < i;)o[s] = (e - s) / a; return r && o.reverse(), o }; function tickIncrement(e, t, n) { var r = (t - e) / Math.max(0, n), i = Math.floor(Math.log(r) / Math.LN10), o = r / Math.pow(10, i); return i >= 0 ? (o >= x ? 10 : o >= C ? 5 : o >= S ? 2 : 1) * Math.pow(10, i) : -Math.pow(10, -i) / (o >= x ? 10 : o >= C ? 5 : o >= S ? 2 : 1) } function tickStep(e, t, n) { var r = Math.abs(t - e) / Math.max(0, n), i = Math.pow(10, Math.floor(Math.log(r) / Math.LN10)), o = r / i; return o >= x ? i *= 10 : o >= C ? i *= 5 : o >= S && (i *= 2), t < e ? -i : i } var T = function (e) { return Math.ceil(Math.log(e.length) / Math.LN2) + 1 }, L = function () { var e = b, t = m, n = T; function histogram(r) { var i, o, a = r.length, s = new Array(a); for (i = 0; i < a; ++i)s[i] = e(r[i], i, r); var u = t(s), c = u[0], d = u[1], f = n(s, c, d); Array.isArray(f) || (f = tickStep(c, d, f), f = w(Math.ceil(c / f) * f, Math.floor(d / f) * f, f)); for (var h = f.length; f[0] <= c;)f.shift(), --h; for (; f[h - 1] > d;)f.pop(), --h; var p, m = new Array(h + 1); for (i = 0; i <= h; ++i)(p = m[i] = []).x0 = i > 0 ? f[i - 1] : c, p.x1 = i < h ? f[i] : d; for (i = 0; i < a; ++i)c <= (o = s[i]) && o <= d && m[l(f, o, 0, h)].push(r[i]); return m } return histogram.value = function (t) { return arguments.length ? (e = "function" == typeof t ? t : _(t), histogram) : e }, histogram.domain = function (e) { return arguments.length ? (t = "function" == typeof e ? e : _([e[0], e[1]]), histogram) : t }, histogram.thresholds = function (e) { return arguments.length ? (n = "function" == typeof e ? e : Array.isArray(e) ? _(v.call(e)) : _(e), histogram) : n }, histogram }, M = function (e, t, n) { if (null == n && (n = f), r = e.length) { if ((t = +t) <= 0 || r < 2) return +n(e[0], 0, e); if (t >= 1) return +n(e[r - 1], r - 1, e); var r, i = (r - 1) * t, o = Math.floor(i), a = +n(e[o], o, e); return a + (+n(e[o + 1], o + 1, e) - a) * (i - o) } }, E = function (e, t, n) { return e = y.call(e, f).sort(r), Math.ceil((n - t) / (2 * (M(e, .75) - M(e, .25)) * Math.pow(e.length, -1 / 3))) }, A = function (e, t, n) { return Math.ceil((n - t) / (3.5 * p(e) * Math.pow(e.length, -1 / 3))) }, P = function (e, t) { var n, r, i = e.length, o = -1; if (null == t) { for (; ++o < i;)if (null != (n = e[o]) && n >= n) for (r = n; ++o < i;)null != (n = e[o]) && n > r && (r = n) } else for (; ++o < i;)if (null != (n = t(e[o], o, e)) && n >= n) for (r = n; ++o < i;)null != (n = t(e[o], o, e)) && n > r && (r = n); return r }, R = function (e, t) { var n, r = e.length, i = r, o = -1, a = 0; if (null == t) for (; ++o < r;)isNaN(n = f(e[o])) ? --i : a += n; else for (; ++o < r;)isNaN(n = f(t(e[o], o, e))) ? --i : a += n; if (i) return a / i }, O = function (e, t) { var n, i = e.length, o = -1, a = []; if (null == t) for (; ++o < i;)isNaN(n = f(e[o])) || a.push(n); else for (; ++o < i;)isNaN(n = f(t(e[o], o, e))) || a.push(n); return M(a.sort(r), .5) }, D = function (e) { for (var t, n, r, i = e.length, o = -1, a = 0; ++o < i;)a += e[o].length; for (n = new Array(a); --i >= 0;)for (t = (r = e[i]).length; --t >= 0;)n[--a] = r[t]; return n }, F = function (e, t) { var n, r, i = e.length, o = -1; if (null == t) { for (; ++o < i;)if (null != (n = e[o]) && n >= n) for (r = n; ++o < i;)null != (n = e[o]) && r > n && (r = n) } else for (; ++o < i;)if (null != (n = t(e[o], o, e)) && n >= n) for (r = n; ++o < i;)null != (n = t(e[o], o, e)) && r > n && (r = n); return r }, I = function (e, t) { for (var n = t.length, r = new Array(n); n--;)r[n] = e[t[n]]; return r }, N = function (e, t) { if (n = e.length) { var n, i, o = 0, a = 0, s = e[a]; for (null == t && (t = r); ++o < n;)(t(i = e[o], s) < 0 || 0 !== t(s, s)) && (s = i, a = o); return 0 === t(s, s) ? a : void 0 } }, $ = function (e, t, n) { for (var r, i, o = (null == n ? e.length : n) - (t = null == t ? 0 : +t); o;)i = Math.random() * o-- | 0, r = e[o + t], e[o + t] = e[i + t], e[i + t] = r; return e }, B = function (e, t) { var n, r = e.length, i = -1, o = 0; if (null == t) for (; ++i < r;)(n = +e[i]) && (o += n); else for (; ++i < r;)(n = +t(e[i], i, e)) && (o += n); return o }, z = function (e) { if (!(i = e.length)) return []; for (var t = -1, n = F(e, transpose_length), r = new Array(n); ++t < n;)for (var i, o = -1, a = r[t] = new Array(i); ++o < i;)a[o] = e[o][t]; return r }; function transpose_length(e) { return e.length } var j = function () { return z(arguments) }; n.d(t, "bisect", function () { return l }), n.d(t, "bisectRight", function () { return a }), n.d(t, "bisectLeft", function () { return s }), n.d(t, "ascending", function () { return r }), n.d(t, "bisector", function () { return i }), n.d(t, "cross", function () { return c }), n.d(t, "descending", function () { return d }), n.d(t, "deviation", function () { return p }), n.d(t, "extent", function () { return m }), n.d(t, "histogram", function () { return L }), n.d(t, "thresholdFreedmanDiaconis", function () { return E }), n.d(t, "thresholdScott", function () { return A }), n.d(t, "thresholdSturges", function () { return T }), n.d(t, "max", function () { return P }), n.d(t, "mean", function () { return R }), n.d(t, "median", function () { return O }), n.d(t, "merge", function () { return D }), n.d(t, "min", function () { return F }), n.d(t, "pairs", function () { return u }), n.d(t, "permute", function () { return I }), n.d(t, "quantile", function () { return M }), n.d(t, "range", function () { return w }), n.d(t, "scan", function () { return N }), n.d(t, "shuffle", function () { return $ }), n.d(t, "sum", function () { return B }), n.d(t, "ticks", function () { return k }), n.d(t, "tickIncrement", function () { return tickIncrement }), n.d(t, "tickStep", function () { return tickStep }), n.d(t, "transpose", function () { return z }), n.d(t, "variance", function () { return h }), n.d(t, "zip", function () { return j }) },,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { var r, i, o; !function (a, s) { "use strict"; "object" == typeof e && e.exports ? e.exports = s(n(42)) : (i = [n(42)], void 0 === (o = "function" == typeof (r = s) ? r.apply(t, i) : r) || (e.exports = o)) }(0, function (e) { "use strict"; var t, n = {}, r = {}, i = {}, o = {}; e && "string" == typeof e.version || logError("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/"); var a = e.version.split("."), s = +a[0], l = +a[1]; function charCodeToInt(e) { return e > 96 ? e - 87 : e > 64 ? e - 29 : e - 48 } function unpackBase60(e) { var t = 0, n = e.split("."), r = n[0], i = n[1] || "", o = 1, a = 0, s = 1; for (45 === e.charCodeAt(0) && (t = 1, s = -1); t < r.length; t++)a = 60 * a + charCodeToInt(r.charCodeAt(t)); for (t = 0; t < i.length; t++)o /= 60, a += charCodeToInt(i.charCodeAt(t)) * o; return a * s } function arrayToInt(e) { for (var t = 0; t < e.length; t++)e[t] = unpackBase60(e[t]) } function mapIndices(e, t) { var n, r = []; for (n = 0; n < t.length; n++)r[n] = e[t[n]]; return r } function unpack(e) { var t = e.split("|"), n = t[2].split(" "), r = t[3].split(""), i = t[4].split(" "); return arrayToInt(n), arrayToInt(r), arrayToInt(i), function intToUntil(e, t) { for (var n = 0; n < t; n++)e[n] = Math.round((e[n - 1] || 0) + 6e4 * e[n]); e[t - 1] = 1 / 0 }(i, r.length), { name: t[0], abbrs: mapIndices(t[1].split(" "), r), offsets: mapIndices(n, r), untils: i, population: 0 | t[5] } } function Zone(e) { e && this._set(unpack(e)) } function OffsetAt(e) { var t = e.toTimeString(), n = t.match(/\([a-z ]+\)/i); "GMT" === (n = n && n[0] ? (n = n[0].match(/[A-Z]/g)) ? n.join("") : void 0 : (n = t.match(/[A-Z]{3,5}/g)) ? n[0] : void 0) && (n = void 0), this.at = +e, this.abbr = n, this.offset = e.getTimezoneOffset() } function ZoneScore(e) { this.zone = e, this.offsetScore = 0, this.abbrScore = 0 } function findChange(e, t) { for (var n, r; r = 6e4 * ((t.at - e.at) / 12e4 | 0);)(n = new OffsetAt(new Date(e.at + r))).offset === e.offset ? e = n : t = n; return e } function sortZoneScores(e, t) { return e.offsetScore !== t.offsetScore ? e.offsetScore - t.offsetScore : e.abbrScore !== t.abbrScore ? e.abbrScore - t.abbrScore : t.zone.population - e.zone.population } function addToGuesses(e, t) { var n, r; for (arrayToInt(t), n = 0; n < t.length; n++)r = t[n], o[r] = o[r] || {}, o[r][e] = !0 } function guessesForUserOffsets(e) { var t, n, r, a = e.length, s = {}, l = []; for (t = 0; t < a; t++)for (n in r = o[e[t].offset] || {}) r.hasOwnProperty(n) && (s[n] = !0); for (t in s) s.hasOwnProperty(t) && l.push(i[t]); return l } function rebuildGuess() { try { var e = Intl.DateTimeFormat().resolvedOptions().timeZone; if (e && e.length > 3) { var t = i[normalizeName(e)]; if (t) return t; logError("Moment Timezone found " + e + " from the Intl api, but did not have that data loaded.") } } catch (e) { } var n, r, o, a = function userOffsets() { var e, t, n, r = (new Date).getFullYear() - 2, i = new OffsetAt(new Date(r, 0, 1)), o = [i]; for (n = 1; n < 48; n++)(t = new OffsetAt(new Date(r, n, 1))).offset !== i.offset && (e = findChange(i, t), o.push(e), o.push(new OffsetAt(new Date(e.at + 6e4)))), i = t; for (n = 0; n < 4; n++)o.push(new OffsetAt(new Date(r + n, 0, 1))), o.push(new OffsetAt(new Date(r + n, 6, 1))); return o }(), s = a.length, l = guessesForUserOffsets(a), u = []; for (r = 0; r < l.length; r++) { for (n = new ZoneScore(getZone(l[r]), s), o = 0; o < s; o++)n.scoreOffsetAt(a[o]); u.push(n) } return u.sort(sortZoneScores), u.length > 0 ? u[0].zone.name : void 0 } function normalizeName(e) { return (e || "").toLowerCase().replace(/\//g, "_") } function addZone(e) { var t, r, o, a; for ("string" == typeof e && (e = [e]), t = 0; t < e.length; t++)a = normalizeName(r = (o = e[t].split("|"))[0]), n[a] = e[t], i[a] = r, addToGuesses(a, o[2].split(" ")) } function getZone(e, t) { e = normalizeName(e); var o, a = n[e]; return a instanceof Zone ? a : "string" == typeof a ? (a = new Zone(a), n[e] = a, a) : r[e] && t !== getZone && (o = getZone(r[e], getZone)) ? ((a = n[e] = new Zone)._set(o), a.name = i[e], a) : null } function addLink(e) { var t, n, o, a; for ("string" == typeof e && (e = [e]), t = 0; t < e.length; t++)o = normalizeName((n = e[t].split("|"))[0]), a = normalizeName(n[1]), r[o] = a, i[o] = n[0], r[a] = o, i[a] = n[1] } function needsOffset(e) { var t = "X" === e._f || "x" === e._f; return !(!e._a || void 0 !== e._tzm || t) } function logError(e) { "undefined" != typeof console && "function" == typeof console.error && console.error(e) } function tz(t) { var n = Array.prototype.slice.call(arguments, 0, -1), r = arguments[arguments.length - 1], i = getZone(r), o = e.utc.apply(null, n); return i && !e.isMoment(t) && needsOffset(o) && o.add(i.parse(o), "minutes"), o.tz(r), o } (s < 2 || 2 === s && l < 6) && logError("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js " + e.version + ". See momentjs.com"), Zone.prototype = { _set: function (e) { this.name = e.name, this.abbrs = e.abbrs, this.untils = e.untils, this.offsets = e.offsets, this.population = e.population }, _index: function (e) { var t, n = +e, r = this.untils; for (t = 0; t < r.length; t++)if (n < r[t]) return t }, parse: function (e) { var t, n, r, i, o = +e, a = this.offsets, s = this.untils, l = s.length - 1; for (i = 0; i < l; i++)if (t = a[i], n = a[i + 1], r = a[i ? i - 1 : i], t < n && tz.moveAmbiguousForward ? t = n : t > r && tz.moveInvalidForward && (t = r), o < s[i] - 6e4 * t) return a[i]; return a[l] }, abbr: function (e) { return this.abbrs[this._index(e)] }, offset: function (e) { return logError("zone.offset has been deprecated in favor of zone.utcOffset"), this.offsets[this._index(e)] }, utcOffset: function (e) { return this.offsets[this._index(e)] } }, ZoneScore.prototype.scoreOffsetAt = function (e) { this.offsetScore += Math.abs(this.zone.utcOffset(e.at) - e.offset), this.zone.abbr(e.at).replace(/[^A-Z]/g, "") !== e.abbr && this.abbrScore++ }, tz.version = "0.5.23", tz.dataVersion = "", tz._zones = n, tz._links = r, tz._names = i, tz.add = addZone, tz.link = addLink, tz.load = function loadData(e) { addZone(e.zones), addLink(e.links), tz.dataVersion = e.version }, tz.zone = getZone, tz.zoneExists = function zoneExists(e) { return zoneExists.didShowError || (zoneExists.didShowError = !0, logError("moment.tz.zoneExists('" + e + "') has been deprecated in favor of !moment.tz.zone('" + e + "')")), !!getZone(e) }, tz.guess = function guess(e) { return t && !e || (t = rebuildGuess()), t }, tz.names = function getNames() { var e, t = []; for (e in i) i.hasOwnProperty(e) && (n[e] || n[r[e]]) && i[e] && t.push(i[e]); return t.sort() }, tz.Zone = Zone, tz.unpack = unpack, tz.unpackBase60 = unpackBase60, tz.needsOffset = needsOffset, tz.moveInvalidForward = !0, tz.moveAmbiguousForward = !1; var u = e.fn; function abbrWrap(e) { return function () { return this._z ? this._z.abbr(this) : e.call(this) } } e.tz = tz, e.defaultZone = null, e.updateOffset = function (t, n) { var r, i = e.defaultZone; void 0 === t._z && (i && needsOffset(t) && !t._isUTC && (t._d = e.utc(t._a)._d, t.utc().add(i.parse(t), "minutes")), t._z = i), t._z && (r = t._z.utcOffset(t), Math.abs(r) < 16 && (r /= 60), void 0 !== t.utcOffset ? t.utcOffset(-r, n) : t.zone(r, n)) }, u.tz = function (t, n) { if (t) { if ("string" != typeof t) throw new Error("Time zone name must be a string, got " + t + " [" + typeof t + "]"); return this._z = getZone(t), this._z ? e.updateOffset(this, n) : logError("Moment Timezone has no data for " + t + ". See http://momentjs.com/timezone/docs/#/data-loading/."), this } if (this._z) return this._z.name }, u.zoneName = abbrWrap(u.zoneName), u.zoneAbbr = abbrWrap(u.zoneAbbr), u.utc = function resetZoneWrap(e) { return function () { return this._z = null, e.apply(this, arguments) } }(u.utc), e.tz.setDefault = function (t) { return (s < 2 || 2 === s && l < 9) && logError("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js " + e.version + "."), e.defaultZone = t ? getZone(t) : null, e }; var c = e.momentProperties; return "[object Array]" === Object.prototype.toString.call(c) ? (c.push("_z"), c.push("_a")) : c && (c._z = null), e }) }, function(e, t, n) { (e.exports = n(1673)).tz.load(n(1672)) },,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { var r, i, o; i = [n(0), n(3)], void 0 === (o = "function" == typeof (r = function (e, t) { var n = Array.prototype.slice; function apply(e, t, n) { return n.length <= 4 ? e.call(t, n[0], n[1], n[2], n[3]) : e.apply(t, n) } function slice(e, t) { return n.call(e, t) } function hasKeys(t, n) { return null != t && (e.isArray(n) || (n = slice(arguments, 1)), e.all(n, function (e) { return e in t })) } var r, i, o = (r = !1, i = -1, function () { return r || function indexCycle() { i++, r = !0, e.defer(function () { r = !1 }) }(), i }); function ObjectRegistry() { this.registeredObjects = [], this.cidIndexes = [] } function onoff(t, n, r, i) { for (var o, a = 0, s = n.length; a < s; a++)if (o = n[a]) { if ("on" === t) { if (!i.objectRegistry.register(o)) continue } else if (!i.objectRegistry.unregister(o)) continue; e.isFunction(o[t]) && o[t]("all", r, i) } } function actionUndoRedo(t, n) { var r = n.type, i = n.undoTypes, o = !i[r] || i[r][t]; e.isFunction(o) && o(n.object, n.before, n.after, n.options) } function managerUndoRedo(t, r, i, o, a) { if (!(i.isCurrentlyUndoRedoing || "undo" === t && -1 === i.pointer || "redo" === t && i.pointer === i.length - 1)) { i.isCurrentlyUndoRedoing = !0; var s, l, u = "undo" === t; for (a ? l = u && i.pointer === i.length - 1 || !u && -1 === i.pointer ? e.clone(i.models) : n.apply(i.models, u ? [0, i.pointer] : [i.pointer, i.length - 1]) : (s = i.at(u ? i.pointer : i.pointer + 1), l = o ? i.where({ magicFusionIndex: s.get("magicFusionIndex") }) : [s]), i.pointer += (u ? -1 : 1) * l.length; s = u ? l.pop() : l.shift();)s[t](); i.isCurrentlyUndoRedoing = !1, r.trigger(t, r) } } function addToStack(e, t, n, r) { if (e.track && !e.isCurrentlyUndoRedoing && t in r && function validateUndoActionCreation(e, t) { var n = e.condition, r = typeof n; return "function" === r ? !!apply(n, e, t) : "boolean" !== r || n }(r[t], n)) { var i = apply(r[t].on, r[t], n); if (hasKeys(i, "object", "before", "after")) { if (i.type = t, i.magicFusionIndex = o(), i.undoTypes = r, e.pointer < e.length - 1) for (var a = e.length - e.pointer - 1; a--;)e.pop(); e.pointer = e.length, e.add(i), e.length > e.maximumStackLength && (e.shift(), e.pointer--) } } } ObjectRegistry.prototype = { isRegistered: function (t) { return t && t.cid ? this.registeredObjects[t.cid] : e.contains(this.registeredObjects, t) }, register: function (e) { return !this.isRegistered(e) && (e && e.cid ? (this.registeredObjects[e.cid] = e, this.cidIndexes.push(e.cid)) : this.registeredObjects.push(e), !0) }, unregister: function (t) { if (this.isRegistered(t)) { if (t && t.cid) delete this.registeredObjects[t.cid], this.cidIndexes.splice(e.indexOf(this.cidIndexes, t.cid), 1); else { var n = e.indexOf(this.registeredObjects, t); this.registeredObjects.splice(n, 1) } return !0 } return !1 }, get: function () { return e.map(this.cidIndexes, function (e) { return this.registeredObjects[e] }, this).concat(this.registeredObjects) } }; var a = { add: { undo: function (e, t, n, r) { e.remove(n, r) }, redo: function (e, t, n, r) { r.index && (r.at = r.index), e.add(n, r) }, on: function (t, n, r) { return { object: n, before: void 0, after: t, options: e.clone(r) } } }, remove: { undo: function (e, t, n, r) { "index" in r && (r.at = r.index), e.add(t, r) }, redo: function (e, t, n, r) { e.remove(t, r) }, on: function (t, n, r) { return { object: n, before: t, after: void 0, options: e.clone(r) } } }, change: { undo: function (t, n, r, i) { e.isEmpty(n) ? e.each(e.keys(r), t.unset, t) : (t.set(n), i && i.unsetData && i.unsetData.before && i.unsetData.before.length && e.each(i.unsetData.before, t.unset, t)) }, redo: function (t, n, r, i) { e.isEmpty(r) ? e.each(e.keys(n), t.unset, t) : (t.set(r), i && i.unsetData && i.unsetData.after && i.unsetData.after.length && e.each(i.unsetData.after, t.unset, t)) }, on: function (t, n) { var r = t.changedAttributes(), i = e.keys(r), o = e.pick(t.previousAttributes(), i), a = e.keys(o), s = (n || (n = {})).unsetData = { after: [], before: [] }; return i.length != a.length && (i.length > a.length ? e.each(i, function (e) { e in o || s.before.push(e) }, this) : e.each(a, function (e) { e in r || s.after.push(e) })), { object: t, before: o, after: r, options: e.clone(n) } } }, reset: { undo: function (e, t, n) { e.reset(t) }, redo: function (e, t, n) { e.reset(n) }, on: function (t, n) { return { object: t, before: n.previousModels, after: e.clone(t.models) } } } }; function OwnedUndoTypes() { } function manipulateUndoType(t, n, r, i) { if ("object" == typeof n) return e.each(n, function (e, n) { 2 === t ? manipulateUndoType(t, e, r, i) : manipulateUndoType(t, n, e, r) }); switch (t) { case 0: hasKeys(r, "undo", "redo", "on") && e.all(e.pick(r, "undo", "redo", "on"), e.isFunction) && (i[n] = r); break; case 1: i[n] && e.isObject(r) && (i[n] = e.extend({}, i[n], r)); break; case 2: delete i[n] }return this } OwnedUndoTypes.prototype = a; var s = t.Model.extend({ defaults: { type: null, object: null, before: null, after: null, magicFusionIndex: null }, undo: function (e) { actionUndoRedo("undo", this.attributes) }, redo: function (e) { actionUndoRedo("redo", this.attributes) } }), l = t.Collection.extend({ model: s, pointer: -1, track: !1, isCurrentlyUndoRedoing: !1, maximumStackLength: 1 / 0, setMaxLength: function (e) { this.maximumStackLength = e } }), u = t.Model.extend({ defaults: { maximumStackLength: 1 / 0, track: !1 }, initialize: function (t) { this.stack = new l, this.objectRegistry = new ObjectRegistry, this.undoTypes = new OwnedUndoTypes, this.stack.setMaxLength(this.get("maximumStackLength")), this.on("change:maximumStackLength", function (e, t) { this.stack.setMaxLength(t) }, this), t && t.track && this.startTracking(), t && t.register && (e.isArray(t.register) || e.isArguments(t.register) ? apply(this.register, this, t.register) : this.register(t.register)) }, startTracking: function () { this.set("track", !0), this.stack.track = !0 }, stopTracking: function () { this.set("track", !1), this.stack.track = !1 }, isTracking: function () { return this.get("track") }, _addToStack: function (e) { addToStack(this.stack, e, slice(arguments, 1), this.undoTypes) }, register: function () { onoff("on", arguments, this._addToStack, this) }, unregister: function () { onoff("off", arguments, this._addToStack, this) }, unregisterAll: function () { apply(this.unregister, this, this.objectRegistry.get()) }, undo: function (e) { managerUndoRedo("undo", this, this.stack, e) }, undoAll: function () { managerUndoRedo("undo", this, this.stack, !1, !0) }, redo: function (e) { managerUndoRedo("redo", this, this.stack, e) }, redoAll: function () { managerUndoRedo("redo", this, this.stack, !1, !0) }, isAvailable: function (e) { var t = this.stack, n = t.length; switch (e) { case "undo": return n > 0 && t.pointer > -1; case "redo": return n > 0 && t.pointer < n - 1; default: return !1 } }, merge: function (t) { for (var n, r = e.isArray(t) ? t : slice(arguments); n = r.pop();)n instanceof u && n.stack instanceof l && (n.stack = this.stack) }, addUndoType: function (e, t) { manipulateUndoType(0, e, t, this.undoTypes) }, changeUndoType: function (e, t) { manipulateUndoType(1, e, t, this.undoTypes) }, removeUndoType: function (e) { manipulateUndoType(2, e, void 0, this.undoTypes) }, clear: function () { this.stack.reset(), this.stack.pointer = -1 } }); return e.extend(u, { defaults: function (t) { e.extend(u.prototype.defaults, t) }, addUndoType: function (e, t) { manipulateUndoType(0, e, t, a) }, changeUndoType: function (e, t) { manipulateUndoType(1, e, t, a) }, removeUndoType: function (e) { manipulateUndoType(2, e, void 0, a) } }), t.UndoManager = u }) ? r.apply(t, i) : r) || (e.exports = o) },,,,,,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { "use strict"; t.__esModule = !0, t.default = function scssTokenize(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = [], M = e.css.valueOf(), E = t.ignoreErrors, A = void 0, P = void 0, R = void 0, O = void 0, D = void 0, F = void 0, I = void 0, N = void 0, $ = void 0, B = void 0, z = void 0, j = void 0, U = void 0, q = void 0, H = M.length, V = -1, G = 1, W = 0; function unclosed(t) { throw e.error("Unclosed " + t, G, W - V) } for (; W < H;) { switch (((A = M.charCodeAt(W)) === s || A === u || A === d && M.charCodeAt(W + 1) !== s) && (V = W, G += 1), A) { case s: case l: case c: case d: case u: P = W; do { P += 1, (A = M.charCodeAt(P)) === s && (V = P, G += 1) } while (A === l || A === s || A === c || A === d || A === u); n.push(["space", M.slice(W, P)]), W = P - 1; break; case f: n.push(["[", "[", G, W - V]); break; case h: n.push(["]", "]", G, W - V]); break; case g: n.push(["{", "{", G, W - V]); break; case v: n.push(["}", "}", G, W - V]); break; case x: n.push(["word", ",", G, W - V, G, W - V + 1]); break; case b: n.push([":", ":", G, W - V]); break; case y: n.push([";", ";", G, W - V]); break; case p: if (j = n.length ? n[n.length - 1][1] : "", U = M.charCodeAt(W + 1), "url" === j && U !== r && U !== i && U !== l && U !== s && U !== c && U !== u && U !== d) { for (q = 1, B = !1, P = W + 1; P <= M.length - 1;) { if ((U = M.charCodeAt(P)) === o) B = !B; else if (U === p) q += 1; else if (U === m && 0 === (q -= 1)) break; P += 1 } n.push(["brackets", M.slice(W, P + 1), G, W - V, G, P - V]), W = P } else P = M.indexOf(")", W + 1), F = M.slice(W, P + 1), -1 === P || T.test(F) ? n.push(["(", "(", G, W - V]) : (n.push(["brackets", F, G, W - V, G, P - V]), W = P); break; case m: n.push([")", ")", G, W - V]); break; case r: case i: R = A === r ? "'" : '"', P = W; do { if (B = !1, -1 === (P = M.indexOf(R, P + 1))) { if (E) { P = W + 1; break } unclosed("quote") } for (z = P; M.charCodeAt(z - 1) === o;)z -= 1, B = !B } while (B); F = M.slice(W, P + 1), O = F.split("\n"), (D = O.length - 1) > 0 ? (N = G + D, $ = P - O[D].length) : (N = G, $ = V), n.push(["string", M.slice(W, P + 1), G, W - V, N, P - $]), V = $, G = N, W = P; break; case w: S.lastIndex = W + 1, S.test(M), P = 0 === S.lastIndex ? M.length - 1 : S.lastIndex - 2, n.push(["at-word", M.slice(W, P + 1), G, W - V, G, P - V]), W = P; break; case o: for (P = W, I = !0; M.charCodeAt(P + 1) === o;)P += 1, I = !I; A = M.charCodeAt(P + 1), I && A !== a && A !== l && A !== s && A !== c && A !== d && A !== u && (P += 1), n.push(["word", M.slice(W, P + 1), G, W - V, G, P - V]), W = P; break; default: if (U = M.charCodeAt(W + 1), A === C && U === g) { var Y = 1; for (P = W; Y > 0;)P += 1, M.length <= P && unclosed("interpolation"), A = M.charCodeAt(P), U = M.charCodeAt(P + 1), A === v ? Y -= 1 : A === C && U === g && (Y += 1); F = M.slice(W, P + 1), O = F.split("\n"), (D = O.length - 1) > 0 ? (N = G + D, $ = P - O[D].length) : (N = G, $ = V), n.push(["word", F, G, W - V, N, P - $]), V = $, G = N, W = P } else A === a && U === _ ? (0 === (P = M.indexOf("*/", W + 2) + 1) && (E ? P = M.length : unclosed("comment")), F = M.slice(W, P + 1), O = F.split("\n"), (D = O.length - 1) > 0 ? (N = G + D, $ = P - O[D].length) : (N = G, $ = V), n.push(["comment", F, G, W - V, N, P - $]), V = $, G = N, W = P) : A === a && U === a ? (L.lastIndex = W + 1, L.test(M), P = 0 === L.lastIndex ? M.length - 1 : L.lastIndex - 2, F = M.slice(W, P + 1), n.push(["comment", F, G, W - V, G, P - V, "inline"]), W = P) : (k.lastIndex = W + 1, k.test(M), P = 0 === k.lastIndex ? M.length - 1 : k.lastIndex - 2, n.push(["word", M.slice(W, P + 1), G, W - V, G, P - V]), W = P) }W++ } return n }; var r = 39, i = 34, o = 92, a = 47, s = 10, l = 32, u = 12, c = 9, d = 13, f = 91, h = 93, p = 40, m = 41, g = 123, v = 125, y = 59, _ = 42, b = 58, w = 64, x = 44, C = 35, S = /[ \n\t\r\f\{\(\)'"\\;/\[\]#]/g, k = /[ \n\t\r\f\(\)\{\}:;@!'"\\\]\[#]|\/(?=\*)/g, T = /.[\\\/\("'\n]/, L = /[\r\f\n]/g; e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function (e) { function NestedDeclaration(t) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, NestedDeclaration); var n = function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.call(this, t)); return n.type = "decl", n.isNested = !0, n.nodes || (n.nodes = []), n } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(NestedDeclaration, e), NestedDeclaration }(function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } }(n(492)).default); t.default = r, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, i = function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } }(n(1151)); var o = function () { function Processor() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []; !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Processor), this.version = "5.2.18", this.plugins = this.normalize(e) } return Processor.prototype.use = function use(e) { return this.plugins = this.plugins.concat(this.normalize([e])), this }, Processor.prototype.process = function process(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return new i.default(this, e, t) }, Processor.prototype.normalize = function normalize(e) { var t = [], n = e, i = Array.isArray(n), o = 0; for (n = i ? n : n[Symbol.iterator](); ;) { var a; if (i) { if (o >= n.length) break; a = n[o++] } else { if ((o = n.next()).done) break; a = o.value } var s = a; if (s.postcss && (s = s.postcss), "object" === (void 0 === s ? "undefined" : r(s)) && Array.isArray(s.plugins)) t = t.concat(s.plugins); else { if ("function" != typeof s) throw "object" === (void 0 === s ? "undefined" : r(s)) && (s.parse || s.stringify) ? new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.") : new Error(s + " is not a PostCSS plugin"); t.push(s) } } return t }, Processor }(); t.default = o, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function Warning(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; if (function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Warning), this.type = "warning", this.text = e, t.node && t.node.source) { var n = t.node.positionBy(t); this.line = n.line, this.column = n.column } for (var r in t) this[r] = t[r] } return Warning.prototype.toString = function toString() { return this.node ? this.node.error(this.text, { plugin: this.plugin, index: this.index, word: this.word }).message : this.plugin ? this.plugin + ": " + this.text : this.text }, Warning }(); t.default = r, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(), i = function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } }(n(2235)); var o = function () { function Result(e, t, n) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Result), this.processor = e, this.messages = [], this.root = t, this.opts = n, this.css = void 0, this.map = void 0 } return Result.prototype.toString = function toString() { return this.css }, Result.prototype.warn = function warn(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; t.plugin || this.lastPlugin && this.lastPlugin.postcssPlugin && (t.plugin = this.lastPlugin.postcssPlugin); var n = new i.default(e, t); return this.messages.push(n), n }, Result.prototype.warnings = function warnings() { return this.messages.filter(function (e) { return "warning" === e.type }) }, r(Result, [{ key: "content", get: function get() { return this.css } }]), Result }(); t.default = o, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = n(601), i = _interopRequireDefault(n(600)), o = _interopRequireDefault(n(246)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var a = function () { function MapGenerator(e, t, n) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, MapGenerator), this.stringify = e, this.mapOpts = n.map || {}, this.root = t, this.opts = n } return MapGenerator.prototype.isMap = function isMap() { return void 0 !== this.opts.map ? !!this.opts.map : this.previous().length > 0 }, MapGenerator.prototype.previous = function previous() { var e = this; return this.previousMaps || (this.previousMaps = [], this.root.walk(function (t) { if (t.source && t.source.input.map) { var n = t.source.input.map; -1 === e.previousMaps.indexOf(n) && e.previousMaps.push(n) } })), this.previousMaps }, MapGenerator.prototype.isInline = function isInline() { if (void 0 !== this.mapOpts.inline) return this.mapOpts.inline; var e = this.mapOpts.annotation; return (void 0 === e || !0 === e) && (!this.previous().length || this.previous().some(function (e) { return e.inline })) }, MapGenerator.prototype.isSourcesContent = function isSourcesContent() { return void 0 !== this.mapOpts.sourcesContent ? this.mapOpts.sourcesContent : !this.previous().length || this.previous().some(function (e) { return e.withContent() }) }, MapGenerator.prototype.clearAnnotation = function clearAnnotation() { if (!1 !== this.mapOpts.annotation) for (var e = void 0, t = this.root.nodes.length - 1; t >= 0; t--)"comment" === (e = this.root.nodes[t]).type && 0 === e.text.indexOf("# sourceMappingURL=") && this.root.removeChild(t) }, MapGenerator.prototype.setSourcesContent = function setSourcesContent() { var e = this, t = {}; this.root.walk(function (n) { if (n.source) { var r = n.source.input.from; if (r && !t[r]) { t[r] = !0; var i = e.relative(r); e.map.setSourceContent(i, n.source.input.css) } } }) }, MapGenerator.prototype.applyPrevMaps = function applyPrevMaps() { var e = this.previous(), t = Array.isArray(e), n = 0; for (e = t ? e : e[Symbol.iterator](); ;) { var r; if (t) { if (n >= e.length) break; r = e[n++] } else { if ((n = e.next()).done) break; r = n.value } var a = r, s = this.relative(a.file), l = a.root || o.default.dirname(a.file), u = void 0; !1 === this.mapOpts.sourcesContent ? (u = new i.default.SourceMapConsumer(a.text)).sourcesContent && (u.sourcesContent = u.sourcesContent.map(function () { return null })) : u = a.consumer(), this.map.applySourceMap(u, s, this.relative(l)) } }, MapGenerator.prototype.isAnnotation = function isAnnotation() { return !!this.isInline() || (void 0 !== this.mapOpts.annotation ? this.mapOpts.annotation : !this.previous().length || this.previous().some(function (e) { return e.annotation })) }, MapGenerator.prototype.addAnnotation = function addAnnotation() { var e = void 0; e = this.isInline() ? "data:application/json;base64," + r.Base64.encode(this.map.toString()) : "string" == typeof this.mapOpts.annotation ? this.mapOpts.annotation : this.outputFile() + ".map"; var t = "\n"; -1 !== this.css.indexOf("\r\n") && (t = "\r\n"), this.css += t + "/*# sourceMappingURL=" + e + " */" }, MapGenerator.prototype.outputFile = function outputFile() { return this.opts.to ? this.relative(this.opts.to) : this.opts.from ? this.relative(this.opts.from) : "to.css" }, MapGenerator.prototype.generateMap = function generateMap() { return this.generateString(), this.isSourcesContent() && this.setSourcesContent(), this.previous().length > 0 && this.applyPrevMaps(), this.isAnnotation() && this.addAnnotation(), this.isInline() ? [this.css] : [this.css, this.map] }, MapGenerator.prototype.relative = function relative(e) { if (0 === e.indexOf("<")) return e; if (/^\w+:\/\//.test(e)) return e; var t = this.opts.to ? o.default.dirname(this.opts.to) : "."; return "string" == typeof this.mapOpts.annotation && (t = o.default.dirname(o.default.resolve(t, this.mapOpts.annotation))), e = o.default.relative(t, e), "\\" === o.default.sep ? e.replace(/\\/g, "/") : e }, MapGenerator.prototype.sourcePath = function sourcePath(e) { return this.mapOpts.from ? this.mapOpts.from : this.relative(e.source.input.from) }, MapGenerator.prototype.generateString = function generateString() { var e = this; this.css = "", this.map = new i.default.SourceMapGenerator({ file: this.outputFile() }); var t = 1, n = 1, r = void 0, o = void 0; this.stringify(this.root, function (i, a, s) { e.css += i, a && "end" !== s && (a.source && a.source.start ? e.map.addMapping({ source: e.sourcePath(a), generated: { line: t, column: n - 1 }, original: { line: a.source.start.line, column: a.source.start.column - 1 } }) : e.map.addMapping({ source: "<no source>", original: { line: 1, column: 0 }, generated: { line: t, column: n - 1 } })), (r = i.match(/\n/g)) ? (t += r.length, o = i.lastIndexOf("\n"), n = i.length - o) : n += i.length, a && "start" !== s && (a.source && a.source.end ? e.map.addMapping({ source: e.sourcePath(a), generated: { line: t, column: n - 1 }, original: { line: a.source.end.line, column: a.source.end.column } }) : e.map.addMapping({ source: "<no source>", original: { line: 1, column: 0 }, generated: { line: t, column: n - 1 } })) }) }, MapGenerator.prototype.generate = function generate() { if (this.clearAnnotation(), this.isMap()) return this.generateMap(); var e = ""; return this.stringify(this.root, function (t) { e += t }), [e] }, MapGenerator }(); t.default = a, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = { split: function split(e, t, n) { for (var r = [], i = "", split = !1, o = 0, a = !1, s = !1, l = 0; l < e.length; l++) { var u = e[l]; a ? s ? s = !1 : "\\" === u ? s = !0 : u === a && (a = !1) : '"' === u || "'" === u ? a = u : "(" === u ? o += 1 : ")" === u ? o > 0 && (o -= 1) : 0 === o && -1 !== t.indexOf(u) && (split = !0), split ? ("" !== i && r.push(i.trim()), i = "", split = !1) : i += u } return (n || "" !== i) && r.push(i.trim()), r }, space: function space(e) { return r.split(e, [" ", "\n", "\t"]) }, comma: function comma(e) { return r.split(e, [","], !0) } }; t.default = r, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = _interopRequireDefault(n(773)), i = _interopRequireDefault(n(1155)), o = _interopRequireDefault(n(2233)), a = _interopRequireDefault(n(2232)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var s = function (e) { function ScssParser() { return function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, ScssParser), function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.apply(this, arguments)) } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(ScssParser, e), ScssParser.prototype.tokenize = function tokenize() { this.tokens = (0, a.default)(this.input) }, ScssParser.prototype.rule = function rule(t) { var n = !1, r = 0, i = "", a = t, s = Array.isArray(a), l = 0; for (a = s ? a : a[Symbol.iterator](); ;) { var u; if (s) { if (l >= a.length) break; u = a[l++] } else { if ((l = a.next()).done) break; u = l.value } var c = u; if (n) "comment" !== c[0] && "{" !== c[0] && (i += c[1]); else { if ("space" === c[0] && -1 !== c[1].indexOf("\n")) break; "(" === c[0] ? r += 1 : ")" === c[0] ? r -= 1 : 0 === r && ":" === c[0] && (n = !0) } } if (!n || "" === i.trim() || /^[a-zA-Z-:#]/.test(i)) e.prototype.rule.call(this, t); else { t.pop(); var d = new o.default; this.init(d); var f = t[t.length - 1]; for (f[4] ? d.source.end = { line: f[4], column: f[5] } : d.source.end = { line: f[2], column: f[3] }; "word" !== t[0][0];)d.raws.before += t.shift()[1]; for (d.source.start = { line: t[0][2], column: t[0][3] }, d.prop = ""; t.length;) { var h = t[0][0]; if (":" === h || "space" === h || "comment" === h) break; d.prop += t.shift()[1] } d.raws.between = ""; for (var p = void 0; t.length;) { if (":" === (p = t.shift())[0]) { d.raws.between += p[1]; break } d.raws.between += p[1] } "_" !== d.prop[0] && "*" !== d.prop[0] || (d.raws.before += d.prop[0], d.prop = d.prop.slice(1)), d.raws.between += this.spacesFromStart(t), this.precheckMissedSemicolon(t); for (var m = t.length - 1; m > 0; m--) { if ("!important" === (p = t[m])[1]) { d.important = !0; var g = this.stringFrom(t, m); " !important" !== (g = this.spacesFromEnd(t) + g) && (d.raws.important = g); break } if ("important" === p[1]) { for (var v = t.slice(0), y = "", _ = m; _ > 0; _--) { var b = v[_][0]; if (0 === y.trim().indexOf("!") && "space" !== b) break; y = v.pop()[1] + y } 0 === y.trim().indexOf("!") && (d.important = !0, d.raws.important = y, t = v) } if ("space" !== p[0] && "comment" !== p[0]) break } this.raw(d, "value", t), -1 !== d.value.indexOf(":") && this.checkMissedSemicolon(t), this.current = d } }, ScssParser.prototype.comment = function comment(t) { if ("inline" === t[6]) { var n = new r.default; this.init(n, t[2], t[3]), n.raws.inline = !0, n.source.end = { line: t[4], column: t[5] }; var i = t[1].slice(2); if (/^\s*$/.test(i)) n.text = "", n.raws.left = i, n.raws.right = ""; else { var o = i.match(/^(\s*)([^]*[^\s])(\s*)$/), a = o[2].replace(/(\*\/|\/\*)/g, "*//*"); n.text = a, n.raws.left = o[1], n.raws.right = o[3], n.raws.text = o[2] } } else e.prototype.comment.call(this, t) }, ScssParser }(i.default); t.default = s, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, i = n(601), o = _interopRequireDefault(n(600)), a = _interopRequireDefault(n(246)), s = _interopRequireDefault(n(1157)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var l = function () { function PreviousMap(e, t) { !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, PreviousMap), this.loadAnnotation(e), this.inline = this.startWith(this.annotation, "data:"); var n = t.map ? t.map.prev : void 0, r = this.loadMap(t.from, n); r && (this.text = r) } return PreviousMap.prototype.consumer = function consumer() { return this.consumerCache || (this.consumerCache = new o.default.SourceMapConsumer(this.text)), this.consumerCache }, PreviousMap.prototype.withContent = function withContent() { return !!(this.consumer().sourcesContent && this.consumer().sourcesContent.length > 0) }, PreviousMap.prototype.startWith = function startWith(e, t) { return !!e && e.substr(0, t.length) === t }, PreviousMap.prototype.loadAnnotation = function loadAnnotation(e) { var t = e.match(/\/\*\s*# sourceMappingURL=(.*)\s*\*\//); t && (this.annotation = t[1].trim()) }, PreviousMap.prototype.decodeInline = function decodeInline(e) { var t = "data:application/json;charset=utf-8;base64,", n = "data:application/json;charset=utf8;base64,", r = "data:application/json;base64,", o = "data:application/json,"; if (this.startWith(e, o)) return decodeURIComponent(e.substr(o.length)); if (this.startWith(e, r)) return i.Base64.decode(e.substr(r.length)); if (this.startWith(e, n)) return i.Base64.decode(e.substr(n.length)); if (this.startWith(e, t)) return i.Base64.decode(e.substr(t.length)); var a = e.match(/data:application\/json;([^,]+),/)[1]; throw new Error("Unsupported source map encoding " + a) }, PreviousMap.prototype.loadMap = function loadMap(e, t) { if (!1 === t) return !1; if (t) { if ("string" == typeof t) return t; if ("function" == typeof t) { var n = t(e); if (n && s.default.existsSync && s.default.existsSync(n)) return s.default.readFileSync(n, "utf-8").toString().trim(); throw new Error("Unable to load previous source map: " + n.toString()) } if (t instanceof o.default.SourceMapConsumer) return o.default.SourceMapGenerator.fromSourceMap(t).toString(); if (t instanceof o.default.SourceMapGenerator) return t.toString(); if (this.isMap(t)) return JSON.stringify(t); throw new Error("Unsupported previous source map format: " + t.toString()) } if (this.inline) return this.decodeInline(this.annotation); if (this.annotation) { var r = this.annotation; return e && (r = a.default.join(a.default.dirname(e), r)), this.root = a.default.dirname(r), !(!s.default.existsSync || !s.default.existsSync(r)) && s.default.readFileSync(r, "utf-8").toString().trim() } }, PreviousMap.prototype.isMap = function isMap(e) { return "object" === (void 0 === e ? "undefined" : r(e)) && ("string" == typeof e.mappings || "string" == typeof e._mappings) }, PreviousMap }(); t.default = l, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = _interopRequireDefault(n(1160)), i = _interopRequireDefault(n(1158)), o = _interopRequireDefault(n(774)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } var a = new r.default.constructor({ enabled: !0 }), s = { brackets: a.cyan, "at-word": a.cyan, call: a.cyan, comment: a.gray, string: a.green, class: a.yellow, hash: a.magenta, "(": a.cyan, ")": a.cyan, "{": a.yellow, "}": a.yellow, "[": a.yellow, "]": a.yellow, ":": a.yellow, ";": a.yellow }; t.default = function terminalHighlight(e) { var t = (0, i.default)(new o.default(e), { ignoreErrors: !0 }); return t.map(function (e, n) { var r = s[function getTokenType(e, t, n) { var r = e[0], i = e[1]; if ("word" === r) { if ("." === i[0]) return "class"; if ("#" === i[0]) return "hash" } var o = n[t + 1]; return !o || "brackets" !== o[0] && "(" !== o[0] ? r : "call" }(e, n, t)]; return r ? e[1].split(/\r?\n/).map(function (e) { return r(e) }).join("\n") : e[1] }).join("") }, e.exports = t.default }, function(e, t, n) { "use strict"; (function (t) { var n = t.argv, r = n.indexOf("--"), i = function (e) { e = "--" + e; var t = n.indexOf(e); return -1 !== t && (-1 === r || t < r) }; e.exports = "FORCE_COLOR" in t.env || !(i("no-color") || i("no-colors") || i("color=false")) && (!!(i("color") || i("colors") || i("color=true") || i("color=always")) || !(t.stdout && !t.stdout.isTTY) && ("win32" === t.platform || "COLORTERM" in t.env || "dumb" !== t.env.TERM && !!/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(t.env.TERM))) }).call(this, n(197)) }, function(e, t, n) { "use strict"; var r = n(1159), i = new RegExp(r().source); e.exports = i.test.bind(i) }, function(e, t, n) { "use strict"; var r = n(1159)(); e.exports = function (e) { return "string" == typeof e ? e.replace(r, "") : e } }, function(e, t, n) { "use strict"; (function (e) { Object.defineProperty(e, "exports", { enumerable: !0, get: function assembleStyles() { var e = { modifiers: { reset: [0, 0], bold: [1, 22], dim: [2, 22], italic: [3, 23], underline: [4, 24], inverse: [7, 27], hidden: [8, 28], strikethrough: [9, 29] }, colors: { black: [30, 39], red: [31, 39], green: [32, 39], yellow: [33, 39], blue: [34, 39], magenta: [35, 39], cyan: [36, 39], white: [37, 39], gray: [90, 39] }, bgColors: { bgBlack: [40, 49], bgRed: [41, 49], bgGreen: [42, 49], bgYellow: [43, 49], bgBlue: [44, 49], bgMagenta: [45, 49], bgCyan: [46, 49], bgWhite: [47, 49] } }; return e.colors.grey = e.colors.gray, Object.keys(e).forEach(function (t) { var n = e[t]; Object.keys(n).forEach(function (t) { var r = n[t]; e[t] = n[t] = { open: "\x1b[" + r[0] + "m", close: "\x1b[" + r[1] + "m" } }), Object.defineProperty(e, t, { value: n, enumerable: !1 }) }), e } }) }).call(this, n(624)(e)) }, function(e, t, n) { "use strict"; var r = /[|\\{}()[\]^$+*?.]/g; e.exports = function (e) { if ("string" != typeof e) throw new TypeError("Expected a string"); return e.replace(r, "\\$&") } }, function(e, t, n) { "use strict"; t.__esModule = !0, t.default = function scssParse(e, t) { var n = new r.default(e, t), o = new i.default(n); return o.tokenize(), o.loop(), o.root }; var r = _interopRequireDefault(n(774)), i = _interopRequireDefault(n(2239)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function (e) { function ScssStringifier() { return function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, ScssStringifier), function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, e.apply(this, arguments)) } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(ScssStringifier, e), ScssStringifier.prototype.comment = function comment(e) { var t = this.raw(e, "left", "commentLeft"), n = this.raw(e, "right", "commentRight"); if (e.raws.inline) { var r = e.raws.text || e.text; this.builder("//" + t + r + n, e) } else this.builder("/*" + t + e.text + n + "*/", e) }, ScssStringifier.prototype.decl = function decl(t, n) { if (t.isNested) { var r = this.raw(t, "between", "colon"), i = t.prop + r + this.rawValue(t, "value"); t.important && (i += t.raws.important || " !important"), this.builder(i + "{", t, "start"); var o = void 0; t.nodes && t.nodes.length ? (this.body(t), o = this.raw(t, "after")) : o = this.raw(t, "after", "emptyBody"), o && this.builder(o), this.builder("}", t, "end") } else e.prototype.decl.call(this, t, n) }, ScssStringifier }(function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } }(n(775)).default); t.default = r, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0, t.default = function scssStringify(e, t) { new r.default(t).stringify(e) }; var r = function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } }(n(2248)); e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = _interopRequireDefault(n(2249)), i = _interopRequireDefault(n(2247)); function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } } t.default = { parse: i.default, stringify: r.default }, e.exports = t.default }, function(e, t, n) { "use strict"; t.__esModule = !0; var r = function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e } }(n(375)); t.default = r.default.plugin("postcss-strip-inline-comments", function () { return function (e) { e.walkComments(function (e) { e.raws.inline && e.remove() }) } }), e.exports = t.default },,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { var r, i, o; !function (a, s) { "use strict"; "object" == typeof e && e.exports ? e.exports = s(n(1202), n(1201), n(1200)) : (i = [n(1202), n(1201), n(1200)], void 0 === (o = "function" == typeof (r = s) ? r.apply(t, i) : r) || (e.exports = o)) }(0, function (e, t, n, r) { "use strict"; var i = r && r.URI; function URI(e, t) { var n = arguments.length >= 1, r = arguments.length >= 2; if (!(this instanceof URI)) return n ? r ? new URI(e, t) : new URI(e) : new URI; if (void 0 === e) { if (n) throw new TypeError("undefined is not a valid argument for URI"); e = "undefined" != typeof location ? location.href + "" : "" } if (null === e && n) throw new TypeError("null is not a valid argument for URI"); return this.href(e), void 0 !== t ? this.absoluteTo(t) : this } URI.version = "1.19.1"; var o = URI.prototype, a = Object.prototype.hasOwnProperty; function escapeRegEx(e) { return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1") } function getType(e) { return void 0 === e ? "Undefined" : String(Object.prototype.toString.call(e)).slice(8, -1) } function isArray(e) { return "Array" === getType(e) } function filterArrayValues(e, t) { var n, r, i = {}; if ("RegExp" === getType(t)) i = null; else if (isArray(t)) for (n = 0, r = t.length; n < r; n++)i[t[n]] = !0; else i[t] = !0; for (n = 0, r = e.length; n < r; n++) { (i && void 0 !== i[e[n]] || !i && t.test(e[n])) && (e.splice(n, 1), r--, n--) } return e } function arrayContains(e, t) { var n, r; if (isArray(t)) { for (n = 0, r = t.length; n < r; n++)if (!arrayContains(e, t[n])) return !1; return !0 } var i = getType(t); for (n = 0, r = e.length; n < r; n++)if ("RegExp" === i) { if ("string" == typeof e[n] && e[n].match(t)) return !0 } else if (e[n] === t) return !0; return !1 } function arraysEqual(e, t) { if (!isArray(e) || !isArray(t)) return !1; if (e.length !== t.length) return !1; e.sort(), t.sort(); for (var n = 0, r = e.length; n < r; n++)if (e[n] !== t[n]) return !1; return !0 } function trimSlashes(e) { return e.replace(/^\/+|\/+$/g, "") } function escapeForDumbFirefox36(e) { return escape(e) } function strictEncodeURIComponent(e) { return encodeURIComponent(e).replace(/[!'()*]/g, escapeForDumbFirefox36).replace(/\*/g, "%2A") } URI._parts = function () { return { protocol: null, username: null, password: null, hostname: null, urn: null, port: null, path: null, query: null, fragment: null, preventInvalidHostname: URI.preventInvalidHostname, duplicateQueryParameters: URI.duplicateQueryParameters, escapeQuerySpace: URI.escapeQuerySpace } }, URI.preventInvalidHostname = !1, URI.duplicateQueryParameters = !1, URI.escapeQuerySpace = !0, URI.protocol_expression = /^[a-z][a-z0-9.+-]*$/i, URI.idn_expression = /[^a-z0-9\._-]/i, URI.punycode_expression = /(xn--)/i, URI.ip4_expression = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/, URI.ip6_expression = /^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/, URI.find_uri_expression = /\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/gi, URI.findUri = { start: /\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi, end: /[\s\r\n]|$/, trim: /[`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u201e\u2018\u2019]+$/, parens: /(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g }, URI.defaultPorts = { http: "80", https: "443", ftp: "21", gopher: "70", ws: "80", wss: "443" }, URI.hostProtocols = ["http", "https"], URI.invalid_hostname_characters = /[^a-zA-Z0-9\.\-:_]/, URI.domAttributes = { a: "href", blockquote: "cite", link: "href", base: "href", script: "src", form: "action", img: "src", area: "href", iframe: "src", embed: "src", source: "src", track: "src", input: "src", audio: "src", video: "src" }, URI.getDomAttribute = function (e) { if (e && e.nodeName) { var t = e.nodeName.toLowerCase(); if ("input" !== t || "image" === e.type) return URI.domAttributes[t] } }, URI.encode = strictEncodeURIComponent, URI.decode = decodeURIComponent, URI.iso8859 = function () { URI.encode = escape, URI.decode = unescape }, URI.unicode = function () { URI.encode = strictEncodeURIComponent, URI.decode = decodeURIComponent }, URI.characters = { pathname: { encode: { expression: /%(24|26|2B|2C|3B|3D|3A|40)/gi, map: { "%24": "$", "%26": "&", "%2B": "+", "%2C": ",", "%3B": ";", "%3D": "=", "%3A": ":", "%40": "@" } }, decode: { expression: /[\/\?#]/g, map: { "/": "%2F", "?": "%3F", "#": "%23" } } }, reserved: { encode: { expression: /%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi, map: { "%3A": ":", "%2F": "/", "%3F": "?", "%23": "#", "%5B": "[", "%5D": "]", "%40": "@", "%21": "!", "%24": "$", "%26": "&", "%27": "'", "%28": "(", "%29": ")", "%2A": "*", "%2B": "+", "%2C": ",", "%3B": ";", "%3D": "=" } } }, urnpath: { encode: { expression: /%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi, map: { "%21": "!", "%24": "$", "%27": "'", "%28": "(", "%29": ")", "%2A": "*", "%2B": "+", "%2C": ",", "%3B": ";", "%3D": "=", "%40": "@" } }, decode: { expression: /[\/\?#:]/g, map: { "/": "%2F", "?": "%3F", "#": "%23", ":": "%3A" } } } }, URI.encodeQuery = function (e, t) { var n = URI.encode(e + ""); return void 0 === t && (t = URI.escapeQuerySpace), t ? n.replace(/%20/g, "+") : n }, URI.decodeQuery = function (e, t) { e += "", void 0 === t && (t = URI.escapeQuerySpace); try { return URI.decode(t ? e.replace(/\+/g, "%20") : e) } catch (t) { return e } }; var s, l = { encode: "encode", decode: "decode" }, u = function (e, t) { return function (n) { try { return URI[t](n + "").replace(URI.characters[e][t].expression, function (n) { return URI.characters[e][t].map[n] }) } catch (e) { return n } } }; for (s in l) URI[s + "PathSegment"] = u("pathname", l[s]), URI[s + "UrnPathSegment"] = u("urnpath", l[s]); var c = function (e, t, n) { return function (r) { var i; i = n ? function (e) { return URI[t](URI[n](e)) } : URI[t]; for (var o = (r + "").split(e), a = 0, s = o.length; a < s; a++)o[a] = i(o[a]); return o.join(e) } }; function generateSimpleAccessor(e) { return function (t, n) { return void 0 === t ? this._parts[e] || "" : (this._parts[e] = t || null, this.build(!n), this) } } function generatePrefixAccessor(e, t) { return function (n, r) { return void 0 === n ? this._parts[e] || "" : (null !== n && (n += "").charAt(0) === t && (n = n.substring(1)), this._parts[e] = n, this.build(!r), this) } } URI.decodePath = c("/", "decodePathSegment"), URI.decodeUrnPath = c(":", "decodeUrnPathSegment"), URI.recodePath = c("/", "encodePathSegment", "decode"), URI.recodeUrnPath = c(":", "encodeUrnPathSegment", "decode"), URI.encodeReserved = u("reserved", "encode"), URI.parse = function (e, t) { var n; return t || (t = { preventInvalidHostname: URI.preventInvalidHostname }), (n = e.indexOf("#")) > -1 && (t.fragment = e.substring(n + 1) || null, e = e.substring(0, n)), (n = e.indexOf("?")) > -1 && (t.query = e.substring(n + 1) || null, e = e.substring(0, n)), "//" === e.substring(0, 2) ? (t.protocol = null, e = e.substring(2), e = URI.parseAuthority(e, t)) : (n = e.indexOf(":")) > -1 && (t.protocol = e.substring(0, n) || null, t.protocol && !t.protocol.match(URI.protocol_expression) ? t.protocol = void 0 : "//" === e.substring(n + 1, n + 3) ? (e = e.substring(n + 3), e = URI.parseAuthority(e, t)) : (e = e.substring(n + 1), t.urn = !0)), t.path = e, t }, URI.parseHost = function (e, t) { e || (e = ""); var n, r, i = (e = e.replace(/\\/g, "/")).indexOf("/"); if (-1 === i && (i = e.length), "[" === e.charAt(0)) n = e.indexOf("]"), t.hostname = e.substring(1, n) || null, t.port = e.substring(n + 2, i) || null, "/" === t.port && (t.port = null); else { var o = e.indexOf(":"), a = e.indexOf("/"), s = e.indexOf(":", o + 1); -1 !== s && (-1 === a || s < a) ? (t.hostname = e.substring(0, i) || null, t.port = null) : (r = e.substring(0, i).split(":"), t.hostname = r[0] || null, t.port = r[1] || null) } return t.hostname && "/" !== e.substring(i).charAt(0) && (i++, e = "/" + e), t.preventInvalidHostname && URI.ensureValidHostname(t.hostname, t.protocol), t.port && URI.ensureValidPort(t.port), e.substring(i) || "/" }, URI.parseAuthority = function (e, t) { return e = URI.parseUserinfo(e, t), URI.parseHost(e, t) }, URI.parseUserinfo = function (e, t) { var n, r = e.indexOf("/"), i = e.lastIndexOf("@", r > -1 ? r : e.length - 1); return i > -1 && (-1 === r || i < r) ? (n = e.substring(0, i).split(":"), t.username = n[0] ? URI.decode(n[0]) : null, n.shift(), t.password = n[0] ? URI.decode(n.join(":")) : null, e = e.substring(i + 1)) : (t.username = null, t.password = null), e }, URI.parseQuery = function (e, t) { if (!e) return {}; if (!(e = e.replace(/&+/g, "&").replace(/^\?*&*|&+$/g, ""))) return {}; for (var n, r, i, o = {}, s = e.split("&"), l = s.length, u = 0; u < l; u++)n = s[u].split("="), r = URI.decodeQuery(n.shift(), t), i = n.length ? URI.decodeQuery(n.join("="), t) : null, a.call(o, r) ? ("string" != typeof o[r] && null !== o[r] || (o[r] = [o[r]]), o[r].push(i)) : o[r] = i; return o }, URI.build = function (e) { var t = ""; return e.protocol && (t += e.protocol + ":"), e.urn || !t && !e.hostname || (t += "//"), t += URI.buildAuthority(e) || "", "string" == typeof e.path && ("/" !== e.path.charAt(0) && "string" == typeof e.hostname && (t += "/"), t += e.path), "string" == typeof e.query && e.query && (t += "?" + e.query), "string" == typeof e.fragment && e.fragment && (t += "#" + e.fragment), t }, URI.buildHost = function (e) { var t = ""; return e.hostname ? (URI.ip6_expression.test(e.hostname) ? t += "[" + e.hostname + "]" : t += e.hostname, e.port && (t += ":" + e.port), t) : "" }, URI.buildAuthority = function (e) { return URI.buildUserinfo(e) + URI.buildHost(e) }, URI.buildUserinfo = function (e) { var t = ""; return e.username && (t += URI.encode(e.username)), e.password && (t += ":" + URI.encode(e.password)), t && (t += "@"), t }, URI.buildQuery = function (e, t, n) { var r, i, o, s, l = ""; for (i in e) if (a.call(e, i) && i) if (isArray(e[i])) for (r = {}, o = 0, s = e[i].length; o < s; o++)void 0 !== e[i][o] && void 0 === r[e[i][o] + ""] && (l += "&" + URI.buildQueryParameter(i, e[i][o], n), !0 !== t && (r[e[i][o] + ""] = !0)); else void 0 !== e[i] && (l += "&" + URI.buildQueryParameter(i, e[i], n)); return l.substring(1) }, URI.buildQueryParameter = function (e, t, n) { return URI.encodeQuery(e, n) + (null !== t ? "=" + URI.encodeQuery(t, n) : "") }, URI.addQuery = function (e, t, n) { if ("object" == typeof t) for (var r in t) a.call(t, r) && URI.addQuery(e, r, t[r]); else { if ("string" != typeof t) throw new TypeError("URI.addQuery() accepts an object, string as the name parameter"); if (void 0 === e[t]) return void (e[t] = n); "string" == typeof e[t] && (e[t] = [e[t]]), isArray(n) || (n = [n]), e[t] = (e[t] || []).concat(n) } }, URI.setQuery = function (e, t, n) { if ("object" == typeof t) for (var r in t) a.call(t, r) && URI.setQuery(e, r, t[r]); else { if ("string" != typeof t) throw new TypeError("URI.setQuery() accepts an object, string as the name parameter"); e[t] = void 0 === n ? null : n } }, URI.removeQuery = function (e, t, n) { var r, i, o; if (isArray(t)) for (r = 0, i = t.length; r < i; r++)e[t[r]] = void 0; else if ("RegExp" === getType(t)) for (o in e) t.test(o) && (e[o] = void 0); else if ("object" == typeof t) for (o in t) a.call(t, o) && URI.removeQuery(e, o, t[o]); else { if ("string" != typeof t) throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter"); void 0 !== n ? "RegExp" === getType(n) ? !isArray(e[t]) && n.test(e[t]) ? e[t] = void 0 : e[t] = filterArrayValues(e[t], n) : e[t] !== String(n) || isArray(n) && 1 !== n.length ? isArray(e[t]) && (e[t] = filterArrayValues(e[t], n)) : e[t] = void 0 : e[t] = void 0 } }, URI.hasQuery = function (e, t, n, r) { switch (getType(t)) { case "String": break; case "RegExp": for (var i in e) if (a.call(e, i) && t.test(i) && (void 0 === n || URI.hasQuery(e, i, n))) return !0; return !1; case "Object": for (var o in t) if (a.call(t, o) && !URI.hasQuery(e, o, t[o])) return !1; return !0; default: throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter") }switch (getType(n)) { case "Undefined": return t in e; case "Boolean": return n === Boolean(isArray(e[t]) ? e[t].length : e[t]); case "Function": return !!n(e[t], t, e); case "Array": return !!isArray(e[t]) && (r ? arrayContains : arraysEqual)(e[t], n); case "RegExp": return isArray(e[t]) ? !!r && arrayContains(e[t], n) : Boolean(e[t] && e[t].match(n)); case "Number": n = String(n); case "String": return isArray(e[t]) ? !!r && arrayContains(e[t], n) : e[t] === n; default: throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter") } }, URI.joinPaths = function () { for (var e = [], t = [], n = 0, r = 0; r < arguments.length; r++) { var i = new URI(arguments[r]); e.push(i); for (var o = i.segment(), a = 0; a < o.length; a++)"string" == typeof o[a] && t.push(o[a]), o[a] && n++ } if (!t.length || !n) return new URI(""); var s = new URI("").segment(t); return "" !== e[0].path() && "/" !== e[0].path().slice(0, 1) || s.path("/" + s.path()), s.normalize() }, URI.commonPath = function (e, t) { var n, r = Math.min(e.length, t.length); for (n = 0; n < r; n++)if (e.charAt(n) !== t.charAt(n)) { n--; break } return n < 1 ? e.charAt(0) === t.charAt(0) && "/" === e.charAt(0) ? "/" : "" : ("/" === e.charAt(n) && "/" === t.charAt(n) || (n = e.substring(0, n).lastIndexOf("/")), e.substring(0, n + 1)) }, URI.withinString = function (e, t, n) { n || (n = {}); var r = n.start || URI.findUri.start, i = n.end || URI.findUri.end, o = n.trim || URI.findUri.trim, a = n.parens || URI.findUri.parens, s = /[a-z0-9-]=["']?$/i; for (r.lastIndex = 0; ;) { var l = r.exec(e); if (!l) break; var u = l.index; if (n.ignoreHtml) { var c = e.slice(Math.max(u - 3, 0), u); if (c && s.test(c)) continue } for (var d = u + e.slice(u).search(i), f = e.slice(u, d), h = -1; ;) { var p = a.exec(f); if (!p) break; var m = p.index + p[0].length; h = Math.max(h, m) } if (!((f = h > -1 ? f.slice(0, h) + f.slice(h).replace(o, "") : f.replace(o, "")).length <= l[0].length || n.ignore && n.ignore.test(f))) { var g = t(f, u, d = u + f.length, e); void 0 !== g ? (g = String(g), e = e.slice(0, u) + g + e.slice(d), r.lastIndex = u + g.length) : r.lastIndex = d } } return r.lastIndex = 0, e }, URI.ensureValidHostname = function (t, n) { var r = !!t, i = !1; if (!!n && (i = arrayContains(URI.hostProtocols, n)), i && !r) throw new TypeError("Hostname cannot be empty, if protocol is " + n); if (t && t.match(URI.invalid_hostname_characters)) { if (!e) throw new TypeError('Hostname "' + t + '" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available'); if (e.toASCII(t).match(URI.invalid_hostname_characters)) throw new TypeError('Hostname "' + t + '" contains characters other than [A-Z0-9.-:_]') } }, URI.ensureValidPort = function (e) { if (e) { var t = Number(e); if (!(function isInteger(e) { return /^[0-9]+$/.test(e) }(t) && t > 0 && t < 65536)) throw new TypeError('Port "' + e + '" is not a valid port') } }, URI.noConflict = function (e) { if (e) { var t = { URI: this.noConflict() }; return r.URITemplate && "function" == typeof r.URITemplate.noConflict && (t.URITemplate = r.URITemplate.noConflict()), r.IPv6 && "function" == typeof r.IPv6.noConflict && (t.IPv6 = r.IPv6.noConflict()), r.SecondLevelDomains && "function" == typeof r.SecondLevelDomains.noConflict && (t.SecondLevelDomains = r.SecondLevelDomains.noConflict()), t } return r.URI === this && (r.URI = i), this }, o.build = function (e) { return !0 === e ? this._deferred_build = !0 : (void 0 === e || this._deferred_build) && (this._string = URI.build(this._parts), this._deferred_build = !1), this }, o.clone = function () { return new URI(this) }, o.valueOf = o.toString = function () { return this.build(!1)._string }, o.protocol = generateSimpleAccessor("protocol"), o.username = generateSimpleAccessor("username"), o.password = generateSimpleAccessor("password"), o.hostname = generateSimpleAccessor("hostname"), o.port = generateSimpleAccessor("port"), o.query = generatePrefixAccessor("query", "?"), o.fragment = generatePrefixAccessor("fragment", "#"), o.search = function (e, t) { var n = this.query(e, t); return "string" == typeof n && n.length ? "?" + n : n }, o.hash = function (e, t) { var n = this.fragment(e, t); return "string" == typeof n && n.length ? "#" + n : n }, o.pathname = function (e, t) { if (void 0 === e || !0 === e) { var n = this._parts.path || (this._parts.hostname ? "/" : ""); return e ? (this._parts.urn ? URI.decodeUrnPath : URI.decodePath)(n) : n } return this._parts.urn ? this._parts.path = e ? URI.recodeUrnPath(e) : "" : this._parts.path = e ? URI.recodePath(e) : "/", this.build(!t), this }, o.path = o.pathname, o.href = function (e, t) { var n; if (void 0 === e) return this.toString(); this._string = "", this._parts = URI._parts(); var r = e instanceof URI, i = "object" == typeof e && (e.hostname || e.path || e.pathname); e.nodeName && (e = e[URI.getDomAttribute(e)] || "", i = !1); if (!r && i && void 0 !== e.pathname && (e = e.toString()), "string" == typeof e || e instanceof String) this._parts = URI.parse(String(e), this._parts); else { if (!r && !i) throw new TypeError("invalid input"); var o = r ? e._parts : e; for (n in o) "query" !== n && a.call(this._parts, n) && (this._parts[n] = o[n]); o.query && this.query(o.query, !1) } return this.build(!t), this }, o.is = function (e) { var t = !1, r = !1, i = !1, o = !1, a = !1, s = !1, l = !1, u = !this._parts.urn; switch (this._parts.hostname && (u = !1, r = URI.ip4_expression.test(this._parts.hostname), i = URI.ip6_expression.test(this._parts.hostname), a = (o = !(t = r || i)) && n && n.has(this._parts.hostname), s = o && URI.idn_expression.test(this._parts.hostname), l = o && URI.punycode_expression.test(this._parts.hostname)), e.toLowerCase()) { case "relative": return u; case "absolute": return !u; case "domain": case "name": return o; case "sld": return a; case "ip": return t; case "ip4": case "ipv4": case "inet4": return r; case "ip6": case "ipv6": case "inet6": return i; case "idn": return s; case "url": return !this._parts.urn; case "urn": return !!this._parts.urn; case "punycode": return l }return null }; var d = o.protocol, f = o.port, h = o.hostname; o.protocol = function (e, t) { if (e && !(e = e.replace(/:(\/\/)?$/, "")).match(URI.protocol_expression)) throw new TypeError('Protocol "' + e + "\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]"); return d.call(this, e, t) }, o.scheme = o.protocol, o.port = function (e, t) { return this._parts.urn ? void 0 === e ? "" : this : (void 0 !== e && (0 === e && (e = null), e && (":" === (e += "").charAt(0) && (e = e.substring(1)), URI.ensureValidPort(e))), f.call(this, e, t)) }, o.hostname = function (e, t) { if (this._parts.urn) return void 0 === e ? "" : this; if (void 0 !== e) { var n = { preventInvalidHostname: this._parts.preventInvalidHostname }; if ("/" !== URI.parseHost(e, n)) throw new TypeError('Hostname "' + e + '" contains characters other than [A-Z0-9.-]'); e = n.hostname, this._parts.preventInvalidHostname && URI.ensureValidHostname(e, this._parts.protocol) } return h.call(this, e, t) }, o.origin = function (e, t) { if (this._parts.urn) return void 0 === e ? "" : this; if (void 0 === e) { var n = this.protocol(); return this.authority() ? (n ? n + "://" : "") + this.authority() : "" } var r = URI(e); return this.protocol(r.protocol()).authority(r.authority()).build(!t), this }, o.host = function (e, t) { if (this._parts.urn) return void 0 === e ? "" : this; if (void 0 === e) return this._parts.hostname ? URI.buildHost(this._parts) : ""; if ("/" !== URI.parseHost(e, this._parts)) throw new TypeError('Hostname "' + e + '" contains characters other than [A-Z0-9.-]'); return this.build(!t), this }, o.authority = function (e, t) { if (this._parts.urn) return void 0 === e ? "" : this; if (void 0 === e) return this._parts.hostname ? URI.buildAuthority(this._parts) : ""; if ("/" !== URI.parseAuthority(e, this._parts)) throw new TypeError('Hostname "' + e + '" contains characters other than [A-Z0-9.-]'); return this.build(!t), this }, o.userinfo = function (e, t) { if (this._parts.urn) return void 0 === e ? "" : this; if (void 0 === e) { var n = URI.buildUserinfo(this._parts); return n ? n.substring(0, n.length - 1) : n } return "@" !== e[e.length - 1] && (e += "@"), URI.parseUserinfo(e, this._parts), this.build(!t), this }, o.resource = function (e, t) { var n; return void 0 === e ? this.path() + this.search() + this.hash() : (n = URI.parse(e), this._parts.path = n.path, this._parts.query = n.query, this._parts.fragment = n.fragment, this.build(!t), this) }, o.subdomain = function (e, t) { if (this._parts.urn) return void 0 === e ? "" : this; if (void 0 === e) { if (!this._parts.hostname || this.is("IP")) return ""; var n = this._parts.hostname.length - this.domain().length - 1; return this._parts.hostname.substring(0, n) || "" } var r = this._parts.hostname.length - this.domain().length, i = this._parts.hostname.substring(0, r), o = new RegExp("^" + escapeRegEx(i)); if (e && "." !== e.charAt(e.length - 1) && (e += "."), -1 !== e.indexOf(":")) throw new TypeError("Domains cannot contain colons"); return e && URI.ensureValidHostname(e, this._parts.protocol), this._parts.hostname = this._parts.hostname.replace(o, e), this.build(!t), this }, o.domain = function (e, t) { if (this._parts.urn) return void 0 === e ? "" : this; if ("boolean" == typeof e && (t = e, e = void 0), void 0 === e) { if (!this._parts.hostname || this.is("IP")) return ""; var n = this._parts.hostname.match(/\./g); if (n && n.length < 2) return this._parts.hostname; var r = this._parts.hostname.length - this.tld(t).length - 1; return r = this._parts.hostname.lastIndexOf(".", r - 1) + 1, this._parts.hostname.substring(r) || "" } if (!e) throw new TypeError("cannot set domain empty"); if (-1 !== e.indexOf(":")) throw new TypeError("Domains cannot contain colons"); if (URI.ensureValidHostname(e, this._parts.protocol), !this._parts.hostname || this.is("IP")) this._parts.hostname = e; else { var i = new RegExp(escapeRegEx(this.domain()) + "$"); this._parts.hostname = this._parts.hostname.replace(i, e) } return this.build(!t), this }, o.tld = function (e, t) { if (this._parts.urn) return void 0 === e ? "" : this; if ("boolean" == typeof e && (t = e, e = void 0), void 0 === e) { if (!this._parts.hostname || this.is("IP")) return ""; var r = this._parts.hostname.lastIndexOf("."), i = this._parts.hostname.substring(r + 1); return !0 !== t && n && n.list[i.toLowerCase()] && n.get(this._parts.hostname) || i } var o; if (!e) throw new TypeError("cannot set TLD empty"); if (e.match(/[^a-zA-Z0-9-]/)) { if (!n || !n.is(e)) throw new TypeError('TLD "' + e + '" contains characters other than [A-Z0-9]'); o = new RegExp(escapeRegEx(this.tld()) + "$"), this._parts.hostname = this._parts.hostname.replace(o, e) } else { if (!this._parts.hostname || this.is("IP")) throw new ReferenceError("cannot set TLD on non-domain host"); o = new RegExp(escapeRegEx(this.tld()) + "$"), this._parts.hostname = this._parts.hostname.replace(o, e) } return this.build(!t), this }, o.directory = function (e, t) { if (this._parts.urn) return void 0 === e ? "" : this; if (void 0 === e || !0 === e) { if (!this._parts.path && !this._parts.hostname) return ""; if ("/" === this._parts.path) return "/"; var n = this._parts.path.length - this.filename().length - 1, r = this._parts.path.substring(0, n) || (this._parts.hostname ? "/" : ""); return e ? URI.decodePath(r) : r } var i = this._parts.path.length - this.filename().length, o = this._parts.path.substring(0, i), a = new RegExp("^" + escapeRegEx(o)); return this.is("relative") || (e || (e = "/"), "/" !== e.charAt(0) && (e = "/" + e)), e && "/" !== e.charAt(e.length - 1) && (e += "/"), e = URI.recodePath(e), this._parts.path = this._parts.path.replace(a, e), this.build(!t), this }, o.filename = function (e, t) { if (this._parts.urn) return void 0 === e ? "" : this; if ("string" != typeof e) { if (!this._parts.path || "/" === this._parts.path) return ""; var n = this._parts.path.lastIndexOf("/"), r = this._parts.path.substring(n + 1); return e ? URI.decodePathSegment(r) : r } var i = !1; "/" === e.charAt(0) && (e = e.substring(1)), e.match(/\.?\//) && (i = !0); var o = new RegExp(escapeRegEx(this.filename()) + "$"); return e = URI.recodePath(e), this._parts.path = this._parts.path.replace(o, e), i ? this.normalizePath(t) : this.build(!t), this }, o.suffix = function (e, t) { if (this._parts.urn) return void 0 === e ? "" : this; if (void 0 === e || !0 === e) { if (!this._parts.path || "/" === this._parts.path) return ""; var n, r, i = this.filename(), o = i.lastIndexOf("."); return -1 === o ? "" : (n = i.substring(o + 1), r = /^[a-z0-9%]+$/i.test(n) ? n : "", e ? URI.decodePathSegment(r) : r) } "." === e.charAt(0) && (e = e.substring(1)); var a, s = this.suffix(); if (s) a = e ? new RegExp(escapeRegEx(s) + "$") : new RegExp(escapeRegEx("." + s) + "$"); else { if (!e) return this; this._parts.path += "." + URI.recodePath(e) } return a && (e = URI.recodePath(e), this._parts.path = this._parts.path.replace(a, e)), this.build(!t), this }, o.segment = function (e, t, n) { var r = this._parts.urn ? ":" : "/", i = this.path(), o = "/" === i.substring(0, 1), a = i.split(r); if (void 0 !== e && "number" != typeof e && (n = t, t = e, e = void 0), void 0 !== e && "number" != typeof e) throw new Error('Bad segment "' + e + '", must be 0-based integer'); if (o && a.shift(), e < 0 && (e = Math.max(a.length + e, 0)), void 0 === t) return void 0 === e ? a : a[e]; if (null === e || void 0 === a[e]) if (isArray(t)) { a = []; for (var s = 0, l = t.length; s < l; s++)(t[s].length || a.length && a[a.length - 1].length) && (a.length && !a[a.length - 1].length && a.pop(), a.push(trimSlashes(t[s]))) } else (t || "string" == typeof t) && (t = trimSlashes(t), "" === a[a.length - 1] ? a[a.length - 1] = t : a.push(t)); else t ? a[e] = trimSlashes(t) : a.splice(e, 1); return o && a.unshift(""), this.path(a.join(r), n) }, o.segmentCoded = function (e, t, n) { var r, i, o; if ("number" != typeof e && (n = t, t = e, e = void 0), void 0 === t) { if (isArray(r = this.segment(e, t, n))) for (i = 0, o = r.length; i < o; i++)r[i] = URI.decode(r[i]); else r = void 0 !== r ? URI.decode(r) : void 0; return r } if (isArray(t)) for (i = 0, o = t.length; i < o; i++)t[i] = URI.encode(t[i]); else t = "string" == typeof t || t instanceof String ? URI.encode(t) : t; return this.segment(e, t, n) }; var p = o.query; return o.query = function (e, t) { if (!0 === e) return URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace); if ("function" == typeof e) { var n = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace), r = e.call(this, n); return this._parts.query = URI.buildQuery(r || n, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), this.build(!t), this } return void 0 !== e && "string" != typeof e ? (this._parts.query = URI.buildQuery(e, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), this.build(!t), this) : p.call(this, e, t) }, o.setQuery = function (e, t, n) { var r = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace); if ("string" == typeof e || e instanceof String) r[e] = void 0 !== t ? t : null; else { if ("object" != typeof e) throw new TypeError("URI.addQuery() accepts an object, string as the name parameter"); for (var i in e) a.call(e, i) && (r[i] = e[i]) } return this._parts.query = URI.buildQuery(r, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), "string" != typeof e && (n = t), this.build(!n), this }, o.addQuery = function (e, t, n) { var r = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace); return URI.addQuery(r, e, void 0 === t ? null : t), this._parts.query = URI.buildQuery(r, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), "string" != typeof e && (n = t), this.build(!n), this }, o.removeQuery = function (e, t, n) { var r = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace); return URI.removeQuery(r, e, t), this._parts.query = URI.buildQuery(r, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), "string" != typeof e && (n = t), this.build(!n), this }, o.hasQuery = function (e, t, n) { var r = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace); return URI.hasQuery(r, e, t, n) }, o.setSearch = o.setQuery, o.addSearch = o.addQuery, o.removeSearch = o.removeQuery, o.hasSearch = o.hasQuery, o.normalize = function () { return this._parts.urn ? this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build() : this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build() }, o.normalizeProtocol = function (e) { return "string" == typeof this._parts.protocol && (this._parts.protocol = this._parts.protocol.toLowerCase(), this.build(!e)), this }, o.normalizeHostname = function (n) { return this._parts.hostname && (this.is("IDN") && e ? this._parts.hostname = e.toASCII(this._parts.hostname) : this.is("IPv6") && t && (this._parts.hostname = t.best(this._parts.hostname)), this._parts.hostname = this._parts.hostname.toLowerCase(), this.build(!n)), this }, o.normalizePort = function (e) { return "string" == typeof this._parts.protocol && this._parts.port === URI.defaultPorts[this._parts.protocol] && (this._parts.port = null, this.build(!e)), this }, o.normalizePath = function (e) { var t, n = this._parts.path; if (!n) return this; if (this._parts.urn) return this._parts.path = URI.recodeUrnPath(this._parts.path), this.build(!e), this; if ("/" === this._parts.path) return this; var r, i, o = ""; for ("/" !== (n = URI.recodePath(n)).charAt(0) && (t = !0, n = "/" + n), "/.." !== n.slice(-3) && "/." !== n.slice(-2) || (n += "/"), n = n.replace(/(\/(\.\/)+)|(\/\.$)/g, "/").replace(/\/{2,}/g, "/"), t && (o = n.substring(1).match(/^(\.\.\/)+/) || "") && (o = o[0]); -1 !== (r = n.search(/\/\.\.(\/|$)/));)0 !== r ? (-1 === (i = n.substring(0, r).lastIndexOf("/")) && (i = r), n = n.substring(0, i) + n.substring(r + 3)) : n = n.substring(3); return t && this.is("relative") && (n = o + n.substring(1)), this._parts.path = n, this.build(!e), this }, o.normalizePathname = o.normalizePath, o.normalizeQuery = function (e) { return "string" == typeof this._parts.query && (this._parts.query.length ? this.query(URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace)) : this._parts.query = null, this.build(!e)), this }, o.normalizeFragment = function (e) { return this._parts.fragment || (this._parts.fragment = null, this.build(!e)), this }, o.normalizeSearch = o.normalizeQuery, o.normalizeHash = o.normalizeFragment, o.iso8859 = function () { var e = URI.encode, t = URI.decode; URI.encode = escape, URI.decode = decodeURIComponent; try { this.normalize() } finally { URI.encode = e, URI.decode = t } return this }, o.unicode = function () { var e = URI.encode, t = URI.decode; URI.encode = strictEncodeURIComponent, URI.decode = unescape; try { this.normalize() } finally { URI.encode = e, URI.decode = t } return this }, o.readable = function () { var t = this.clone(); t.username("").password("").normalize(); var n = ""; if (t._parts.protocol && (n += t._parts.protocol + "://"), t._parts.hostname && (t.is("punycode") && e ? (n += e.toUnicode(t._parts.hostname), t._parts.port && (n += ":" + t._parts.port)) : n += t.host()), t._parts.hostname && t._parts.path && "/" !== t._parts.path.charAt(0) && (n += "/"), n += t.path(!0), t._parts.query) { for (var r = "", i = 0, o = t._parts.query.split("&"), a = o.length; i < a; i++) { var s = (o[i] || "").split("="); r += "&" + URI.decodeQuery(s[0], this._parts.escapeQuerySpace).replace(/&/g, "%26"), void 0 !== s[1] && (r += "=" + URI.decodeQuery(s[1], this._parts.escapeQuerySpace).replace(/&/g, "%26")) } n += "?" + r.substring(1) } return n += URI.decodeQuery(t.hash(), !0) }, o.absoluteTo = function (e) { var t, n, r, i = this.clone(), o = ["protocol", "username", "password", "hostname", "port"]; if (this._parts.urn) throw new Error("URNs do not have any generally defined hierarchical components"); if (e instanceof URI || (e = new URI(e)), i._parts.protocol) return i; if (i._parts.protocol = e._parts.protocol, this._parts.hostname) return i; for (n = 0; r = o[n]; n++)i._parts[r] = e._parts[r]; return i._parts.path ? (".." === i._parts.path.substring(-2) && (i._parts.path += "/"), "/" !== i.path().charAt(0) && (t = (t = e.directory()) || (0 === e.path().indexOf("/") ? "/" : ""), i._parts.path = (t ? t + "/" : "") + i._parts.path, i.normalizePath())) : (i._parts.path = e._parts.path, i._parts.query || (i._parts.query = e._parts.query)), i.build(), i }, o.relativeTo = function (e) { var t, n, r, i, o, a = this.clone().normalize(); if (a._parts.urn) throw new Error("URNs do not have any generally defined hierarchical components"); if (e = new URI(e).normalize(), t = a._parts, n = e._parts, i = a.path(), o = e.path(), "/" !== i.charAt(0)) throw new Error("URI is already relative"); if ("/" !== o.charAt(0)) throw new Error("Cannot calculate a URI relative to another relative URI"); if (t.protocol === n.protocol && (t.protocol = null), t.username !== n.username || t.password !== n.password) return a.build(); if (null !== t.protocol || null !== t.username || null !== t.password) return a.build(); if (t.hostname !== n.hostname || t.port !== n.port) return a.build(); if (t.hostname = null, t.port = null, i === o) return t.path = "", a.build(); if (!(r = URI.commonPath(i, o))) return a.build(); var s = n.path.substring(r.length).replace(/[^\/]*$/, "").replace(/.*?\//g, "../"); return t.path = s + t.path.substring(r.length) || "./", a.build() }, o.equals = function (e) { var t, n, r, i, o, s = this.clone(), l = new URI(e), u = {}; if (s.normalize(), l.normalize(), s.toString() === l.toString()) return !0; if (r = s.query(), i = l.query(), s.query(""), l.query(""), s.toString() !== l.toString()) return !1; if (r.length !== i.length) return !1; for (o in t = URI.parseQuery(r, this._parts.escapeQuerySpace), n = URI.parseQuery(i, this._parts.escapeQuerySpace), t) if (a.call(t, o)) { if (isArray(t[o])) { if (!arraysEqual(t[o], n[o])) return !1 } else if (t[o] !== n[o]) return !1; u[o] = !0 } for (o in n) if (a.call(n, o) && !u[o]) return !1; return !0 }, o.preventInvalidHostname = function (e) { return this._parts.preventInvalidHostname = !!e, this }, o.duplicateQueryParameters = function (e) { return this._parts.duplicateQueryParameters = !!e, this }, o.escapeQuerySpace = function (e) { return this._parts.escapeQuerySpace = !!e, this }, URI }) },,,, function(e, t, n) { var r; !function () { "use strict"; function FastClick(e, t) { var n; if (t = t || {}, this.trackingClick = !1, this.trackingClickStart = 0, this.targetElement = null, this.touchStartX = 0, this.touchStartY = 0, this.lastTouchIdentifier = 0, this.touchBoundary = t.touchBoundary || 10, this.layer = e, this.tapDelay = t.tapDelay || 200, this.tapTimeout = t.tapTimeout || 700, !FastClick.notNeeded(e)) { for (var r = ["onMouse", "onClick", "onTouchStart", "onTouchMove", "onTouchEnd", "onTouchCancel"], i = 0, a = r.length; i < a; i++)this[r[i]] = bind(this[r[i]], this); o && (e.addEventListener("mouseover", this.onMouse, !0), e.addEventListener("mousedown", this.onMouse, !0), e.addEventListener("mouseup", this.onMouse, !0)), e.addEventListener("click", this.onClick, !0), e.addEventListener("touchstart", this.onTouchStart, !1), e.addEventListener("touchmove", this.onTouchMove, !1), e.addEventListener("touchend", this.onTouchEnd, !1), e.addEventListener("touchcancel", this.onTouchCancel, !1), Event.prototype.stopImmediatePropagation || (e.removeEventListener = function (t, n, r) { var i = Node.prototype.removeEventListener; "click" === t ? i.call(e, t, n.hijacked || n, r) : i.call(e, t, n, r) }, e.addEventListener = function (t, n, r) { var i = Node.prototype.addEventListener; "click" === t ? i.call(e, t, n.hijacked || (n.hijacked = function (e) { e.propagationStopped || n(e) }), r) : i.call(e, t, n, r) }), "function" == typeof e.onclick && (n = e.onclick, e.addEventListener("click", function (e) { n(e) }, !1), e.onclick = null) } function bind(e, t) { return function () { return e.apply(t, arguments) } } } var i = navigator.userAgent.indexOf("Windows Phone") >= 0, o = navigator.userAgent.indexOf("Android") > 0 && !i, a = /iP(ad|hone|od)/.test(navigator.userAgent) && !i, s = a && /OS 4_\d(_\d)?/.test(navigator.userAgent), l = a && /OS [6-7]_\d/.test(navigator.userAgent), u = navigator.userAgent.indexOf("BB10") > 0; FastClick.prototype.needsClick = function (e) { switch (e.nodeName.toLowerCase()) { case "button": case "select": case "textarea": if (e.disabled) return !0; break; case "input": if (a && "file" === e.type || e.disabled) return !0; break; case "label": case "iframe": case "video": return !0 }return /\bneedsclick\b/.test(e.className) }, FastClick.prototype.needsFocus = function (e) { switch (e.nodeName.toLowerCase()) { case "textarea": return !0; case "select": return !o; case "input": switch (e.type) { case "button": case "checkbox": case "file": case "image": case "radio": case "submit": return !1 }return !e.disabled && !e.readOnly; default: return /\bneedsfocus\b/.test(e.className) } }, FastClick.prototype.sendClick = function (e, t) { var n, r; document.activeElement && document.activeElement !== e && document.activeElement.blur(), r = t.changedTouches[0], (n = document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e), !0, !0, window, 1, r.screenX, r.screenY, r.clientX, r.clientY, !1, !1, !1, !1, 0, null), n.forwardedTouchEvent = !0, e.dispatchEvent(n) }, FastClick.prototype.determineEventType = function (e) { return o && "select" === e.tagName.toLowerCase() ? "mousedown" : "click" }, FastClick.prototype.focus = function (e) { var t; a && e.setSelectionRange && 0 !== e.type.indexOf("date") && "time" !== e.type && "month" !== e.type ? (t = e.value.length, e.setSelectionRange(t, t)) : e.focus() }, FastClick.prototype.updateScrollParent = function (e) { var t, n; if (!(t = e.fastClickScrollParent) || !t.contains(e)) { n = e; do { if (n.scrollHeight > n.offsetHeight) { t = n, e.fastClickScrollParent = n; break } n = n.parentElement } while (n) } t && (t.fastClickLastScrollTop = t.scrollTop) }, FastClick.prototype.getTargetElementFromEventTarget = function (e) { return e.nodeType === Node.TEXT_NODE ? e.parentNode : e }, FastClick.prototype.onTouchStart = function (e) { var t, n, r; if (e.targetTouches.length > 1) return !0; if (t = this.getTargetElementFromEventTarget(e.target), n = e.targetTouches[0], a) { if ((r = window.getSelection()).rangeCount && !r.isCollapsed) return !0; if (!s) { if (n.identifier && n.identifier === this.lastTouchIdentifier) return e.preventDefault(), !1; this.lastTouchIdentifier = n.identifier, this.updateScrollParent(t) } } return this.trackingClick = !0, this.trackingClickStart = e.timeStamp, this.targetElement = t, this.touchStartX = n.pageX, this.touchStartY = n.pageY, e.timeStamp - this.lastClickTime < this.tapDelay && e.preventDefault(), !0 }, FastClick.prototype.touchHasMoved = function (e) { var t = e.changedTouches[0], n = this.touchBoundary; return Math.abs(t.pageX - this.touchStartX) > n || Math.abs(t.pageY - this.touchStartY) > n }, FastClick.prototype.onTouchMove = function (e) { return !this.trackingClick || ((this.targetElement !== this.getTargetElementFromEventTarget(e.target) || this.touchHasMoved(e)) && (this.trackingClick = !1, this.targetElement = null), !0) }, FastClick.prototype.findControl = function (e) { return void 0 !== e.control ? e.control : e.htmlFor ? document.getElementById(e.htmlFor) : e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea") }, FastClick.prototype.onTouchEnd = function (e) { var t, n, r, i, u, c = this.targetElement; if (!this.trackingClick) return !0; if (e.timeStamp - this.lastClickTime < this.tapDelay) return this.cancelNextClick = !0, !0; if (e.timeStamp - this.trackingClickStart > this.tapTimeout) return !0; if (this.cancelNextClick = !1, this.lastClickTime = e.timeStamp, n = this.trackingClickStart, this.trackingClick = !1, this.trackingClickStart = 0, l && (u = e.changedTouches[0], (c = document.elementFromPoint(u.pageX - window.pageXOffset, u.pageY - window.pageYOffset) || c).fastClickScrollParent = this.targetElement.fastClickScrollParent), "label" === (r = c.tagName.toLowerCase())) { if (t = this.findControl(c)) { if (this.focus(c), o) return !1; c = t } } else if (this.needsFocus(c)) return e.timeStamp - n > 100 || a && window.top !== window && "input" === r ? (this.targetElement = null, !1) : (this.focus(c), this.sendClick(c, e), a && "select" === r || (this.targetElement = null, e.preventDefault()), !1); return !(!a || s || !(i = c.fastClickScrollParent) || i.fastClickLastScrollTop === i.scrollTop) || (this.needsClick(c) || (e.preventDefault(), this.sendClick(c, e)), !1) }, FastClick.prototype.onTouchCancel = function () { this.trackingClick = !1, this.targetElement = null }, FastClick.prototype.onMouse = function (e) { return !this.targetElement || (!!e.forwardedTouchEvent || (!e.cancelable || (!(!this.needsClick(this.targetElement) || this.cancelNextClick) || (e.stopImmediatePropagation ? e.stopImmediatePropagation() : e.propagationStopped = !0, e.stopPropagation(), e.preventDefault(), !1)))) }, FastClick.prototype.onClick = function (e) { var t; return this.trackingClick ? (this.targetElement = null, this.trackingClick = !1, !0) : "submit" === e.target.type && 0 === e.detail || ((t = this.onMouse(e)) || (this.targetElement = null), t) }, FastClick.prototype.destroy = function () { var e = this.layer; o && (e.removeEventListener("mouseover", this.onMouse, !0), e.removeEventListener("mousedown", this.onMouse, !0), e.removeEventListener("mouseup", this.onMouse, !0)), e.removeEventListener("click", this.onClick, !0), e.removeEventListener("touchstart", this.onTouchStart, !1), e.removeEventListener("touchmove", this.onTouchMove, !1), e.removeEventListener("touchend", this.onTouchEnd, !1), e.removeEventListener("touchcancel", this.onTouchCancel, !1) }, FastClick.notNeeded = function (e) { var t, n, r; if (void 0 === window.ontouchstart) return !0; if (n = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1]) { if (!o) return !0; if (t = document.querySelector("meta[name=viewport]")) { if (-1 !== t.content.indexOf("user-scalable=no")) return !0; if (n > 31 && document.documentElement.scrollWidth <= window.outerWidth) return !0 } } if (u && (r = navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1] >= 10 && r[2] >= 3 && (t = document.querySelector("meta[name=viewport]"))) { if (-1 !== t.content.indexOf("user-scalable=no")) return !0; if (document.documentElement.scrollWidth <= window.outerWidth) return !0 } return "none" === e.style.msTouchAction || "manipulation" === e.style.touchAction || (!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1] >= 27 && (t = document.querySelector("meta[name=viewport]")) && (-1 !== t.content.indexOf("user-scalable=no") || document.documentElement.scrollWidth <= window.outerWidth)) || ("none" === e.style.touchAction || "manipulation" === e.style.touchAction)) }, FastClick.attach = function (e, t) { return new FastClick(e, t) }, void 0 === (r = function () { return FastClick }.call(t, n, t, e)) || (e.exports = r) }() },,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { var r = n(1520); e.exports = r }, function(e, t, n) { e.exports = n(2471) }, function(e, t, n) { var r = n(1220), i = n(2472); e.exports = function _objectWithoutPropertiesLoose(e, t) { if (null == e) return {}; var n, o, a = {}, s = i(e); for (o = 0; o < s.length; o++)n = s[o], r(t).call(t, n) >= 0 || (a[n] = e[n]); return a } }, function(e, t, n) { var r = n(1466); e.exports = r }, function(e, t, n) { e.exports = n(2474) }, function(e, t, n) { var r = n(1519); e.exports = r },,,,,,,,,,,,,,,,,,,, function(e, t, n) { var r = n(1465), i = n(1471), o = n(900), a = n(1464); e.exports = function _toArray(e) { return r(e) || i(e) || o(e) || a() } },,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, function(e, t, n) { !function webpackUniversalModuleDefinition(t, n) { e.exports = n() }(window, function () { return function (e) { var t = {}; function __webpack_require__(n) { if (t[n]) return t[n].exports; var r = t[n] = { i: n, l: !1, exports: {} }; return e[n].call(r.exports, r, r.exports, __webpack_require__), r.l = !0, r.exports } return __webpack_require__.m = e, __webpack_require__.c = t, __webpack_require__.d = function (e, t, n) { __webpack_require__.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: n }) }, __webpack_require__.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, __webpack_require__.t = function (e, t) { if (1 & t && (e = __webpack_require__(e)), 8 & t) return e; if (4 & t && "object" == typeof e && e && e.__esModule) return e; var n = Object.create(null); if (__webpack_require__.r(n), Object.defineProperty(n, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e) for (var r in e) __webpack_require__.d(n, r, function (t) { return e[t] }.bind(null, r)); return n }, __webpack_require__.n = function (e) { var t = e && e.__esModule ? function getDefault() { return e.default } : function getModuleExports() { return e }; return __webpack_require__.d(t, "a", t), t }, __webpack_require__.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, __webpack_require__.p = "", __webpack_require__(__webpack_require__.s = 150) }([function (e, t, n) { var r; (function () { var n = this, i = n._, o = Array.prototype, a = Object.prototype, s = Function.prototype, l = o.push, u = o.slice, c = a.toString, d = a.hasOwnProperty, f = Array.isArray, h = Object.keys, p = s.bind, m = Object.create, g = function () { }, v = function (e) { return e instanceof v ? e : this instanceof v ? void (this._wrapped = e) : new v(e) }; void 0 !== e && e.exports && (t = e.exports = v), t._ = v, v.VERSION = "1.8.3"; var y = function (e, t, n) { if (void 0 === t) return e; switch (null == n ? 3 : n) { case 1: return function (n) { return e.call(t, n) }; case 2: return function (n, r) { return e.call(t, n, r) }; case 3: return function (n, r, i) { return e.call(t, n, r, i) }; case 4: return function (n, r, i, o) { return e.call(t, n, r, i, o) } }return function () { return e.apply(t, arguments) } }, _ = function (e, t, n) { return null == e ? v.identity : v.isFunction(e) ? y(e, t, n) : v.isObject(e) ? v.matcher(e) : v.property(e) }; v.iteratee = function (e, t) { return _(e, t, 1 / 0) }; var b = function (e, t) { return function (n) { var r = arguments.length; if (r < 2 || null == n) return n; for (var i = 1; i < r; i++)for (var o = arguments[i], a = e(o), s = a.length, l = 0; l < s; l++) { var u = a[l]; t && void 0 !== n[u] || (n[u] = o[u]) } return n } }, w = function (e) { if (!v.isObject(e)) return {}; if (m) return m(e); g.prototype = e; var t = new g; return g.prototype = null, t }, x = function (e) { return function (t) { return null == t ? void 0 : t[e] } }, C = Math.pow(2, 53) - 1, S = x("length"), k = function (e) { var t = S(e); return "number" == typeof t && t >= 0 && t <= C }; function createReduce(e) { return function (t, n, r, i) { n = y(n, i, 4); var o = !k(t) && v.keys(t), a = (o || t).length, s = e > 0 ? 0 : a - 1; return arguments.length < 3 && (r = t[o ? o[s] : s], s += e), function iterator(t, n, r, i, o, a) { for (; o >= 0 && o < a; o += e) { var s = i ? i[o] : o; r = n(r, t[s], s, t) } return r }(t, n, r, o, s, a) } } v.each = v.forEach = function (e, t, n) { var r, i; if (t = y(t, n), k(e)) for (r = 0, i = e.length; r < i; r++)t(e[r], r, e); else { var o = v.keys(e); for (r = 0, i = o.length; r < i; r++)t(e[o[r]], o[r], e) } return e }, v.map = v.collect = function (e, t, n) { t = _(t, n); for (var r = !k(e) && v.keys(e), i = (r || e).length, o = Array(i), a = 0; a < i; a++) { var s = r ? r[a] : a; o[a] = t(e[s], s, e) } return o }, v.reduce = v.foldl = v.inject = createReduce(1), v.reduceRight = v.foldr = createReduce(-1), v.find = v.detect = function (e, t, n) { var r; if (void 0 !== (r = k(e) ? v.findIndex(e, t, n) : v.findKey(e, t, n)) && -1 !== r) return e[r] }, v.filter = v.select = function (e, t, n) { var r = []; return t = _(t, n), v.each(e, function (e, n, i) { t(e, n, i) && r.push(e) }), r }, v.reject = function (e, t, n) { return v.filter(e, v.negate(_(t)), n) }, v.every = v.all = function (e, t, n) { t = _(t, n); for (var r = !k(e) && v.keys(e), i = (r || e).length, o = 0; o < i; o++) { var a = r ? r[o] : o; if (!t(e[a], a, e)) return !1 } return !0 }, v.some = v.any = function (e, t, n) { t = _(t, n); for (var r = !k(e) && v.keys(e), i = (r || e).length, o = 0; o < i; o++) { var a = r ? r[o] : o; if (t(e[a], a, e)) return !0 } return !1 }, v.contains = v.includes = v.include = function (e, t, n, r) { return k(e) || (e = v.values(e)), ("number" != typeof n || r) && (n = 0), v.indexOf(e, t, n) >= 0 }, v.invoke = function (e, t) { var n = u.call(arguments, 2), r = v.isFunction(t); return v.map(e, function (e) { var i = r ? t : e[t]; return null == i ? i : i.apply(e, n) }) }, v.pluck = function (e, t) { return v.map(e, v.property(t)) }, v.where = function (e, t) { return v.filter(e, v.matcher(t)) }, v.findWhere = function (e, t) { return v.find(e, v.matcher(t)) }, v.max = function (e, t, n) { var r, i, o = -1 / 0, a = -1 / 0; if (null == t && null != e) for (var s = 0, l = (e = k(e) ? e : v.values(e)).length; s < l; s++)(r = e[s]) > o && (o = r); else t = _(t, n), v.each(e, function (e, n, r) { ((i = t(e, n, r)) > a || i === -1 / 0 && o === -1 / 0) && (o = e, a = i) }); return o }, v.min = function (e, t, n) { var r, i, o = 1 / 0, a = 1 / 0; if (null == t && null != e) for (var s = 0, l = (e = k(e) ? e : v.values(e)).length; s < l; s++)(r = e[s]) < o && (o = r); else t = _(t, n), v.each(e, function (e, n, r) { ((i = t(e, n, r)) < a || i === 1 / 0 && o === 1 / 0) && (o = e, a = i) }); return o }, v.shuffle = function (e) { for (var t, n = k(e) ? e : v.values(e), r = n.length, i = Array(r), o = 0; o < r; o++)(t = v.random(0, o)) !== o && (i[o] = i[t]), i[t] = n[o]; return i }, v.sample = function (e, t, n) { return null == t || n ? (k(e) || (e = v.values(e)), e[v.random(e.length - 1)]) : v.shuffle(e).slice(0, Math.max(0, t)) }, v.sortBy = function (e, t, n) { return t = _(t, n), v.pluck(v.map(e, function (e, n, r) { return { value: e, index: n, criteria: t(e, n, r) } }).sort(function (e, t) { var n = e.criteria, r = t.criteria; if (n !== r) { if (n > r || void 0 === n) return 1; if (n < r || void 0 === r) return -1 } return e.index - t.index }), "value") }; var T = function (e) { return function (t, n, r) { var i = {}; return n = _(n, r), v.each(t, function (r, o) { var a = n(r, o, t); e(i, r, a) }), i } }; v.groupBy = T(function (e, t, n) { v.has(e, n) ? e[n].push(t) : e[n] = [t] }), v.indexBy = T(function (e, t, n) { e[n] = t }), v.countBy = T(function (e, t, n) { v.has(e, n) ? e[n]++ : e[n] = 1 }), v.toArray = function (e) { return e ? v.isArray(e) ? u.call(e) : k(e) ? v.map(e, v.identity) : v.values(e) : [] }, v.size = function (e) { return null == e ? 0 : k(e) ? e.length : v.keys(e).length }, v.partition = function (e, t, n) { t = _(t, n); var r = [], i = []; return v.each(e, function (e, n, o) { (t(e, n, o) ? r : i).push(e) }), [r, i] }, v.first = v.head = v.take = function (e, t, n) { if (null != e) return null == t || n ? e[0] : v.initial(e, e.length - t) }, v.initial = function (e, t, n) { return u.call(e, 0, Math.max(0, e.length - (null == t || n ? 1 : t))) }, v.last = function (e, t, n) { if (null != e) return null == t || n ? e[e.length - 1] : v.rest(e, Math.max(0, e.length - t)) }, v.rest = v.tail = v.drop = function (e, t, n) { return u.call(e, null == t || n ? 1 : t) }, v.compact = function (e) { return v.filter(e, v.identity) }; var L = function (e, t, n, r) { for (var i = [], o = 0, a = r || 0, s = S(e); a < s; a++) { var l = e[a]; if (k(l) && (v.isArray(l) || v.isArguments(l))) { t || (l = L(l, t, n)); var u = 0, c = l.length; for (i.length += c; u < c;)i[o++] = l[u++] } else n || (i[o++] = l) } return i }; function createPredicateIndexFinder(e) { return function (t, n, r) { n = _(n, r); for (var i = S(t), o = e > 0 ? 0 : i - 1; o >= 0 && o < i; o += e)if (n(t[o], o, t)) return o; return -1 } } function createIndexFinder(e, t, n) { return function (r, i, o) { var a = 0, s = S(r); if ("number" == typeof o) e > 0 ? a = o >= 0 ? o : Math.max(o + s, a) : s = o >= 0 ? Math.min(o + 1, s) : o + s + 1; else if (n && o && s) return r[o = n(r, i)] === i ? o : -1; if (i != i) return (o = t(u.call(r, a, s), v.isNaN)) >= 0 ? o + a : -1; for (o = e > 0 ? a : s - 1; o >= 0 && o < s; o += e)if (r[o] === i) return o; return -1 } } v.flatten = function (e, t) { return L(e, t, !1) }, v.without = function (e) { return v.difference(e, u.call(arguments, 1)) }, v.uniq = v.unique = function (e, t, n, r) { v.isBoolean(t) || (r = n, n = t, t = !1), null != n && (n = _(n, r)); for (var i = [], o = [], a = 0, s = S(e); a < s; a++) { var l = e[a], u = n ? n(l, a, e) : l; t ? (a && o === u || i.push(l), o = u) : n ? v.contains(o, u) || (o.push(u), i.push(l)) : v.contains(i, l) || i.push(l) } return i }, v.union = function () { return v.uniq(L(arguments, !0, !0)) }, v.intersection = function (e) { for (var t = [], n = arguments.length, r = 0, i = S(e); r < i; r++) { var o = e[r]; if (!v.contains(t, o)) { for (var a = 1; a < n && v.contains(arguments[a], o); a++); a === n && t.push(o) } } return t }, v.difference = function (e) { var t = L(arguments, !0, !0, 1); return v.filter(e, function (e) { return !v.contains(t, e) }) }, v.zip = function () { return v.unzip(arguments) }, v.unzip = function (e) { for (var t = e && v.max(e, S).length || 0, n = Array(t), r = 0; r < t; r++)n[r] = v.pluck(e, r); return n }, v.object = function (e, t) { for (var n = {}, r = 0, i = S(e); r < i; r++)t ? n[e[r]] = t[r] : n[e[r][0]] = e[r][1]; return n }, v.findIndex = createPredicateIndexFinder(1), v.findLastIndex = createPredicateIndexFinder(-1), v.sortedIndex = function (e, t, n, r) { for (var i = (n = _(n, r, 1))(t), o = 0, a = S(e); o < a;) { var s = Math.floor((o + a) / 2); n(e[s]) < i ? o = s + 1 : a = s } return o }, v.indexOf = createIndexFinder(1, v.findIndex, v.sortedIndex), v.lastIndexOf = createIndexFinder(-1, v.findLastIndex), v.range = function (e, t, n) { null == t && (t = e || 0, e = 0), n = n || 1; for (var r = Math.max(Math.ceil((t - e) / n), 0), i = Array(r), o = 0; o < r; o++, e += n)i[o] = e; return i }; var M = function (e, t, n, r, i) { if (!(r instanceof t)) return e.apply(n, i); var o = w(e.prototype), a = e.apply(o, i); return v.isObject(a) ? a : o }; v.bind = function (e, t) { if (p && e.bind === p) return p.apply(e, u.call(arguments, 1)); if (!v.isFunction(e)) throw new TypeError("Bind must be called on a function"); var n = u.call(arguments, 2), r = function () { return M(e, r, t, this, n.concat(u.call(arguments))) }; return r }, v.partial = function (e) { var t = u.call(arguments, 1), n = function () { for (var r = 0, i = t.length, o = Array(i), a = 0; a < i; a++)o[a] = t[a] === v ? arguments[r++] : t[a]; for (; r < arguments.length;)o.push(arguments[r++]); return M(e, n, this, this, o) }; return n }, v.bindAll = function (e) { var t, n, r = arguments.length; if (r <= 1) throw new Error("bindAll must be passed function names"); for (t = 1; t < r; t++)e[n = arguments[t]] = v.bind(e[n], e); return e }, v.memoize = function (e, t) { var n = function (r) { var i = n.cache, o = "" + (t ? t.apply(this, arguments) : r); return v.has(i, o) || (i[o] = e.apply(this, arguments)), i[o] }; return n.cache = {}, n }, v.delay = function (e, t) { var n = u.call(arguments, 2); return setTimeout(function () { return e.apply(null, n) }, t) }, v.defer = v.partial(v.delay, v, 1), v.throttle = function (e, t, n) { var r, i, o, a = null, s = 0; n || (n = {}); var l = function () { s = !1 === n.leading ? 0 : v.now(), a = null, o = e.apply(r, i), a || (r = i = null) }; return function () { var u = v.now(); s || !1 !== n.leading || (s = u); var c = t - (u - s); return r = this, i = arguments, c <= 0 || c > t ? (a && (clearTimeout(a), a = null), s = u, o = e.apply(r, i), a || (r = i = null)) : a || !1 === n.trailing || (a = setTimeout(l, c)), o } }, v.debounce = function (e, t, n) { var r, i, o, a, s, l = function () { var u = v.now() - a; u < t && u >= 0 ? r = setTimeout(l, t - u) : (r = null, n || (s = e.apply(o, i), r || (o = i = null))) }; return function () { o = this, i = arguments, a = v.now(); var u = n && !r; return r || (r = setTimeout(l, t)), u && (s = e.apply(o, i), o = i = null), s } }, v.wrap = function (e, t) { return v.partial(t, e) }, v.negate = function (e) { return function () { return !e.apply(this, arguments) } }, v.compose = function () { var e = arguments, t = e.length - 1; return function () { for (var n = t, r = e[t].apply(this, arguments); n--;)r = e[n].call(this, r); return r } }, v.after = function (e, t) { return function () { if (--e < 1) return t.apply(this, arguments) } }, v.before = function (e, t) { var n; return function () { return --e > 0 && (n = t.apply(this, arguments)), e <= 1 && (t = null), n } }, v.once = v.partial(v.before, 2); var E = !{ toString: null }.propertyIsEnumerable("toString"), A = ["valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString"]; function collectNonEnumProps(e, t) { var n = A.length, r = e.constructor, i = v.isFunction(r) && r.prototype || a, o = "constructor"; for (v.has(e, o) && !v.contains(t, o) && t.push(o); n--;)(o = A[n]) in e && e[o] !== i[o] && !v.contains(t, o) && t.push(o) } v.keys = function (e) { if (!v.isObject(e)) return []; if (h) return h(e); var t = []; for (var n in e) v.has(e, n) && t.push(n); return E && collectNonEnumProps(e, t), t }, v.allKeys = function (e) { if (!v.isObject(e)) return []; var t = []; for (var n in e) t.push(n); return E && collectNonEnumProps(e, t), t }, v.values = function (e) { for (var t = v.keys(e), n = t.length, r = Array(n), i = 0; i < n; i++)r[i] = e[t[i]]; return r }, v.mapObject = function (e, t, n) { t = _(t, n); for (var r, i = v.keys(e), o = i.length, a = {}, s = 0; s < o; s++)a[r = i[s]] = t(e[r], r, e); return a }, v.pairs = function (e) { for (var t = v.keys(e), n = t.length, r = Array(n), i = 0; i < n; i++)r[i] = [t[i], e[t[i]]]; return r }, v.invert = function (e) { for (var t = {}, n = v.keys(e), r = 0, i = n.length; r < i; r++)t[e[n[r]]] = n[r]; return t }, v.functions = v.methods = function (e) { var t = []; for (var n in e) v.isFunction(e[n]) && t.push(n); return t.sort() }, v.extend = b(v.allKeys), v.extendOwn = v.assign = b(v.keys), v.findKey = function (e, t, n) { t = _(t, n); for (var r, i = v.keys(e), o = 0, a = i.length; o < a; o++)if (t(e[r = i[o]], r, e)) return r }, v.pick = function (e, t, n) { var r, i, o = {}, a = e; if (null == a) return o; v.isFunction(t) ? (i = v.allKeys(a), r = y(t, n)) : (i = L(arguments, !1, !1, 1), r = function (e, t, n) { return t in n }, a = Object(a)); for (var s = 0, l = i.length; s < l; s++) { var u = i[s], c = a[u]; r(c, u, a) && (o[u] = c) } return o }, v.omit = function (e, t, n) { if (v.isFunction(t)) t = v.negate(t); else { var r = v.map(L(arguments, !1, !1, 1), String); t = function (e, t) { return !v.contains(r, t) } } return v.pick(e, t, n) }, v.defaults = b(v.allKeys, !0), v.create = function (e, t) { var n = w(e); return t && v.extendOwn(n, t), n }, v.clone = function (e) { return v.isObject(e) ? v.isArray(e) ? e.slice() : v.extend({}, e) : e }, v.tap = function (e, t) { return t(e), e }, v.isMatch = function (e, t) { var n = v.keys(t), r = n.length; if (null == e) return !r; for (var i = Object(e), o = 0; o < r; o++) { var a = n[o]; if (t[a] !== i[a] || !(a in i)) return !1 } return !0 }; var P = function (e, t, n, r) { if (e === t) return 0 !== e || 1 / e == 1 / t; if (null == e || null == t) return e === t; e instanceof v && (e = e._wrapped), t instanceof v && (t = t._wrapped); var i = c.call(e); if (i !== c.call(t)) return !1; switch (i) { case "[object RegExp]": case "[object String]": return "" + e == "" + t; case "[object Number]": return +e != +e ? +t != +t : 0 == +e ? 1 / +e == 1 / t : +e == +t; case "[object Date]": case "[object Boolean]": return +e == +t }var o = "[object Array]" === i; if (!o) { if ("object" != typeof e || "object" != typeof t) return !1; var a = e.constructor, s = t.constructor; if (a !== s && !(v.isFunction(a) && a instanceof a && v.isFunction(s) && s instanceof s) && "constructor" in e && "constructor" in t) return !1 } n = n || [], r = r || []; for (var l = n.length; l--;)if (n[l] === e) return r[l] === t; if (n.push(e), r.push(t), o) { if ((l = e.length) !== t.length) return !1; for (; l--;)if (!P(e[l], t[l], n, r)) return !1 } else { var u, d = v.keys(e); if (l = d.length, v.keys(t).length !== l) return !1; for (; l--;)if (u = d[l], !v.has(t, u) || !P(e[u], t[u], n, r)) return !1 } return n.pop(), r.pop(), !0 }; v.isEqual = function (e, t) { return P(e, t) }, v.isEmpty = function (e) { return null == e || (k(e) && (v.isArray(e) || v.isString(e) || v.isArguments(e)) ? 0 === e.length : 0 === v.keys(e).length) }, v.isElement = function (e) { return !(!e || 1 !== e.nodeType) }, v.isArray = f || function (e) { return "[object Array]" === c.call(e) }, v.isObject = function (e) { var t = typeof e; return "function" === t || "object" === t && !!e }, v.each(["Arguments", "Function", "String", "Number", "Date", "RegExp", "Error"], function (e) { v["is" + e] = function (t) { return c.call(t) === "[object " + e + "]" } }), v.isArguments(arguments) || (v.isArguments = function (e) { return v.has(e, "callee") }), "function" != typeof /./ && "object" != typeof Int8Array && (v.isFunction = function (e) { return "function" == typeof e || !1 }), v.isFinite = function (e) { return isFinite(e) && !isNaN(parseFloat(e)) }, v.isNaN = function (e) { return v.isNumber(e) && e !== +e }, v.isBoolean = function (e) { return !0 === e || !1 === e || "[object Boolean]" === c.call(e) }, v.isNull = function (e) { return null === e }, v.isUndefined = function (e) { return void 0 === e }, v.has = function (e, t) { return null != e && d.call(e, t) }, v.noConflict = function () { return n._ = i, this }, v.identity = function (e) { return e }, v.constant = function (e) { return function () { return e } }, v.noop = function () { }, v.property = x, v.propertyOf = function (e) { return null == e ? function () { } : function (t) { return e[t] } }, v.matcher = v.matches = function (e) { return e = v.extendOwn({}, e), function (t) { return v.isMatch(t, e) } }, v.times = function (e, t, n) { var r = Array(Math.max(0, e)); t = y(t, n, 1); for (var i = 0; i < e; i++)r[i] = t(i); return r }, v.random = function (e, t) { return null == t && (t = e, e = 0), e + Math.floor(Math.random() * (t - e + 1)) }, v.now = Date.now || function () { return (new Date).getTime() }; var R = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#x27;", "`": "&#x60;" }, O = v.invert(R), D = function (e) { var t = function (t) { return e[t] }, n = "(?:" + v.keys(e).join("|") + ")", r = RegExp(n), i = RegExp(n, "g"); return function (e) { return e = null == e ? "" : "" + e, r.test(e) ? e.replace(i, t) : e } }; v.escape = D(R), v.unescape = D(O), v.result = function (e, t, n) { var r = null == e ? void 0 : e[t]; return void 0 === r && (r = n), v.isFunction(r) ? r.call(e) : r }; var F = 0; v.uniqueId = function (e) { var t = ++F + ""; return e ? e + t : t }, v.templateSettings = { evaluate: /<%([\s\S]+?)%>/g, interpolate: /<%=([\s\S]+?)%>/g, escape: /<%-([\s\S]+?)%>/g }; var I = /(.)^/, N = { "'": "'", "\\": "\\", "\r": "r", "\n": "n", "\u2028": "u2028", "\u2029": "u2029" }, $ = /\\|'|\r|\n|\u2028|\u2029/g, B = function (e) { return "\\" + N[e] }; v.template = function (e, t, n) { !t && n && (t = n), t = v.defaults({}, t, v.templateSettings); var r = RegExp([(t.escape || I).source, (t.interpolate || I).source, (t.evaluate || I).source].join("|") + "|$", "g"), i = 0, o = "__p+='"; e.replace(r, function (t, n, r, a, s) { return o += e.slice(i, s).replace($, B), i = s + t.length, n ? o += "'+\n((__t=(" + n + "))==null?'':_.escape(__t))+\n'" : r ? o += "'+\n((__t=(" + r + "))==null?'':__t)+\n'" : a && (o += "';\n" + a + "\n__p+='"), t }), o += "';\n", t.variable || (o = "with(obj||{}){\n" + o + "}\n"), o = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + o + "return __p;\n"; try { var a = new Function(t.variable || "obj", "_", o) } catch (e) { throw e.source = o, e } var s = function (e) { return a.call(this, e, v) }, l = t.variable || "obj"; return s.source = "function(" + l + "){\n" + o + "}", s }, v.chain = function (e) { var t = v(e); return t._chain = !0, t }; var z = function (e, t) { return e._chain ? v(t).chain() : t }; v.mixin = function (e) { v.each(v.functions(e), function (t) { var n = v[t] = e[t]; v.prototype[t] = function () { var e = [this._wrapped]; return l.apply(e, arguments), z(this, n.apply(v, e)) } }) }, v.mixin(v), v.each(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function (e) { var t = o[e]; v.prototype[e] = function () { var n = this._wrapped; return t.apply(n, arguments), "shift" !== e && "splice" !== e || 0 !== n.length || delete n[0], z(this, n) } }), v.each(["concat", "join", "slice"], function (e) { var t = o[e]; v.prototype[e] = function () { return z(this, t.apply(this._wrapped, arguments)) } }), v.prototype.value = function () { return this._wrapped }, v.prototype.valueOf = v.prototype.toJSON = v.prototype.value, v.prototype.toString = function () { return "" + this._wrapped }, void 0 === (r = function () { return v }.apply(t, [])) || (e.exports = r) }).call(this) }, function (e, t, n) { (function (r) { var i, o, a; a = "object" == typeof self && self.self == self && self || "object" == typeof r && r.global == r && r, i = [n(0), n(17), t], void 0 === (o = function (e, t, n) { a.Backbone = function (e, t, n, r) { var i = e.Backbone, o = Array.prototype.slice; t.VERSION = "1.2.3", t.$ = r, t.noConflict = function () { return e.Backbone = i, this }, t.emulateHTTP = !1, t.emulateJSON = !1; var a = function (e, t, r) { n.each(t, function (t, i) { n[i] && (e.prototype[i] = function (e, t, r) { switch (e) { case 1: return function () { return n[t](this[r]) }; case 2: return function (e) { return n[t](this[r], e) }; case 3: return function (e, i) { return n[t](this[r], s(e, this), i) }; case 4: return function (e, i, o) { return n[t](this[r], s(e, this), i, o) }; default: return function () { var e = o.call(arguments); return e.unshift(this[r]), n[t].apply(n, e) } } }(t, i, r)) }) }, s = function (e, t) { return n.isFunction(e) ? e : n.isObject(e) && !t._isModel(e) ? l(e) : n.isString(e) ? function (t) { return t.get(e) } : e }, l = function (e) { var t = n.matches(e); return function (e) { return t(e.attributes) } }, u = t.Events = {}, c = /\s+/, d = function (e, t, r, i, o) { var a, s = 0; if (r && "object" == typeof r) { void 0 !== i && "context" in o && void 0 === o.context && (o.context = i); for (a = n.keys(r); s < a.length; s++)t = d(e, t, a[s], r[a[s]], o) } else if (r && c.test(r)) for (a = r.split(c); s < a.length; s++)t = e(t, a[s], i, o); else t = e(t, r, i, o); return t }; u.on = function (e, t, n) { return f(this, e, t, n) }; var f = function (e, t, n, r, i) { if (e._events = d(h, e._events || {}, t, n, { context: r, ctx: e, listening: i }), i) { var o = e._listeners || (e._listeners = {}); o[i.id] = i } return e }; u.listenTo = function (e, t, r) { if (!e) return this; var i = e._listenId || (e._listenId = n.uniqueId("l")), o = this._listeningTo || (this._listeningTo = {}), a = o[i]; if (!a) { var s = this._listenId || (this._listenId = n.uniqueId("l")); a = o[i] = { obj: e, objId: i, id: s, listeningTo: o, count: 0 } } return f(e, t, r, this, a), this }; var h = function (e, t, n, r) { if (n) { var i = e[t] || (e[t] = []), o = r.context, a = r.ctx, s = r.listening; s && s.count++, i.push({ callback: n, context: o, ctx: o || a, listening: s }) } return e }; u.off = function (e, t, n) { return this._events ? (this._events = d(p, this._events, e, t, { context: n, listeners: this._listeners }), this) : this }, u.stopListening = function (e, t, r) { var i = this._listeningTo; if (!i) return this; for (var o = e ? [e._listenId] : n.keys(i), a = 0; a < o.length; a++) { var s = i[o[a]]; if (!s) break; s.obj.off(t, r, this) } return n.isEmpty(i) && (this._listeningTo = void 0), this }; var p = function (e, t, r, i) { if (e) { var o, a = 0, s = i.context, l = i.listeners; if (t || r || s) { for (var u = t ? [t] : n.keys(e); a < u.length; a++) { t = u[a]; var c = e[t]; if (!c) break; for (var d = [], f = 0; f < c.length; f++) { var h = c[f]; r && r !== h.callback && r !== h.callback._callback || s && s !== h.context ? d.push(h) : (o = h.listening) && 0 == --o.count && (delete l[o.id], delete o.listeningTo[o.objId]) } d.length ? e[t] = d : delete e[t] } return n.size(e) ? e : void 0 } for (var p = n.keys(l); a < p.length; a++)o = l[p[a]], delete l[o.id], delete o.listeningTo[o.objId] } }; u.once = function (e, t, r) { var i = d(m, {}, e, t, n.bind(this.off, this)); return this.on(i, void 0, r) }, u.listenToOnce = function (e, t, r) { var i = d(m, {}, t, r, n.bind(this.stopListening, this, e)); return this.listenTo(e, i) }; var m = function (e, t, r, i) { if (r) { var o = e[t] = n.once(function () { i(t, o), r.apply(this, arguments) }); o._callback = r } return e }; u.trigger = function (e) { if (!this._events) return this; for (var t = Math.max(0, arguments.length - 1), n = Array(t), r = 0; r < t; r++)n[r] = arguments[r + 1]; return d(g, this._events, e, void 0, n), this }; var g = function (e, t, n, r) { if (e) { var i = e[t], o = e.all; i && o && (o = o.slice()), i && v(i, r), o && v(o, [t].concat(r)) } return e }, v = function (e, t) { var n, r = -1, i = e.length, o = t[0], a = t[1], s = t[2]; switch (t.length) { case 0: for (; ++r < i;)(n = e[r]).callback.call(n.ctx); return; case 1: for (; ++r < i;)(n = e[r]).callback.call(n.ctx, o); return; case 2: for (; ++r < i;)(n = e[r]).callback.call(n.ctx, o, a); return; case 3: for (; ++r < i;)(n = e[r]).callback.call(n.ctx, o, a, s); return; default: for (; ++r < i;)(n = e[r]).callback.apply(n.ctx, t); return } }; u.bind = u.on, u.unbind = u.off, n.extend(t, u); var y = t.Model = function (e, t) { var r = e || {}; t || (t = {}), this.cid = n.uniqueId(this.cidPrefix), this.attributes = {}, t.collection && (this.collection = t.collection), t.parse && (r = this.parse(r, t) || {}), r = n.defaults({}, r, n.result(this, "defaults")), this.set(r, t), this.changed = {}, this.initialize.apply(this, arguments) }; n.extend(y.prototype, u, { changed: null, validationError: null, idAttribute: "id", cidPrefix: "c", initialize: function () { }, toJSON: function (e) { return n.clone(this.attributes) }, sync: function () { return t.sync.apply(this, arguments) }, get: function (e) { return this.attributes[e] }, escape: function (e) { return n.escape(this.get(e)) }, has: function (e) { return null != this.get(e) }, matches: function (e) { return !!n.iteratee(e, this)(this.attributes) }, set: function (e, t, r) { if (null == e) return this; var i; if ("object" == typeof e ? (i = e, r = t) : (i = {})[e] = t, r || (r = {}), !this._validate(i, r)) return !1; var o = r.unset, a = r.silent, s = [], l = this._changing; this._changing = !0, l || (this._previousAttributes = n.clone(this.attributes), this.changed = {}); var u = this.attributes, c = this.changed, d = this._previousAttributes; for (var f in i) t = i[f], n.isEqual(u[f], t) || s.push(f), n.isEqual(d[f], t) ? delete c[f] : c[f] = t, o ? delete u[f] : u[f] = t; if (this.id = this.get(this.idAttribute), !a) { s.length && (this._pending = r); for (var h = 0; h < s.length; h++)this.trigger("change:" + s[h], this, u[s[h]], r) } if (l) return this; if (!a) for (; this._pending;)r = this._pending, this._pending = !1, this.trigger("change", this, r); return this._pending = !1, this._changing = !1, this }, unset: function (e, t) { return this.set(e, void 0, n.extend({}, t, { unset: !0 })) }, clear: function (e) { var t = {}; for (var r in this.attributes) t[r] = void 0; return this.set(t, n.extend({}, e, { unset: !0 })) }, hasChanged: function (e) { return null == e ? !n.isEmpty(this.changed) : n.has(this.changed, e) }, changedAttributes: function (e) { if (!e) return !!this.hasChanged() && n.clone(this.changed); var t = this._changing ? this._previousAttributes : this.attributes, r = {}; for (var i in e) { var o = e[i]; n.isEqual(t[i], o) || (r[i] = o) } return !!n.size(r) && r }, previous: function (e) { return null != e && this._previousAttributes ? this._previousAttributes[e] : null }, previousAttributes: function () { return n.clone(this._previousAttributes) }, fetch: function (e) { var t = this, r = (e = n.extend({ parse: !0 }, e)).success; return e.success = function (n) { var i = e.parse ? t.parse(n, e) : n; if (!t.set(i, e)) return !1; r && r.call(e.context, t, n, e), t.trigger("sync", t, n, e) }, N(this, e), this.sync("read", this, e) }, save: function (e, t, r) { var i; null == e || "object" == typeof e ? (i = e, r = t) : (i = {})[e] = t; var o = (r = n.extend({ validate: !0, parse: !0 }, r)).wait; if (i && !o) { if (!this.set(i, r)) return !1 } else if (!this._validate(i, r)) return !1; var a = this, s = r.success, l = this.attributes; r.success = function (e) { a.attributes = l; var t = r.parse ? a.parse(e, r) : e; if (o && (t = n.extend({}, i, t)), t && !a.set(t, r)) return !1; s && s.call(r.context, a, e, r), a.trigger("sync", a, e, r) }, N(this, r), i && o && (this.attributes = n.extend({}, l, i)); var u = this.isNew() ? "create" : r.patch ? "patch" : "update"; "patch" !== u || r.attrs || (r.attrs = i); var c = this.sync(u, this, r); return this.attributes = l, c }, destroy: function (e) { var t = this, r = (e = e ? n.clone(e) : {}).success, i = e.wait, o = function () { t.stopListening(), t.trigger("destroy", t, t.collection, e) }; e.success = function (n) { i && o(), r && r.call(e.context, t, n, e), t.isNew() || t.trigger("sync", t, n, e) }; var a = !1; return this.isNew() ? n.defer(e.success) : (N(this, e), a = this.sync("delete", this, e)), i || o(), a }, url: function () { var e = n.result(this, "urlRoot") || n.result(this.collection, "url") || I(); if (this.isNew()) return e; var t = this.get(this.idAttribute); return e.replace(/[^\/]$/, "$&/") + encodeURIComponent(t) }, parse: function (e, t) { return e }, clone: function () { return new this.constructor(this.attributes) }, isNew: function () { return !this.has(this.idAttribute) }, isValid: function (e) { return this._validate({}, n.defaults({ validate: !0 }, e)) }, _validate: function (e, t) { if (!t.validate || !this.validate) return !0; e = n.extend({}, this.attributes, e); var r = this.validationError = this.validate(e, t) || null; return !r || (this.trigger("invalid", this, r, n.extend(t, { validationError: r })), !1) } }), a(y, { keys: 1, values: 1, pairs: 1, invert: 1, pick: 0, omit: 0, chain: 1, isEmpty: 1 }, "attributes"); var _ = t.Collection = function (e, t) { t || (t = {}), t.model && (this.model = t.model), void 0 !== t.comparator && (this.comparator = t.comparator), this._reset(), this.initialize.apply(this, arguments), e && this.reset(e, n.extend({ silent: !0 }, t)) }, b = { add: !0, remove: !0, merge: !0 }, w = { add: !0, remove: !1 }, x = function (e, t, n) { n = Math.min(Math.max(n, 0), e.length); for (var r = Array(e.length - n), i = t.length, o = 0; o < r.length; o++)r[o] = e[o + n]; for (o = 0; o < i; o++)e[o + n] = t[o]; for (o = 0; o < r.length; o++)e[o + i + n] = r[o] }; n.extend(_.prototype, u, { model: y, initialize: function () { }, toJSON: function (e) { return this.map(function (t) { return t.toJSON(e) }) }, sync: function () { return t.sync.apply(this, arguments) }, add: function (e, t) { return this.set(e, n.extend({ merge: !1 }, t, w)) }, remove: function (e, t) { t = n.extend({}, t); var r = !n.isArray(e); e = r ? [e] : n.clone(e); var i = this._removeModels(e, t); return !t.silent && i && this.trigger("update", this, t), r ? i[0] : i }, set: function (e, t) { if (null != e) { (t = n.defaults({}, t, b)).parse && !this._isModel(e) && (e = this.parse(e, t)); var r = !n.isArray(e); e = r ? [e] : e.slice(); var i = t.at; null != i && (i = +i), i < 0 && (i += this.length + 1); for (var o, a = [], s = [], l = [], u = {}, c = t.add, d = t.merge, f = t.remove, h = !1, p = this.comparator && null == i && !1 !== t.sort, m = n.isString(this.comparator) ? this.comparator : null, g = 0; g < e.length; g++) { o = e[g]; var v = this.get(o); if (v) { if (d && o !== v) { var y = this._isModel(o) ? o.attributes : o; t.parse && (y = v.parse(y, t)), v.set(y, t), p && !h && (h = v.hasChanged(m)) } u[v.cid] || (u[v.cid] = !0, a.push(v)), e[g] = v } else c && (o = e[g] = this._prepareModel(o, t)) && (s.push(o), this._addReference(o, t), u[o.cid] = !0, a.push(o)) } if (f) { for (g = 0; g < this.length; g++)o = this.models[g], u[o.cid] || l.push(o); l.length && this._removeModels(l, t) } var _ = !1, w = !p && c && f; if (a.length && w ? (_ = this.length != a.length || n.some(this.models, function (e, t) { return e !== a[t] }), this.models.length = 0, x(this.models, a, 0), this.length = this.models.length) : s.length && (p && (h = !0), x(this.models, s, null == i ? this.length : i), this.length = this.models.length), h && this.sort({ silent: !0 }), !t.silent) { for (g = 0; g < s.length; g++)null != i && (t.index = i + g), (o = s[g]).trigger("add", o, this, t); (h || _) && this.trigger("sort", this, t), (s.length || l.length) && this.trigger("update", this, t) } return r ? e[0] : e } }, reset: function (e, t) { t = t ? n.clone(t) : {}; for (var r = 0; r < this.models.length; r++)this._removeReference(this.models[r], t); return t.previousModels = this.models, this._reset(), e = this.add(e, n.extend({ silent: !0 }, t)), t.silent || this.trigger("reset", this, t), e }, push: function (e, t) { return this.add(e, n.extend({ at: this.length }, t)) }, pop: function (e) { var t = this.at(this.length - 1); return this.remove(t, e) }, unshift: function (e, t) { return this.add(e, n.extend({ at: 0 }, t)) }, shift: function (e) { var t = this.at(0); return this.remove(t, e) }, slice: function () { return o.apply(this.models, arguments) }, get: function (e) { if (null != e) { var t = this.modelId(this._isModel(e) ? e.attributes : e); return this._byId[e] || this._byId[t] || this._byId[e.cid] } }, at: function (e) { return e < 0 && (e += this.length), this.models[e] }, where: function (e, t) { return this[t ? "find" : "filter"](e) }, findWhere: function (e) { return this.where(e, !0) }, sort: function (e) { var t = this.comparator; if (!t) throw new Error("Cannot sort a set without a comparator"); e || (e = {}); var r = t.length; return n.isFunction(t) && (t = n.bind(t, this)), 1 === r || n.isString(t) ? this.models = this.sortBy(t) : this.models.sort(t), e.silent || this.trigger("sort", this, e), this }, pluck: function (e) { return n.invoke(this.models, "get", e) }, fetch: function (e) { var t = (e = n.extend({ parse: !0 }, e)).success, r = this; return e.success = function (n) { var i = e.reset ? "reset" : "set"; r[i](n, e), t && t.call(e.context, r, n, e), r.trigger("sync", r, n, e) }, N(this, e), this.sync("read", this, e) }, create: function (e, t) { var r = (t = t ? n.clone(t) : {}).wait; if (!(e = this._prepareModel(e, t))) return !1; r || this.add(e, t); var i = this, o = t.success; return t.success = function (e, t, n) { r && i.add(e, n), o && o.call(n.context, e, t, n) }, e.save(null, t), e }, parse: function (e, t) { return e }, clone: function () { return new this.constructor(this.models, { model: this.model, comparator: this.comparator }) }, modelId: function (e) { return e[this.model.prototype.idAttribute || "id"] }, _reset: function () { this.length = 0, this.models = [], this._byId = {} }, _prepareModel: function (e, t) { if (this._isModel(e)) return e.collection || (e.collection = this), e; (t = t ? n.clone(t) : {}).collection = this; var r = new this.model(e, t); return r.validationError ? (this.trigger("invalid", this, r.validationError, t), !1) : r }, _removeModels: function (e, t) { for (var n = [], r = 0; r < e.length; r++) { var i = this.get(e[r]); if (i) { var o = this.indexOf(i); this.models.splice(o, 1), this.length--, t.silent || (t.index = o, i.trigger("remove", i, this, t)), n.push(i), this._removeReference(i, t) } } return !!n.length && n }, _isModel: function (e) { return e instanceof y }, _addReference: function (e, t) { this._byId[e.cid] = e; var n = this.modelId(e.attributes); null != n && (this._byId[n] = e), e.on("all", this._onModelEvent, this) }, _removeReference: function (e, t) { delete this._byId[e.cid]; var n = this.modelId(e.attributes); null != n && delete this._byId[n], this === e.collection && delete e.collection, e.off("all", this._onModelEvent, this) }, _onModelEvent: function (e, t, n, r) { if ("add" !== e && "remove" !== e || n === this) { if ("destroy" === e && this.remove(t, r), "change" === e) { var i = this.modelId(t.previousAttributes()), o = this.modelId(t.attributes); i !== o && (null != i && delete this._byId[i], null != o && (this._byId[o] = t)) } this.trigger.apply(this, arguments) } } }), a(_, { forEach: 3, each: 3, map: 3, collect: 3, reduce: 4, foldl: 4, inject: 4, reduceRight: 4, foldr: 4, find: 3, detect: 3, filter: 3, select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3, contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3, head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3, without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3, isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3, sortBy: 3, indexBy: 3 }, "models"); var C = t.View = function (e) { this.cid = n.uniqueId("view"), n.extend(this, n.pick(e, k)), this._ensureElement(), this.initialize.apply(this, arguments) }, S = /^(\S+)\s*(.*)$/, k = ["model", "collection", "el", "id", "attributes", "className", "tagName", "events"]; n.extend(C.prototype, u, { tagName: "div", $: function (e) { return this.$el.find(e) }, initialize: function () { }, render: function () { return this }, remove: function () { return this._removeElement(), this.stopListening(), this }, _removeElement: function () { this.$el.remove() }, setElement: function (e) { return this.undelegateEvents(), this._setElement(e), this.delegateEvents(), this }, _setElement: function (e) { this.$el = e instanceof t.$ ? e : t.$(e), this.el = this.$el[0] }, delegateEvents: function (e) { if (e || (e = n.result(this, "events")), !e) return this; for (var t in this.undelegateEvents(), e) { var r = e[t]; if (n.isFunction(r) || (r = this[r]), r) { var i = t.match(S); this.delegate(i[1], i[2], n.bind(r, this)) } } return this }, delegate: function (e, t, n) { return this.$el.on(e + ".delegateEvents" + this.cid, t, n), this }, undelegateEvents: function () { return this.$el && this.$el.off(".delegateEvents" + this.cid), this }, undelegate: function (e, t, n) { return this.$el.off(e + ".delegateEvents" + this.cid, t, n), this }, _createElement: function (e) { return document.createElement(e) }, _ensureElement: function () { if (this.el) this.setElement(n.result(this, "el")); else { var e = n.extend({}, n.result(this, "attributes")); this.id && (e.id = n.result(this, "id")), this.className && (e.class = n.result(this, "className")), this.setElement(this._createElement(n.result(this, "tagName"))), this._setAttributes(e) } }, _setAttributes: function (e) { this.$el.attr(e) } }), t.sync = function (e, r, i) { var o = T[e]; n.defaults(i || (i = {}), { emulateHTTP: t.emulateHTTP, emulateJSON: t.emulateJSON }); var a = { type: o, dataType: "json" }; if (i.url || (a.url = n.result(r, "url") || I()), null != i.data || !r || "create" !== e && "update" !== e && "patch" !== e || (a.contentType = "application/json", a.data = JSON.stringify(i.attrs || r.toJSON(i))), i.emulateJSON && (a.contentType = "application/x-www-form-urlencoded", a.data = a.data ? { model: a.data } : {}), i.emulateHTTP && ("PUT" === o || "DELETE" === o || "PATCH" === o)) { a.type = "POST", i.emulateJSON && (a.data._method = o); var s = i.beforeSend; i.beforeSend = function (e) { if (e.setRequestHeader("X-HTTP-Method-Override", o), s) return s.apply(this, arguments) } } "GET" === a.type || i.emulateJSON || (a.processData = !1); var l = i.error; i.error = function (e, t, n) { i.textStatus = t, i.errorThrown = n, l && l.call(i.context, e, t, n) }; var u = i.xhr = t.ajax(n.extend(a, i)); return r.trigger("request", r, u, i), u }; var T = { create: "POST", update: "PUT", patch: "PATCH", delete: "DELETE", read: "GET" }; t.ajax = function () { return t.$.ajax.apply(t.$, arguments) }; var L = t.Router = function (e) { e || (e = {}), e.routes && (this.routes = e.routes), this._bindRoutes(), this.initialize.apply(this, arguments) }, M = /\((.*?)\)/g, E = /(\(\?)?:\w+/g, A = /\*\w+/g, P = /[\-{}\[\]+?.,\\\^$|#\s]/g; n.extend(L.prototype, u, { initialize: function () { }, route: function (e, r, i) { n.isRegExp(e) || (e = this._routeToRegExp(e)), n.isFunction(r) && (i = r, r = ""), i || (i = this[r]); var o = this; return t.history.route(e, function (n) { var a = o._extractParameters(e, n); !1 !== o.execute(i, a, r) && (o.trigger.apply(o, ["route:" + r].concat(a)), o.trigger("route", r, a), t.history.trigger("route", o, r, a)) }), this }, execute: function (e, t, n) { e && e.apply(this, t) }, navigate: function (e, n) { return t.history.navigate(e, n), this }, _bindRoutes: function () { if (this.routes) { this.routes = n.result(this, "routes"); for (var e, t = n.keys(this.routes); null != (e = t.pop());)this.route(e, this.routes[e]) } }, _routeToRegExp: function (e) { return e = e.replace(P, "\\$&").replace(M, "(?:$1)?").replace(E, function (e, t) { return t ? e : "([^/?]+)" }).replace(A, "([^?]*?)"), new RegExp("^" + e + "(?:\\?([\\s\\S]*))?$") }, _extractParameters: function (e, t) { var r = e.exec(t).slice(1); return n.map(r, function (e, t) { return t === r.length - 1 ? e || null : e ? decodeURIComponent(e) : null }) } }); var R = t.History = function () { this.handlers = [], this.checkUrl = n.bind(this.checkUrl, this), "undefined" != typeof window && (this.location = window.location, this.history = window.history) }, O = /^[#\/]|\s+$/g, D = /^\/+|\/+$/g, F = /#.*$/; R.started = !1, n.extend(R.prototype, u, { interval: 50, atRoot: function () { var e = this.location.pathname.replace(/[^\/]$/, "$&/"); return e === this.root && !this.getSearch() }, matchRoot: function () { var e = this.decodeFragment(this.location.pathname), t = e.slice(0, this.root.length - 1) + "/"; return t === this.root }, decodeFragment: function (e) { return decodeURI(e.replace(/%25/g, "%2525")) }, getSearch: function () { var e = this.location.href.replace(/#.*/, "").match(/\?.+/); return e ? e[0] : "" }, getHash: function (e) { var t = (e || this).location.href.match(/#(.*)$/); return t ? t[1] : "" }, getPath: function () { var e = this.decodeFragment(this.location.pathname + this.getSearch()).slice(this.root.length - 1); return "/" === e.charAt(0) ? e.slice(1) : e }, getFragment: function (e) { return null == e && (e = this._usePushState || !this._wantsHashChange ? this.getPath() : this.getHash()), e.replace(O, "") }, start: function (e) { if (R.started) throw new Error("Backbone.history has already been started"); if (R.started = !0, this.options = n.extend({ root: "/" }, this.options, e), this.root = this.options.root, this._wantsHashChange = !1 !== this.options.hashChange, this._hasHashChange = "onhashchange" in window && (void 0 === document.documentMode || document.documentMode > 7), this._useHashChange = this._wantsHashChange && this._hasHashChange, this._wantsPushState = !!this.options.pushState, this._hasPushState = !(!this.history || !this.history.pushState), this._usePushState = this._wantsPushState && this._hasPushState, this.fragment = this.getFragment(), this.root = ("/" + this.root + "/").replace(D, "/"), this._wantsHashChange && this._wantsPushState) { if (!this._hasPushState && !this.atRoot()) { var t = this.root.slice(0, -1) || "/"; return this.location.replace(t + "#" + this.getPath()), !0 } this._hasPushState && this.atRoot() && this.navigate(this.getHash(), { replace: !0 }) } if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) { this.iframe = document.createElement("iframe"), this.iframe.src = "javascript:0", this.iframe.style.display = "none", this.iframe.tabIndex = -1; var r = document.body, i = r.insertBefore(this.iframe, r.firstChild).contentWindow; i.document.open(), i.document.close(), i.location.hash = "#" + this.fragment } var o = window.addEventListener || function (e, t) { return attachEvent("on" + e, t) }; if (this._usePushState ? o("popstate", this.checkUrl, !1) : this._useHashChange && !this.iframe ? o("hashchange", this.checkUrl, !1) : this._wantsHashChange && (this._checkUrlInterval = setInterval(this.checkUrl, this.interval)), !this.options.silent) return this.loadUrl() }, stop: function () { var e = window.removeEventListener || function (e, t) { return detachEvent("on" + e, t) }; this._usePushState ? e("popstate", this.checkUrl, !1) : this._useHashChange && !this.iframe && e("hashchange", this.checkUrl, !1), this.iframe && (document.body.removeChild(this.iframe), this.iframe = null), this._checkUrlInterval && clearInterval(this._checkUrlInterval), R.started = !1 }, route: function (e, t) { this.handlers.unshift({ route: e, callback: t }) }, checkUrl: function (e) { var t = this.getFragment(); if (t === this.fragment && this.iframe && (t = this.getHash(this.iframe.contentWindow)), t === this.fragment) return !1; this.iframe && this.navigate(t), this.loadUrl() }, loadUrl: function (e) { return !!this.matchRoot() && (e = this.fragment = this.getFragment(e), n.some(this.handlers, function (t) { if (t.route.test(e)) return t.callback(e), !0 })) }, navigate: function (e, t) { if (!R.started) return !1; t && !0 !== t || (t = { trigger: !!t }), e = this.getFragment(e || ""); var n = this.root; "" !== e && "?" !== e.charAt(0) || (n = n.slice(0, -1) || "/"); var r = n + e; if (e = this.decodeFragment(e.replace(F, "")), this.fragment !== e) { if (this.fragment = e, this._usePushState) this.history[t.replace ? "replaceState" : "pushState"]({}, document.title, r); else { if (!this._wantsHashChange) return this.location.assign(r); if (this._updateHash(this.location, e, t.replace), this.iframe && e !== this.getHash(this.iframe.contentWindow)) { var i = this.iframe.contentWindow; t.replace || (i.document.open(), i.document.close()), this._updateHash(i.location, e, t.replace) } } return t.trigger ? this.loadUrl(e) : void 0 } }, _updateHash: function (e, t, n) { if (n) { var r = e.href.replace(/(javascript:|#).*$/, ""); e.replace(r + "#" + t) } else e.hash = "#" + t } }), t.history = new R, y.extend = _.extend = L.extend = C.extend = R.extend = function (e, t) { var r, i = this; r = e && n.has(e, "constructor") ? e.constructor : function () { return i.apply(this, arguments) }, n.extend(r, i, t); var o = function () { this.constructor = r }; return o.prototype = i.prototype, r.prototype = new o, e && n.extend(r.prototype, e), r.__super__ = i.prototype, r }; var I = function () { throw new Error('A "url" property or function must be specified') }, N = function (e, t) { var n = t.error; t.error = function (r) { n && n.call(t.context, e, r, t), e.trigger("error", e, r, t) } }; return t }(a, n, e, t) }.apply(t, i)) || (e.exports = o) }).call(this, n(30)) }, function (e, t, n) { "use strict"; var r = n(17), i = n(0), o = n(1), a = o.Model.extend({ initialize: function initialize(e) { return i.bindAll(this, "fetch", "save", "retrigger"), o.Model.prototype.initialize.call(this, e) }, fetch: function fetch(e) { var t = this; this.trigger("loadModelStarted"), r.when(o.Model.prototype.fetch.call(this, e)).done(function (e) { t.trigger("loadModelCompleted", e, t) }).fail(function (e) { t.trigger("loadModelFailed", e, t) }) }, setIdAttribute: function setIdAttribute(e) { this.idAttribute = e }, retrigger: function retrigger(e, t, n) { n || (n = e); var r = this; t.bind && t.bind(e, function () { r.trigger(n) }, r) }, save: function save(e, t) { var n = this; t && t.silent || this.trigger("saving"); var i = o.Model.prototype.save.apply(this, arguments); return r.when(i).done(function () { t && t.silent || n.trigger("saved") }).fail(function () { t && t.silent || n.trigger("errorSaving") }), i } }); e.exports = a }, function (e, t, n) { "use strict"; var r = n(4); e.exports = function CartoValidationError(e, t, n) { return new r({ origin: "validation", type: e, message: t }, n) } }, function (e, t, n) { "use strict"; var r = n(143), i = n(138), o = "unexpected error", a = "generic"; e.exports = function CartoError(e, t) { t = t || {}; var n = Object.create(Error.prototype); n.message = e && e.message || o, n.origin = e && e.origin || a, n.type = e && e.type || "", function _isWindshaftError(e) { return e && "windshaft" === e.origin }(e) && (n = function _transformWindshaftError(e, t, n) { var r = Object.create(Error.prototype); return r.message = e.message, r.origin = e.origin, r.type = e.type, "layer" === e.type && t && (r.layer = t.findById(e.layerId)), "analysis" === e.type && (n && (r.source = n, r.sourceId = n.getId && n.getId()), e.analysisId && (r.sourceId = e.analysisId)), r }(e, t.layers, t.analysis)), function _isAjaxError(e) { return e && e.responseText }(e) && (n = function _transformAjaxError(e) { var t = Object.create(Error.prototype); return t.message = function _handleAjaxResponse(e) { var t = ""; try { var n = JSON.parse(e.responseText); t = n.errors[0] } catch (e) { } return t || o }(e), t.origin = "ajax", t.type = e.statusText, t }(e)); var s = r.getExtraFields(n); return n.message = s.friendlyMessage, n.errorCode = s.errorCode, n.name = "CartoError", n.stack = (new Error).stack, n.originalError = e, i.track(n), n } }, function (e, t, n) { "use strict"; var r = n(0), i = { COUNT: "count", SUM: "sum", AVG: "avg", MAX: "max", MIN: "min" }; var o = { AUTO: "auto", MILLENNIUM: "millennium", CENTURY: "century", DECADE: "decade", YEAR: "year", QUARTER: "quarter", MONTH: "month", WEEK: "week", DAY: "day", HOUR: "hour", MINUTE: "minute" }; e.exports = { operation: i, status: { NOT_LOADED: "notLoaded", LOADING: "loading", LOADED: "loaded", ERROR: "error" }, timeAggregation: o, isValidOperation: function isValidOperation(e) { return r.contains(i, e) }, isValidTimeAggregation: function isValidTimeAggregation(e) { return r.contains(o, e) }, ATTRIBUTION: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/about-carto/">CARTO</a>' } }, function (e, t, n) { "use strict"; var r = n(0), i = n(1), o = n(3); function Base() { } r.extend(Base.prototype, i.Events), Base.prototype._getValidationError = function (e) { return new o("filter", e) }, e.exports = Base }, function (e, t, n) { "use strict"; var r = n(0), i = { isCORSSupported: function () { return "withCredentials" in new XMLHttpRequest }, array2hex: function (e) { for (var t = [], n = 0; n < e.length; ++n)t.push(String.fromCharCode(e[n] + 128)); return i.btoa(t.join("")) }, btoa: function (e) { return "function" == typeof window.btoa ? i.encodeBase64Native(e) : i.encodeBase64(e) }, encodeBase64Native: function (e) { return btoa(e) }, encodeBase64: function (e) { var t, n, r, i, o, a = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", s = 0, l = 0, u = "", c = []; if (!e) return e; do { t = (o = e.charCodeAt(s++) << 16 | e.charCodeAt(s++) << 8 | e.charCodeAt(s++)) >> 18 & 63, n = o >> 12 & 63, r = o >> 6 & 63, i = 63 & o, c[l++] = a.charAt(t) + a.charAt(n) + a.charAt(r) + a.charAt(i) } while (s < e.length); u = c.join(""); var d = e.length % 3; return (d ? u.slice(0, d - 3) : u) + "===".slice(d || 3) }, uniqueCallbackName: function (e) { return i._callback_c = i._callback_c || 0, ++i._callback_c, i.crc32(e) + "_" + i._callback_c }, crc32: function (e) { for (var t = i._crcTable || (i._crcTable = i._makeCRCTable()), n = -1, r = 0, o = e.length; r < o; ++r)n = n >>> 8 ^ t[255 & (n ^ e.charCodeAt(r))]; return (-1 ^ n) >>> 0 }, _makeCRCTable: function () { for (var e, t = [], n = 0; n < 256; ++n) { e = n; for (var r = 0; r < 8; ++r)e = 1 & e ? 3988292384 ^ e >>> 1 : e >>> 1; t[n] = e } return t }, _inferBrowser: function (e) { var t = {}; return e = e || "undefined" != typeof window && window.navigator.userAgent || "", !function detectIE() { var t = e.indexOf("MSIE "), n = e.indexOf("Trident/"); return t > -1 || n > -1 }() ? e.indexOf("Edge/") > -1 ? t.edge = e : e.indexOf("Chrome") > -1 ? t.chrome = e : e.indexOf("Firefox") > -1 ? t.firefox = e : e.indexOf("Opera") > -1 ? t.opera = e : e.indexOf("Safari") > -1 && (t.safari = e) : t.ie = { version: function getIEVersion() { return document.compatMode ? window.XMLHttpRequest ? document.querySelector ? document.addEventListener ? window.atob ? document.all ? 10 : 11 : 9 : 8 : 7 : 6 : 5 }() }, t } }; i.browser = i._inferBrowser(), i.isMobileDevice = function () { return /Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) }, i.supportsTouch = function () { return "ontouchstart" in window || navigator.msMaxTouchPoints }; var o = null; i.isWebGLSupported = function () { if (null === o) { var e = document.createElement("canvas"); o = !(!window.WebGLRenderingContext || !e.getContext("webgl") && !e.getContext("experimental-webgl")) } return o }, i.endsWith = function (e, t) { return -1 !== e.indexOf(t, e.length - t.length) }, i.checkRequiredOpts = function (e, t, n) { r.each(t, function (t) { if (r.isUndefined(e[t])) throw new Error(t + " is required" + (n ? " to initialize " + n : "")) }) }, i.isLeafletLoaded = function () { if (!window.L) throw new Error("Leaflet is required"); if (window.L.version < "1.0.0") throw new Error("Leaflet +1.0 is required") }, i.isGoogleMapsLoaded = function () { if (!window.google) throw new Error("Google Maps is required"); if (!window.google.maps) throw new Error("Google Maps is required"); if (window.google.maps.version < "3.31.0") throw new Error("Google Maps version should be >= 3.31") }, e.exports = i }, function (e, t, n) { "use strict"; e.exports = { BBOX: "bbox", CIRCLE: "circle", POLYGON: "polygon" } }, function (e, t, n) { "use strict"; var r = n(0), i = n(1), o = n(2), a = n(7), s = ["camshaftReference", "engine"], l = { PENDING: "pending", WAITING: "waiting", RUNNING: "running", FAILED: "failed", READY: "ready" }, u = o.extend({ initialize: function initialize(e, t) { t = t || {}, a.checkRequiredOpts(t, s, "AnalysisModel"), this._camshaftReference = t.camshaftReference, this._engine = t.engine, this._initBinds(), this._referencedBy = {} }, url: function url() { var url = this.get("url"); if (url) { if (this.get("apiKey")) url += "?api_key=" + this.get("apiKey"); else if (this.get("authToken")) { var e = this.get("authToken"); if (e instanceof Array) url += "?" + r.map(e, function (e) { return "auth_token[]=" + e }).join("&"); else url += "?auth_token=" + e } return url } }, setOk: function setOk() { this.unset("error") }, setError: function setError(e) { this.set({ error: e, status: l.FAILED }) }, _initBinds: function _initBinds() { this.bind("change:type", function () { this.unbind(null, null, this), this._initBinds(), this._reload() }, this), r.each(this.getParamNames(), function (e) { this.bind("change:" + e, this._reload, this) }, this), this.bind("change:status", function () { this._hadStatus() && this.isReady() && this.isSourceOfAnyModel() && this._reload() }, this) }, _hadStatus: function _hadStatus() { return this.previous("status") }, _reload: function _reload() { this._engine.reload({ error: this._onMapReloadError.bind(this) }) }, _onMapReloadError: function _onMapReloadError() { this.set("status", l.FAILED) }, remove: function remove() { this.trigger("destroy", this), this.stopListening() }, findAnalysisById: function findAnalysisById(e) { return this.get("id") === e ? this : r.chain(this._getSourceNames()).map(function (t) { var n = this.get(t); if (n) return n.findAnalysisById(e) }, this).compact().value()[0] }, _getSourceNames: function _getSourceNames() { return this._camshaftReference.getSourceNamesForAnalysisType(this.get("type")) }, isDone: function isDone() { return this._hasStatus([l.READY, l.FAILED]) }, isLoading: function isLoading() { return this._hasStatus([l.PENDING, l.WAITING, l.RUNNING]) }, isReady: function isReady() { return this._hasStatus(l.READY) }, isFailed: function isFailed() { return this._hasStatus(l.FAILED) }, _hasStatus: function _hasStatus(e) { return r.isArray(e) || (e = [e]), r.contains(e, this._getStatus()) }, _getStatus: function _getStatus() { return this.get("status") }, toJSON: function toJSON() { var e = r.pick(this.attributes, "id", "type"); e.params = r.pick(this.attributes, this.getParamNames()); var t = this._getSourceNames(); return r.each(t, function (t) { var n = {}, i = this.get(t); i && (n[t] = i.toJSON(), r.extend(e.params, n)) }, this), e }, getParamNames: function getParamNames() { return this._camshaftReference.getParamNamesForAnalysisType(this.get("type")) }, getNodes: function getNodes() { var e = [this]; return "source" !== this.get("type") && r.forEach(this._getSourceNames(), function (t) { var n = this.get(t); n && (e = e.concat(n.getNodes())) }, this), e }, getNodesCollection: function getNodesCollection() { return new i.Collection(this.getNodes()) }, equals: function equals(e) { return e instanceof u && this.get("id") === e.get("id") }, markAsSourceOf: function markAsSourceOf(e) { this._referencedBy[e.cid] = !0 }, isSourceOfAnyModel: function isSourceOfAnyModel() { return Object.keys(this._referencedBy).length > 0 }, isSourceOf: function isSourceOf(e) { return !!this._referencedBy[e.cid] }, unmarkAsSourceOf: function unmarkAsSourceOf(e) { delete this._referencedBy[e.cid] } }, { STATUS: l }); e.exports = u }, function (e, t, n) { "use strict"; var r = n(0), i = n(1), o = n(5).status, a = n(12), s = n(6), l = n(11), u = n(8), c = n(4), d = n(3); function Base() { } r.extend(Base.prototype, i.Events), Base.prototype.getStatus = function () { return this._status }, Base.prototype.isLoading = function () { return this._status === o.LOADING }, Base.prototype.isLoaded = function () { return this._status === o.LOADED }, Base.prototype.hasError = function () { return this._status === o.ERROR }, Base.prototype.enable = function () { return this._setEnabled(!0) }, Base.prototype.disable = function () { return this._setEnabled(!1) }, Base.prototype.isEnabled = function () { return this._enabled }, Base.prototype.getSource = function () { return this._source }, Base.prototype.setColumn = function (e) { return this._checkColumn(e), this._column = e, this._internalModel && this._internalModel.set("column", this._column), this }, Base.prototype.getColumn = function () { return this._column }, Base.prototype.addFilter = function (e) { return this._checkFilter(e), this._addSpatialFilter(e), this }, Base.prototype.removeFilter = function (e) { return this._checkFilter(e), this._removeSpatialFilter(e), this }, Base.prototype.hasFilter = function (e) { this._checkFilter(e); var t = e === this._boundingBoxFilter && this._internalModel && this._internalModel.get("sync_on_bbox_change"), n = e === this._circleFilter && this._internalModel && this._internalModel.get("sync_on_circle_change"), r = e === this._polygonFilter && this._internalModel && this._internalModel.get("sync_on_polygon_change"); return t || n || r }, Base.prototype.getData = function () { throw new Error("getData must be implemented by the particular dataview.") }, Base.prototype.DEFAULTS = {}, Base.prototype._initialize = function (e, t, n) { n = r.defaults(n || {}, this.DEFAULTS), this._checkSource(e), this._checkColumn(t), this._checkOptions(n), this._source = e, this._column = t, this._options = n, this._status = o.NOT_LOADED, this._enabled = !0, this._boundingBoxFilter = null }, Base.prototype._checkSource = function (e) { if (!(e instanceof a)) throw this._getValidationError("sourceRequired") }, Base.prototype._checkColumn = function (e) { if (r.isUndefined(e)) throw this._getValidationError("columnRequired"); if (!r.isString(e)) throw this._getValidationError("columnString"); if (r.isEmpty(e)) throw this._getValidationError("emptyColumn") }, Base.prototype._checkOptions = function (e) { throw new Error("_checkOptions must be implemented by the particular dataview.") }, Base.prototype._checkFilter = function (e) { if (!(e instanceof s) || e instanceof l) throw this._getValidationError("filterRequired") }, Base.prototype._createInternalModel = function (e) { throw new Error("_createInternalModel must be implemented by the particular dataview.") }, Base.prototype._setEnabled = function (e) { return this._enabled = e, this._internalModel && this._internalModel.set("enabled", e), this }, Base.prototype._listenToInternalModelSharedEvents = function () { this._internalModel && (this.listenTo(this._internalModel, "change:data", this._onDataChanged), this.listenTo(this._internalModel, "change:column", this._onColumnChanged), this.listenTo(this._internalModel, "loading", this._onStatusLoading), this.listenTo(this._internalModel, "loaded", this._onStatusLoaded), this.listenTo(this._internalModel, "statusError", this._onStatusError)) }, Base.prototype._onDataChanged = function () { this.trigger("dataChanged", this.getData()) }, Base.prototype._onColumnChanged = function () { this._internalModel && (this._column = this._internalModel.get("column")), this.trigger("columnChanged", this._column) }, Base.prototype._onStatusLoading = function () { this._status = o.LOADING, this.trigger("statusChanged", this._status) }, Base.prototype._onStatusLoaded = function () { this._status = o.LOADED, this.trigger("statusChanged", this._status) }, Base.prototype._onStatusError = function (e, t) { this._status = o.ERROR, this.trigger("statusChanged", this._status, t), this._triggerError(this, t) }, Base.prototype._changeProperty = function (e, t, n) { var r = this["_" + e]; this["_" + e] = t, r !== t && (this._triggerChange(e, t), this._internalModel && this._internalModel.set(n || e, t)) }, Base.prototype._changeProperties = function (e) { var t = this; r.each(e, function (e, n) { t["_" + n] !== e && (t["_" + n] = e, t._triggerChange(n, e)) }), this._internalModel && this._internalModel.set(e) }, Base.prototype._triggerChange = function (e, t) { this.trigger(e + "Changed", t) }, Base.prototype._triggerError = function (e, t) { this.trigger("error", new c(t)) }, Base.prototype._addSpatialFilter = function (e) { switch (e.type) { case u.BBOX: this._addBoundingBoxFilter(e); break; case u.CIRCLE: this._addCircleFilter(e); break; case u.POLYGON: this._addPolygonFilter(e); break; default: throw new Error("The filter is not a valid spatial filter.") } }, Base.prototype._removeSpatialFilter = function (e) { switch (e.type) { case u.BBOX: e === this._boundingBoxFilter && this._removeBoundingBoxFilter(); break; case u.CIRCLE: e === this._circleFilter && this._removeCircleFilter(); break; case u.POLYGON: e === this._polygonFilter && this._removePolygonFilter(); break; default: throw new Error("The filter is not a valid spatial filter.") } }, Base.prototype._addBoundingBoxFilter = function (e) { e !== this._boundingBoxFilter && (this._boundingBoxFilter = e, this._internalModel && (this._internalModel.addBBoxFilter(this._boundingBoxFilter.$getInternalModel()), this._internalModel.set("sync_on_bbox_change", !0))) }, Base.prototype._removeBoundingBoxFilter = function () { this._boundingBoxFilter = null, this._internalModel && (this._internalModel.removeBBoxFilter(), this._internalModel.set("sync_on_bbox_change", !1)) }, Base.prototype._addCircleFilter = function (e) { e !== this._circleFilter && (this._circleFilter = e, this._internalModel && (this._internalModel.addCircleFilter(this._circleFilter.$getInternalModel()), this._internalModel.set("sync_on_circle_change", !0))) }, Base.prototype._removeCircleFilter = function () { this._circleFilter = null, this._internalModel && (this._internalModel.removeCircleFilter(), this._internalModel.set("sync_on_circle_change", !1)) }, Base.prototype._addPolygonFilter = function (e) { e !== this._polygonFilter && (this._polygonFilter = e, this._internalModel && (this._internalModel.addPolygonFilter(this._polygonFilter.$getInternalModel()), this._internalModel.set("sync_on_polygon_change", !0))) }, Base.prototype._removePolygonFilter = function () { this._polygonFilter = null, this._internalModel && (this._internalModel.removePolygonFilter(), this._internalModel.set("sync_on_polygon_change", !1)) }, Base.prototype._getValidationError = function (e) { return new d("dataview", e) }, Base.prototype.$setEngine = function (e) { this._source.$setEngine(e), this._internalModel || (this._createInternalModel(e), this._listenToInternalModelSharedEvents()) }, Base.prototype.$getInternalModel = function () { return this._internalModel }, e.exports = Base }, function (e, t, n) { "use strict"; var r = function () { function defineProperties(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, n) { return t && defineProperties(e.prototype, t), n && defineProperties(e, n), e } }(); var i = n(0), o = n(6), a = n(95), s = ["includeNull"], l = function (e) { function SQLBase(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; !function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, SQLBase); var n = function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, (SQLBase.__proto__ || Object.getPrototypeOf(SQLBase)).call(this)); return n._checkColumn(e), n._checkOptions(t), n._column = e, n._filters = {}, n._options = t, n } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(SQLBase, o), r(SQLBase, [{ key: "set", value: function set(e, t) { if (e && t && i.isString(e)) { var n = function _defineProperty(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e }({}, e, t); this._checkFilters(n), this._filters[e] = t, this.trigger("change:filters", n) } } }, { key: "setFilters", value: function setFilters(e) { e && i.isObject(e) && (this._checkFilters(e), this._filters = e, this.trigger("change:filters", e)) } }, { key: "resetFilters", value: function resetFilters() { this.setFilters({}) } }, { key: "$getSQL", value: function $getSQL() { var e = this, t = Object.keys(this._filters), n = t.map(function (t) { return e._interpolateFilter(t, e._filters[t]) }).filter(function (e) { return Boolean(e) }).join(" AND "); return this._options.includeNull && this._includeNullInQuery(n), t.length > 1 ? "(" + n + ")" : n } }, { key: "_checkColumn", value: function _checkColumn(e) { if (i.isUndefined(e)) throw this._getValidationError("columnRequired"); if (!i.isString(e)) throw this._getValidationError("columnString"); if (i.isEmpty(e)) throw this._getValidationError("emptyColumn") } }, { key: "_checkFilters", value: function _checkFilters(e) { var t = this; Object.keys(e).forEach(function (n) { if (!i.contains(t.ALLOWED_FILTERS, n)) throw t._getValidationError("invalidFilter" + n); if (!t.PARAMETER_SPECIFICATION[n].parameters.every(function (t) { var n = a(e, t.name); return t.allowedTypes.some(function (e) { return u(e, n) }) })) throw t._getValidationError("invalidParameterType" + n) }) } }, { key: "_checkOptions", value: function _checkOptions(e) { var t = this; Object.keys(e).forEach(function (e) { if (!i.contains(s, e)) throw t._getValidationError("invalidOption" + e) }) } }, { key: "_convertValueToSQLString", value: function _convertValueToSQLString(e) { var t = this; return i.isDate(e) ? "'" + e.toISOString() + "'" : i.isArray(e) ? e.map(function (e) { return t._convertValueToSQLString(e) }).join(",") : i.isObject(e) ? (Object.keys(e).forEach(function (n) { "query" !== n && (e[n] = t._convertValueToSQLString(e[n])) }), e) : i.isNumber(e) ? e : "'" + c(e.toString()) + "'" } }, { key: "_interpolateFilter", value: function _interpolateFilter(e, t) { var n = i.template(this.SQL_TEMPLATES[e]), r = this._convertValueToSQLString(t); return n({ column: this._column, value: r }) } }, { key: "_includeNullInQuery", value: function _includeNullInQuery(e) { return Object.keys(this._filters).length > 1 && (e = "(" + e + ")"), "(" + e + " OR " + this._column + " IS NULL)" } }]), SQLBase }(), u = function parameterIsOfType(e, t) { return i["is" + e](t) }, c = function normalizeString(e) { return e.replace(/\n/g, "\\n").replace(/\"/g, '\\"').replace(/'/g, "''") }; e.exports = l }, function (e, t, n) { "use strict"; var r = n(0), i = n(1), o = n(4), a = n(21), s = n(14); function Base() { this._id = Base.$generateId(), this._hasFiltersApplied = !1, this._appliedFilters = new a } r.extend(Base.prototype, i.Events), Base.$nextId = 0, Base.$generateId = function () { return "S" + ++Base.$nextId }, Base.prototype.getId = function () { return this._id }, Base.prototype._createInternalModel = function (e) { throw new Error("_createInternalModel must be implemented by the particular source") }, Base.prototype._triggerError = function (e, t) { this.trigger(s.ERROR, new o(t, { analysis: this })) }, Base.prototype.$setEngine = function (e) { this._internalModel || (this._internalModel = this._createInternalModel(e), this._internalModel.on("change:error", this._triggerError, this)) }, Base.prototype.$getEngine = function (e) { if (this._internalModel) return this._internalModel._engine }, Base.prototype.$getInternalModel = function () { return this._internalModel }, Base.prototype.getFilters = function () { return this._appliedFilters.getFilters() }, Base.prototype.addFilter = function (e) { this._hasFiltersApplied = !0, this._appliedFilters.addFilter(e) }, Base.prototype.addFilters = function (e) { var t = this; e.forEach(function (e) { return t.addFilter(e) }) }, Base.prototype.removeFilter = function (e) { this._appliedFilters.removeFilter(e), this._hasFiltersApplied = Boolean(this._appliedFilters.count()) }, Base.prototype.removeFilters = function (e) { var t = this; e.forEach(function (e) { return t.removeFilter(e) }) }, e.exports = Base }, function (e, t, n) { "use strict"; var r = n(0), i = n(1), o = n(44), a = ["state", "visible"], s = i.Model.extend({ defaults: function defaults() { return { visible: !1, title: "", preHTMLSnippet: "", postHTMLSnippet: "", state: this.constructor.STATE_LOADING } }, initialize: function initialize(e, t) { if (!t.engine) throw new Error("engine is required"); t.engine.on(o.Events.RELOAD_STARTED, this._onEngineReloadStarted, this) }, _onEngineReloadStarted: function _onEngineReloadStarted() { this.set("state", this.constructor.STATE_LOADING) }, isLoading: function isLoading() { return this.get("state") === this.constructor.STATE_LOADING }, isError: function isError() { return this.get("state") === this.constructor.STATE_ERROR }, isSuccess: function isSuccess() { return this.get("state") === this.constructor.STATE_SUCCESS }, show: function show() { this.set("visible", !0) }, hide: function hide() { this.set("visible", !1) }, isVisible: function isVisible() { return this.get("visible") }, update: function update(e) { this.set(e) }, getNonResettableAttrs: function getNonResettableAttrs() { return a }, reset: function reset() { var e = r.omit(this.defaults(), this.getNonResettableAttrs()); this.set(e) }, isAvailable: function isAvailable() { return !1 } }, { STATE_LOADING: "loading", STATE_SUCCESS: "success", STATE_ERROR: "error" }); e.exports = s }, function (e, t, n) { "use strict"; e.exports = { SUCCESS: "success", ERROR: "error" } }, function (e, t, n) { "use strict"; var r = n(0), i = function Rule(e) { this._rule = e }; i.prototype.matchesAnyProperty = function (e) { return this._matches(this._rule.prop, e) }, i.prototype.matchesAnyMapping = function (e) { return this._matches(this._rule.mapping, e) }, i.prototype._matches = function (e, t) { return r.isString(t) && (t = [t]), r.contains(t, e) }, i.prototype.getBucketsWithRangeFilter = function () { return this._getBucketsByFilterType("range") }, i.prototype.getBucketsWithCategoryFilter = function () { return this._getBucketsByFilterType("category") }, i.prototype.getBucketsWithDefaultFilter = function () { return this._getBucketsByFilterType("default") }, i.prototype._getBucketsByFilterType = function (e) { return this._rule ? r.select(this._rule.buckets, function (t) { return t.filter.type === e }) : [] }, i.prototype.getColumn = function () { return this._rule.column }, i.prototype.getMapping = function () { return this._rule.mapping }, i.prototype.getProperty = function () { return this._rule.prop }, i.prototype.getFilterAvg = function () { return this._rule.stats.filter_avg }, e.exports = i }, function (e, t, n) { "use strict"; var r = function isLayerOfType(e, t) { return e.get("type").toLowerCase() === t.toLowerCase() }; e.exports = { isTiledLayer: function isTiledLayer(e) { return r(e, "Tiled") }, isPlainLayer: function isPlainLayer(e) { return r(e, "Plain") }, isWMSLayer: function isWMSLayer(e) { return r(e, "WMS") }, isGoogleMapsBaseLayer: function isGoogleMapsBaseLayer(e) { return r(e, "GMapsBase") }, isCartoDBLayer: function isCartoDBLayer(e) { return r(e, "CartoDB") }, isTorqueLayer: function isTorqueLayer(e) { return r(e, "torque") } } }, function (e, t, n) { var r, i, o; i = "undefined" != typeof window ? window : this, o = function (n, i) { var o = [], a = o.slice, s = o.concat, l = o.push, u = o.indexOf, c = {}, d = c.toString, f = c.hasOwnProperty, h = {}, p = n.document, m = function (e, t) { return new m.fn.init(e, t) }, g = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, v = /^-ms-/, y = /-([\da-z])/gi, _ = function (e, t) { return t.toUpperCase() }; function isArraylike(e) { var t = "length" in e && e.length, n = m.type(e); return "function" !== n && !m.isWindow(e) && (!(1 !== e.nodeType || !t) || ("array" === n || 0 === t || "number" == typeof t && t > 0 && t - 1 in e)) } m.fn = m.prototype = { jquery: "2.1.4", constructor: m, selector: "", length: 0, toArray: function () { return a.call(this) }, get: function (e) { return null != e ? e < 0 ? this[e + this.length] : this[e] : a.call(this) }, pushStack: function (e) { var t = m.merge(this.constructor(), e); return t.prevObject = this, t.context = this.context, t }, each: function (e, t) { return m.each(this, e, t) }, map: function (e) { return this.pushStack(m.map(this, function (t, n) { return e.call(t, n, t) })) }, slice: function () { return this.pushStack(a.apply(this, arguments)) }, first: function () { return this.eq(0) }, last: function () { return this.eq(-1) }, eq: function (e) { var t = this.length, n = +e + (e < 0 ? t : 0); return this.pushStack(n >= 0 && n < t ? [this[n]] : []) }, end: function () { return this.prevObject || this.constructor(null) }, push: l, sort: o.sort, splice: o.splice }, m.extend = m.fn.extend = function () { var e, t, n, r, i, o, a = arguments[0] || {}, s = 1, l = arguments.length, u = !1; for ("boolean" == typeof a && (u = a, a = arguments[s] || {}, s++), "object" == typeof a || m.isFunction(a) || (a = {}), s === l && (a = this, s--); s < l; s++)if (null != (e = arguments[s])) for (t in e) n = a[t], a !== (r = e[t]) && (u && r && (m.isPlainObject(r) || (i = m.isArray(r))) ? (i ? (i = !1, o = n && m.isArray(n) ? n : []) : o = n && m.isPlainObject(n) ? n : {}, a[t] = m.extend(u, o, r)) : void 0 !== r && (a[t] = r)); return a }, m.extend({ expando: "jQuery" + ("2.1.4" + Math.random()).replace(/\D/g, ""), isReady: !0, error: function (e) { throw new Error(e) }, noop: function () { }, isFunction: function (e) { return "function" === m.type(e) }, isArray: Array.isArray, isWindow: function (e) { return null != e && e === e.window }, isNumeric: function (e) { return !m.isArray(e) && e - parseFloat(e) + 1 >= 0 }, isPlainObject: function (e) { return "object" === m.type(e) && !e.nodeType && !m.isWindow(e) && !(e.constructor && !f.call(e.constructor.prototype, "isPrototypeOf")) }, isEmptyObject: function (e) { var t; for (t in e) return !1; return !0 }, type: function (e) { return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? c[d.call(e)] || "object" : typeof e }, globalEval: function (e) { var t, n = eval; (e = m.trim(e)) && (1 === e.indexOf("use strict") ? ((t = p.createElement("script")).text = e, p.head.appendChild(t).parentNode.removeChild(t)) : n(e)) }, camelCase: function (e) { return e.replace(v, "ms-").replace(y, _) }, nodeName: function (e, t) { return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase() }, each: function (e, t, n) { var r = 0, i = e.length, o = isArraylike(e); if (n) { if (o) for (; r < i && !1 !== t.apply(e[r], n); r++); else for (r in e) if (!1 === t.apply(e[r], n)) break } else if (o) for (; r < i && !1 !== t.call(e[r], r, e[r]); r++); else for (r in e) if (!1 === t.call(e[r], r, e[r])) break; return e }, trim: function (e) { return null == e ? "" : (e + "").replace(g, "") }, makeArray: function (e, t) { var n = t || []; return null != e && (isArraylike(Object(e)) ? m.merge(n, "string" == typeof e ? [e] : e) : l.call(n, e)), n }, inArray: function (e, t, n) { return null == t ? -1 : u.call(t, e, n) }, merge: function (e, t) { for (var n = +t.length, r = 0, i = e.length; r < n; r++)e[i++] = t[r]; return e.length = i, e }, grep: function (e, t, n) { for (var r = [], i = 0, o = e.length, a = !n; i < o; i++)!t(e[i], i) !== a && r.push(e[i]); return r }, map: function (e, t, n) { var r, i = 0, o = e.length, a = []; if (isArraylike(e)) for (; i < o; i++)null != (r = t(e[i], i, n)) && a.push(r); else for (i in e) null != (r = t(e[i], i, n)) && a.push(r); return s.apply([], a) }, guid: 1, proxy: function (e, t) { var n, r, i; if ("string" == typeof t && (n = e[t], t = e, e = n), m.isFunction(e)) return r = a.call(arguments, 2), (i = function () { return e.apply(t || this, r.concat(a.call(arguments))) }).guid = e.guid = e.guid || m.guid++, i }, now: Date.now, support: h }), m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function (e, t) { c["[object " + t + "]"] = t.toLowerCase() }); var b = function (e) { var t, n, r, i, o, a, s, l, u, c, d, f, h, p, m, g, v, y, _, b = "sizzle" + 1 * new Date, w = e.document, x = 0, C = 0, S = createCache(), k = createCache(), T = createCache(), L = function (e, t) { return e === t && (d = !0), 0 }, M = 1 << 31, E = {}.hasOwnProperty, A = [], P = A.pop, R = A.push, O = A.push, D = A.slice, F = function (e, t) { for (var n = 0, r = e.length; n < r; n++)if (e[n] === t) return n; return -1 }, I = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", N = "[\\x20\\t\\r\\n\\f]", $ = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", B = $.replace("w", "w#"), z = "\\[" + N + "*(" + $ + ")(?:" + N + "*([*^$|!~]?=)" + N + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + B + "))|)" + N + "*\\]", j = ":(" + $ + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + z + ")*)|.*)\\)|)", U = new RegExp(N + "+", "g"), q = new RegExp("^" + N + "+|((?:^|[^\\\\])(?:\\\\.)*)" + N + "+$", "g"), H = new RegExp("^" + N + "*," + N + "*"), V = new RegExp("^" + N + "*([>+~]|" + N + ")" + N + "*"), G = new RegExp("=" + N + "*([^\\]'\"]*?)" + N + "*\\]", "g"), W = new RegExp(j), Y = new RegExp("^" + B + "$"), Z = { ID: new RegExp("^#(" + $ + ")"), CLASS: new RegExp("^\\.(" + $ + ")"), TAG: new RegExp("^(" + $.replace("w", "w*") + ")"), ATTR: new RegExp("^" + z), PSEUDO: new RegExp("^" + j), CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + N + "*(even|odd|(([+-]|)(\\d*)n|)" + N + "*(?:([+-]|)" + N + "*(\\d+)|))" + N + "*\\)|)", "i"), bool: new RegExp("^(?:" + I + ")$", "i"), needsContext: new RegExp("^" + N + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + N + "*((?:-\\d)?\\d*)" + N + "*\\)|)(?=[^-]|$)", "i") }, K = /^(?:input|select|textarea|button)$/i, X = /^h\d$/i, J = /^[^{]+\{\s*\[native \w/, Q = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, ee = /[+~]/, te = /'|\\/g, ne = new RegExp("\\\\([\\da-f]{1,6}" + N + "?|(" + N + ")|.)", "ig"), re = function (e, t, n) { var r = "0x" + t - 65536; return r != r || n ? t : r < 0 ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, 1023 & r | 56320) }, ie = function () { f() }; try { O.apply(A = D.call(w.childNodes), w.childNodes), A[w.childNodes.length].nodeType } catch (e) { O = { apply: A.length ? function (e, t) { R.apply(e, D.call(t)) } : function (e, t) { for (var n = e.length, r = 0; e[n++] = t[r++];); e.length = n - 1 } } } function Sizzle(e, t, r, i) { var o, s, u, c, d, p, v, y, x, C; if ((t ? t.ownerDocument || t : w) !== h && f(t), t = t || h, r = r || [], c = t.nodeType, "string" != typeof e || !e || 1 !== c && 9 !== c && 11 !== c) return r; if (!i && m) { if (11 !== c && (o = Q.exec(e))) if (u = o[1]) { if (9 === c) { if (!(s = t.getElementById(u)) || !s.parentNode) return r; if (s.id === u) return r.push(s), r } else if (t.ownerDocument && (s = t.ownerDocument.getElementById(u)) && _(t, s) && s.id === u) return r.push(s), r } else { if (o[2]) return O.apply(r, t.getElementsByTagName(e)), r; if ((u = o[3]) && n.getElementsByClassName) return O.apply(r, t.getElementsByClassName(u)), r } if (n.qsa && (!g || !g.test(e))) { if (y = v = b, x = t, C = 1 !== c && e, 1 === c && "object" !== t.nodeName.toLowerCase()) { for (p = a(e), (v = t.getAttribute("id")) ? y = v.replace(te, "\\$&") : t.setAttribute("id", y), y = "[id='" + y + "'] ", d = p.length; d--;)p[d] = y + toSelector(p[d]); x = ee.test(e) && testContext(t.parentNode) || t, C = p.join(",") } if (C) try { return O.apply(r, x.querySelectorAll(C)), r } catch (e) { } finally { v || t.removeAttribute("id") } } } return l(e.replace(q, "$1"), t, r, i) } function createCache() { var e = []; return function cache(t, n) { return e.push(t + " ") > r.cacheLength && delete cache[e.shift()], cache[t + " "] = n } } function markFunction(e) { return e[b] = !0, e } function assert(e) { var t = h.createElement("div"); try { return !!e(t) } catch (e) { return !1 } finally { t.parentNode && t.parentNode.removeChild(t), t = null } } function addHandle(e, t) { for (var n = e.split("|"), i = e.length; i--;)r.attrHandle[n[i]] = t } function siblingCheck(e, t) { var n = t && e, r = n && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || M) - (~e.sourceIndex || M); if (r) return r; if (n) for (; n = n.nextSibling;)if (n === t) return -1; return e ? 1 : -1 } function createInputPseudo(e) { return function (t) { return "input" === t.nodeName.toLowerCase() && t.type === e } } function createButtonPseudo(e) { return function (t) { var n = t.nodeName.toLowerCase(); return ("input" === n || "button" === n) && t.type === e } } function createPositionalPseudo(e) { return markFunction(function (t) { return t = +t, markFunction(function (n, r) { for (var i, o = e([], n.length, t), a = o.length; a--;)n[i = o[a]] && (n[i] = !(r[i] = n[i])) }) }) } function testContext(e) { return e && void 0 !== e.getElementsByTagName && e } for (t in n = Sizzle.support = {}, o = Sizzle.isXML = function (e) { var t = e && (e.ownerDocument || e).documentElement; return !!t && "HTML" !== t.nodeName }, f = Sizzle.setDocument = function (e) { var t, i, a = e ? e.ownerDocument || e : w; return a !== h && 9 === a.nodeType && a.documentElement ? (h = a, p = a.documentElement, (i = a.defaultView) && i !== i.top && (i.addEventListener ? i.addEventListener("unload", ie, !1) : i.attachEvent && i.attachEvent("onunload", ie)), m = !o(a), n.attributes = assert(function (e) { return e.className = "i", !e.getAttribute("className") }), n.getElementsByTagName = assert(function (e) { return e.appendChild(a.createComment("")), !e.getElementsByTagName("*").length }), n.getElementsByClassName = J.test(a.getElementsByClassName), n.getById = assert(function (e) { return p.appendChild(e).id = b, !a.getElementsByName || !a.getElementsByName(b).length }), n.getById ? (r.find.ID = function (e, t) { if (void 0 !== t.getElementById && m) { var n = t.getElementById(e); return n && n.parentNode ? [n] : [] } }, r.filter.ID = function (e) { var t = e.replace(ne, re); return function (e) { return e.getAttribute("id") === t } }) : (delete r.find.ID, r.filter.ID = function (e) { var t = e.replace(ne, re); return function (e) { var n = void 0 !== e.getAttributeNode && e.getAttributeNode("id"); return n && n.value === t } }), r.find.TAG = n.getElementsByTagName ? function (e, t) { return void 0 !== t.getElementsByTagName ? t.getElementsByTagName(e) : n.qsa ? t.querySelectorAll(e) : void 0 } : function (e, t) { var n, r = [], i = 0, o = t.getElementsByTagName(e); if ("*" === e) { for (; n = o[i++];)1 === n.nodeType && r.push(n); return r } return o }, r.find.CLASS = n.getElementsByClassName && function (e, t) { if (m) return t.getElementsByClassName(e) }, v = [], g = [], (n.qsa = J.test(a.querySelectorAll)) && (assert(function (e) { p.appendChild(e).innerHTML = "<a id='" + b + "'></a><select id='" + b + "-\f]' msallowcapture=''><option selected=''></option></select>", e.querySelectorAll("[msallowcapture^='']").length && g.push("[*^$]=" + N + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || g.push("\\[" + N + "*(?:value|" + I + ")"), e.querySelectorAll("[id~=" + b + "-]").length || g.push("~="), e.querySelectorAll(":checked").length || g.push(":checked"), e.querySelectorAll("a#" + b + "+*").length || g.push(".#.+[+~]") }), assert(function (e) { var t = a.createElement("input"); t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && g.push("name" + N + "*[*^$|!~]?="), e.querySelectorAll(":enabled").length || g.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), g.push(",.*:") })), (n.matchesSelector = J.test(y = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.oMatchesSelector || p.msMatchesSelector)) && assert(function (e) { n.disconnectedMatch = y.call(e, "div"), y.call(e, "[s!='']:x"), v.push("!=", j) }), g = g.length && new RegExp(g.join("|")), v = v.length && new RegExp(v.join("|")), t = J.test(p.compareDocumentPosition), _ = t || J.test(p.contains) ? function (e, t) { var n = 9 === e.nodeType ? e.documentElement : e, r = t && t.parentNode; return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r))) } : function (e, t) { if (t) for (; t = t.parentNode;)if (t === e) return !0; return !1 }, L = t ? function (e, t) { if (e === t) return d = !0, 0; var r = !e.compareDocumentPosition - !t.compareDocumentPosition; return r || (1 & (r = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1) || !n.sortDetached && t.compareDocumentPosition(e) === r ? e === a || e.ownerDocument === w && _(w, e) ? -1 : t === a || t.ownerDocument === w && _(w, t) ? 1 : c ? F(c, e) - F(c, t) : 0 : 4 & r ? -1 : 1) } : function (e, t) { if (e === t) return d = !0, 0; var n, r = 0, i = e.parentNode, o = t.parentNode, s = [e], l = [t]; if (!i || !o) return e === a ? -1 : t === a ? 1 : i ? -1 : o ? 1 : c ? F(c, e) - F(c, t) : 0; if (i === o) return siblingCheck(e, t); for (n = e; n = n.parentNode;)s.unshift(n); for (n = t; n = n.parentNode;)l.unshift(n); for (; s[r] === l[r];)r++; return r ? siblingCheck(s[r], l[r]) : s[r] === w ? -1 : l[r] === w ? 1 : 0 }, a) : h }, Sizzle.matches = function (e, t) { return Sizzle(e, null, null, t) }, Sizzle.matchesSelector = function (e, t) { if ((e.ownerDocument || e) !== h && f(e), t = t.replace(G, "='$1']"), n.matchesSelector && m && (!v || !v.test(t)) && (!g || !g.test(t))) try { var r = y.call(e, t); if (r || n.disconnectedMatch || e.document && 11 !== e.document.nodeType) return r } catch (e) { } return Sizzle(t, h, null, [e]).length > 0 }, Sizzle.contains = function (e, t) { return (e.ownerDocument || e) !== h && f(e), _(e, t) }, Sizzle.attr = function (e, t) { (e.ownerDocument || e) !== h && f(e); var i = r.attrHandle[t.toLowerCase()], o = i && E.call(r.attrHandle, t.toLowerCase()) ? i(e, t, !m) : void 0; return void 0 !== o ? o : n.attributes || !m ? e.getAttribute(t) : (o = e.getAttributeNode(t)) && o.specified ? o.value : null }, Sizzle.error = function (e) { throw new Error("Syntax error, unrecognized expression: " + e) }, Sizzle.uniqueSort = function (e) { var t, r = [], i = 0, o = 0; if (d = !n.detectDuplicates, c = !n.sortStable && e.slice(0), e.sort(L), d) { for (; t = e[o++];)t === e[o] && (i = r.push(o)); for (; i--;)e.splice(r[i], 1) } return c = null, e }, i = Sizzle.getText = function (e) { var t, n = "", r = 0, o = e.nodeType; if (o) { if (1 === o || 9 === o || 11 === o) { if ("string" == typeof e.textContent) return e.textContent; for (e = e.firstChild; e; e = e.nextSibling)n += i(e) } else if (3 === o || 4 === o) return e.nodeValue } else for (; t = e[r++];)n += i(t); return n }, (r = Sizzle.selectors = { cacheLength: 50, createPseudo: markFunction, match: Z, attrHandle: {}, find: {}, relative: { ">": { dir: "parentNode", first: !0 }, " ": { dir: "parentNode" }, "+": { dir: "previousSibling", first: !0 }, "~": { dir: "previousSibling" } }, preFilter: { ATTR: function (e) { return e[1] = e[1].replace(ne, re), e[3] = (e[3] || e[4] || e[5] || "").replace(ne, re), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4) }, CHILD: function (e) { return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || Sizzle.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && Sizzle.error(e[0]), e }, PSEUDO: function (e) { var t, n = !e[6] && e[2]; return Z.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : n && W.test(n) && (t = a(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3)) } }, filter: { TAG: function (e) { var t = e.replace(ne, re).toLowerCase(); return "*" === e ? function () { return !0 } : function (e) { return e.nodeName && e.nodeName.toLowerCase() === t } }, CLASS: function (e) { var t = S[e + " "]; return t || (t = new RegExp("(^|" + N + ")" + e + "(" + N + "|$)")) && S(e, function (e) { return t.test("string" == typeof e.className && e.className || void 0 !== e.getAttribute && e.getAttribute("class") || "") }) }, ATTR: function (e, t, n) { return function (r) { var i = Sizzle.attr(r, e); return null == i ? "!=" === t : !t || (i += "", "=" === t ? i === n : "!=" === t ? i !== n : "^=" === t ? n && 0 === i.indexOf(n) : "*=" === t ? n && i.indexOf(n) > -1 : "$=" === t ? n && i.slice(-n.length) === n : "~=" === t ? (" " + i.replace(U, " ") + " ").indexOf(n) > -1 : "|=" === t && (i === n || i.slice(0, n.length + 1) === n + "-")) } }, CHILD: function (e, t, n, r, i) { var o = "nth" !== e.slice(0, 3), a = "last" !== e.slice(-4), s = "of-type" === t; return 1 === r && 0 === i ? function (e) { return !!e.parentNode } : function (t, n, l) { var u, c, d, f, h, p, m = o !== a ? "nextSibling" : "previousSibling", g = t.parentNode, v = s && t.nodeName.toLowerCase(), y = !l && !s; if (g) { if (o) { for (; m;) { for (d = t; d = d[m];)if (s ? d.nodeName.toLowerCase() === v : 1 === d.nodeType) return !1; p = m = "only" === e && !p && "nextSibling" } return !0 } if (p = [a ? g.firstChild : g.lastChild], a && y) { for (h = (u = (c = g[b] || (g[b] = {}))[e] || [])[0] === x && u[1], f = u[0] === x && u[2], d = h && g.childNodes[h]; d = ++h && d && d[m] || (f = h = 0) || p.pop();)if (1 === d.nodeType && ++f && d === t) { c[e] = [x, h, f]; break } } else if (y && (u = (t[b] || (t[b] = {}))[e]) && u[0] === x) f = u[1]; else for (; (d = ++h && d && d[m] || (f = h = 0) || p.pop()) && ((s ? d.nodeName.toLowerCase() !== v : 1 !== d.nodeType) || !++f || (y && ((d[b] || (d[b] = {}))[e] = [x, f]), d !== t));); return (f -= i) === r || f % r == 0 && f / r >= 0 } } }, PSEUDO: function (e, t) { var n, i = r.pseudos[e] || r.setFilters[e.toLowerCase()] || Sizzle.error("unsupported pseudo: " + e); return i[b] ? i(t) : i.length > 1 ? (n = [e, e, "", t], r.setFilters.hasOwnProperty(e.toLowerCase()) ? markFunction(function (e, n) { for (var r, o = i(e, t), a = o.length; a--;)e[r = F(e, o[a])] = !(n[r] = o[a]) }) : function (e) { return i(e, 0, n) }) : i } }, pseudos: { not: markFunction(function (e) { var t = [], n = [], r = s(e.replace(q, "$1")); return r[b] ? markFunction(function (e, t, n, i) { for (var o, a = r(e, null, i, []), s = e.length; s--;)(o = a[s]) && (e[s] = !(t[s] = o)) }) : function (e, i, o) { return t[0] = e, r(t, null, o, n), t[0] = null, !n.pop() } }), has: markFunction(function (e) { return function (t) { return Sizzle(e, t).length > 0 } }), contains: markFunction(function (e) { return e = e.replace(ne, re), function (t) { return (t.textContent || t.innerText || i(t)).indexOf(e) > -1 } }), lang: markFunction(function (e) { return Y.test(e || "") || Sizzle.error("unsupported lang: " + e), e = e.replace(ne, re).toLowerCase(), function (t) { var n; do { if (n = m ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return (n = n.toLowerCase()) === e || 0 === n.indexOf(e + "-") } while ((t = t.parentNode) && 1 === t.nodeType); return !1 } }), target: function (t) { var n = e.location && e.location.hash; return n && n.slice(1) === t.id }, root: function (e) { return e === p }, focus: function (e) { return e === h.activeElement && (!h.hasFocus || h.hasFocus()) && !!(e.type || e.href || ~e.tabIndex) }, enabled: function (e) { return !1 === e.disabled }, disabled: function (e) { return !0 === e.disabled }, checked: function (e) { var t = e.nodeName.toLowerCase(); return "input" === t && !!e.checked || "option" === t && !!e.selected }, selected: function (e) { return e.parentNode && e.parentNode.selectedIndex, !0 === e.selected }, empty: function (e) { for (e = e.firstChild; e; e = e.nextSibling)if (e.nodeType < 6) return !1; return !0 }, parent: function (e) { return !r.pseudos.empty(e) }, header: function (e) { return X.test(e.nodeName) }, input: function (e) { return K.test(e.nodeName) }, button: function (e) { var t = e.nodeName.toLowerCase(); return "input" === t && "button" === e.type || "button" === t }, text: function (e) { var t; return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase()) }, first: createPositionalPseudo(function () { return [0] }), last: createPositionalPseudo(function (e, t) { return [t - 1] }), eq: createPositionalPseudo(function (e, t, n) { return [n < 0 ? n + t : n] }), even: createPositionalPseudo(function (e, t) { for (var n = 0; n < t; n += 2)e.push(n); return e }), odd: createPositionalPseudo(function (e, t) { for (var n = 1; n < t; n += 2)e.push(n); return e }), lt: createPositionalPseudo(function (e, t, n) { for (var r = n < 0 ? n + t : n; --r >= 0;)e.push(r); return e }), gt: createPositionalPseudo(function (e, t, n) { for (var r = n < 0 ? n + t : n; ++r < t;)e.push(r); return e }) } }).pseudos.nth = r.pseudos.eq, { radio: !0, checkbox: !0, file: !0, password: !0, image: !0 }) r.pseudos[t] = createInputPseudo(t); for (t in { submit: !0, reset: !0 }) r.pseudos[t] = createButtonPseudo(t); function setFilters() { } function toSelector(e) { for (var t = 0, n = e.length, r = ""; t < n; t++)r += e[t].value; return r } function addCombinator(e, t, n) { var r = t.dir, i = n && "parentNode" === r, o = C++; return t.first ? function (t, n, o) { for (; t = t[r];)if (1 === t.nodeType || i) return e(t, n, o) } : function (t, n, a) { var s, l, u = [x, o]; if (a) { for (; t = t[r];)if ((1 === t.nodeType || i) && e(t, n, a)) return !0 } else for (; t = t[r];)if (1 === t.nodeType || i) { if ((s = (l = t[b] || (t[b] = {}))[r]) && s[0] === x && s[1] === o) return u[2] = s[2]; if (l[r] = u, u[2] = e(t, n, a)) return !0 } } } function elementMatcher(e) { return e.length > 1 ? function (t, n, r) { for (var i = e.length; i--;)if (!e[i](t, n, r)) return !1; return !0 } : e[0] } function condense(e, t, n, r, i) { for (var o, a = [], s = 0, l = e.length, u = null != t; s < l; s++)(o = e[s]) && (n && !n(o, r, i) || (a.push(o), u && t.push(s))); return a } function setMatcher(e, t, n, r, i, o) { return r && !r[b] && (r = setMatcher(r)), i && !i[b] && (i = setMatcher(i, o)), markFunction(function (o, a, s, l) { var u, c, d, f = [], h = [], p = a.length, m = o || function multipleContexts(e, t, n) { for (var r = 0, i = t.length; r < i; r++)Sizzle(e, t[r], n); return n }(t || "*", s.nodeType ? [s] : s, []), g = !e || !o && t ? m : condense(m, f, e, s, l), v = n ? i || (o ? e : p || r) ? [] : a : g; if (n && n(g, v, s, l), r) for (u = condense(v, h), r(u, [], s, l), c = u.length; c--;)(d = u[c]) && (v[h[c]] = !(g[h[c]] = d)); if (o) { if (i || e) { if (i) { for (u = [], c = v.length; c--;)(d = v[c]) && u.push(g[c] = d); i(null, v = [], u, l) } for (c = v.length; c--;)(d = v[c]) && (u = i ? F(o, d) : f[c]) > -1 && (o[u] = !(a[u] = d)) } } else v = condense(v === a ? v.splice(p, v.length) : v), i ? i(null, a, v, l) : O.apply(a, v) }) } function matcherFromTokens(e) { for (var t, n, i, o = e.length, a = r.relative[e[0].type], s = a || r.relative[" "], l = a ? 1 : 0, c = addCombinator(function (e) { return e === t }, s, !0), d = addCombinator(function (e) { return F(t, e) > -1 }, s, !0), f = [function (e, n, r) { var i = !a && (r || n !== u) || ((t = n).nodeType ? c(e, n, r) : d(e, n, r)); return t = null, i }]; l < o; l++)if (n = r.relative[e[l].type]) f = [addCombinator(elementMatcher(f), n)]; else { if ((n = r.filter[e[l].type].apply(null, e[l].matches))[b]) { for (i = ++l; i < o && !r.relative[e[i].type]; i++); return setMatcher(l > 1 && elementMatcher(f), l > 1 && toSelector(e.slice(0, l - 1).concat({ value: " " === e[l - 2].type ? "*" : "" })).replace(q, "$1"), n, l < i && matcherFromTokens(e.slice(l, i)), i < o && matcherFromTokens(e = e.slice(i)), i < o && toSelector(e)) } f.push(n) } return elementMatcher(f) } return setFilters.prototype = r.filters = r.pseudos, r.setFilters = new setFilters, a = Sizzle.tokenize = function (e, t) { var n, i, o, a, s, l, u, c = k[e + " "]; if (c) return t ? 0 : c.slice(0); for (s = e, l = [], u = r.preFilter; s;) { for (a in n && !(i = H.exec(s)) || (i && (s = s.slice(i[0].length) || s), l.push(o = [])), n = !1, (i = V.exec(s)) && (n = i.shift(), o.push({ value: n, type: i[0].replace(q, " ") }), s = s.slice(n.length)), r.filter) !(i = Z[a].exec(s)) || u[a] && !(i = u[a](i)) || (n = i.shift(), o.push({ value: n, type: a, matches: i }), s = s.slice(n.length)); if (!n) break } return t ? s.length : s ? Sizzle.error(e) : k(e, l).slice(0) }, s = Sizzle.compile = function (e, t) { var n, i = [], o = [], s = T[e + " "]; if (!s) { for (t || (t = a(e)), n = t.length; n--;)(s = matcherFromTokens(t[n]))[b] ? i.push(s) : o.push(s); (s = T(e, function matcherFromGroupMatchers(e, t) { var n = t.length > 0, i = e.length > 0, o = function (o, a, s, l, c) { var d, f, p, m = 0, g = "0", v = o && [], y = [], _ = u, b = o || i && r.find.TAG("*", c), w = x += null == _ ? 1 : Math.random() || .1, C = b.length; for (c && (u = a !== h && a); g !== C && null != (d = b[g]); g++) { if (i && d) { for (f = 0; p = e[f++];)if (p(d, a, s)) { l.push(d); break } c && (x = w) } n && ((d = !p && d) && m--, o && v.push(d)) } if (m += g, n && g !== m) { for (f = 0; p = t[f++];)p(v, y, a, s); if (o) { if (m > 0) for (; g--;)v[g] || y[g] || (y[g] = P.call(l)); y = condense(y) } O.apply(l, y), c && !o && y.length > 0 && m + t.length > 1 && Sizzle.uniqueSort(l) } return c && (x = w, u = _), v }; return n ? markFunction(o) : o }(o, i))).selector = e } return s }, l = Sizzle.select = function (e, t, i, o) { var l, u, c, d, f, h = "function" == typeof e && e, p = !o && a(e = h.selector || e); if (i = i || [], 1 === p.length) { if ((u = p[0] = p[0].slice(0)).length > 2 && "ID" === (c = u[0]).type && n.getById && 9 === t.nodeType && m && r.relative[u[1].type]) { if (!(t = (r.find.ID(c.matches[0].replace(ne, re), t) || [])[0])) return i; h && (t = t.parentNode), e = e.slice(u.shift().value.length) } for (l = Z.needsContext.test(e) ? 0 : u.length; l-- && (c = u[l], !r.relative[d = c.type]);)if ((f = r.find[d]) && (o = f(c.matches[0].replace(ne, re), ee.test(u[0].type) && testContext(t.parentNode) || t))) { if (u.splice(l, 1), !(e = o.length && toSelector(u))) return O.apply(i, o), i; break } } return (h || s(e, p))(o, t, !m, i, ee.test(e) && testContext(t.parentNode) || t), i }, n.sortStable = b.split("").sort(L).join("") === b, n.detectDuplicates = !!d, f(), n.sortDetached = assert(function (e) { return 1 & e.compareDocumentPosition(h.createElement("div")) }), assert(function (e) { return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href") }) || addHandle("type|href|height|width", function (e, t, n) { if (!n) return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2) }), n.attributes && assert(function (e) { return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value") }) || addHandle("value", function (e, t, n) { if (!n && "input" === e.nodeName.toLowerCase()) return e.defaultValue }), assert(function (e) { return null == e.getAttribute("disabled") }) || addHandle(I, function (e, t, n) { var r; if (!n) return !0 === e[t] ? t.toLowerCase() : (r = e.getAttributeNode(t)) && r.specified ? r.value : null }), Sizzle }(n); m.find = b, m.expr = b.selectors, m.expr[":"] = m.expr.pseudos, m.unique = b.uniqueSort, m.text = b.getText, m.isXMLDoc = b.isXML, m.contains = b.contains; var w = m.expr.match.needsContext, x = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, C = /^.[^:#\[\.,]*$/; function winnow(e, t, n) { if (m.isFunction(t)) return m.grep(e, function (e, r) { return !!t.call(e, r, e) !== n }); if (t.nodeType) return m.grep(e, function (e) { return e === t !== n }); if ("string" == typeof t) { if (C.test(t)) return m.filter(t, e, n); t = m.filter(t, e) } return m.grep(e, function (e) { return u.call(t, e) >= 0 !== n }) } m.filter = function (e, t, n) { var r = t[0]; return n && (e = ":not(" + e + ")"), 1 === t.length && 1 === r.nodeType ? m.find.matchesSelector(r, e) ? [r] : [] : m.find.matches(e, m.grep(t, function (e) { return 1 === e.nodeType })) }, m.fn.extend({ find: function (e) { var t, n = this.length, r = [], i = this; if ("string" != typeof e) return this.pushStack(m(e).filter(function () { for (t = 0; t < n; t++)if (m.contains(i[t], this)) return !0 })); for (t = 0; t < n; t++)m.find(e, i[t], r); return (r = this.pushStack(n > 1 ? m.unique(r) : r)).selector = this.selector ? this.selector + " " + e : e, r }, filter: function (e) { return this.pushStack(winnow(this, e || [], !1)) }, not: function (e) { return this.pushStack(winnow(this, e || [], !0)) }, is: function (e) { return !!winnow(this, "string" == typeof e && w.test(e) ? m(e) : e || [], !1).length } }); var S, k = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/; (m.fn.init = function (e, t) { var n, r; if (!e) return this; if ("string" == typeof e) { if (!(n = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [null, e, null] : k.exec(e)) || !n[1] && t) return !t || t.jquery ? (t || S).find(e) : this.constructor(t).find(e); if (n[1]) { if (t = t instanceof m ? t[0] : t, m.merge(this, m.parseHTML(n[1], t && t.nodeType ? t.ownerDocument || t : p, !0)), x.test(n[1]) && m.isPlainObject(t)) for (n in t) m.isFunction(this[n]) ? this[n](t[n]) : this.attr(n, t[n]); return this } return (r = p.getElementById(n[2])) && r.parentNode && (this.length = 1, this[0] = r), this.context = p, this.selector = e, this } return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : m.isFunction(e) ? void 0 !== S.ready ? S.ready(e) : e(m) : (void 0 !== e.selector && (this.selector = e.selector, this.context = e.context), m.makeArray(e, this)) }).prototype = m.fn, S = m(p); var T = /^(?:parents|prev(?:Until|All))/, L = { children: !0, contents: !0, next: !0, prev: !0 }; function sibling(e, t) { for (; (e = e[t]) && 1 !== e.nodeType;); return e } m.extend({ dir: function (e, t, n) { for (var r = [], i = void 0 !== n; (e = e[t]) && 9 !== e.nodeType;)if (1 === e.nodeType) { if (i && m(e).is(n)) break; r.push(e) } return r }, sibling: function (e, t) { for (var n = []; e; e = e.nextSibling)1 === e.nodeType && e !== t && n.push(e); return n } }), m.fn.extend({ has: function (e) { var t = m(e, this), n = t.length; return this.filter(function () { for (var e = 0; e < n; e++)if (m.contains(this, t[e])) return !0 }) }, closest: function (e, t) { for (var n, r = 0, i = this.length, o = [], a = w.test(e) || "string" != typeof e ? m(e, t || this.context) : 0; r < i; r++)for (n = this[r]; n && n !== t; n = n.parentNode)if (n.nodeType < 11 && (a ? a.index(n) > -1 : 1 === n.nodeType && m.find.matchesSelector(n, e))) { o.push(n); break } return this.pushStack(o.length > 1 ? m.unique(o) : o) }, index: function (e) { return e ? "string" == typeof e ? u.call(m(e), this[0]) : u.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1 }, add: function (e, t) { return this.pushStack(m.unique(m.merge(this.get(), m(e, t)))) }, addBack: function (e) { return this.add(null == e ? this.prevObject : this.prevObject.filter(e)) } }), m.each({ parent: function (e) { var t = e.parentNode; return t && 11 !== t.nodeType ? t : null }, parents: function (e) { return m.dir(e, "parentNode") }, parentsUntil: function (e, t, n) { return m.dir(e, "parentNode", n) }, next: function (e) { return sibling(e, "nextSibling") }, prev: function (e) { return sibling(e, "previousSibling") }, nextAll: function (e) { return m.dir(e, "nextSibling") }, prevAll: function (e) { return m.dir(e, "previousSibling") }, nextUntil: function (e, t, n) { return m.dir(e, "nextSibling", n) }, prevUntil: function (e, t, n) { return m.dir(e, "previousSibling", n) }, siblings: function (e) { return m.sibling((e.parentNode || {}).firstChild, e) }, children: function (e) { return m.sibling(e.firstChild) }, contents: function (e) { return e.contentDocument || m.merge([], e.childNodes) } }, function (e, t) { m.fn[e] = function (n, r) { var i = m.map(this, t, n); return "Until" !== e.slice(-5) && (r = n), r && "string" == typeof r && (i = m.filter(r, i)), this.length > 1 && (L[e] || m.unique(i), T.test(e) && i.reverse()), this.pushStack(i) } }); var M, E = /\S+/g, A = {}; function completed() { p.removeEventListener("DOMContentLoaded", completed, !1), n.removeEventListener("load", completed, !1), m.ready() } m.Callbacks = function (e) { var t, n, r, i, o, a, s = [], l = !(e = "string" == typeof e ? A[e] || function createOptions(e) { var t = A[e] = {}; return m.each(e.match(E) || [], function (e, n) { t[n] = !0 }), t }(e) : m.extend({}, e)).once && [], u = function (d) { for (t = e.memory && d, n = !0, a = i || 0, i = 0, o = s.length, r = !0; s && a < o; a++)if (!1 === s[a].apply(d[0], d[1]) && e.stopOnFalse) { t = !1; break } r = !1, s && (l ? l.length && u(l.shift()) : t ? s = [] : c.disable()) }, c = { add: function () { if (s) { var n = s.length; !function add(t) { m.each(t, function (t, n) { var r = m.type(n); "function" === r ? e.unique && c.has(n) || s.push(n) : n && n.length && "string" !== r && add(n) }) }(arguments), r ? o = s.length : t && (i = n, u(t)) } return this }, remove: function () { return s && m.each(arguments, function (e, t) { for (var n; (n = m.inArray(t, s, n)) > -1;)s.splice(n, 1), r && (n <= o && o--, n <= a && a--) }), this }, has: function (e) { return e ? m.inArray(e, s) > -1 : !(!s || !s.length) }, empty: function () { return s = [], o = 0, this }, disable: function () { return s = l = t = void 0, this }, disabled: function () { return !s }, lock: function () { return l = void 0, t || c.disable(), this }, locked: function () { return !l }, fireWith: function (e, t) { return !s || n && !l || (t = [e, (t = t || []).slice ? t.slice() : t], r ? l.push(t) : u(t)), this }, fire: function () { return c.fireWith(this, arguments), this }, fired: function () { return !!n } }; return c }, m.extend({ Deferred: function (e) { var t = [["resolve", "done", m.Callbacks("once memory"), "resolved"], ["reject", "fail", m.Callbacks("once memory"), "rejected"], ["notify", "progress", m.Callbacks("memory")]], n = "pending", r = { state: function () { return n }, always: function () { return i.done(arguments).fail(arguments), this }, then: function () { var e = arguments; return m.Deferred(function (n) { m.each(t, function (t, o) { var a = m.isFunction(e[t]) && e[t]; i[o[1]](function () { var e = a && a.apply(this, arguments); e && m.isFunction(e.promise) ? e.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[o[0] + "With"](this === r ? n.promise() : this, a ? [e] : arguments) }) }), e = null }).promise() }, promise: function (e) { return null != e ? m.extend(e, r) : r } }, i = {}; return r.pipe = r.then, m.each(t, function (e, o) { var a = o[2], s = o[3]; r[o[1]] = a.add, s && a.add(function () { n = s }, t[1 ^ e][2].disable, t[2][2].lock), i[o[0]] = function () { return i[o[0] + "With"](this === i ? r : this, arguments), this }, i[o[0] + "With"] = a.fireWith }), r.promise(i), e && e.call(i, i), i }, when: function (e) { var t, n, r, i = 0, o = a.call(arguments), s = o.length, l = 1 !== s || e && m.isFunction(e.promise) ? s : 0, u = 1 === l ? e : m.Deferred(), c = function (e, n, r) { return function (i) { n[e] = this, r[e] = arguments.length > 1 ? a.call(arguments) : i, r === t ? u.notifyWith(n, r) : --l || u.resolveWith(n, r) } }; if (s > 1) for (t = new Array(s), n = new Array(s), r = new Array(s); i < s; i++)o[i] && m.isFunction(o[i].promise) ? o[i].promise().done(c(i, r, o)).fail(u.reject).progress(c(i, n, t)) : --l; return l || u.resolveWith(r, o), u.promise() } }), m.fn.ready = function (e) { return m.ready.promise().done(e), this }, m.extend({ isReady: !1, readyWait: 1, holdReady: function (e) { e ? m.readyWait++ : m.ready(!0) }, ready: function (e) { (!0 === e ? --m.readyWait : m.isReady) || (m.isReady = !0, !0 !== e && --m.readyWait > 0 || (M.resolveWith(p, [m]), m.fn.triggerHandler && (m(p).triggerHandler("ready"), m(p).off("ready")))) } }), m.ready.promise = function (e) { return M || (M = m.Deferred(), "complete" === p.readyState ? setTimeout(m.ready) : (p.addEventListener("DOMContentLoaded", completed, !1), n.addEventListener("load", completed, !1))), M.promise(e) }, m.ready.promise(); var P = m.access = function (e, t, n, r, i, o, a) { var s = 0, l = e.length, u = null == n; if ("object" === m.type(n)) for (s in i = !0, n) m.access(e, t, s, n[s], !0, o, a); else if (void 0 !== r && (i = !0, m.isFunction(r) || (a = !0), u && (a ? (t.call(e, r), t = null) : (u = t, t = function (e, t, n) { return u.call(m(e), n) })), t)) for (; s < l; s++)t(e[s], n, a ? r : r.call(e[s], s, t(e[s], n))); return i ? e : u ? t.call(e) : l ? t(e[0], n) : o }; function Data() { Object.defineProperty(this.cache = {}, 0, { get: function () { return {} } }), this.expando = m.expando + Data.uid++ } m.acceptData = function (e) { return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType }, Data.uid = 1, Data.accepts = m.acceptData, Data.prototype = { key: function (e) { if (!Data.accepts(e)) return 0; var t = {}, n = e[this.expando]; if (!n) { n = Data.uid++; try { t[this.expando] = { value: n }, Object.defineProperties(e, t) } catch (r) { t[this.expando] = n, m.extend(e, t) } } return this.cache[n] || (this.cache[n] = {}), n }, set: function (e, t, n) { var r, i = this.key(e), o = this.cache[i]; if ("string" == typeof t) o[t] = n; else if (m.isEmptyObject(o)) m.extend(this.cache[i], t); else for (r in t) o[r] = t[r]; return o }, get: function (e, t) { var n = this.cache[this.key(e)]; return void 0 === t ? n : n[t] }, access: function (e, t, n) { var r; return void 0 === t || t && "string" == typeof t && void 0 === n ? void 0 !== (r = this.get(e, t)) ? r : this.get(e, m.camelCase(t)) : (this.set(e, t, n), void 0 !== n ? n : t) }, remove: function (e, t) { var n, r, i, o = this.key(e), a = this.cache[o]; if (void 0 === t) this.cache[o] = {}; else { m.isArray(t) ? r = t.concat(t.map(m.camelCase)) : (i = m.camelCase(t), r = t in a ? [t, i] : (r = i) in a ? [r] : r.match(E) || []), n = r.length; for (; n--;)delete a[r[n]] } }, hasData: function (e) { return !m.isEmptyObject(this.cache[e[this.expando]] || {}) }, discard: function (e) { e[this.expando] && delete this.cache[e[this.expando]] } }; var R = new Data, O = new Data, D = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, F = /([A-Z])/g; function dataAttr(e, t, n) { var r; if (void 0 === n && 1 === e.nodeType) if (r = "data-" + t.replace(F, "-$1").toLowerCase(), "string" == typeof (n = e.getAttribute(r))) { try { n = "true" === n || "false" !== n && ("null" === n ? null : +n + "" === n ? +n : D.test(n) ? m.parseJSON(n) : n) } catch (e) { } O.set(e, t, n) } else n = void 0; return n } m.extend({ hasData: function (e) { return O.hasData(e) || R.hasData(e) }, data: function (e, t, n) { return O.access(e, t, n) }, removeData: function (e, t) { O.remove(e, t) }, _data: function (e, t, n) { return R.access(e, t, n) }, _removeData: function (e, t) { R.remove(e, t) } }), m.fn.extend({ data: function (e, t) { var n, r, i, o = this[0], a = o && o.attributes; if (void 0 === e) { if (this.length && (i = O.get(o), 1 === o.nodeType && !R.get(o, "hasDataAttrs"))) { for (n = a.length; n--;)a[n] && 0 === (r = a[n].name).indexOf("data-") && (r = m.camelCase(r.slice(5)), dataAttr(o, r, i[r])); R.set(o, "hasDataAttrs", !0) } return i } return "object" == typeof e ? this.each(function () { O.set(this, e) }) : P(this, function (t) { var n, r = m.camelCase(e); if (o && void 0 === t) return void 0 !== (n = O.get(o, e)) ? n : void 0 !== (n = O.get(o, r)) ? n : void 0 !== (n = dataAttr(o, r, void 0)) ? n : void 0; this.each(function () { var n = O.get(this, r); O.set(this, r, t), -1 !== e.indexOf("-") && void 0 !== n && O.set(this, e, t) }) }, null, t, arguments.length > 1, null, !0) }, removeData: function (e) { return this.each(function () { O.remove(this, e) }) } }), m.extend({ queue: function (e, t, n) { var r; if (e) return t = (t || "fx") + "queue", r = R.get(e, t), n && (!r || m.isArray(n) ? r = R.access(e, t, m.makeArray(n)) : r.push(n)), r || [] }, dequeue: function (e, t) { t = t || "fx"; var n = m.queue(e, t), r = n.length, i = n.shift(), o = m._queueHooks(e, t); "inprogress" === i && (i = n.shift(), r--), i && ("fx" === t && n.unshift("inprogress"), delete o.stop, i.call(e, function () { m.dequeue(e, t) }, o)), !r && o && o.empty.fire() }, _queueHooks: function (e, t) { var n = t + "queueHooks"; return R.get(e, n) || R.access(e, n, { empty: m.Callbacks("once memory").add(function () { R.remove(e, [t + "queue", n]) }) }) } }), m.fn.extend({ queue: function (e, t) { var n = 2; return "string" != typeof e && (t = e, e = "fx", n--), arguments.length < n ? m.queue(this[0], e) : void 0 === t ? this : this.each(function () { var n = m.queue(this, e, t); m._queueHooks(this, e), "fx" === e && "inprogress" !== n[0] && m.dequeue(this, e) }) }, dequeue: function (e) { return this.each(function () { m.dequeue(this, e) }) }, clearQueue: function (e) { return this.queue(e || "fx", []) }, promise: function (e, t) { var n, r = 1, i = m.Deferred(), o = this, a = this.length, s = function () { --r || i.resolveWith(o, [o]) }; for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; a--;)(n = R.get(o[a], e + "queueHooks")) && n.empty && (r++, n.empty.add(s)); return s(), i.promise(t) } }); var I, N, $ = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, B = ["Top", "Right", "Bottom", "Left"], z = function (e, t) { return e = t || e, "none" === m.css(e, "display") || !m.contains(e.ownerDocument, e) }, j = /^(?:checkbox|radio)$/i; I = p.createDocumentFragment().appendChild(p.createElement("div")), (N = p.createElement("input")).setAttribute("type", "radio"), N.setAttribute("checked", "checked"), N.setAttribute("name", "t"), I.appendChild(N), h.checkClone = I.cloneNode(!0).cloneNode(!0).lastChild.checked, I.innerHTML = "<textarea>x</textarea>", h.noCloneChecked = !!I.cloneNode(!0).lastChild.defaultValue; h.focusinBubbles = "onfocusin" in n; var U = /^key/, q = /^(?:mouse|pointer|contextmenu)|click/, H = /^(?:focusinfocus|focusoutblur)$/, V = /^([^.]*)(?:\.(.+)|)$/; function returnTrue() { return !0 } function returnFalse() { return !1 } function safeActiveElement() { try { return p.activeElement } catch (e) { } } m.event = { global: {}, add: function (e, t, n, r, i) { var o, a, s, l, u, c, d, f, h, p, g, v = R.get(e); if (v) for (n.handler && (n = (o = n).handler, i = o.selector), n.guid || (n.guid = m.guid++), (l = v.events) || (l = v.events = {}), (a = v.handle) || (a = v.handle = function (t) { return void 0 !== m && m.event.triggered !== t.type ? m.event.dispatch.apply(e, arguments) : void 0 }), u = (t = (t || "").match(E) || [""]).length; u--;)h = g = (s = V.exec(t[u]) || [])[1], p = (s[2] || "").split(".").sort(), h && (d = m.event.special[h] || {}, h = (i ? d.delegateType : d.bindType) || h, d = m.event.special[h] || {}, c = m.extend({ type: h, origType: g, data: r, handler: n, guid: n.guid, selector: i, needsContext: i && m.expr.match.needsContext.test(i), namespace: p.join(".") }, o), (f = l[h]) || ((f = l[h] = []).delegateCount = 0, d.setup && !1 !== d.setup.call(e, r, p, a) || e.addEventListener && e.addEventListener(h, a, !1)), d.add && (d.add.call(e, c), c.handler.guid || (c.handler.guid = n.guid)), i ? f.splice(f.delegateCount++, 0, c) : f.push(c), m.event.global[h] = !0) }, remove: function (e, t, n, r, i) { var o, a, s, l, u, c, d, f, h, p, g, v = R.hasData(e) && R.get(e); if (v && (l = v.events)) { for (u = (t = (t || "").match(E) || [""]).length; u--;)if (h = g = (s = V.exec(t[u]) || [])[1], p = (s[2] || "").split(".").sort(), h) { for (d = m.event.special[h] || {}, f = l[h = (r ? d.delegateType : d.bindType) || h] || [], s = s[2] && new RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)"), a = o = f.length; o--;)c = f[o], !i && g !== c.origType || n && n.guid !== c.guid || s && !s.test(c.namespace) || r && r !== c.selector && ("**" !== r || !c.selector) || (f.splice(o, 1), c.selector && f.delegateCount--, d.remove && d.remove.call(e, c)); a && !f.length && (d.teardown && !1 !== d.teardown.call(e, p, v.handle) || m.removeEvent(e, h, v.handle), delete l[h]) } else for (h in l) m.event.remove(e, h + t[u], n, r, !0); m.isEmptyObject(l) && (delete v.handle, R.remove(e, "events")) } }, trigger: function (e, t, r, i) { var o, a, s, l, u, c, d, h = [r || p], g = f.call(e, "type") ? e.type : e, v = f.call(e, "namespace") ? e.namespace.split(".") : []; if (a = s = r = r || p, 3 !== r.nodeType && 8 !== r.nodeType && !H.test(g + m.event.triggered) && (g.indexOf(".") >= 0 && (g = (v = g.split(".")).shift(), v.sort()), u = g.indexOf(":") < 0 && "on" + g, (e = e[m.expando] ? e : new m.Event(g, "object" == typeof e && e)).isTrigger = i ? 2 : 3, e.namespace = v.join("."), e.namespace_re = e.namespace ? new RegExp("(^|\\.)" + v.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, e.result = void 0, e.target || (e.target = r), t = null == t ? [e] : m.makeArray(t, [e]), d = m.event.special[g] || {}, i || !d.trigger || !1 !== d.trigger.apply(r, t))) { if (!i && !d.noBubble && !m.isWindow(r)) { for (l = d.delegateType || g, H.test(l + g) || (a = a.parentNode); a; a = a.parentNode)h.push(a), s = a; s === (r.ownerDocument || p) && h.push(s.defaultView || s.parentWindow || n) } for (o = 0; (a = h[o++]) && !e.isPropagationStopped();)e.type = o > 1 ? l : d.bindType || g, (c = (R.get(a, "events") || {})[e.type] && R.get(a, "handle")) && c.apply(a, t), (c = u && a[u]) && c.apply && m.acceptData(a) && (e.result = c.apply(a, t), !1 === e.result && e.preventDefault()); return e.type = g, i || e.isDefaultPrevented() || d._default && !1 !== d._default.apply(h.pop(), t) || !m.acceptData(r) || u && m.isFunction(r[g]) && !m.isWindow(r) && ((s = r[u]) && (r[u] = null), m.event.triggered = g, r[g](), m.event.triggered = void 0, s && (r[u] = s)), e.result } }, dispatch: function (e) { e = m.event.fix(e); var t, n, r, i, o, s, l = a.call(arguments), u = (R.get(this, "events") || {})[e.type] || [], c = m.event.special[e.type] || {}; if (l[0] = e, e.delegateTarget = this, !c.preDispatch || !1 !== c.preDispatch.call(this, e)) { for (s = m.event.handlers.call(this, e, u), t = 0; (i = s[t++]) && !e.isPropagationStopped();)for (e.currentTarget = i.elem, n = 0; (o = i.handlers[n++]) && !e.isImmediatePropagationStopped();)e.namespace_re && !e.namespace_re.test(o.namespace) || (e.handleObj = o, e.data = o.data, void 0 !== (r = ((m.event.special[o.origType] || {}).handle || o.handler).apply(i.elem, l)) && !1 === (e.result = r) && (e.preventDefault(), e.stopPropagation())); return c.postDispatch && c.postDispatch.call(this, e), e.result } }, handlers: function (e, t) { var n, r, i, o, a = [], s = t.delegateCount, l = e.target; if (s && l.nodeType && (!e.button || "click" !== e.type)) for (; l !== this; l = l.parentNode || this)if (!0 !== l.disabled || "click" !== e.type) { for (r = [], n = 0; n < s; n++)void 0 === r[i = (o = t[n]).selector + " "] && (r[i] = o.needsContext ? m(i, this).index(l) >= 0 : m.find(i, this, null, [l]).length), r[i] && r.push(o); r.length && a.push({ elem: l, handlers: r }) } return s < t.length && a.push({ elem: this, handlers: t.slice(s) }), a }, props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "), fixHooks: {}, keyHooks: { props: "char charCode key keyCode".split(" "), filter: function (e, t) { return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e } }, mouseHooks: { props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "), filter: function (e, t) { var n, r, i, o = t.button; return null == e.pageX && null != t.clientX && (r = (n = e.target.ownerDocument || p).documentElement, i = n.body, e.pageX = t.clientX + (r && r.scrollLeft || i && i.scrollLeft || 0) - (r && r.clientLeft || i && i.clientLeft || 0), e.pageY = t.clientY + (r && r.scrollTop || i && i.scrollTop || 0) - (r && r.clientTop || i && i.clientTop || 0)), e.which || void 0 === o || (e.which = 1 & o ? 1 : 2 & o ? 3 : 4 & o ? 2 : 0), e } }, fix: function (e) { if (e[m.expando]) return e; var t, n, r, i = e.type, o = e, a = this.fixHooks[i]; for (a || (this.fixHooks[i] = a = q.test(i) ? this.mouseHooks : U.test(i) ? this.keyHooks : {}), r = a.props ? this.props.concat(a.props) : this.props, e = new m.Event(o), t = r.length; t--;)e[n = r[t]] = o[n]; return e.target || (e.target = p), 3 === e.target.nodeType && (e.target = e.target.parentNode), a.filter ? a.filter(e, o) : e }, special: { load: { noBubble: !0 }, focus: { trigger: function () { if (this !== safeActiveElement() && this.focus) return this.focus(), !1 }, delegateType: "focusin" }, blur: { trigger: function () { if (this === safeActiveElement() && this.blur) return this.blur(), !1 }, delegateType: "focusout" }, click: { trigger: function () { if ("checkbox" === this.type && this.click && m.nodeName(this, "input")) return this.click(), !1 }, _default: function (e) { return m.nodeName(e.target, "a") } }, beforeunload: { postDispatch: function (e) { void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result) } } }, simulate: function (e, t, n, r) { var i = m.extend(new m.Event, n, { type: e, isSimulated: !0, originalEvent: {} }); r ? m.event.trigger(i, null, t) : m.event.dispatch.call(t, i), i.isDefaultPrevented() && n.preventDefault() } }, m.removeEvent = function (e, t, n) { e.removeEventListener && e.removeEventListener(t, n, !1) }, m.Event = function (e, t) { if (!(this instanceof m.Event)) return new m.Event(e, t); e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && !1 === e.returnValue ? returnTrue : returnFalse) : this.type = e, t && m.extend(this, t), this.timeStamp = e && e.timeStamp || m.now(), this[m.expando] = !0 }, m.Event.prototype = { isDefaultPrevented: returnFalse, isPropagationStopped: returnFalse, isImmediatePropagationStopped: returnFalse, preventDefault: function () { var e = this.originalEvent; this.isDefaultPrevented = returnTrue, e && e.preventDefault && e.preventDefault() }, stopPropagation: function () { var e = this.originalEvent; this.isPropagationStopped = returnTrue, e && e.stopPropagation && e.stopPropagation() }, stopImmediatePropagation: function () { var e = this.originalEvent; this.isImmediatePropagationStopped = returnTrue, e && e.stopImmediatePropagation && e.stopImmediatePropagation(), this.stopPropagation() } }, m.each({ mouseenter: "mouseover", mouseleave: "mouseout", pointerenter: "pointerover", pointerleave: "pointerout" }, function (e, t) { m.event.special[e] = { delegateType: t, bindType: t, handle: function (e) { var n, r = e.relatedTarget, i = e.handleObj; return r && (r === this || m.contains(this, r)) || (e.type = i.origType, n = i.handler.apply(this, arguments), e.type = t), n } } }), h.focusinBubbles || m.each({ focus: "focusin", blur: "focusout" }, function (e, t) { var n = function (e) { m.event.simulate(t, e.target, m.event.fix(e), !0) }; m.event.special[t] = { setup: function () { var r = this.ownerDocument || this, i = R.access(r, t); i || r.addEventListener(e, n, !0), R.access(r, t, (i || 0) + 1) }, teardown: function () { var r = this.ownerDocument || this, i = R.access(r, t) - 1; i ? R.access(r, t, i) : (r.removeEventListener(e, n, !0), R.remove(r, t)) } } }), m.fn.extend({ on: function (e, t, n, r, i) { var o, a; if ("object" == typeof e) { for (a in "string" != typeof t && (n = n || t, t = void 0), e) this.on(a, t, n, e[a], i); return this } if (null == n && null == r ? (r = t, n = t = void 0) : null == r && ("string" == typeof t ? (r = n, n = void 0) : (r = n, n = t, t = void 0)), !1 === r) r = returnFalse; else if (!r) return this; return 1 === i && (o = r, (r = function (e) { return m().off(e), o.apply(this, arguments) }).guid = o.guid || (o.guid = m.guid++)), this.each(function () { m.event.add(this, e, r, n, t) }) }, one: function (e, t, n, r) { return this.on(e, t, n, r, 1) }, off: function (e, t, n) { var r, i; if (e && e.preventDefault && e.handleObj) return r = e.handleObj, m(e.delegateTarget).off(r.namespace ? r.origType + "." + r.namespace : r.origType, r.selector, r.handler), this; if ("object" == typeof e) { for (i in e) this.off(i, t, e[i]); return this } return !1 !== t && "function" != typeof t || (n = t, t = void 0), !1 === n && (n = returnFalse), this.each(function () { m.event.remove(this, e, n, t) }) }, trigger: function (e, t) { return this.each(function () { m.event.trigger(e, t, this) }) }, triggerHandler: function (e, t) { var n = this[0]; if (n) return m.event.trigger(e, t, n, !0) } }); var G = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, W = /<([\w:]+)/, Y = /<|&#?\w+;/, Z = /<(?:script|style|link)/i, K = /checked\s*(?:[^=]|=\s*.checked.)/i, X = /^$|\/(?:java|ecma)script/i, J = /^true\/(.*)/, Q = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, ee = { option: [1, "<select multiple='multiple'>", "</select>"], thead: [1, "<table>", "</table>"], col: [2, "<table><colgroup>", "</colgroup></table>"], tr: [2, "<table><tbody>", "</tbody></table>"], td: [3, "<table><tbody><tr>", "</tr></tbody></table>"], _default: [0, "", ""] }; function manipulationTarget(e, t) { return m.nodeName(e, "table") && m.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e } function disableScript(e) { return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e } function restoreScript(e) { var t = J.exec(e.type); return t ? e.type = t[1] : e.removeAttribute("type"), e } function setGlobalEval(e, t) { for (var n = 0, r = e.length; n < r; n++)R.set(e[n], "globalEval", !t || R.get(t[n], "globalEval")) } function cloneCopyEvent(e, t) { var n, r, i, o, a, s, l, u; if (1 === t.nodeType) { if (R.hasData(e) && (o = R.access(e), a = R.set(t, o), u = o.events)) for (i in delete a.handle, a.events = {}, u) for (n = 0, r = u[i].length; n < r; n++)m.event.add(t, i, u[i][n]); O.hasData(e) && (s = O.access(e), l = m.extend({}, s), O.set(t, l)) } } function getAll(e, t) { var n = e.getElementsByTagName ? e.getElementsByTagName(t || "*") : e.querySelectorAll ? e.querySelectorAll(t || "*") : []; return void 0 === t || t && m.nodeName(e, t) ? m.merge([e], n) : n } ee.optgroup = ee.option, ee.tbody = ee.tfoot = ee.colgroup = ee.caption = ee.thead, ee.th = ee.td, m.extend({ clone: function (e, t, n) { var r, i, o, a, s, l, u, c = e.cloneNode(!0), d = m.contains(e.ownerDocument, e); if (!(h.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || m.isXMLDoc(e))) for (a = getAll(c), r = 0, i = (o = getAll(e)).length; r < i; r++)s = o[r], l = a[r], void 0, "input" === (u = l.nodeName.toLowerCase()) && j.test(s.type) ? l.checked = s.checked : "input" !== u && "textarea" !== u || (l.defaultValue = s.defaultValue); if (t) if (n) for (o = o || getAll(e), a = a || getAll(c), r = 0, i = o.length; r < i; r++)cloneCopyEvent(o[r], a[r]); else cloneCopyEvent(e, c); return (a = getAll(c, "script")).length > 0 && setGlobalEval(a, !d && getAll(e, "script")), c }, buildFragment: function (e, t, n, r) { for (var i, o, a, s, l, u, c = t.createDocumentFragment(), d = [], f = 0, h = e.length; f < h; f++)if ((i = e[f]) || 0 === i) if ("object" === m.type(i)) m.merge(d, i.nodeType ? [i] : i); else if (Y.test(i)) { for (o = o || c.appendChild(t.createElement("div")), a = (W.exec(i) || ["", ""])[1].toLowerCase(), s = ee[a] || ee._default, o.innerHTML = s[1] + i.replace(G, "<$1></$2>") + s[2], u = s[0]; u--;)o = o.lastChild; m.merge(d, o.childNodes), (o = c.firstChild).textContent = "" } else d.push(t.createTextNode(i)); for (c.textContent = "", f = 0; i = d[f++];)if ((!r || -1 === m.inArray(i, r)) && (l = m.contains(i.ownerDocument, i), o = getAll(c.appendChild(i), "script"), l && setGlobalEval(o), n)) for (u = 0; i = o[u++];)X.test(i.type || "") && n.push(i); return c }, cleanData: function (e) { for (var t, n, r, i, o = m.event.special, a = 0; void 0 !== (n = e[a]); a++) { if (m.acceptData(n) && (i = n[R.expando]) && (t = R.cache[i])) { if (t.events) for (r in t.events) o[r] ? m.event.remove(n, r) : m.removeEvent(n, r, t.handle); R.cache[i] && delete R.cache[i] } delete O.cache[n[O.expando]] } } }), m.fn.extend({ text: function (e) { return P(this, function (e) { return void 0 === e ? m.text(this) : this.empty().each(function () { 1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e) }) }, null, e, arguments.length) }, append: function () { return this.domManip(arguments, function (e) { 1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || manipulationTarget(this, e).appendChild(e) }) }, prepend: function () { return this.domManip(arguments, function (e) { if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) { var t = manipulationTarget(this, e); t.insertBefore(e, t.firstChild) } }) }, before: function () { return this.domManip(arguments, function (e) { this.parentNode && this.parentNode.insertBefore(e, this) }) }, after: function () { return this.domManip(arguments, function (e) { this.parentNode && this.parentNode.insertBefore(e, this.nextSibling) }) }, remove: function (e, t) { for (var n, r = e ? m.filter(e, this) : this, i = 0; null != (n = r[i]); i++)t || 1 !== n.nodeType || m.cleanData(getAll(n)), n.parentNode && (t && m.contains(n.ownerDocument, n) && setGlobalEval(getAll(n, "script")), n.parentNode.removeChild(n)); return this }, empty: function () { for (var e, t = 0; null != (e = this[t]); t++)1 === e.nodeType && (m.cleanData(getAll(e, !1)), e.textContent = ""); return this }, clone: function (e, t) { return e = null != e && e, t = null == t ? e : t, this.map(function () { return m.clone(this, e, t) }) }, html: function (e) { return P(this, function (e) { var t = this[0] || {}, n = 0, r = this.length; if (void 0 === e && 1 === t.nodeType) return t.innerHTML; if ("string" == typeof e && !Z.test(e) && !ee[(W.exec(e) || ["", ""])[1].toLowerCase()]) { e = e.replace(G, "<$1></$2>"); try { for (; n < r; n++)1 === (t = this[n] || {}).nodeType && (m.cleanData(getAll(t, !1)), t.innerHTML = e); t = 0 } catch (e) { } } t && this.empty().append(e) }, null, e, arguments.length) }, replaceWith: function () { var e = arguments[0]; return this.domManip(arguments, function (t) { e = this.parentNode, m.cleanData(getAll(this)), e && e.replaceChild(t, this) }), e && (e.length || e.nodeType) ? this : this.remove() }, detach: function (e) { return this.remove(e, !0) }, domManip: function (e, t) { e = s.apply([], e); var n, r, i, o, a, l, u = 0, c = this.length, d = this, f = c - 1, p = e[0], g = m.isFunction(p); if (g || c > 1 && "string" == typeof p && !h.checkClone && K.test(p)) return this.each(function (n) { var r = d.eq(n); g && (e[0] = p.call(this, n, r.html())), r.domManip(e, t) }); if (c && (r = (n = m.buildFragment(e, this[0].ownerDocument, !1, this)).firstChild, 1 === n.childNodes.length && (n = r), r)) { for (o = (i = m.map(getAll(n, "script"), disableScript)).length; u < c; u++)a = n, u !== f && (a = m.clone(a, !0, !0), o && m.merge(i, getAll(a, "script"))), t.call(this[u], a, u); if (o) for (l = i[i.length - 1].ownerDocument, m.map(i, restoreScript), u = 0; u < o; u++)a = i[u], X.test(a.type || "") && !R.access(a, "globalEval") && m.contains(l, a) && (a.src ? m._evalUrl && m._evalUrl(a.src) : m.globalEval(a.textContent.replace(Q, ""))) } return this } }), m.each({ appendTo: "append", prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith" }, function (e, t) { m.fn[e] = function (e) { for (var n, r = [], i = m(e), o = i.length - 1, a = 0; a <= o; a++)n = a === o ? this : this.clone(!0), m(i[a])[t](n), l.apply(r, n.get()); return this.pushStack(r) } }); var te, ne = {}; function actualDisplay(e, t) { var r, i = m(t.createElement(e)).appendTo(t.body), o = n.getDefaultComputedStyle && (r = n.getDefaultComputedStyle(i[0])) ? r.display : m.css(i[0], "display"); return i.detach(), o } function defaultDisplay(e) { var t = p, n = ne[e]; return n || ("none" !== (n = actualDisplay(e, t)) && n || ((t = (te = (te || m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(), t.close(), n = actualDisplay(e, t), te.detach()), ne[e] = n), n } var re = /^margin/, ie = new RegExp("^(" + $ + ")(?!px)[a-z%]+$", "i"), oe = function (e) { return e.ownerDocument.defaultView.opener ? e.ownerDocument.defaultView.getComputedStyle(e, null) : n.getComputedStyle(e, null) }; function curCSS(e, t, n) { var r, i, o, a, s = e.style; return (n = n || oe(e)) && (a = n.getPropertyValue(t) || n[t]), n && ("" !== a || m.contains(e.ownerDocument, e) || (a = m.style(e, t)), ie.test(a) && re.test(t) && (r = s.width, i = s.minWidth, o = s.maxWidth, s.minWidth = s.maxWidth = s.width = a, a = n.width, s.width = r, s.minWidth = i, s.maxWidth = o)), void 0 !== a ? a + "" : a } function addGetHookIf(e, t) { return { get: function () { if (!e()) return (this.get = t).apply(this, arguments); delete this.get } } } !function () { var e, t, r = p.documentElement, i = p.createElement("div"), o = p.createElement("div"); function computePixelPositionAndBoxSizingReliable() { o.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", o.innerHTML = "", r.appendChild(i); var a = n.getComputedStyle(o, null); e = "1%" !== a.top, t = "4px" === a.width, r.removeChild(i) } o.style && (o.style.backgroundClip = "content-box", o.cloneNode(!0).style.backgroundClip = "", h.clearCloneStyle = "content-box" === o.style.backgroundClip, i.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute", i.appendChild(o), n.getComputedStyle && m.extend(h, { pixelPosition: function () { return computePixelPositionAndBoxSizingReliable(), e }, boxSizingReliable: function () { return null == t && computePixelPositionAndBoxSizingReliable(), t }, reliableMarginRight: function () { var e, t = o.appendChild(p.createElement("div")); return t.style.cssText = o.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", t.style.marginRight = t.style.width = "0", o.style.width = "1px", r.appendChild(i), e = !parseFloat(n.getComputedStyle(t, null).marginRight), r.removeChild(i), o.removeChild(t), e } })) }(), m.swap = function (e, t, n, r) { var i, o, a = {}; for (o in t) a[o] = e.style[o], e.style[o] = t[o]; for (o in i = n.apply(e, r || []), t) e.style[o] = a[o]; return i }; var ae = /^(none|table(?!-c[ea]).+)/, se = new RegExp("^(" + $ + ")(.*)$", "i"), le = new RegExp("^([+-])=(" + $ + ")", "i"), ue = { position: "absolute", visibility: "hidden", display: "block" }, ce = { letterSpacing: "0", fontWeight: "400" }, de = ["Webkit", "O", "Moz", "ms"]; function vendorPropName(e, t) { if (t in e) return t; for (var n = t[0].toUpperCase() + t.slice(1), r = t, i = de.length; i--;)if ((t = de[i] + n) in e) return t; return r } function setPositiveNumber(e, t, n) { var r = se.exec(t); return r ? Math.max(0, r[1] - (n || 0)) + (r[2] || "px") : t } function augmentWidthOrHeight(e, t, n, r, i) { for (var o = n === (r ? "border" : "content") ? 4 : "width" === t ? 1 : 0, a = 0; o < 4; o += 2)"margin" === n && (a += m.css(e, n + B[o], !0, i)), r ? ("content" === n && (a -= m.css(e, "padding" + B[o], !0, i)), "margin" !== n && (a -= m.css(e, "border" + B[o] + "Width", !0, i))) : (a += m.css(e, "padding" + B[o], !0, i), "padding" !== n && (a += m.css(e, "border" + B[o] + "Width", !0, i))); return a } function getWidthOrHeight(e, t, n) { var r = !0, i = "width" === t ? e.offsetWidth : e.offsetHeight, o = oe(e), a = "border-box" === m.css(e, "boxSizing", !1, o); if (i <= 0 || null == i) { if (((i = curCSS(e, t, o)) < 0 || null == i) && (i = e.style[t]), ie.test(i)) return i; r = a && (h.boxSizingReliable() || i === e.style[t]), i = parseFloat(i) || 0 } return i + augmentWidthOrHeight(e, t, n || (a ? "border" : "content"), r, o) + "px" } function showHide(e, t) { for (var n, r, i, o = [], a = 0, s = e.length; a < s; a++)(r = e[a]).style && (o[a] = R.get(r, "olddisplay"), n = r.style.display, t ? (o[a] || "none" !== n || (r.style.display = ""), "" === r.style.display && z(r) && (o[a] = R.access(r, "olddisplay", defaultDisplay(r.nodeName)))) : (i = z(r), "none" === n && i || R.set(r, "olddisplay", i ? n : m.css(r, "display")))); for (a = 0; a < s; a++)(r = e[a]).style && (t && "none" !== r.style.display && "" !== r.style.display || (r.style.display = t ? o[a] || "" : "none")); return e } function Tween(e, t, n, r, i) { return new Tween.prototype.init(e, t, n, r, i) } m.extend({ cssHooks: { opacity: { get: function (e, t) { if (t) { var n = curCSS(e, "opacity"); return "" === n ? "1" : n } } } }, cssNumber: { columnCount: !0, fillOpacity: !0, flexGrow: !0, flexShrink: !0, fontWeight: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, widows: !0, zIndex: !0, zoom: !0 }, cssProps: { float: "cssFloat" }, style: function (e, t, n, r) { if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) { var i, o, a, s = m.camelCase(t), l = e.style; if (t = m.cssProps[s] || (m.cssProps[s] = vendorPropName(l, s)), a = m.cssHooks[t] || m.cssHooks[s], void 0 === n) return a && "get" in a && void 0 !== (i = a.get(e, !1, r)) ? i : l[t]; "string" === (o = typeof n) && (i = le.exec(n)) && (n = (i[1] + 1) * i[2] + parseFloat(m.css(e, t)), o = "number"), null != n && n == n && ("number" !== o || m.cssNumber[s] || (n += "px"), h.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (l[t] = "inherit"), a && "set" in a && void 0 === (n = a.set(e, n, r)) || (l[t] = n)) } }, css: function (e, t, n, r) { var i, o, a, s = m.camelCase(t); return t = m.cssProps[s] || (m.cssProps[s] = vendorPropName(e.style, s)), (a = m.cssHooks[t] || m.cssHooks[s]) && "get" in a && (i = a.get(e, !0, n)), void 0 === i && (i = curCSS(e, t, r)), "normal" === i && t in ce && (i = ce[t]), "" === n || n ? (o = parseFloat(i), !0 === n || m.isNumeric(o) ? o || 0 : i) : i } }), m.each(["height", "width"], function (e, t) { m.cssHooks[t] = { get: function (e, n, r) { if (n) return ae.test(m.css(e, "display")) && 0 === e.offsetWidth ? m.swap(e, ue, function () { return getWidthOrHeight(e, t, r) }) : getWidthOrHeight(e, t, r) }, set: function (e, n, r) { var i = r && oe(e); return setPositiveNumber(0, n, r ? augmentWidthOrHeight(e, t, r, "border-box" === m.css(e, "boxSizing", !1, i), i) : 0) } } }), m.cssHooks.marginRight = addGetHookIf(h.reliableMarginRight, function (e, t) { if (t) return m.swap(e, { display: "inline-block" }, curCSS, [e, "marginRight"]) }), m.each({ margin: "", padding: "", border: "Width" }, function (e, t) { m.cssHooks[e + t] = { expand: function (n) { for (var r = 0, i = {}, o = "string" == typeof n ? n.split(" ") : [n]; r < 4; r++)i[e + B[r] + t] = o[r] || o[r - 2] || o[0]; return i } }, re.test(e) || (m.cssHooks[e + t].set = setPositiveNumber) }), m.fn.extend({ css: function (e, t) { return P(this, function (e, t, n) { var r, i, o = {}, a = 0; if (m.isArray(t)) { for (r = oe(e), i = t.length; a < i; a++)o[t[a]] = m.css(e, t[a], !1, r); return o } return void 0 !== n ? m.style(e, t, n) : m.css(e, t) }, e, t, arguments.length > 1) }, show: function () { rerror ": this._eventEmitter.addEventListener (" error ", t)} return this}}, {clave:" _ onMapClick ", valor: function _onMapClick (e) {var t = this, n = this._map.cloneEvent (e ), r = this._getTileCoordsFromMouseEvent (n); this._tileLoader.loadTile (rz, rx, ry) .then (function (e) {if ("fetching"! == e) return t._objectForEvent (e, n, "click")}). catch (function (e) {t._eventEmitter.dispatchEvent ("error", e)})}}, {clave: "_ onMapMouseMove", valor: function _onMapMouseMove (e) {var t = this , n = this._map.cloneEvent (e), r = this._getTileCoordsFromMouseEvent (n); this._tileLoader.loadTile (rz, rx, ry) .then (function (e) {if ("fetching"! == e ) return t._objectForEvent (e, n, "mousemove")}). catch (function (e) {t._eventEmitter.dispatchEvent ("error", e)})}}, {clave: "_ getTileCoordsFromMouseEvent", valor:function _getTileCoordsFromMouseEvent (e) {var t = this._map.project (e), n = this._unscale (t, this._tileSize); return nz = Math.round (this._map.getZoom ()), n}} , {key: "_ unscale", value: function _unscale (e, t) {return {x: Math.floor (ex / t), y: Math.floor (ey / t)}}}, {key: "_ objectForEvent ", valor: función _objectForEvent (e, t, n) {var r = this._map.project (t), i = this._unscale (r, this._tileSize), o = ix, a = iy, s = Math .pow (2, this._map.getZoom ()); if (o = (o + s)% s, a = (a + s)% s, e && egrid) {var l = Math.floor ((rx -o * this._tileSize) / 4), u = Math.floor ((ry-a * this._tileSize) / 4), c = this._utfDecode (por ejemplo, rid [u] .charCodeAt (l)), d = e.keys [c]; e.data.hasOwnProperty (d) && (t.data = e.data [d])} te = t.originalEvent || {tipo: n}, this._triggerEvent (n, t )}}, {clave: "_ triggerEvent", value: function _triggerEvent (e, t) {t.data? "mousemove"! == e? "click" === e && (this._eventEmitter.dispatchEvent ("featureout", {}), this._eventEmitter.dispatchEvent ("click", t)): this._eventEmitter.dispatchEvent ("mousemove", t): this._eventEmitter.dispatchEvent ("featureout", { })}}, {clave: "eliminar", valor: función eliminar () {this._eventEmitter.clear (), this._map.off ("hacer clic"), this._map.off ("mousemove")}} ,{llave:"_utfDecode",value:function _utfDecode(e){return e>=93&&e--,e>=35&&e--,e-32}}]),Interactive}();e.exports={Interactive:s}},function(e,t,n){"use strict";var r=n(2),i=n(3);e.exports=function Map(e){return e.__gm?new r(e):new i(e)}},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(){function GoogleMap(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GoogleMap),this._map=e,this._listeners={}}return r(GoogleMap,[{key:"project",value:function project(e){var t=e.latLng,n=this._map.getProjection().fromLatLngToPoint(t),r=Math.pow(2,this.getZoom());return{x:Math.floor(r*n.x),y:Math.floor(r*n.y)}}},{key:"getZoom",value:function getZoom(){return this._map.getZoom()}},{key:"on",value:function on(e,t){this._listeners[e]=this._map.addListener(e,t)}},{key:"off",value:function off(e){this._listeners[e]&&this._listeners[e].remove()}},{key:"cloneEvent",value:function cloneEvent(e){return{da:e.da,latLng:e.latLng,pixel:e.pixel}}}]),GoogleMap}();e.exports=i},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(){function LeafletMap(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LeafletMap),this._map=e,this._listeners={}}return r(LeafletMap,[{key:"project",value:function project(e){var t=e.latlng.wrap();return this._map.project(t,this._map.getZoom()).floor()}},{key:"getZoom",value:function getZoom(){return this._map.getZoom()}},{key:"on",value:function on(e,t){return this._listeners[e]=t,this._map.on(e,t)}},{key:"off",value:function off(e){return this._map.off(e,this._listeners[e])}},{key:"cloneEvent",value:function cloneEvent(e){return{containerPoint:e.containerPoint,latlng:e.latlng,layerPoint:e.layerPoint,originalEvent:e.originalEvent,target:e.target,type:e.type}}}]),LeafletMap}();e.exports=i},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(){function EventEmitter(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EventEmitter),this._listeners={click:void 0,move:void 0,out:void 0,error:void 0}}return r(EventEmitter,[{key:"dispatchEvent",value:function dispatchEvent(e,t){switch(e){case"mousemove":this._listeners.move&&this._listeners.move(t);break;case"click":this._listeners.click&&this._listeners.click(t);break;case"featureout":this._listeners.out&&this._listeners.out();break;case"error":this._listeners.error&&this._listeners.error(t)}}},{key:"addEventListener",value:function addEventListener(e,t){switch(e){case"mousemove":this._listeners.move=t;break;case"click":this._listeners.click=t;break;case"featureout":this._listeners.out=t;break;case"error":this._listeners.error=t}}},{key:"removeEventListener",value:function removeEventListener(e){switch(e){case"mousemove":delete this._listeners.move;break;case"click":delete this._listeners.click;break;case"featureout":delete this._listeners.out;break;case"error":delete this._listeners.error}}},{key:"clear",value:function clear(){this._listeners={click:void 0,move:void 0,out:void 0,error:void 0}}}]),EventEmitter}();e.exports=i},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(){function TileLoader(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TileLoader),this._url=e,this._cache={}}return r(TileLoader,[{key:"setUrl",value:function setUrl(e){this._url=e}},{key:"loadTile",value:function loadTile(e,t,n){var r=this;return this._cache[e+"_"+t+"_"+n]?Promise.resolve(this._cache[e+"_"+t+"_"+n]):(this._cache[e+"_"+t+"_"+n]="fetching",fetch(this._buildTileUrl(e,t,n)).then(this._handleLimitErrors).then(function(i){return r._cache[e+"_"+t+"_"+n]=i,i}))}},{key:"_buildTileUrl",value:function _buildTileUrl(e,t,n){var r=this._url;return r=(r=(r=r.replace(/{z}/,e)).replace(/{x}/,t)).replace(/{y}/,n)}},{key:"_handleLimitErrors",value:function _handleLimitErrors(e){return 429===e.status?e.json().then(function(e){return Promise.reject(e)}):e.json()}}]),TileLoader}();e.exports=i}])})},function(e,t,n){"use strict";var r=n(25);function CartoDBLayerGroupViewBase(e,t){t=t||{},this.interaction=[],this.nativeMap=t.nativeMap,this._mapModel=t.mapModel,e.on("change: urls",this._reload,this),e.onLayerVisibilityChanged(this._reload.bind(this)),this._reload()}CartoDBLayerGroupViewBase.prototype={_reload:function _reload(){throw new Error("_reload must be implemented")},_reloadInteraction:function _reloadInteraction(){this._clearInteraction(),this.model.forEachGroupedLayer(function(e,t){e.isVisible()&&(e.isInteractive()||this._mapModel&&this._mapModel.isFeatureInteractivityEnabled())&&this._enableInteraction(t)},this)},_clearInteraction:function _clearInteraction(){for(var e in this.interaction)this.interaction.hasOwnProperty(e)&&this.interaction[e]&&(this.interaction[e].remove(),this.interaction[e]=null)},_enableInteraction:function _enableInteraction(e){var t=this,n=this._generateTileJSON(e);if(n){var r=this.interaction[e];r&&r.remove(),this.interaction[e]=(new this.interactionClass).map(this.nativeMap).tilejson(n).on("on",function(n){t._interactionDisabled||(n.layer=e,t._manageOnEvents(t.nativeMap,n))}).on("off",function(n){t._interactionDisabled||(null!=(n=n||{}).errors&&t._manageInteractivityErrors(n),n.layer=e,t._manageOffEvents(t.nativeMap,n))})}},_manageInteractivityErrors:function _manageInteractivityErrors(e){var t=r(e);t.length>0&&this.trigger("featureError",t[0])},_generateTileJSON:function _generateTileJSON(e){if(this.model.hasURLs())return{tilejson:"2.0.0",scheme:"xyz",grids:this.model.getGridURLTemplatesWithSubdomains(e),tiles:this.model.getTileURLTemplatesWithSubdomains(),formatter:function formatter(e,t){return t}}},error:function error(e){},tilesOk:function tilesOk(){}},e.exports=CartoDBLayerGroupViewBase},function(e,t,n){"use strict";e.exports=function(e,t,n){if(n){var r={data:void 0,latLng:void 0};t.feature&&(r.data=t.feature),t.latlng&&(r.latLng={lat:t.latlng[0],lng:t.latlng[1]}),t.position&&(r.position={x:t.position.x,y:t.position.y}),n.trigger(e,r)}}},function(e,t,n){"use strict";function Base(e,t){this._type=e||"",this._column=t.getColumn(),this._mapping=t.getMapping(),this._property=t.getProperty()}Base.prototype.getType=function(){return this._type},Base.prototype.getColumn=function(){return this._column},Base.prototype.getMapping=function(){return this._mapping},Base.prototype.getProperty=function(){return this._property},e.exports=Base},function(e,t,n){"use strict";var r=n(0),i=n(1);function Base(){}r.extend(Base.prototype,i.Events),Base.prototype.$setError=function(e){this._error=e,this.trigger("error",e)},Base.prototype.$setEngine=function(e){if(this._engine&&this._engine!==e)throw new Error("CartoCSS engine cannot be changed");this._engine=e},Base.prototype.$getEngine=function(){return this._engine},e.exports=Base},function(e,t,n){"use strict";var r=n(0),i=function getFieldNames(e){return r.map(e,function(e){var t={};return t[e.name]=e.title,t})},o=n(1).Collection.extend({equals:function equals(e){var t=this.toJSON();return r.isEqual(i(t),i(e))}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(1);function Base(e,t,n){n=n||{},this._id=n.id||Base.$generateId()}r.extend(Base.prototype,i.Events),Base.prototype.getId=function(){return this._id},Base.$nextId=0,Base.$generateId=function(){return"L"+ ++Base.$nextId},Base.prototype.$getInternalModel=function(){return this._internalModel},e.exports=Base},function(e,t,n){"use strict";var r=n(24).WINDSHAFT_ERRORS,i=function WindshaftError(e,t,n){this._error=e,this.origin=n||"windshaft",this.type=function getType(e,t,n){return e&&e!==r.UNKNOWN?e:t||(e!==r.UNKNOWN?n:r.UNKNOWN)}(e.type,t,r.GENERIC),this.subtype=e.subtype,this.message=function truncateMessage(e){return e&&e.length>256?e.substring(0,256):e}(e.message),this.context=e.context,this.isLayerError(e.type)&&(this.context=e.layer&&e.layer.context,this.layerId=e.layer&&e.layer.id),this.isAnalysisError(e.type)&&e.analysis&&(this.context=e.analysis.context,this.analysisId=e.analysis.node_id||e.analysis.id)};i.prototype.isGlobalError=function(e){return!this.isLayerError(e)&&!this.isAnalysisError(e)},i.prototype.isLayerError=function(e){return(e=e||this._error.type)===r.LAYER},i.prototype.isAnalysisError=function(e){return(e=e||this._error.type)===r.ANALYSIS},e.exports=i},function(e,t,n){"use strict";e.exports={MAPS_API_BASE_URL:"api / v1 / map"}},function(e,t,n){"use strict";var r=n(132);e.exports.getVersion=function(e){if("latest"===e)e=r.target;else if(!r.versions.includes(e))throw new Error('Invalid camshaft-reference version: "'+e+'". Valid versions are: '+r.versions.join(", ")+".");return n(131)("./ "+e+" / reference.json")},e.exports.versions=r.versions},function(e,t,n){"use strict";var r=n(0),i=n(137),o=n(135),a=n(1),s=n(126),l=n(125),u=n(124),c=n(123),d=n(117),f=n(116),h=n(115),p=n(114),m=n(29),g=n(41);function Engine(e){if(!e)throw new Error("new Engine() called with no parameters");this._isNamedMap=void 0!==e.templateName,this._timeout=null,this._stackCalls=[],this._batchOptions={},this._windshaftSettings={urlTemplate:e.serverUrl,userName:e.username,client:e.client,apiKey:e.apiKey,authToken:e.authToken,templateName:e.templateName},this._windshaftClient=new p(this._windshaftSettings),this._eventEmmitter=r.extend({},a.Events),this._analysisPoller=new i,this._layersCollection=new u,this._dataviewsCollection=new l,this._cartoLayerGroup=new s({apiKey:e.apiKey,authToken:e.authToken},{layersCollection:this._layersCollection}),this._bindCartoLayerGroupError(),this._modelUpdater=new c({dataviewsCollection:this._dataviewsCollection,layerGroupModel:this._cartoLayerGroup,layersCollection:this._layersCollection})}Engine.prototype.getLayerGroup=function(){return this._cartoLayerGroup},Engine.prototype.getApiKey=function(){return this._windshaftSettings&&this._windshaftSettings.apiKey},Engine.prototype.getAuthToken=function(){return this._windshaftSettings&&this._windshaftSettings.authToken},Engine.prototype.on=function(e,t,n){this._eventEmmitter.on(e,t,n)},Engine.prototype.off=function(e,t,n){this._eventEmmitter.off(e,t,n)},Engine.prototype.reload=function(e){return e=e||{},new Promise(function(t,n){this._batchOptions=r.pick({sourceId:e.sourceId,forceFetch:this._batchOptions.forceFetch||e.forceFetch,includeFilters:e.includeFilters},r.negate(r.isUndefined)),this._stackCalls.push({success:e.success,error:e.error,resolve:t,reject:n});var i=function(){this._timeout=null,this._performReload(this._batchOptions).then(function(){this._stackCalls.forEach(function(e){e.success&&e.success(),e.resolve()}),this._stackCalls=[],this._batchOptions={}}.bind(this)).catch(function(e){this._stackCalls.forEach(function(t){t.error&&t.error(e),t.reject(e)}),this._stackCalls=[],this._batchOptions={}}.bind(this))}.bind(this);clearTimeout(this._timeout),this._timeout=setTimeout(i,100)}.bind(this))},Engine.prototype._performReload=function(e){return new Promise(function(t,n){var r=this._buildWindshaftOptions(e,function(n){this._onReloadSuccess(n,e.sourceId,e.forceFetch),t()}.bind(this),function(e){var t=this._onReloadError(e);n(t)}.bind(this));try{var i=this._buildParams(r.includeFilters),o=this._getSerializer().serialize(this._layersCollection,this._dataviewsCollection),a=new f(o,i,r);this._eventEmmitter.trigger(Engine.Events.RELOAD_STARTED),this._windshaftClient.instantiateMap(a)}catch(e){var s=new g({message:e.message});this._manageClientError(s,r)}}.bind(this))},Engine.prototype.addLayer=function(e){this._layersCollection.add(e)},Engine.prototype.removeLayer=function(e){this._layersCollection.remove(e)},Engine.prototype.moveLayer=function(e,t){var n=this._layersCollection.indexOf(e);n>=0&&n!==t&&this._layersCollection.models.splice(t,0,this._layersCollection.models.splice(n,1)[0])},Engine.prototype.addDataview=function(e){this._dataviewsCollection.add(e)},Engine.prototype.removeDataview=function(e){this._dataviewsCollection.remove(e)},Engine.prototype._onReloadSuccess=function(e,t,n){var r=new h(this._windshaftSettings,e);this._modelUpdater.updateModels(r,t,n),this._restartAnalysisPolling(),this._eventEmmitter.trigger(Engine.Events.RELOAD_SUCCESS)},Engine.prototype._onReloadError=function(e){var t=this._getSimpleWindshaftError(e);return this._modelUpdater.setErrors(e),this._eventEmmitter.trigger(Engine.Events.RELOAD_ERROR,t),t},Engine.prototype._buildWindshaftOptions=function(e,t,n){return r.extend({includeFilters:!0,success:t,error:n},r.pick(e,"sourceId","forceFetch","includeFilters"))},Engine.prototype._buildParams=function(e){var t={};return t.client=this._windshaftSettings.client,e&&!r.isEmpty(this._dataviewsCollection.getFilters())&&(t.filters=this._dataviewsCollection.getFilters()),this._windshaftSettings.apiKey?(t.api_key=this._windshaftSettings.apiKey,t):this._windshaftSettings.authToken?(t.auth_token=this._windshaftSettings.authToken,t):void console.warn("Engine initialized with no apiKeys neither authToken")},Engine.prototype._restartAnalysisPolling=function(){var e=m.getUniqueAnalysisNodes(this._layersCollection,this._dataviewsCollection);this._analysisPoller.resetAnalysisNodes(e)},Engine.prototype._getSerializer=function(){return this._isNamedMap?d:o},Engine.prototype._manageClientError=function(e,t){this._modelUpdater.setErrors([e]),t.error&&t.error([e])},Engine.prototype._bindCartoLayerGroupError=function(){this._cartoLayerGroup.on("all",function(e,t){0===e.lastIndexOf("error: ",0)&&(t=new g(t),this._eventEmmitter.trigger(Engine.Events.LAYER_ERROR,t))},this)},Engine.prototype._getSimpleWindshaftError=function(e){var t=r.find(e,function(e){return e.isGlobalError()});return!t&&e&&e.length>0&&(t=e[0]),t},Engine.Events={RELOAD_STARTED:"reload - started",RELOAD_SUCCESS:"reload - success",RELOAD_ERROR:"reload - error",LAYER_ERROR:"layer - error"},e.exports=Engine},function(e,t,n){"use strict";n.r(t);var r=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},i=function(e){return 1===e.length&&(e=function ascendingComparator(e){return function(t,n){return r(e(t),n)}}(e)),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}};var o=i(r),a=o.right,s=o.left,l=a,u=function(e,t){null==t&&(t=pair);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return o};function pair(e,t){return[e,t]}var c=function(e,t,n){var r,i,o,a,s=e.length,l=t.length,u=new Array(s*l);for(null==n&&(n=pair),r=o=0;r<s;++r)for(a=e[r],i=0;i<l;++i,++o)u[o]=n(a,t[i]);return u},d=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},f=function(e){return null===e?NaN:+e},h=function(e,t){var n,r,i=e.length,o=0,a=-1,s=0,l=0;if(null==t)for(;++a<i;)isNaN(n=f(e[a]))||(l+=(r=n-s)*(n-(s+=r/++o)));else for(;++a<i;)isNaN(n=f(t(e[a],a,e)))||(l+=(r=n-s)*(n-(s+=r/++o)));if(o>1)return l/(o-1)},p=function(e,t){var n=h(e,t);return n?Math.sqrt(n):n},m=function(e,t){var n,r,i,o=e.length,a=-1;if(null==t){for(;++a<o;)if(null!=(n=e[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=e[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=i=n;++a<o;)null!=(n=t(e[a],a,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},g=Array.prototype,v=g.slice,y=g.map,_=function(e){return function(){return e}},b=function(e){return e},w=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o},x=Math.sqrt(50),C=Math.sqrt(10),S=Math.sqrt(2),k=function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=tickIncrement(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(e-s)/a;return r&&o.reverse(),o};function tickIncrement(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=x?10:o>=C?5:o>=S?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=x?10:o>=C?5:o>=S?2:1)}function tickStep(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=x?i*=10:o>=C?i*=5:o>=S&&(i*=2),t<e?-i:i}var T=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1},L=function(){var e=b,t=m,n=T;function histogram(r){var i,o,a=r.length,s=new Array(a);for(i=0;i<a;++i)s[i]=e(r[i],i,r);var u=t(s),c=u[0],d=u[1],f=n(s,c,d);Array.isArray(f)||(f=tickStep(c,d,f),f=w(Math.ceil(c/f)*f,Math.floor(d/f)*f,f));for(var h=f.length;f[0]<=c;)f.shift(),--h;for(;f[h-1]>d;)f.pop(),--h;var p,m=new Array(h+1);for(i=0;i<=h;++i)(p=m[i]=[]).x0=i>0?f[i-1]:c,p.x1=i<h?f[i]:d;for(i=0;i<a;++i)c<=(o=s[i])&&o<=d&&m[l(f,o,0,h)].push(r[i]);return m}return histogram.value=function(t){return arguments.length?(e="function"==typeof t?t:_(t),histogram):e},histogram.domain=function(e){return arguments.length?(t="function"==typeof e?e:_([e[0],e[1]]),histogram):t},histogram.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?_(v.call(e)):_(e),histogram):n},histogram},M=function(e,t,n){if(null==n&&(n=f),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}},E=function(e,t,n){return e=y.call(e,f).sort(r),Math.ceil((n-t)/(2*(M(e,.75)-M(e,.25))*Math.pow(e.length,-1/3)))},A=function(e,t,n){return Math.ceil((n-t)/(3.5*p(e)*Math.pow(e.length,-1/3)))},P=function(e,t){var n,r,i=e.length,o=-1;if(null==t){for(;++o<i;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<i;)null!=(n=e[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<i;)null!=(n=t(e[o],o,e))&&n>r&&(r=n);return r},R=function(e,t){var n,r=e.length,i=r,o=-1,a=0;if(null==t)for(;++o<r;)isNaN(n=f(e[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=f(t(e[o],o,e)))?--i:a+=n;if(i)return a/i},O=function(e,t){var n,i=e.length,o=-1,a=[];if(null==t)for(;++o<i;)isNaN(n=f(e[o]))||a.push(n);else for(;++o<i;)isNaN(n=f(t(e[o],o,e)))||a.push(n);return M(a.sort(r),.5)},D=function(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--a]=r[t];return n},F=function(e,t){var n,r,i=e.length,o=-1;if(null==t){for(;++o<i;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<i;)null!=(n=e[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<i;)null!=(n=t(e[o],o,e))&&r>n&&(r=n);return r},I=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},N=function(e,t){if(n=e.length){var n,i,o=0,a=0,s=e[a];for(null==t&&(t=r);++o<n;)(t(i=e[o],s)<0||0!==t(s,s))&&(s=i,a=o);return 0===t(s,s)?a:void 0}},$=function(e,t,n){for(var r,i,o=(null==n?e.length:n)-(t=null==t?0:+t);o;)i=Math.random()*o--|0,r=e[o+t],e[o+t]=e[i+t],e[i+t]=r;return e},B=function(e,t){var n,r=e.length,i=-1,o=0;if(null==t)for(;++i<r;)(n=+e[i])&&(o+=n);else for(;++i<r;)(n=+t(e[i],i,e))&&(o+=n);return o},z=function(e){if(!(i=e.length))return[];for(var t=-1,n=F(e,transpose_length),r=new Array(n);++t<n;)for(var i,o=-1,a=r[t]=new Array(i);++o<i;)a[o]=e[o][t];return r};function transpose_length(e){return e.length}var j=function(){return z(arguments)};n.d(t,"bisect",function(){return l}),n.d(t,"bisectRight",function(){return a}),n.d(t,"bisectLeft",function(){return s}),n.d(t,"ascending",function(){return r}),n.d(t,"bisector",function(){return i}),n.d(t,"cross",function(){return c}),n.d(t,"descending",function(){return d}),n.d(t,"deviation",function(){return p}),n.d(t,"extent",function(){return m}),n.d(t,"histogram",function(){return L}),n.d(t,"thresholdFreedmanDiaconis",function(){return E}),n.d(t,"thresholdScott",function(){return A}),n.d(t,"thresholdSturges",function(){return T}),n.d(t,"max",function(){return P}),n.d(t,"mean",function(){return R}),n.d(t,"median",function(){return O}),n.d(t,"merge",function(){return D}),n.d(t,"min",function(){return F}),n.d(t,"pairs",function(){return u}),n.d(t,"permute",function(){return I}),n.d(t,"quantile",function(){return M}),n.d(t,"range",function(){return w}),n.d(t,"scan",function(){return N}),n.d(t,"shuffle",function(){return $}),n.d(t,"sum",function(){return B}),n.d(t,"ticks",function(){return k}),n.d(t,"tickIncrement",function(){return tickIncrement}),n.d(t,"tickStep",function(){return tickStep}),n.d(t,"transpose",function(){return z}),n.d(t,"variance",function(){return h}),n.d(t,"zip",function(){return j})},function(e,t,n){"use strict";var r=n(21),i=function(e){function OR(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OR);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(OR.__proto__||Object.getPrototypeOf(OR)).call(this,e));return t.JOIN_OPERATOR="OR",t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(OR,r),OR}();e.exports=i},function(e,t,n){"use strict";var r=n(21),i=function(e){function AND(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AND);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AND.__proto__||Object.getPrototypeOf(AND)).call(this,e));return t.JOIN_OPERATOR="AND",t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AND,r),AND}();e.exports=i},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=n(11),o={lt:{parameters:[{name:"lt",allowedTypes:["Number","Date","Object"]}]},lte:{parameters:[{name:"lte",allowedTypes:["Number","Date","Object"]}]},gt:{parameters:[{name:"gt",allowedTypes:["Number","Date","Object"]}]},gte:{parameters:[{name:"gte",allowedTypes:["Number","Date","Object"]}]},between:{parameters:[{name:"between.min",allowedTypes:["Number","Date"]},{name:"between.max",allowedTypes:["Number","Date"]}]},notBetween:{parameters:[{name:"notBetween.min",allowedTypes:["Number","Date"]},{name:"notBetween.max",allowedTypes:["Number","Date"]}]},betweenSymmetric:{parameters:[{name:"betweenSymmetric.min",allowedTypes:["Number","Date"]},{name:"betweenSymmetric.max",allowedTypes:["Number","Date"]}]},notBetweenSymmetric:{parameters:[{name:"notBetweenSymmetric.min",allowedTypes:["Number","Date"]},{name:"notBetweenSymmetric.max",allowedTypes:["Number","Date"]}]}},a=Object.freeze(Object.keys(o)),s=function(e){function Range(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Range);var r=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Range.__proto__||Object.getPrototypeOf(Range)).call(this,e,n));return r.SQL_TEMPLATES=r._getSQLTemplates(),r.ALLOWED_FILTERS=a,r.PARAMETER_SPECIFICATION=o,r._checkFilters(t),r._filters=t,r}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Range,i),r(Range,[{key:"_getSQLTemplates",value:function _getSQLTemplates(){return{lt:'<%= column %> < <%= value.query ? "(" + value.query + ")" : value %>',lte:'<%= column %> <= <%= value.query ? "(" + value.query + ")" : value %>',gt:'<%= column %> > <%= value.query ? "(" + value.query + ")" : value %>',gte:'<%= column %> >= <%= value.query ? "(" + value.query + ")" : value %>',between:"<%= column %> BETWEEN <%= value.min %> AND <%= value.max %> ",notBetween:" <%= column %> NOT BETWEEN <%= value.min %> AND <%= value.max %> ",betweenSymmetric:" <%= column %> BETWEEN SYMMETRIC <%= value.min %> AND <%= value.max %> ",notBetweenSymmetric:" <%= column %> NOT BETWEEN SYMMETRIC <%= value.min %> AND <%= value.max %> "}}}]),Range}();e.exports=s},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=n(11),o={in:{parameters:[{name:" in ",allowedTypes:["Array","String","Object"]}]},notIn:{parameters:[{name:"notIn",allowedTypes:["Array","String","Object"]}]},eq:{parameters:[{name:"eq",allowedTypes:["String","Number","Date","Object"]}]},notEq:{parameters:[{name:"notEq",allowedTypes:["String","Number","Date","Object"]}]},like:{parameters:[{name:"like",allowedTypes:["String"]}]},similarTo:{parameters:[{name:"similarTo",allowedTypes:["String"]}]}},a=Object.freeze(Object.keys(o)),s=function(e){function Category(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Category);var r=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Category.__proto__||Object.getPrototypeOf(Category)).call(this,e,n));return r.SQL_TEMPLATES=r._getSQLTemplates(),r.ALLOWED_FILTERS=a,r.PARAMETER_SPECIFICATION=o,r._checkFilters(t),r._filters=t,r}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Category,i),r(Category,[{key:"_getSQLTemplates",value:function _getSQLTemplates(){return{in:" <% if (value) { %><%= column %> IN(<%= value.query || value %>) <% } else { %> true = false <% } %> ",notIn:" <% if (value) { %><%= column %> NOT IN(<%= value.query || value %>) <% } %> ",eq:'<%= column %> = <%= value.query ? "(" + value.query + ")" : value %>',notEq:'<%= column %> != <%= value.query ? "(" + value.query + ")" : value %>',like:" <%= column %> LIKE <%= value %> ",similarTo:" <%= column %> SIMILAR TO <%= value %> "}}}]),Category}();e.exports=s},function(e,t,n){"use strict";var r=n(2);e.exports=r.extend({initialize:function initialize(){this._polygon={}},setPolygon:function setPolygon(e){this._polygon=e,this.trigger("polygonChanged",e)},getPolygon:function getPolygon(){return this._polygon},serialize:function serialize(){return encodeURIComponent(JSON.stringify(this.getPolygon()))}})},function(e,t,n){"use strict";var r=n(0),i=n(6),o=n(50),a=n(3),s=n(8);function Polygon(){this._internalModel=new o,this.type=s.POLYGON}Polygon.prototype=Object.create(i.prototype),Polygon.prototype.setPolygon=function(e){return this._checkPolygon(e),this._internalModel.setPolygon(e),this.trigger("polygonChanged",e),this},Polygon.prototype.resetPolygon=function(){return this.setPolygon({type:"Polygon",coordinates:[]})},Polygon.prototype.getPolygon=function(){return this._internalModel.getPolygon()},Polygon.prototype._checkPolygon=function(e){if(r.isUndefined(e)||r.isUndefined(e.type)||r.isUndefined(e.coordinates)||!r.isString(e.type)||!r.isArray(e.coordinates)||"Polygon"!==e.type)throw new a("filter","invalidPolygonObject")},Polygon.prototype.$getInternalModel=function(){return this._internalModel},e.exports=Polygon},function(e,t,n){"use strict";var r=n(2);e.exports=r.extend({initialize:function initialize(){this._circle={}},setCircle:function setCircle(e){this._circle=e,this.trigger("circleChanged",e)},getCircle:function getCircle(){return this._circle},serialize:function serialize(){return encodeURIComponent(JSON.stringify(this.getCircle()))}})},function(e,t,n){"use strict";var r=n(0),i=n(6),o=n(52),a=n(3),s=n(8);function Circle(){this._internalModel=new o,this.type=s.CIRCLE}Circle.prototype=Object.create(i.prototype),Circle.prototype.setCircle=function(e){return this._checkCircle(e),this._internalModel.setCircle(e),this.trigger("circleChanged",e),this},Circle.prototype.resetCircle=function(){return this.setCircle({lat:0,lng:0,radius:0})},Circle.prototype.getCircle=function(){return this._internalModel.getCircle()},Circle.prototype._checkCircle=function(e){if(r.isUndefined(e)||r.isUndefined(e.lat)||r.isUndefined(e.lng)||r.isUndefined(e.radius)||!r.isNumber(e.lat)||!r.isNumber(e.lng)||!r.isNumber(e.radius))throw new a("filter","invalidCircleObject")},Circle.prototype.$getInternalModel=function(){return this._internalModel},e.exports=Circle},function(e,t,n){"use strict";var r=n(0),i=n(2);e.exports=i.extend({initialize:function initialize(e){this._isReady=!1,this._map=e,this._debouncedTriggerBoundsChanged=r.debounce(this._triggerBoundsChanged,200),google.maps.event.addListener(this._map,"bounds_changed",this._debouncedTriggerBoundsChanged.bind(this))},getBounds:function getBounds(){if(this._isReady){var e=this._map.getBounds(),t=e.getSouthWest(),n=e.getNorthEast();return{west:t.lng(),south:t.lat(),east:n.lng(),north:n.lat()}}return{west:0,south:0,east:0,north:0}},clean:function clean(){google.maps.event.clearListeners(this._map,"bounds_changed")},_triggerBoundsChanged:function _triggerBoundsChanged(){this._isReady=!0,this.trigger("boundsChanged",this.getBounds())}})},function(e,t,n){"use strict";var r=n(6),i=n(54),o=n(18),a=n(7),s=n(8);function BoundingBoxGoogleMaps(e){if(!function _isGoogleMap(e){return a.isGoogleMapsLoaded(),e instanceof google.maps.Map}(e))throw new Error("Bounding box requires a Google Maps map but got: "+e);this.type=s.BBOX;var t=new i(e);this._internalModel=new o(t),this.listenTo(this._internalModel,"boundsChanged",this._onBoundsChanged)}BoundingBoxGoogleMaps.prototype=Object.create(r.prototype),BoundingBoxGoogleMaps.prototype.getBounds=function(){return this._internalModel.getBounds()},BoundingBoxGoogleMaps.prototype._onBoundsChanged=function(e){this.trigger("boundsChanged",e)},BoundingBoxGoogleMaps.prototype.$getInternalModel=function(){return this._internalModel},e.exports=BoundingBoxGoogleMaps},function(e,t,n){"use strict";var r=n(0),i=n(2);e.exports=i.extend({initialize:function initialize(e){this._map=e,this._debouncedTriggerBoundsChanged=r.debounce(this._triggerBoundsChanged,200),this._map.on("move zoom",this._debouncedTriggerBoundsChanged,this)},getBounds:function getBounds(){var e=this._map.getBounds(),t=e.getSouthWest(),n=e.getNorthEast();return{west:t.lng,south:t.lat,east:n.lng,north:n.lat}},clean:function clean(){this._map.off("move zoom")},_triggerBoundsChanged:function _triggerBoundsChanged(){this.trigger("boundsChanged",this.getBounds())}})},function(e,t,n){"use strict";var r=n(6),i=n(56),o=n(18),a=n(7),s=n(8);function BoundingBoxLeaflet(e){if(!function _isLeafletMap(e){return a.isLeafletLoaded(),e instanceof L.Map}(e))throw new Error("Bounding box requires a Leaflet map but got: "+e);this.type=s.BBOX;var t=new i(e);this._internalModel=new o(t),this.listenTo(this._internalModel,"boundsChanged",this._onBoundsChanged)}BoundingBoxLeaflet.prototype=Object.create(r.prototype),BoundingBoxLeaflet.prototype.getBounds=function(){return this._internalModel.getBounds()},BoundingBoxLeaflet.prototype._onBoundsChanged=function(e){this.trigger("boundsChanged",e)},BoundingBoxLeaflet.prototype.$getInternalModel=function(){return this._internalModel},e.exports=BoundingBoxLeaflet},function(e,t,n){"use strict";var r=n(0),i=n(6),o=n(18),a=n(3),s=n(8);function BoundingBox(){this._internalModel=new o,this.type=s.BBOX}BoundingBox.prototype=Object.create(i.prototype),BoundingBox.prototype.setBounds=function(e){return this._checkBounds(e),this._internalModel.setBounds(e),this.trigger("boundsChanged",e),this},BoundingBox.prototype.resetBounds=function(){return this.setBounds({west:0,south:0,east:0,north:0})},BoundingBox.prototype.getBounds=function(){return this._internalModel.getBounds()},BoundingBox.prototype._checkBounds=function(e){if(r.isUndefined(e)||r.isUndefined(e.west)||r.isUndefined(e.south)||r.isUndefined(e.east)||r.isUndefined(e.north)||!r.isNumber(e.west)||!r.isNumber(e.south)||!r.isNumber(e.east)||!r.isNumber(e.north))throw new a("filter","invalidBoundsObject")},BoundingBox.prototype.$getInternalModel=function(){return this._internalModel},e.exports=BoundingBox},function(e,t,n){"use strict";var r=n(58),i=n(57),o=n(55),a=n(53),s=n(51),l=n(49),u=n(48),c=n(47),d=n(46);e.exports={BoundingBox:r,BoundingBoxLeaflet:i,BoundingBoxGoogleMaps:o,Circle:a,Polygon:s,Category:l,Range:u,AND:c,OR:d}},function(e,t,n){"use strict";var r=n(0);e.exports=function parseTimeSeriesData(e,t,n,i){if(!e)return null;var o=r.compact(e),a=r.max(o,function(e){return e.freq||0});return{bins:function _createBins(e,t){return e.map(function(e){return{index:e.bin,start:e.start,end:e.end,min:e.min,max:e.max,freq:e.freq,normalized:r.isFinite(e.freq)&&t>0?e.freq/t:0}})}(o,r.isFinite(a.freq)&&0!==a.freq?a.freq:null),nulls:t||0,offset:function secondsToHours(e){return e/3600}(i),totalAmount:n}}},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n(32),a=n(60),s=n(5).timeAggregation,l=n(5).isValidTimeAggregation;function TimeSeries(e,t,n){this._initialize(e,t,n),this._aggregation=this._options.aggregation,this._offset=_hoursToSeconds(this._options.offset),this._localTimezone=this._options.useLocalTimezone}function _hoursToSeconds(e){return 3600*e}TimeSeries.prototype=Object.create(i.prototype),TimeSeries.prototype.DEFAULTS={aggregation:s.AUTO,offset:0,useLocalTimezone:!1},TimeSeries.prototype.getData=function(){return this._internalModel?a(this._internalModel.get("data"),this._internalModel.get("nulls"),this._internalModel.get("totalAmount"),this._internalModel.getCurrentOffset()):null},TimeSeries.prototype.setAggregation=function(e){return this._validateAggregation(e),this._changeProperty("aggregation",e),this},TimeSeries.prototype.getAggregation=function(){return this._aggregation},TimeSeries.prototype.setOffset=function(e){return this._validateOffset(e),this._changeProperty("offset",_hoursToSeconds(e)),this},TimeSeries.prototype.getOffset=function(){return function _secondsToHours(e){return e/3600}(this._offset)},TimeSeries.prototype.useLocalTimezone=function(e){return this._validateLocalTimezone(e),this._changeProperty("localTimezone",e),this},TimeSeries.prototype.isUsingLocalTimezone=function(){return this._localTimezone},TimeSeries.prototype._checkOptions=function(e){if(r.isUndefined(e))throw this._getValidationError("timeSeriesOptionsRequired");this._validateAggregation(e.aggregation),this._validateOffset(e.offset),this._validateLocalTimezone(e.useLocalTimezone)},TimeSeries.prototype._validateAggregation=function(e){if(!l(e))throw this._getValidationError("timeSeriesInvalidAggregation")},TimeSeries.prototype._validateOffset=function(e){if(!r.isFinite(e)||Math.floor(e)!==e||e<-12||e>14)throw this._getValidationError("timeSeriesInvalidOffset")},TimeSeries.prototype._validateLocalTimezone=function(e){if(!r.isBoolean(e))throw this._getValidationError("timeSeriesInvalidUselocaltimezone")},TimeSeries.prototype._createInternalModel=function(e){this._internalModel=new o({source:this._source.$getInternalModel(),column:this._column,aggregation:this._aggregation,offset:this._offset,localTimezone:this._localTimezone,sync_on_bbox_change:!!this._boundingBoxFilter,sync_on_circle_change:!!this._circleFilter,sync_on_polygon_change:!!this._polygonFilter,enabled:this._enabled,column_type:"date"},{engine:e,bboxFilter:this._boundingBoxFilter&&this._boundingBoxFilter.$getInternalModel(),circleFilter:this._circleFilter&&this._circleFilter.$getInternalModel(),polygonFilter:this._polygonFilter&&this._polygonFilter.$getInternalModel()})},e.exports=TimeSeries},function(e,t,n){"use strict";var r=n(0);e.exports=function parseHistogramData(e,t,n){if(!e)return null;var i=r.compact(e),o=r.max(i,function(e){return e.freq||0});return{bins:function _createBins(e,t){return e.map(function(e){return r.extend(e,{normalized:r.isFinite(e.freq)&&t>0?e.freq/t:0})})}(i,r.isFinite(o.freq)&&0!==o.freq?o.freq:null),nulls:t||0,totalAmount:n}}},function(e,t,n){"use strict";var r={getLocalOffset:function(){return-60*(new Date).getTimezoneOffset()}};e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(19),o=n(2),a=n(31);e.exports=o.extend({defaults:{url:"",data:[],localTimezone:!1,localOffset:0,hasBeenFetched:!1},url:function url(){var e=[],t=this.get("column_type"),n=this._getCurrentOffset(),i=this.get("aggregation")||"auto";if(e.push("no_filters = 1"),"number"===t&&this.get("bins")?e.push("bins = "+this.get("bins")):"date"===t&&(e.push("aggregation = "+i),r.isFinite(n)&&e.push("offset = "+n)),this.get("apiKey"))e.push("api_key = "+this.get("apiKey"));else if(this.get("authToken")){var o=this.get("authToken");o instanceof Array?r.each(o,function(t){e.push("auth_token[] = "+t)}):e.push("auth_token = "+o)}var a=this.get("start"),s=this.get("end");return r.isFinite(a)&&r.isFinite(s)&&(e.push("start = "+a),e.push("end = "+s)),this.get("url")+" ? "+e.join(" & ")},initialize:function initialize(){this.sync=i.bind(this),this._initBinds()},_initBinds:function _initBinds(){this.on("change: url",function(){this.refresh()},this),this.on("change: aggregation change: offset",function(){"date"===this.get("column_type")&&this.get("aggregation")&&this.refresh()},this),this.on("change: bins",function(){"number"===this.get("column_type")&&this.refresh()},this),this.on("change: localTimezone",function(){this.refresh()},this),this.on("change: column",function(){this.set("aggregation","auto",{silent:!0})}),this.on("sync",function(){this.set("hasBeenFetched",!0)})},setUrl:function setUrl(e){if(!e)throw new Error("url not specified");this.set("url",e)},setBins:function setBins(e){this.set("bins",e,{silent:void 0===e})},getData:function getData(){return this.get("data")},parse:function parse(e){var t=e.aggregation||this.get("aggregation"),n=e.bins_count||0,i=e.bin_width,o="date"===this.get("column_type")?e.timestamp_start:e.bins_start,s={};return s.data=new Array(n),t&&(s.aggregation=t,this.set("aggregation",t,{silent:!0})),r.each(e.bins,function(e){s.data[e.bin]=e}),"date"===this.get("column_type")?(s.data=a.fillTimestampBuckets(s.data,o,t,n,"totals"),n=s.data.length):a.fillNumericBuckets(s.data,o,i,n),s.data.length>0&&(s.start=s.data[0].start,s.end=s.data[s.data.length-1].end),s.bins=n,s},refresh:function refresh(){this.fetch()},_getCurrentOffset:function _getCurrentOffset(){return this.get("localTimezone")?this.get("localOffset"):this.get("offset")}})},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n(32),a=n(62);function Histogram(e,t,n){this._initialize(e,t,n),this._bins=this._options.bins,this._start=this._options.start,this._end=this._options.end}Histogram.prototype=Object.create(i.prototype),Histogram.prototype.DEFAULTS={bins:10},Histogram.prototype.getData=function(){return this._internalModel?a(this._internalModel.get("data"),this._internalModel.get("nulls"),this._internalModel.get("totalAmount")):null},Histogram.prototype.setColumn=function(e){i.prototype.setColumn.apply(this,arguments),this._start=null,this._end=null},Histogram.prototype.setBins=function(e){return this._validateBins(e),this._changeProperty("bins",e),this},Histogram.prototype.getBins=function(){return this._bins},Histogram.prototype.setStartEnd=function(e,t){return this._validateStartEnd(e,t),this._changeProperties({start:e,end:t}),this},Histogram.prototype.getStart=function(){return this._start||this._internalModel.get("start")},Histogram.prototype.getEnd=function(){return this._end||this._internalModel.get("end")},Histogram.prototype.getDistributionType=function(){if(this._internalModel){var e=this._internalModel.getData();return this._internalModel.getDistributionType(e)}return null},Histogram.prototype._validateBins=function(e){if(!r.isFinite(e)||e<1||Math.floor(e)!==e)throw this._getValidationError("histogramInvalidBins")},Histogram.prototype._validateStartEnd=function(e,t){var n=[e,t];if(!r.every(n,r.isUndefined)){var i=r.every(n,function(e){return r.isNumber(e)&&!r.isNaN(e)}),o=r.every(n,r.isNull);if(!i&&!o)throw this._getValidationError("histogramInvalidStartEnd")}},Histogram.prototype._checkOptions=function(e){if(r.isUndefined(e))throw this._getValidationError("histogramOptionsRequired");this._validateBins(e.bins),this._validateStartEnd(e.start,e.end)},Histogram.prototype._createInternalModel=function(e){this._internalModel=new o({source:this._source.$getInternalModel(),column:this._column,bins:this._bins,start:this._start,end:this._end,sync_on_bbox_change:!!this._boundingBoxFilter,sync_on_circle_change:!!this._circleFilter,sync_on_polygon_change:!!this._polygonFilter,enabled:this._enabled,column_type:"number"},{engine:e,bboxFilter:this._boundingBoxFilter&&this._boundingBoxFilter.$getInternalModel(),circleFilter:this._circleFilter&&this._circleFilter.$getInternalModel(),polygonFilter:this._polygonFilter&&this._polygonFilter.$getInternalModel()})},e.exports=Histogram},function(e,t,n){"use strict";e.exports=function parseFormulaData(e,t,n){return{nulls:e,operation:t,result:n}}},function(e,t,n){"use strict";var r=n(0),i=n(20);e.exports=i.extend({defaults:r.extend({type:"formula",data:""},i.prototype.defaults),initialize:function initialize(){i.prototype.initialize.apply(this,arguments),this.on("change: column change: operation",this._reloadAndForceFetch,this)},parse:function parse(e){return{data:e.result,nulls:e.nulls}},toJSON:function toJSON(){return{type:"formula",source:{id:this.getSourceId()},options:{column:this.get("column"),operation:this.get("operation")}}}},{ATTRS_NAMES:i.ATTRS_NAMES.concat(["column","operation"])})},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n(5),a=n(67),s=n(66);function Formula(e,t,n){this._initialize(e,t,n),this._operation=this._options.operation}Formula.prototype=Object.create(i.prototype),Formula.prototype.setOperation=function(e){return this._checkOperation(e),this._changeProperty("operation",e),this},Formula.prototype.getOperation=function(){return this._operation},Formula.prototype.getData=function(){return this._internalModel?s(this._internalModel.get("nulls"),this._operation,this._internalModel.get("data")):null},Formula.prototype.DEFAULTS={operation:o.operation.COUNT},Formula.prototype._checkOptions=function(e){if(r.isUndefined(e))throw this._getValidationError("formulaOptionsRequired");this._checkOperation(e.operation)},Formula.prototype._checkOperation=function(e){if(r.isUndefined(e)||!o.isValidOperation(e))throw this._getValidationError("formulaInvalidOperation")},Formula.prototype._createInternalModel=function(e){this._internalModel=new a({source:this._source.$getInternalModel(),column:this._column,operation:this._operation,sync_on_bbox_change:!!this._boundingBoxFilter,sync_on_circle_change:!!this._circleFilter,sync_on_polygon_change:!!this._polygonFilter,enabled:this._enabled},{engine:e,bboxFilter:this._boundingBoxFilter&&this._boundingBoxFilter.$getInternalModel(),circleFilter:this._circleFilter&&this._circleFilter.$getInternalModel(),polygonFilter:this._polygonFilter&&this._polygonFilter.$getInternalModel()})},e.exports=Formula},function(e,t,n){"use strict";var r=n(0);e.exports=function parseCategoryData(e,t,n,i,o,a){return e?{count:t,max:n,min:i,nulls:o,operation:a,categories:function _createCategories(e){return r.map(e,function(e){return{group:e.agg,name:e.name,value:e.value}})}(e)}:null}},function(e,t,n){"use strict";var r=n(2);e.exports=r.extend({isEmpty:function isEmpty(){throw new Error("Filters must implement the.isEmpty method")},toJSON:function toJSON(){throw new Error("Filters must implement the.toJSON method")},remove:function remove(){this.trigger("destroy",this),this.stopListening()}})},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(70);e.exports=o.extend({defaults:{rejectAll:!1},initialize:function initialize(){this.rejectedCategories=new i.Collection,this.acceptedCategories=new i.Collection,this._initBinds()},_initBinds:function _initBinds(){this.listenTo(this.rejectedCategories,"add remove",function(){this.set("rejectAll",!1)}),this.listenTo(this.acceptedCategories,"add remove",function(){this.set("rejectAll",!1)})},isEmpty:function isEmpty(){return 0===this.rejectedCategories.size()&&0===this.acceptedCategories.size()&&!this.get("rejectAll")},accept:function accept(e,t){e=r.isArray(e)?e:[e],r.each(e,function(e){var t={name:e},n=this.rejectedCategories.where(t),r=this.acceptedCategories.where(t);n.length>0?this.rejectedCategories.remove(n):r.length||this.acceptedCategories.add(t)},this),!1!==t&&this.applyFilter()},acceptAll:function acceptAll(){this.set("rejectAll",!1),this.cleanFilter()},isAccepted:function isAccepted(e){return this.acceptedCategories.where({name:e}).length>0},reject:function reject(e,t){e=r.isArray(e)?e:[e],r.each(e,function(e){var t={name:e},n=this.acceptedCategories.where(t),r=this.rejectedCategories.where(t);n.length>0?this.acceptedCategories.remove(n):r.length||this.rejectedCategories.add(t)},this),!1!==t&&this.applyFilter()},isRejected:function isRejected(e){var t=this.acceptedCategories.size();return this.rejectedCategories.where({name:e}).length>0||(t>0&&0===this.acceptedCategories.where({name:e}).length||!!this.get("rejectAll"))},rejectAll:function rejectAll(){this.set("rejectAll",!0),this.cleanFilter()},cleanFilter:function cleanFilter(e){this.acceptedCategories.reset(),this.rejectedCategories.reset(),!1!==e&&this.applyFilter()},applyFilter:function applyFilter(){this.trigger("change",this)},areAllRejected:function areAllRejected(){return this.get("rejectAll")},toJSON:function toJSON(){var e={},t=this.rejectedCategories.size(),n=this.acceptedCategories.size(),i={accept:r.pluck(this.acceptedCategories.toJSON(),"name")},o={reject:r.pluck(this.rejectedCategories.toJSON(),"name")};this.get("rejectAll")?e={accept:[]}:n>0?e=i:t>0&&0===n&&(e=o);var a={};return a[this.get("dataviewId")]=e,a},getAcceptedCategoryNames:function getAcceptedCategoryNames(){return this.acceptedCategories.map(function(e){return e.get("name")})},getRejectedCategoryNames:function getRejectedCategoryNames(){return this.rejectedCategories.map(function(e){return e.get("name")})}})},function(e,t,n){"use strict";var r=n(0),i=n(2);e.exports=i.extend({defaults:{url:"",totalCount:0,categoriesCount:0},url:function url(){var url=this.get("url"),e=[];if(this.get("apiKey"))url+=" ? api_key = "+this.get("apiKey");else if(this.get("authToken")){var t=this.get("authToken");t instanceof Array?r.each(t,function(t){e.push("auth_token[] = "+t)}):e.push("auth_token = "+t),url+=" ? "+e.join(" & ")}return url},initialize:function initialize(){this.bind("change: url",function(){this.fetch()},this)},setUrl:function setUrl(e){this.set("url",e)},parse:function parse(e){return{categoriesCount:e.categoriesCount,totalCount:r.reduce(r.pluck(e.categories,"value"),function(e,t){return e+t},0)}}})},function(e,t,n){"use strict";var r=n(2);e.exports=r.extend({defaults:{name:"",agg:!1,value:0}})},function(e,t,n){"use strict";var r=n(0),i=n(2),o=n(19),a=n(33);e.exports=i.extend({defaults:{q:"",data:[],url:""},url:function url(){var url=this.get("url")+" / search ? q = "+encodeURIComponent(this.get("q"));if(this.get("apiKey"))url+=" & api_key="+this.get("apiKey");else if(this.get("authToken")){var e=this.get("authToken");e instanceof Array?r.each(e,function(e){url+=" & auth_token[]="+e}):url+=" & auth_token="+e}return url},initialize:function initialize(e,t){this._data=new a(null,{aggregationModel:t.aggregationModel}),this.sync=o.bind(this)},fetchIfSearchIsApplied:function fetchIfSearchIsApplied(){this.isSearchApplied()&&this.fetch()},setData:function setData(e){var t=this._parseData(e);this._data.reset(t),this.set("data",t)},getData:function getData(){return this._data},getSize:function getSize(){return this._data.size()},getCount:function getCount(){return this.getSize()},isValid:function isValid(){return!!this.get("q")},resetData:function resetData(){this.setData([]),this.set("q","")},getSearchQuery:function getSearchQuery(){return this.get("q")},isSearchApplied:function isSearchApplied(){return this.isValid()&&this.getSize()>0},_parseData:function _parseData(e){var t=[];return r.each(e,function(e){e.agg||t.push({selected:!1,name:(e.category||e.name).toString(),agg:e.agg,value:e.value})},this),t},parse:function parse(e){var t=this._parseData(e.categories);return this._data.reset(t),{data:t}},fetch:function fetch(e){if(e=e||{},this.trigger("loading",this),e.success)var t=e&&e.success;return i.prototype.fetch.call(this,r.extend(e,{success:function(){t&&t(arguments),this.trigger("loaded",this)}.bind(this),error:function(e,t){(!t||t&&"abort"!==t.statusText)&&this.trigger("error",e,t)}.bind(this)}))}})},function(e,t,n){"use strict";var r=n(0),i=n(20),o=n(74),a=n(72),s=n(33);e.exports=i.extend({defaults:r.extend({type:"category",filterEnabled:!1,categories:6,allCategoryNames:[]},i.prototype.defaults),_getDataviewSpecificURLParams:function _getDataviewSpecificURLParams(){return["own_filter = "+(this.get("filterEnabled")?1:0),"categories = "+this.get("categories")]},initialize:function initialize(e,t){i.prototype.initialize.call(this,e,t),this._rangeModel=new a({apiKey:this._engine.getApiKey(),authToken:this._engine.getAuthToken()}),this._data=new s(null,{aggregationModel:this}),this._searchModel=new o({apiKey:this._engine.getApiKey(),authToken:this._engine.getAuthToken()},{aggregationModel:this}),this.on("change: column change: aggregation change: aggregation_column",this._reloadAndForceFetch,this),this.on("change: categories",this.refresh,this),this.bind("change: url",function(){this._searchModel.set({url:this.get("url")})},this),this.once("change: url",function(){this._rangeModel.setUrl(this.get("url"))},this),this._rangeModel.bind("change: totalCount change: categoriesCount",function(){this.set({totalCount:this._rangeModel.get("totalCount"),categoriesCount:this._rangeModel.get("categoriesCount")})},this),this._bindSearchModelEvents(),e&&e.acceptedCategories&&this.filter.accept(e.acceptedCategories)},_onMapBoundsChanged:function _onMapBoundsChanged(){i.prototype._onMapBoundsChanged.apply(this,arguments),this._searchModel.fetchIfSearchIsApplied()},_onCircleChanged:function _onCircleChanged(){i.prototype._onCircleChanged.apply(this,arguments),this._searchModel.fetchIfSearchIsApplied()},_onPolygonChanged:function _onPolygonChanged(){i.prototype._onPolygonChanged.apply(this,arguments),this._searchModel.fetchIfSearchIsApplied()},_bindSearchModelEvents:function _bindSearchModelEvents(){this.listenTo(this._searchModel,"loading",function(){this.trigger("loading",this)},this),this.listenTo(this._searchModel,"loaded",function(){this.trigger("loaded",this)},this),this.listenTo(this._searchModel,"error",function(e,t){(!t||t&&"abort"!==t.statusText)&&this.trigger("error",e,t)},this),this.listenTo(this._searchModel,"change: data",this._onSearchDataChange,this)},_onSearchDataChange:function _onSearchDataChange(){this.getSearchResult().each(function(e){var t=this.filter.isAccepted(e.get("name"));e.set("selected",t)},this),this.trigger("change: searchData",this)},_shouldFetchOnBoundingBoxChange:function _shouldFetchOnBoundingBoxChange(){return i.prototype._shouldFetchOnBoundingBoxChange.call(this)&&!this.isSearchApplied()},_shouldFetchOnCircleChange:function _shouldFetchOnCircleChange(){return i.prototype._shouldFetchOnCircleChange.call(this)&&!this.isSearchApplied()},_shouldFetchOnPolygonChange:function _shouldFetchOnPolygonChange(){return i.prototype._shouldFetchOnPolygonChange.call(this)&&!this.isSearchApplied()},enableFilter:function enableFilter(){this.set("filterEnabled",!0)},disableFilter:function disableFilter(){this.set("filterEnabled",!1)},getSearchQuery:function getSearchQuery(){return this._searchModel.getSearchQuery()},setSearchQuery:function setSearchQuery(e){this._searchModel.set("q",e)},isSearchValid:function isSearchValid(){return this._searchModel.isValid()},getSearchResult:function getSearchResult(){return this._searchModel.getData()},getSearchCount:function getSearchCount(){return this._searchModel.getCount()},applySearch:function applySearch(){this._searchModel.fetch()},isSearchApplied:function isSearchApplied(){return this._searchModel.isSearchApplied()},cleanSearch:function cleanSearch(){this._searchModel.resetData()},setupSearch:function setupSearch(){this.isSearchApplied()||this._searchModel.setData(this._data.toJSON())},getData:function getData(){return this._data},getSize:function getSize(){return this._data.size()},getCount:function getCount(){return this.get("categoriesCount")},isOtherAvailable:function isOtherAvailable(){return this._data.isOtherAvailable()},numberOfAcceptedCategories:function numberOfAcceptedCategories(){var e=this.filter.acceptedCategories,t=this.numberOfRejectedCategories(),n=this.getData(),r=n.size(),numberOfAcceptedCategories=n.reduce(function(t,n){return t+(e.where({name:n.get("name")}).length>0?1:0)},0);return t?r-t:numberOfAcceptedCategories},numberOfRejectedCategories:function numberOfRejectedCategories(){var e=this.filter.rejectedCategories;return this.getData().reduce(function(t,n){return t+(e.where({name:n.get("name")}).length>0?1:0)},0)},refresh:function refresh(){this.isSearchApplied()?this._searchModel.fetch():this.fetch()},parse:function parse(e){var t=[],n={},i=e.categories,o=[],a=[];return r.each(i,function(e){var r=e.category;o.push(r);var i=this.filter.isRejected(r);n[r]=!0,t.push({selected:!i,name:r,agg:e.agg,value:e.value})},this),this.get("filterEnabled")&&this.filter.acceptedCategories.each(function(e){var r=e.get("name");a.push(r),n[r]||t.push({selected:!0,name:r,agg:!1,value:0})},this),this._data.reset(t),{allCategoryNames:r.chain(o).union(a).unique().value(),data:t,nulls:e.nulls,min:e.min,max:e.max,count:e.count}},toJSON:function toJSON(){return{type:"aggregation",source:{id:this.getSourceId()},options:{column:this.get("column"),aggregation:this.get("aggregation"),aggregationColumn:this.get("aggregation_column")}}}},{ATTRS_NAMES:i.ATTRS_NAMES.concat(["column","aggregation","aggregation_column","acceptedCategories","categories"])})},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n(5),a=n(75),s=n(71),l=n(69);function Category(e,t,n){this.DEFAULTS.operationColumn=t,this._initialize(e,t,n),this._limit=this._options.limit,this._operation=this._options.operation,this._operationColumn=this._options.operationColumn}Category.prototype=Object.create(i.prototype),Category.prototype.setLimit=function(e){return this._checkLimit(e),this._changeProperty("limit",e,"categories"),this},Category.prototype.getLimit=function(){return this._limit},Category.prototype.setOperation=function(e){return this._checkOperation(e),this._changeProperty("operation",e,"aggregation"),this},Category.prototype.getOperation=function(){return this._operation},Category.prototype.setOperationColumn=function(e){return this._checkOperationColumn(e),this._changeProperty("operationColumn",e,"aggregation_column"),this},Category.prototype.getOperationColumn=function(){return this._operationColumn},Category.prototype.getData=function(){return this._internalModel?l(this._internalModel.get("data"),this._internalModel.get("count"),this._internalModel.get("max"),this._internalModel.get("min"),this._internalModel.get("nulls"),this._operation):null},Category.prototype.DEFAULTS={limit:6,operation:o.operation.COUNT},Category.prototype._checkOptions=function(e){if(r.isUndefined(e))throw this._getValidationError("categoryOptionsRequired");this._checkLimit(e.limit),this._checkOperation(e.operation),this._checkOperationColumn(e.operationColumn)},Category.prototype._checkLimit=function(e){if(r.isUndefined(e))throw this._getValidationError("categoryLimitRequired");if(!r.isNumber(e))throw this._getValidationError("categoryLimitNumber");if(e<=0)throw this._getValidationError("categoryLimitPositive")},Category.prototype._checkOperation=function(e){if(r.isUndefined(e)||!o.isValidOperation(e))throw this._getValidationError("categoryInvalidOperation")},Category.prototype._checkOperationColumn=function(e){if(r.isUndefined(e))throw this._getValidationError("categoryOperationRequired");if(!r.isString(e))throw this._getValidationError("categoryOperationString");if(r.isEmpty(e))throw this._getValidationError("categoryOperationEmpty")},Category.prototype._createInternalModel=function(e){this._internalModel=new a({source:this._source.$getInternalModel(),column:this._column,aggregation:this._operation,aggregation_column:this._operationColumn,categories:this._limit,sync_on_bbox_change:!!this._boundingBoxFilter,sync_on_circle_change:!!this._circleFilter,sync_on_polygon_change:!!this._polygonFilter,enabled:this._enabled},{engine:e,filter:new s,bboxFilter:this._boundingBoxFilter&&this._boundingBoxFilter.$getInternalModel(),circleFilter:this._circleFilter&&this._circleFilter.$getInternalModel(),polygonFilter:this._polygonFilter&&this._polygonFilter.$getInternalModel()})},e.exports=Category},function(e,t,n){"use strict";var r=n(76),i=n(68),o=n(65),a=n(61),s=n(5).status,l=n(5).timeAggregation;e.exports={Category:r,Formula:i,Histogram:o,TimeSeries:a,status:s,timeAggregation:l}},function(e,t,n){"use strict";var r=n(0),i=n(38),o=n(3),a=n(4),s="contentChanged";function CartoCSS(e){_checkContent(e),this._content=e}function _onContentChanged(e){return this.trigger(s,this._content),Promise.resolve(this._content)}function _checkContent(e){if(!e)throw new o("style","requiredCSS");if(!r.isString(e))throw new o("style","requiredCSSString")}CartoCSS.prototype=Object.create(i.prototype),CartoCSS.prototype.getContent=function(){return this._content},CartoCSS.prototype.setContent=function(e){return _checkContent(e),this._content=e,this.trigger("$changed",this),this._engine?this._engine.reload().then(function(){return _onContentChanged.call(this,e)}.bind(this)).catch(function(e){return Promise.reject(new a(e))}):_onContentChanged.call(this,e)},e.exports=CartoCSS},function(e,t,n){"use strict";var r=n(78);e.exports={CartoCSS:r}},function(e,t,n){"use strict";var r=n(0),i=n(12),o=n(9),a=n(28),s=n(3),l=n(4);function SQL(e){var t=this;_checkQuery(e),this._query=e,i.apply(this,arguments),this._appliedFilters.on("change: filters",function(){return t._updateInternalModelQuery(t._getQueryToApply())})}function _checkQuery(e){if(!e)throw new s("source","requiredQuery");if(!r.isString(e))throw new s("source","requiredString")}SQL.prototype=Object.create(i.prototype),SQL.prototype.setQuery=function(e){_checkQuery(e),this._query=e;var t=this._getQueryToApply();return this._internalModel?this._updateInternalModelQuery(t):(this._triggerQueryChanged(this,t),Promise.resolve())},SQL.prototype.getQuery=function(){return this._query},SQL.prototype._createInternalModel=function(e){var t=new o({id:this.getId(),type:"source",query:this._getQueryToApply()},{camshaftReference:a,engine:e});return t.on("change: query",this._triggerQueryChanged,this),t},SQL.prototype._updateInternalModelQuery=function(e){var t=this;if(this._internalModel)return this._internalModel.set("query",e,{silent:!0}),this._internalModel._engine.reload().then(function(){return t._triggerQueryChanged(t,e)}).catch(function(e){return Promise.reject(new l(e))})},SQL.prototype._getQueryToApply=function(){var e=this._appliedFilters.$getSQL();return!this._hasFiltersApplied||r.isEmpty(e)?this._query:"SELECT * FROM("+this._query+") as originalQuery WHERE "+e},SQL.prototype.addFilter=function(e){i.prototype.addFilter.apply(this,arguments),this._updateInternalModelQuery(this._getQueryToApply())},SQL.prototype.removeFilter=function(e){i.prototype.removeFilter.apply(this,arguments),this._updateInternalModelQuery(this._getQueryToApply())},SQL.prototype._triggerQueryChanged=function(e,t){this.trigger("queryChanged",t)},e.exports=SQL},function(e,t,n){"use strict";var r=n(0),i=n(12),o=n(9),a=n(28),s=n(3),l=n(4);function Dataset(e){var t=this;_checkTableName(e),this._tableName=e,i.apply(this,arguments),this._appliedFilters.on("change: filters",function(){return t._updateInternalModelQuery(t._getQueryToApply())})}function _checkTableName(e){if(r.isUndefined(e))throw new s("source","noDatasetName");if(!r.isString(e))throw new s("source","requiredDatasetString");if(r.isEmpty(e))throw new s("source","requiredDataset")}Dataset.prototype=Object.create(i.prototype),Dataset.prototype.setTableName=function(e){return _checkTableName(e),this._tableName=e,this._internalModel?this._updateInternalModelQuery(this._getQueryToApply()):(this._triggerTableNameChanged(this,e),Promise.resolve())},Dataset.prototype.getTableName=function(){return this._tableName},Dataset.prototype._createInternalModel=function(e){return new o({id:this.getId(),type:"source",query:this._getQueryToApply()},{camshaftReference:a,engine:e})},Dataset.prototype._updateInternalModelQuery=function(e){var t=this;if(this._internalModel)return this._internalModel.set("query",e,{silent:!0}),this._internalModel._engine.reload().then(function(){return t._triggerTableNameChanged(t,t._tableName)}).catch(function(e){return Promise.reject(new l(e))})},Dataset.prototype._getQueryToApply=function(){var e=this._appliedFilters.$getSQL(),t="SELECT * from "+this._tableName;return r.isEmpty(e)?t:"SELECT * FROM("+t+") as datasetQuery WHERE "+e},Dataset.prototype.addFilter=function(e){i.prototype.addFilter.apply(this,arguments),this._updateInternalModelQuery(this._getQueryToApply())},Dataset.prototype.removeFilter=function(e){i.prototype.removeFilter.apply(this,arguments),this._updateInternalModelQuery(this._getQueryToApply())},Dataset.prototype._triggerTableNameChanged=function(e,t){this.trigger("tableNameChanged",t)},e.exports=Dataset},function(e,t,n){"use strict";var r=n(81),i=n(80);e.exports={Dataset:r,SQL:i}},function(e,t,n){"use strict";function Profiler(){}function Metric(e){this.t0=null,this.name=e,this.count=0}Profiler.metrics={},Profiler._backend=null,Profiler.get=function(e){return Profiler.metrics[e]||{max:0,min:Number.MAX_VALUE,avg:0,total:0,count:0,last:0,history:"undefined"!=typeof Float32Array?new Float32Array(1024):[]}},Profiler.backend=function(e){Profiler._backend=e},Profiler.new_value=function(e,t,n,r){n=n||"i";var i=Profiler.metrics[e]=Profiler.get(e);if(i.max=Math.max(i.max,t),i.min=Math.min(i.min,t),i.total+=t,++i.count,i.avg=i.total/i.count,i.history[i.count%1024]=t,r){var o=performance.now();o-i.last>1e3&&(Profiler._backend&&Profiler._backend([n,e,i.avg]),i.last=o)}else Profiler._backend&&Profiler._backend([n,e,t])},Profiler.print_stats=function(){for(var e in Profiler.metrics){var t=Profiler.metrics[e];console.log(" === "+e+" === "),console.log(" max: "+t.max),console.log(" min: "+t.min),console.log(" avg: "+t.avg),console.log(" count: "+t.count),console.log(" total: "+t.total)}},Metric.prototype={start:function start(){return this.t0=performance.now(),this},_elapsed:function _elapsed(){return performance.now()-this.t0},end:function end(e){null!==this.t0&&(Profiler.new_value(this.name,this._elapsed(),"t",e),this.t0=null)},inc:function inc(e){e=void 0===e?1:e,Profiler.new_value(this.name,e,"i")},dec:function dec(e){e=void 0===e?1:e,Profiler.new_value(this.name,e,"d")},mark:function mark(){(++this.count,null!==this.t0)?this._elapsed()>1&&(Profiler.new_value(this.name,this.count),this.count=0,this.start()):this.start()}},Profiler.metric=function(e){return new Metric(e)},e.exports=Profiler},function(e,t,n){"use strict";function Projector(e){this.setMap(e)}Projector.prototype=new google.maps.OverlayView,Projector.prototype.draw=function(){},Projector.prototype.latLngToPixel=function(e){var t=this.getProjection();return t?t.fromLatLngToContainerPixel(e):(console.warn("Projector has no projection"),new google.maps.Point(0,0))},Projector.prototype.pixelToLatLng=function(e){var t=this.getProjection();return t?t.fromContainerPixelToLatLng(e):(console.warn("Projector has no projection"),new google.maps.LatLng(0,0))},e.exports=Projector},function(e,t,n){"use strict";var r=n(0),i=n(1),o=function GMapsLayerView(e,t){t=t||{},this.model=e,this.model.bind("change",this._onModelUpdated,this),this.mapModel=t.mapModel,this.gmapsMap=t.nativeMap,this.showLimitErrors=t.showLimitErrors};r.extend(o.prototype,i.Events),r.extend(o.prototype,{addToMap:function addToMap(){throw new Error("Subclasses of GMapsLayerView must implement addToMap")},remove:function remove(){throw new Error("Subclasses of GMapsLayerView must implement remove")},_onModelUpdated:function _onModelUpdated(){}}),e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(85),o=n(34),a=n(24),s=n(84),l=n(35),u=n(83),c="progid: DXImageTransform.Microsoft.gradient(startColorstr =#00FFFFFF, endColorstr =#00FFFFFF)",d="data: image / gif; base64, R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function setImageOpacityIE8(e,t){var n=Math.round(100*t);e.style.filter=n>=99?c:"alpha(opacity="+t+");"}var f=function GMapsCartoDBLayerGroupView(e,t){var n=this,o=[],a=t.nativeMap;r.bindAll(this,"featureOut","featureOver","featureClick");var u=r.clone(e.attributes);u.map=a;var c,d=u.featureOver,f=u.featureOut,h=u.featureClick,p=-1;u.featureOver=function(e,t,r,i,a){o[a]||n.trigger("layerenter",e,t,r,i,a),o[a]=1,d&&d.apply(this,arguments),n.featureOver&&n.featureOver.apply(this,arguments),e.timeStamp===c&&clearTimeout(p),p=setTimeout(function(){n.trigger("mouseover",e,t,r,i,a),n.trigger("layermouseover",e,t,r,i,a)},0),c=e.timeStamp},u.featureOut=function(e,t){o[t]&&n.trigger("layermouseout",t),o[t]=0,r.any(o)||n.trigger("mouseout"),f&&f.apply(this,arguments),n.featureOut&&n.featureOut.apply(this,arguments)},u.featureClick=r.debounce(function(){h&&h.apply(this,arguments),n.featureClick&&n.featureClick.apply(u,arguments)},10),this.tiles=0,this.options={tiles:t.tiles,scheme:t.scheme||"xyz",blankImage:t.blankImage||"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},this._id=function generateId(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}(),this.interactive=!0,this.tileSize=new google.maps.Size(256,256),this.cache={},r.extend(this.options,u),i.apply(this,arguments),this.projector=new s(u.map),l.apply(this,arguments)};f.prototype.interactionClass=o.Interactive,r.extend(f.prototype,l.prototype,i.prototype,{addToMap:function addToMap(){this.gmapsMap.overlayMapTypes.setAt(0,this)},remove:function remove(){var e=this._getOverlayIndex();e>=0&&this.gmapsMap.overlayMapTypes.removeAt(e),this._clearInteraction(),this.finishLoading&&this.finishLoading()},reload:function reload(){this.model.invalidate()},featureOver:function featureOver(e,t,n,r,i){var o=this.model.getLayerInLayerGroupAt(i);o&&this.trigger("featureOver",{layer:o,layerIndex:i,latlng:[t.lat(),t.lng()],position:{x:n.x,y:n.y},feature:r})},featureOut:function featureOut(e,t){var n=this.model.getLayerInLayerGroupAt(t);n&&this.trigger("featureOut",{layer:n,layerIndex:t})},featureClick:function featureClick(e,t,n,r,i){var o=this.model.getLayerInLayerGroupAt(i);o&&this.trigger("featureClick",{layer:o,layerIndex:i,latlng:[t.lat(),t.lng()],position:{x:n.x,y:n.y},feature:r})},error:function error(e){this.model&&(this.model.trigger("error",e?e.errors:"unknown error"),this.model.trigger("tileError",e?e.errors:"unknown error"))},ok:function ok(e){this.model.trigger("tileOk")},tilesOk:function tilesOk(e){this.model.trigger("tileOk")},loading:function loading(){this.trigger("loading")},finishLoading:function finishLoading(){this.trigger("load")},setOpacity:function setOpacity(e){if(isNaN(e)||e>1||e<0)throw new Error(e+" is not a valid value, should be in [0, 1] range");for(var t in this.opacity=this.options.opacity=e,this.cache){var n=this.cache[t];n.style.opacity=e,setImageOpacityIE8(n,e)}},getTile:function getTile(e,t,n){var r=this,i="ActiveXObject"in window&&!document.addEventListener;if(this.options.added=!0,!this.model.hasTileURLTemplates()){var o=t+"/"+e.x+"/"+e.y,s=this.cache[o]=new Image(256,256);return s.src=d,s.setAttribute("gTileKey",o),s.style.opacity=this.options.opacity,s}var l=this._getTile(e,t,n);i&&setImageOpacityIE8(l,this.options.opacity),l.style.opacity=this.options.opacity,0===this.tiles&&this.loading&&this.loading(),this.tiles++;var c=u.metric("cartodb-js.tile.png.load.time").start(),f=function finished(){c.end(),r.tiles--,0===r.tiles&&r.finishLoading&&r.finishLoading()};return l.onload=f,l.onerror=function(){u.metric("cartodb-js.tile.png.error").inc(),r.model.addError({type:a.WINDSHAFT_ERRORS.TILE}),f()},l},_getTile:function _getTile(e,t,n){var r=t+"/"+e.x+"/"+e.y;if(!this.cache[r]){var i=this.cache[r]=new Image(256,256);this.cache[r].src=this._getTileUrl(e,t),this.cache[r].setAttribute("gTileKey",r),this.cache[r].onerror=function(){i.style.display="none"}}return this.cache[r]},_getTileUrl:function _getTileUrl(e,t){var n=Math.pow(2,t),r="tms"===this.options.scheme?n-1-e.y:e.y,i=e.x%n;return i=i<0?e.x%n+n:i,r<0?this.options.blankImage:this.options.tiles[parseInt(i+r,10)%this.options.tiles.length].replace(/\{z\}/g,t).replace(/\{x\}/g,i).replace(/\{y\}/g,r)},_reload:function _reload(){var e;e=this.model.hasTileURLTemplates()?[this.model.getTileURLTemplatesWithSubdomains()[0]]:[d],this.options.tiles=e,this.tiles=0,this.cache={},this._reloadInteraction(),this._refreshView()},_refreshView:function _refreshView(){var e=this.gmapsMap.overlayMapTypes,t=this._getOverlayIndex();t>=0&&e.setAt(t,e.getAt(t))},_checkLayer:function _checkLayer(){if(!this.options.added)throw new Error("the layer is not still added to the map")},_getOverlayIndex:function _getOverlayIndex(){var e=this.gmapsMap.overlayMapTypes.getArray();return r.findIndex(e,function(e){return e&&e._id===this._id},this)},_newPoint:function _newPoint(e,t){return new google.maps.Point(e,t)},_manageOffEvents:function _manageOffEvents(e,t){if(this.options.featureOut)return this.options.featureOut&&this.options.featureOut(t.e,t.layer)},_manageOnEvents:function _manageOnEvents(e,t){var n=t.pixel,r=this.projector.pixelToLatLng(n);switch(t.e.type.toLowerCase()){case"mousemove":if(this.options.featureOver)return this.options.featureOver(t.e,r,n,t.data,t.layer);break;case"click":case"touchend":case"touchmove":case"mspointerup":case"pointerup":case"pointermove":this.options.featureClick&&this.options.featureClick(t.e,r,n,t.data,t.layer)}}}),e.exports=f},function(e,t,n){"use strict";var r=n(0),i=n(23),o=n(36),a=n(86),s=n(4);function GoogleMapsMapType(e,t,n){this._layers=e,this._engine=t,this._map=n,this._hoveredLayers=[],this.tileSize=new google.maps.Size(256,256),this._internalView=new a(this._engine._cartoLayerGroup,{nativeMap:n}),this._id=this._internalView._id,this._internalView.on("featureClick",this._onFeatureClick,this),this._internalView.on("featureOver",this._onFeatureOver,this),this._internalView.on("featureOut",this._onFeatureOut,this),this._internalView.on("featureError",this._onFeatureError,this)}GoogleMapsMapType.prototype.getTile=function(e,t,n){return this._internalView.getTile(e,t,n)},GoogleMapsMapType.prototype._onFeatureClick=function(e){var t=this._layers.findById(e.layer.id);o(i.events.FEATURE_CLICKED,e,t)},GoogleMapsMapType.prototype._onFeatureOver=function(e){var t=this._layers.findById(e.layer.id);t.isInteractive()&&(this._hoveredLayers[e.layerIndex]=!0,this._map.setOptions({draggableCursor:"pointer"})),o(i.events.FEATURE_OVER,e,t)},GoogleMapsMapType.prototype._onFeatureOut=function(e){var t=this._layers.findById(e.layer.id);this._hoveredLayers[e.layerIndex]=!1,r.any(this._hoveredLayers)?this._map.setOptions({draggableCursor:"pointer"}):this._map.setOptions({draggableCursor:"auto"}),o(i.events.FEATURE_OUT,e,t)},GoogleMapsMapType.prototype._onFeatureError=function(e){var t=new s(e);r.each(this._layers.toArray(),function(e){e.isInteractive()&&e.trigger(i.events.TILE_ERROR,t)})},e.exports=GoogleMapsMapType},function(e,t,n){"use strict";var r=n(0),i=n(1),o=function LeafletLayerView(e,t){t=t||{},this.model=e,this.mapModel=t.mapModel,this.leafletMap=t.nativeMap,this.leafletLayer=t.nativeLayer||this._createLeafletLayer(),this.showLimitErrors=t.showLimitErrors,this.setModel(e);var n=e.get("type")||e.get("kind");this.type=n&&n.toLowerCase()};r.extend(o.prototype,i.Events),r.extend(o.prototype,{setZIndex:function setZIndex(e){this.leafletLayer.setZIndex(e)},setModel:function setModel(e){this.model&&this.model.unbind("change",this._modelUpdated,this),this.model=e,this.model.bind("change",this._modelUpdated,this)},remove:function remove(){this.leafletMap.removeLayer(this.leafletLayer),this.notifyRemove()},notifyRemove:function notifyRemove(){this.trigger("remove",this),this.model.unbind(null,null,this),this.unbind()},reload:function reload(){this.leafletLayer.redraw()},_createLeafletLayer:function _createLeafletLayer(){throw new Error("subclasses of LeafletLayerView must implement _createLeafletLayer")}}),e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(24),o=n(88),a=n(35),s=n(34),l=function LeafletCartoDBLayerGroupView(e,t){o.apply(this,arguments),a.apply(this,arguments),this.leafletLayer.on("load",function(){this.trigger("load")}.bind(this)),this.leafletLayer.on("loading",function(){this.trigger("loading")}.bind(this)),this.leafletLayer.on("tileerror",function(e){this.model.addError({type:i.WINDSHAFT_ERRORS.TILE})}.bind(this))};(l.prototype=r.extend({},o.prototype,a.prototype,{interactionClass:s.Interactive,_createLeafletLayer:function _createLeafletLayer(){var e=new L.TileLayer(null,{opacity:.99,maxZoom:30});return e._setUrl=function(e,t){return L.TileLayer.prototype.setUrl.call(this,e,t)},e},_reload:function _reload(){var e=this.model.getTileURLTemplate(),t=this.model.getSubdomains();e||(e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),t&&L.Util.setOptions(this.leafletLayer,{subdomains:t}),this.leafletLayer._setUrl(e),this._reloadInteraction()},_manageOffEvents:function _manageOffEvents(e,t){this._onFeatureOut(t.layer)},_manageOnEvents:function _manageOnEvents(e,t){var n=e.layerPointToContainerPoint(t.layerPoint);if(!n||isNaN(n.x)||isNaN(n.y))return!1;var r=e.containerPointToLatLng(n);switch(t.e.type.toLowerCase()){case"mousemove":this._onFeatureOver(r,n,t.data,t.layer);break;case"click":this._onFeatureClicked(r,n,t.data,t.layer)}},_onFeatureClicked:function _onFeatureClicked(e,t,n,r){var i=this.model.getLayerInLayerGroupAt(r);i&&this.trigger("featureClick",{layer:i,layerIndex:r,latlng:[e.lat,e.lng],position:t,feature:n})},_onFeatureOver:function _onFeatureOver(e,t,n,r){var i=this.model.getLayerInLayerGroupAt(r);i&&this.trigger("featureOver",{layer:i,layerIndex:r,latlng:[e.lat,e.lng],position:t,feature:n})},_onFeatureOut:function _onFeatureOut(e){var t=this.model.getLayerInLayerGroupAt(e);t&&this.trigger("featureOut",{layer:t,layerIndex:e})}})).constructor=o,e.exports=l},function(e,t,n){"use strict";var r=n(0),i=n(3),o={AVG:"avg",SUM:"sum",MIN:"min",MAX:"max",MODE:"mode"},a={SAMPLE:"point-sample",GRID:"point-grid",CENTROID:"centroid"},s=[.5,1,2,4,8,16,32,64,128,256];function Aggregation(e){if(!r.isFinite(e.threshold))throw _getValidationError("thresholdRequired");if(!r.isFinite(e.threshold)||e.threshold<1||Math.floor(e.threshold)!==e.threshold)throw _getValidationError("invalidThreshold");if(!r.isFinite(e.resolution))throw _getValidationError("resolutionRequired");if(!r.contains(s,e.resolution))throw _getValidationError("invalidResolution");!function _checkValidPlacement(e){if(e&&!r.contains(r.values(a),e))throw _getValidationError("invalidPlacement")}(e.placement);var t=function _checkAndTransformColumns(e){var t=null;e&&(!function _checkColumns(e){Object.keys(e).forEach(function(t){!function _checkColumn(e,t){if(!e[t].aggregatedColumn)throw _getValidationError("columnAggregatedColumnRequired"+t);if(!r.isString(e[t].aggregatedColumn))throw _getValidationError("invalidColumnAggregatedColumn"+t);if(!e[t].aggregateFunction)throw _getValidationError("columnFunctionRequired"+t);if(!r.contains(r.values(o),e[t].aggregateFunction))throw _getValidationError("invalidColumnFunction"+t)}(e,t)})}(e),t={},Object.keys(e).forEach(function(n){t[n]=function _columnToSnakeCase(e){return{aggregate_function:e.aggregateFunction,aggregated_column:e.aggregatedColumn}}(e[n])}));return t}(e.columns),n={threshold:e.threshold,resolution:e.resolution,placement:e.placement,columns:t};return r.pick(n,r.identity)}function _getValidationError(e){return new i("aggregation",e)}Aggregation.operation=o,Aggregation.placement=a,e.exports=Aggregation},function(e,t,n){"use strict";e.exports={FEATURE_CLICKED:"featureClicked",FEATURE_OVER:"featureOver",FEATURE_OUT:"featureOut",TILE_ERROR:"featureError"}},function(e,t,n){"use strict";var r=n(37);function Categories(e){var t=e.getBucketsWithCategoryFilter(),n=e.getBucketsWithDefaultFilter();this._categories=t.map(function(e){return{name:e.filter.name,value:e.value}}),this._defaultValue=n.length>0?n[0].value:void 0,r.call(this,"categories",e)}Categories.prototype=Object.create(r.prototype),Categories.prototype.getCategories=function(){return this._categories},Categories.prototype.getDefaultValue=function(){return this._defaultValue},e.exports=Categories},function(e,t,n){"use strict";var r=n(37);function Buckets(e){var t=e.getBucketsWithRangeFilter();this._buckets=t.map(function(e){return{min:e.filter.start,max:e.filter.end,value:e.value}}),this._avg=e.getFilterAvg(),this._min=t.length>0?t[0].filter.start:void 0,this._max=t.length>0?t[t.length-1].filter.end:void 0,r.call(this,"buckets",e)}Buckets.prototype=Object.create(r.prototype),Buckets.prototype.getBuckets=function(){return this._buckets},Buckets.prototype.getAverage=function(){return this._avg},Buckets.prototype.getMin=function(){return this._min},Buckets.prototype.getMax=function(){return this._max},e.exports=Buckets},function(e,t,n){"use strict";var r=n(93),i=n(92),o=n(15);e.exports={getMetadataFromRules:function getMetadataFromRules(e){var t=[];return e.forEach(function(e){var n=new o(e);!function _isBucketsMetadata(e){return e.getBucketsWithRangeFilter().length>0}(n)?function _isCategoriesMetadata(e){return e.getBucketsWithCategoryFilter().length>0}(n)&&t.push(new i(n)):t.push(new r(n))}),t}}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t,n){var i=t.split(".").reduce(function(e,t){return(e||{})[t]},e);return r.isUndefined(i)?n:i}},function(e,t,n){"use strict";var r=n(0),i=n(22),o=i.extend({defaults:function defaults(){return r.extend(i.prototype.defaults.apply(this),{type:"torque",items:[],html:""})}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(22),o=i.extend({defaults:function defaults(){return r.extend(i.prototype.defaults.apply(this),{type:"custom_choropleth",prefix:"",suffix:"",leftLabel:"",rightLabel:"",colors:[]})}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(22),o=i.extend({defaults:function defaults(){return r.extend(i.prototype.defaults.apply(this),{type:"custom",items:[],html:""})}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(13),o=i.extend({defaults:function defaults(){return r.extend(i.prototype.defaults.apply(this),{type:"choropleth",prefix:"",suffix:"",leftLabel:"",rightLabel:"",colors:[]})},getNonResettableAttrs:function getNonResettableAttrs(){return r.union(i.prototype.getNonResettableAttrs.apply(this),["colors"])},isAvailable:function isAvailable(){return this.get("colors")&&this.get("colors").length>0}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(13),o=i.extend({defaults:function defaults(){return r.extend(i.prototype.defaults.apply(this),{type:"bubble",fillColor:"",prefix:"",suffix:"",values:[]})},getNonResettableAttrs:function getNonResettableAttrs(){return r.union(i.prototype.getNonResettableAttrs.apply(this),["values"])},isAvailable:function isAvailable(){return this.get("values")&&this.get("values").length>0}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(13),o=i.extend({defaults:function defaults(){return r.extend(i.prototype.defaults.apply(this),{type:"category",categories:[]})},getNonResettableAttrs:function getNonResettableAttrs(){return r.union(i.prototype.getNonResettableAttrs.apply(this),["categories"])},isAvailable:function isAvailable(){return this.get("categories")&&this.get("categories").length>0}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(101),o=n(100),a=n(99),s=n(98),l={bubble:{modelClass:o,definitionAttrs:[{fillColor:"color"},{topLabel:"top_label"},{bottomLabel:"bottom_label"}],dynamic:!0},category:{modelClass:i,definitionAttrs:["prefix","suffix"],dynamic:!0},choropleth:{modelClass:a,definitionAttrs:["prefix","suffix",{leftLabel:"left_label"},{rightLabel:"right_label"}],dynamic:!0},custom:{modelClass:s,definitionAttrs:[{items:"categories"},"html"]},html:{modelClass:s,definitionAttrs:[{items:"categories"},"html"]},custom_choropleth:{modelClass:n(97),definitionAttrs:["prefix","suffix",{leftLabel:"left_label"},{rightLabel:"right_label"},"colors"]},torque:{modelClass:n(96),definitionAttrs:[{items:"categories"},"html"]}},u=["title",{preHTMLSnippet:"pre_html"},{postHTMLSnippet:"post_html"}],c=function Legends(e,t){if(!t.engine)throw new Error("engine is required");this._legendsData=e||[],this._engine=t.engine,r.each(l,function(e,t){this[t]=this._createLegendModel(t,e)},this),this._findDataForLegend("html")&&(this.custom=this.html),delete this.html};c.prototype._createLegendModel=function(e,t){var n=t.modelClass,i=u.concat(t.definitionAttrs),o=this._findDataForLegend(e);o=o&&r.extend({},r.omit(o,"definition"),o.definition);var a={};r.each(i,function(e){var t=e,n=e;r.isObject(e)&&(t=e[n=Object.keys(e)[0]]),a[n]=o&&o[t]});var s=new n(a,{engine:this._engine});return o&&s.show(),s},c.prototype._findDataForLegend=function(e){return r.find(this._legendsData,{type:e})},c.prototype.hasAnyLegend=function(){var e=r.keys(l);return r.some(e,function(e){var t=this[e];return t&&t.isVisible()},this)},e.exports=c},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(39),a=i.Model.extend({defaults:{vertical_offset:0,horizontal_offset:0,position:"top|center",template:"",alternative_names:{}},initialize:function initialize(e){e=e||{},this.fields=new o(e.fields||[]),this.unset("fields")},update:function update(e){e=r.clone(e),this.fields.equals(e.fields)||this.fields.reset(e.fields),delete e.fields,e.alternative_names&&(e.alternative_names=JSON.parse(JSON.stringify(e.alternative_names))),this.set(e)},getFieldNames:function getFieldNames(){return this.fields.pluck("name")},hasFields:function hasFields(){return!this.fields.isEmpty()},hasTemplate:function hasTemplate(){return!!this.get("template")}});e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(39),a=i.Model.extend({defaults:{offset:[28,0],maxHeight:180,alternative_names:{},template_type:"mustache"},initialize:function initialize(e){e=e||{},this.fields=new o(e.fields||[]),this.unset("fields")},update:function update(e){e=r.clone(e),this.fields.equals(e.fields)||this.fields.reset(e.fields),delete e.fields,e.alternative_names&&(e.alternative_names=JSON.parse(JSON.stringify(e.alternative_names))),this.set(e)},getFieldNames:function getFieldNames(){return this.fields.pluck("name")},hasFields:function hasFields(){return!this.fields.isEmpty()},hasTemplate:function hasTemplate(){return!!this.get("template")}});e.exports=a},function(e,t,n){"use strict";var r=n(27),i=n(2).extend({initialize:function initialize(){this.bind("change:type",function(){r.error("changing layer type is not allowed, remove it and add a new one instead")})},remove:function remove(e){e=e||{},this.trigger("destroy",this,this.collection,e)},update:function update(e,t){t=t||{},this.set(e,{silent:t.silent})},show:function show(){this.set("visible",!0)},hide:function hide(){this.set("visible",!1)},isVisible:function isVisible(){return!!this.get("visible")},isHidden:function isHidden(){return!this.isVisible()},toggle:function toggle(){this.set("visible",!this.get("visible"))},setOk:function setOk(){this.unset("error")},setError:function setError(e){this.set("error",e)},getSourceId:function getSourceId(){throw new Error(".getSourceId called on a non torque/cartodb layer.")},hasSource:function hasSource(e){return!1}});e.exports=i},function(e,t,n){"use strict";var r=n(1).Model.extend({VERSION:4,initialize:function initialize(){},REPORT_ERROR_URL:"/api/v0/error",ERROR_TRACK_ENABLED:!1});e.exports=r},function(e,t,n){"use strict";var r=new(n(106));r.set({cartodb_attributions:'\xa9 <a href="https://carto.com/about-carto/" target="_blank">CARTO</a>',cartodb_logo_link:"http://www.carto.com"}),e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(107),o=n(105),a=n(104),s=n(103),l=n(102),u=n(9),c=["sql","source","sql_wrap","cartocss"],d=o.extend({defaults:{type:"CartoDB",attribution:i.get("cartodb_attributions"),visible:!0},initialize:function initialize(e,t){if(e=e||{},!(t=t||{}).engine)throw new Error("engine is required");this._engine=t.engine,e&&e.cartocss&&this.set("initialStyle",e.cartocss),e.source&&this.setSource(e.source),this.infowindow=new a(e.infowindow),this.tooltip=new s(e.tooltip),this.unset("infowindow"),this.unset("tooltip"),this.legends=new l(e.legends,{engine:this._engine}),this.unset("legends"),this.bind("change",this._onAttributeChanged,this),this.infowindow.fields.bind("reset add remove",this._reload,this),this.tooltip.fields.bind("reset add remove",this._reload,this),this.aggregation=t.aggregation,o.prototype.initialize.apply(this,arguments)},_onAttributeChanged:function _onAttributeChanged(){r.any(c,function(e){if(this.hasChanged(e))return!0},this)&&this._reload()},_reload:function _reload(){this._engine.reload({sourceId:this.get("id")})},restoreCartoCSS:function restoreCartoCSS(){this.set("cartocss",this.get("initialStyle"))},isVisible:function isVisible(){return this.get("visible")},isInteractive:function isInteractive(){return this._hasInfowindowFields()||this._hasTooltipFields()},_hasInfowindowFields:function _hasInfowindowFields(){return this.infowindow.hasFields()},_hasTooltipFields:function _hasTooltipFields(){return this.tooltip.hasFields()},getInteractiveColumnNames:function getInteractiveColumnNames(){return r.chain(["cartodb_id"]).union(this.infowindow.getFieldNames()).union(this.tooltip.getFieldNames()).uniq().value()},isInfowindowEnabled:function isInfowindowEnabled(){return this.infowindow.hasTemplate()},isTooltipEnabled:function isTooltipEnabled(){return this.tooltip.hasTemplate()},getName:function getName(){return this.get("layer_name")},getEstimatedFeatureCount:function getEstimatedFeatureCount(){var e=this.get("meta"),t=e&&e.stats;return t&&t.estimatedFeatureCount},getSourceId:function getSourceId(){var e=this.getSource();return e&&e.id},getSource:function getSource(){return this.get("source")},setSource:function setSource(e,t){this.getSource()&&this.getSource().unmarkAsSourceOf(this),e.markAsSourceOf(this),this.set("source",e,t)},hasSource:function hasSource(e){return this.getSource().equals(e)},update:function update(e){if(e.source)throw new Error('Use ".setSource" to update a layer\'s source instead of the update method');o.prototype.update.apply(this,arguments)},remove:function remove(){this.getSource().unmarkAsSourceOf(this),o.prototype.remove.apply(this,arguments)},getTableName:function getTableName(){if(this.get("source").has("options"))return this.get("source").get("options").table_name},getApiKey:function getApiKey(){return this._engine.getApiKey()}},{_checkSourceAttribute:function _checkSourceAttribute(e){if(!(e instanceof u))throw new Error("Source must be an instance of AnalysisModel")}});e.exports=d},function(e,t,n){"use strict";var r=n(0),i=n(40),o=n(108),a=n(12),s=n(38),l=n(4),u=n(3),c=n(14),d=n(94);function Layer(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.apply(this,arguments),_checkSource(e),_checkStyle(t),this._client=void 0,this._engine=void 0,this._internalModel=void 0,this._source=e,this._style=t,this._visible=!r.isBoolean(n.visible)||n.visible,this._featureClickColumns=n.featureClickColumns||[],this._featureOverColumns=n.featureOverColumns||[],this._minzoom=n.minzoom||0,this._maxzoom=n.maxzoom||void 0,this._aggregation=n.aggregation||{},function _validateAggregationColumnsAndInteractivity(e,t,n){var r=e&&Object.keys(e)||[];_validateColumnsConcordance(r,t,"featureClick"),_validateColumnsConcordance(r,n,"featureOver")}(this._aggregation.columns,this._featureClickColumns,this._featureOverColumns)}function _getInteractivityFields(e){return{fields:e.map(function(e,t){return{name:e,title:!0,position:t}})}}function _checkStyle(e){if(!(e instanceof s))throw new u("layer","nonValidStyle")}function _checkSource(e){if(!(e instanceof a))throw new u("layer","nonValidSource")}function _checkColumns(e){if(r.any(e,function(e){return!r.isString(e)}))throw new u("layer","nonValidColumns")}function _rejectAndTriggerError(e){var t=new l(e);return this.trigger(c.ERROR,t),Promise.reject(t)}function _areColumnsTheSame(e,t){return e.length===t.length&&r.isEmpty(r.difference(e,t))}function _validateColumnsConcordance(e,t,n){if(t.length>0&&e.length>0){var i=r.filter(t,function(t){return!r.contains(e,t)});if(i.length>0)throw new u("layer","wrongInteractivityColumns["+i.join(", ")+"]#"+n)}}Layer.prototype=Object.create(i.prototype),Layer.prototype.setStyle=function(e,t){var n=this._style;if(_checkStyle(e),t=t||{},n===e)return Promise.resolve();if(!this._internalModel)return this._style=e,this.trigger("styleChanged",this),Promise.resolve();if(e.$getEngine()&&e.$getEngine()!==this._internalModel._engine)throw new u("layer","differentStyleClient");return e.$getEngine()||e.$setEngine(this._engine),this._internalModel.set("cartocss",e.getContent(),{silent:!0}),this._engine.reload().then(function(){this._style=e,this.trigger("styleChanged",this)}.bind(this)).catch(_rejectAndTriggerError.bind(this))},Layer.prototype.getStyle=function(){return this._style},Layer.prototype.setSource=function(e){var t=this._source;if(_checkSource(e),t===e)return Promise.resolve();if(!this._internalModel)return this._source=e,this.trigger("sourceChanged",this),Promise.resolve();if(e.$getEngine()&&e.$getEngine()!==this._internalModel._engine)throw new u("layer","differentSourceClient");return e.$getEngine()||e.$setEngine(this._engine),this._internalModel.set("source",e.$getInternalModel(),{silent:!0}),this._engine.reload().then(function(){this._source=e,this.trigger("sourceChanged",this)}.bind(this)).catch(_rejectAndTriggerError.bind(this))},Layer.prototype.getSource=function(){return this._source},Layer.prototype.setFeatureClickColumns=function(e){var t=this._featureClickColumns;return _checkColumns(e),_areColumnsTheSame(e,t)?Promise.resolve():this._internalModel?(this._internalModel.infowindow.fields.set(_getInteractivityFields(e).fields,{silent:!0}),this._engine.reload().then(function(){this._featureClickColumns=e}.bind(this)).catch(_rejectAndTriggerError.bind(this))):(this._featureClickColumns=e,Promise.resolve())},Layer.prototype.getFeatureClickColumns=function(){return this._featureClickColumns},Layer.prototype.setFeatureOverColumns=function(e){var t=this._featureOverColumns;return _checkColumns(e),_areColumnsTheSame(e,t)?Promise.resolve():this._internalModel?(this._internalModel.tooltip.fields.set(_getInteractivityFields(e).fields,{silent:!0}),this._engine.reload().then(function(){this._featureOverColumns=e}.bind(this)).catch(_rejectAndTriggerError.bind(this))):(this._featureOverColumns=e,Promise.resolve())},Layer.prototype.getFeatureOverColumns=function(){return this._featureOverColumns},Layer.prototype.hide=function(){var e=this._visible;return this._visible=!1,this._internalModel&&this._internalModel.set("visible",!1),e&&this.trigger("visibilityChanged",!1),this},Layer.prototype.show=function(){var e=this._visible;return this._visible=!0,this._internalModel&&this._internalModel.set("visible",!0),e||this.trigger("visibilityChanged",!1),this},Layer.prototype.toggle=function(){return this.isVisible()?this.hide():this.show()},Layer.prototype.isVisible=function(){return this._visible},Layer.prototype.isHidden=function(){return!this.isVisible()},Layer.prototype.isInteractive=function(){return this.getFeatureClickColumns().length>0||this.getFeatureOverColumns().length>0},Layer.prototype.setOrder=function(e){return this._client?this._client.moveLayer(this,e):Promise.resolve()},Layer.prototype.bringToBack=function(){return this.setOrder(0)},Layer.prototype.bringToFront=function(){return this.setOrder(this._client._layers.size()-1)},Layer.prototype._createInternalModel=function(e){var t=new o({id:this._id,source:this._source.$getInternalModel(),cartocss:this._style.getContent(),visible:this._visible,infowindow:_getInteractivityFields(this._featureClickColumns),tooltip:_getInteractivityFields(this._featureOverColumns),minzoom:this._minzoom,maxzoom:this._maxzoom},{engine:e,aggregation:this._aggregation});return t.on("change:meta",function(e,t){var n=t.cartocss_meta.rules,r={styles:d.getMetadataFromRules(n)};this.trigger("metadataChanged",r)},this),t.on("change:error",function(e,t){t&&function _isStyleError(e){return e.message&&e.message.indexOf("style")>=0}(t)?this._style.$setError(new l(t)):t&&this.trigger(c.ERROR,new l(t))},this),t},Layer.prototype.$setClient=function(e){this._client||this._engine&&e._engine!==this._engine||(this._client=e)},Layer.prototype.$setEngine=function(e){this._engine||(this._engine=e,this._source.$setEngine(e),this._style.$setEngine(e),this._internalModel||(this._internalModel=this._createInternalModel(e),this._style.on("$changed",function(e){this._internalModel.set("cartocss",e.getContent(),{silent:!0})},this)))},e.exports=Layer},function(e,t,n){"use strict";var r=n(0),i=n(23),o=n(5),a=n(36),s=n(89),l=n(4),u=L.TileLayer.extend({options:{opacity:.99,maxZoom:30,attribution:o.ATTRIBUTION},initialize:function initialize(e,t,n){r.extend(this.options,n),this._layers=e,this._engine=t,this._internalView=null,this._hoveredLayers=[]},addTo:function addTo(e){return this._internalView||(this._internalView=new s(this._engine._cartoLayerGroup,{nativeMap:e,nativeLayer:this}),this._internalView.on("featureClick",this._onFeatureClick,this),this._internalView.on("featureOver",this._onFeatureOver,this),this._internalView.on("featureOut",this._onFeatureOut,this),this._internalView.on("featureError",this._onFeatureError,this)),L.TileLayer.prototype.addTo.call(this,e)},removeFrom:function removeFrom(e){return this._internalView&&(this._internalView.off("featureClick"),this._internalView.off("featureOver"),this._internalView.off("featureOut"),this._internalView.off("featureError"),this._internalView.notifyRemove()),this._internalView=null,L.TileLayer.prototype.removeFrom.call(this,e)},setUrl:void 0,_setUrl:function _setUrl(e,t){return L.TileLayer.prototype.setUrl.call(this,e,t)},_onFeatureClick:function _onFeatureClick(e){var t=this._layers.findById(e.layer.id);a(i.events.FEATURE_CLICKED,e,t)},_onFeatureOver:function _onFeatureOver(e){var t=this._layers.findById(e.layer.id);t.isInteractive()&&(this._hoveredLayers[e.layerIndex]=!0,this._map.getContainer().style.cursor="pointer"),a(i.events.FEATURE_OVER,e,t)},_onFeatureOut:function _onFeatureOut(e){var t=this._layers.findById(e.layer.id);this._hoveredLayers[e.layerIndex]=!1,r.any(this._hoveredLayers)?this._map.getContainer().style.cursor="pointer":this._map.getContainer().style.cursor="auto",a(i.events.FEATURE_OUT,e,t)},_onFeatureError:function _onFeatureError(e){var t=new l(e);r.each(this._layers.toArray(),function(e){e.isInteractive()&&e.trigger(i.events.TILE_ERROR,t)})}});e.exports=u},function(e,t,n){"use strict";var r=n(0);function Layers(e){this._layers=e||[]}Layers.prototype.add=function(e){return this._layers.push(e),e},Layers.prototype.remove=function(e){return this._layers.splice(this._layers.indexOf(e),1)},Layers.prototype.size=function(){return this._layers.length},Layers.prototype.indexOf=function(e){return this._layers.indexOf(e)},Layers.prototype.contains=function(e){return this._layers.indexOf(e)>=0},Layers.prototype.findById=function(e){return r.find(this._layers,function(t){return t.getId()===e},this)},Layers.prototype.toArray=function(){return this._layers},Layers.prototype.move=function(e,t){var n=this._layers.indexOf(e);n>=0&&n!==t&&this._layers.splice(t,0,this._layers.splice(n,1)[0])},e.exports=Layers},function(e,t,n){"use strict";var r=n(0),i=function RequestTracker(e){this._maxNumberOfRequests=e||3,this.reset()};i.prototype.track=function(e,t){this.lastRequestEquals(e)&&this.lastResponseEquals(t)||this.reset(),this.maxNumberOfRequestsReached()||(this._lastRequest=e,this._lastResponse=t,this._numberOfRequests+=1)},i.prototype.reset=function(){this._lastRequest=void 0,this._lastResponse=void 0,this._numberOfRequests=0},i.prototype.canRequestBePerformed=function(e){return!this.maxNumberOfRequestsReached()||this.maxNumberOfRequestsReached()&&!this.lastRequestEquals(e)},i.prototype.maxNumberOfRequestsReached=function(){return this._numberOfRequests===this._maxNumberOfRequests},i.prototype.lastRequestEquals=function(e){return this._lastRequest&&this._lastRequest.equals(e)},i.prototype.lastResponseEquals=function(e){return r.isEqual(this._lastResponse,e)},e.exports=i},function(e,t){var n=function(){var e,t=1,n=2;function update_progress(e,t){postMessage({action:3,callback_num:t,result:e})}var r,i,o,a=[0,-0x8000000000000000],s=[4294967295,-4294967296],l=[0,0],u=[1,0],c=[4,0],d=[4096,0],f=[16777215,0],h=[16777216,0],p=[4278190080,0],m=[4294967295,0],g=[4294967295,0x7fffffff00000000];function Object_0(){}function Throwable(){}function Exception(){}function $RuntimeException(e,t){return e.detailMessage=t,e}function RuntimeException(){}function JavaScriptException(){}function $append(e,t){e[e.explicitLength++]=t}function $appendNonNull(e,t){e[e.explicitLength++]=t}function initDim(e,t,n,r,a){var s;return s=function createFromSeed(e,t){var n=new Array(t);if(e>0)for(var r=[null,0,!1,[0,0]][e],i=0;i<t;++i)n[i]=r;return n}(a,r),$clinit_4(),wrapArray(s,i,o),s.arrayClass$=e,s.typeId$=t,s.queryId$=n,s}function setCheck(e,t,n){if(null!=n){if(e.queryId$>0&&!canCastUnsafe(n.typeId$,e.queryId$))throw new ArrayStoreException;if(e.queryId$<0&&(n.typeMarker$==nullMethod||2==n.typeId$))throw new ArrayStoreException}return e[t]=n}function Array_0(){}function $clinit_4(){$clinit_4=nullMethod,i=[],o=[],function initExpandos(e,t,n){var r,i=0;for(var o in e)(r=e[o])&&(t[i]=o,n[i]=r,++i)}(new Array_0,i,o)}function wrapArray(e,t,n){$clinit_4();for(var r=0,i=t.length;r<i;++r)e[t[r]]=n[r]}function canCast(e,t){return e&&!!E[e][t]}function canCastUnsafe(e,t){return e&&E[e][t]}function dynamicCast(e,t){if(null!=e&&!canCastUnsafe(e.typeId$,t))throw new ClassCastException;return e}function instanceOf(e,t){return null!=e&&canCast(e.typeId$,t)}function round_int(e){return~~Math.max(Math.min(e,2147483647),-2147483648)}(r=Object_0.prototype={}).getClass$=function getClass_18(){return A},r.typeMarker$=nullMethod,r.typeId$=1,(r=Throwable.prototype=new Object_0).getClass$=function getClass_22(){return P},r.typeId$=3,r.detailMessage=null,(r=Exception.prototype=new Throwable).getClass$=function getClass_13(){return R},r.typeId$=4,(r=RuntimeException.prototype=new Exception).getClass$=function getClass_19(){return O},r.typeId$=5,(r=JavaScriptException.prototype=new RuntimeException).getClass$=function getClass_0(){return D},r.typeId$=6,(r=Array_0.prototype=new Object_0).getClass$=function getClass_2(){return this.arrayClass$},r.typeId$=0,r.arrayClass$=null,r.length=0,r.queryId$=0;var v,y,_,b,w,x,C,S,k,T,L,M,E=[{},{},{1:1},{2:1},{2:1},{2:1},{2:1},{2:1,10:1},{2:1},{2:1},{2:1},{2:1},{2:1},{2:1,11:1},{2:1},{2:1},{2:1},{4:1},{5:1},{6:1},{7:1},{8:1},{9:1}];function caught(e){return null!=e&&canCast(e.typeId$,2)?e:function $JavaScriptException(e,t){return e}(new JavaScriptException)}function add(e,t){var n;return n=e[1]+t[1],create(e[0]+t[0],n)}function addTimes(e,t,n){return 0==t?e:0==n?e:add(e,create(t*n,0))}function and(e,t){return function makeFromBits(e,t){var n,r;n=4294967296*e,r=t,t<0&&(r+=4294967296);return[r,n]}(~~Math.max(Math.min(e[1]/4294967296,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/4294967296,2147483647),-2147483648),lowBits_0(e)&lowBits_0(t))}function compare(e,t){var n,r;return e[0]==t[0]&&e[1]==t[1]?0:(n=e[1]<0,r=t[1]<0,n&&!r?-1:!n&&r?1:sub(e,t)[1]<0?-1:1)}function create(e,t){var n,r;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(n=t%4294967296)+(r=4294967296*Math.floor(e/4294967296)),e=e-r+n;e<0;)e+=4294967296,t-=4294967296;for(;e>4294967295;)e-=4294967296,t+=4294967296;for(t%=0x10000000000000000;t>0x7fffffff00000000;)t-=0x10000000000000000;for(;t<-0x8000000000000000;)t+=0x10000000000000000;return[e,t]}function div(e,t){var n,r,i,o,a;if(0==t[0]&&0==t[1])throw function $ArithmeticException(e,t){return e.detailMessage=t,e}(new ArithmeticException,"/ by zero");if(0==e[0]&&0==e[1])return $clinit_10(),k;if(eq(e,($clinit_10(),b)))return eq(t,x)||eq(t,w)?b:add(n=shl(div(shr(e,1),t),1),div(o=sub(e,mul(t,n)),t));if(eq(t,b))return k;if(e[1]<0)return t[1]<0?div(neg(e),neg(t)):neg(div(neg(e),t));if(t[1]<0)return neg(div(e,neg(t)));for(a=k,o=e;compare(o,t)>=0;)0==(i=fromDouble(Math.floor(toDoubleRoundDown(o)/toDoubleRoundUp(t))))[0]&&0==i[1]&&(i=x),r=mul(i,t),a=add(a,i),o=sub(o,r);return a}function eq(e,t){return e[0]==t[0]&&e[1]==t[1]}function fromDouble(e){return isNaN(e)?($clinit_10(),k):e<-0x8000000000000000?($clinit_10(),b):e>=0x8000000000000000?($clinit_10(),_):create(e>0?Math.floor(e):Math.ceil(e),0)}function fromInt(e){var t,n;return e>-129&&e<128?(t=e+128,null==(n=(function $clinit_9(){nullMethod;v=initDim(I,0,9,256,0)}(),v)[t])&&(n=v[t]=internalFromInt(e)),n):internalFromInt(e)}function internalFromInt(e){return e>=0?[e,0]:[e+4294967296,-4294967296]}function lowBits_0(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-4294967296,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function mul(e,t){var n,r,i,o,a,s,l,u;return 0==e[0]&&0==e[1]?($clinit_10(),k):0==t[0]&&0==t[1]?($clinit_10(),k):eq(e,($clinit_10(),b))?multByMinValue(t):eq(t,b)?multByMinValue(e):e[1]<0?t[1]<0?mul(neg(e),neg(t)):neg(mul(neg(e),t)):t[1]<0?neg(mul(e,neg(t))):compare(e,S)<0&&compare(t,S)<0?create((e[1]+e[0])*(t[1]+t[0]),0):(i=e[1]%281474976710656,o=e[1]-i,n=e[0]%65536,r=e[0]-n,l=t[1]%281474976710656,u=t[1]-l,a=t[0]%65536,s=t[0]-a,addTimes(addTimes(addTimes(addTimes(addTimes(addTimes(addTimes(addTimes(addTimes(addTimes(k,o,a),i,s),i,a),r,l),r,s),r,a),n,u),n,l),n,s),n,a))}function multByMinValue(e){return 1==(1&lowBits_0(e))?($clinit_10(),b):($clinit_10(),k)}function neg(e){var t,n;return eq(e,($clinit_10(),b))?b:(t=-e[1],(n=-e[0])>4294967295&&(n-=4294967296,t+=4294967296),n<0&&(n+=4294967296,t-=4294967296),[n,t])}function pwrAsDouble(e){return e<=30?1<<e:pwrAsDouble(30)*pwrAsDouble(e-30)}function shl(e,t){var n,r,i,o;return t&=63,eq(e,($clinit_10(),b))?0==t?e:k:e[1]<0?neg(shl(neg(e),t)):(o=pwrAsDouble(t),r=e[1]*o%0x10000000000000000,i=e[0]*o,i-=n=i-i%4294967296,(r+=n)>=0x8000000000000000&&(r-=0x10000000000000000),[i,r])}function shr(e,t){var n,r;return r=pwrAsDouble(t&=63),n=e[1]/r,create(Math.floor(e[0]/r),n)}function sub(e,t){var n;return n=e[1]-t[1],create(e[0]-t[0],n)}function toDoubleRoundDown(e){var t,n;return(t=round_int(Math.log(e[1])/($clinit_10(),y)))<=48?e[1]+e[0]:(n=(1<<t-48)-1,e[1]+(e[0]-n))}function toDoubleRoundUp(e){var t,n;return(t=round_int(Math.log(e[1])/($clinit_10(),y)))<=48?e[1]+e[0]:(n=(1<<t-48)-1,e[1]+(e[0]+n))}function $clinit_10(){$clinit_10=nullMethod,y=Math.log(2),_=g,b=a,w=fromInt(-1),x=fromInt(1),C=fromInt(2),S=h,k=fromInt(0)}function InputStream(){}function $ByteArrayInputStream(e,t){return function $ByteArrayInputStream_0(e,t,n,r){e.buf=t,e.pos=n,e.count=n+r,e.count>t.length&&(e.count=t.length);return e}(e,t,0,t.length),e}function $read(e){return e.pos>=e.count?-1:255&e.buf[e.pos++]}function $read_0(e,t,n,r){return e.pos>=e.count?-1:(r=min(r,e.count-e.pos),arraycopy(e.buf,e.pos,t,n,r),e.pos+=r,r)}function ByteArrayInputStream(){}function OutputStream(){}function $ByteArrayOutputStream(e){return e.buf=initDim(B,0,-1,32,1),e}function $ensureCapacity(e,t){var n;t<=e.buf.length||(t=max(t,2*e.buf.length),n=initDim(B,0,-1,t,1),arraycopy(e.buf,0,n,0,e.buf.length),e.buf=n)}function $toByteArray(e){var t;return t=initDim(B,0,-1,e.count,1),arraycopy(e.buf,0,t,0,e.count),t}function $write(e,t){$ensureCapacity(e,e.count+1),e.buf[e.count++]=t<<24>>24}function $write_0(e,t,n,r){$ensureCapacity(e,e.count+r),arraycopy(t,n,e.buf,e.count,r),e.count+=r}function ByteArrayOutputStream(){}function $IOException(e,t){return e.detailMessage=t,e}function IOException(){}function ArithmeticException(){}function $ArrayStoreException(e,t){return e.detailMessage=t,e}function ArrayStoreException(){}function createForArray(e,t){var n;return(n=new Class).typeName=e+t,n}function createForClass(e,t){var n;return(n=new Class).typeName=e+t,n}function Class(){}function ClassCastException(){}function Enum(){}function $IllegalArgumentException(e,t){return e.detailMessage=t,e}function IllegalArgumentException(){}function IllegalStateException(){}function IndexOutOfBoundsException(){}function max(e,t){return e>t?e:t}function min(e,t){return e<t?e:t}function NullPointerException(){}function StringBuilder(){}function arraycopy(e,t,n,r,i){var o,a,s,l,u,c,d,f;if(null==e||null==n)throw new NullPointerException;if(d=(e.typeMarker$==nullMethod||2==e.typeId$?e.getClass$():F).typeName,s=(n.typeMarker$==nullMethod||2==n.typeId$?n.getClass$():F).typeName,91!=d.charCodeAt(0)||91!=s.charCodeAt(0))throw $ArrayStoreException(new ArrayStoreException,"Must be array types");if(d.charCodeAt(1)!=s.charCodeAt(1))throw $ArrayStoreException(new ArrayStoreException,"Array types must match");if(f=e.length,l=n.length,t<0||r<0||i<0||t+i>f||r+i>l)throw new IndexOutOfBoundsException;if(76!=d.charCodeAt(1)&&91!=d.charCodeAt(1)||function $equals(e,t){return null!=t&&String(e)==t}(d,s))for(u=0;u<i;++u)n[r+u]=e[t+u];else if(c=dynamicCast(e,3),o=dynamicCast(n,3),(null==e?null:e)===(null==n?null:n)&&t<r)for(t+=i,a=r+i;a-- >r;)setCheck(o,a,c[--t]);else for(a=r+i;r<a;)setCheck(o,r++,c[t++])}function $execute(e){var t;try{return $processChunk(e.chunker)}catch(t){if(instanceOf(t=caught(t),10))return!1;throw t}}function $init(e,t,n,r,i){var o,a;if(!i)throw $IllegalArgumentException(new IllegalArgumentException,"null mode");if(compare(r,s)<0)throw $IllegalArgumentException(new IllegalArgumentException,"invalid length "+function toString_0(e){var t,n,r,i,o,a;if(0==e[0]&&0==e[1])return"0";if(eq(e,($clinit_10(),b)))return"-9223372036854775808";if(e[1]<0)return"-"+toString_0(neg(e));for(n=e,i="";0!=n[0]||0!=n[1];){if(t=""+lowBits_0(sub(n,mul(r=div(n,o=fromInt(1e9)),o))),0!=(n=r)[0]||0!=n[1])for(a=9-t.length;a>0;--a)t="0"+t;i=t+i}return i}(r));for(e.length_0=r,function $configure(e,t){if(!function $SetDictionarySize_0(e,t){var n;if(t<1||t>536870912)return!1;for(e._dictionarySize=t,n=0;t>1<<n;++n);return e._distTableSize=2*n,!0}(t,1<<e.dictionarySize))throw $RuntimeException(new RuntimeException,"unexpected failure");if(!function $SetNumFastBytes(e,t){return!(t<5||t>273)&&(e._numFastBytes=t,!0)}(t,e.fb))throw $RuntimeException(new RuntimeException,"unexpected failure");if(!function $SetMatchFinder(e,t){var n;return!(t<0||t>2)&&(n=e._matchFinderType,e._matchFinderType=t,e._matchFinder&&n!=e._matchFinderType&&(e._dictionarySizePrev=-1,e._matchFinder=null),!0)}(t,e.matchFinder))throw $RuntimeException(new RuntimeException,"unexpected failure");if(!function $SetLcLpPb_0(e,t,n,r){return!(n<0||n>4||t<0||t>8||r<0||r>4)&&(e._numLiteralPosStateBits=n,e._numLiteralContextBits=t,e._posStateBits=r,e._posStateMask=(1<<e._posStateBits)-1,!0)}(t,e.lc,e.lp,e.pb))throw $RuntimeException(new RuntimeException,"unexpected failure")}(i,o=function $Encoder(e){var t;for($clinit_59(),e._repDistances=initDim(J,0,-1,4,1),e._optimum=initDim(he,0,6,4096,0),e._rangeEncoder=($clinit_66(),new Encoder_0),e._isMatch=initDim(ae,0,-1,192,1),e._isRep=initDim(ae,0,-1,12,1),e._isRepG0=initDim(ae,0,-1,12,1),e._isRepG1=initDim(ae,0,-1,12,1),e._isRepG2=initDim(ae,0,-1,12,1),e._isRep0Long=initDim(ae,0,-1,192,1),e._posSlotEncoder=initDim(pe,0,8,4,0),e._posEncoders=initDim(ae,0,-1,114,1),e._posAlignEncoder=$BitTreeEncoder(new BitTreeEncoder,4),e._lenEncoder=$Encoder$LenPriceTableEncoder(new Encoder$LenPriceTableEncoder),e._repMatchLenEncoder=$Encoder$LenPriceTableEncoder(new Encoder$LenPriceTableEncoder),e._literalEncoder=new Encoder$LiteralEncoder,e._matchDistances=initDim(J,0,-1,548,1),e._posSlotPrices=initDim(J,0,-1,256,1),e._distancesPrices=initDim(J,0,-1,512,1),e._alignPrices=initDim(J,0,-1,16,1),e.reps=initDim(J,0,-1,4,1),e.repLens=initDim(J,0,-1,4,1),e.processedInSize=initDim(me,0,-1,1,3),e.processedOutSize=initDim(me,0,-1,1,3),e.finished=initDim(ge,0,-1,1,2),e.properties=initDim(B,0,-1,5,1),e.tempPrices=initDim(J,0,-1,128,1),t=0;t<4096;++t)e._optimum[t]=new Encoder$Optimal;for(t=0;t<4;++t)e._posSlotEncoder[t]=$BitTreeEncoder(new BitTreeEncoder,6);return e}(new Encoder)),o._writeEndMark=!0,function $WriteCoderProperties(e,t){var n;for(e.properties[0]=9*(5*e._posStateBits+e._numLiteralPosStateBits)+e._numLiteralContextBits<<24>>24,n=0;n<4;++n)e.properties[1+n]=e._dictionarySize>>8*n<<24>>24;$write_0(t,e.properties,0,5)}(o,n),a=0;a<64;a+=8)$write(n,255&lowBits_0(shr(r,a)));e.chunker=(o._needReleaseMFStream=!1,o._inStream=t,o._finished=!1,function $Create_2(e){var t,n;e._matchFinder||($clinit_60(),t=new BinTree,n=4,0==e._matchFinderType&&(n=2),function $SetType(e,t){e.HASH_ARRAY=t>2,e.HASH_ARRAY?(e.kNumHashDirectBytes=0,e.kMinMatchCheck=4,e.kFixHashSize=66560):(e.kNumHashDirectBytes=2,e.kMinMatchCheck=3,e.kFixHashSize=0)}(t,n),e._matchFinder=t);if(function $Create_1(e,t,n){var r,i;if(null==e.m_Coders||e.m_NumPrevBits!=n||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,i=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=initDim(ye,0,5,i,0),r=0;r<i;++r)e.m_Coders[r]=$Encoder$LiteralEncoder$Encoder2(new Encoder$LiteralEncoder$Encoder2)}(e._literalEncoder,e._numLiteralPosStateBits,e._numLiteralContextBits),e._dictionarySize==e._dictionarySizePrev&&e._numFastBytesPrev==e._numFastBytes)return;(function $Create_3(e,t,n,r,i){var o,a;if(t>1073741567)return!1;e._cutValue=16+(r>>1),function $Create_4(e,t,n,r){var i;e._keepSizeBefore=t,e._keepSizeAfter=n,i=t+n+r,(null==e._bufferBase||e._blockSize!=i)&&(e._bufferBase=null,e._blockSize=i,e._bufferBase=initDim(B,0,-1,e._blockSize,1)),e._pointerToLastSafePosition=e._blockSize-n}(e,t+n,r+i,256+~~((t+n+r+i)/2)),e._matchMaxLen=r,o=t+1,e._cyclicBufferSize!=o&&(e._son=initDim(J,0,-1,2*(e._cyclicBufferSize=o),1));a=65536,e.HASH_ARRAY&&(a=t-1,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a>>=1,(a|=65535)>16777216&&(a>>=1),e._hashMask=a,++a,a+=e.kFixHashSize);a!=e._hashSizeSum&&(e._hash=initDim(J,0,-1,e._hashSizeSum=a,1));return!0})(e._matchFinder,e._dictionarySize,4096,e._numFastBytes,274),e._dictionarySizePrev=e._dictionarySize,e._numFastBytesPrev=e._numFastBytes}(o),o._rangeEncoder.Stream=n,function $Init_4(e){var t;for(function $BaseInit(e){var t;for(e._state=0,e._previousByte=0,t=0;t<4;++t)e._repDistances[t]=0}(e),function $Init_9(e){e._position=l,e.Low=l,e.Range=-1,e._cacheSize=1,e._cache=0}(e._rangeEncoder),InitBitModels_0(e._isMatch),InitBitModels_0(e._isRep0Long),InitBitModels_0(e._isRep),InitBitModels_0(e._isRepG0),InitBitModels_0(e._isRepG1),InitBitModels_0(e._isRepG2),InitBitModels_0(e._posEncoders),function $Init_3(e){var t,n;for(n=1<<e.m_NumPrevBits+e.m_NumPosBits,t=0;t<n;++t)InitBitModels_0(e.m_Coders[t].m_Encoders)}(e._literalEncoder),t=0;t<4;++t)InitBitModels(e._posSlotEncoder[t].Models);$Init_2(e._lenEncoder,1<<e._posStateBits),$Init_2(e._repMatchLenEncoder,1<<e._posStateBits),InitBitModels(e._posAlignEncoder.Models),e._longestMatchWasFound=!1,e._optimumEndIndex=0,e._optimumCurrentIndex=0,e._additionalOffset=0}(o),$FillDistancesPrices(o),$FillAlignPrices(o),o._lenEncoder._tableSize=o._numFastBytes+1-2,$UpdateTables(o._lenEncoder,1<<o._posStateBits),o._repMatchLenEncoder._tableSize=o._numFastBytes+1-2,$UpdateTables(o._repMatchLenEncoder,1<<o._posStateBits),o.nowPos64=l,function $Chunker_0(e,t){return e.encoder=t,e.decoder=null,e.alive=!0,e}(new Chunker,o))}function LZMACompressor(){}function LZMAByteArrayCompressor(){}function $execute_0(e){var t,n;try{return $processChunk(e.chunker)}catch(t){if(instanceOf(t=caught(t),10))return n=t,e.exception=n,!1;throw t}}function $init_0(e,t,n){var r,i,o,a,u,c="";for(o=initDim(B,0,-1,5,1),i=0;i<o.length;++i){if(-1==(a=$read(t)))throw $IOException(new IOException,"truncated input");o[i]=a<<24>>24}if(!function $SetDecoderProperties(e,t){var n,r,i,o,a,s,l;if(t.length<5)return!1;for(l=255&t[0],i=l%9,o=(s=~~(l/9))%5,a=~~(s/5),n=0,r=0;r<4;++r)n+=(255&t[1+r])<<8*r;if(!function $SetLcLpPb(e,t,n,r){var i;if(t>8||n>4||r>4)return!1;return function $Create_0(e,t,n){var r,i;if(null==e.m_Coders||e.m_NumPrevBits!=n||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,i=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=initDim(ce,0,4,i,0),r=0;r<i;++r)e.m_Coders[r]=$Decoder$LiteralDecoder$Decoder2(new Decoder$LiteralDecoder$Decoder2)}(e.m_LiteralDecoder,n,t),i=1<<r,$Create(e.m_LenDecoder,i),$Create(e.m_RepLenDecoder,i),e.m_PosStateMask=i-1,!0}(e,i,o,a))return!1;return function $SetDictionarySize(e,t){if(t<0)return!1;e.m_DictionarySize!=t&&(e.m_DictionarySize=t,e.m_DictionarySizeCheck=max(e.m_DictionarySize,1),function $Create_5(e,t){null!=e._buffer&&e._windowSize==t||(e._buffer=initDim(B,0,-1,t,1));e._windowSize=t,e._pos=0,e._streamPos=0}(e.m_OutWindow,max(e.m_DictionarySizeCheck,4096)));return!0}(e,n)}(r=function $Decoder(e){var t;for(e.m_OutWindow=new OutWindow,e.m_RangeDecoder=new Decoder_0,e.m_IsMatchDecoders=initDim(ae,0,-1,192,1),e.m_IsRepDecoders=initDim(ae,0,-1,12,1),e.m_IsRepG0Decoders=initDim(ae,0,-1,12,1),e.m_IsRepG1Decoders=initDim(ae,0,-1,12,1),e.m_IsRepG2Decoders=initDim(ae,0,-1,12,1),e.m_IsRep0LongDecoders=initDim(ae,0,-1,192,1),e.m_PosSlotDecoder=initDim(se,0,7,4,0),e.m_PosDecoders=initDim(ae,0,-1,114,1),e.m_PosAlignDecoder=$BitTreeDecoder(new BitTreeDecoder,4),e.m_LenDecoder=$Decoder$LenDecoder(new Decoder$LenDecoder),e.m_RepLenDecoder=$Decoder$LenDecoder(new Decoder$LenDecoder),e.m_LiteralDecoder=new Decoder$LiteralDecoder,t=0;t<4;++t)e.m_PosSlotDecoder[t]=$BitTreeDecoder(new BitTreeDecoder,6);return e}(new Decoder),o))throw $IOException(new IOException,"corrupted input");for(i=0;i<64;i+=8){if(-1==(a=$read(t)))throw $IOException(new IOException,"truncated input");1==(a=a.toString(16)).length&&(a="0"+a),c=a+""+c}"ffffffffffffffffff"==c.toLowerCase()||0==c?e.length_0=s:(u=parseInt(c,16),e.length_0=u>4294967295?s:fromDouble(u)),e.chunker=function $CodeInChunks(e,t,n,r){return e.m_RangeDecoder.Stream=t,function $SetStream_0(e,t){$Flush_0(e),e._stream=null,e._stream=t}(e.m_OutWindow,n),function $Init_1(e){var t;for(function $Init_7(e,t){t||(e._streamPos=0,e._pos=0)}(e.m_OutWindow,!1),InitBitModels(e.m_IsMatchDecoders),InitBitModels(e.m_IsRep0LongDecoders),InitBitModels(e.m_IsRepDecoders),InitBitModels(e.m_IsRepG0Decoders),InitBitModels(e.m_IsRepG1Decoders),InitBitModels(e.m_IsRepG2Decoders),InitBitModels(e.m_PosDecoders),function $Init_0(e){var t,n;for(n=1<<e.m_NumPrevBits+e.m_NumPosBits,t=0;t<n;++t)InitBitModels(e.m_Coders[t].m_Decoders)}(e.m_LiteralDecoder),t=0;t<4;++t)InitBitModels(e.m_PosSlotDecoder[t].Models);$Init(e.m_LenDecoder),$Init(e.m_RepLenDecoder),InitBitModels(e.m_PosAlignDecoder.Models),function $Init_8(e){var t;for(e.Code=0,e.Range=-1,t=0;t<5;++t)e.Code=e.Code<<8|$read(e.Stream)}(e.m_RangeDecoder)}(e),e.state=0,e.rep0=0,e.rep1=0,e.rep2=0,e.rep3=0,e.outSize=r,e.nowPos64=l,e.prevByte=0,function $Chunker(e,t){return e.decoder=t,e.encoder=null,e.alive=!0,e}(new Chunker,e)}(r,t,n,e.length_0)}function LZMADecompressor(){}function LZMAByteArrayDecompressor(){}function $GetIndexByte(e,t){return e._bufferBase[e._bufferOffset+e._pos+t]}function $GetMatchLen(e,t,n,r){var i,o;for(e._streamEndWasReached&&e._pos+t+r>e._streamPos&&(r=e._streamPos-(e._pos+t)),++n,o=e._bufferOffset+e._pos+t,i=0;i<r&&e._bufferBase[o+i]==e._bufferBase[o+i-n];++i);return i}function $GetNumAvailableBytes(e){return e._streamPos-e._pos}function $ReadBlock(e){var t,n;if(!e._streamEndWasReached)for(;;){if(0==(n=-e._bufferOffset+e._blockSize-e._streamPos))return;if(-1==(t=$read_0(e._stream,e._bufferBase,e._bufferOffset+e._streamPos,n)))return e._posLimit=e._streamPos,e._bufferOffset+e._posLimit>e._pointerToLastSafePosition&&(e._posLimit=e._pointerToLastSafePosition-e._bufferOffset),void(e._streamEndWasReached=!0);e._streamPos+=t,e._streamPos>=e._pos+e._keepSizeAfter&&(e._posLimit=e._streamPos-e._keepSizeAfter)}}function $ReduceOffsets(e,t){e._bufferOffset+=t,e._posLimit-=t,e._pos-=t,e._streamPos-=t}function InWindow(){}function $clinit_60(){var e,t,n;for($clinit_60=nullMethod,T=initDim(J,0,-1,256,1),e=0;e<256;++e){for(n=e,t=0;t<8;++t)0!=(1&n)?n=n>>>1^-306674912:n>>>=1;T[e]=n}}function $MovePos_0(e){var t;++e._cyclicBufferPos>=e._cyclicBufferSize&&(e._cyclicBufferPos=0),function $MovePos_1(e){++e._pos,e._pos>e._posLimit&&(e._bufferOffset+e._pos>e._pointerToLastSafePosition&&function $MoveBlock(e){var t,n,r;for((r=e._bufferOffset+e._pos-e._keepSizeBefore)>0&&--r,n=e._bufferOffset+e._streamPos-r,t=0;t<n;++t)e._bufferBase[t]=e._bufferBase[r+t];e._bufferOffset-=r}(e),$ReadBlock(e))}(e),1073741823==e._pos&&(t=e._pos-e._cyclicBufferSize,$NormalizeLinks(e._son,2*e._cyclicBufferSize,t),$NormalizeLinks(e._hash,e._hashSizeSum,t),$ReduceOffsets(e,t))}function $NormalizeLinks(e,t,n){var r,i;for(r=0;r<t;++r)(i=e[r])<=n?i=0:i-=n,e[r]=i}function BinTree(){}function $Flush_0(e){var t;0!=(t=e._pos-e._streamPos)&&($write_0(e._stream,e._buffer,e._streamPos,t),e._pos>=e._windowSize&&(e._pos=0),e._streamPos=e._pos)}function $GetByte(e,t){var n;return(n=e._pos-t-1)<0&&(n+=e._windowSize),e._buffer[n]}function OutWindow(){}function GetLenToPosState(e){return(e-=2)<4?e:3}function StateUpdateChar(e){return e<4?0:e<10?e-3:e-6}function $processChunk(e){var t;if(!e.alive)throw new IllegalStateException;t=!0;try{return e.encoder?function $processEncoderChunk(e){(function $CodeOneBlock(e,t,n,r){var i,o,a,s,c,f,h,p,m,g,v,y,_,b,w;if(t[0]=l,n[0]=l,r[0]=!0,e._inStream&&(e._matchFinder._stream=e._inStream,function $Init_5(e){var t;for(e._bufferOffset=0,e._pos=0,e._streamPos=0,e._streamEndWasReached=!1,$ReadBlock(e),t=0;t<e._hashSizeSum;++t)e._hash[t]=0;e._cyclicBufferPos=0,$ReduceOffsets(e,-1)}(e._matchFinder),e._needReleaseMFStream=!0,e._inStream=null),!e._finished){if(e._finished=!0,b=e.nowPos64,eq(e.nowPos64,l)){if(0==$GetNumAvailableBytes(e._matchFinder))return void $Flush(e,lowBits_0(e.nowPos64));$ReadMatchDistances(e),_=lowBits_0(e.nowPos64)&e._posStateMask,$Encode_3(e._rangeEncoder,e._isMatch,(e._state<<4)+_,0),e._state=StateUpdateChar(e._state),a=$GetIndexByte(e._matchFinder,-e._additionalOffset),$Encode_1($GetSubCoder(e._literalEncoder,lowBits_0(e.nowPos64),e._previousByte),e._rangeEncoder,a),e._previousByte=a,--e._additionalOffset,e.nowPos64=add(e.nowPos64,u)}if(0!=$GetNumAvailableBytes(e._matchFinder))for(;;){if(h=$GetOptimum(e,lowBits_0(e.nowPos64)),g=e.backRes,_=lowBits_0(e.nowPos64)&e._posStateMask,o=(e._state<<4)+_,1==h&&-1==g)$Encode_3(e._rangeEncoder,e._isMatch,o,0),a=$GetIndexByte(e._matchFinder,-e._additionalOffset),w=$GetSubCoder(e._literalEncoder,lowBits_0(e.nowPos64),e._previousByte),e._state<7?$Encode_1(w,e._rangeEncoder,a):(m=$GetIndexByte(e._matchFinder,-e._repDistances[0]-1-e._additionalOffset),$EncodeMatched(w,e._rangeEncoder,m,a)),e._previousByte=a,e._state=StateUpdateChar(e._state);else{if($Encode_3(e._rangeEncoder,e._isMatch,o,1),g<4){if($Encode_3(e._rangeEncoder,e._isRep,e._state,1),0==g?($Encode_3(e._rangeEncoder,e._isRepG0,e._state,0),$Encode_3(e._rangeEncoder,e._isRep0Long,o,1==h?0:1)):($Encode_3(e._rangeEncoder,e._isRepG0,e._state,1),1==g?$Encode_3(e._rangeEncoder,e._isRepG1,e._state,0):($Encode_3(e._rangeEncoder,e._isRepG1,e._state,1),$Encode_3(e._rangeEncoder,e._isRepG2,e._state,g-2))),1==h?e._state=e._state<7?9:11:($Encode_0(e._repMatchLenEncoder,e._rangeEncoder,h-2,_),e._state=e._state<7?8:11),s=e._repDistances[g],0!=g){for(f=g;f>=1;--f)e._repDistances[f]=e._repDistances[f-1];e._repDistances[0]=s}}else{for($Encode_3(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,$Encode_0(e._lenEncoder,e._rangeEncoder,h-2,_),y=GetPosSlot(g-=4),p=GetLenToPosState(h),$Encode_2(e._posSlotEncoder[p],e._rangeEncoder,y),y>=4&&(v=g-(i=(2|1&y)<<(c=(y>>1)-1)),y<14?ReverseEncode(e._posEncoders,i-y-1,e._rangeEncoder,c,v):($EncodeDirectBits(e._rangeEncoder,v>>4,c-4),$ReverseEncode(e._posAlignEncoder,e._rangeEncoder,15&v),++e._alignPriceCount)),s=g,f=3;f>=1;--f)e._repDistances[f]=e._repDistances[f-1];e._repDistances[0]=s,++e._matchPriceCount}e._previousByte=$GetIndexByte(e._matchFinder,h-1-e._additionalOffset)}if(e._additionalOffset-=h,e.nowPos64=add(e.nowPos64,fromInt(h)),0==e._additionalOffset){if(e._matchPriceCount>=128&&$FillDistancesPrices(e),e._alignPriceCount>=16&&$FillAlignPrices(e),t[0]=e.nowPos64,n[0]=$GetProcessedSizeAdd(e._rangeEncoder),0==$GetNumAvailableBytes(e._matchFinder))return void $Flush(e,lowBits_0(e.nowPos64));if(compare(sub(e.nowPos64,b),d)>=0)return e._finished=!1,void(r[0]=!1)}}else $Flush(e,lowBits_0(e.nowPos64))}})(e.encoder,e.encoder.processedInSize,e.encoder.processedOutSize,e.encoder.finished),e.inBytesProcessed=e.encoder.processedInSize[0],e.encoder.finished[0]&&(!function $ReleaseStreams(e){$ReleaseMFStream(e),e._rangeEncoder.Stream=null}(e.encoder),e.alive=!1)}(e):function $processDecoderChunk(e){var t;if(-1==(t=function $CodeOneChunk(e){var t,n,r,i,o,a;if(a=lowBits_0(e.nowPos64)&e.m_PosStateMask,0==$DecodeBit(e.m_RangeDecoder,e.m_IsMatchDecoders,(e.state<<4)+a))t=function $GetDecoder(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}(e.m_LiteralDecoder,lowBits_0(e.nowPos64),e.prevByte),e.state<7?e.prevByte=function $DecodeNormal(e,t){var n;n=1;do{n=n<<1|$DecodeBit(t,e.m_Decoders,n)}while(n<256);return n<<24>>24}(t,e.m_RangeDecoder):e.prevByte=function $DecodeWithMatchByte(e,t,n){var r,i,o;o=1;do{if(i=n>>7&1,n<<=1,r=$DecodeBit(t,e.m_Decoders,(1+i<<8)+o),o=o<<1|r,i!=r){for(;o<256;)o=o<<1|$DecodeBit(t,e.m_Decoders,o);break}}while(o<256);return o<<24>>24}(t,e.m_RangeDecoder,$GetByte(e.m_OutWindow,e.rep0)),function $PutByte(e,t){e._buffer[e._pos++]=t,e._pos>=e._windowSize&&$Flush_0(e)}(e.m_OutWindow,e.prevByte),e.state=StateUpdateChar(e.state),e.nowPos64=add(e.nowPos64,u);else{if(1==$DecodeBit(e.m_RangeDecoder,e.m_IsRepDecoders,e.state))r=0,0==$DecodeBit(e.m_RangeDecoder,e.m_IsRepG0Decoders,e.state)?0==$DecodeBit(e.m_RangeDecoder,e.m_IsRep0LongDecoders,(e.state<<4)+a)&&(e.state=e.state<7?9:11,r=1):(0==$DecodeBit(e.m_RangeDecoder,e.m_IsRepG1Decoders,e.state)?n=e.rep1:(0==$DecodeBit(e.m_RangeDecoder,e.m_IsRepG2Decoders,e.state)?n=e.rep2:(n=e.rep3,e.rep3=e.rep2),e.rep2=e.rep1),e.rep1=e.rep0,e.rep0=n),0==r&&(r=$Decode(e.m_RepLenDecoder,e.m_RangeDecoder,a)+2,e.state=e.state<7?8:11);else if(e.rep3=e.rep2,e.rep2=e.rep1,e.rep1=e.rep0,r=2+$Decode(e.m_LenDecoder,e.m_RangeDecoder,a),e.state=e.state<7?7:10,(o=$Decode_0(e.m_PosSlotDecoder[GetLenToPosState(r)],e.m_RangeDecoder))>=4){if(i=(o>>1)-1,e.rep0=(2|1&o)<<i,o<14)e.rep0+=function ReverseDecode(e,t,n,r){var i,o,a,s;for(a=1,s=0,o=0;o<r;++o)i=$DecodeBit(n,e,t+a),a<<=1,a+=i,s|=i<<o;return s}(e.m_PosDecoders,e.rep0-o-1,e.m_RangeDecoder,i);else if(e.rep0+=function $DecodeDirectBits(e,t){var n,r,i;for(r=0,n=t;0!=n;--n)e.Range>>>=1,i=e.Code-e.Range>>>31,e.Code-=e.Range&i-1,r=r<<1|1-i,0==(-16777216&e.Range)&&(e.Code=e.Code<<8|$read(e.Stream),e.Range<<=8);return r}(e.m_RangeDecoder,i-4)<<4,e.rep0+=function $ReverseDecode(e,t){var n,r,i,o;for(i=1,o=0,r=0;r<e.NumBitLevels;++r)n=$DecodeBit(t,e.Models,i),i<<=1,i+=n,o|=n<<r;return o}(e.m_PosAlignDecoder,e.m_RangeDecoder),e.rep0<0)return-1==e.rep0?1:-1}else e.rep0=o;if(compare(fromInt(e.rep0),e.nowPos64)>=0||e.rep0>=e.m_DictionarySizeCheck)return-1;!function $CopyBlock(e,t,n){var r;for((r=e._pos-t-1)<0&&(r+=e._windowSize);0!=n;--n)r>=e._windowSize&&(r=0),e._buffer[e._pos++]=e._buffer[r++],e._pos>=e._windowSize&&$Flush_0(e)}(e.m_OutWindow,e.rep0,r),e.nowPos64=add(e.nowPos64,fromInt(r)),e.prevByte=$GetByte(e.m_OutWindow,0)}return 0}(e.decoder)))throw $IOException(new IOException,"corrupted input");e.inBytesProcessed=s,e.outBytesProcessed=e.decoder.nowPos64,(1==t||compare(e.decoder.outSize,l)>=0&&compare(e.decoder.nowPos64,e.decoder.outSize)>=0)&&(!function $CodeFinish(e){$Flush_0(e.m_OutWindow),function $ReleaseStream(e){$Flush_0(e),e._stream=null}(e.m_OutWindow),e.m_RangeDecoder.Stream=null}(e.decoder),e.alive=!1)}(e),t=!1,e.alive}finally{t&&(e.alive=!1)}}function Chunker(){}function Decoder(){}function $Create(e,t){for(;e.m_NumPosStates<t;++e.m_NumPosStates)e.m_LowCoder[e.m_NumPosStates]=$BitTreeDecoder(new BitTreeDecoder,3),e.m_MidCoder[e.m_NumPosStates]=$BitTreeDecoder(new BitTreeDecoder,3)}function $Decode(e,t,n){var r;return 0==$DecodeBit(t,e.m_Choice,0)?$Decode_0(e.m_LowCoder[n],t):(r=8,0==$DecodeBit(t,e.m_Choice,1)?r+=$Decode_0(e.m_MidCoder[n],t):r+=8+$Decode_0(e.m_HighCoder,t),r)}function $Decoder$LenDecoder(e){return e.m_Choice=initDim(ae,0,-1,2,1),e.m_LowCoder=initDim(se,0,7,16,0),e.m_MidCoder=initDim(se,0,7,16,0),e.m_HighCoder=$BitTreeDecoder(new BitTreeDecoder,8),e}function $Init(e){var t;for(InitBitModels(e.m_Choice),t=0;t<e.m_NumPosStates;++t)InitBitModels(e.m_LowCoder[t].Models),InitBitModels(e.m_MidCoder[t].Models);InitBitModels(e.m_HighCoder.Models)}function Decoder$LenDecoder(){}function Decoder$LiteralDecoder(){}function $Decoder$LiteralDecoder$Decoder2(e){return e.m_Decoders=initDim(ae,0,-1,768,1),e}function Decoder$LiteralDecoder$Decoder2(){}function $clinit_59(){var e,t,n,r;for($clinit_59=nullMethod,e=2,(L=initDim(B,0,-1,2048,1))[0]=0,L[1]=1,r=2;r<22;++r)for(n=1<<(r>>1)-1,t=0;t<n;++t,++e)L[e]=r<<24>>24}function $Backward(e,t){var n,r,i,o;e._optimumEndIndex=t,i=e._optimum[t].PosPrev,r=e._optimum[t].BackPrev;do{e._optimum[t].Prev1IsChar&&($MakeAsChar(e._optimum[i]),e._optimum[i].PosPrev=i-1,e._optimum[t].Prev2&&(e._optimum[i-1].Prev1IsChar=!1,e._optimum[i-1].PosPrev=e._optimum[t].PosPrev2,e._optimum[i-1].BackPrev=e._optimum[t].BackPrev2)),o=i,n=r,r=e._optimum[o].BackPrev,i=e._optimum[o].PosPrev,e._optimum[o].BackPrev=n,e._optimum[o].PosPrev=t,t=o}while(t>0);return e.backRes=e._optimum[0].BackPrev,e._optimumCurrentIndex=e._optimum[0].PosPrev,e._optimumCurrentIndex}function $FillAlignPrices(e){var t;for(t=0;t<16;++t)e._alignPrices[t]=$ReverseGetPrice(e._posAlignEncoder,t);e._alignPriceCount=0}function $FillDistancesPrices(e){var t,n,r,i,o,a,s,l;for(i=4;i<128;++i)t=(2|1&(a=GetPosSlot(i)))<<(r=(a>>1)-1),e.tempPrices[i]=ReverseGetPrice(e._posEncoders,t-a-1,r,i-t);for(o=0;o<4;++o){for(n=e._posSlotEncoder[o],s=o<<6,a=0;a<e._distTableSize;++a)e._posSlotPrices[s+a]=$GetPrice_1(n,a);for(a=14;a<e._distTableSize;++a)e._posSlotPrices[s+a]+=(a>>1)-1-4<<6;for(l=128*o,i=0;i<4;++i)e._distancesPrices[l+i]=e._posSlotPrices[s+i];for(;i<128;++i)e._distancesPrices[l+i]=e._posSlotPrices[s+GetPosSlot(i)]+e.tempPrices[i]}e._matchPriceCount=0}function $Flush(e,t){$ReleaseMFStream(e),function $WriteEndMarker(e,t){var n;if(!e._writeEndMark)return;$Encode_3(e._rangeEncoder,e._isMatch,(e._state<<4)+t,1),$Encode_3(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,$Encode_0(e._lenEncoder,e._rangeEncoder,0,t),n=GetLenToPosState(2),$Encode_2(e._posSlotEncoder[n],e._rangeEncoder,63),$EncodeDirectBits(e._rangeEncoder,67108863,26),$ReverseEncode(e._posAlignEncoder,e._rangeEncoder,15)}(e,t&e._posStateMask),function $FlushData(e){var t;for(t=0;t<5;++t)$ShiftLow(e)}(e._rangeEncoder)}function $GetOptimum(e,t){var n,r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,_,b,w,x,C,S,k,T,L,E,A,P,R,O,D,F,I,N,$,B,z,j,U,q,H,V,G;if(e._optimumEndIndex!=e._optimumCurrentIndex)return p=e._optimum[e._optimumCurrentIndex].PosPrev-e._optimumCurrentIndex,e.backRes=e._optimum[e._optimumCurrentIndex].BackPrev,e._optimumCurrentIndex=e._optimum[e._optimumCurrentIndex].PosPrev,p;if(e._optimumCurrentIndex=e._optimumEndIndex=0,e._longestMatchWasFound?(h=e._longestMatchLength,e._longestMatchWasFound=!1):h=$ReadMatchDistances(e),L=e._numDistancePairs,(k=$GetNumAvailableBytes(e._matchFinder)+1)<2)return e.backRes=-1,1;for(k>273&&(k=273),j=0,c=0;c<4;++c)e.reps[c]=e._repDistances[c],e.repLens[c]=$GetMatchLen(e._matchFinder,-1,e.reps[c],273),e.repLens[c]>e.repLens[j]&&(j=c);if(e.repLens[j]>=e._numFastBytes)return e.backRes=j,$MovePos(e,(p=e.repLens[j])-1),p;if(h>=e._numFastBytes)return e.backRes=e._matchDistances[L-1]+4,$MovePos(e,h-1),h;if(l=$GetIndexByte(e._matchFinder,-1),y=$GetIndexByte(e._matchFinder,-e._repDistances[0]-1-1),h<2&&l!=y&&e.repLens[j]<2)return e.backRes=-1,1;if(e._optimum[0].State=e._state,F=t&e._posStateMask,e._optimum[1].Price=($clinit_66(),M[e._isMatch[(e._state<<4)+F]>>>2]+$GetPrice_0($GetSubCoder(e._literalEncoder,t,e._previousByte),e._state>=7,y,l)),$MakeAsChar(e._optimum[1]),z=(_=M[2048-e._isMatch[(e._state<<4)+F]>>>2])+M[2048-e._isRep[e._state]>>>2],y==l&&(U=z+function $GetRepLen1Price(e,t,n){return $clinit_66(),M[e._isRepG0[t]>>>2]+M[e._isRep0Long[(t<<4)+n]>>>2]}(e,e._state,F))<e._optimum[1].Price&&(e._optimum[1].Price=U,function $MakeAsShortRep(e){e.BackPrev=0,e.Prev1IsChar=!1}(e._optimum[1])),(f=h>=e.repLens[j]?h:e.repLens[j])<2)return e.backRes=e._optimum[1].BackPrev,1;e._optimum[1].PosPrev=0,e._optimum[0].Backs0=e.reps[0],e._optimum[0].Backs1=e.reps[1],e._optimum[0].Backs2=e.reps[2],e._optimum[0].Backs3=e.reps[3],d=f;do{e._optimum[d--].Price=268435455}while(d>=2);for(c=0;c<4;++c)if(!((B=e.repLens[c])<2)){N=z+$GetPureRepPrice(e,c,e._state,F);do{(o=N+$GetPrice(e._repMatchLenEncoder,B-2,F))<(R=e._optimum[B]).Price&&(R.Price=o,R.PosPrev=0,R.BackPrev=c,R.Prev1IsChar=!1)}while(--B>=2)}if(S=_+M[e._isRep[e._state]>>>2],(d=e.repLens[0]>=2?e.repLens[0]+1:2)<=h){for(E=0;d>e._matchDistances[E];)E+=2;for(;(o=S+$GetPosLenPrice(e,u=e._matchDistances[E+1],d,F))<(R=e._optimum[d]).Price&&(R.Price=o,R.PosPrev=0,R.BackPrev=u+4,R.Prev1IsChar=!1),d!=e._matchDistances[E]||(E+=2)!=L;++d);}for(n=0;;){if(++n==f)return $Backward(e,n);if(b=$ReadMatchDistances(e),L=e._numDistancePairs,b>=e._numFastBytes)return e._longestMatchLength=b,e._longestMatchWasFound=!0,$Backward(e,n);if(++t,D=e._optimum[n].PosPrev,e._optimum[n].Prev1IsChar?(--D,e._optimum[n].Prev2?(H=e._optimum[e._optimum[n].PosPrev2].State,H=e._optimum[n].BackPrev2<4?H<7?8:11:H<7?7:10):H=e._optimum[D].State,H=StateUpdateChar(H)):H=e._optimum[D].State,D==n-1?H=0==e._optimum[n].BackPrev?H<7?9:11:StateUpdateChar(H):(e._optimum[n].Prev1IsChar&&e._optimum[n].Prev2?(D=e._optimum[n].PosPrev2,O=e._optimum[n].BackPrev2,H=H<7?8:11):H=(O=e._optimum[n].BackPrev)<4?H<7?8:11:H<7?7:10,P=e._optimum[D],O<4?0==O?(e.reps[0]=P.Backs0,e.reps[1]=P.Backs1,e.reps[2]=P.Backs2,e.reps[3]=P.Backs3):1==O?(e.reps[0]=P.Backs1,e.reps[1]=P.Backs0,e.reps[2]=P.Backs2,e.reps[3]=P.Backs3):2==O?(e.reps[0]=P.Backs2,e.reps[1]=P.Backs0,e.reps[2]=P.Backs1,e.reps[3]=P.Backs3):(e.reps[0]=P.Backs3,e.reps[1]=P.Backs0,e.reps[2]=P.Backs1,e.reps[3]=P.Backs2):(e.reps[0]=O-4,e.reps[1]=P.Backs0,e.reps[2]=P.Backs1,e.reps[3]=P.Backs2)),e._optimum[n].State=H,e._optimum[n].Backs0=e.reps[0],e._optimum[n].Backs1=e.reps[1],e._optimum[n].Backs2=e.reps[2],e._optimum[n].Backs3=e.reps[3],s=e._optimum[n].Price,l=$GetIndexByte(e._matchFinder,-1),y=$GetIndexByte(e._matchFinder,-e.reps[0]-1-1),F=t&e._posStateMask,w=!1,(r=s+M[e._isMatch[(H<<4)+F]>>>2]+$GetPrice_0($GetSubCoder(e._literalEncoder,t,$GetIndexByte(e._matchFinder,-2)),H>=7,y,l))<(x=e._optimum[n+1]).Price&&(x.Price=r,x.PosPrev=n,x.BackPrev=-1,x.Prev1IsChar=!1,w=!0),z=(_=s+M[2048-e._isMatch[(H<<4)+F]>>>2])+M[2048-e._isRep[H]>>>2],y!=l||x.PosPrev<n&&0==x.BackPrev||(U=z+(M[e._isRepG0[H]>>>2]+M[e._isRep0Long[(H<<4)+F]>>>2]))<=x.Price&&(x.Price=U,x.PosPrev=n,x.BackPrev=0,x.Prev1IsChar=!1,w=!0),!((k=T=4095-n<(T=$GetNumAvailableBytes(e._matchFinder)+1)?4095-n:T)<2)){if(k>e._numFastBytes&&(k=e._numFastBytes),!w&&y!=l&&(G=min(T-1,e._numFastBytes),(g=$GetMatchLen(e._matchFinder,0,e.reps[0],G))>=2)){for(V=StateUpdateChar(H),I=t+1&e._posStateMask,C=r+M[2048-e._isMatch[(V<<4)+I]>>>2]+M[2048-e._isRep[V]>>>2],A=n+1+g;f<A;)e._optimum[++f].Price=268435455;(o=C+($GetPrice(e._repMatchLenEncoder,g-2,I)+$GetPureRepPrice(e,0,V,I)))<(R=e._optimum[A]).Price&&(R.Price=o,R.PosPrev=n+1,R.BackPrev=0,R.Prev1IsChar=!0,R.Prev2=!1)}for(q=2,$=0;$<4;++$)if(!((m=$GetMatchLen(e._matchFinder,-1,e.reps[$],k))<2)){v=m;do{for(;f<n+m;)e._optimum[++f].Price=268435455;(o=z+($GetPrice(e._repMatchLenEncoder,m-2,F)+$GetPureRepPrice(e,$,H,F)))<(R=e._optimum[n+m]).Price&&(R.Price=o,R.PosPrev=n,R.BackPrev=$,R.Prev1IsChar=!1)}while(--m>=2);if(m=v,0==$&&(q=m+1),m<T&&(G=min(T-1-m,e._numFastBytes),(g=$GetMatchLen(e._matchFinder,m,e.reps[$],G))>=2)){for(V=H<7?8:11,I=t+m&e._posStateMask,i=z+($GetPrice(e._repMatchLenEncoder,m-2,F)+$GetPureRepPrice(e,$,H,F))+M[e._isMatch[(V<<4)+I]>>>2]+$GetPrice_0($GetSubCoder(e._literalEncoder,t+m,$GetIndexByte(e._matchFinder,m-1-1)),!0,$GetIndexByte(e._matchFinder,m-1-(e.reps[$]+1)),$GetIndexByte(e._matchFinder,m-1)),V=StateUpdateChar(V),I=t+m+1&e._posStateMask,C=i+M[2048-e._isMatch[(V<<4)+I]>>>2]+M[2048-e._isRep[V]>>>2],A=m+1+g;f<n+A;)e._optimum[++f].Price=268435455;(o=C+($GetPrice(e._repMatchLenEncoder,g-2,I)+$GetPureRepPrice(e,0,V,I)))<(R=e._optimum[n+A]).Price&&(R.Price=o,R.PosPrev=n+m+1,R.BackPrev=0,R.Prev1IsChar=!0,R.Prev2=!0,R.PosPrev2=n,R.BackPrev2=$)}}if(b>k){for(b=k,L=0;b>e._matchDistances[L];L+=2);e._matchDistances[L]=b,L+=2}if(b>=q){for(S=_+M[e._isRep[H]>>>2];f<n+b;)e._optimum[++f].Price=268435455;for(E=0;q>e._matchDistances[E];)E+=2;for(m=q;;++m)if((o=S+$GetPosLenPrice(e,a=e._matchDistances[E+1],m,F))<(R=e._optimum[n+m]).Price&&(R.Price=o,R.PosPrev=n,R.BackPrev=a+4,R.Prev1IsChar=!1),m==e._matchDistances[E]){if(m<T&&(G=min(T-1-m,e._numFastBytes),(g=$GetMatchLen(e._matchFinder,m,a,G))>=2)){for(V=H<7?7:10,I=t+m&e._posStateMask,i=o+M[e._isMatch[(V<<4)+I]>>>2]+$GetPrice_0($GetSubCoder(e._literalEncoder,t+m,$GetIndexByte(e._matchFinder,m-1-1)),!0,$GetIndexByte(e._matchFinder,m-(a+1)-1),$GetIndexByte(e._matchFinder,m-1)),V=StateUpdateChar(V),I=t+m+1&e._posStateMask,C=i+M[2048-e._isMatch[(V<<4)+I]>>>2]+M[2048-e._isRep[V]>>>2],A=m+1+g;f<n+A;)e._optimum[++f].Price=268435455;(o=C+($GetPrice(e._repMatchLenEncoder,g-2,I)+$GetPureRepPrice(e,0,V,I)))<(R=e._optimum[n+A]).Price&&(R.Price=o,R.PosPrev=n+m+1,R.BackPrev=0,R.Prev1IsChar=!0,R.Prev2=!0,R.PosPrev2=n,R.BackPrev2=a+4)}if((E+=2)==L)break}}}}}function $GetPosLenPrice(e,t,n,r){var i;return i=GetLenToPosState(n),(t<128?e._distancesPrices[128*i+t]:e._posSlotPrices[(i<<6)+function GetPosSlot2(e){if(e<131072)return L[e>>6]+12;if(e<134217728)return L[e>>16]+32;return L[e>>26]+52}(t)]+e._alignPrices[15&t])+$GetPrice(e._lenEncoder,n-2,r)}function $GetPureRepPrice(e,t,n,r){var i;return 0==t?($clinit_66(),i=M[e._isRepG0[n]>>>2],i+=M[2048-e._isRep0Long[(n<<4)+r]>>>2]):($clinit_66(),i=M[2048-e._isRepG0[n]>>>2],1==t?i+=M[e._isRepG1[n]>>>2]:(i+=M[2048-e._isRepG1[n]>>>2],i+=GetPrice(e._isRepG2[n],t-2))),i}function $MovePos(e,t){t>0&&(!function $Skip(e,t){var n,r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y;do{if(e._pos+e._matchMaxLen<=e._streamPos)h=e._matchMaxLen;else if((h=e._streamPos-e._pos)<e.kMinMatchCheck){$MovePos_0(e);continue}for(p=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,r=e._bufferOffset+e._pos,e.HASH_ARRAY?(s=1023&(y=T[255&e._bufferBase[r]]^255&e._bufferBase[r+1]),e._hash[s]=e._pos,l=65535&(y^=(255&e._bufferBase[r+2])<<8),e._hash[1024+l]=e._pos,u=(y^T[255&e._bufferBase[r+3]]<<5)&e._hashMask):u=255&e._bufferBase[r]^(255&e._bufferBase[r+1])<<8,i=e._hash[e.kFixHashSize+u],e._hash[e.kFixHashSize+u]=e._pos,g=1+(e._cyclicBufferPos<<1),v=e._cyclicBufferPos<<1,d=f=e.kNumHashDirectBytes,n=e._cutValue;;){if(i<=p||0==n--){e._son[g]=e._son[v]=0;break}if(o=((a=e._pos-i)<=e._cyclicBufferPos?e._cyclicBufferPos-a:e._cyclicBufferPos-a+e._cyclicBufferSize)<<1,m=e._bufferOffset+i,c=d<f?d:f,e._bufferBase[m+c]==e._bufferBase[r+c]){for(;++c!=h&&e._bufferBase[m+c]==e._bufferBase[r+c];);if(c==h){e._son[v]=e._son[o],e._son[g]=e._son[o+1];break}}(255&e._bufferBase[m+c])<(255&e._bufferBase[r+c])?(e._son[v]=i,v=o+1,i=e._son[v],f=c):(e._son[g]=i,g=o,i=e._son[g],d=c)}$MovePos_0(e)}while(0!=--t)}(e._matchFinder,t),e._additionalOffset+=t)}function $ReadMatchDistances(e){var t;return t=0,e._numDistancePairs=function $GetMatches(e,t){var n,r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,_,b,w,x;if(e._pos+e._matchMaxLen<=e._streamPos)m=e._matchMaxLen;else if((m=e._streamPos-e._pos)<e.kMinMatchCheck)return $MovePos_0(e),0;for(y=0,g=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,r=e._bufferOffset+e._pos,v=1,u=0,c=0,e.HASH_ARRAY?(u=1023&(x=T[255&e._bufferBase[r]]^255&e._bufferBase[r+1]),c=65535&(x^=(255&e._bufferBase[r+2])<<8),d=(x^T[255&e._bufferBase[r+3]]<<5)&e._hashMask):d=255&e._bufferBase[r]^(255&e._bufferBase[r+1])<<8,i=e._hash[e.kFixHashSize+d],e.HASH_ARRAY&&(o=e._hash[u],a=e._hash[1024+c],e._hash[u]=e._pos,e._hash[1024+c]=e._pos,o>g&&e._bufferBase[e._bufferOffset+o]==e._bufferBase[r]&&(t[y++]=v=2,t[y++]=e._pos-o-1),a>g&&e._bufferBase[e._bufferOffset+a]==e._bufferBase[r]&&(a==o&&(y-=2),t[y++]=v=3,t[y++]=e._pos-a-1,o=a),0!=y&&o==i&&(y-=2,v=1)),e._hash[e.kFixHashSize+d]=e._pos,b=1+(e._cyclicBufferPos<<1),w=e._cyclicBufferPos<<1,h=p=e.kNumHashDirectBytes,0!=e.kNumHashDirectBytes&&i>g&&e._bufferBase[e._bufferOffset+i+e.kNumHashDirectBytes]!=e._bufferBase[r+e.kNumHashDirectBytes]&&(t[y++]=v=e.kNumHashDirectBytes,t[y++]=e._pos-i-1),n=e._cutValue;;){if(i<=g||0==n--){e._son[b]=e._son[w]=0;break}if(s=((l=e._pos-i)<=e._cyclicBufferPos?e._cyclicBufferPos-l:e._cyclicBufferPos-l+e._cyclicBufferSize)<<1,_=e._bufferOffset+i,f=h<p?h:p,e._bufferBase[_+f]==e._bufferBase[r+f]){for(;++f!=m&&e._bufferBase[_+f]==e._bufferBase[r+f];);if(v<f&&(t[y++]=v=f,t[y++]=l-1,f==m)){e._son[w]=e._son[s],e._son[b]=e._son[s+1];break}}(255&e._bufferBase[_+f])<(255&e._bufferBase[r+f])?(e._son[w]=i,w=s+1,i=e._son[w],p=f):(e._son[b]=i,b=s,i=e._son[b],h=f)}return $MovePos_0(e),y}(e._matchFinder,e._matchDistances),e._numDistancePairs>0&&(t=e._matchDistances[e._numDistancePairs-2])==e._numFastBytes&&(t+=$GetMatchLen(e._matchFinder,t-1,e._matchDistances[e._numDistancePairs-1],273-t)),++e._additionalOffset,t}function $ReleaseMFStream(e){e._matchFinder&&e._needReleaseMFStream&&(e._matchFinder._stream=null,e._needReleaseMFStream=!1)}function GetPosSlot(e){return e<2048?L[e]:e<2097152?L[e>>10]+20:L[e>>20]+40}function Encoder(){}function $Init_2(e,t){var n;for(InitBitModels_0(e._choice),n=0;n<t;++n)InitBitModels(e._lowCoder[n].Models),InitBitModels(e._midCoder[n].Models);InitBitModels(e._highCoder.Models)}function $SetPrices(e,t,n,r,i){var o,a,s,l,u;for($clinit_66(),o=M[e._choice[0]>>>2],s=(a=M[2048-e._choice[0]>>>2])+M[e._choice[1]>>>2],l=a+M[2048-e._choice[1]>>>2],u=0,u=0;u<8;++u){if(u>=n)return;r[i+u]=o+$GetPrice_1(e._lowCoder[t],u)}for(;u<16;++u){if(u>=n)return;r[i+u]=s+$GetPrice_1(e._midCoder[t],u-8)}for(;u<n;++u)r[i+u]=l+$GetPrice_1(e._highCoder,u-8-8)}function Encoder$LenEncoder(){}function $Encode_0(e,t,n,r){!function $Encode(e,t,n,r){n<8?($Encode_3(t,e._choice,0,0),$Encode_2(e._lowCoder[r],t,n)):(n-=8,$Encode_3(t,e._choice,0,1),n<8?($Encode_3(t,e._choice,1,0),$Encode_2(e._midCoder[r],t,n)):($Encode_3(t,e._choice,1,1),$Encode_2(e._highCoder,t,n-8)))}(e,t,n,r),0==--e._counters[r]&&($SetPrices(e,r,e._tableSize,e._prices,272*r),e._counters[r]=e._tableSize)}function $Encoder$LenPriceTableEncoder(e){return function $Encoder$LenEncoder(e){var t;for(e._choice=initDim(ae,0,-1,2,1),e._lowCoder=initDim(pe,0,8,16,0),e._midCoder=initDim(pe,0,8,16,0),e._highCoder=$BitTreeEncoder(new BitTreeEncoder,8),t=0;t<16;++t)e._lowCoder[t]=$BitTreeEncoder(new BitTreeEncoder,3),e._midCoder[t]=$BitTreeEncoder(new BitTreeEncoder,3);return e}(e),e._prices=initDim(J,0,-1,4352,1),e._counters=initDim(J,0,-1,16,1),e}function $GetPrice(e,t,n){return e._prices[272*n+t]}function $UpdateTables(e,t){var n;for(n=0;n<t;++n)$SetPrices(e,n,e._tableSize,e._prices,272*n),e._counters[n]=e._tableSize}function Encoder$LenPriceTableEncoder(){}function $GetSubCoder(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}function Encoder$LiteralEncoder(){}function $Encode_1(e,t,n){var r,i,o;for(i=1,o=7;o>=0;--o)r=n>>o&1,$Encode_3(t,e.m_Encoders,i,r),i=i<<1|r}function $EncodeMatched(e,t,n,r){var i,o,a,s,l,u;for(o=1,l=!0,a=7;a>=0;--a)i=r>>a&1,u=o,l&&(u+=1+(s=n>>a&1)<<8,l=s==i),$Encode_3(t,e.m_Encoders,u,i),o=o<<1|i}function $Encoder$LiteralEncoder$Encoder2(e){return e.m_Encoders=initDim(ae,0,-1,768,1),e}function $GetPrice_0(e,t,n,r){var i,o,a,s,l;if(l=0,o=1,a=7,t)for(;a>=0;--a)if(s=n>>a&1,i=r>>a&1,l+=GetPrice(e.m_Encoders[(1+s<<8)+o],i),o=o<<1|i,s!=i){--a;break}for(;a>=0;--a)i=r>>a&1,l+=GetPrice(e.m_Encoders[o],i),o=o<<1|i;return l}function Encoder$LiteralEncoder$Encoder2(){}function $MakeAsChar(e){e.BackPrev=-1,e.Prev1IsChar=!1}function Encoder$Optimal(){}function $BitTreeDecoder(e,t){return e.NumBitLevels=t,e.Models=initDim(ae,0,-1,1<<t,1),e}function $Decode_0(e,t){var n,r;for(r=1,n=e.NumBitLevels;0!=n;--n)r=(r<<1)+$DecodeBit(t,e.Models,r);return r-(1<<e.NumBitLevels)}function BitTreeDecoder(){}function $BitTreeEncoder(e,t){return e.NumBitLevels=t,e.Models=initDim(ae,0,-1,1<<t,1),e}function $Encode_2(e,t,n){var r,i,o;for(o=1,i=e.NumBitLevels;0!=i;)r=n>>>--i&1,$Encode_3(t,e.Models,o,r),o=o<<1|r}function $GetPrice_1(e,t){var n,r,i,o;for(o=0,i=1,r=e.NumBitLevels;0!=r;)n=t>>>--r&1,o+=GetPrice(e.Models[i],n),i=(i<<1)+n;return o}function $ReverseEncode(e,t,n){var r,i,o;for(o=1,i=0;i<e.NumBitLevels;++i)r=1&n,$Encode_3(t,e.Models,o,r),o=o<<1|r,n>>=1}function $ReverseGetPrice(e,t){var n,r,i,o;for(o=0,i=1,r=e.NumBitLevels;0!=r;--r)n=1&t,t>>>=1,o+=GetPrice(e.Models[i],n),i=i<<1|n;return o}function ReverseEncode(e,t,n,r,i){var o,a,s;for(s=1,a=0;a<r;++a)$Encode_3(n,e,t+s,o=1&i),s=s<<1|o,i>>=1}function ReverseGetPrice(e,t,n,r){var i,o,a,s;for(s=0,a=1,o=n;0!=o;--o)i=1&r,r>>>=1,s+=($clinit_66(),M[(2047&(e[t+a]-i^-i))>>>2]),a=a<<1|i;return s}function BitTreeEncoder(){}function $DecodeBit(e,t,n){var r,i;return i=t[n],r=(e.Range>>>11)*i,(-2147483648^e.Code)<(-2147483648^r)?(e.Range=r,t[n]=i+(2048-i>>>5)<<16>>16,0==(-16777216&e.Range)&&(e.Code=e.Code<<8|$read(e.Stream),e.Range<<=8),0):(e.Range-=r,e.Code-=r,t[n]=i-(i>>>5)<<16>>16,0==(-16777216&e.Range)&&(e.Code=e.Code<<8|$read(e.Stream),e.Range<<=8),1)}function InitBitModels(e){var t;for(t=0;t<e.length;++t)e[t]=1024}function Decoder_0(){}function $clinit_66(){var e,t,n;for($clinit_66=nullMethod,M=initDim(J,0,-1,512,1),t=8;t>=0;--t)for(e=1<<9-t,n=1<<9-t-1;n<e;++n)M[n]=(t<<6)+(e-n<<6>>>9-t-1)}function $Encode_3(e,t,n,r){var i,o;o=t[n],i=(e.Range>>>11)*o,0==r?(e.Range=i,t[n]=o+(2048-o>>>5)<<16>>16):(e.Low=add(e.Low,and(fromInt(i),m)),e.Range-=i,t[n]=o-(o>>>5)<<16>>16),0==(-16777216&e.Range)&&(e.Range<<=8,$ShiftLow(e))}function $EncodeDirectBits(e,t,n){var r;for(r=n-1;r>=0;--r)e.Range>>>=1,1==(t>>>r&1)&&(e.Low=add(e.Low,fromInt(e.Range))),0==(-16777216&e.Range)&&(e.Range<<=8,$ShiftLow(e))}function $GetProcessedSizeAdd(e){return add(add(fromInt(e._cacheSize),e._position),c)}function $ShiftLow(e){var t,n;if(0!=(t=lowBits_0(function shru(e,t){var n;return n=shr(e,t&=63),e[1]<0&&(n=add(n,shl(($clinit_10(),C),63-t))),n}(e.Low,32)))||compare(e.Low,p)<0){e._position=add(e._position,fromInt(e._cacheSize)),n=e._cache;do{$write(e.Stream,n+t),n=255}while(0!=--e._cacheSize);e._cache=lowBits_0(e.Low)>>>24}++e._cacheSize,e.Low=shl(and(e.Low,f),8)}function GetPrice(e,t){return $clinit_66(),M[(2047&(e-t^-t))>>>2]}function InitBitModels_0(e){var t;for($clinit_66(),t=0;t<e.length;++t)e[t]=1024}function Encoder_0(){}function $LZMADemo(e){return e}function toDouble(e){return e[1]+e[0]}function compress(){var e,n,r,i,o,a=$LZMADemo(new LZMADemo),s=arguments[0],l=arguments[1];"function"==typeof arguments[2]?(i=arguments[2],"function"==typeof arguments[3]&&(o=arguments[3])):r=arguments[2],a.mode=De(l),a.c=function $LZMAByteArrayCompressor(e,t,n){var r;e.output=$ByteArrayOutputStream(new ByteArrayOutputStream);try{$init(e,$ByteArrayInputStream(new ByteArrayInputStream,t),e.output,fromInt(t.length),n)}catch(r){throw instanceOf(r=caught(r),10)?$RuntimeException(new RuntimeException,"impossible exception"):r}return e}(new LZMAByteArrayCompressor,function encode(e){var t,n,r,i,o,a,s;for(function $getChars(e,t,n,r,i){var o;for(o=t;o<n;++o)r[i++]=e.charCodeAt(o)}(e,0,s=e.length,a=initDim(G,0,-1,s,1),0),n=a,i=0,o=0;o<e.length;++o)(t=n[o])>=1&&t<=127?++i:i+=0==t||t>=128&&t<=2047?2:3;for(r=initDim(B,0,-1,i,1),i=0,o=0;o<e.length;++o)(t=n[o])>=1&&t<=127?r[i++]=t<<24>>24:0==t||t>=128&&t<=2047?(r[i++]=(192|t>>6&31)<<24>>24,r[i++]=(128|63&t)<<24>>24):(r[i++]=(224|t>>12&15)<<24>>24,r[i++]=(128|t>>6&63)<<24>>24,r[i++]=(128|63&t)<<24>>24);return r}(s),a.mode),o?o(0):void 0!==r&&update_progress(0,r),setTimeout(function do_action(){var s;for(n=(new Date).getTime();$execute(a.c);)if(e=toDouble(a.c.chunker.inBytesProcessed)/toDouble(a.c.length_0),(new Date).getTime()-n>200)return o?o(e):void 0!==r&&update_progress(e,r),setTimeout(do_action,0),!1;o?o(1):void 0!==r&&update_progress(1,r),s=$toByteArray(a.c.output).slice(0),i?i(s):void 0!==r&&postMessage({action:t,callback_num:r,result:s})},1)}function decompress(){var e,t,r,a,s,l,u=$LZMADemo(new LZMADemo),c=arguments[0];"function"==typeof arguments[1]?(s=arguments[1],"function"==typeof arguments[2]&&(l=arguments[2])):a=arguments[1],t=function initValues(e,t,n,r){return $clinit_4(),wrapArray(r,i,o),r.arrayClass$=e,r.typeId$=t,r.queryId$=n,r}(B,0,-1,c),u.d=function $LZMAByteArrayDecompressor(e,t){return e.output=$ByteArrayOutputStream(new ByteArrayOutputStream),$init_0(e,$ByteArrayInputStream(new ByteArrayInputStream,t),e.output),e}(new LZMAByteArrayDecompressor,t),l?l(0):void 0!==a&&update_progress(0,a),setTimeout(function do_action(){var t;for(r=(new Date).getTime();$execute_0(u.d);)if(e=toDouble(u.d.chunker.decoder.nowPos64)/toDouble(u.d.length_0),(new Date).getTime()-r>200)return l?l(e):void 0!==a&&update_progress(e,a),setTimeout(do_action,0),!1;l?l(1):void 0!==a&&update_progress(1,a),t=function decode(e){var t,n,r,i,o;for(t=function $StringBuilder(e){var t;return e.data=((t=[]).explicitLength=0,t),e}(new StringBuilder),n=0;n<e.length;++n)if(0==(128&(r=255&e[n]))){if(0==r)throw $IllegalArgumentException(new IllegalArgumentException,"invalid UTF-8");$appendNonNull(t.data,String.fromCharCode(65535&r))}else if(192==(224&r)){if(n+1>=e.length)throw $IllegalArgumentException(new IllegalArgumentException,"invalid UTF-8");if(128!=(192&(i=255&e[++n])))throw $IllegalArgumentException(new IllegalArgumentException,"invalid UTF-8");$append(t.data,String.fromCharCode((31&r)<<6&65535|63&i))}else{if(224!=(240&r))throw $IllegalArgumentException(new IllegalArgumentException,"invalid UTF-8");if(n+2>=e.length)throw $IllegalArgumentException(new IllegalArgumentException,"invalid UTF-8");if(128!=(192&(i=255&e[++n])))throw $IllegalArgumentException(new IllegalArgumentException,"invalid UTF-8");if(128!=(192&(o=255&e[++n])))throw $IllegalArgumentException(new IllegalArgumentException,"invalid UTF-8");$appendNonNull(t.data,String.fromCharCode(65535&((15&r)<<12|(63&i)<<6|63&o)))}return function $toString(e){var t,n;return n=e.join(""),e.length=e.explicitLength=0,t=n,e[e.explicitLength++]=t,t}(t.data)}($toByteArray(u.d.output)),s?s(t):void 0!==a&&postMessage({action:n,callback_num:a,result:t})},0)}function LZMADemo(){}function init(){$stats&&$stats({moduleName:e,subSystem:"startup",evtGroup:"moduleStartup",millis:(new Date).getTime(),type:"onModuleLoadStart",className:"org.dellroad.lzma.demo.client.LZMADemo"})}function nullMethod(){}(r=InputStream.prototype=new Object_0).getClass$=function getClass_6(){return N},r.typeId$=0,(r=ByteArrayInputStream.prototype=new InputStream).getClass$=function getClass_3(){return $},r.typeId$=0,r.buf=null,r.count=0,r.pos=0,(r=OutputStream.prototype=new Object_0).getClass$=function getClass_7(){return z},r.typeId$=0,(r=ByteArrayOutputStream.prototype=new OutputStream).getClass$=function getClass_4(){return j},r.typeId$=0,r.buf=null,r.count=0,(r=IOException.prototype=new Exception).getClass$=function getClass_5(){return U},r.typeId$=7,(r=ArithmeticException.prototype=new RuntimeException).getClass$=function getClass_8(){return H},r.typeId$=8,(r=ArrayStoreException.prototype=new RuntimeException).getClass$=function getClass_9(){return V},r.typeId$=9,(r=Class.prototype=new Object_0).getClass$=function getClass_11(){return W},r.typeId$=0,r.typeName=null,(r=ClassCastException.prototype=new RuntimeException).getClass$=function getClass_10(){return Y},r.typeId$=12,(r=Enum.prototype=new Object_0).getClass$=function getClass_12(){return q},r.typeId$=0,(r=IllegalArgumentException.prototype=new RuntimeException).getClass$=function getClass_14(){return Z},r.typeId$=13,(r=IllegalStateException.prototype=new RuntimeException).getClass$=function getClass_15(){return K},r.typeId$=14,(r=IndexOutOfBoundsException.prototype=new RuntimeException).getClass$=function getClass_16(){return X},r.typeId$=15,(r=NullPointerException.prototype=new RuntimeException).getClass$=function getClass_17(){return Q},r.typeId$=16,(r=String.prototype).getClass$=function getClass_21(){return ee},r.typeId$=2,(r=StringBuilder.prototype=new Object_0).getClass$=function getClass_20(){return te},r.typeId$=0,(r=function CompressionMode(){}.prototype=new Enum).getClass$=function getClass_23(){return Me},r.typeId$=0,r.dictionarySize=0,r.fb=0,r.lc=0,r.lp=0,r.matchFinder=0,r.pb=0,(r=LZMACompressor.prototype=new Object_0).getClass$=function getClass_26(){return Ee},r.typeId$=0,r.chunker=null,(r=LZMAByteArrayCompressor.prototype=new LZMACompressor).getClass$=function getClass_24(){return Ae},r.typeId$=0,r.output=null,(r=LZMADecompressor.prototype=new Object_0).getClass$=function getClass_27(){return Pe},r.typeId$=0,r.chunker=null,r.exception=null,r.length_0=l,(r=LZMAByteArrayDecompressor.prototype=new LZMADecompressor).getClass$=function getClass_25(){return Re},r.typeId$=0,r.output=null,(r=InWindow.prototype=new Object_0).getClass$=function getClass_40(){return ne},r.typeId$=0,r._blockSize=0,r._bufferBase=null,r._bufferOffset=0,r._keepSizeAfter=0,r._keepSizeBefore=0,r._pointerToLastSafePosition=0,r._pos=0,r._posLimit=0,r._stream=null,r._streamEndWasReached=!1,r._streamPos=0,(r=BinTree.prototype=new InWindow).getClass$=function getClass_39(){return re},r.typeId$=0,r.HASH_ARRAY=!0,r._cutValue=255,r._cyclicBufferPos=0,r._cyclicBufferSize=0,r._hash=null,r._hashMask=0,r._hashSizeSum=0,r._matchMaxLen=0,r._son=null,r.kFixHashSize=66560,r.kMinMatchCheck=4,r.kNumHashDirectBytes=0,(r=OutWindow.prototype=new Object_0).getClass$=function getClass_41(){return ie},r.typeId$=0,r._buffer=null,r._pos=0,r._stream=null,r._streamPos=0,r._windowSize=0,(r=Chunker.prototype=new Object_0).getClass$=function getClass_28(){return oe},r.typeId$=0,r.alive=!1,r.decoder=null,r.encoder=null,(r=Decoder.prototype=new Object_0).getClass$=function getClass_32(){return le},r.typeId$=0,r.m_DictionarySize=-1,r.m_DictionarySizeCheck=-1,r.m_PosStateMask=0,r.nowPos64=l,r.outSize=l,r.prevByte=0,r.rep0=0,r.rep1=0,r.rep2=0,r.rep3=0,r.state=0,(r=Decoder$LenDecoder.prototype=new Object_0).getClass$=function getClass_29(){return ue},r.typeId$=0,r.m_NumPosStates=0,(r=Decoder$LiteralDecoder.prototype=new Object_0).getClass$=function getClass_31(){return de},r.typeId$=0,r.m_Coders=null,r.m_NumPosBits=0,r.m_NumPrevBits=0,r.m_PosMask=0,(r=Decoder$LiteralDecoder$Decoder2.prototype=new Object_0).getClass$=function getClass_30(){return fe},r.typeId$=17,(r=Encoder.prototype=new Object_0).getClass$=function getClass_38(){return ve},r.typeId$=0,r._additionalOffset=0,r._alignPriceCount=0,r._dictionarySize=4194304,r._dictionarySizePrev=-1,r._distTableSize=44,r._finished=!1,r._inStream=null,r._longestMatchLength=0,r._longestMatchWasFound=!1,r._matchFinder=null,r._matchFinderType=1,r._matchPriceCount=0,r._needReleaseMFStream=!1,r._numDistancePairs=0,r._numFastBytes=32,r._numFastBytesPrev=-1,r._numLiteralContextBits=3,r._numLiteralPosStateBits=0,r._optimumCurrentIndex=0,r._optimumEndIndex=0,r._posStateBits=2,r._posStateMask=3,r._previousByte=0,r._state=0,r._writeEndMark=!1,r.backRes=0,r.nowPos64=l,(r=Encoder$LenEncoder.prototype=new Object_0).getClass$=function getClass_33(){return we},r.typeId$=0,(r=Encoder$LenPriceTableEncoder.prototype=new Encoder$LenEncoder).getClass$=function getClass_34(){return xe},r.typeId$=0,r._tableSize=0,(r=Encoder$LiteralEncoder.prototype=new Object_0).getClass$=function getClass_36(){return _e},r.typeId$=0,r.m_Coders=null,r.m_NumPosBits=0,r.m_NumPrevBits=0,r.m_PosMask=0,(r=Encoder$LiteralEncoder$Encoder2.prototype=new Object_0).getClass$=function getClass_35(){return be},r.typeId$=18,(r=Encoder$Optimal.prototype=new Object_0).getClass$=function getClass_37(){return Ce},r.typeId$=19,r.BackPrev=0,r.BackPrev2=0,r.Backs0=0,r.Backs1=0,r.Backs2=0,r.Backs3=0,r.PosPrev=0,r.PosPrev2=0,r.Prev1IsChar=!1,r.Prev2=!1,r.Price=0,r.State=0,(r=BitTreeDecoder.prototype=new Object_0).getClass$=function getClass_42(){return Se},r.typeId$=20,r.Models=null,r.NumBitLevels=0,(r=BitTreeEncoder.prototype=new Object_0).getClass$=function getClass_43(){return ke},r.typeId$=21,r.Models=null,r.NumBitLevels=0,(r=Decoder_0.prototype=new Object_0).getClass$=function getClass_44(){return Te},r.typeId$=0,r.Code=0,r.Range=0,r.Stream=null,(r=Encoder_0.prototype=new Object_0).getClass$=function getClass_45(){return Le},r.typeId$=0,r.Low=l,r.Range=0,r.Stream=null,r._cache=0,r._cacheSize=0,r._position=l,(r=LZMADemo.prototype=new Object_0).getClass$=function getClass_46(){return Oe},r.typeId$=0,r.c=null,r.d=null;var A=createForClass("java.lang.","Object"),P=createForClass("java.lang.","Throwable"),R=createForClass("java.lang.","Exception"),O=createForClass("java.lang.","RuntimeException"),D=createForClass("com.google.gwt.core.client.","JavaScriptException"),F=createForClass("com.google.gwt.core.client.","JavaScriptObject$"),I=createForArray("","[[D"),N=createForClass("java.io.","InputStream"),$=createForClass("java.io.","ByteArrayInputStream"),B=createForArray("","[B"),z=createForClass("java.io.","OutputStream"),j=createForClass("java.io.","ByteArrayOutputStream"),U=createForClass("java.io.","IOException"),q=createForClass("java.lang.","Enum"),H=createForClass("java.lang.","ArithmeticException"),V=createForClass("java.lang.","ArrayStoreException"),G=createForArray("","[C"),W=createForClass("java.lang.","Class"),Y=createForClass("java.lang.","ClassCastException"),Z=createForClass("java.lang.","IllegalArgumentException"),K=createForClass("java.lang.","IllegalStateException"),X=createForClass("java.lang.","IndexOutOfBoundsException"),J=createForArray("","[I"),Q=createForClass("java.lang.","NullPointerException"),ee=createForClass("java.lang.","String"),te=createForClass("java.lang.","StringBuilder"),ne=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZ.","InWindow"),re=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZ.","BinTree"),ie=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZ.","OutWindow"),oe=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Chunker"),ae=createForArray("","[S"),se=createForArray("[Lorg.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","BitTreeDecoder;"),le=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder"),ue=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder$LenDecoder"),ce=createForArray("[Lorg.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder$LiteralDecoder$Decoder2;"),de=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder$LiteralDecoder"),fe=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder$LiteralDecoder$Decoder2"),he=createForArray("[Lorg.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$Optimal;"),pe=createForArray("[Lorg.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","BitTreeEncoder;"),me=createForArray("","[J"),ge=createForArray("","[Z"),ve=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder"),ye=createForArray("[Lorg.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LiteralEncoder$Encoder2;"),_e=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LiteralEncoder"),be=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LiteralEncoder$Encoder2"),we=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LenEncoder"),xe=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LenPriceTableEncoder"),Ce=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$Optimal"),Se=createForClass("org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","BitTreeDecoder"),ke=createForClass("org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","BitTreeEncoder"),Te=createForClass("org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","Decoder"),Le=createForClass("org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","Encoder"),Me=function createForEnum(e,t){var n;return(n=new Class).typeName=e+t,n}("org.dellroad.lzma.client.","CompressionMode"),Ee=createForClass("org.dellroad.lzma.client.","LZMACompressor"),Ae=createForClass("org.dellroad.lzma.client.","LZMAByteArrayCompressor"),Pe=createForClass("org.dellroad.lzma.client.","LZMADecompressor"),Re=createForClass("org.dellroad.lzma.client.","LZMAByteArrayDecompressor"),Oe=createForClass("org.dellroad.lzma.demo.client.","LZMADemo");!function gwtOnLoad(t,n,r){if(e=n,r,t)try{init()}catch(e){t(n)}else init()}(function(){},"lzma_demo","");var De=function(){var e=[{dictionarySize:16,fb:64,matchFinder:0,lc:3,lp:0,pb:2},{dictionarySize:20,fb:64,matchFinder:0,lc:3,lp:0,pb:2},{dictionarySize:19,fb:64,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:20,fb:64,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:21,fb:128,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:22,fb:128,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:23,fb:128,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:24,fb:255,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:25,fb:255,matchFinder:1,lc:3,lp:0,pb:2}];return function(t){return!function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}(t)?t=1:t<1?t=1:t>9&&(t=9),e[t-1]}}();return{compress:compress,decompress:decompress}}();e.exports=n},function(e,t,n){"use strict";var r=n(17),i=n(0),o=n(113),a=n(7),s=n(42),l=n(112),u=n(27),c=n(25),d=function WindshaftClient(e){!function validatePresenceOfOptions(e,t){var n=i.filter(t,function(t){return!e[t]});if(n.length)throw new Error("WindshaftClient could not be initialized. The following options are missing: "+n.join(", "))}(e,["urlTemplate","userName"]),e.templateName?this.endpoints={get:[s.MAPS_API_BASE_URL,"named",e.templateName,"jsonp"].join("/"),post:[s.MAPS_API_BASE_URL,"named",e.templateName].join("/")}:this.endpoints={get:s.MAPS_API_BASE_URL,post:s.MAPS_API_BASE_URL},this.url=e.urlTemplate.replace("{user}",e.userName),this._requestTracker=new l(3)};d.prototype.instantiateMap=function(e){this._requestTracker.canRequestBePerformed(e)?this._performRequest(e,{success:function(t){if(this._requestTracker.track(e,t),t.errors){var n=c(t);e.options.error&&e.options.error(n)}else e.options.success&&e.options.success(t)}.bind(this),error:function(t,n){if("abort"!==n){var r={},i={};try{r=JSON.parse(t.responseText),i=c(r)}catch(e){}this._requestTracker.track(e,r),e.options.error&&e.options.error(i)}}.bind(this)}):(u.error("Maximum number of subsequent equal requests to the Maps API reached (3):",e.payload,e.params),e.options.error&&e.options.error({}))},d.prototype._performRequest=function(e,t){var n=e.payload,r=e.params,i=this._generateEncodedURL(n,r);this._isURLValid(i)?this._get(i,t):this._generateCompressedURL(n,r,function(e){if(this._isURLValid(e))this._get(e,t);else{var i=this._getURL(r,"post");this._post(i,n,t)}}.bind(this))},d.prototype._generateEncodedURL=function(e,t){return t=i.extend({config:JSON.stringify(e)},t),this._getURL(t)},d.prototype._generateCompressedURL=function(e,t,n){var r=JSON.stringify({config:JSON.stringify(e)});o.compress(r,3,function(e){t=i.extend({lzma:a.array2hex(e)},t),n(this._getURL(t))}.bind(this))},d.prototype._isURLValid=function(e){return e.length<2033},d.prototype._post=function(e,t,n){this._abortPreviousRequest(),this._previousRequest=r.ajax({url:e,crossOrigin:!0,method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t),success:n.success,error:n.error})},d.prototype._get=function(e,t){this._abortPreviousRequest(),this._previousRequest=r.ajax({url:e,method:"GET",dataType:"jsonp",jsonpCallback:this._jsonpCallbackName(e),cache:!0,success:t.success,error:t.error})},d.prototype._abortPreviousRequest=function(){this._previousRequest&&this._previousRequest.abort()},d.prototype._getURL=function(e,t){t=t||"get";var n=this._convertParamsToQueryString(e),r=this.endpoints[t];return[this.url,r].join("/")+n},d.prototype._convertParamsToQueryString=function(e){var t=[];return i.each(e,function(e,n){e instanceof Array?i.each(e,function(e){t.push(n+"[]="+e)}):e instanceof Object?t.push(n+"="+encodeURIComponent(JSON.stringify(e))):t.push(n+"="+encodeURIComponent(e))}),t.length>0?"?"+t.join("&"):""},d.prototype._jsonpCallbackName=function(e){return"_cdbc_"+a.uniqueCallbackName(e)},e.exports=d},function(e,t,n){"use strict";var r=n(0),i=n(42);function Response(e,t){this._windshaftSettings=e,this._layerGroupId=t.layergroupid,this._layers=t.metadata.layers,this._dataviews=t.metadata.dataviews,this._analyses=t.metadata.analyses,this._cdnUrl=t.cdn_url}Response.prototype.getLayerIndexesByType=function getLayerIndexesByType(e){return r.reduce(this._getLayers(),function(t,n,r){return n.type===e&&t.push(r),t},[])},Response.prototype.getBaseURL=function getBaseURL(){return[this._getHost(),i.MAPS_API_BASE_URL,this._layerGroupId].join("/")},Response.prototype.getStaticBaseURL=function getStaticBaseURL(){return[this._getHost(),i.MAPS_API_BASE_URL,"static/center",this._layerGroupId].join("/")},Response.prototype._getHost=function _getHost(){var e=this._windshaftSettings.urlTemplate,t=this._windshaftSettings.userName,n=this.getProtocol(),r=this._cdnUrl,i=r&&r[n],o=r&&r.templates;return o&&o[n]?o[n].url+"/"+t:i?[n,"://",i,"/",t].join(""):e.replace("{user}",t)},Response.prototype.getProtocol=function getProtocol(){return this._isHttps()?"https":"http"},Response.prototype._isHttps=function isHttps(){return 0===this._windshaftSettings.urlTemplate.indexOf("https")},Response.prototype.getSupportedSubdomains=function getSupportedSubdomains(){var e=this._cdnUrl&&this._cdnUrl.templates,t=this.getProtocol();return e&&e[t]?e[t].subdomains:[]},Response.prototype.getLayerMetadata=function getLayerMetadata(e){var t={},n=this._getLayers();return n&&n[e]&&(t=n[e].meta||{}),t},Response.prototype.getDataviewMetadata=function getDataviewMetadata(e){var t=this._getDataviews();if(t&&t[e])return t[e];t={};var n=r.compact(r.map(this._getLayers(),function(e){return e.widgets}));return r.each(n,function(e){r.extend(t,e)}),t&&t[e]?t[e]:void 0},Response.prototype.getAnalysisNodeMetadata=function(e){var t={},n=r.map(this._getAnalyses(),function(e){return e.nodes});return r.each(n,function(e){r.extend(t,e)}),t[e]},Response.prototype._getLayers=function _getLayers(){return this._layers},Response.prototype._getDataviews=function _getDataviews(){return this._dataviews},Response.prototype._getAnalyses=function _getAnalyses(){return this._analyses},e.exports=Response},function(e,t,n){"use strict";var r=function Request(e,t,n){this.payload=e,this.params=t,this.options=n};r.prototype.toHashCode=function(){return JSON.stringify(this.payload)+JSON.stringify(this.params)+JSON.stringify(this.options)},r.prototype.equals=function(e){return this.toHashCode()===e.toHashCode()},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(16);e.exports={serialize:function serialize(e,t){return{buffersize:{mvt:0},styles:function _getStylesFromLayers(e){return r.reduce(e,function(e,t,n){return t.get("cartocss")&&(e[n]=t.get("cartocss")),e},{})}(e.filter(function(e){return!i.isGoogleMapsBaseLayer(e)}))}}}},function(e,t,n){"use strict";var r=n(0),i=n(15),o=["line-color","marker-fill","polygon-fill","marker-file"],a=["="],s=function _extractURL(e){var t="",n=e.match(/(http|https):\/\/\S+\.(?:gif|jpeg|jpg|png|webp|svg)/g);return n&&(t=n[0]),t};e.exports={canAdapt:function canAdapt(e){return(e=new i(e)).matchesAnyProperty(o)&&e.matchesAnyMapping(a)&&function isEveryBucketValid(e){var t=e.getBucketsWithCategoryFilter();return r.every(t,function(e){return null!=e.filter.name&&null!=e.value})}(e)},adapt:function adapt(e){var t=new i(e[0]),n=new i(e[1]),o=t.getBucketsWithCategoryFilter(),a=n.getBucketsWithCategoryFilter(),l=t.getBucketsWithDefaultFilter(),u=n.getBucketsWithDefaultFilter();return{categories:function generateCategories(e,t){return r.map(e,function(e){var n=r.find(t,function(t){return t.filter.name===e.filter.name});return{title:e.filter.name,icon:n&&n.value?s(n.value):"",color:e.value}})}(o,a),default:{icon:r.isEmpty(u)?"":s(u[0].value),color:r.isEmpty(l)?"":l[0].value}}}}},function(e,t,n){"use strict";var r=n(0),i=n(15),o=["line-color","marker-fill","polygon-fill"],a=[">",">=","<","<="];e.exports={canAdapt:function canAdapt(e){return(e=new i(e)).matchesAnyProperty(o)&&e.matchesAnyMapping(a)&&function isEveryBucketValid(e){var t=e.getBucketsWithRangeFilter();return r.every(t,function(e){return null!=e.filter.start&&null!=e.filter.end})}(e)},adapt:function adapt(e){var t=new i(e[0]),n=t.getBucketsWithRangeFilter(),o=r.last(n),a=r.first(n);return{colors:function generateColors(e){if(1===e.length){var t=e[0],n=t.filter.start,i=t.filter.end;return[{value:t.value,label:n.toString()},{value:t.value,label:i.toString()}]}return r.map(e,function(t,n){var r="";return 0===n?r=t.filter.start:n===e.length-1&&(r=t.filter.end),{value:t.value,label:r.toString()}})}(n),avg:t.getFilterAvg(),max:o.filter.end,min:a.filter.start}}}},function(e,t,n){"use strict";var r=n(0),i=n(15),o=["marker-width","line-width"];e.exports={canAdapt:function canAdapt(e){return(e=new i(e)).matchesAnyProperty(o)&&function isEveryBucketValid(e){var t=e.getBucketsWithRangeFilter();return r.every(t,function(e){return null!=e.filter.start&&null!=e.filter.end})}(e)},adapt:function adapt(e){var t=new i(e[0]),n=t.getBucketsWithRangeFilter();return{values:function calculateValues(e){var t=r.last(e);return r.chain(e).map("filter").map("start").concat(t.filter.end).value()}(n),sizes:r.map(n,"value"),avg:t.getFilterAvg()}}}},function(e,t,n){"use strict";var r={bubble:n(120),choropleth:n(119),category:n(118)};e.exports={getAdapterForLegend:function getAdapterForLegend(e){return r[e.get("type")]}}},function(e,t,n){"use strict";var r={};r.VERSION=n(26).version,r.DEBUG=!1,r.helpers={},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(27),o=n(7),a=n(121),s=n(29),l=n(1);var u=function ModelUpdater(e){if(!e.layerGroupModel)throw new Error("layerGroupModel is required");if(!e.layersCollection)throw new Error("layersCollection is required");if(!e.dataviewsCollection)throw new Error("dataviewsCollection is required");this._layerGroupModel=e.layerGroupModel,this._layersCollection=e.layersCollection,this._dataviewsCollection=e.dataviewsCollection};u.prototype.updateModels=function(e,t,n){this._updateLayerModels(e),this._updateLayerGroupModel(e),this._updateDataviewModels(e,t,n),this._updateAnalysisModels(e)},u.prototype._updateLayerGroupModel=function(e){var t={tiles:this._generateTileURLTemplate(e),subdomains:e.getSupportedSubdomains(),grids:this._calculateGridURLTemplatesForCartoDBLayers(e),attributes:this._calculateAttributesBaseURLsForCartoDBLayers(e),image:this._calculateStaticMapURL(e)};this._layerGroupModel.set({indexOfLayersInWindshaft:e.getLayerIndexesByType("mapnik"),urls:t})},u.prototype._calculateStaticMapURL=function(e){return[e.getStaticBaseURL(),"{z}/{lat}/{lng}/{width}/{height}.{format}"].join("/")},u.prototype._generateTileURLTemplate=function(e){return e.getBaseURL()+"/{layerIndexes}/{z}/{x}/{y}.{format}"},u.prototype._calculateGridURLTemplatesForCartoDBLayers=function(e){var t=[],n=e.getLayerIndexesByType("mapnik");return n.length>0&&r.each(n,function(n){var i=[],o=this._generateGridURLTemplate(e,n),a=e.getSupportedSubdomains();a.length?r.each(a,function(e){i.push(o.replace("{s}",e))}):i.push(o),t.push(i)},this),t},u.prototype._generateGridURLTemplate=function(e,t){return e.getBaseURL()+"/"+t+"/{z}/{x}/{y}.grid.json"},u.prototype._calculateAttributesBaseURLsForCartoDBLayers=function(e){var t=[],n=e.getLayerIndexesByType("mapnik");return n.length>0&&r.each(n,function(n){t.push(this._generateAttributesBaseURL(e,n))},this),t},u.prototype._generateAttributesBaseURL=function(e,t){var n=e.getBaseURL()+"/"+t+"/attributes";if(n.indexOf("{s}")>=0){var r=function getSubdomain(e,t){return e[o.crc32(t)%e.length]}(e.getSupportedSubdomains(),n);n=n.replace("{s}",r)}return n},u.prototype._updateLayerModels=function(e){var t=e.getLayerIndexesByType("mapnik");r.each(this._layersCollection.getCartoDBLayers(),function(n,r){var i=t[r];n.set("meta",e.getLayerMetadata(i)),this._updateLegendModels(n,i,e),n.setOk()},this);var n=e.getLayerIndexesByType("torque");r.each(this._layersCollection.getTorqueLayers(),function(t,r){var i=n[r],o=e.getLayerMetadata(i);t.set("meta",o),t.set(o),t.set("subdomains",e.getSupportedSubdomains()),t.set("tileURLTemplates",this._calculateTileURLTemplatesForTorqueLayers(e)),this._updateLegendModels(t,i,e),t.setOk()},this)},u.prototype._calculateTileURLTemplatesForTorqueLayers=function(e){var t=[],n=e.getLayerIndexesByType("torque");return n.length>0&&t.push(this._generateTorqueTileURLTemplate(e,n)),t},u.prototype._generateTorqueTileURLTemplate=function(e,t){return e.getBaseURL()+"/"+t.join(",")+"/{z}/{x}/{y}.json.torque"},u.prototype._updateLegendModels=function(e,t,n){var i=n.getLayerMetadata(t);r.each(this._getLayerLegends(e),function(e){this._updateLegendModel(e,i)},this)},u.prototype._updateLegendModel=function(e,t){var n=t&&t.cartocss_meta&&t.cartocss_meta.rules;try{var o={state:"success"};if(n){var s=a.getAdapterForLegend(e),l=r.filter(n,s.canAdapt);r.isEmpty(l)||(o=r.extend(o,s.adapt(l)))}e.set(o)}catch(t){e.set({state:"error"}),i.error("legend of type '"+e.get("type")+"' couldn't be updated: "+t.message)}},u.prototype._updateDataviewModels=function(e,t,n){this._dataviewsCollection.each(function(r){var i=e.getDataviewMetadata(r.get("id"));i&&r.set({url:i.url[this._getProtocol()]},{sourceId:t,forceFetch:n})},this)},u.prototype._updateAnalysisModels=function(e){this._getUniqueAnalysisNodesCollection().each(function(t){var n,i=e.getAnalysisNodeMetadata(t.get("id"));i&&(n={status:i.status,url:i.url[this._getProtocol()],query:i.query},n=r.omit(n,t.getParamNames()),i.error_message?(n=r.extend(n,{error:{message:i.error_message}}),t.set(n)):(t.set(n),t.setOk()))},this)},u.prototype._getProtocol=function(){return"file:"===window.location.protocol?"http":window.location.protocol.replace(":","")},u.prototype.setErrors=function(e){r.each(e,this._setError,this),this._setLegendErrors()},u.prototype._setError=function(e){if(e.isLayerError()){var t=this._layersCollection.get(e.layerId);t&&t.setError(e)}else if(e.isAnalysisError()){var n=this._getUniqueAnalysisNodesCollection().get(e.analysisId);n&&n.setError(e)}},u.prototype._setLegendErrors=function(){var e=this._layersCollection.chain().map(this._getLayerLegends).compact().flatten().value();r.each(e,function(e){e.set("state","error")})},u.prototype._getLayerLegends=function(e){return e.legends&&[e.legends.bubble,e.legends.category,e.legends.choropleth]},u.prototype._getUniqueAnalysisNodesCollection=function(){var e=s.getUniqueAnalysisNodes(this._layersCollection,this._dataviewsCollection);return new l.Collection(e)},e.exports=u},function(e,t,n){"use strict";var r=n(0),i=n(1).Collection.extend({initialize:function initialize(){this.comparator=function(e){return parseInt(e.get("order"),10)},this.bind("add",this._assignIndexes),this.bind("remove",this._assignIndexes)},_assignIndexes:function _assignIndexes(e,t,n){if(this.size()>0&&(this.at(0).set({order:0}),this.size()>1)){var i=this.reduce(function(e,t,n){var r=t.get("type");return 0===n&&"Tiled"===r?e:(e[r]=e[r]||[],e[r].push(t),e)},{}),o=1,a=["CartoDB","torque","Tiled"];r.each(a,function(e){var t=i[e]||[];r.each(t,function(e){e.set({order:o}),o+=1})})}this.sort()},getCartoDBLayers:function getCartoDBLayers(){return this._getLayersByType("CartoDB")},getTiledLayers:function getTiledLayers(){return this._getLayersByType("Tiled")},getTorqueLayers:function getTorqueLayers(){return this._getLayersByType("torque")},_getLayersByType:function _getLayersByType(e){return this.select(function(t){return t.get("type")===e})},getLayersWithLegends:function getLayersWithLegends(){return this.select(function(e){return!!e.legends})},moveCartoDBLayer:function moveCartoDBLayer(e,t){if(e===t)return!1;var n=this.at(e);return!(!n||"CartoDB"!==n.get("type"))&&(this.remove(n,{silent:!0}),this.add(n,{at:t,silent:!0}),this.trigger("layerMoved",n),n)}});e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(1).Collection.extend({isAnyDataviewFiltered:function isAnyDataviewFiltered(){return this.any(function(e){var t=e.filter;return t&&!t.isEmpty()})},getFilters:function getFilters(){return this.reduce(function(e,t){var n=t.filter;return n&&!n.isEmpty()&&(e.dataviews=e.dataviews||{},r.extend(e.dataviews,n.toJSON())),e},{})}});e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(17),o=n(1),a=n(16),s=n(7),l=o.Model.extend({defaults:{visible:!0,type:"layergroup"},initialize:function initialize(e,t){if(!(t=t||{}).layersCollection)throw new Error("layersCollection option is required");this._layersCollection=t.layersCollection},addError:function addError(e){var t=e.type;if(!t)throw new Error("Error must have a type property.");this.trigger("error:"+t,e)},forEachGroupedLayer:function forEachGroupedLayer(e,t){r.each(this._getGroupedLayers(),e.bind(t||this))},_getGroupedLayers:function _getGroupedLayers(){return this._layersCollection.getCartoDBLayers()},_getLayers:function _getLayers(){return this._layersCollection.reject(a.isGoogleMapsBaseLayer)},getIndexOfLayerInLayerGroup:function getIndexOfLayerInLayerGroup(e){return this._getGroupedLayers().indexOf(e)},getLayerInLayerGroupAt:function getLayerInLayerGroupAt(e){return this._getGroupedLayers()[e]},getCartoLayerById:function getCartoLayerById(e){return this._layersCollection.get(e)},isEqual:function isEqual(){return!1},hasURLs:function hasURLs(){return!!this.get("urls")},getSubdomains:function getSubdomains(){return this.get("urls")&&this.get("urls").subdomains||[]},getTileURLTemplatesWithSubdomains:function getTileURLTemplatesWithSubdomains(){var e=this.getTileURLTemplate(),t=this.getSubdomains();return t&&t.length?r.map(t,function(t){return e.replace("{s}",t)}):[e]},getTileURLTemplate:function getTileURLTemplate(e){e=e||"png";var t=this.get("urls")&&this.get("urls").tiles;return t?"png"===e?this._areAllLayersHidden()?"":this._generatePNGTileURLTemplate(t):"mvt"===e?this._generateMTVTileURLTemplate(t):void 0:""},_generatePNGTileURLTemplate:function _generatePNGTileURLTemplate(e){var t=this._getIndexesOfVisibleMapnikLayers();return t?(e=e.replace("{layerIndexes}",t).replace("{format}","png"),this._appendAuthParamsToURL(e)):""},_generateMTVTileURLTemplate:function _generateMTVTileURLTemplate(e){return e=e.replace("{layerIndexes}","mapnik").replace("{format}","mvt"),this._appendAuthParamsToURL(e)},_areAllLayersHidden:function _areAllLayersHidden(){return r.all(this._getGroupedLayers(),function(e){return!e.isVisible()})},_getIndexesOfVisibleMapnikLayers:function _getIndexesOfVisibleMapnikLayers(e){var t=this.get("indexOfLayersInWindshaft");return r.reduce(this._getGroupedLayers(),function(e,n,r){return n.isVisible()&&e.push(t[r]),e},[]).join(",")},_getIndexesOfVisibleLayers:function _getIndexesOfVisibleLayers(e){return r.reduce(this._getLayers(),function(e,t,n){return t.isVisible()&&e.push(n),e},[]).join(",")},hasTileURLTemplates:function hasTileURLTemplates(){return!!this.getTileURLTemplate()},getGridURLTemplatesWithSubdomains:function getGridURLTemplatesWithSubdomains(e){var t=this.get("urls")&&this.get("urls").grids&&this.get("urls").grids[e]||[];if(this.get("urls")&&this.get("urls").subdomains){var n=this.get("urls").subdomains;t=r.map(t,function(e,t){return e.replace("{s}",n[t])})}return r.map(t,this._appendAuthParamsToURL,this)},getAttributesBaseURL:function getAttributesBaseURL(e){return this.get("urls")&&this.get("urls").attributes&&this.get("urls").attributes[e]},getStaticImageURLTemplate:function getStaticImageURLTemplate(){var e=this.get("urls")&&this.get("urls").image;return e&&(e=this._appendParamsToURL(e,["layer="+this._getIndexesOfVisibleLayers()]),e=(e=this._appendAuthParamsToURL(e)).replace("{s}",this.getSubdomains()[0])),e},fetchAttributes:function fetchAttributes(e,t,n){var r=this.getAttributesBaseURL(e);if(!r)throw new Error("Attributes cannot be fetched until urls are set");var o=this._appendAuthParamsToURL(r+"/"+t);i.ajax({dataType:"jsonp",url:o,jsonpCallback:"_cdbi_layer_attributes_"+s.uniqueCallbackName(this.toJSON()),cache:!0,success:function success(e){n(e)},error:function error(e){n(null)}})},_appendAuthParamsToURL:function _appendAuthParamsToURL(e){var t=[];if(this.get("apiKey"))t.push("api_key="+this.get("apiKey"));else if(this.get("authToken")){var n=this.get("authToken");n instanceof Array?r.each(n,function(e){t.push("auth_token[]="+e)}):t.push("auth_token="+n)}return this._appendParamsToURL(e,t)},_appendParamsToURL:function _appendParamsToURL(e,t){if(t.length){var n="?";return-1!==e.indexOf("?")&&(n="&"),e+n+t.join("&")}return e},onLayerVisibilityChanged:function onLayerVisibilityChanged(e){this._layersCollection.on("change:visible",function(t){this._isLayerGrouped(t)&&e(t)},this)},onLayerAdded:function onLayerAdded(e){this._layersCollection.on("add",function(t){this._isLayerGrouped(t)&&e(t,this.getLayerInLayerGroupAt(t))},this)},_isLayerGrouped:function _isLayerGrouped(e){return this._getGroupedLayers().indexOf(e)>=0}});e.exports=l},function(e,t,n){"use strict";var r=n(0),i=n(16),o="2.1.0",a="http",s="plain",l="mapnik",u="torque";function _calculateLayerJSON(e){return i.isTiledLayer(e)?function optionsForHTTPLayer(e){return{id:e.get("id"),type:a,options:{urlTemplate:e.get("urlTemplate"),subdomains:e.get("subdomains"),tms:e.get("tms")}}}(e):i.isPlainLayer(e)?function optionsForPlainLayer(e){return{id:e.get("id"),type:s,options:{color:e.get("color"),imageUrl:e.get("image")}}}(e):i.isWMSLayer(e)?function optionsForWMSLayer(e){return{id:e.get("id"),type:a,options:{urlTemplate:e.get("urlTemplate"),tms:!0}}}(e):i.isCartoDBLayer(e)?function optionsForMapnikLayer(e){var t=sharedOptionsForMapnikAndTorqueLayers(e);t.interactivity=e.getInteractiveColumnNames(),e.infowindow&&e.infowindow.hasFields()&&(t.attributes={id:"cartodb_id",columns:e.infowindow.getFieldNames()});isFinite(e.get("minzoom"))&&(t.minzoom=e.get("minzoom"));isFinite(e.get("maxzoom"))&&(t.maxzoom=e.get("maxzoom"));r.isEmpty(e.aggregation)||r.extend(t,{aggregation:e.aggregation});return{id:e.get("id"),type:l,options:t}}(e):i.isTorqueLayer(e)?function optionsForTorqueLayer(e){var t=sharedOptionsForMapnikAndTorqueLayers(e);return{id:e.get("id"),type:u,options:t}}(e):void 0}function sharedOptionsForMapnikAndTorqueLayers(e){var t={cartocss:e.get("cartocss"),cartocss_version:e.get("cartocss_version")||o};return t.source={id:e.getSourceId()},e.get("sql_wrap")&&(t.sql_wrap=e.get("sql_wrap")),t}e.exports={serialize:function serialize(e){return e.chain().map(_calculateLayerJSON).compact().value()}}},function(e,t,n){"use strict";e.exports={serialize:function serialize(e){return e.reduce(function(e,t){return e[t.get("id")]=t.toJSON(),e},{})}}},function(e,t,n){"use strict";var r=n(43);function AnalysisGraph(e,t){t=t||"latest",this.definition=e,this.reference=r.getVersion(t)}function childNodes(e,t){var n=t.analyses[e];return Object.keys(n.params).reduce(function(e,t){return"node"===n.params[t].type&&e.push(t),e},[])}function filterMissingOptionalNodes(e,t){return function(n){return!function isOptionalParam(e,t,n){return n.analyses[e].params[t].optional}(e.type,n,t)||!!e.params[n]}}e.exports=AnalysisGraph,AnalysisGraph.prototype.getNodesWithId=function(){return function reduceById(e,t,n){t.id&&(e[t.id]=t);childNodes(t.type,n).filter(filterMissingOptionalNodes(t,n)).forEach(function(r){reduceById(e,t.params[r],n)});return e}({},this.definition,this.reference)},AnalysisGraph.prototype.getChildNodesNames=function(){return childNodes(this.definition.type,this.reference)},AnalysisGraph.prototype.getNodesList=function(){return function appendAllNodes(e,t,n){e.push(t);childNodes(t.type,n).filter(filterMissingOptionalNodes(t,n)).forEach(function(r){appendAllNodes(e,t.params[r],n)});return e}([],this.definition,this.reference)},AnalysisGraph.prototype.getDefinitionWith=function(e,t){return function extendDefinition(e,t,n,r){e.id&&e.id===n&&Object.keys(r).forEach(function(t){e.params.hasOwnProperty(t)||(e.params[t]={});var n=r[t];Object.keys(n).forEach(function(r){e.params[t][r]=n[r]})});childNodes(e.type,t).filter(filterMissingOptionalNodes(e,t)).forEach(function(i){extendDefinition(e.params[i],t,n,r)});return e}(this.definition,this.reference,e,t)}},function(e){e.exports={version:"0.59.4",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},"bounding-box":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"bounding-circle":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},closest:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},responses:{type:"number",optional:!0,"default-value":1},category:{type:"string",optional:!0}}},"concave-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},target_percent:{type:"number",optional:!0,"default-value":.7},allow_holes:{type:"boolean",optional:!0,"default-value":!1},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},contour:{params:{source:{type:"node",geometry:["point"]},column:{type:"string"},buffer:{type:"number",optional:!0,"default-value":.2},method:{type:"enum",values:["nearest_neighbor","barymetric","IDW"],optional:!0,"default-value":"barymetric"},class_method:{type:"enum",values:["equals","headstails","jenks","quantiles"],optional:!0,"default-value":"quantiles"},steps:{type:"number",optional:!0,"default-value":7},resolution:{type:"number",optional:!0,"default-value":-90}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"data-observatory-multiple-measures":{params:{source:{type:"node",geometry:["point","polygon"]},numerators:{type:"array"},normalizations:{type:"array"},denominators:{type:"array"},geom_ids:{type:"array"},numerator_timespans:{type:"array"},column_names:{type:"array"}}},"deprecated-sql-function":{params:{function_name:{type:"string"},primary_source:{type:"node",geometry:["*"]},secondary_source:{type:"node",geometry:["*"],optional:!0},function_args:{type:"array",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0},greater_than:{type:"number",optional:!0},greater_than_or_equal:{type:"number",optional:!0},less_than:{type:"number",optional:!0},less_than_or_equal:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city_column:{type:"string"},admin_region:{type:"string",optional:!0},admin_region_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-country":{params:{source:{type:"node",geometry:["*"]},country_column:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},output_geometry_type:{type:"enum",values:["point","polygon"],optional:!0,"default-value":"point"},postal_code_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address_column:{type:"string",optional:!0},street_address_template:{type:"string",optional:!0},city:{type:"string",optional:!0},city_column:{type:"string",optional:!0},state:{type:"string",optional:!0},state_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},gravity:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},weight_column:{type:"string"},weight_threshold:{type:"number",optional:!0,"default-value":-1e308},pop_column:{type:"string"},max_distance:{type:"number"},target_id:{type:"number"}}},intersection:{params:{source:{type:"node",geometry:["*"]},source_columns:{type:"array",optional:!0,"default-value":[]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"line-sequential":{params:{source:{type:"node",geometry:["point"]},order_column:{type:"string"},order_type:{type:"enum",values:["asc","desc"]},category_column:{type:"string",optional:!0}}},"line-source-to-target":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string",optional:!0},target:{type:"node",geometry:["point"]},target_column:{type:"string",optional:!0},closest:{type:"boolean"}}},"line-to-column":{params:{source:{type:"node",geometry:["point"]},target_column:{type:"string"}}},"line-to-single-point":{params:{source:{type:"node",geometry:["point"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0,"default-value":!1}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0,"default-value":0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},function(e,t,n){var r={"./0.59.4/reference.json":130};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}webpackContext.keys=function webpackContextKeys(){return Object.keys(r)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=131},function(e,t){e.exports.versions=["0.1.0","0.2.0","0.3.0","0.4.0","0.6.0","0.7.0","0.9.0","0.10.0","0.14.0","0.15.0","0.16.0","0.17.0","0.18.0","0.19.0","0.20.0","0.21.0","0.22.0","0.23.0","0.26.0","0.27.0","0.29.0","0.33.0","0.34.0","0.37.0","0.37.1","0.38.0","0.40.0","0.41.0","0.43.0","0.44.0","0.47.0","0.51.0","0.52.0","0.54.0","0.55.0","0.55.1","0.58.1","0.59.3","0.59.4"],e.exports.target="0.59.4"},function(e,t,n){"use strict";var r=n(43),i=n(129);e.exports.getVersion=r.getVersion,e.exports.versions=r.versions,e.exports.AnalysisGraph=i},function(e,t,n){"use strict";var r=n(0),i=n(29);e.exports={serialize:function serialize(e,t){return function _generateUniqueAnalysisList(e){var t={};return r.reduce(e,function(n,i){return t[i.get("id")]||function _isAnalysisPartOfOtherAnalyses(e,t){return r.any(t,function(t){return!e.equals(t)&&t.findAnalysisById(e.get("id"))})}(i,e)||(t[i.get("id")]=!0,n.push(i.toJSON())),n},[])}(i.getAnalysisList(e,t))}}},function(e,t,n){"use strict";var r=n(134),i=n(128),o=n(127);e.exports={serialize:function serialize(e,t){return{buffersize:{mvt:0},layers:o.serialize(e),dataviews:i.serialize(t),analyses:r.serialize(e,t)}}}},function(e,t,n){var r,i,o;!function(a,s){"use strict";i=[n(0),n(1)],void 0===(o="function"==typeof(r=function(e,t){var n={delay:1e3,condition:function(){return!0}},r=["start","stop","fetch","success","error","complete"],i=[];var o={get:function(t,n){var r=function findPoller(t){return e.find(i,function(e){return e.model===t})}(t);return r?r.set(n):(r=new Poller(t,n),i.push(r)),n&&!0===n.autostart&&r.start({silent:!0}),r},size:function(){return i.length},reset:function(){for(;i.length;)i[0].destroy()}};function Poller(n,r){this.model=n,this.cid=e.uniqueId("poller"),this.set(r),this.model instanceof t.Model&&this.listenTo(this.model,"destroy",this.destroy)}function run(t){if(validate(t)){var n=e.extend({},t.options,{success:function(e,n){t.trigger("success",e,n),delayedRun(t)},error:function(e,n){t.options.continueOnError?(t.trigger("error",e,n),delayedRun(t)):(t.stop({silent:!0}),t.trigger("error",e,n))}});t.trigger("fetch",t.model),t.xhr=t.model.fetch(n)}}e.extend(Poller.prototype,t.Events,{set:function(t){return this.options=e.extend({},n,t||{}),this.options.flush&&this.off(),e.each(r,e.bind(function(t){var n=this.options[t];e.isFunction(n)&&(this.off(t,n,this),this.on(t,n,this))},this)),this.stop({silent:!0})},start:function(t){return this.active()||(t&&t.silent||this.trigger("start",this.model),this.options.active=!0,this.options.delayed?delayedRun(this,e.isNumber(this.options.delayed)&&this.options.delayed):run(this)),this},stop:function(e){return e&&e.silent||this.trigger("stop",this.model),this.options.active=!1,this.xhr&&this.xhr.abort&&this.xhr.abort(),this.xhr=null,clearTimeout(this.timeoutId),this.timeoutId=null,this},active:function(){return!0===this.options.active},destroy:function(){var t=e.indexOf(i,this);t>-1&&(this.stop().stopListening().off(),i.splice(t,1))}});var a={};function getDelay(t){if(e.isNumber(t.options.delay))return t.options.delay;var n=t.options.delay[0],r=t.options.delay[1],i=t.options.delay[2]||2;a[t.cid]?e.isFunction(i)?a[t.cid]=i(a[t.cid]):a[t.cid]*=i:a[t.cid]=1;var o=Math.round(n*a[t.cid]);return r&&r>0&&(o=Math.min(o,r)),o}function delayedRun(t,n){validate(t)&&(t.timeoutId=e.delay(run,n||getDelay(t),t))}function validate(e){return!!e.options.active&&(!0===e.options.condition(e.model)||(e.stop({silent:!0}),e.trigger("complete",e.model),!1))}return o.getDelay=getDelay,o.prototype=Poller.prototype,o})?r.apply(t,i):r)||(e.exports=o)}()},function(e,t,n){"use strict";var r=n(0),i=n(136);function AnalysisPoller(){this._pollers=[]}AnalysisPoller.CONFIG={START_DELAY:1e3,MAX_DELAY:1/0,DELAY_MULTIPLIER:1.5},AnalysisPoller.prototype.resetAnalysisNodes=function(e){this.reset(),r.each(e,function(e){this._poll(e)},this)},AnalysisPoller.prototype._poll=function(e){this._canBePolled(e)&&this._createPoller(e).start()},AnalysisPoller.prototype._canBePolled=function(e){return e.url()&&!e.isDone()},AnalysisPoller.prototype._findPoller=function(e){return r.find(this._pollers,function(t){return t.model===e})},AnalysisPoller.prototype._createPoller=function(e){var t={delay:[AnalysisPoller.CONFIG.START_DELAY,AnalysisPoller.CONFIG.MAX_DELAY,AnalysisPoller.CONFIG.DELAY_MULTIPLIER],condition:function condition(e){return!e.isDone()}},n=i.get(e,t);return this._pollers.push(n),n},AnalysisPoller.prototype.reset=function(){i.reset(),this._pollers=[]},e.exports=AnalysisPoller},function(e,t,n){"use strict";e.exports={track:function track(e){if(window.trackJs)try{var t=e?e.message+" - code: "+e.errorCode:JSON.stringify(e);window.trackJs.track(new Error(t))}catch(e){}}}},function(e,t,n){"use strict";e.exports={layer:{"non-valid-source":{messageRegex:/nonValidSource/,friendlyMessage:'The given object is not a valid source. See "carto.source.Base".'},"non-valid-style":{messageRegex:/nonValidStyle/,friendlyMessage:'The given object is not a valid style. See "carto.style.Base".'},"non-valid-columns":{messageRegex:/nonValidColumns/,friendlyMessage:"The given object is not a valid array of string columns."},"source-with-different-client":{messageRegex:/differentSourceClient/,friendlyMessage:"A layer can't have a source which belongs to a different client."},"style-with-different-client":{messageRegex:/differentStyleClient/,friendlyMessage:"A layer can't have a style which belongs to a different client."},"wrong-interactivity-columns":{messageRegex:/wrongInteractivityColumns\[(.+)\]#(.+)$/,friendlyMessage:"Columns [$0] set on `$1` do not match the columns set in aggregation options."}},source:{"query-required":{messageRegex:/requiredQuery/,friendlyMessage:"SQL Source must have a SQL query."},"query-string":{messageRegex:/requiredString/,friendlyMessage:"SQL Query must be a string."},"no-dataset-name":{messageRegex:/noDatasetName/,friendlyMessage:"Table name is required."},"dataset-string":{messageRegex:/requiredDatasetString$/,friendlyMessage:"Table name must be a string."},"dataset-required":{messageRegex:/requiredDataset$/,friendlyMessage:"Table name must be not empty."}},style:{"required-css":{messageRegex:/requiredCSS$/,friendlyMessage:"CartoCSS is required."},"css-string":{messageRegex:/requiredCSSString$/,friendlyMessage:"CartoCSS must be a string."}},client:{"bad-layer-type":{messageRegex:/badLayerType/,friendlyMessage:"The given object is not a layer."},"index-number":{messageRegex:/indexNumber/,friendlyMessage:"index property must be a number."},"index-out-of-range":{messageRegex:/indexOutOfRange/,friendlyMessage:"index is out of range."},"api-key-required":{messageRegex:/apiKeyRequired/,friendlyMessage:"apiKey property is required."},"api-key-string":{messageRegex:/apiKeyString/,friendlyMessage:"apiKey property must be a string."},"username-required":{messageRegex:/usernameRequired/,friendlyMessage:"username property is required."},"username-string":{messageRegex:/usernameString/,friendlyMessage:"username property must be a string."},"non-valid-server-url":{messageRegex:/nonValidServerURL/,friendlyMessage:"serverUrl is not a valid URL."},"non-matching-server-url":{messageRegex:/serverURLDoesntMatchUsername/,friendlyMessage:"serverUrl doesn't match the username."},"duplicated-layer-id":{messageRegex:/duplicatedLayerId/,friendlyMessage:"A layer with the same ID already exists in the client."}},dataview:{"source-required":{messageRegex:/sourceRequired/,friendlyMessage:"Source property is required."},"column-required":{messageRegex:/columnRequired/,friendlyMessage:"Column property is required."},"column-string":{messageRegex:/columnString/,friendlyMessage:"Column property must be a string."},"empty-column":{messageRegex:/emptyColumn/,friendlyMessage:"Column property must be not empty."},"filter-required":{messageRegex:/filterRequired/,friendlyMessage:"Filter property is required."},"time-series-options-required":{messageRegex:/timeSeriesOptionsRequired/,friendlyMessage:"Options object to create a time series dataview is required."},"time-series-invalid-aggregation":{messageRegex:/timeSeriesInvalidAggregation/,friendlyMessage:"Time aggregation must be a valid value. Use carto.dataview.timeAggregation."},"time-series-invalid-offset":{messageRegex:/timeSeriesInvalidOffset/,friendlyMessage:"Offset must an integer value between -12 and 14."},"time-series-invalid-uselocaltimezone":{messageRegex:/timeSeriesInvalidUselocaltimezone/,friendlyMessage:"useLocalTimezone must be a boolean value."},"histogram-options-required":{messageRegex:/histogramOptionsRequired/,friendlyMessage:"Options object to create a histogram dataview is required."},"histogram-invalid-bins":{messageRegex:/histogramInvalidBins/,friendlyMessage:"Bins must be a positive integer value."},"histogram-invalid-start-end":{messageRegex:/histogramInvalidStartEnd/,friendlyMessage:"Both start and end values must be a number or null."},"formula-options-required":{messageRegex:/formulaOptionsRequired/,friendlyMessage:"Formula dataview options are not defined."},"formula-invalid-operation":{messageRegex:/formulaInvalidOperation/,friendlyMessage:"Operation for formula dataview is not valid. Use carto.operation"},"category-options-required":{messageRegex:/categoryOptionsRequired/,friendlyMessage:"Category dataview options are not defined."},"category-limit-required":{messageRegex:/categoryLimitRequired/,friendlyMessage:"Limit for category dataview is required."},"category-limit-number":{messageRegex:/categoryLimitNumber/,friendlyMessage:"Limit for category dataview must be a number."},"category-limit-positive":{messageRegex:/categoryLimitPositive/,friendlyMessage:"Limit for category dataview must be greater than 0."},"category-invalid-operation":{messageRegex:/categoryInvalidOperation/,friendlyMessage:"Operation for category dataview is not valid. Use carto.operation"},"category-operation-required":{messageRegex:/categoryOperationRequired/,friendlyMessage:"Operation column for category dataview is required."},"category-operation-string":{messageRegex:/categoryOperationString/,friendlyMessage:"Operation column for category dataview must be a string."},"category-operation-empty":{messageRegex:/categoryOperationEmpty/,friendlyMessage:"Operation column for category dataview must be not empty."}},filter:{"invalid-bounds-object":{messageRegex:/invalidBoundsObject/,friendlyMessage:"Bounds object is not valid. Use a carto.filter.Bounds object"},"invalid-circle-object":{messageRegex:/invalidCircleObject/,friendlyMessage:"Circle object is not valid. Use a carto.filter.CircleData object"},"invalid-polygon-object":{messageRegex:/invalidPolygonObject/,friendlyMessage:"Polygon object is not valid. Use a carto.filter.PolygonData object"},"column-required":{messageRegex:/columnRequired/,friendlyMessage:"Column property is required."},"column-string":{messageRegex:/columnString/,friendlyMessage:"Column property must be a string."},"empty-column":{messageRegex:/emptyColumn/,friendlyMessage:"Column property must be not empty."},"invalid-filter":{messageRegex:/invalidFilter(.+)/,friendlyMessage:"'$0' is not a valid filter. Please check documentation."},"invalid-option":{messageRegex:/invalidOption(.+)/,friendlyMessage:"'$0' is not a valid option for this filter."},"wrong-filter-type":{messageRegex:/wrongFilterType/,friendlyMessage:"Filters need to extend from carto.filter.SQLBase. Please use carto.filter.Category or carto.filter.Range."},"invalid-parameter-type":{messageRegex:/invalidParameterType(.+)/,friendlyMessage:"Invalid parameter type for '$0'. Please check filters documentation."}},aggregation:{"threshold-required":{messageRegex:/thresholdRequired/,friendlyMessage:"Aggregation threshold is required."},"invalid-threshold":{messageRegex:/invalidThreshold/,friendlyMessage:"Aggregation threshold must be an integer value greater than 0."},"resolution-required":{messageRegex:/resolutionRequired/,friendlyMessage:"Aggregation resolution is required."},"invalid-resolution":{messageRegex:/invalidResolution/,friendlyMessage:"Aggregation resolution must be 0.5, 1 or powers of 2 up to 256 (2, 4, 8, 16, 32, 64, 128, 256)."},"invalid-placement":{messageRegex:/invalidPlacement/,friendlyMessage:"Aggregation placement is not valid. Must be one of these values: `point-sample`, `point-grid`, `centroid`"},"column-function-required":{messageRegex:/columnFunctionRequired(.+)$/,friendlyMessage:"Aggregation function for column '$0' is required."},"invalid-column-function":{messageRegex:/invalidColumnFunction(.+)$/,friendlyMessage:"Aggregation function for column '$0' is not valid. Use carto.aggregation.function"},"column-aggregated-column-required":{messageRegex:/columnAggregatedColumnRequired(.+)$/,friendlyMessage:"Column to be aggregated to '$0' is required."},"invalid-column-aggregated-column":{messageRegex:/invalidColumnAggregatedColumn(.+)$/,friendlyMessage:"Column to be aggregated to '$0' must be a string."}}}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";e.exports={analysis:{"sql-syntax-error":{messageRegex:/^syntax error/},"invalid-dataset":{messageRegex:/relation (.+) does not exist/,friendlyMessage:"Invalid dataset name used. Dataset $0 does not exist."},"column-does-not-exist":{messageRegex:/column (.+) does not exist/,friendlyMessage:"Invalid column name. Column $0 does not exist."},"analysis-requires-authentication":{messageRegex:/^Analysis requires authentication with API key/}},generic:{},limit:{"over-platform-limits":{messageRegex:/^You are over platform's limits/},"generic-limit-error":{messageRegex:/.*/,friendlyMessage:"The server is taking too long to respond, due to poor conectivity or a temporary error with our servers. Please try again soon."}},tile:{"generic-tile-error":{messageRegex:/.*/,friendlyMessage:"Some tiles might not be rendering correctly."}},layer:{"column-does-not-exist":{messageRegex:/column (.+) does not exist/,friendlyMessage:"Invalid column name. Column $0 does not exist."},"unrecognized-rule":{messageRegex:/Unrecognized rule: (.+)/,friendlyMessage:'Unrecognized rule "$0"'},"generic-layer-error":{messageRegex:/.*/}},dataview:{"formula-does-not-support-operation":{messageRegex:/Formula does not support (.+) operation/},"column-does-not-exist":{messageRegex:/column (.+) does not exist/},"permission-denied":{messageRegex:/permission denied for (.+)/},"wrong-type-column-used-in-time-series":{messageRegex:/function date_part\(unknown, (.+)\) does not exist/,friendlyMessage:"Your time series column type is $0. Please use a date type."},"invalid-aggregation-value":{messageRegex:/Invalid aggregation value. Valid ones: auto, minute, hour, day, week, month, quarter, year, decade, century, millennium/}},auth:{forbidden:{messageRegex:/^Forbidden$/,friendlyMessage:"Forbidden. API key does not grant access."}}}},function(e,t,n){"use strict";var r=n(141),i=n(140),o=n(139);e.exports={ajax:i,windshaft:r,validation:o}},function(e,t,n){"use strict";var r=n(0),i=n(142);function _replaceRegex(e,t){if(!t.friendlyMessage)return e.message;var n=e.message&&e.message.match(t.messageRegex);if(n&&n.length>1){var r=t.friendlyMessage.replace("$0",n[1]);return n.length>2&&(r=r.replace("$1",n[2])),r}return t.friendlyMessage}function _buildErrorCode(e,t){var n=[];return n.push(e&&e.origin),n.push(e&&e.type),n.push(t),(n=r.compact(n)).join(":")}e.exports={getExtraFields:function getExtraFields(e){var t=function _getListedError(e,t){for(var n,i=r.keys(t),o=0;o<i.length;o++){if(n=i[o],!(t[n].messageRegex instanceof RegExp))throw new Error("MessageRegex on "+n+" is not a RegExp.");if(t[n].messageRegex.test(e.message))return{friendlyMessage:_replaceRegex(e,t[n]),errorCode:_buildErrorCode(e,n)}}return{friendlyMessage:e.message||"",errorCode:_buildErrorCode(e,"unknown-error")}}(e,function _getErrorList(e){return i[e.origin]&&i[e.origin][e.type]}(e));return{friendlyMessage:t.friendlyMessage,errorCode:t.errorCode}}}},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(4),a=n(44),s=n(14),l=n(40),u=n(111),c=n(26).version,d=n(3),f=n(7);function getValidationError(e){return new d("client",e)}var h="https://{username}.carto.com";function Client(e){e.serverUrl=(e.serverUrl||h).replace(/{username}/,e.username||""),function _checkSettings(e){(function _checkApiKey(e){if(!e)throw getValidationError("apiKeyRequired");if(!r.isString(e))throw getValidationError("apiKeyString")})(e.apiKey),function _checkUsername(e){if(!e)throw getValidationError("usernameRequired");if(!r.isString(e))throw getValidationError("usernameString")}(e.username),e.serverUrl&&function _checkServerUrl(e,t){if(!e.match(/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/))throw getValidationError("nonValidServerURL");if(e.indexOf(t)<0)throw getValidationError("serverURLDoesntMatchUsername")}(e.serverUrl,e.username)}(e),this._layers=new u,this._dataviews=[],this._engine=new a({apiKey:e.apiKey,username:e.username,serverUrl:e.serverUrl,client:"js-"+c}),this._bindEngine(this._engine)}function _checkLayer(e){if(!(e instanceof l))throw getValidationError("badLayerType")}r.extend(Client.prototype,i.Events),Client.prototype.addLayer=function(e){return this.addLayers([e])},Client.prototype.addLayers=function(e){return e.forEach(this._addLayer,this),this._reload()},Client.prototype.removeLayer=function(e){return this.removeLayers([e])},Client.prototype.removeLayers=function(e){return e.slice(0).forEach(this._removeLayer,this),this._reload()},Client.prototype.moveLayer=function(e,t){var n=this._layers.indexOf(e);return this._moveLayer(e,t),n===t?Promise.resolve():this._reload()},Client.prototype.getLayers=function(){return this._layers.toArray()},Client.prototype.addDataview=function(e){return this.addDataviews([e])},Client.prototype.addDataviews=function(e){return e.forEach(this._addDataview,this),this._reload()},Client.prototype.removeDataview=function(e){var t=this._dataviews.indexOf(e);return-1===t?Promise.resolve():(this._dataviews.splice(t,1),this._engine.removeDataview(e.$getInternalModel()),e.disable(),this._reload())},Client.prototype.getDataviews=function(){return this._dataviews},Client.prototype.getLeafletLayer=function(e){if(f.isLeafletLoaded(),!this._leafletLayer){var t=n(110);this._leafletLayer=new t(this._layers,this._engine,e)}return this._leafletLayer},Client.prototype.getGoogleMapsMapType=function(e){if(f.isGoogleMapsLoaded(),!this._gmapsMapType){var t=n(87);this._gmapsMapType=new t(this._layers,this._engine,e)}return this._gmapsMapType},Client.prototype._reload=function(){return this._engine.reload().then(function(){return Promise.resolve()}).catch(function(e){return Promise.reject(new o(e))})},Client.prototype._addLayer=function(e,t){_checkLayer(e),this._checkDuplicatedLayerId(e),this._layers.add(e),e.$setClient(this),e.$setEngine(this._engine),this._engine.addLayer(e.$getInternalModel())},Client.prototype._removeLayer=function(e){_checkLayer(e),this._layers.remove(e),this._engine.removeLayer(e.$getInternalModel())},Client.prototype._moveLayer=function(e,t){_checkLayer(e),function _checkLayerIndex(e,t){if(!r.isNumber(e))throw getValidationError("indexNumber");if(e<0||e>=t)throw getValidationError("indexOutOfRange")}(t,this._layers.size()),this._layers.move(e,t),this._engine.moveLayer(e.$getInternalModel(),t)},Client.prototype._addDataview=function(e,t){this._dataviews.push(e),e.$setEngine(this._engine),this._engine.addDataview(e.$getInternalModel())},Client.prototype._bindEngine=function(e){e.on(a.Events.RELOAD_SUCCESS,function(){this.trigger(s.SUCCESS)}.bind(this)),e.on(a.Events.RELOAD_ERROR,function(e){this.trigger(s.ERROR,new o(e,{layers:this._layers}))}.bind(this)),e.on(a.Events.LAYER_ERROR,function(e){this.trigger(s.ERROR,new o(e))}.bind(this))},Client.prototype._checkDuplicatedLayerId=function(e){if(this._layers.findById(e.getId()))throw getValidationError("duplicatedLayerId")},e.exports=Client},function(e,t){var n,r,i=e.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(n===setTimeout)return setTimeout(e,0);if((n===defaultSetTimout||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){n=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var o,a=[],s=!1,l=-1;function cleanUpNextTick(){s&&o&&(s=!1,o.length?a=o.concat(a):l=-1,a.length&&drainQueue())}function drainQueue(){if(!s){var e=runTimeout(cleanUpNextTick);s=!0;for(var t=a.length;t;){for(o=a,a=[];++l<t;)o&&o[l].run();l=-1,t=a.length}o=null,s=!1,function runClearTimeout(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new Item(e,t)),1!==a.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=noop,i.addListener=noop,i.once=noop,i.off=noop,i.removeListener=noop,i.removeAllListeners=noop,i.emit=noop,i.prependListener=noop,i.prependOnceListener=noop,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,o={},a=!1,s=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?function installNextTickImplementation(){r=function(e){t.nextTick(function(){runIfPresent(e)})}}():!function canUsePostMessage(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?function installMessageChannelImplementation(){var e=new MessageChannel;e.port1.onmessage=function(e){runIfPresent(e.data)},r=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function installReadyStateChangeImplementation(){var e=s.documentElement;r=function(t){var n=s.createElement("script");n.onreadystatechange=function(){runIfPresent(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function installSetTimeoutImplementation(){r=function(e){setTimeout(runIfPresent,0,e)}}():function installPostMessageImplementation(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&runIfPresent(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}(),l.setImmediate=function setImmediate(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return o[i]=a,r(i),i++},l.clearImmediate=clearImmediate}function clearImmediate(e){delete o[e]}function runIfPresent(e){if(a)setTimeout(runIfPresent,0,e);else{var t=o[e];if(t){a=!0;try{!function run(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{clearImmediate(e),a=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(30),n(145))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function Timeout(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new Timeout(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new Timeout(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function onTimeout(){e._onTimeout&&e._onTimeout()},t))},n(146),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(30))},function(e,t,n){(function(t){!function(n){var r=setTimeout;function noop(){}function Promise(e){if(!(this instanceof Promise))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(e,this)}function handle(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,Promise._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void reject(t.promise,e)}resolve(t.promise,r)}else(1===e._state?resolve:reject)(t.promise,e._value)})):e._deferreds.push(t)}function resolve(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof Promise)return e._state=3,e._value=t,void finale(e);if("function"==typeof n)return void doResolve(function bind(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,finale(e)}catch(t){reject(e,t)}}function reject(e,t){e._state=2,e._value=t,finale(e)}function finale(e){2===e._state&&0===e._deferreds.length&&Promise._immediateFn(function(){e._handled||Promise._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)handle(e,e._deferreds[t]);e._deferreds=null}function doResolve(e,t){var n=!1;try{e(function(e){n||(n=!0,resolve(t,e))},function(e){n||(n=!0,reject(t,e))})}catch(e){if(n)return;n=!0,reject(t,e)}}Promise.prototype.catch=function(e){return this.then(null,e)},Promise.prototype.then=function(e,t){var n=new this.constructor(noop);return handle(this,new function Handler(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},Promise.all=function(e){return new Promise(function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function res(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,function(t){res(e,t)},n)}r[e]=o,0==--i&&t(r)}catch(e){n(e)}}for(var o=0;o<r.length;o++)res(o,r[o])})},Promise.resolve=function(e){return e&&"object"==typeof e&&e.constructor===Promise?e:new Promise(function(t){t(e)})},Promise.reject=function(e){return new Promise(function(t,n){n(e)})},Promise.race=function(e){return new Promise(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},Promise._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){r(e,0)},Promise._unhandledRejectionFn=function _unhandledRejectionFn(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},Promise._setImmediateFn=function _setImmediateFn(e){Promise._immediateFn=e},Promise._setUnhandledRejectionFn=function _setUnhandledRejectionFn(e){Promise._unhandledRejectionFn=e},void 0!==e&&e.exports?e.exports=Promise:n.Promise||(n.Promise=Promise)}(this)}).call(this,n(147).setImmediate)},function(e,t){!function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(e){return e&&DataView.prototype.isPrototypeOf(e)},i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};Headers.prototype.append=function(e,t){e=normalizeName(e),t=normalizeValue(t);var n=this.map[e];this.map[e]=n?n+","+t:t},Headers.prototype.delete=function(e){delete this.map[normalizeName(e)]},Headers.prototype.get=function(e){return e=normalizeName(e),this.has(e)?this.map[e]:null},Headers.prototype.has=function(e){return this.map.hasOwnProperty(normalizeName(e))},Headers.prototype.set=function(e,t){this.map[normalizeName(e)]=normalizeValue(t)},Headers.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},Headers.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),iteratorFor(e)},Headers.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),iteratorFor(e)},Headers.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),iteratorFor(e)},t.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var e=new Response(null,{status:0,statusText:""});return e.type="error",e};var a=[301,302,303,307,308];Response.redirect=function(e,t){if(-1===a.indexOf(t))throw new RangeError("Invalid status code");return new Response(null,{status:t,headers:{location:e}})},e.Headers=Headers,e.Request=Request,e.Response=Response,e.fetch=function(e,n){return new Promise(function(r,i){var o=new Request(e,n),a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:function parseHeaders(e){var t=new Headers;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;r(new Response(t,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&t.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}function normalizeName(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function normalizeValue(e){return"string"!=typeof e&&(e=String(e)),e}function iteratorFor(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function Headers(e){this.map={},e instanceof Headers?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function consumed(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function fileReaderReady(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function readBlobAsArrayBuffer(e){var t=new FileReader,n=fileReaderReady(t);return t.readAsArrayBuffer(e),n}function bufferClone(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&r(e))this._bodyArrayBuffer=bufferClone(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!i(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=bufferClone(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=consumed(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var e=consumed(this);if(e)return e;if(this._bodyBlob)return function readBlobAsText(e){var t=new FileReader,n=fileReaderReady(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function readArrayBufferAsText(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}function Request(e,t){var n=(t=t||{}).body;if(e instanceof Request){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Headers(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new Headers(t.headers)),this.method=function normalizeMethod(e){var t=e.toUpperCase();return o.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function decode(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function Response(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new Headers(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";n(149);var r=n(148);window.Promise||(window.Promise=r);var i=n(144),o=n(82),a=n(79),s=n(23),l=n(77),u=n(59),c=n(14),d=n(5),f={version:n(26).version,ATTRIBUTION:d.ATTRIBUTION,Client:i,source:o,style:a,layer:s,dataview:l,filter:u,events:c,operation:d.operation};e.exports=f}])})},function(e,t,n){"use strict";var r=n(221),i=n(630),o=n(235);e.exports=function fill(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,u=void 0===l?n:i(l,n);u>s;)t[s++]=e;return t}},function(e,t,n){var r=n(34),i=n(2536),o=n(453);r({target:"Array",proto:!0},{fill:i}),o("fill")},function(e,t,n){n(2537);var r=n(113);e.exports=r("Array").fill},function(e,t,n){var r=n(2538),i=Array.prototype;e.exports=function(e){var t=e.fill;return e===i||e instanceof Array&&t===i.fill?r:t}},function(e,t,n){var r=n(2539);e.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(34),i=Math.log,o=Math.LN2;r({target:"Math",stat:!0},{log2:function log2(e){return i(e)/o}})},function(e,t,n){n(2591);var r=n(52);e.exports=r.Math.log2},function(e,t,n){var r=n(2592);e.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=function(){"use strict";var e=[].slice;function noop(){}var t={},n=[null];function queue(r){return function newQueue(r){if(!(r>=1))throw new Error;var i,o,a,s=[],l=[],u=0,c=0,d=0,f=noop,h=!0;function start(){if(!o)for(;o=u&&c<r;){var e=d+c,n=s[e],i=n.length-1,a=n[i];n[i]=end(e),--u,++c,s[e]=a.apply(null,n)||t}}function end(e){return function(t,n){if(!s[e])throw new Error;--c,++d,s[e]=null,null==a&&(null!=t?abort(t):(l[e]=n,u?start():c||notify()))}}function abort(e){a=e,u=NaN,notify()}function notify(){null!=a?f(a):h?f(null,l):f.apply(null,n.concat(l))}return i={defer:function(t){if(f!==noop)throw new Error;var n=e.call(arguments,1);return n.push(t),++u,s.push(n),start(),i},abort:function(){if(null==a){for(var e,t=d+c;--t>=0;)(e=s[t])&&e.abort&&e.abort();abort(new Error("abort"))}return i},await:function(e){if(f!==noop)throw new Error;return f=e,h=!1,u||c||notify(),i},awaitAll:function(e){if(f!==noop)throw new Error;return f=e,h=!0,u||c||notify(),i}}}(arguments.length?+r:1/0)}return queue.version="1.2.1",queue}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(1463);var r=n(52);e.exports=r.setInterval},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(133),i=n(861);r({target:"String",proto:!0,forced:n(860)("anchor")},{anchor:function anchor(e){return i(this,"a","name",e)}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r,i;r=[n(9)],void 0===(i=function(e){return function(e){"use strict";var t=function(n,r,i,o,a){this.fallbackValue=i?i&&void 0!==i.h?i:this.value={h:0,s:0,b:0,a:1}:null,this.fallbackFormat=o||"rgba",this.hexNumberSignPrefix=a,this.value=this.fallbackValue,this.origFormat=null,this.predefinedColors=r||{},this.colors=e.extend({},t.webColors,this.predefinedColors),n&&(void 0!==n.h?this.value=n:this.setColor(String(n))),this.value||(this.value={h:0,s:0,b:0,a:1})};t.webColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32",transparent:"transparent"},t.prototype={constructor:t,colors:{},predefinedColors:{},getValue:function(){return this.value},setValue:function(e){this.value=e},_sanitizeNumber:function(e){return"number"==typeof e?e:isNaN(e)||null===e||""===e||void 0===e?1:""===e?0:void 0!==e.toLowerCase?(e.match(/^\./)&&(e="0"+e),Math.ceil(100*parseFloat(e))/100):1},isTransparent:function(e){return!(!e||!("string"==typeof e||e instanceof String))&&("transparent"===(e=e.toLowerCase().trim())||e.match(/#?00000000/)||e.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/))},rgbaIsTransparent:function(e){return 0===e.r&&0===e.g&&0===e.b&&0===e.a},setColor:function(e){if(e=e.toLowerCase().trim()){if(this.isTransparent(e))return this.value={h:0,s:0,b:0,a:0},!0;var t=this.parse(e);t?(this.value=this.value={h:t.h,s:t.s,b:t.b,a:t.a},this.origFormat||(this.origFormat=t.format)):this.fallbackValue&&(this.value=this.fallbackValue)}return!1},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setBrightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=Math.round(parseInt(100*(1-e),10)/100*100)/100},toRGB:function(e,t,n,r){var i,o,a,s,l;return 0===arguments.length&&(e=this.value.h,t=this.value.s,n=this.value.b,r=this.value.a),e=(e*=360)%360/60,s=(l=n*t)*(1-Math.abs(e%2-1)),i=o=a=n-l,i+=[l,s,0,0,s,l][e=~~e],o+=[s,l,l,s,0,0][e],a+=[0,0,s,l,l,s][e],{r:Math.round(255*i),g:Math.round(255*o),b:Math.round(255*a),a:r}},toHex:function(e,t,n,r){0===arguments.length&&(e=this.value.h,t=this.value.s,n=this.value.b,r=this.value.a);var i=this.toRGB(e,t,n,r);if(this.rgbaIsTransparent(i))return"transparent";var o=(this.hexNumberSignPrefix?"#":"")+((1<<24)+(parseInt(i.r)<<16)+(parseInt(i.g)<<8)+parseInt(i.b)).toString(16).slice(1);return o},toHSL:function(e,t,n,r){0===arguments.length&&(e=this.value.h,t=this.value.s,n=this.value.b,r=this.value.a);var i=e,o=(2-t)*n,a=t*n;return a/=o>0&&o<=1?o:2-o,o/=2,a>1&&(a=1),{h:isNaN(i)?0:i,s:isNaN(a)?0:a,l:isNaN(o)?0:o,a:isNaN(r)?0:r}},toAlias:function(e,t,n,r){var i,o=0===arguments.length?this.toHex():this.toHex(e,t,n,r),a="alias"===this.origFormat?o:this.toString(this.origFormat,!1);for(var s in this.colors)if((i=this.colors[s].toLowerCase().trim())===o||i===a)return s;return!1},RGBtoHSB:function(e,t,n,r){var i,o,a,s;return e/=255,t/=255,n/=255,a=Math.max(e,t,n),s=a-Math.min(e,t,n),i=((i=0===s?null:a===e?(t-n)/s:a===t?(n-e)/s+2:(e-t)/s+4)+360)%6*60/360,o=0===s?0:s/a,{h:this._sanitizeNumber(i),s:o,b:a,a:this._sanitizeNumber(r)}},HueToRGB:function(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e},HSLtoRGB:function(e,t,n,r){var i;t<0&&(t=0);var o=2*n-(i=n<=.5?n*(1+t):n+t-n*t),a=e+1/3,s=e,l=e-1/3,u=Math.round(255*this.HueToRGB(o,i,a)),c=Math.round(255*this.HueToRGB(o,i,s)),d=Math.round(255*this.HueToRGB(o,i,l));return[u,c,d,this._sanitizeNumber(r)]},parse:function(t){if(0===arguments.length)return!1;var n,r,i=this,o=!1,a=void 0!==this.colors[t];return a&&(t=this.colors[t].toLowerCase().trim()),e.each(this.stringParsers,function(e,s){var l=s.re.exec(t);return!(n=l&&s.parse.apply(i,[l]))||(o={},r=a?"alias":s.format?s.format:i.getValidFallbackFormat(),(o=r.match(/hsla?/)?i.RGBtoHSB.apply(i,i.HSLtoRGB.apply(i,n)):i.RGBtoHSB.apply(i,n))instanceof Object&&(o.format=r),!1)}),o},getValidFallbackFormat:function(){var e=["rgba","rgb","hex","hsla","hsl"];return this.origFormat&&-1!==e.indexOf(this.origFormat)?this.origFormat:this.fallbackFormat&&-1!==e.indexOf(this.fallbackFormat)?this.fallbackFormat:"rgba"},toString:function(e,n){e=e||this.origFormat||this.fallbackFormat,n=n||!1;var r=!1;switch(e){case"rgb":return r=this.toRGB(),this.rgbaIsTransparent(r)?"transparent":"rgb("+r.r+","+r.g+","+r.b+")";case"rgba":return"rgba("+(r=this.toRGB()).r+","+r.g+","+r.b+","+r.a+")";case"hsl":return r=this.toHSL(),"hsl("+Math.round(360*r.h)+","+Math.round(100*r.s)+"%,"+Math.round(100*r.l)+"%)";case"hsla":return r=this.toHSL(),"hsla("+Math.round(360*r.h)+","+Math.round(100*r.s)+"%,"+Math.round(100*r.l)+"%,"+r.a+")";case"hex":return this.toHex();case"alias":return!1===(r=this.toAlias())?this.toString(this.getValidFallbackFormat()):n&&!(r in t.webColors)&&r in this.predefinedColors?this.predefinedColors[r]:r;default:return r}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(e){return[e[1],e[2],e[3],1]}},{re:/rgb\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/hsl\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/hsla\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1]}}],colorNameToHex:function(e){return void 0!==this.colors[e.toLowerCase()]&&this.colors[e.toLowerCase()]}};var n={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",fallbackColor:!1,fallbackFormat:"hex",hexNumberSignPrefix:!0,sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><div class="colorpicker-selectors"></div></div>',align:"right",customClass:null,colorSelectors:null},r=function(t,r){this.element=e(t).addClass("colorpicker-element"),this.options=e.extend(!0,{},n,this.element.data(),r),this.component=this.options.component,this.component=!1!==this.component&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=!0===this.options.container?this.element:this.options.container,this.container=!1!==this.container&&e(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=this.createColor(!1!==this.options.color?this.options.color:this.getValue()),this.format=!1!==this.options.format?this.options.format:this.color.origFormat,!1!==this.options.color&&(this.updateInput(this.color),this.updateData(this.color));var i=this.picker=e(this.options.template);if(this.options.customClass&&i.addClass(this.options.customClass),this.options.inline?i.addClass("colorpicker-inline colorpicker-visible"):i.addClass("colorpicker-hidden"),this.options.horizontal&&i.addClass("colorpicker-horizontal"),-1===["rgba","hsla","alias"].indexOf(this.format)&&!1!==this.options.format&&"transparent"!==this.getValue()||i.addClass("colorpicker-with-alpha"),"right"===this.options.align&&i.addClass("colorpicker-right"),!0===this.options.inline&&i.addClass("colorpicker-no-arrow"),this.options.colorSelectors){var o=this,a=o.picker.find(".colorpicker-selectors");a.length>0&&(e.each(this.options.colorSelectors,function(t,n){var r=e("<i />").addClass("colorpicker-selectors-color").css("background-color",n).data("class",t).data("alias",t);r.on("mousedown.colorpicker touchstart.colorpicker",function(t){t.preventDefault(),o.setValue("alias"===o.format?e(this).data("alias"):e(this).css("background-color"))}),a.append(r)}),a.show().addClass("colorpicker-visible"))}i.on("mousedown.colorpicker touchstart.colorpicker",e.proxy(function(e){e.target===e.currentTarget&&e.preventDefault()},this)),i.find(".colorpicker-saturation, .colorpicker-hue, .colorpicker-alpha").on("mousedown.colorpicker touchstart.colorpicker",e.proxy(this.mousedown,this)),i.appendTo(this.container?this.container:e("body")),!1!==this.input&&(this.input.on({"keyup.colorpicker":e.proxy(this.keyup,this)}),this.input.on({"change.colorpicker":e.proxy(this.change,this)}),!1===this.component&&this.element.on({"focus.colorpicker":e.proxy(this.show,this)}),!1===this.options.inline&&this.element.on({"focusout.colorpicker":e.proxy(this.hide,this)})),!1!==this.component&&this.component.on({"click.colorpicker":e.proxy(this.show,this)}),!1===this.input&&!1===this.component&&this.element.on({"click.colorpicker":e.proxy(this.show,this)}),!1!==this.input&&!1!==this.component&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":e.proxy(this.show,this),"focus.colorpicker":e.proxy(this.show,this)}),this.update(),e(e.proxy(function(){this.element.trigger("create")},this))};r.Color=t,r.prototype={constructor:r,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker","color").off(".colorpicker"),!1!==this.input&&this.input.off(".colorpicker"),!1!==this.component&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(!1!==this.options.inline||this.options.container)return!1;var e=this.container&&this.container[0]!==window.document.body?"position":"offset",t=this.component||this.element,n=t[e]();"right"===this.options.align&&(n.left-=this.picker.outerWidth()-t.outerWidth()),this.picker.css({top:n.top+t.outerHeight(),left:n.left})},show:function(t){this.isDisabled()||(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),e(window).on("resize.colorpicker",e.proxy(this.reposition,this)),!t||this.hasInput()&&"color"!==this.input.attr("type")||t.stopPropagation&&t.preventDefault&&(t.stopPropagation(),t.preventDefault()),!this.component&&this.input||!1!==this.options.inline||e(window.document).on({"mousedown.colorpicker":e.proxy(this.hide,this)}),this.element.trigger({type:"showPicker",color:this.color}))},hide:function(t){if(void 0!==t&&t.target&&(e(t.currentTarget).parents(".colorpicker").length>0||e(t.target).parents(".colorpicker").length>0))return!1;this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),e(window).off("resize.colorpicker",this.reposition),e(window.document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(e){return e=e||this.color.toString(this.format,!1),this.element.data("color",e),e},updateInput:function(e){return e=e||this.color.toString(this.format,!1),!1!==this.input&&(this.input.prop("value",e),this.input.trigger("change")),e},updatePicker:function(e){void 0!==e&&(this.color=this.createColor(e));var t=!1===this.options.horizontal?this.options.sliders:this.options.slidersHorz,n=this.picker.find("i");if(0!==n.length)return!1===this.options.horizontal?(t=this.options.sliders,n.eq(1).css("top",t.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",t.alpha.maxTop*(1-this.color.value.a))):(t=this.options.slidersHorz,n.eq(1).css("left",t.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",t.alpha.maxLeft*(1-this.color.value.a))),n.eq(0).css({top:t.saturation.maxTop-this.color.value.b*t.saturation.maxTop,left:this.color.value.s*t.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",(this.options.hexNumberSignPrefix?"":"#")+this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",(this.options.hexNumberSignPrefix?"":"#")+this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format,!0)),e},updateComponent:function(e){var t;if(t=void 0!==e?this.createColor(e):this.color,!1!==this.component){var n=this.component.find("i").eq(0);n.length>0?n.css({backgroundColor:t.toString(this.format,!0)}):this.component.css({backgroundColor:t.toString(this.format,!0)})}return t.toString(this.format,!1)},update:function(e){var t;return!1===this.getValue(!1)&&!0!==e||(t=this.updateComponent(),this.updateInput(t),this.updateData(t),this.updatePicker()),t},setValue:function(e){this.color=this.createColor(e),this.update(!0),this.element.trigger({type:"changeColor",color:this.color,value:e})},createColor:function(e){return new t(e||null,this.options.colorSelectors,this.options.fallbackColor?this.options.fallbackColor:this.color,this.options.fallbackFormat,this.options.hexNumberSignPrefix)},getValue:function(e){var t;return e=void 0===e?this.options.fallbackColor:e,void 0!==(t=this.hasInput()?this.input.val():this.element.data("color"))&&""!==t&&null!==t||(t=e),t},hasInput:function(){return!1!==this.input},isDisabled:function(){return!!this.hasInput()&&!0===this.input.prop("disabled")},disable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0)},enable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!1),this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0)},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(t){!t.pageX&&!t.pageY&&t.originalEvent&&t.originalEvent.touches&&(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var n=e(t.target),r=n.closest("div"),i=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!r.is(".colorpicker")){if(r.is(".colorpicker-saturation"))this.currentSlider=e.extend({},i.saturation);else if(r.is(".colorpicker-hue"))this.currentSlider=e.extend({},i.hue);else{if(!r.is(".colorpicker-alpha"))return!1;this.currentSlider=e.extend({},i.alpha)}var o=r.offset();this.currentSlider.guide=r.find("i")[0].style,this.currentSlider.left=t.pageX-o.left,this.currentSlider.top=t.pageY-o.top,this.mousePointer={left:t.pageX,top:t.pageY},e(window.document).on({"mousemove.colorpicker":e.proxy(this.mousemove,this),"touchmove.colorpicker":e.proxy(this.mousemove,this),"mouseup.colorpicker":e.proxy(this.mouseup,this),"touchend.colorpicker":e.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(e){!e.pageX&&!e.pageY&&e.originalEvent&&e.originalEvent.touches&&(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),e.stopPropagation(),e.preventDefault();var t=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((e.pageX||this.mousePointer.left)-this.mousePointer.left))),n=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((e.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=t+"px",this.currentSlider.guide.top=n+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,t/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,n/this.currentSlider.maxTop),!1!==this.options.format||"setAlpha"!==this.currentSlider.callTop&&"setAlpha"!==this.currentSlider.callLeft||(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(t){return t.stopPropagation(),t.preventDefault(),e(window.document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},change:function(e){this.keyup(e)},keyup:function(e){38===e.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===e.keyCode?(this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0)):(this.color=this.createColor(this.input.val()),this.color.origFormat&&!1===this.options.format&&(this.format=this.color.origFormat),!1!==this.getValue(!1)&&(this.updateData(),this.updateComponent(),this.updatePicker())),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}},e.colorpicker=r,e.fn.colorpicker=function(t){var n=Array.prototype.slice.call(arguments,1),i=1===this.length,o=null,a=this.each(function(){var i=e(this),a=i.data("colorpicker"),s="object"==typeof t?t:{};a||(a=new r(this,s),i.data("colorpicker",a)),"string"==typeof t?e.isFunction(a[t])?o=a[t].apply(a,n):(n.length&&(a[t]=n[0]),o=a[t]):o=i});return i?o:a},e.fn.colorpicker.constructor=r}(e)}.apply(t,r))||(e.exports=i)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=function closest(e,t){for(;e&&e.nodeType!==n;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},function(e,t,n){var r=n(2844);function _delegate(e,t,n,i,o){var a=function listener(e,t,n,i){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&i.call(e,n)}}.apply(this,arguments);return e.addEventListener(n,a,o),{destroy:function(){e.removeEventListener(n,a,o)}}}e.exports=function delegate(e,t,n,r,i){return"function"==typeof e.addEventListener?_delegate.apply(null,arguments):"function"==typeof n?_delegate.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return _delegate(e,t,n,r,i)}))}},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t,n){var r=n(2846),i=n(2845);e.exports=function listen(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(e))return function listenNode(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(r.nodeList(e))return function listenNodeList(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}(e,t,n);if(r.string(e))return function listenSelector(e,t,n){return i(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(e,t){function E(){}E.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function listener(){r.off(e,listener),t.apply(n,arguments)}return listener._=t,this.on(e,listener,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,a=r.length;o<a;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}},e.exports=E},function(e,t){e.exports=function select(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),i=document.createRange();i.selectNodeContents(e),r.removeAllRanges(),r.addRange(i),t=r.toString()}return t}},function(e,t,n){var r,i,o;i=[e,n(2849)],void 0===(o="function"==typeof(r=function(e,t){"use strict";var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(t),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=function(){function ClipboardAction(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ClipboardAction),this.resolveOptions(e),this.initSelection()}return i(ClipboardAction,[{key:"resolveOptions",value:function resolveOptions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function initSelection(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function selectFake(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=r+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,n.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function removeFake(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function selectTarget(){this.selectedText=(0,n.default)(this.target),this.copyText()}},{key:"copyText",value:function copyText(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function handleResult(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function clearSelection(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function destroy(){this.removeFake()}},{key:"action",set:function set(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function get(){return this._action}},{key:"target",set:function set(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":r(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function get(){return this._target}}]),ClipboardAction}();e.exports=o})?r.apply(t,i):r)||(e.exports=o)},,,,,,,function(e,t,n){var r,i,o;!function(a){"use strict";i=[n(9)],void 0===(o="function"==typeof(r=function(e){Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&e!=e};var t="rangeslider",n=0,r=function supportsRange(){var e=document.createElement("input");return e.setAttribute("type","range"),"text"!==e.type}(),i={polyfill:!0,orientation:"horizontal",rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",activeClass:"rangeslider--active",horizontalClass:"rangeslider--horizontal",verticalClass:"rangeslider--vertical",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]},o={orientation:{horizontal:{dimension:"width",direction:"left",directionStyle:"left",coordinate:"x"},vertical:{dimension:"height",direction:"top",directionStyle:"bottom",coordinate:"y"}}};function isHidden(e){return e&&(0===e.offsetWidth||0===e.offsetHeight||!1===e.open)}function getDimension(e,t){var n=function getHiddenParentNodes(e){var t=[],n=e.parentNode;for(;isHidden(n);)t.push(n),n=n.parentNode;return t}(e),r=n.length,i=[],o=e[t];function toggleOpenProperty(e){void 0!==e.open&&(e.open=!e.open)}if(r){for(var a=0;a<r;a++)i[a]=n[a].style.cssText,n[a].style.setProperty?n[a].style.setProperty("display","block","important"):n[a].style.cssText+=";display: block !important",n[a].style.height="0",n[a].style.overflow="hidden",n[a].style.visibility="hidden",toggleOpenProperty(n[a]);o=e[t];for(var s=0;s<r;s++)n[s].style.cssText=i[s],toggleOpenProperty(n[s])}return o}function tryParseFloat(e,t){var n=parseFloat(e);return Number.isNaN(n)?t:n}function ucfirst(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Plugin(a,s){if(this.$window=e(window),this.$document=e(document),this.$element=e(a),this.options=e.extend({},i,s),this.polyfill=this.options.polyfill,this.orientation=this.$element[0].getAttribute("data-orientation")||this.options.orientation,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.DIMENSION=o.orientation[this.orientation].dimension,this.DIRECTION=o.orientation[this.orientation].direction,this.DIRECTION_STYLE=o.orientation[this.orientation].directionStyle,this.COORDINATE=o.orientation[this.orientation].coordinate,this.polyfill&&r)return!1;this.identifier="js-"+t+"-"+n++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=e('<div class="'+this.options.fillClass+'" />'),this.$handle=e('<div class="'+this.options.handleClass+'" />'),this.$range=e('<div class="'+this.options.rangeClass+" "+this.options[this.orientation+"Class"]+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=e.proxy(this.handleDown,this),this.handleMove=e.proxy(this.handleMove,this),this.handleEnd=e.proxy(this.handleEnd,this),this.init();var l=this;this.$window.on("resize."+this.identifier,function debounce(e,t){return t=t||100,function(){if(!e.debouncing){var n=Array.prototype.slice.apply(arguments);e.lastReturnVal=e.apply(window,n),e.debouncing=!0}return clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout(function(){e.debouncing=!1},t),e.lastReturnVal}}(function(){!function delay(e,t){var n=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)}(function(){l.update(!1,!1)},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(e,t){if(!t||t.origin!==l.identifier){var n=e.target.value,r=l.getPositionFromValue(n);l.setPosition(r)}})}return Plugin.prototype.init=function(){this.update(!0,!1),this.onInit&&"function"==typeof this.onInit&&this.onInit()},Plugin.prototype.update=function(e,t){(e=e||!1)&&(this.min=tryParseFloat(this.$element[0].getAttribute("min"),0),this.max=tryParseFloat(this.$element[0].getAttribute("max"),100),this.value=tryParseFloat(this.$element[0].value,Math.round(this.min+(this.max-this.min)/2)),this.step=tryParseFloat(this.$element[0].getAttribute("step"),1)),this.handleDimension=getDimension(this.$handle[0],"offset"+ucfirst(this.DIMENSION)),this.rangeDimension=getDimension(this.$range[0],"offset"+ucfirst(this.DIMENSION)),this.maxHandlePos=this.rangeDimension-this.handleDimension,this.grabPos=this.handleDimension/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position,t)},Plugin.prototype.handleDown=function(e){if(e.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),this.$range.addClass(this.options.activeClass),!((" "+e.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var t=this.getRelativePosition(e),n=this.$range[0].getBoundingClientRect()[this.DIRECTION],r=this.getPositionFromNode(this.$handle[0])-n,i="vertical"===this.orientation?this.maxHandlePos-(t-this.grabPos):t-this.grabPos;this.setPosition(i),t>=r&&t<r+this.handleDimension&&(this.grabPos=t-r)}},Plugin.prototype.handleMove=function(e){e.preventDefault();var t=this.getRelativePosition(e),n="vertical"===this.orientation?this.maxHandlePos-(t-this.grabPos):t-this.grabPos;this.setPosition(n)},Plugin.prototype.handleEnd=function(e){e.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$range.removeClass(this.options.activeClass),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},Plugin.prototype.cap=function(e,t,n){return e<t?t:e>n?n:e},Plugin.prototype.setPosition=function(e,t){var n,r;void 0===t&&(t=!0),n=this.getValueFromPosition(this.cap(e,0,this.maxHandlePos)),r=this.getPositionFromValue(n),this.$fill[0].style[this.DIMENSION]=r+this.grabPos+"px",this.$handle[0].style[this.DIRECTION_STYLE]=r+"px",this.setValue(n),this.position=r,this.value=n,t&&this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(r,n)},Plugin.prototype.getPositionFromNode=function(e){for(var t=0;null!==e;)t+=e.offsetLeft,e=e.offsetParent;return t},Plugin.prototype.getRelativePosition=function(e){var t=ucfirst(this.COORDINATE),n=this.$range[0].getBoundingClientRect()[this.DIRECTION],r=0;return void 0!==e.originalEvent["client"+t]?r=e.originalEvent["client"+t]:e.originalEvent.touches&&e.originalEvent.touches[0]&&void 0!==e.originalEvent.touches[0]["client"+t]?r=e.originalEvent.touches[0]["client"+t]:e.currentPoint&&void 0!==e.currentPoint[this.COORDINATE]&&(r=e.currentPoint[this.COORDINATE]),r-n},Plugin.prototype.getPositionFromValue=function(e){var t;return t=(e-this.min)/(this.max-this.min),Number.isNaN(t)?0:t*this.maxHandlePos},Plugin.prototype.getValueFromPosition=function(e){var t,n;return t=e/(this.maxHandlePos||1),n=this.step*Math.round(t*(this.max-this.min)/this.step)+this.min,Number(n.toFixed(this.toFixed))},Plugin.prototype.setValue=function(e){e===this.value&&""!==this.$element[0].value||this.$element.val(e).trigger("input",{origin:this.identifier})},Plugin.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+t),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},e.fn[t]=function(n){var r=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=e(this),o=i.data("plugin_"+t);o||i.data("plugin_"+t,o=new Plugin(this,n)),"string"==typeof n&&o[n].apply(o,r)})},"rangeslider.js is available in jQuery context e.g $(selector).rangeslider(options);"})?r.apply(t,i):r)||(e.exports=o)}()},function(e,t,n){(function(e){!function(e){var t,r,i=e.jQuery||e.Zepto||e.ender||n(9),o=e._||n(0),a=(t=e.Backbone||n(3)).View.extend({initialize:function(e){var t=this;e=e||{};var n=this.schema=function(){if(e.schema)return o.result(e,"schema");var n=e.model;return n&&n.schema?o.isFunction(n.schema)?n.schema():n.schema:t.schema?o.isFunction(t.schema)?t.schema():t.schema:{}}();o.extend(this,o.pick(e,"model","data","idPrefix","templateData"));var r=this.constructor;this.template=e.template||this.template||r.template,this.Fieldset=e.Fieldset||this.Fieldset||r.Fieldset,this.Field=e.Field||this.Field||r.Field,this.NestedField=e.NestedField||this.NestedField||r.NestedField;var i=this.selectedFields=e.fields||o.keys(n),a=this.fields={};o.each(i,function(e){var t=n[e];a[e]=this.createField(e,t)},this);var s=e.fieldsets||[i];this.fieldsets=[];o.each(s,function(e){this.fieldsets.push(this.createFieldset(e))},this)},createFieldset:function(e){var t={schema:e,fields:this.fields};return new this.Fieldset(t)},createField:function(e,t){var n={form:this,key:e,schema:t,idPrefix:this.idPrefix};this.model?n.model=this.model:this.data?n.value=this.data[e]:n.value=null;var r=new this.Field(n);return this.listenTo(r.editor,"all",this.handleEditorEvent),r},handleEditorEvent:function(e,t){var n=t.key+":"+e;switch(this.trigger.call(this,n,this,t,Array.prototype.slice.call(arguments,2)),e){case"change":this.trigger("change",this);break;case"focus":this.hasFocus||this.trigger("focus",this);break;case"blur":if(this.hasFocus){var r=this;setTimeout(function(){o.find(r.fields,function(e){return e.editor.hasFocus})||r.trigger("blur",r)},0)}}},render:function(){var e=this,t=this.fields,n=i(i.trim(this.template(o.result(this,"templateData"))));return n.find("[data-editors]").add(n).each(function(n,r){var a=i(r),s=a.attr("data-editors");if(!o.isUndefined(s)){var l="*"==s?e.selectedFields||o.keys(t):s.split(",");o.each(l,function(e){var n=t[e];a.append(n.editor.render().el)})}}),n.find("[data-fields]").add(n).each(function(n,r){var a=i(r),s=a.attr("data-fields");if(!o.isUndefined(s)){var l="*"==s?e.selectedFields||o.keys(t):s.split(",");o.each(l,function(e){var n=t[e];a.append(n.render().el)})}}),n.find("[data-fieldsets]").add(n).each(function(t,n){var r=i(n),a=r.attr("data-fieldsets");o.isUndefined(a)||o.each(e.fieldsets,function(e){r.append(e.render().el)})}),this.setElement(n),n.addClass(this.className),this},validate:function(e){var t=this.fields,n=this.model,r={};if(e=e||{},o.each(t,function(e){var t=e.validate();t&&(r[e.key]=t)}),!e.skipModelValidate&&n&&n.validate){var i=n.validate(this.getValue());if(i){var a=o.isObject(i)&&!o.isArray(i);a||(r._others=r._others||[],r._others.push(i)),a&&o.each(i,function(e,n){if(t[n]&&!r[n])t[n].setError(e),r[n]=e;else{r._others=r._others||[];var i={};i[n]=e,r._others.push(i)}})}}return o.isEmpty(r)?null:r},commit:function(e){var t,n={skipModelValidate:!(e=e||{}).validate},r=this.validate(n);if(r)return r;var i=o.extend({error:function(e,n){t=n}},e);return this.model.set(this.getValue(),i),t||void 0},getValue:function(e){if(e)return this.fields[e].getValue();var t={};return o.each(this.fields,function(e){t[e.key]=e.getValue()}),t},setValue:function(e,t){var n,r={};for(n in"string"==typeof e?r[e]=t:r=e,this.schema)void 0!==r[n]&&this.fields[n].setValue(r[n])},getEditor:function(e){var t=this.fields[e];if(!t)throw new Error("Field not found: "+e);return t.editor},focus:function(){if(!this.hasFocus){var e=this.fieldsets[0].getFieldAt(0);e&&e.editor.focus()}},blur:function(){if(this.hasFocus){var e=o.find(this.fields,function(e){return e.editor.hasFocus});e&&e.editor.blur()}},trigger:function(e){return"focus"===e?this.hasFocus=!0:"blur"===e&&(this.hasFocus=!1),t.View.prototype.trigger.apply(this,arguments)},remove:function(){return o.each(this.fieldsets,function(e){e.remove()}),o.each(this.fields,function(e){e.remove()}),t.View.prototype.remove.apply(this,arguments)}},{template:o.template("    <form data-fieldsets></form>  ",null,this.templateSettings),templateSettings:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},editors:{}});a.validators=((r={}).errMessages={required:"Required",regexp:"Invalid",email:"Invalid email address",url:"Invalid URL",match:o.template('Must match field "<%= field %>"',null,a.templateSettings)},r.required=function(e){return e=o.extend({type:"required",message:this.errMessages.required},e),function required(t){e.value=t;var n={type:e.type,message:o.isFunction(e.message)?e.message(e):e.message};if(null===t||void 0===t||!1===t||""===t)return n}},r.regexp=function(e){if(!e.regexp)throw new Error('Missing required "regexp" option for "regexp" validator');return e=o.extend({type:"regexp",message:this.errMessages.regexp},e),function regexp(t){e.value=t;var n={type:e.type,message:o.isFunction(e.message)?e.message(e):e.message};if(null!==t&&void 0!==t&&""!==t)return e.regexp.test(t)?void 0:n}},r.email=function(e){return e=o.extend({type:"email",message:this.errMessages.email,regexp:/^[\w\-]{1,}([\w\-\+.]{1,1}[\w\-]{1,}){0,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,3}$/},e),r.regexp(e)},r.url=function(e){return e=o.extend({type:"url",message:this.errMessages.url,regexp:/^(http|https):\/\/(([A-Z0-9][A-Z0-9_\-]*)(\.[A-Z0-9][A-Z0-9_\-]*)+)(:(\d+))?\/?/i},e),r.regexp(e)},r.match=function(e){if(!e.field)throw new Error('Missing required "field" options for "match" validator');return e=o.extend({type:"match",message:this.errMessages.match},e),function match(t,n){e.value=t;var r={type:e.type,message:o.isFunction(e.message)?e.message(e):e.message};if(null!==t&&void 0!==t&&""!==t)return t!==n[e.field]?r:void 0}},r),a.Fieldset=t.View.extend({initialize:function(e){e=e||{};var t=this.schema=this.createSchema(e.schema);this.fields=o.pick(e.fields,t.fields),this.template=e.template||this.constructor.template},createSchema:function(e){return o.isArray(e)&&(e={fields:e}),e.legend=e.legend||null,e},getFieldAt:function(e){var t=this.schema.fields[e];return this.fields[t]},templateData:function(){return this.schema},render:function(){this.schema;var e=this.fields,t=i(i.trim(this.template(o.result(this,"templateData"))));return t.find("[data-fields]").add(t).each(function(t,n){var r=i(n),a=r.attr("data-fields");o.isUndefined(a)||o.each(e,function(e){r.append(e.render().el)})}),this.setElement(t),this},remove:function(){o.each(this.fields,function(e){e.remove()}),t.View.prototype.remove.call(this)}},{template:o.template("    <fieldset data-fields>      <% if (legend) { %>        <legend><%= legend %></legend>      <% } %>    </fieldset>  ",null,a.templateSettings)}),a.Field=t.View.extend({initialize:function(e){e=e||{},o.extend(this,o.pick(e,"form","key","model","value","idPrefix"));var t=this.schema=this.createSchema(e.schema);this.template=e.template||t.template||this.constructor.template,this.errorClassName=e.errorClassName||this.constructor.errorClassName,this.editor=this.createEditor()},createSchema:function(e){return o.isString(e)&&(e={type:e}),(e=o.extend({type:"Text",title:this.createTitle()},e)).type=o.isString(e.type)?a.editors[e.type]:e.type,e},createEditor:function(){var e=o.extend(o.pick(this,"schema","form","key","model","value"),{id:this.createEditorId()});return new(0,this.schema.type)(e)},createEditorId:function(){var e=this.idPrefix,t=this.key;return t=t.replace(/\./g,"_"),o.isString(e)||o.isNumber(e)?e+t:o.isNull(e)?t:this.model?this.model.cid+"_"+t:t},createTitle:function(){var e=this.key;return e=(e=e.replace(/([A-Z])/g," $1")).replace(/^./,function(e){return e.toUpperCase()})},templateData:function(){var e=this.schema;return{help:e.help||"",title:e.title,fieldAttrs:e.fieldAttrs,editorAttrs:e.editorAttrs,key:this.key,editorId:this.editor.id}},render:function(){var e=this.schema,t=this.editor;if(e.type==a.editors.Hidden)return this.setElement(t.render().el);var n=i(i.trim(this.template(o.result(this,"templateData"))));return e.fieldClass&&n.addClass(e.fieldClass),e.fieldAttrs&&n.attr(e.fieldAttrs),n.find("[data-editor]").add(n).each(function(e,n){var r=i(n),a=r.attr("data-editor");o.isUndefined(a)||r.append(t.render().el)}),this.setElement(n),this},validate:function(){var e=this.editor.validate();return e?this.setError(e.message):this.clearError(),e},setError:function(e){this.editor.hasNestedForm||(this.$el.addClass(this.errorClassName),this.$("[data-error]").html(e))},clearError:function(){this.$el.removeClass(this.errorClassName),this.$("[data-error]").empty()},commit:function(){return this.editor.commit()},getValue:function(){return this.editor.getValue()},setValue:function(e){this.editor.setValue(e)},focus:function(){this.editor.focus()},blur:function(){this.editor.blur()},remove:function(){this.editor.remove(),t.View.prototype.remove.call(this)}},{template:o.template('    <div>      <label for="<%= editorId %>"><%= title %></label>      <div>        <span data-editor></span>        <div data-error></div>        <div><%= help %></div>      </div>    </div>  ',null,a.templateSettings),errorClassName:"error"}),a.NestedField=a.Field.extend({template:o.template(i.trim("    <div>      <span data-editor></span>      <% if (help) { %>        <div><%= help %></div>      <% } %>      <div data-error></div>    </div>  "),null,a.templateSettings)}),a.Editor=a.editors.Base=t.View.extend({defaultValue:null,hasFocus:!1,initialize:function(e){if((e=e||{}).model){if(!e.key)throw new Error("Missing option: 'key'");this.model=e.model,this.value=this.model.get(e.key)}else void 0!==e.value&&(this.value=e.value);void 0===this.value&&(this.value=this.defaultValue),o.extend(this,o.pick(e,"key","form"));var t=this.schema=e.schema||{};this.validators=e.validators||t.validators,this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),t.editorClass&&this.$el.addClass(t.editorClass),t.editorAttrs&&this.$el.attr(t.editorAttrs)},getName:function(){return(this.key||"").replace(/\./g,"_")},getValue:function(){return this.value},setValue:function(e){this.value=e},focus:function(){throw new Error("Not implemented")},blur:function(){throw new Error("Not implemented")},commit:function(e){var t=this.validate();return t||(this.listenTo(this.model,"invalid",function(e,n){t=n}),this.model.set(this.key,this.getValue(),e),t||void 0)},validate:function(){this.$el;var e=null,t=this.getValue(),n=this.form?this.form.getValue():{},r=this.validators,i=this.getValidator;return r&&o.every(r,function(r){return!(e=i(r)(t,n))}),e},trigger:function(e){return"focus"===e?this.hasFocus=!0:"blur"===e&&(this.hasFocus=!1),t.View.prototype.trigger.apply(this,arguments)},getValidator:function(e){var t=a.validators;if(o.isRegExp(e))return t.regexp({regexp:e});if(o.isString(e)){if(!t[e])throw new Error('Validator "'+e+'" not found');return t[e]()}if(o.isFunction(e))return e;if(o.isObject(e)&&e.type){var n=e;return t[n.type](n)}throw new Error("Invalid validator: "+e)}}),a.editors.Text=a.Editor.extend({tagName:"input",defaultValue:"",previousValue:"",events:{keyup:"determineChange",keypress:function(e){var t=this;setTimeout(function(){t.determineChange()},0)},select:function(e){this.trigger("select",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){a.editors.Base.prototype.initialize.call(this,e);var t=this.schema,n="text";t&&t.editorAttrs&&t.editorAttrs.type&&(n=t.editorAttrs.type),t&&t.dataType&&(n=t.dataType),this.$el.attr("type",n)},render:function(){return this.setValue(this.value),this},determineChange:function(e){var t=this.$el.val();t!==this.previousValue&&(this.previousValue=t,this.trigger("change",this))},getValue:function(){return this.$el.val()},setValue:function(e){this.$el.val(e)},focus:function(){this.hasFocus||this.$el.focus()},blur:function(){this.hasFocus&&this.$el.blur()},select:function(){this.$el.select()}}),a.editors.TextArea=a.editors.Text.extend({tagName:"textarea",initialize:function(e){a.editors.Base.prototype.initialize.call(this,e)}}),a.editors.Password=a.editors.Text.extend({initialize:function(e){a.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","password")}}),a.editors.Number=a.editors.Text.extend({defaultValue:0,events:o.extend({},a.editors.Text.prototype.events,{keypress:"onKeyPress",change:"onKeyPress"}),initialize:function(e){a.editors.Text.prototype.initialize.call(this,e);var t=this.schema;this.$el.attr("type","number"),t&&t.editorAttrs&&t.editorAttrs.step||this.$el.attr("step","any")},onKeyPress:function(e){var t=this,n=function(){setTimeout(function(){t.determineChange()},0)};if(0!==e.charCode){var r=this.$el.val();void 0!=e.charCode&&(r+=String.fromCharCode(e.charCode)),/^[0-9]*\.?[0-9]*?$/.test(r)?n():e.preventDefault()}else n()},getValue:function(){var e=this.$el.val();return""===e?null:parseFloat(e,10)},setValue:function(e){e=o.isNumber(e)?e:o.isString(e)&&""!==e?parseFloat(e,10):null,o.isNaN(e)&&(e=null),a.editors.Text.prototype.setValue.call(this,e)}}),a.editors.Hidden=a.editors.Text.extend({defaultValue:"",initialize:function(e){a.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","hidden")},focus:function(){},blur:function(){}}),a.editors.Checkbox=a.editors.Base.extend({defaultValue:!1,tagName:"input",events:{click:function(e){this.trigger("change",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){a.editors.Base.prototype.initialize.call(this,e),this.$el.attr("type","checkbox")},render:function(){return this.setValue(this.value),this},getValue:function(){return this.$el.prop("checked")},setValue:function(e){e?this.$el.prop("checked",!0):this.$el.prop("checked",!1)},focus:function(){this.hasFocus||this.$el.focus()},blur:function(){this.hasFocus&&this.$el.blur()}}),a.editors.Select=a.editors.Base.extend({tagName:"select",events:{change:function(e){this.trigger("change",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){if(a.editors.Base.prototype.initialize.call(this,e),!this.schema||!this.schema.options)throw new Error("Missing required 'schema.options'")},render:function(){return this.setOptions(this.schema.options),this},setOptions:function(e){var n=this;if(e instanceof t.Collection){var r=e;r.length>0?this.renderOptions(e):r.fetch({success:function(t){n.renderOptions(e)}})}else o.isFunction(e)?e(function(e){n.renderOptions(e)},n):this.renderOptions(e)},renderOptions:function(e){var t,n=this.$el;t=this._getOptionsHtml(e),n.html(t),this.setValue(this.value)},_getOptionsHtml:function(e){var n;if(o.isString(e))n=e;else if(o.isArray(e))n=this._arrayToHtml(e);else if(e instanceof t.Collection)n=this._collectionToHtml(e);else if(o.isFunction(e)){var r;e(function(e){r=e},this),n=this._getOptionsHtml(r)}else n=this._objectToHtml(e);return n},getValue:function(){return this.$el.val()},setValue:function(e){this.$el.val(e)},focus:function(){this.hasFocus||this.$el.focus()},blur:function(){this.hasFocus&&this.$el.blur()},_collectionToHtml:function(e){var t=[];return e.each(function(e){t.push({val:e.id,label:e.toString()})}),this._arrayToHtml(t)},_objectToHtml:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({val:n,label:e[n]});return this._arrayToHtml(t)},_arrayToHtml:function(e){var t=[];return o.each(e,function(e){if(o.isObject(e))if(e.group)t.push('<optgroup label="'+e.group+'">'),t.push(this._getOptionsHtml(e.options)),t.push("</optgroup>");else{var n=e.val||0===e.val?e.val:"";t.push('<option value="'+n+'">'+e.label+"</option>")}else t.push("<option>"+e+"</option>")},this),t.join("")}}),a.editors.Radio=a.editors.Select.extend({tagName:"ul",events:{"change input[type=radio]":function(){this.trigger("change",this)},"focus input[type=radio]":function(){this.hasFocus||this.trigger("focus",this)},"blur input[type=radio]":function(){if(this.hasFocus){var e=this;setTimeout(function(){e.$("input[type=radio]:focus")[0]||e.trigger("blur",e)},0)}}},getValue:function(){return this.$("input[type=radio]:checked").val()},setValue:function(e){this.$("input[type=radio]").val([e])},focus:function(){if(!this.hasFocus){var e=this.$("input[type=radio]:checked");e[0]?e.focus():this.$("input[type=radio]").first().focus()}},blur:function(){this.hasFocus&&this.$("input[type=radio]:focus").blur()},_arrayToHtml:function(e){var t=[],n=this;return o.each(e,function(e,r){var i="<li>";if(o.isObject(e)){var a=e.val||0===e.val?e.val:"";i+='<input type="radio" name="'+n.getName()+'" value="'+a+'" id="'+n.id+"-"+r+'" />',i+='<label for="'+n.id+"-"+r+'">'+e.label+"</label>"}else i+='<input type="radio" name="'+n.getName()+'" value="'+e+'" id="'+n.id+"-"+r+'" />',i+='<label for="'+n.id+"-"+r+'">'+e+"</label>";i+="</li>",t.push(i)}),t.join("")}}),a.editors.Checkboxes=a.editors.Select.extend({tagName:"ul",groupNumber:0,events:{"click input[type=checkbox]":function(){this.trigger("change",this)},"focus input[type=checkbox]":function(){this.hasFocus||this.trigger("focus",this)},"blur input[type=checkbox]":function(){if(this.hasFocus){var e=this;setTimeout(function(){e.$("input[type=checkbox]:focus")[0]||e.trigger("blur",e)},0)}}},getValue:function(){var e=[];return this.$("input[type=checkbox]:checked").each(function(){e.push(i(this).val())}),e},setValue:function(e){o.isArray(e)||(e=[e]),this.$("input[type=checkbox]").val(e)},focus:function(){this.hasFocus||this.$("input[type=checkbox]").first().focus()},blur:function(){this.hasFocus&&this.$("input[type=checkbox]:focus").blur()},_arrayToHtml:function(e){var t=[],n=this;return o.each(e,function(e,r){var i="<li>",a=!0;if(o.isObject(e))if(e.group){var s=n.id;n.id+="-"+n.groupNumber++,i='<fieldset class="group"> <legend>'+e.group+"</legend>",i+=n._arrayToHtml(e.options),i+="</fieldset>",n.id=s,a=!1}else{var l=e.val||0===e.val?e.val:"";i+='<input type="checkbox" name="'+n.getName()+'" value="'+l+'" id="'+n.id+"-"+r+'" />',i+='<label for="'+n.id+"-"+r+'">'+e.label+"</label>"}else i+='<input type="checkbox" name="'+n.getName()+'" value="'+e+'" id="'+n.id+"-"+r+'" />',i+='<label for="'+n.id+"-"+r+'">'+e+"</label>";a&&(i+="</li>"),t.push(i)}),t.join("")}}),a.editors.Object=a.editors.Base.extend({hasNestedForm:!0,initialize:function(e){if(this.value={},a.editors.Base.prototype.initialize.call(this,e),!this.form)throw new Error('Missing required option "form"');if(!this.schema.subSchema)throw new Error("Missing required 'schema.subSchema' option for Object editor")},render:function(){var e=this.form.constructor;return this.nestedForm=new e({schema:this.schema.subSchema,data:this.value,idPrefix:this.id+"_",Field:e.NestedField}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){return this.nestedForm?this.nestedForm.getValue():this.value},setValue:function(e){this.value=e,this.render()},focus:function(){this.hasFocus||this.nestedForm.focus()},blur:function(){this.hasFocus&&this.nestedForm.blur()},remove:function(){this.nestedForm.remove(),t.View.prototype.remove.call(this)},validate:function(){return this.nestedForm.validate()},_observeFormEvents:function(){this.nestedForm&&this.nestedForm.on("all",function(){var e=o.toArray(arguments);e[1]=this,this.trigger.apply(this,e)},this)}}),a.editors.NestedModel=a.editors.Object.extend({initialize:function(e){if(a.editors.Base.prototype.initialize.call(this,e),!this.form)throw new Error('Missing required option "form"');if(!e.schema.model)throw new Error('Missing required "schema.model" option for NestedModel editor')},render:function(){var e=this.form.constructor,t=this.value||{},n=(this.key,this.schema.model),r=t.constructor===n?t:new n(t);return this.nestedForm=new e({model:r,idPrefix:this.id+"_",fieldTemplate:"nestedField"}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},commit:function(){var e=this.nestedForm.commit();return e?(this.$el.addClass("error"),e):a.editors.Object.prototype.commit.call(this)}}),a.editors.Date=a.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){this.hasFocus||this.trigger("focus",this)},"blur select":function(){if(this.hasFocus){var e=this;setTimeout(function(){e.$("select:focus")[0]||e.trigger("blur",e)},0)}}},initialize:function(e){e=e||{},a.editors.Base.prototype.initialize.call(this,e);var t=a.editors.Date,n=new Date;if(this.options=o.extend({monthNames:t.monthNames,showMonthNames:t.showMonthNames},e),this.schema=o.extend({yearStart:n.getFullYear()-100,yearEnd:n.getFullYear()},e.schema||{}),this.value&&!o.isDate(this.value)&&(this.value=new Date(this.value)),!this.value){var r=new Date;r.setSeconds(0),r.setMilliseconds(0),this.value=r}this.template=e.template||this.constructor.template},render:function(){var e=this.options,t=this.schema,n=o.map(o.range(1,32),function(e){return'<option value="'+e+'">'+e+"</option>"}),r=o.map(o.range(0,12),function(t){return'<option value="'+t+'">'+(e.showMonthNames?e.monthNames[t]:t+1)+"</option>"}),a=t.yearStart<t.yearEnd?o.range(t.yearStart,t.yearEnd+1):o.range(t.yearStart,t.yearEnd-1,-1),s=o.map(a,function(e){return'<option value="'+e+'">'+e+"</option>"}),l=i(i.trim(this.template({dates:n.join(""),months:r.join(""),years:s.join("")})));return this.$date=l.find('[data-type="date"]'),this.$month=l.find('[data-type="month"]'),this.$year=l.find('[data-type="year"]'),this.$hidden=i('<input type="hidden" name="'+this.key+'" />'),l.append(this.$hidden),this.setValue(this.value),this.setElement(l),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var e=this.$year.val(),t=this.$month.val(),n=this.$date.val();return e&&t&&n?new Date(e,t,n):null},setValue:function(e){this.$date.val(e.getDate()),this.$month.val(e.getMonth()),this.$year.val(e.getFullYear()),this.updateHidden()},focus:function(){this.hasFocus||this.$("select").first().focus()},blur:function(){this.hasFocus&&this.$("select:focus").blur()},updateHidden:function(){var e=this.getValue();o.isDate(e)&&(e=e.toISOString()),this.$hidden.val(e)}},{template:o.template('    <div>      <select data-type="date"><%= dates %></select>      <select data-type="month"><%= months %></select>      <select data-type="year"><%= years %></select>    </div>  ',null,a.templateSettings),showMonthNames:!0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]}),a.editors.DateTime=a.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){this.hasFocus||this.trigger("focus",this)},"blur select":function(){if(this.hasFocus){var e=this;setTimeout(function(){e.$("select:focus")[0]||e.trigger("blur",e)},0)}}},initialize:function(e){e=e||{},a.editors.Base.prototype.initialize.call(this,e),this.options=o.extend({DateEditor:a.editors.DateTime.DateEditor},e),this.schema=o.extend({minsInterval:15},e.schema||{}),this.dateEditor=new this.options.DateEditor(e),this.value=this.dateEditor.value,this.template=e.template||this.constructor.template},render:function(){function pad(e){return e<10?"0"+e:e}var e=this.schema,t=o.map(o.range(0,24),function(e){return'<option value="'+e+'">'+pad(e)+"</option>"}),n=o.map(o.range(0,60,e.minsInterval),function(e){return'<option value="'+e+'">'+pad(e)+"</option>"}),r=i(i.trim(this.template({hours:t.join(),mins:n.join()})));return r.find("[data-date]").append(this.dateEditor.render().el),this.$hour=r.find('select[data-type="hour"]'),this.$min=r.find('select[data-type="min"]'),this.$hidden=r.find('input[type="hidden"]'),this.setValue(this.value),this.setElement(r),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var e=this.dateEditor.getValue(),t=this.$hour.val(),n=this.$min.val();return e&&t&&n?(e.setHours(t),e.setMinutes(n),e):null},setValue:function(e){o.isDate(e)||(e=new Date(e)),this.dateEditor.setValue(e),this.$hour.val(e.getHours()),this.$min.val(e.getMinutes()),this.updateHidden()},focus:function(){this.hasFocus||this.$("select").first().focus()},blur:function(){this.hasFocus&&this.$("select:focus").blur()},updateHidden:function(){var e=this.getValue();o.isDate(e)&&(e=e.toISOString()),this.$hidden.val(e)},remove:function(){this.dateEditor.remove(),a.editors.Base.prototype.remove.call(this)}},{template:o.template('    <div class="bbf-datetime">      <div class="bbf-date-container" data-date></div>      <select data-type="hour"><%= hours %></select>      :      <select data-type="min"><%= mins %></select>    </div>  ',null,a.templateSettings),DateEditor:a.editors.Date}),a.VERSION="0.13.0",t.Form=a,a}(window||e||this)}).call(this,n(48))},,,,,,,,,,,,,,,,,,,,function(e,t,n){n(196),n(195),n(24);var r=n(111),i=n(21),o=n(12),a=n(0),s=n(193),l=n(435),u=function VizJSON(e){a.each(o(e),function(t){this[t]=e[t]},this),this.overlays=this.overlays||[],this.layers=this.layers||[],this._addAttributionOverlay()};u.prototype.isNamedMap=function(){return!!this.datasource.template_name},u.prototype.hasZoomOverlay=function(){return this.hasOverlay(l.OVERLAY_TYPES.ZOOM)},u.prototype.hasOverlay=function(e){return a.isObject(this.getOverlayByType(e))},u.prototype.getOverlayByType=function(e){return i(a).call(a,this.overlays,function(t){return t.type===e})},u.prototype.addHeaderOverlay=function(e,t,n){this.hasOverlay(l.OVERLAY_TYPES.HEADER)||this.overlays.unshift({type:l.OVERLAY_TYPES.HEADER,order:1,shareable:n,url:this.url,options:{extra:{title:this.title,description:this.description,show_title:e,show_description:t}}})},u.prototype.addSearchOverlay=function(){this.hasOverlay(l.OVERLAY_TYPES.SEARCH)||this.overlays.push({type:l.OVERLAY_TYPES.SEARCH,order:3})},u.prototype.removeOverlay=function(e){for(var t=0;t<this.overlays.length;++t){var n;if(this.overlays[t].type===e)return void r(n=this.overlays).call(n,t,1)}},u.prototype.removeLoaderOverlay=function(){this.removeOverlay(l.OVERLAY_TYPES.LOADER)},u.prototype.removeZoomOverlay=function(){this.removeOverlay(l.OVERLAY_TYPES.ZOOM)},u.prototype.removeSearchOverlay=function(){this.removeOverlay(l.OVERLAY_TYPES.SEARCH)},u.prototype.removeLogoOverlay=function(e){this.removeOverlay(l.OVERLAY_TYPES.LOGO)},u.prototype._addAttributionOverlay=function(){this.overlays.push({type:l.OVERLAY_TYPES.ATTRIBUTION})},u.prototype.enforceGMapsBaseLayer=function(e,t){var n=a.contains(l.GMAPS_BASE_LAYER_TYPES,e);this.map_provider===l.MAP_PROVIDER_TYPES.LEAFLET&&n?this.layers?(this.layers[0].options.type="GMapsBase",this.layers[0].options.baseType=e,this.layers[0].options.name=e,t&&(this.layers[0].options.style="string"==typeof t?JSON.parse(t):t),this.map_provider=l.MAP_PROVIDER_TYPES.GMAPS,this.layers[0].options.attribution=""):s.error("No base map loaded. Using Leaflet."):s.error('GMaps baseType "'+e+" is not supported. Using leaflet.")},u.prototype.setZoom=function(e){this.zoom=e,this.bounds=null},u.prototype.setCenter=function(e){this.center=e,this.bounds=null},u.prototype.setBounds=function(e){this.bounds=e},u.prototype.setVector=function(e){this.vector=e},e.exports=u},function(e,t,n){n(23),n(16),n(68),n(35);var r=n(11),i=n(37),o={queue:[],current:void 0,_script:null,head:null,loadScript:function loadScript(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.async=!0,o.head||(o.head=document.getElementsByTagName("head")[0]),i(function(){o.head.appendChild(t)},0),t},get:function get(e,t){o._script?o.queue.push([e,t]):(o.current=t,o._script=o.loadScript(e+(~r(e).call(e,"?")?"&":"?")+"callback=vizjson"))},getPath:function getPath(e){for(var t=document.getElementsByTagName("script"),n=/\/?cartodb[\-\._]?([\w\-\._]*)\.js\??/,r=0;r<t.length;r++){var i=t[r].src;if(i.match(n)){var o=i.split("/");return delete o[o.length-1],o.join("/")+e}}return null}};window.vizjson=function(e){o.current&&o.current(e),o.head.removeChild(o._script),o._script=null;var t=o.queue.shift();t&&o.get(t[0],t[1])},e.exports=o},function(e,t){e.exports=function whenAllDataviewsFetched(e,t){var n=function check(){(function areAllDataviewsFetched(e){return e.length>0&&e.all(function(e){return e.isUnavailable()||e.isFetched()})})(e)&&t()};e.on("change:status",n),n()}},function(e,t,n){var r=n(3).Model.extend({defaults:{showLegends:!0,showLayerSelector:!1}});e.exports=r},function(e,t,n){!function(e){e.functions={rgb:function(e,t,n){return this.rgba(e,t,n,1)},rgba:function(t,n,r,i){var o=[t,n,r].map(function(e){return number(e)});return i=number(i),o.some(isNaN)||isNaN(i)?null:new e.Color(o,i)},stop:function(e){var t,n;return arguments.length>1&&(t=arguments[1]),arguments.length>2&&(n=arguments[2]),{is:"tag",val:e,color:t,mode:n,toString:function(r){return'\n\t<stop value="'+e.ev(r)+'"'+(t?' color="'+t.ev(r)+'" ':"")+(n?' mode="'+n.ev(r)+'" ':"")+"/>"}}},hsl:function(e,t,n){return this.hsla(e,t,n,1)},hsla:function(e,t,n,r){if([e=number(e)%360/360,t=number(t),n=number(n),r=number(r)].some(isNaN))return null;var i=n<=.5?n*(t+1):n+t-n*t,o=2*n-i;return this.rgba(255*hue(e+1/3),255*hue(e),255*hue(e-1/3),r);function hue(e){return 6*(e=e<0?e+1:e>1?e-1:e)<1?o+(i-o)*e*6:2*e<1?i:3*e<2?o+(i-o)*(2/3-e)*6:o}},hue:function(t){return"toHSL"in t?new e.Dimension(Math.round(t.toHSL().h)):null},saturation:function(t){return"toHSL"in t?new e.Dimension(Math.round(100*t.toHSL().s),"%"):null},lightness:function(t){return"toHSL"in t?new e.Dimension(Math.round(100*t.toHSL().l),"%"):null},alpha:function(t){return"toHSL"in t?new e.Dimension(t.toHSL().a):null},saturate:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.s+=t.value/100,n.s=clamp(n.s),hsla(n)},desaturate:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.s-=t.value/100,n.s=clamp(n.s),hsla(n)},lighten:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.l+=t.value/100,n.l=clamp(n.l),hsla(n)},darken:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.l-=t.value/100,n.l=clamp(n.l),hsla(n)},fadein:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.a+=t.value/100,n.a=clamp(n.a),hsla(n)},fadeout:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.a-=t.value/100,n.a=clamp(n.a),hsla(n)},spin:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL(),r=(n.h+t.value)%360;return n.h=r<0?360+r:r,hsla(n)},replace:function(e,t,n){return"field"===e.is?e.toString+".replace("+t.toString()+", "+n.toString()+")":e.replace(t,n)},mix:function(t,n,r){var i=r.value/100,o=2*i-1,a=t.toHSL().a-n.toHSL().a,s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,l=1-s,u=[t.rgb[0]*s+n.rgb[0]*l,t.rgb[1]*s+n.rgb[1]*l,t.rgb[2]*s+n.rgb[2]*l],c=t.alpha*i+n.alpha*(1-i);return new e.Color(u,c)},greyscale:function(t){return this.desaturate(t,new e.Dimension(100))},"%":function(t){for(var n=Array.prototype.slice.call(arguments,1),r=t.value,i=0;i<n.length;i++)r=r.replace(/%s/,n[i].value).replace(/%[da]/,n[i].toString());return r=r.replace(/%%/g,"%"),new e.Quoted(r)}};for(var t=["emboss","blur","gray","sobel","edge-detect","x-gradient","y-gradient","sharpen"],n=0;n<t.length;n++){var r=t[n];e.functions[r]=function(t){return function(){return new e.ImageFilter(t)}}(r)}function hsla(t){return e.functions.hsla(t.h,t.s,t.l,t.a)}function number(t){return t instanceof e.Dimension?parseFloat("%"==t.unit?t.value/100:t.value):"number"==typeof t?t:NaN}function clamp(e){return Math.min(1,Math.max(0,e))}e.functions["agg-stack-blur"]=function(t,n){return new e.ImageFilter("agg-stack-blur",[t,n])},e.functions["scale-hsla"]=function(t,n,r,i,o,a,s,l){return new e.ImageFilter("scale-hsla",[t,n,r,i,o,a,s,l])}}(n(56))},function(e,t,n){var r=n(56);r.FrameOffset=function(e,t,n){if((t=parseInt(t,10))>r.FrameOffset.max||t<=0)throw{message:"Only frame-offset levels between 1 and "+r.FrameOffset.max+" supported.",index:n};if("="!==e)throw{message:"only = operator is supported for frame-offset",index:n};return t},r.FrameOffset.max=32,r.FrameOffset.none=0},function(e,t,n){var r;(r=n(56))._getFontSet=function(e,t){var n=t.join("");if(e._fontMap&&e._fontMap[n])return e._fontMap[n];var i=new r.FontSet(e,t);return e.effects.push(i),e._fontMap||(e._fontMap={}),e._fontMap[n]=i,i},r.FontSet=function FontSet(e,t){this.fonts=t,this.name="fontset-"+e.effects.length},r.FontSet.prototype.toXML=function(e){return'<FontSet name="'+this.name+'">\n'+this.fonts.map(function(e){return'  <Font face-name="'+e+'"/>'}).join("\n")+"\n</FontSet>"}},function(e,t,n){var r;(r=n(56)).Invalid=function Invalid(e,t,n){this.chunk=e,this.index=t,this.type="syntax",this.message=n||"Invalid code: "+this.chunk},r.Invalid.prototype.is="invalid",r.Invalid.prototype.ev=function(e){return e.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}},function(e,t,n){var r=n(56);r.Zoom=function(e,t,n){this.op=e,this.value=t,this.index=n},r.Zoom.prototype.setZoom=function(e){return this.zoom=e,this},r.Zoom.prototype.ev=function(e){var t=0,n=1/0,i=parseInt(this.value.ev(e).toString(),10),o=0;switch((i>r.Zoom.maxZoom||i<0)&&e.error({message:"Only zoom levels between 0 and "+r.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom=1<<i,this;case">":t=i+1;break;case">=":t=i;break;case"<":n=i-1;break;case"<=":n=i}for(var a=0;a<=r.Zoom.maxZoom;a++)a>=t&&a<=n&&(o|=1<<a);return this.zoom=o,this},r.Zoom.prototype.toString=function(){return this.zoom},r.Zoom.all=8388607,r.Zoom.maxZoom=22,r.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100},r.Zoom.prototype.toXML=function(){var e=[];if(this.zoom!=r.Zoom.all){for(var t=null,n=null,i=0;i<=r.Zoom.maxZoom;i++)this.zoom&1<<i&&(null===t&&(t=i),n=i);t>0&&e.push("    <MaxScaleDenominator>"+r.Zoom.ranges[t]+"</MaxScaleDenominator>\n"),n<22&&e.push("    <MinScaleDenominator>"+r.Zoom.ranges[n+1]+"</MinScaleDenominator>\n")}return e},r.Zoom.prototype.toString=function(){for(var e="",t=0;t<=r.Zoom.maxZoom;t++)e+=this.zoom&1<<t?"X":".";return e}},function(e,t,n){var r;(r=n(56)).Variable=function Variable(e,t,n){this.name=e,this.index=t,this.filename=n},r.Variable.prototype={is:"variable",toString:function(){return this.name},ev:function(e){if(this.name,this._css)return this._css;var t=e.frames.filter(function(e){return e.name==this.name}.bind(this));return t.length?t[0].value.ev(e):(e.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}},function(e,t,n){var r;(r=n(56)).Value=function Value(e){this.value=e},r.Value.prototype={is:"value",ev:function(e){return 1===this.value.length?this.value[0].ev(e):new r.Value(this.value.map(function(t){return t.ev(e)}))},toString:function(e,t,n,r){return this.value.map(function(t){return t.toString(e,r)}).join(n||", ")},clone:function(){var e=Object.create(r.Value.prototype);return Array.isArray(e)?e.value=this.value.slice():e.value=this.value,e.is=this.is,e},toJS:function(e){var t=this.ev(e),n=t.toString();return"color"===t.is||"uri"===t.is||"string"===t.is||"keyword"===t.is?n="'"+n.replace(/&amp;/g,"&")+"'":Array.isArray(this.value)&&this.value.length>1?n="["+this.value.join(",")+"]":"field"===t.is?n=n.replace(/\[([^\]]*)\]/g,function(e){return e.replace(/\[(.*)\]/g,"data['$1']")}):"call"===t.is&&(n=JSON.stringify({name:t.name,args:t.args})),"_value = "+n+";"}}},function(e,t,n){var r;(r=n(56)).URL=function URL(e,t){this.value=e,this.paths=t},r.URL.prototype={is:"uri",toString:function(){return this.value.toString()},ev:function(e){return new r.URL(this.value.ev(e),this.paths)}}},function(e,t,n){(function(e){var t,r;t=n(56),r=e._||n(0),t.StyleXML=function(e,t,n,i){for(var o={},a=[],s=[],l=[],u=[],c=[],d=0;d<n.length;d++)for(var f=0;f<n[d].rules.length;f++)"image-filters"===n[d].rules[f].name&&a.push(n[d].rules[f]),"image-filters-inflate"===n[d].rules[f].name&&s.push(n[d].rules[f]),"direct-image-filters"===n[d].rules[f].name&&l.push(n[d].rules[f]),"comp-op"===n[d].rules[f].name&&u.push(n[d].rules[f]),"opacity"===n[d].rules[f].name&&c.push(n[d].rules[f]);var h=n.map(function(e){return e.toXML(i,o)}),p="";a.length&&(p+=' image-filters="'+r.chain(a).uniq(function(e){return e.id}).map(function(e){return e.ev(i).toXML(i,!0,",","image-filter")}).value().join(",")+'"'),s.length&&(p+=' image-filters-inflate="'+s[0].value.ev(i).toString()+'"'),l.length&&(p+=' direct-image-filters="'+r.chain(l).uniq(function(e){return e.id}).map(function(e){return e.ev(i).toXML(i,!0,",","direct-image-filter")}).value().join(",")+'"'),u.length&&"src-over"!=u[0].value.ev(i).value&&(p+=' comp-op="'+u[0].value.ev(i).toString()+'"'),c.length&&1!=c[0].value.ev(i).value&&(p+=' opacity="'+c[0].value.ev(i).toString()+'"');var m=h.join("");return p||m?'<Style name="'+e+'" filter-mode="first"'+p+">\n"+m+"</Style>":""}}).call(this,n(48))},function(e,t,n){var r;(r=n(56)).Selector=function Selector(e,t,n,i,o,a,s){this.elements=i||[],this.attachment=o,this.filters=e||{},this.frame_offset=n,this.zoom=void 0!==t?t:r.Zoom.all,this.conditions=a,this.index=s},r.Selector.prototype.specificity=function(){return this.elements.reduce(function(e,t){var n=t.specificity();return e[0]+=n[0],e[1]+=n[1],e},[0,0,this.conditions,this.index])}},function(e,t,n){var r;(r=n(56)).Ruleset=function Ruleset(e,t){this.selectors=e,this.rules=t,this._lookups={}},r.Ruleset.prototype={is:"ruleset",ev:function(e){var t,n=new r.Ruleset(this.selectors,this.rules.slice(0));for(n.root=this.root,e.frames.unshift(n),t=0,rule;t<n.rules.length;t++)rule=n.rules[t],n.rules[t]=rule.ev?rule.ev(e):rule;return e.frames.shift(),n},match:function(e){return!e||0===e.length},variables:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,t){return t instanceof r.Rule&&!0===t.variable&&(e[t.name]=t),e},{})},variable:function(e){return this.variables()[e]},rulesets:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(e){return e instanceof r.Ruleset})},find:function(e,t){t=t||this;var n=[],i=e.toString();return i in this._lookups?this._lookups[i]:(this.rulesets().forEach(function(i){if(i!==t)for(var o=0;o<i.selectors.length;o++)if(e.match(i.selectors[o])){e.elements.length>1?Array.prototype.push.apply(n,i.find(new r.Selector(null,null,null,e.elements.slice(1)),t)):n.push(i);break}}),this._lookups[i]=n)},evZooms:function(e){for(var t=0;t<this.selectors.length;t++){for(var n=r.Zoom.all,i=0;i<this.selectors[t].zoom.length;i++)n&=this.selectors[t].zoom[i].ev(e).zoom;this.selectors[t].zoom=n}},flatten:function(e,t,n){var i,o,a=[];for(0===this.selectors.length&&(n.frames=n.frames.concat(this.rules)),this.evZooms(n),i=0;i<this.selectors.length;i++){var s=this.selectors[i];if(s.filters)if(t.length)for(o=0;o<t.length;o++){var l=t[o],u=l.filters.cloneWith(s.filters);if(null===u){if(l.zoom===(l.zoom&s.zoom)&&l.frame_offset===s.frame_offset&&l.attachment===s.attachment&&l.elements.join()===s.elements.join()){a.push(l);continue}u=l.filters}else if(!u)continue;var c=Object.create(r.Selector.prototype);c.filters=u,c.zoom=l.zoom&s.zoom,c.frame_offset=s.frame_offset,c.elements=l.elements.concat(s.elements),l.attachment&&s.attachment?c.attachment=l.attachment+"/"+s.attachment:c.attachment=s.attachment||l.attachment,c.conditions=l.conditions+s.conditions,c.index=s.index,a.push(c)}else a.push(s)}var d=[];for(i=0;i<this.rules.length;i++){var f=this.rules[i];f instanceof r.Ruleset?f.flatten(e,a,n):f instanceof r.Rule?d.push(f):f instanceof r.Invalid&&n.error(f)}var h=!!d.length&&d[0].index;for(i=0;i<a.length;i++)!1!==h&&(a[i].index=h),e.push(new r.Definition(a[i],d.slice()));return e}}},function(e,t,n){!function(e){e.Rule=function Rule(t,n,r,i){var o=t.split("/");this.name=o.pop(),this.instance=o.length?o[0]:"__default__",this.value=n instanceof e.Value?n:new e.Value([n]),this.index=r,this.symbolizer=e.Reference.symbolizer(this.name),this.filename=i,this.variable="@"===t.charAt(0)},e.Rule.prototype.is="rule",e.Rule.prototype.clone=function(){var t=Object.create(e.Rule.prototype);return t.name=this.name,t.value=this.value,t.index=this.index,t.instance=this.instance,t.symbolizer=this.symbolizer,t.filename=this.filename,t.variable=this.variable,t},e.Rule.prototype.updateID=function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name},e.Rule.prototype.toString=function(){return"["+e.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value},e.Rule.prototype.toXML=function(t,n,r,i){if(!e.Reference.validSelector(this.name)){var o=function getMean(t){return Object.keys(e.Reference.selector_cache).map(function(n){return[n,e.Reference.editDistance(t,n)]}).sort(function(e,t){return e[1]-t[1]})}(this.name),a="";return o[0][1]<3&&(a=". Did you mean "+o[0][0]+"?"),t.error({message:"Unrecognized rule: "+this.name+a,index:this.index,type:"syntax",filename:this.filename})}var s;return this.value instanceof e.Value&&!e.Reference.validValue(t,this.name,this.value)?e.Reference.selector(this.name)?(s=e.Reference.selector(this.name).validate?e.Reference.selector(this.name).validate:"object"==typeof e.Reference.selector(this.name).type?"keyword (options: "+e.Reference.selector(this.name).type.join(", ")+")":e.Reference.selector(this.name).type,t.error({message:"Invalid value for "+this.name+", the type "+s+" is expected. "+this.value+" (of type "+this.value.value[0].is+")  was given.",index:this.index,type:"syntax",filename:this.filename})):t.error({message:"Unrecognized property: "+this.name,index:this.index,type:"syntax",filename:this.filename}):this.variable?"":e.Reference.isFont(this.name)&&this.value.value.length>1?'fontset-name="'+e._getFontSet(t,this.value.value).name+'"':n?this.value.toString(t,this.name,r):e.Reference.selectorName(this.name)+'="'+this.value.toString(t,this.name)+'"'},e.Rule.prototype.ev=function(t){return new e.Rule(this.name,this.value.ev(t),this.index,this.filename)}}(n(56))},function(e,t,n){(function(e){!function(t){var r=e._||n(0),i={};i.setData=function(e){i.data=e,i.selector_cache=function generateSelectorCache(e){var t={};for(var n in e.symbolizers)for(var r in e.symbolizers[n])e.symbolizers[n][r].hasOwnProperty("css")&&(t[e.symbolizers[n][r].css]=[e.symbolizers[n][r],n,r]);return t}(e),i.mapnikFunctions=function generateMapnikFunctions(e){var t={};for(var n in e.symbolizers)for(var r in e.symbolizers[n])if("functions"===e.symbolizers[n][r].type)for(var i=0;i<e.symbolizers[n][r].functions.length;i++){var o=e.symbolizers[n][r].functions[i];t[o[0]]=o[1]}return t}(e),i.mapnikFunctions.matrix=[6],i.mapnikFunctions.translate=[1,2],i.mapnikFunctions.scale=[1,2],i.mapnikFunctions.rotate=[1,3],i.mapnikFunctions.skewX=[1],i.mapnikFunctions.skewY=[1],i.required_cache=function generateRequiredProperties(e){var t={};for(var n in e.symbolizers)for(var r in t[n]=[],e.symbolizers[n])e.symbolizers[n][r].required&&t[n].push(e.symbolizers[n][r].css);return t}(e)},i.setVersion=function(e){var t=n(1356);return!!t.version.hasOwnProperty(e)&&(i.setData(t.version[e]),!0)},i.selectorData=function(e,t){if(i.selector_cache[e])return i.selector_cache[e][t]},i.validSelector=function(e){return!!i.selector_cache[e]},i.selectorName=function(e){return i.selectorData(e,2)},i.selector=function(e){return i.selectorData(e,0)},i.symbolizer=function(e){return i.selectorData(e,1)},i.requiredProperties=function(e,t){var n=i.required_cache[e];for(var r in n)if(!(n[r]in t))return"Property "+n[r]+" required for defining "+e+" styles."},i._validateValue={font:function(e,t){return!e.validation_data||!e.validation_data.fonts||-1!=e.validation_data.fonts.indexOf(t)}},i.isFont=function(e){return"font"==i.selector(e).validate},i.editDistance=function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;for(var n=[],r=0;r<=t.length;r++)n[r]=[r];for(var i=0;i<=e.length;i++)n[0][i]=i;for(r=1;r<=t.length;r++)for(i=1;i<=e.length;i++)t.charAt(r-1)==e.charAt(i-1)?n[r][i]=n[r-1][i-1]:n[r][i]=Math.min(n[r-1][i-1]+1,Math.min(n[r][i-1]+1,n[r-1][i]+1));return n[t.length][e.length]},i.validValue=function(e,t,n){var o;if(i.selector(t)){if("keyword"==n.value[0].is)return function validateKeyword(e,t){return"object"==typeof i.selector(t).type?-1!==i.selector(t).type.indexOf(e.value[0].value):"string"===i.selector(t).type}(n,t);if("undefined"==n.value[0].is)return!0;if("numbers"==i.selector(t).type){for(o in n.value)if("float"!==n.value[o].is)return!1;return!0}if("tags"==i.selector(t).type){if(!n.value)return!1;if(!n.value[0].value)return"tag"===n.value[0].is;for(o=0;o<n.value[0].value.length;o++)if("tag"!==n.value[0].value[o].is)return!1;return!0}if("functions"==i.selector(t).type)return function validateFunctions(e,t){if("string"===e.value[0].is)return!0;for(var n in e.value)for(var o in e.value[n].value){if("call"!==e.value[n].value[o].is)return!1;var a=r.find(i.selector(t).functions,function(t){return t[0]==e.value[n].value[o].name});if(!(a&&-1==a[1]||a&&a[1]===e.value[n].value[o].args.length))return!1}return!0}(n,t);if("unsigned"===i.selector(t).type)return"float"===n.value[0].is&&(n.value[0].round(),!0);if(i.selector(t).expression)return!0;if(i.selector(t).validate){for(o=0;o<n.value.length;o++)if(i.selector(t).type==n.value[o].is&&i._validateValue[i.selector(t).validate](e,n.value[o].value))return!0;return!1}return i.selector(t).type==n.value[0].is}return!1},t.Reference=i}(n(56))}).call(this,n(48))},function(e,t,n){var r;(r=n(56)).ImageFilter=function ImageFilter(e,t){this.filter=e,this.args=t||null},r.ImageFilter.prototype={is:"imagefilter",ev:function(){return this},toString:function(){return this.args?this.filter+"("+this.args.join(",")+")":this.filter}}},function(e,t,n){var r;(r=n(56)).Quoted=function Quoted(e){this.value=e||""},r.Quoted.prototype={is:"string",toString:function(e){var t=this.value.replace(/&/g,"&amp;"),n=t.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===e?"'"+n+"'":t},ev:function(){return this},operate:function(e,t,n){return new r.Quoted(r.operate(t,this.toString(),n.toString(this.contains_field)))}}},function(e,t,n){var r;(r=n(56)).Operation=function Operation(e,t,n){this.op=e.trim(),this.operands=t,this.index=n},r.Operation.prototype.is="operation",r.Operation.prototype.ev=function(e){var t,n=this.operands[0].ev(e),i=this.operands[1].ev(e);return"undefined"===n.is||"undefined"===i.is?{is:"undefined",value:"undefined"}:(n instanceof r.Dimension&&i instanceof r.Color&&("*"===this.op||"+"===this.op?(t=i,i=n,n=t):e.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),n instanceof r.Quoted&&i instanceof r.Quoted&&"+"!==this.op?(e.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n instanceof r.Field||i instanceof r.Field||n instanceof r.Literal||i instanceof r.Literal?"color"===n.is||"color"===i.is?(e.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new r.Literal(n.ev(e).toString(!0)+this.op+i.ev(e).toString(!0)):void 0===n.operate?(e.error({message:"Cannot do math with type "+n.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n.operate(e,this.op,i))},r.operate=function(e,t,n){switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"%":return t%n;case"/":return t/n}}},function(e,t,n){var r;(r=n(56)).Literal=function Field(e){this.value=e||"",this.is="field"},r.Literal.prototype={toString:function(){return this.value},ev:function(){return this}}},function(e,t,n){var r;(r=n(56)).LayerXML=function(e,t){var n=[];for(var i in e.Datasource)n.push('<Parameter name="'+i+'"><![CDATA['+e.Datasource[i]+"]]></Parameter>");var o="";for(var a in e.properties)o+="minzoom"===a?'  maxzoom="'+r.Zoom.ranges[e.properties[a]]+'"\n':"maxzoom"===a?'  minzoom="'+r.Zoom.ranges[e.properties[a]+1]+'"\n':"  "+a+'="'+e.properties[a]+'"\n';return'<Layer name="'+e.name+'"\n'+o+(void 0===e.status?"":'  status="'+e.status+'"\n')+(void 0===e.srs?"":'  srs="'+e.srs+'"')+">\n    "+t.reverse().map(function(e){return"<StyleName>"+e+"</StyleName>"}).join("\n    ")+(n.length?"\n    <Datasource>\n       "+n.join("\n       ")+"\n    </Datasource>\n":"")+"  </Layer>\n"}},function(e,t,n){var r;(r=n(56)).Keyword=function Keyword(e){this.value=e;var t={transparent:"color",true:"boolean",false:"boolean"};this.is=t[e]?t[e]:"keyword"},r.Keyword.prototype={ev:function(){return this},toString:function(){return this.value}}},function(e,t,n){var r;(r=n(56)).Field=function Field(e){this.value=e||""},r.Field.prototype={is:"field",toString:function(){return"["+this.value+"]"},ev:function(){return this}}},function(e,t,n){!function(e){e.Filter=function Filter(e,t,n,r,i){this.key=e,this.op=t,this.val=n,this.index=r,this.filename=i,this.id=this.key+this.op+this.val};var t={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]};e.Filter.prototype.ev=function(e){return this.key=this.key.ev(e),this.val=this.val.ev(e),this},e.Filter.prototype.toXML=function(n){e.Reference.data.filter&&("keyword"===this.key.is&&-1===e.Reference.data.filter.value.indexOf(this.key.toString())&&n.error({message:this.key.toString()+" is not a valid keyword in a filter expression",index:this.index,filename:this.filename}),"keyword"===this.val.is&&-1===e.Reference.data.filter.value.indexOf(this.val.toString())&&n.error({message:this.val.toString()+" is not a valid keyword in a filter expression",index:this.index,filename:this.filename}));var r=this.key.toString(!1),i=this.val.toString("string"==this.val.is);return("numeric"==t[this.op][1]&&isNaN(i)&&"field"!==this.val.is||"string"==t[this.op][1]&&"'"!=i[0])&&n.error({message:'Cannot use operator "'+this.op+'" with value '+this.val,index:this.index,filename:this.filename}),r+t[this.op][0]+i+(t[this.op][2]||"")},e.Filter.prototype.toString=function(){return"["+this.id+"]"}}(n(56))},function(e,t,n){(function(e){var t=n(56),r=e._||n(0);t.Filterset=function Filterset(){this.filters={}},t.Filterset.prototype.toXML=function(e){var t=[];for(var n in this.filters)t.push("("+this.filters[n].toXML(e).trim()+")");return t.length?"    <Filter>"+t.join(" and ")+"</Filter>\n":""},t.Filterset.prototype.toString=function(){var e=[];for(var t in this.filters)e.push(this.filters[t].id);return e.sort().join("\t")},t.Filterset.prototype.ev=function(e){for(var t in this.filters)this.filters[t].ev(e);return this},t.Filterset.prototype.clone=function(){var e=new t.Filterset;for(var n in this.filters)e.filters[n]=this.filters[n];return e},t.Filterset.prototype.cloneWith=function(e){var n=[];for(var r in e.filters){var i=this.addable(e.filters[r]);if(!1===i)return!1;!0===i&&n.push(e.filters[r])}if(!n.length)return null;var o=new t.Filterset;for(r in this.filters)o.filters[r]=this.filters[r];for(;r=n.shift();)o.add(r);return o},t.Filterset.prototype.toJS=function(e){var t={"=":"==="};return r.map(this.filters,function(e){var n=e.op;n in t&&(n=t[n]);var r=e.val;void 0!==e._val&&(r=e._val.toString(!0));return"=~"===n?"(data['"+e.key.value+"'] + '').match("+("string"===r.is?"'"+r.toString().replace(/'/g,"\\'").replace(/&amp;/g,"&")+"'":r)+")":"data['"+e.key.value+"'] "+n+" "+("string"===r.is?"'"+r.toString().replace(/'/g,"\\'").replace(/&amp;/g,"&")+"'":r)}).join(" && ")},t.Filterset.prototype.addable=function(e){var t=e.key.toString(),n=e.val.toString();switch(n.match(/^[0-9]+(\.[0-9]*)?$/)&&(n=parseFloat(n)),e.op){case"=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val.toString()==n&&null:void 0===this.filters[t+"!="+n]&&(!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n))));case"=~":return!0;case"!=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val!=n&&null:void 0!==this.filters[t+"!="+n]?null:void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)||null;case">":return t+"="in this.filters?!(this.filters[t+"="].val<=n)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=n)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)||null));case">=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val<n)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=n)||null));case"<":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>=n)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=n)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)||null));case"<=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>n)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=n)||null))}},t.Filterset.prototype.conflict=function(e){var t=e.key.toString(),n=e.val.toString();return isNaN(parseFloat(n))||(n=parseFloat(n)),("="===e.op&&void 0!==this.filters[t+"="]&&n!=this.filters[t+"="].val.toString()||"!="===e.op&&void 0!==this.filters[t+"="]&&n==this.filters[t+"="].val.toString()||"="===e.op&&void 0!==this.filters[t+"!="]&&n==this.filters[t+"!="].val.toString())&&e.toString()+" added to "+this.toString()+" produces an invalid filter"},t.Filterset.prototype.add=function(e,t){var n,r=e.key.toString(),i=e.op,o=this.conflict(e);if(o)return o;if("="===i){for(var a in this.filters)this.filters[a].key==r&&delete this.filters[a];this.filters[r+"="]=e}else if("!="===i)this.filters[r+"!="+e.val]=e;else if("=~"===i)this.filters[r+"=~"+e.val]=e;else if(">"===i){for(var s in this.filters)this.filters[s].key==r&&this.filters[s].val<=e.val&&delete this.filters[s];this.filters[r+">"]=e}else if(">="===i){for(var l in this.filters)n=+this.filters[l].val.toString(),this.filters[l].key==r&&n<e.val&&delete this.filters[l];void 0!==this.filters[r+"!="+e.val]?(delete this.filters[r+"!="+e.val],e.op=">",this.filters[r+">"]=e):this.filters[r+">="]=e}else if("<"===i){for(var u in this.filters)n=+this.filters[u].val.toString(),this.filters[u].key==r&&n>=e.val&&delete this.filters[u];this.filters[r+"<"]=e}else if("<="===i){for(var c in this.filters)n=+this.filters[c].val.toString(),this.filters[c].key==r&&n>e.val&&delete this.filters[c];void 0!==this.filters[r+"!="+e.val]?(delete this.filters[r+"!="+e.val],e.op="<",this.filters[r+"<"]=e):this.filters[r+"<="]=e}}}).call(this,n(48))},function(e,t,n){var r;(r=n(56)).Expression=function Expression(e){this.value=e},r.Expression.prototype={is:"expression",ev:function(e){return this.value.length>1?new r.Expression(this.value.map(function(t){return t.ev(e)})):this.value[0].ev(e)},toString:function(e){return this.value.map(function(t){return t.toString(e)}).join(" ")}}},function(e,t,n){var r;(r=n(56)).Element=function Element(e){this.value=e.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")},r.Element.prototype.specificity=function(){return["id"===this.type?1:0,"class"===this.type?1:0]},r.Element.prototype.toString=function(){return this.value}},function(e,t,n){(function(e){var t,r;t=n(56),r=e._||n(0),t.Dimension=function Dimension(e,t,n){this.value=parseFloat(e),this.unit=t||null,this.index=n},t.Dimension.prototype={is:"float",physical_units:["m","cm","in","mm","pt","pc"],screen_units:["px","%"],all_units:["m","cm","in","mm","pt","pc","px","%"],densities:{m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},ev:function(e){if(this.unit&&!r.contains(this.all_units,this.unit))return e.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&r.contains(this.physical_units,this.unit)){if(!e.ppi)return e.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*e.ppi,this.unit="px"}return this},round:function(){return this.value=Math.round(this.value),this},toColor:function(){return new t.Color([this.value,this.value,this.value])},round:function(){return this.value=Math.round(this.value),this},toString:function(){return this.value.toString()},operate:function(e,n,r){return"%"===this.unit&&"%"!==r.unit?(e.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===r.unit?"*"===n||"/"===n||"%"===n?(e.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new t.Dimension(t.operate(n,this.value,this.value*r.value*.01),this.unit):new t.Dimension(t.operate(n,this.value,r.value),this.unit||r.unit)}}}).call(this,n(48))},function(e,t,n){(function(e){!function(t){var r=n(1357),i=e._||n(0);function symbolizerName(e){return e.charAt(0).toUpperCase()+e.slice(1).replace(/\-./,function capitalize(e){return e[1].toUpperCase()})+"Symbolizer"}t.Definition=function Definition(e,n){this.elements=e.elements,r.ok(e.filters instanceof t.Filterset),this.rules=n,this.ruleIndex={};for(var i=0;i<this.rules.length;i++)"zoom"in this.rules[i]&&(this.rules[i]=this.rules[i].clone()),this.rules[i].zoom=e.zoom,this.ruleIndex[this.rules[i].updateID()]=!0;this.filters=e.filters,this.zoom=e.zoom,this.frame_offset=e.frame_offset,this.attachment=e.attachment||"__default__",this.specificity=e.specificity()},t.Definition.prototype.toString=function(){for(var e=this.filters.toString(),t=0;t<this.rules.length;t++)e+="\n    "+this.rules[t];return e},t.Definition.prototype.clone=function(e){e&&r.ok(e instanceof t.Filterset);var n=Object.create(t.Definition.prototype);return n.rules=this.rules.slice(),n.ruleIndex=i.clone(this.ruleIndex),n.filters=e||this.filters.clone(),n.attachment=this.attachment,n},t.Definition.prototype.addRules=function(e){for(var t=0,n=0;n<e.length;n++)this.ruleIndex[e[n].id]||(this.rules.push(e[n]),this.ruleIndex[e[n].id]=!0,t++);return t},t.Definition.prototype.appliesTo=function(e,t){for(var n=0,r=this.elements.length;n<r;n++){var i=this.elements[n];if(!(i.wildcard||"class"===i.type&&t[i.clean]||"id"===i.type&&e===i.clean))return!1}return!0},t.Definition.prototype.symbolizersToXML=function(e,n,r){var i=r.toXML(e).join("")+this.filters.toXML(e),o=[],a=[];for(var s in n){for(var l in a=[],n[s])a.push(n[s][l].index);var u=Math.min.apply(Math,a);o.push([s,u])}o=function symbolizerList(e){return e.sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}(o);for(var c=0,d=0;d<o.length;d++){var f=n[o[d]],h=o[d].split("/").pop();if("*"!==h){c++;var p=t.Reference.requiredProperties(h,f);if(p){var m=f[Object.keys(f).shift()];e.error({message:p,index:m.index,filename:m.filename})}var g,v=symbolizerName(h),y=!0;for(var _ in i+="    <"+v+" ",f){"map"===h&&e.error({message:"Map properties are not permitted in other rules",index:f[_].index,filename:f[_].filename});var b=t.Reference.selector(f[_].name);b&&b.serialization&&"content"===b.serialization?(y=!1,g=f[_].ev(e).toXML(e,!0)):b&&b.serialization&&"tag"===b.serialization?(y=!1,g=f[_].ev(e).toXML(e,!0)):i+=f[_].ev(e).toXML(e)+" "}y?i+="/>\n":void 0!==g&&(-1!=g.indexOf("<")?i+=">"+g+"</"+v+">\n":i+="><![CDATA["+g+"]]></"+v+">\n")}}return c&&i?"  <Rule>\n"+i+"  </Rule>\n":""},t.Definition.prototype.collectSymbolizers=function(e,t){for(var n,r={},i=t;i<this.rules.length;i++){var o=(n=this.rules[i]).instance+"/"+n.symbolizer;!(e.current&n.zoom)||o in r&&n.name in r[o]||(e.current&=n.zoom,o in r||(r[o]={}),r[o][n.name]=n)}if(Object.keys(r).length)return e.rule&=e.available&=~e.current,r},t.Definition.prototype.toXML=function(e,n){var r=this.filters.toString();r in n||(n[r]=t.Zoom.all);for(var i,o=t.Zoom.all,a="",s={available:t.Zoom.all},l=0;l<this.rules.length&&o;l++)if(s.rule=this.rules[l].zoom,n[r]&s.rule)for(;s.current=s.rule&o;)if(i=this.collectSymbolizers(s,l)){if(!(n[r]&s.current))continue;a+=this.symbolizersToXML(e,i,(new t.Zoom).setZoom(n[r]&s.current)),n[r]&=~s.current}return a},t.Definition.prototype.toJS=function(e){var n={},r=this.frame_offset,o=["("+this.zoom+" & (1 << ctx.zoom))"],a=this.filters.toJS(e),s=this.zoom!==t.Zoom.all;return a&&o.push(a),r&&o.push('ctx["frame-offset"] === '+r),i.each(this.rules,function(r){var i={};if(!r instanceof t.Rule)throw new Error("Ruleset not supported");i.index=r.index,i.symbolizer=r.symbolizer,i.js="if("+o.join(" && ")+"){"+r.value.toJS(e)+"}",i.constant="field"!==r.value.ev(e).is,i.filtered=s||""!==a,n[r.name]=n[r.name]||[],n[r.name].push(i)}),n}}(n(56))}).call(this,n(48))},function(e,t,n){var r;(r=n(56)).Comment=function Comment(e,t){this.value=e,this.silent=!!t},r.Comment.prototype={toString:function(e){return"\x3c!--"+this.value+"--\x3e"},ev:function(){return this}}},function(e,t,n){var r;(r=n(56)).Color=function Color(e,t){Array.isArray(e)?this.rgb=e.slice(0,3):6==e.length?this.rgb=e.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=e.split("").map(function(e){return parseInt(e+e,16)}),"number"==typeof t?this.alpha=t:4===e.length?this.alpha=e[3]:this.alpha=1},r.Color.prototype={is:"color",ev:function(){return this},toString:function(){return this.alpha<1?"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(", ")+")":"#"+this.rgb.map(function(e){return 1===(e=((e=Math.round(e))>255?255:e<0?0:e).toString(16)).length?"0"+e:e}).join("")},operate:function(e,t,n){var i=[];n instanceof r.Color||(n=n.toColor());for(var o=0;o<3;o++)i[o]=r.operate(t,this.rgb[o],n.rgb[o]);return new r.Color(i)},toHSL:function(){var e,t,n=this.rgb[0]/255,r=this.rgb[1]/255,i=this.rgb[2]/255,o=this.alpha,a=Math.max(n,r,i),s=Math.min(n,r,i),l=(a+s)/2,u=a-s;if(a===s)e=t=0;else{switch(t=l>.5?u/(2-a-s):u/(a+s),a){case n:e=(r-i)/u+(r<i?6:0);break;case r:e=(i-n)/u+2;break;case i:e=(n-r)/u+4}e/=6}return{h:360*e,s:t,l:l,a:o}}}},function(e,t,n){(function(e){var t,r;t=n(56),r=e._||n(0),t.Call=function Call(e,t,n){this.name=e,this.args=t,this.index=n},t.Call.prototype={is:"call",ev:function(e){for(var n=this.args.map(function(t){return t.ev(e)}),i=0;i<n.length;i++)if("undefined"===n[i].is)return{is:"undefined",value:"undefined"};if(this.name in t.functions){if(t.functions[this.name].length<=n.length){var o=t.functions[this.name].apply(t.functions,n);return null===o?(e.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):o}return e.error({message:"incorrect number of arguments for "+this.name+"(). "+t.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var a=t.Reference.mapnikFunctions[this.name];if(void 0===a){var s=r.pairs(t.Reference.mapnikFunctions),l=this.name,u=s.map(function(e){return[e[0],t.Reference.editDistance(l,e[0]),e[1]]}).sort(function(e,t){return e[1]-t[1]});return e.error({message:"unknown function "+this.name+"(), did you mean "+u[0][0]+"("+u[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return a===n.length||Array.isArray(a)&&r.include(a,n.length)||-1===a?(this.args=n,this):(e.error({message:"function "+this.name+"() takes "+a+" arguments and was given "+n.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})},toString:function(e,t){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}}).call(this,n(48))},function(module,exports,__webpack_require__){(function(global){!function(carto){var tree=__webpack_require__(56),_=global._||__webpack_require__(0);function CartoCSS(e,t){this.options=t||{},this.imageURLs=[],e&&this.setStyle(e)}CartoCSS.Layer=function(e,t){this.options=t,this.shader=e},CartoCSS.Layer.prototype={fullName:function(){return this.shader.attachment},name:function(){return this.fullName().split("::")[0]},frames:function(){return this.shader.frames},attachment:function(){return this.fullName().split("::")[1]},eval:function(e){var t=this.shader[e];if(t&&t.style)return t.style({},{zoom:0,"frame-offset":0})},getStyle:function(e,t){var n={};for(var r in this.shader)"attachment"!==r&&"zoom"!==r&&"frames"!==r&&"symbolizers"!==r&&(n[r]=this.shader[r].style(e,t));return n},getSymbolizers:function(){return this.shader.symbolizers},isVariable:function(){for(var e in this.shader)if("attachment"!==e&&"zoom"!==e&&"frames"!==e&&"symbolizers"!==e&&!this.shader[e].constant)return!0;return!1},getShader:function(){return this.shader},filter:function(e,t,n){for(var r in this.shader){if(this.shader[r](t,n))return!0}return!1},transformGeometry:function(e){return e},transformGeometries:function(e){return e}},CartoCSS.prototype={setStyle:function(e){var t=this.parse(e);if(!t)throw new Error(this.parse_env.errors);this.layers=t.map(function(e){return new CartoCSS.Layer(e)})},getLayers:function(){return this.layers},getDefault:function(){return this.findLayer({attachment:"__default__"})},findLayer:function(e){return _.find(this.layers,function(t){for(var n in e){var r=t[n];if("function"==typeof r&&(r=r.call(t)),e[n]!==r)return!1}return!0})},_createFn:function(e){var t=e.join("\n");return this.options.debug&&console.log(t),Function("data","ctx","var _value = null; "+t+"; return _value; ")},_compile:function(shader){for(var attr in"string"==typeof shader&&(shader=eval("(function() { return "+shader+"; })()")),this.shader_src=shader,shader){var c=mapper[attr];c&&(this.compiled[c]=eval("(function() { return shader[attr]; })();"))}},getImageURLs:function(){return this.imageURLs},parse:function(e){var t={frames:[],errors:[],error:function(e){this.errors.push(e)}};this.parse_env=t;var n=null;try{n=new carto.Parser(t).parse(e)}catch(e){return void t.errors.push(e.message)}if(n){function defKey(e){return e.elements[0]+"::"+e.attachment}var r=n.toList(t);r.reverse();for(var i={},o=0;o<r.length;++o){for(var a=defKey(g=r[o]),s=i[a]=i[a]||{symbolizers:[]},l=0;l<g.rules.length;l++){var u=g.rules[l];if("marker-file"===u.name||"point-file"===u.name){var c=u.value.value[0].value[0].value.value;this.imageURLs.push(c)}}s.frames=[],s.zoom=tree.Zoom.all;var d=g.toJS(t);for(var f in this.options.debug&&console.log("props",d),d){var h=s[f]=s[f]||{constant:!1,symbolizer:null,js:[],index:0};h.js.push(d[f].map(function(e){return e.js}).join("\n")),h.symbolizer=_.first(d[f].map(function(e){return e.symbolizer})),h.index=_.max(d[f].map(function(e){return e.index}).concat(h.index)),h.constant=!_.any(d[f].map(function(e){return!e.constant})),h.filtered=d[f][0].filtered}}var p=[];this.options.debug&&console.log(i);var m={};for(o=0;o<r.length;++o){var g=r[o];if(this.options.strict&&(g.toXML(t,{}),t.errors.message))throw new Error(t.errors.message);var v=defKey(g);s=i[v];if(!m[v]){for(var y in this.options.debug&&console.log("**",v),s)"zoom"!==y&&"frames"!==y&&"symbolizers"!==y&&(this.options.debug&&console.log("*",y),s[y].style=this._createFn(s[y].js),s.symbolizers.push(s[y].symbolizer),s.symbolizers=_.uniq(s.symbolizers));s.attachment=v,p.push(s),m[v]=!0}s.zoom|=g.zoom,s.frames.push(g.frame_offset)}for(o=0;o<p.length;++o)p[o].frames=_.uniq(p[o].frames);return p}return null}},carto.RendererJS=function(e){this.options=e||{},this.options.mapnik_version=this.options.mapnik_version||"latest",this.reference=this.options.reference||__webpack_require__(1330).version.latest,this.options.strict=!!this.options.hasOwnProperty("strict")&&this.options.strict},carto.RendererJS.prototype.render=function render(e,t){return tree.Reference.setData(this.reference),new CartoCSS(e,this.options)},module.exports=carto.RendererJS}(__webpack_require__(595))}).call(this,__webpack_require__(48))},function(e,t,n){(function(t){var r=t._||n(0),i=n(595);function addRules(e,t,n,r){for(var i,o,a,s=t.filters,l=t.rules,u=0;u<e.length;u++)(i=e[u].filters.cloneWith(s))?(a=n[i])?a.addRules(l):(o=e[u].clone(i)).addRules(l)&&(n[i]=o,e.splice(u,0,o),u++):null===i&&(e[u]=e[u].clone(),e[u].addRules(l));return e}function inheritDefinitions(e,t){var n,r,i=+new Date,o={},a={},s=[];e.forEach(function(e){e.filters.ev(t)});for(var l=0;l<e.length;l++){r=e[l].attachment,n=[e[l]],o[r]||(o[r]=[],o[r].attachment=r,a[r]={},s.push(o[r]));for(var u=l+1;u<e.length;u++)e[u].attachment===r&&(n=addRules(n,e[u],a[r]));for(var c=0;c<n.length;c++)a[r][n[c].filters]=n[c],o[r].push(n[c])}return t.benchmark&&console.warn("Inheritance time: "+(new Date-i)+"ms"),s}function sortStylesIndex(e,t){return t.index-e.index}function sortStyles(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.index=1/0;for(var i=0;i<r.length;i++)for(var o=r[i].rules,a=0;a<o.length;a++){var s=o[a];s.index<r.index&&(r.index=s.index)}}var l=e.slice();return l.sort(sortStylesIndex),l}i.Renderer=function Renderer(e,t){this.env=e||{},this.options=t||{},this.options.mapnik_version=this.options.mapnik_version||"3.0.0"},i.Renderer.prototype.renderMSS=function render(e){var t=r.defaults(this.env,{benchmark:!1,validation_data:!1,effects:[]});if(!i.tree.Reference.setVersion(this.options.mapnik_version))throw new Error("Could not set mapnik version to "+this.options.mapnik_version);var n=[],o=[];t.benchmark&&console.time("Parsing MSS");var a=i.Parser(t).parse(e);t.benchmark&&console.timeEnd("Parsing MSS"),t.benchmark&&console.time("Rule generation");var s=a.toList(t);t.benchmark&&console.timeEnd("Rule generation"),t.benchmark&&console.time("Rule inheritance");var l=inheritDefinitions(s,t);t.benchmark&&console.timeEnd("Rule inheritance"),t.benchmark&&console.time("Style sort");var u=sortStyles(l,t);t.benchmark&&console.timeEnd("Style sort"),t.benchmark&&console.time("Total Style generation");for(var c,d,f=0;f<u.length;f++){d="style"+("__default__"!==(c=u[f]).attachment?"-"+c.attachment:""),o.push(d);var h='\tStyle "'+d+'" (#'+f+") toXML";t.benchmark&&console.time(h),n.push(i.tree.StyleXML(d,c.attachment,c,t)),t.benchmark&&console.timeEnd(h)}if(t.benchmark&&console.timeEnd("Total Style generation"),t.errors)throw t.errors;return n.join("\n")},i.Renderer.prototype.render=function render(e){var t=r.defaults(this.env,{benchmark:!1,validation_data:!1,effects:[],ppi:90.714});if(!i.tree.Reference.setVersion(this.options.mapnik_version))throw new Error("Could not set mapnik version to "+this.options.mapnik_version);var n,o,a,s,l=[],u=r.chain(e.Stylesheet).map(function(e){if("string"==typeof e)throw new Error("Stylesheet object is expected not a string: '"+e+"'");t=r.extend(t,{filename:e.id});var n=+new Date,o=i.Parser(t).parse(e.data);return t.benchmark&&console.warn("Parsing time: "+(new Date-n)+"ms"),o.toList(t)}).flatten().value();function appliesTo(e,t){return function(e){return e.appliesTo(o.name,t)}}for(var c=0;c<e.Layer.length;c++){o=e.Layer[c],n=[],a={},t.benchmark&&console.warn("processing layer: "+o.id);for(var d=(o.class||"").split(/\s+/g),f=0;f<d.length;f++)a[d[f]]=!0;s=sortStyles(inheritDefinitions(u.filter(appliesTo(o.name,a)),t),t);for(var h,p,m=0;m<s.length;m++){h=s[m],p=o.name+("__default__"!==h.attachment?"-"+h.attachment:"");var g=i.tree.StyleXML(p,h.attachment,h,t);g&&(l.push(g),n.push(p))}l.push(i.tree.LayerXML(o,n))}l.unshift(t.effects.map(function(e){return e.toXML(t)}).join("\n"));var v=function getMapProperties(e,t,n){var o={},a=i.tree.Reference.data.symbolizers.map;return r(e).each(function(e,t){t in a&&(o[t]=t+'="'+e+'"')}),t.filter(function(e){return"Map"===e.elements.join("")}).forEach(function(e){for(var t=0;t<e.rules.length;t++){var r=e.rules[t].name;r in a||n.error({message:"Rule "+r+" not allowed for Map.",index:e.rules[t].index}),o[r]=e.rules[t].ev(n).toXML(n)}}),o}(e,u,t);if(t.errors)throw t.errors;var y=r.reduce(e,function(e,t,n){if(!t&&0!==t)return e;switch(n){case"srs":case"Layer":case"Stylesheet":break;case"bounds":case"center":case"minzoom":case"maxzoom":case"version":e.push('  <Parameter name="'+n+'">'+t+"</Parameter>");break;case"name":case"description":case"legend":case"attribution":case"template":e.push('  <Parameter name="'+n+'"><![CDATA['+t+"]]></Parameter>");break;case"format":e.push('  <Parameter name="'+n+'">'+t+"</Parameter>");break;case"interactivity":e.push('  <Parameter name="interactivity_layer">'+t.layer+"</Parameter>"),e.push('  <Parameter name="interactivity_fields">'+t.fields+"</Parameter>");break;default:"string"==typeof t?e.push('  <Parameter name="'+n+'"><![CDATA['+t+"]]></Parameter>"):"number"==typeof t?e.push('  <Parameter name="'+n+'">'+t+"</Parameter>"):"boolean"==typeof t&&e.push('  <Parameter name="'+n+'">'+t+"</Parameter>")}return e},[]);y.length&&l.unshift("<Parameters>\n"+y.join("\n")+"\n</Parameters>\n");var _=r.map(v,function(e){return" "+e}).join("");return l.unshift('<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE Map[]>\n<Map'+_+">\n"),l.push("</Map>"),l.join("\n")},e.exports=i,e.exports.addRules=addRules,e.exports.inheritDefinitions=inheritDefinitions,e.exports.sortStyles=sortStyles}).call(this,n(48))},function(e,t,n){(function(e){var r=t,i=n(56),o=e._||n(0);r.Parser=function Parser(e){var t,n,r,a,s,l,u,c,d,f=this;function save(){a=u[r],s=n,c=n}function restore(){u[r]=a,c=n=s}function sync(){n>c&&(u[r]=u[r].slice(n-c),c=n)}function $(e){var i,o,a,s;if(e instanceof Function)return e.call(d.parsers);if("string"==typeof e)i=t.charAt(n)===e?e:null,o=1,sync();else{if(sync(),!(i=e.exec(u[r])))return null;o=i[0].length}if(i){var l=n+=o;for(s=n+u[r].length-o;n<s&&(32===(a=t.charCodeAt(n))||10===a||9===a);)n++;return u[r]=u[r].slice(o+(n-l)),c=n,0===u[r].length&&r<u.length-1&&r++,"string"==typeof i?i:1===i.length?i[0]:i}}function extractErrorLine(e,t){return(e.slice(0,t).match(/\n/g)||"").length+1}function makeError(n){var r,i;o.defaults(n,{index:l,filename:e.filename,message:"Parse error.",line:0,column:-1}),r=n.filename&&f.env.inputs&&f.env.inputs[n.filename]?f.env.inputs[n.filename]:t,n.line=extractErrorLine(r,n.index);for(var a=n.index;a>=0&&"\n"!==r.charAt(a);a--)n.column++;return i=o.template("<%=filename%>:<%=line%>:<%=column%> <%=message%>"),new Error(i(n))}return this.env=e=e||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},d={extractErrorLine:extractErrorLine,parse:function(o){var a,s=null;n=r=c=l=0,u=[],t=o.replace(/\r\n/g,"\n"),e.filename&&(f.env.inputs[e.filename]=t);if(u=function(e){for(var n,r,i,o,a=0,l=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,u=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,c=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,d=0,f=e[0],h=0;h<t.length;)if(l.lastIndex=h,(n=l.exec(t))&&n.index===h&&(h+=n[0].length,f.push(n[0])),i=t.charAt(h),u.lastIndex=c.lastIndex=h,(n=c.exec(t))&&n.index===h)h+=n[0].length,f.push(n[0]);else if(r||"/"!==i||"/"!==(o=t.charAt(h+1))&&"*"!==o||!(n=u.exec(t))||n.index!==h){switch(i){case"{":if(!r){d++,f.push(i);break}case"}":if(!r){d--,f.push(i),e[++a]=f=[];break}case"(":if(!r){r=!0,f.push(i);break}case")":if(r){r=!1,f.push(i);break}default:f.push(i)}h++}else h+=n[0].length,f.push(n[0]);return 0!==d&&(s={index:h-1,type:"Parse",message:d>0?"missing closing `}`":"missing opening `{`"}),e.map(function(e){return e.join("")})}([[]]),s)throw makeError(s);(a=new i.Ruleset([],$(this.parsers.primary))).root=!0,a.toList=function(e){e.error=function(t){e.errors||(e.errors=new Error("")),e.errors.message?e.errors.message+="\n"+makeError(t).message:e.errors.message=makeError(t).message},e.frames=e.frames||[];var t=this.flatten([],[],e);return t.sort(d),t};var d=function(e,t){var n=e.specificity,r=t.specificity;return n[0]!=r[0]?r[0]-n[0]:n[1]!=r[1]?r[1]-n[1]:n[2]!=r[2]?r[2]-n[2]:r[3]-n[3]};return a},parsers:{primary:function(){for(var e,t=[];(e=$(this.rule)||$(this.ruleset)||$(this.comment))||$(/^[\s\n]+/)||(e=$(this.invalid));)e&&t.push(e);return t},invalid:function(){var e=$(/^[^;\n]*[;\n]/);if(e)return new i.Invalid(e,s)},comment:function(){var e;if("/"===t.charAt(n))return"/"===t.charAt(n+1)?new i.Comment($(/^\/\/.*/),!0):(e=$(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new i.Comment(e):void 0},entities:{quoted:function(){if('"'===t.charAt(n)||"'"===t.charAt(n)){var e=$(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return e?new i.Quoted(e[1]||e[2]):void 0}},field:function(){if($("[")){var e=$(/(^[^\]]+)/);if($("]"))return e?new i.Field(e[1]):void 0}},comparison:function(){var e=$(/^=~|=|!=|<=|>=|<|>/);if(e)return e},keyword:function(){var e=$(/^[A-Za-z-]+[A-Za-z-0-9_]*/);if(e)return new i.Keyword(e)},call:function(){var e,t;if(e=/^([\w\-]+|%)\(/.exec(u[r])){if("url"===(e=e[1]))return null;if(n+=e.length,$("("),t=$(this.entities.arguments),$(")"))return e?new i.Call(e,t,n):void 0}},arguments:function(){for(var e,t=[];(e=$(this.expression))&&(t.push(e),$(",")););return t},literal:function(){return $(this.entities.dimension)||$(this.entities.keywordcolor)||$(this.entities.hexcolor)||$(this.entities.quoted)},url:function(){var e;if("u"===t.charAt(n)&&$(/^url\(/))return e=$(this.entities.quoted)||$(this.entities.variable)||$(/^[\-\w%@$\/.&=:;#+?~]+/)||"",$(")")?new i.URL(void 0!==e.value||e instanceof i.Variable?e:new i.Quoted(e)):new i.Invalid(e,s,"Missing closing ) in URL.")},variable:function(){var r,o=n;if("@"===t.charAt(n)&&(r=$(/^@[\w-]+/)))return new i.Variable(r,o,e.filename)},hexcolor:function(){var e;if("#"===t.charAt(n)&&(e=$(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new i.Color(e[1])},keywordcolor:function(){var e=u[r].match(/^[a-z]+/);if(e&&e[0]in i.Reference.data.colors)return new i.Color(i.Reference.data.colors[$(/^[a-z]+/)])},dimension:function(){var e=t.charCodeAt(n);if(!(e>57||e<45||47===e)){var r=$(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return r?new i.Dimension(r[1],r[2],s):void 0}}},variable:function(){var e;if("@"===t.charAt(n)&&(e=$(/^(@[\w-]+)\s*:/)))return e[1]},entity:function(){return $(this.entities.call)||$(this.entities.literal)||$(this.entities.field)||$(this.entities.variable)||$(this.entities.url)||$(this.entities.keyword)},end:function(){return $(";")||function peek(e){return"string"==typeof e?t.charAt(n)===e:!!e.test(u[r])}("}")},element:function(){var e=$(/^(?:[.#][\w\-]+|\*|Map)/);if(e)return new i.Element(e)},attachment:function(){var e=$(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(e)return e[1]},selector:function(){var e,r,o,a,l,u=[],c=new i.Filterset,d=[],f=i.FrameOffset.none;for(segments=0,conditions=0;(o=$(this.element))||(l=$(this.zoom))||(fo=$(this.frame_offset))||(a=$(this.filter))||(e=$(this.attachment));){if(segments++,o)u.push(o);else if(l)d.push(l),conditions++;else if(fo)f=fo,conditions++;else if(a){var h=c.add(a);if(h)throw makeError({message:h,index:n-1});conditions++}else{if(r)throw makeError({message:"Encountered second attachment name.",index:n-1});r=e}var p=t.charAt(n);if("{"===p||"}"===p||";"===p||","===p)break}if(segments)return new i.Selector(c,d,f,u,r,conditions,s)},filter:function(){var t,n,r;if(save(),$("[")&&(t=$(/^[a-zA-Z0-9\-_]+/)||$(this.entities.quoted)||$(this.entities.variable)||$(this.entities.keyword)||$(this.entities.field))&&(t instanceof i.Quoted&&(t=new i.Field(t.toString())),(n=$(this.entities.comparison))&&(r=$(this.entities.quoted)||$(this.entities.variable)||$(this.entities.dimension)||$(this.entities.keyword)||$(this.entities.field)))){if(!$("]"))throw makeError({message:"Missing closing ] of filter.",index:s-1});return t.is||(t=new i.Field(t)),new i.Filter(t,n,r,s,e.filename)}},frame_offset:function(){var e,t;if(save(),$(/^\[\s*frame-offset/g)&&(e=$(this.entities.comparison))&&(t=$(/^\d+/))&&$("]"))return i.FrameOffset(e,t,s)},zoom:function(){var e,t;if(save(),$(/^\[\s*zoom/g)&&(e=$(this.entities.comparison))&&(t=$(this.entities.variable)||$(this.entities.dimension))&&$("]"))return new i.Zoom(e,t,s);restore()},block:function(){var e;if($("{")&&(e=$(this.primary))&&$("}"))return e},ruleset:function(){var e,t,n=[];for(save();e=$(this.selector);){for(n.push(e);$(this.comment););if(!$(","))break;for(;$(this.comment););}if(e)for(;$(this.comment););if(n.length>0&&(t=$(this.block))){if(1===n.length&&n[0].elements.length&&"Map"===n[0].elements[0].value){var r=new i.Ruleset(n,t);return r.isMap=!0,r}return new i.Ruleset(n,t)}restore()},rule:function(){var r,o,a=t.charAt(n);if(save(),"."!==a&&"#"!==a&&(r=$(this.variable)||$(this.property))){if((o=$(this.value))&&$(this.end))return new i.Rule(r,o,s,e.filename);l=n,restore()}},font:function(){for(var e,t=[],n=[];e=$(this.entity);)n.push(e);if(t.push(new i.Expression(n)),$(","))for(;(e=$(this.expression))&&(t.push(e),$(",")););return new i.Value(t)},value:function(){for(var e,t=[];(e=$(this.expression))&&(t.push(e),$(",")););return t.length>1?new i.Value(t.map(function(e){return e.value[0]})):1===t.length?new i.Value(t):void 0},sub:function(){var e,t=[];if($("(")){for(;(e=$(this.expression))&&(t.push(e),$(",")););$(")")}return t.length>1?new i.Value(t.map(function(e){return e.value[0]})):1===t.length?new i.Value(t):void 0},multiplication:function(){var e,t,n,r;if(e=$(this.operand)){for(;(n=$("/")||$("*")||$("%"))&&(t=$(this.operand));)r=new i.Operation(n,[r||e,t],s);return r||e}},addition:function(){var e,r,o,a;if(e=$(this.multiplication)){for(;(o=$(/^[-+]\s+/)||" "!=t.charAt(n-1)&&($("+")||$("-")))&&(r=$(this.multiplication));)a=new i.Operation(o,[a||e,r],s);return a||e}},operand:function(){return $(this.sub)||$(this.entity)},expression:function(){for(var e,t=[];e=$(this.addition)||$(this.entity);)t.push(e);if(t.length>0)return new i.Expression(t)},property:function(){var e=$(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(e)return e[1]}}}}}).call(this,n(48))},function(e,t,n){var r=n(116),i=n(1),o=n(55),a=n(0),s=n(373),l=n(595),u=n(1331),c=n(375),d=n(604),f=["sql","sql_wrap","source","cartocss"],h=["-torque-frame-count","-torque-time-attribute","-torque-aggregation-function","-torque-data-aggregation","-torque-resolution"],p=["marker-width"],m=s.extend({defaults:{type:"torque",visible:!0,isRunning:!1,renderRange:{start:void 0,end:void 0},subdomains:[0,1,2,3],steps:0,step:0,time:void 0},getAnimationDuration:function getAnimationDuration(e){var t=30;return c().process(e).result.root.walkDecls("-torque-animation-duration",function(e){t=o(e.value,10)}),t},initialize:function initialize(e,t){var n;if(!(t=t||{}).engine)throw new Error("engine is required");this._engine=t.engine,e.source&&this.setSource(e.source),this.legends=new u(e.legends,{engine:this._engine}),this.unset("legends"),i(n=this).call(n,"change",this._onAttributeChanged,this),s.prototype.initialize.apply(this,arguments)},_onAttributeChanged:function _onAttributeChanged(){a.any(f,function(e){if(this.hasChanged(e))return"cartocss"!==e||this.previous("cartocss")&&this._torqueCartoCSSPropsChanged()},this)&&this._reload()},_torqueCartoCSSPropsChanged:function _torqueCartoCSSPropsChanged(){var e=this.get("cartocss"),t=this.previous("cartocss"),n=new l.RendererJS;return!a.isEqual(this._getTorqueLayerCartoCSSProperties(n,e),this._getTorqueLayerCartoCSSProperties(n,t))},_getTorqueLayerCartoCSSProperties:function _getTorqueLayerCartoCSSProperties(e,t){var n=e.render(t),r=n.findLayer({name:"Map"}),i=n.findLayer({name:"#layer"}),o={};return a.each(h,function(e){var t=r&&r.eval(e);t&&(o[e]=t)}),a.each(p,function(e){var t=i&&i.eval(e);t&&(o[e]=t)}),o},_reload:function _reload(){this._engine.reload({sourceId:this.get("id")})},play:function play(){this.set("isRunning",!0)},pause:function pause(){this.set("isRunning",!1)},setStep:function setStep(e){this.set("step",e)},renderRange:function renderRange(e,t){this.set("renderRange",{start:e,end:t})},resetRenderRange:function resetRenderRange(){this.set("renderRange",{})},isEqual:function isEqual(e){var t=this;return this.get("type")===e.get("type")&&r(a).call(a,["query","query_wrapper","cartocss"],function(n){return e.get(n)===t.get(n)})},getName:function getName(){return this.get("layer_name")},fetchAttributes:function fetchAttributes(e,t,n){},timeToStep:function timeToStep(e){var t=this.get("steps"),n=this.get("start");return t*(1e3*e-n)/(this.get("end")-n)},getTileURLTemplates:function getTileURLTemplates(){return this.get("tileURLTemplates")},getSourceId:function getSourceId(){var e=this.getSource();return e&&e.id},getSource:function getSource(){return this.get("source")},setSource:function setSource(e,t){this.getSource()&&this.getSource().unmarkAsSourceOf(this),e.markAsSourceOf(this),this.set("source",e,t)},hasSource:function hasSource(e){return this.getSource().equals(e)},update:function update(e){if(e.source)throw new Error('Use ".setSource" to update a layer\'s source instead of the update method');s.prototype.update.apply(this,arguments)},remove:function remove(){this.getSource().unmarkAsSourceOf(this),s.prototype.remove.apply(this,arguments)}},{_checkSourceAttribute:function _checkSourceAttribute(e){if(!(e instanceof d))throw new Error("Source must be an instance of AnalysisModel")}});e.exports=m},function(e,t,n){var r=n(0),i=n(863),o=i.extend({defaults:function defaults(){return r.extend(i.prototype.defaults.apply(this),{type:"torque",items:[],html:""})}});e.exports=o},function(e,t,n){var r=n(0),i=n(863),o=i.extend({defaults:function defaults(){return r.extend(i.prototype.defaults.apply(this),{type:"custom_choropleth",prefix:"",suffix:"",leftLabel:"",rightLabel:"",colors:[]})}});e.exports=o},function(e,t,n){var r=n(0),i=n(863),o=i.extend({defaults:function defaults(){return r.extend(i.prototype.defaults.apply(this),{type:"custom",items:[],html:""})}});e.exports=o},function(e,t,n){var r=n(0),i=n(596),o=i.extend({defaults:function defaults(){return r.extend(i.prototype.defaults.apply(this),{type:"choropleth",prefix:"",suffix:"",leftLabel:"",rightLabel:"",colors:[]})},getNonResettableAttrs:function getNonResettableAttrs(){return r.union(i.prototype.getNonResettableAttrs.apply(this),["colors"])},isAvailable:function isAvailable(){return this.get("colors")&&this.get("colors").length>0}});e.exports=o},function(e,t,n){var r=n(0),i=n(596),o=i.extend({defaults:function defaults(){return r.extend(i.prototype.defaults.apply(this),{type:"bubble",fillColor:"",prefix:"",suffix:"",values:[]})},getNonResettableAttrs:function getNonResettableAttrs(){return r.union(i.prototype.getNonResettableAttrs.apply(this),["values"])},isAvailable:function isAvailable(){return this.get("values")&&this.get("values").length>0}});e.exports=o},function(e,t,n){var r=n(0),i=n(596),o=i.extend({defaults:function defaults(){return r.extend(i.prototype.defaults.apply(this),{type:"category",categories:[]})},getNonResettableAttrs:function getNonResettableAttrs(){return r.union(i.prototype.getNonResettableAttrs.apply(this),["categories"])},isAvailable:function isAvailable(){return this.get("categories")&&this.get("categories").length>0}});e.exports=o},function(e,t,n){var r=n(30),i=n(0),o=n(3),a=n(1332),s=o.Model.extend({defaults:{vertical_offset:0,horizontal_offset:0,position:"top|center",template:"",alternative_names:{}},initialize:function initialize(e){e=e||{},this.fields=new a(e.fields||[]),this.unset("fields")},update:function update(e){e=i.clone(e),this.fields.equals(e.fields)||this.fields.reset(e.fields),delete e.fields,e.alternative_names&&(e.alternative_names=JSON.parse(r(e.alternative_names))),this.set(e)},getFieldNames:function getFieldNames(){return this.fields.pluck("name")},hasFields:function hasFields(){return!this.fields.isEmpty()},hasTemplate:function hasTemplate(){return!!this.get("template")}});e.exports=s},function(e,t,n){var r=n(30),i=n(0),o=n(3),a=n(1332),s=o.Model.extend({defaults:{offset:[28,0],maxHeight:180,alternative_names:{},template_type:"mustache"},initialize:function initialize(e){e=e||{},this.fields=new a(e.fields||[]),this.unset("fields")},update:function update(e){e=i.clone(e),this.fields.equals(e.fields)||this.fields.reset(e.fields),delete e.fields,e.alternative_names&&(e.alternative_names=JSON.parse(r(e.alternative_names))),this.set(e)},getFieldNames:function getFieldNames(){return this.fields.pluck("name")},hasFields:function hasFields(){return!this.fields.isEmpty()},hasTemplate:function hasTemplate(){return!!this.get("template")}});e.exports=s},function(e,t,n){var r=n(1),i=n(0),o=n(1381),a=n(373),s=n(2922),l=n(2921),u=n(1331),c=n(604),d=["sql","source","sql_wrap","cartocss"],f=a.extend({defaults:{type:"CartoDB",attribution:o.get("cartodb_attributions"),visible:!0},initialize:function initialize(e,t){var n,i,o;if(e=e||{},!(t=t||{}).engine)throw new Error("engine is required");this._engine=t.engine,e&&e.cartocss&&this.set("initialStyle",e.cartocss),e.source&&this.setSource(e.source),this.infowindow=new s(e.infowindow),this.tooltip=new l(e.tooltip),this.unset("infowindow"),this.unset("tooltip"),this.legends=new u(e.legends,{engine:this._engine}),this.unset("legends"),r(n=this).call(n,"change",this._onAttributeChanged,this),r(i=this.infowindow.fields).call(i,"reset add remove",this._reload,this),r(o=this.tooltip.fields).call(o,"reset add remove",this._reload,this),this.aggregation=t.aggregation,a.prototype.initialize.apply(this,arguments)},_onAttributeChanged:function _onAttributeChanged(){i.any(d,function(e){if(this.hasChanged(e))return!0},this)&&this._reload()},_reload:function _reload(){this._engine.reload({sourceId:this.get("id")})},restoreCartoCSS:function restoreCartoCSS(){this.set("cartocss",this.get("initialStyle"))},isVisible:function isVisible(){return this.get("visible")},isInteractive:function isInteractive(){return this._hasInfowindowFields()||this._hasTooltipFields()},_hasInfowindowFields:function _hasInfowindowFields(){return this.infowindow.hasFields()},_hasTooltipFields:function _hasTooltipFields(){return this.tooltip.hasFields()},getInteractiveColumnNames:function getInteractiveColumnNames(){return i.chain(["cartodb_id"]).union(this.infowindow.getFieldNames()).union(this.tooltip.getFieldNames()).uniq().value()},isInfowindowEnabled:function isInfowindowEnabled(){return this.infowindow.hasTemplate()},isTooltipEnabled:function isTooltipEnabled(){return this.tooltip.hasTemplate()},getName:function getName(){return this.get("layer_name")},getEstimatedFeatureCount:function getEstimatedFeatureCount(){var e=this.get("meta"),t=e&&e.stats;return t&&t.estimatedFeatureCount},getSourceId:function getSourceId(){var e=this.getSource();return e&&e.id},getSource:function getSource(){return this.get("source")},setSource:function setSource(e,t){this.getSource()&&this.getSource().unmarkAsSourceOf(this),e.markAsSourceOf(this),this.set("source",e,t)},hasSource:function hasSource(e){return this.getSource().equals(e)},update:function update(e){if(e.source)throw new Error('Use ".setSource" to update a layer\'s source instead of the update method');a.prototype.update.apply(this,arguments)},remove:function remove(){this.getSource().unmarkAsSourceOf(this),a.prototype.remove.apply(this,arguments)},getTableName:function getTableName(){if(this.get("source").has("options"))return this.get("source").get("options").table_name},getApiKey:function getApiKey(){return this._engine.getApiKey()}},{_checkSourceAttribute:function _checkSourceAttribute(e){if(!(e instanceof c))throw new Error("Source must be an instance of AnalysisModel")}});e.exports=f},function(e,t,n){var r=n(1),i=n(0),o=["color","image"],a=n(373).extend({defaults:{type:"Plain",visible:!0,baseType:"plain",className:"plain",color:"#FFFFFF",image:""},initialize:function initialize(e,t){var n;if(e=e||{},!(t=t||{}).engine)throw new Error("engine is required");this._engine=t.engine,r(n=this).call(n,"change",this._onAttributeChanged,this)},_onAttributeChanged:function _onAttributeChanged(){i.any(o,this.hasChanged,this)&&this._reload()},_reload:function _reload(){this._engine.reload({sourceId:this.get("id")})}});e.exports=a},function(e,t,n){var r=n(373).extend({OPTIONS:["roadmap","satellite","terrain","custom"],defaults:{type:"GMapsBase",visible:!0,baseType:"gray_roadmap",style:null}});e.exports=r},function(e,t,n){var r=n(373).extend({defaults:{type:"WMS",visible:!0,service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1}});e.exports=r},function(e,t,n){var r=n(1),i=n(0),o=["urlTemplate"],a=n(373).extend({defaults:{type:"Tiled",visible:!0},initialize:function initialize(e,t){var n;if(e=e||{},!(t=t||{}).engine)throw new Error("engine is required");this._engine=t.engine,r(n=this).call(n,"change",this._onAttributeChanged,this)},_onAttributeChanged:function _onAttributeChanged(){i.any(o,this.hasChanged,this)&&this._reload()},_reload:function _reload(){this._engine.reload({sourceId:this.get("id")})}});e.exports=a},function(e,t,n){n(23),n(16),n(25),n(35);var r=n(11),i=n(0),o=n(193),a=n(2927),s=n(2926),l=n(2925),u=n(2924),c=n(2923),d=n(2914),f={"https://dnv9my2eseobd.cloudfront.net/":"http://a.tiles.mapbox.com/","https://maps.nlp.nokia.com/":"http://maps.nlp.nokia.com/","https://tile.stamen.com/":"http://tile.stamen.com/","https://{s}.maps.nlp.nokia.com/":"http://{s}.maps.nlp.nokia.com/","https://cartocdn_{s}.global.ssl.fastly.net/":"http://{s}.api.cartocdn.com/","https://cartodb-basemaps-{s}.global.ssl.fastly.net/":"http://{s}.basemaps.cartocdn.com/"};function checkProperties(e,t){var n=i.select(t,function(t){var n=t.split("|");return i.all(n,function(t){return void 0===e[t]})});if(n.length)throw new Error("The following attributes are missing: "+n.join(","))}var h={tiled:function tiled(e,t){return checkProperties(e,["urlTemplate"]),e.urlTemplate=LayersFactory.isHttps()?function transformToHTTPS(e){for(var t in f){var n=f[t];if(-1!==r(e).call(e,n))return e.replace(n,t)}return e}(e.urlTemplate):function transformToHTTP(e){for(var t in f)if(-1!==r(e).call(e,t))return e.replace(t,f[t]);return e}(e.urlTemplate),new a(e,{engine:t.engine})},wms:function wms(e,t){return checkProperties(e,["urlTemplate"]),new s(e)},gmapsbase:function gmapsbase(e,t){return checkProperties(e,["baseType"]),new l(e)},plain:function plain(e,t){return checkProperties(e,["image|color"]),new u(e,{engine:t.engine})},background:function background(e,t){return new u(e,{engine:t.engine})},cartodb:function cartodb(e,t){return checkProperties(e,["cartocss"]),new c(e,{engine:t.engine})},torque:function torque(e,t){checkProperties(e,["cartocss"]);var n=t.windshaftSettings;return e=i.extend(e,{user_name:n.userName,maps_api_template:n.urlTemplate,client:n.client,api_key:n.apiKey,auth_token:n.authToken}),n.templateName&&(e=i.extend(e,{named_map:{name:n.templateName}})),new d(e,{engine:t.engine})}};function LayersFactory(e){if(!e.engine)throw new Error("engine is required");if(!e.windshaftSettings)throw new Error("windshaftSettings is required");this._engine=e.engine,this._windshaftSettings=e.windshaftSettings}LayersFactory.prototype.createLayer=function(e,t){var n=h[e.toLowerCase()];return n?n(t,{windshaftSettings:this._windshaftSettings,engine:this._engine}):(o.error("error creating layer of type '"+e+"'"),null)},LayersFactory.isHttps=function(){return window&&window.location.protocol&&"https:"===window.location.protocol||!1},e.exports=LayersFactory},function(e,t,n){var r=n(0),i=n(144);e.exports=i.extend({initialize:function initialize(e){this._map=e,this._debouncedTriggerBoundsChanged=r.debounce(this._triggerBoundsChanged,200),this._map.on("change:view_bounds_ne change:center change:zoom",this._debouncedTriggerBoundsChanged,this)},getBounds:function getBounds(){var e=this._map.getViewBounds();return{west:e[0][1],south:e[0][0],east:e[1][1],north:e[1][0]}},clean:function clean(){this._map.off("change:view_bounds_ne change:center change:zoom")},_triggerBoundsChanged:function _triggerBoundsChanged(){this.trigger("boundsChanged",this.getBounds())}})},function(e,t,n){n(23);var r=n(0),i=n(144);e.exports=i.extend({initialize:function initialize(e){this._bounds={},e&&(this._mapAdapter=e,this.setBounds(this._mapAdapter.getBounds()),this._initBinds())},_initBinds:function _initBinds(){this.listenTo(this._mapAdapter,"boundsChanged",r.debounce(this._boundsChanged,350))},_stopBinds:function _stopBinds(){this._mapAdapter&&this.stopListening(this._mapAdapter,"boundsChanged")},_boundsChanged:function _boundsChanged(e){this.setBounds(e)},setBounds:function setBounds(e){this._bounds=e,this.trigger("boundsChanged",e)},getBounds:function getBounds(){return this._bounds},areBoundsAvailable:function areBoundsAvailable(){return r.isFinite(this._bounds.west)},serialize:function serialize(){return[this._bounds.west,this._bounds.south,this._bounds.east,this._bounds.north].join(",")},clean:function clean(){this._stopBinds()}})},function(e,t){var n={getLocalOffset:function(){return-60*(new Date).getTimezoneOffset()}};e.exports=n},function(e,t,n){n(23);var r=n(1),i=n(0),o=n(864),a=n(144),s=n(1333);e.exports=a.extend({defaults:{url:"",data:[],localTimezone:!1,localOffset:0,hasBeenFetched:!1},url:function url(){var e=[],t=this.get("column_type"),n=this._getCurrentOffset(),r=this.get("aggregation")||"auto";if(e.push("no_filters=1"),"number"===t&&this.get("bins")?e.push("bins="+this.get("bins")):"date"===t&&(e.push("aggregation="+r),i.isFinite(n)&&e.push("offset="+n)),this.get("apiKey"))e.push("api_key="+this.get("apiKey"));else if(this.get("authToken")){var o=this.get("authToken");o instanceof Array?i.each(o,function(t){e.push("auth_token[]="+t)}):e.push("auth_token="+o)}var a=this.get("start"),s=this.get("end");return i.isFinite(a)&&i.isFinite(s)&&(e.push("start="+a),e.push("end="+s)),this.get("url")+"?"+e.join("&")},initialize:function initialize(){this.sync=r(o).call(o,this),this._initBinds()},_initBinds:function _initBinds(){this.on("change:url",function(){this.refresh()},this),this.on("change:aggregation change:offset",function(){"date"===this.get("column_type")&&this.get("aggregation")&&this.refresh()},this),this.on("change:bins",function(){"number"===this.get("column_type")&&this.refresh()},this),this.on("change:localTimezone",function(){this.refresh()},this),this.on("change:column",function(){this.set("aggregation","auto",{silent:!0})}),this.on("sync",function(){this.set("hasBeenFetched",!0)})},setUrl:function setUrl(e){if(!e)throw new Error("url not specified");this.set("url",e)},setBins:function setBins(e){this.set("bins",e,{silent:void 0===e})},getData:function getData(){return this.get("data")},parse:function parse(e){var t=e.aggregation||this.get("aggregation"),n=e.bins_count||0,r=e.bin_width,o="date"===this.get("column_type")?e.timestamp_start:e.bins_start,a={};return a.data=new Array(n),t&&(a.aggregation=t,this.set("aggregation",t,{silent:!0})),i.each(e.bins,function(e){a.data[e.bin]=e}),"date"===this.get("column_type")?(a.data=s.fillTimestampBuckets(a.data,o,t,n,"totals"),n=a.data.length):s.fillNumericBuckets(a.data,o,r,n),a.data.length>0&&(a.start=a.data[0].start,a.end=a.data[a.data.length-1].end),a.bins=n,a},refresh:function refresh(){this.fetch()},_getCurrentOffset:function _getCurrentOffset(){return this.get("localTimezone")?this.get("localOffset"):this.get("offset")}})},function(e,t,n){n(32);var r,i=n(10),o=n(40),a=n(5),s=n(18),l=n(27),u=n(1),c=n(6),d=n(0),f=n(3),h=n(1579),p=n(865),m=n(2932),g=n(1333),v=n(2931);e.exports=p.extend({defaults:d.extend({type:"histogram",totalAmount:0,filteredAmount:0,hasNulls:!1,localTimezone:!1},p.prototype.defaults),_getDataviewSpecificURLParams:function _getDataviewSpecificURLParams(){var e=[];if(d.isNumber(this.get("own_filter")))e.push("own_filter="+this.get("own_filter")),"number"===this.get("column_type")&&this.get("bins")&&e.push("bins="+this.get("bins"));else{var t=this.getCurrentOffset();"number"===this.get("column_type")&&this.get("bins")?e.push("bins="+this.get("bins")):"date"===this.get("column_type")&&(e.push("aggregation="+(this.get("aggregation")||"auto")),d.isFinite(t)&&e.push("offset="+t));var n=this.get("start"),r=this.get("end");d.isFinite(n)&&d.isFinite(r)&&(e.push("start="+n),e.push("end="+r))}return e},initialize:function initialize(e,t){this._localOffset=v.getLocalOffset(),this._totals=new m({bins:this.get("bins"),aggregation:this.get("aggregation"),offset:this.get("offset"),column_type:this.get("column_type"),apiKey:t&&t.engine&&t.engine.getApiKey(),authToken:t&&t.engine&&t.engine.getAuthToken(),localTimezone:this.get("localTimezone"),localOffset:this._localOffset,start:this.get("start"),end:this.get("end")}),p.prototype.initialize.apply(this,arguments),this._data=new f.Collection(this.get("data")),e&&(e.min||e.max)&&c(this)&&c(this).setRange(this.get("min"),this.get("max"))},_initBinds:function _initBinds(){var e,t,n;p.prototype._initBinds.apply(this),this._updateURLBinding(),u(e=this._totals).call(e,"loadModelCompleted",this._onTotalsDataFetched,this),this._totals.once("loadModelCompleted",this._updateBindings,this),u(t=this._totals).call(t,"error",this.setUnavailable,this),u(n=this._totals).call(n,"error",this._onTotalsError,this),this.on("change:column",this._onColumnChanged,this),this.on("change:localTimezone",this._onLocalTimezoneChanged,this),this.on("change",this._onFieldsChanged,this),this.on("change:column_type",this._onColumnTypeChanged,this)},_onLocalTimezoneChanged:function _onLocalTimezoneChanged(){this._totals.set("localTimezone",this.get("localTimezone"))},_updateURLBinding:function _updateURLBinding(){this.off("change:url"),this.on("change:url",this._onUrlChanged,this)},_updateBindings:function _updateBindings(){this._onChangeBinds(),this._updateURLBinding()},enableFilter:function enableFilter(){this.set("own_filter",1)},disableFilter:function disableFilter(){this.unset("own_filter")},getData:function getData(){return this._data.toJSON()},getUnfilteredData:function getUnfilteredData(){return this._totals.get("data")},getUnfilteredDataModel:function getUnfilteredDataModel(){return this._totals},getSize:function getSize(){return this._data.size()},getColumnType:function getColumnType(){return this.get("column_type")},hasNulls:function hasNulls(){return this.get("hasNulls")},parse:function parse(e){var t=e.aggregation||this._totals&&this._totals.get("aggregation"),n=d.isFinite(e.bins_count)?e.bins_count:this.get("bins"),r=e.bin_width,i="date"===this.get("column_type")?e.timestamp_start:e.bins_start,o={data:[],filteredAmount:0,nulls:0,totalAmount:0};return this.has("error")?o:(o.data=new Array(n),d.each(e.bins,function(e){o.data[e.bin]=e}),this.set({aggregation:t},{silent:!0}),"date"===this.get("column_type")?(o.data=g.fillTimestampBuckets(o.data,i,t,n,"filtered",this._totals.get("data").length),n=o.data.length):g.fillNumericBuckets(o.data,i,r,n),this._data&&this._data.reset(o.data),o.totalAmount=this._calculateTotalAmount(o.data),o.filteredAmount=this._calculateFilteredAmount(c(this),this._data),o.nulls=e.nulls,o.bins=n,null!=e.nulls&&(o=d.extend({},o,{nulls:e.nulls,hasNulls:!0})),o)},_onFilterChanged:function _onFilterChanged(e){this.set("filteredAmount",this._calculateFilteredAmount(e,this._data)),p.prototype._onFilterChanged.apply(this,arguments)},_onColumnChanged:function _onColumnChanged(){this._totals.set({column_type:this.get("column_type"),column:this.get("column"),start:null,end:null}),this.set("aggregation",void 0,{silent:!0}),this._reloadAndForceFetch()},_calculateTotalAmount:function _calculateTotalAmount(e){return l(d).call(d,e,function(e,t){return e+(t&&t.freq?t.freq:0)},0)},_calculateFilteredAmount:function _calculateFilteredAmount(e,t){var n=0;if(e&&void 0!==e.get("min")&&void 0!==e.get("max")){var r=this._findBinsIndexes(t,e.get("min"),e.get("max"));n=this._sumBinsFreq(t,r.start,r.end)}return n},_findBinsIndexes:function _findBinsIndexes(e,t,n){var r=e.findWhere({start:Math.min(t,n)}),i=e.findWhere({end:Math.max(t,n)});return{start:r&&r.get("bin"),end:i&&i.get("bin")}},_sumBinsFreq:function _sumBinsFreq(e,t,n){return l(d).call(d,s(e).call(e,t,n+1),function(e,t){return(t.get("freq")||0)+e},0)},getDistributionType:function getDistributionType(e){var t=e||this.get("data"),n=function freqAccessor(e){return e.freq};if(h.max(t,n)-h.min(t,n)<.1*h.mean(t,n))return"F";var r=h.sum(t,n),i=a(t).call(t,function(e){return 100*e.freq/r}),s=a(i).call(i,function(e,t){var n=i[t+1];return e>n?-1:Math.abs(e-n)<=.05?0:1});s.pop();var l=h.max(s),u=h.min(s);if(0===u&&0===l)return"F";if(l<1)return"L";if(u>-1)return"J";var c=d.uniq(s),f=[[1,-1],[1,0,-1],[1,-1,0],[0,1,-1]],p=[[-1,1],[-1,0,1],[-1,1,0],[0,-1,1]];return o(f).call(f,function(e){return d.isEqual(e,c)})?"A":o(p).call(p,function(e){return d.isEqual(e,c)})?"U":"S"},toJSON:function toJSON(e){var t=this.get("column_type"),n=this.get("offset"),r={column:this.get("column")};return"number"===t&&this.get("bins")?r.bins=this.get("bins"):"date"===t&&(r.aggregation=this.get("aggregation")||"auto",d.isFinite(n)&&(r.offset=n)),{type:"histogram",source:{id:this.getSourceId()},options:r}},_onColumnTypeChanged:function _onColumnTypeChanged(){c(this)&&c(this).set("column_type",this.get("column_type"))},_onChangeBinds:function _onChangeBinds(){p.prototype._onChangeBinds.call(this)},_onUrlChanged:function _onUrlChanged(){this._totals.set({offset:this.get("offset"),bins:this.get("bins")},{silent:!0}),this._totals.setUrl(this.get("url"))},_onTotalsDataFetched:function _onTotalsDataFetched(e,t){var n=t.get("start"),r=t.get("end");d.isFinite(n)&&d.isFinite(r)&&this.set({start:n,end:r}),this.set({aggregation:t.get("aggregation")||"auto",offset:t.get("offset")||0,bins:t.get("bins"),error:t.get("error")},{silent:!0});var i=!1;"date"===this.get("column_type")&&(d.has(this.changed,"aggregation")||d.has(this.changed,"offset"))?i=!0:"number"===this.get("column_type")&&d.has(this.changed,"bins")&&(i=!0),i?this._resetFilterAndFetch():this.fetch()},_onFieldsChanged:function _onFieldsChanged(){if(this._setTotalsStartEnd(),g.hasChangedSomeOf(["bins","aggregation","offset"],this.changed)){var e=d.has(this.changed,"aggregation")&&d.isUndefined(this.changed.aggregation);"number"!==this.get("column_type")||e||this._totals.set("bins",this.get("bins")),"date"===this.get("column_type")&&(this.hasChanged("aggregation")&&this._resetFilter(),this._totals.set({offset:this.get("offset"),aggregation:this.get("aggregation")}))}},_setTotalsStartEnd:function _setTotalsStartEnd(){var e=this.get("start"),t=this.get("end"),n=g.hasChangedSomeOf(["start","end"],this.changed),r=d.isFinite(e)&&d.isFinite(t),i=this._totals.get("start")!==e||this._totals.get("end")!==t;n&&r&&i&&(this._totals.set({start:e,end:t}),this._totals.refresh())},_resetFilterAndFetch:function _resetFilterAndFetch(){this._resetFilter(),this.fetch()},_resetFilter:function _resetFilter(){this.disableFilter(),c(this)&&c(this).unsetRange()},_onTotalsError:function _onTotalsError(e,t){var n=t&&this._parseError(t);n&&"abort"!==n.message&&this._triggerStatusError(n)},getCurrentOffset:function getCurrentOffset(){return this.get("localTimezone")?this._localOffset:this.get("offset")}},{ATTRS_NAMES:i(r=p.ATTRS_NAMES).call(r,["column","column_type","bins","min","max","aggregation","offset"])})},function(e,t,n){var r,i=n(10),o=n(0),a=n(865);e.exports=a.extend({defaults:o.extend({type:"formula",data:""},a.prototype.defaults),initialize:function initialize(){a.prototype.initialize.apply(this,arguments),this.on("change:column change:operation",this._reloadAndForceFetch,this)},parse:function parse(e){return{data:e.result,nulls:e.nulls}},toJSON:function toJSON(){return{type:"formula",source:{id:this.getSourceId()},options:{column:this.get("column"),operation:this.get("operation")}}}},{ATTRS_NAMES:i(r=a.ATTRS_NAMES).call(r,["column","operation"])})},function(e,t,n){n(23);var r=n(27),i=n(1),o=n(0),a=n(144);e.exports=a.extend({defaults:{url:"",totalCount:0,categoriesCount:0},url:function url(){var url=this.get("url"),e=[];if(this.get("apiKey"))url+="?api_key="+this.get("apiKey");else if(this.get("authToken")){var t=this.get("authToken");t instanceof Array?o.each(t,function(t){e.push("auth_token[]="+t)}):e.push("auth_token="+t),url+="?"+e.join("&")}return url},initialize:function initialize(){var e;i(e=this).call(e,"change:url",function(){this.fetch()},this)},setUrl:function setUrl(e){this.set("url",e)},parse:function parse(e){return{categoriesCount:e.categoriesCount,totalCount:r(o).call(o,o.pluck(e.categories,"value"),function(e,t){return e+t},0)}}})},function(e,t,n){var r=n(144);e.exports=r.extend({defaults:{name:"",agg:!1,value:0}})},function(e,t,n){n(24),n(29),n(51);var r=n(1),i=n(0),o=n(144),a=n(864),s=n(1334);e.exports=o.extend({defaults:{q:"",data:[],url:""},url:function url(){var url=this.get("url")+"/search?q="+encodeURIComponent(this.get("q"));if(this.get("apiKey"))url+="&api_key="+this.get("apiKey");else if(this.get("authToken")){var e=this.get("authToken");e instanceof Array?i.each(e,function(e){url+="&auth_token[]="+e}):url+="&auth_token="+e}return url},initialize:function initialize(e,t){this._data=new s(null,{aggregationModel:t.aggregationModel}),this.sync=r(a).call(a,this)},fetchIfSearchIsApplied:function fetchIfSearchIsApplied(){this.isSearchApplied()&&this.fetch()},setData:function setData(e){var t=this._parseData(e);this._data.reset(t),this.set("data",t)},getData:function getData(){return this._data},getSize:function getSize(){return this._data.size()},getCount:function getCount(){return this.getSize()},isValid:function isValid(){return!!this.get("q")},resetData:function resetData(){this.setData([]),this.set("q","")},getSearchQuery:function getSearchQuery(){return this.get("q")},isSearchApplied:function isSearchApplied(){return this.isValid()&&this.getSize()>0},_parseData:function _parseData(e){var t=[];return i.each(e,function(e){e.agg||t.push({selected:!1,name:(e.category||e.name).toString(),agg:e.agg,value:e.value})},this),t},parse:function parse(e){var t=this._parseData(e.categories);return this._data.reset(t),{data:t}},fetch:function fetch(e){var t,n;if(e=e||{},this.trigger("loading",this),e.success)var a=e&&e.success;return o.prototype.fetch.call(this,i.extend(e,{success:r(t=function _context(){a&&a(arguments),this.trigger("loaded",this)}).call(t,this),error:r(n=function _context2(e,t){(!t||t&&"abort"!==t.statusText)&&this.trigger("error",e,t)}).call(n,this)}))}})},function(e,t,n){n(32);var r,i=n(10),o=n(27),a=n(6),s=n(1),l=n(0),u=n(865),c=n(2937),d=n(2935),f=n(1334);e.exports=u.extend({defaults:l.extend({type:"category",filterEnabled:!1,categories:6,allCategoryNames:[]},u.prototype.defaults),_getDataviewSpecificURLParams:function _getDataviewSpecificURLParams(){return["own_filter="+(this.get("filterEnabled")?1:0),"categories="+this.get("categories")]},initialize:function initialize(e,t){var n,r;u.prototype.initialize.call(this,e,t),this._rangeModel=new d({apiKey:this._engine.getApiKey(),authToken:this._engine.getAuthToken()}),this._data=new f(null,{aggregationModel:this}),this._searchModel=new c({apiKey:this._engine.getApiKey(),authToken:this._engine.getAuthToken()},{aggregationModel:this}),this.on("change:column change:aggregation change:aggregation_column",this._reloadAndForceFetch,this),this.on("change:categories",this.refresh,this),s(n=this).call(n,"change:url",function(){this._searchModel.set({url:this.get("url")})},this),this.once("change:url",function(){this._rangeModel.setUrl(this.get("url"))},this),s(r=this._rangeModel).call(r,"change:totalCount change:categoriesCount",function(){this.set({totalCount:this._rangeModel.get("totalCount"),categoriesCount:this._rangeModel.get("categoriesCount")})},this),this._bindSearchModelEvents(),e&&e.acceptedCategories&&a(this).accept(e.acceptedCategories)},_onMapBoundsChanged:function _onMapBoundsChanged(){u.prototype._onMapBoundsChanged.apply(this,arguments),this._searchModel.fetchIfSearchIsApplied()},_onCircleChanged:function _onCircleChanged(){u.prototype._onCircleChanged.apply(this,arguments),this._searchModel.fetchIfSearchIsApplied()},_onPolygonChanged:function _onPolygonChanged(){u.prototype._onPolygonChanged.apply(this,arguments),this._searchModel.fetchIfSearchIsApplied()},_bindSearchModelEvents:function _bindSearchModelEvents(){this.listenTo(this._searchModel,"loading",function(){this.trigger("loading",this)},this),this.listenTo(this._searchModel,"loaded",function(){this.trigger("loaded",this)},this),this.listenTo(this._searchModel,"error",function(e,t){(!t||t&&"abort"!==t.statusText)&&this.trigger("error",e,t)},this),this.listenTo(this._searchModel,"change:data",this._onSearchDataChange,this)},_onSearchDataChange:function _onSearchDataChange(){this.getSearchResult().each(function(e){var t=a(this).isAccepted(e.get("name"));e.set("selected",t)},this),this.trigger("change:searchData",this)},_shouldFetchOnBoundingBoxChange:function _shouldFetchOnBoundingBoxChange(){return u.prototype._shouldFetchOnBoundingBoxChange.call(this)&&!this.isSearchApplied()},_shouldFetchOnCircleChange:function _shouldFetchOnCircleChange(){return u.prototype._shouldFetchOnCircleChange.call(this)&&!this.isSearchApplied()},_shouldFetchOnPolygonChange:function _shouldFetchOnPolygonChange(){return u.prototype._shouldFetchOnPolygonChange.call(this)&&!this.isSearchApplied()},enableFilter:function enableFilter(){this.set("filterEnabled",!0)},disableFilter:function disableFilter(){this.set("filterEnabled",!1)},getSearchQuery:function getSearchQuery(){return this._searchModel.getSearchQuery()},setSearchQuery:function setSearchQuery(e){this._searchModel.set("q",e)},isSearchValid:function isSearchValid(){return this._searchModel.isValid()},getSearchResult:function getSearchResult(){return this._searchModel.getData()},getSearchCount:function getSearchCount(){return this._searchModel.getCount()},applySearch:function applySearch(){this._searchModel.fetch()},isSearchApplied:function isSearchApplied(){return this._searchModel.isSearchApplied()},cleanSearch:function cleanSearch(){this._searchModel.resetData()},setupSearch:function setupSearch(){this.isSearchApplied()||this._searchModel.setData(this._data.toJSON())},getData:function getData(){return this._data},getSize:function getSize(){return this._data.size()},getCount:function getCount(){return this.get("categoriesCount")},isOtherAvailable:function isOtherAvailable(){return this._data.isOtherAvailable()},numberOfAcceptedCategories:function numberOfAcceptedCategories(){var e=a(this).acceptedCategories,t=this.numberOfRejectedCategories(),n=this.getData(),r=n.size(),numberOfAcceptedCategories=o(n).call(n,function(t,n){return t+(e.where({name:n.get("name")}).length>0?1:0)},0);return t?r-t:numberOfAcceptedCategories},numberOfRejectedCategories:function numberOfRejectedCategories(){var e=a(this).rejectedCategories,t=this.getData();return o(t).call(t,function(t,n){return t+(e.where({name:n.get("name")}).length>0?1:0)},0)},refresh:function refresh(){this.isSearchApplied()?this._searchModel.fetch():this.fetch()},parse:function parse(e){var t=[],n={},r=e.categories,i=[],o=[];return l.each(r,function(e){var r=e.category;i.push(r);var o=a(this).isRejected(r);n[r]=!0,t.push({selected:!o,name:r,agg:e.agg,value:e.value})},this),this.get("filterEnabled")&&a(this).acceptedCategories.each(function(e){var r=e.get("name");o.push(r),n[r]||t.push({selected:!0,name:r,agg:!1,value:0})},this),this._data.reset(t),{allCategoryNames:l.chain(i).union(o).unique().value(),data:t,nulls:e.nulls,min:e.min,max:e.max,count:e.count}},toJSON:function toJSON(){return{type:"aggregation",source:{id:this.getSourceId()},options:{column:this.get("column"),aggregation:this.get("aggregation"),aggregationColumn:this.get("aggregation_column")}}}},{ATTRS_NAMES:i(r=u.ATTRS_NAMES).call(r,["column","aggregation","aggregation_column","acceptedCategories","categories"])})},function(e,t,n){var r=n(0),i=n(1335);e.exports=i.extend({isEmpty:function isEmpty(){return r.isUndefined(this.get("min"))&&r.isUndefined(this.get("max"))},setRange:function setRange(e,t){this.set({min:e,max:t})},unsetRange:function unsetRange(){this.setRange(void 0,void 0)},toJSON:function toJSON(){var e={};return e[this.get("dataviewId")]={min:this.get("min"),max:this.get("max"),column_type:this.get("column_type")},e}})},function(e,t,n){n(32);var r=n(5),i=n(0),o=n(3),a=n(1335);e.exports=a.extend({defaults:{rejectAll:!1},initialize:function initialize(){this.rejectedCategories=new o.Collection,this.acceptedCategories=new o.Collection,this._initBinds()},_initBinds:function _initBinds(){this.listenTo(this.rejectedCategories,"add remove",function(){this.set("rejectAll",!1)}),this.listenTo(this.acceptedCategories,"add remove",function(){this.set("rejectAll",!1)})},isEmpty:function isEmpty(){return 0===this.rejectedCategories.size()&&0===this.acceptedCategories.size()&&!this.get("rejectAll")},accept:function accept(e,t){e=i.isArray(e)?e:[e],i.each(e,function(e){var t={name:e},n=this.rejectedCategories.where(t),r=this.acceptedCategories.where(t);n.length>0?this.rejectedCategories.remove(n):r.length||this.acceptedCategories.add(t)},this),!1!==t&&this.applyFilter()},acceptAll:function acceptAll(){this.set("rejectAll",!1),this.cleanFilter()},isAccepted:function isAccepted(e){return this.acceptedCategories.where({name:e}).length>0},reject:function reject(e,t){e=i.isArray(e)?e:[e],i.each(e,function(e){var t={name:e},n=this.acceptedCategories.where(t),r=this.rejectedCategories.where(t);n.length>0?this.acceptedCategories.remove(n):r.length||this.rejectedCategories.add(t)},this),!1!==t&&this.applyFilter()},isRejected:function isRejected(e){var t=this.acceptedCategories.size();return this.rejectedCategories.where({name:e}).length>0||(t>0&&0===this.acceptedCategories.where({name:e}).length||!!this.get("rejectAll"))},rejectAll:function rejectAll(){this.set("rejectAll",!0),this.cleanFilter()},cleanFilter:function cleanFilter(e){this.acceptedCategories.reset(),this.rejectedCategories.reset(),!1!==e&&this.applyFilter()},applyFilter:function applyFilter(){this.trigger("change",this)},areAllRejected:function areAllRejected(){return this.get("rejectAll")},toJSON:function toJSON(){var e={},t=this.rejectedCategories.size(),n=this.acceptedCategories.size(),r={accept:i.pluck(this.acceptedCategories.toJSON(),"name")},o={reject:i.pluck(this.rejectedCategories.toJSON(),"name")};this.get("rejectAll")?e={accept:[]}:n>0?e=r:t>0&&0===n&&(e=o);var a={};return a[this.get("dataviewId")]=e,a},getAcceptedCategoryNames:function getAcceptedCategoryNames(){var e;return r(e=this.acceptedCategories).call(e,function(e){return e.get("name")})},getRejectedCategoryNames:function getRejectedCategoryNames(){var e;return r(e=this.rejectedCategories).call(e,function(e){return e.get("name")})}})},function(e,t,n){var r=n(5),i=n(0),o=n(144),a=n(231),s=n(2940),l=n(2939),u=n(2938),c=n(2934),d=n(2933),f=n(2930),h=n(2929),p=["map","engine","dataviewsCollection"];function _checkProperties(e,t){i.each(t,function(t){if(void 0===e[t])throw new Error(t+" is required")})}e.exports=o.extend({initialize:function initialize(e,t){a.checkRequiredOpts(t,p,"DataviewsFactory"),this._engine=t.engine,this._dataviewsCollection=t.dataviewsCollection;var n=new h(r(t));this._bboxFilter=new f(n)},createCategoryModel:function createCategoryModel(e){_checkProperties(e,["source","column"]),(e=this._generateAttrsForDataview(e,u.ATTRS_NAMES)).aggregation=e.aggregation||"count",e.aggregation_column=e.aggregation_column||e.column;var t=new s;return this._newModel(new u(e,{engine:this._engine,filter:t,bboxFilter:this._bboxFilter}))},createFormulaModel:function createFormulaModel(e){return _checkProperties(e,["source","column","operation"]),e=this._generateAttrsForDataview(e,c.ATTRS_NAMES),this._newModel(new c(e,{engine:this._engine,bboxFilter:this._bboxFilter}))},createHistogramModel:function createHistogramModel(e){_checkProperties(e,["source","column"]),e=this._generateAttrsForDataview(e,d.ATTRS_NAMES);var t=new l;return this._newModel(new d(e,{engine:this._engine,filter:t,bboxFilter:this._bboxFilter}))},_generateAttrsForDataview:function _generateAttrsForDataview(e,t){return i.pick(e,t)},_newModel:function _newModel(e){return this._dataviewsCollection.add(e),e}})},function(e,t,n){n(196),n(195),n(209),n(29),n(46),n(16),n(25);var r=n(28),i=n(111),o=n(11),a=n(1),s=n(5),l=n(0),u=n(3),c=n(231),d=n(1382),f=n(2941),h=n(605),p=n(2928),m=n(2881),g=n(2880),v=n(1339),y=n(606),_=u.Model.extend({defaults:{loading:!1,showEmptyInfowindowFields:!1,showLimitErrors:!1,state:"init"},initialize:function initialize(){this._loadingObjects=[],this.overlaysCollection=new u.Collection,this.settings=new m,this._instantiateMapWasCalled=!1},getStaticImageURL:function getStaticImageURL(e){var t;e=l.defaults({},e,{zoom:4,lat:0,lng:0,width:300,height:300,format:"png"});var n=this.layerGroupModel.getStaticImageURLTemplate();return n&&(t=n.replace("{z}",e.zoom).replace("{lat}",e.lat).replace("{lng}",e.lng).replace("{width}",e.width).replace("{height}",e.height).replace("{format}",e.format)),t},done:function done(e){return this._doneCallback=e,this},setOk:function setOk(){"init"===this.get("state")&&this._doneCallback&&this._doneCallback(this),this.set("state","ok"),this.unset("error")},error:function error(e){return this._errorCallback=e,this},setError:function setError(e){"init"===this.get("state")&&this._errorCallback&&this._errorCallback(e),this.set({state:"error",error:e})},getLayers:function getLayers(){return l.clone(s(this).layers.models)},getLayer:function getLayer(e){return s(this).layers.at(e)},load:function load(e){var t,n,r,i={urlTemplate:e.datasource.maps_api_template,userName:e.datasource.user_name,client:e.datasource.client,apiKey:this.get("apiKey"),authToken:this.get("authToken"),templateName:e.datasource.template_name};this._engine=this._createEngine(i),this._engine.on(y.Events.RELOAD_SUCCESS,this._onEngineReloadSuccess,this),this._engine.on(y.Events.RELOAD_ERROR,this._onEngineReloadError,this),this._engine.on(y.Events.LAYER_ERROR,this._onEngineLayerError,this),this.layerGroupModel=this._engine._cartoLayerGroup,this._analysisService=new h({engine:this._engine,apiKey:i.apiKey,authToken:i.authToken}),this.analysis={analyse:a(t=this._analysisService.analyse).call(t,this._analysisService),findNodeById:a(n=this._analysisService.findNodeById).call(n,this._analysisService)};var o=e.options&&e.options.scrollwheel||e.scrollwheel,u=c.isMobileDevice()||e.hasZoomOverlay()||o,m=v.AUTO;!0===e.vector?m=v.VECTOR:!1===e.vector&&(m=v.RASTER),this.layersFactory=new p({engine:this._engine,windshaftSettings:i}),this.map=new d({title:e.title,description:e.description,bounds:e.bounds,center:e.center,zoom:e.zoom,scrollwheel:!!o,drag:u,provider:e.map_provider,isFeatureInteractivityEnabled:this.get("interactiveFeatures"),renderMode:m},{layersCollection:this._layersCollection,layersFactory:this.layersFactory}),this.listenTo(s(this),"cartodbLayerMoved",this.reload),this.overlaysCollection.reset(e.overlays),this.dataviews=new f({},{map:s(this),engine:this._engine,dataviewsCollection:this._dataviewsCollection});var g=this._createAnalysisNodes(e.analyses),_=this._createLayers(e.layers,g);s(this).layers.reset(_),window.vis=this,l.defer(a(r=function _context3(){this.trigger("load",this)}).call(r,this))},_createEngine:function _createEngine(e){var t=new y({apiKey:e.apiKey,authToken:e.authToken,username:e.userName,serverUrl:e.urlTemplate,templateName:e.templateName,client:e.client});return this._layersCollection=t._layersCollection,this._dataviewsCollection=t._dataviewsCollection,t},getEngine:function getEngine(){return this._engine},setSettings:function setSettings(e){this.settings.set(e)},_isAnalysisLinkedToLayer:function _isAnalysisLinkedToLayer(e){return this._layersCollection.any(function(t){return t.hasSource(e)})},trackLoadingObject:function trackLoadingObject(e){var t;-1===o(t=this._loadingObjects).call(t,e)&&this._loadingObjects.push(e),this.set("loading",!0)},untrackLoadingObject:function untrackLoadingObject(e){var t,n,r=o(t=this._loadingObjects).call(t,e);r>=0&&(i(n=this._loadingObjects).call(n,r,1),0===this._loadingObjects.length&&this.set("loading",!1))},instantiateMap:function instantiateMap(e){var t;e=e||{},this._instantiateMapWasCalled||(this._instantiateMapWasCalled=!0,this.reload({success:a(t=function _context7(){this._onMapInstantiatedForTheFirstTime(),e.success&&e.success()}).call(t,this),error:function error(t){e.error&&e.error(t&&t.message)},includeFilters:!1}))},_onMapInstantiatedForTheFirstTime:function _onMapInstantiatedForTheFirstTime(){var e,t=this._isAnyDataviewFiltered();g(this._dataviewsCollection,a(e=this._onDataviewFetched).call(e,this)),this._initBindsAfterFirstMapInstantiation(),t&&this.reload({includeFilters:t})},_isAnyDataviewFiltered:function _isAnyDataviewFiltered(){return this._dataviewsCollection.isAnyDataviewFiltered()},_onDataviewFetched:function _onDataviewFetched(){this.trigger("dataviewsFetched")},_onEngineReloadSuccess:function _onEngineReloadSuccess(){this.trigger("reloaded");var e=h.getUniqueAnalysisNodes(this._layersCollection,this._dataviewsCollection);this._isAnyAnalysisNodeLoading(e)?this.trackLoadingObject(this):this.untrackLoadingObject(this),this.setOk()},_onEngineReloadError:function _onEngineReloadError(e){e&&e.isGlobalError&&e.isGlobalError()&&this.setError(e)},_onEngineLayerError:function _onEngineLayerError(e){e&&s(this).trigger("error:"+e.type,e)},reload:function reload(e){return this._instantiateMapWasCalled?(this.trigger("reload"),this._engine.reload(e)):r.resolve()},_isAnyAnalysisNodeLoading:function _isAnyAnalysisNodeLoading(e){return l.any(e,function(e){return e.isLoading()})},_initBindsAfterFirstMapInstantiation:function _initBindsAfterFirstMapInstantiation(){var e,t,n,r;(a(e=this._layersCollection).call(e,"reset",this._onLayersResetted,this),a(t=this._layersCollection).call(t,"add",this._onLayerAdded,this),a(n=this._layersCollection).call(n,"remove",this._onLayerRemoved,this),this._dataviewsCollection)&&(this._dataviewsCollection.on("add reset remove",l.debounce(this.invalidateSize,10),this),this.listenTo(this._dataviewsCollection,"add",l.debounce(a(r=this._onDataviewAdded).call(r,this),10)),this.listenTo(this._dataviewsCollection,"remove",this._onDataviewRemoved))},_onDataviewRemoved:function _onDataviewRemoved(e){e.isFiltered()&&this.reload({sourceId:e.getSourceId()})},_onLayersResetted:function _onLayersResetted(){this.reload()},_onLayerAdded:function _onLayerAdded(e,t,n){(n=n||{}).silent||this.reload({sourceId:e.get("id")})},_onLayerRemoved:function _onLayerRemoved(e,t,n){(n=n||{}).silent||this.reload({sourceId:e.get("id")})},_onDataviewAdded:function _onDataviewAdded(){this.reload()},invalidateSize:function invalidateSize(){this.trigger("invalidateSize")},addCustomOverlay:function addCustomOverlay(e){return e.type="custom",this.overlaysCollection.add(e),e},isLoading:function isLoading(){return this.get("loading")},_createAnalysisNodes:function _createAnalysisNodes(e){l.each(e,function(e){this._analysisService.analyse(e)},this)},_createLayers:function _createLayers(e,t){return s(l).call(l,e,function(e,t){return(e=l.extend({},l.omit(e,"options"),e.options,{order:t})).source?e.source=this._analysisService.findNodeById(e.source):e.sql&&(e.source=this._analysisService.createAnalysisForLayer(e.id,e.sql),delete e.sql),this.layersFactory.createLayer(e.type,e)},this)}});e.exports=_},function(e,t,n){n(209);var r=n(5),i=n(1),o=n(152),a=n(171);e.exports=o.extend({className:"CDB-Zoom",events:{"click .js-zoomIn":"_onZoomIn","click .js-zoomOut":"_onZoomOut",dblclick:"killEvent"},options:{timeout:0,msg:""},initialize:function initialize(){var e;this.map=this.model,this.template=this.options.template||a,i(e=r(this)).call(e,"change:zoom change:minZoom change:maxZoom",this._checkZoom,this)},render:function render(){return this.$el.html(this.template(this.options)),this._checkZoom(),this},_checkZoom:function _checkZoom(){var e=r(this).get("zoom");this.$(".js-zoomIn")[e<r(this).get("maxZoom")?"removeClass":"addClass"]("is-disabled"),this.$(".js-zoomOut")[e>r(this).get("minZoom")?"removeClass":"addClass"]("is-disabled"),this.$(".js-zoomInfo").text(e)},_onZoomIn:function _onZoomIn(e){this.killEvent(e),r(this).get("maxZoom")>r(this).getZoom()&&r(this).setZoom(r(this).getZoom()+1)},_onZoomOut:function _onZoomOut(e){this.killEvent(e),r(this).get("minZoom")<r(this).getZoom()&&r(this).setZoom(r(this).getZoom()-1)}})},function(e,t,n){var r=n(2943);e.exports=function ZoomOverlay(e,t){if(!t.mapModel)throw new Error("mapModel is required");return new r({model:t.mapModel}).render()}},function(e,t,n){n(29),n(46),n(16),n(25);var r={Geography:"region","Geography:Country":"country","Geography:CountrySubdivision":"region","Geography:CountrySecondarySubdivision":"region","Geography:CountryTertiarySubdivision":"region","Geography:Municipality":"localadmin","Geography:MunicipalitySubdivision":"locality","Geography:Neighbourhood":"neighbourhood","Geography:PostalCodeArea":"postal-area",Street:"neighbourhood","Address Range":"neighbourhood","Point Address":"address","Cross Street":"address",POI:"venue"};function TomTomGeocoder(){}TomTomGeocoder.geocode=function(e,t){if(!e)throw new Error("TomTomGeocoder.geocode called with no address");if(!t)throw new Error("TomTomGeocoder.geocode called with no apiKey");return fetch("https://api.tomtom.com/search/2/search/{{address}}.json?key={{apiKey}}".replace("{{address}}",e).replace("{{apiKey}}",t)).then(function(e){return e.json()}).then(function(e){return function _formatResponse(e){if(!e.results.length)return[];var t=e.results[0];return[{boundingbox:function _getBoundingBox(e){if(!e.viewport)return;var t=e.viewport.topLeftPoint,n=e.viewport.btmRightPoint;return{south:n.lat,west:t.lon,north:t.lat,east:n.lon}}(t),center:function _getCenter(e){return[e.position.lat,e.position.lon]}(t),type:function _getType(e){var t=e.type;if(r[t])return"Geography"===t&&e.entityType&&(t=t+":"+e.entityType),r[t];return"default"}(t)}]}(e)})},e.exports=TomTomGeocoder},function(e,t,n){n(29),n(46),n(16),n(25);var r={country:"country",region:"region",postcode:"postal-area",district:"localadmin",place:"venue",locality:"locality",neighborhood:"neighbourhood",address:"address",poi:"venue","poi.landmark":"venue"};function MapboxGeocoder(){}MapboxGeocoder.geocode=function(e,t){if(!e)throw new Error("MapboxGeocoder.geocode called with no address");if(!t)throw new Error("MapboxGeocoder.geocode called with no access_token");return fetch("https://api.mapbox.com/geocoding/v5/mapbox.places-permanent/{{address}}.json?access_token={{access_token}}".replace("{{address}}",e).replace("{{access_token}}",t)).then(function(e){return e.json()}).then(function(e){return function _formatResponse(e){if(!e.features.length)return[];return[{boundingbox:function _getBoundingBox(e){if(!e.bbox)return;return{south:e.bbox[0],west:e.bbox[1],north:e.bbox[2],east:e.bbox[3]}}(e.features[0]),center:function _getCenter(e){return[e.center[1],e.center[0]]}(e.features[0]),type:function _getType(e){if(r[e.place_type[0]])return r[e.place_type[0]];return"default"}(e.features[0])}]}(e)})},e.exports=MapboxGeocoder},function(e,t,n){n(209);var r=n(5),i=n(37),o=n(1),a=n(0),s=n(152),l=n(2946),u=n(2945),c=n(879),d=n(1366),f=n(377),h=n(173),p=n(172),m={tomtom:u,mapbox:l},g={tomtom:"tomtomApiKey",mapbox:"mapboxApiKey"},v=s.extend({className:"CDB-Search CDB-Overlay",_ZOOM_BY_CATEGORY:{address:18,building:18,venue:18,"postal-area":15,neighbourhood:15,locality:12,localadmin:11,region:8,county:8,country:5,default:12},events:{"click .js-toggle":"_onToggleClick","submit .js-form":"_onSubmit",click:"_stopPropagation",dblclick:"_stopPropagation",mousedown:"_stopPropagation"},options:{searchPin:!0,infowindowWidth:186,infowindowOffset:[30,30],iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAfCAYAAADXwvzvAAACuklEQVR4Ae3PQ+AsNxzA8e8vo/Xus237vVN9qW3b7qW2bdu2caxt29bu/meSmaTpqW63Pfc7wemTZPh9K/Xv3zhzxIgVrho0aMsLGo2N9o+iuYDwV02E5NJpM7d5fMGC515dMP/7l6dNMc+OGJY9Uq99cVMc33I4LOJXCQBQuXPBglNnDRm0Xa1RAWewP3yL/vJLul99Q/pNm0/b+qsnbLHngXAVgAI4b9KkXWc1m9vV58ykst56lKdMptyokdTKRJUIV1MMTGTgbOTknWABgFo2SSbOjuN9wlgIBrSIJ0yiVG9QUgGxUigRRAlpCQYrBs+A/QClliuXV6ppPVibDPPqi5irL8G+/QY2S3FZhityrLNYBWkAI2G5WTA2nGTthKDTJfP/FH1sCb76nNBa7I8/knba6Eyj8wJjLbk4qlCdAFNClWXKiiL72kGRUkSRhwUuTUm7XTqZ3z3KnMM7QhAFUfiKMZ9OQci+ydFFH32BIsDh8hxjDF2T0y0KtHHUczCg34P3wgesfWhZozstW1R/cJpuohA8dI7cWrSfxqM4gwEOnoJnn4HXBVDHwHnriNr2W3G0I8FEkKufMbjcIw1DC+iCuRw2OBduEYAKDD8drlkGlk6BHwAtIEDioD/QBnsnnHAI7A9YAAAGenwEnPuAd8+DewHcS+CeB3szvL0b7ADE/FWzYf5BCxa9dMvqa7oLll7WbTlsxKkDYRi9dPqhRz743L0PuKtOPMXtutHmm/InKf5Y6Co15Upl8qSCqVajXiEeUTRb6GqNIojoGaLEDwEA6B0KIKL8lH8JBeS/3AgK73qAPfc/tCLiAACUCmyvsJHnphwEAYFStNs/NoHgn2ATWPmlF54b/9GHH/Khn88/+9SywJx/+q0SsKTZbB45d/6CO0aNHnutv3kbYDQg9JAAIRDwF/0EjlkjUi3fkAMAAAAASUVORK5CYII=",iconAnchor:[7,31]},initialize:function initialize(){this.map=this.model,this.mapView=this.options.mapView,this.template=this.options.template||h,this._initializeGeocoder()},_initializeGeocoder:function _initializeGeocoder(){var e=this._getGeocodingInfoFromConfig();this.geocoderService=this.options.geocoderService||e.provider||"tomtom",this.geocoder=m[this.geocoderService];var t=g[this.geocoderService];this.token=this.options.token||e.token||window[t]},render:function render(){return this.$el.html(this.template(this.options)),this},_stopPropagation:function _stopPropagation(e){e&&e.stopPropagation()},_onSubmit:function _onSubmit(e){var t;e.preventDefault();var n=this.$(".js-textInput").val();if(n)return this._destroySearchPin(0),this.geocoder.geocode(n,this.token).then(o(t=this._onResult).call(t,this))},_onResult:function _onResult(e){var t=this.$(".js-textInput").val();if(e&&e.length>0){var n=e[0],r=this._getZoomByCategory(n.type);this.model.setView(n.center,r,{silent:!1}),this.options.searchPin&&this._createSearchPin(n.center,t)}},_onToggleClick:function _onToggleClick(){this.$(".CDB-Search-inner").toggleClass("is-active"),this.$(".js-textInput").focus()},_getZoomByCategory:function _getZoomByCategory(e){return e&&this._ZOOM_BY_CATEGORY[e]?this._ZOOM_BY_CATEGORY[e]:this._ZOOM_BY_CATEGORY.default},_createSearchPin:function _createSearchPin(e,t){this._destroySearchPin(),this._createPin(e,t),this._createInfowindow(e,t),this._bindEvents()},_destroySearchPin:function _destroySearchPin(e){this._unbindEvents(),this._destroyPin(),this._destroyInfowindow(e)},_createInfowindow:function _createInfowindow(e,t){var n=new c({template:p,latlng:e,width:this.options.infowindowWidth,offset:this.options.infowindowOffset,content:{fields:[{title:"address",value:t}]}});this._searchInfowindow=new d({model:n,mapView:this.mapView}),this.mapView.$el.append(this._searchInfowindow.el),n.set("visibility",!0)},_destroyInfowindow:function _destroyInfowindow(e){if(this._searchInfowindow){e=!a.isUndefined(e)&&a.isNumber(e)?e:500,this._searchInfowindow.hide(!0);var t=this;i(function(){t._searchInfowindow&&(t._searchInfowindow.clean(),delete t._searchInfowindow)},e)}},_createPin:function _createPin(e,t){this._searchPin=new f({latlng:[e[0],e[1]],iconUrl:this.options.iconUrl,iconAnchor:this.options.iconAnchor}),r(this).addGeometry(this._searchPin)},_toggleSearchInfowindow:function _toggleSearchInfowindow(){var e=this._searchInfowindow.model.get("visibility");this._searchInfowindow.model.set("visibility",!e)},_destroyPin:function _destroyPin(){this._searchPin&&(r(this).removeGeometry(this._searchPin),delete this._searchPin)},_bindEvents:function _bindEvents(){var e,t;this._searchPin&&o(e=this._searchPin).call(e,"click",this._toggleSearchInfowindow,this),o(t=this.mapView).call(t,"click",this._destroySearchPin,this)},_unbindEvents:function _unbindEvents(){this._searchPin&&this._searchPin.unbind("click",this._toggleSearchInfowindow,this),this.mapView.unbind("click",this._destroySearchPin,this)},_getGeocodingInfoFromConfig:function _getGeocodingInfoFromConfig(){if(!window.geocoderConfiguration)return{};var e,t=window.geocoderConfiguration.provider;return t&&(e=window.geocoderConfiguration[t]&&window.geocoderConfiguration[t].search_bar_api_key),{provider:t,token:e}},clean:function clean(){this._unbindEvents(),this._destroySearchPin(),s.prototype.clean.call(this)}});e.exports=v},function(e,t,n){var r=n(0),i=n(2947),o=n(378);e.exports=function SearchOverlay(e,t){if(!t.mapView)throw new Error("mapView is required");if(!t.mapModel)throw new Error("mapModel is required");var n=r.extend(e,{mapView:t.mapView,model:t.mapModel});return e.template&&(n.template=o.compile(e.template,e.templateType||"mustache")),new i(n).render()}},function(e,t,n){var r=n(152),i=n(174);e.exports=r.extend({className:"CDB-Logo",tagName:"a",render:function render(){return this.$el.html(i()),this.$el.attr("href","https://carto.com"),this.$el.attr("target","_blank"),this}})},function(e,t,n){var r=n(2949);e.exports=function LogoOverlay(e,t){return(new r).render()}},function(e,t,n){var r=n(152).extend({className:"CDB-Loader",options:{animationSpeed:500},initialize:function initialize(){this.isVisible=0},render:function render(){return this},show:function show(e){this.isVisible||(this.$el.addClass("is-visible"),this.isVisible++)},hide:function hide(e){this.isVisible--,this.isVisible>0||(this.isVisible=0,this.$el.removeClass("is-visible"))},visible:function visible(){return this.isVisible>0}});e.exports=r},function(e,t,n){var r=n(2951);e.exports=function LoaderOverlay(e){return(new r).render()}},function(e,t,n){var r=n(1336);e.exports=function TilesOverlay(e,t){if(!t.mapModel)throw new Error("mapModel is required");return new r({map:t.mapModel}).render()}},function(e,t,n){var r=n(1336),i=n(159),o=n(270);e.exports=r.extend({className:"CDB-Limits",render:function render(){return this.$el.html(i({limits:o.html('Some tiles might not be rendering correctly. <a target="_blank" href="https://carto.com/docs/faqs/carto-engine-usage-limits">Learn More</a>')})),this}})},function(e,t,n){var r=n(2954);e.exports=function LimitsOverlay(e,t){if(!t.mapModel)throw new Error("mapModel is required");return new r({map:t.mapModel}).render()}},function(e,t){e.exports=function LayerSelectorOverlay(e,t){}},function(e,t,n){n(16),n(205);var r=n(5),i=n(9),o=n(0),a=n(193),s=n(152),l=n(175),u=s.extend({tagName:"div",className:"CDB-Fullscreen",events:{click:"_toggleFullScreen"},initialize:function initialize(){o.bindAll(this,"render"),this.template=this.options.template||l,this._addWheelEvent()},render:function render(){var e=o.extend(this.options,{mapUrl:window.location.href||""});return this.$el.html(this.template(e)),this._canFullScreenBeEnabled()||(this.undelegateEvents(),a.info("FullScreen API is deprecated on insecure origins. See https://goo.gl/rStTGz for more details.")),this},_addWheelEvent:function _addWheelEvent(){var e=this,t=this.options.mapView;i(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||e.options.allowWheelOnFullscreen&&r(t.options).set("scrollwheel",!1),t.invalidateSize()})},_toggleFullScreen:function _toggleFullScreen(e){e&&this.killEvent(e);var t=window.document,n=t.documentElement;this.options.doc&&(n=this.options.doc);var i=n.requestFullscreen||n.mozRequestFullScreen||n.webkitRequestFullScreen||n.msRequestFullscreen,o=t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen,a=this.options.mapView;t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?o.call(t):(n.webkitRequestFullScreen?i.call(n,void 0):i&&i.call(n),a&&this.options.allowWheelOnFullscreen&&r(a).set("scrollwheel",!0))},_canFullScreenBeEnabled:function _canFullScreenBeEnabled(){if(this._isInIframe()&&0!==document.referrer.search("https:"))return!1;return!0},_isInIframe:function _isInIframe(){try{return window.self!==window.top}catch(e){return!0}}});e.exports=u},function(e,t,n){var r=n(21),i=n(0),o=n(2957),a=n(378);e.exports=function FullscreenOverlay(e,t){var n;if(!t.mapView)throw new Error("mapView is required");if(!t.visView)throw new Error("visView is required");var s=i.extend(e,{doc:r(n=t.visView.$el).call(n,"> div").get(0),allowWheelOnFullscreen:!1,mapView:t.mapView});return e.template&&(s.template=a.compile(e.template,e.templateType||"mustache")),new o(s).render()}},function(e,t){e.exports=function CustomOverlay(e,t){return e.render()}},function(e,t,n){n(23),n(209);var r=n(1),i=n(5),o=n(9),a=n(0),s=n(152),l=n(144),u=n(176),c=n(270);e.exports=s.extend({className:"CDB-Attribution",events:{"click .js-button":"_toggleAttributions",dblclick:"killEvent"},initialize:function initialize(){var e,t;this.model=new l({visible:!1}),this.map=i(this.options),this._onDocumentKeyDown=r(e=this._onDocumentKeyDown).call(e,this),this._toggleAttributionsBasedOnContainer=r(t=this._toggleAttributionsBasedOnContainer).call(t,this),this._initBinds()},render:function render(){var e=a.compact(i(this).get("attribution")).join(", "),t="leaflet"!==i(this).get("provider");return this.$el.html(u({attributions:c.html(e)})),this.$el.toggleClass("CDB-Attribution--gmaps",!!t),this._toggleAttributionsBasedOnContainer(),this},_initBinds:function _initBinds(){var e,t,n;r(e=this.model).call(e,"change:visible",function(e,t){this[t?"_showAttributions":"_hideAttributions"]()},this),r(t=i(this)).call(t,"change:attribution",this.render,this),this.add_related_model(i(this)),r(n=o(window)).call(n,"resize",this._toggleAttributionsBasedOnContainer)},_enableDocumentBinds:function _enableDocumentBinds(){var e;r(e=o(document)).call(e,"keydown",this._onDocumentKeyDown)},_disableDocumentBinds:function _disableDocumentBinds(){o(document).unbind("keydown",this._onDocumentKeyDown)},_onDocumentKeyDown:function _onDocumentKeyDown(e){e&&27===e.keyCode&&this._toggleAttributions()},_showAttributions:function _showAttributions(){this.$el.addClass("is-active"),this._enableDocumentBinds()},_hideAttributions:function _hideAttributions(){this.$el.removeClass("is-active"),this._disableDocumentBinds()},_toggleAttributions:function _toggleAttributions(){this.model.set("visible",!this.model.get("visible"))},_toggleAttributionsBasedOnContainer:function _toggleAttributionsBasedOnContainer(){i(this).getMapViewSize().x>650?this.model.set("visible",!0):this.model.set("visible",!1)},clean:function clean(){this._disableDocumentBinds(),o(window).unbind("resize",this._toggleAttributionsBasedOnContainer),s.prototype.clean.call(this)}})},function(e,t,n){var r=n(2960);e.exports=function AttributionOverlay(e,t){if(!t.mapModel)throw new Error("mapModel is required");return new r({map:t.mapModel}).render()}},function(e,t,n){e.exports={attribution:n(2961),custom:n(2959),fullscreen:n(2958),layer_selector:n(2956),limits:n(2955),tiles:n(2953),loader:n(2952),logo:n(2950),search:n(2948),zoom:n(2944)}},function(e,t,n){var r=n(0),i=n(193),o=n(2962),a=function OverlaysFactory(e){if(!(e=e||{}).mapModel)throw new Error("mapModel is required");if(!e.mapView)throw new Error("mapView is required");if(!e.visView)throw new Error("visView is required");this._mapModel=e.mapModel,this._mapView=e.mapView,this._visView=e.visView};a._constructors={},a.register=function(e,t){this._constructors[e]=t},a.prototype.create=function(e,t){var n=this.constructor._constructors[e];if(n){t.options="string"==typeof t.options?JSON.parse(t.options):t.options,t.options=t.options||{};var r=n(t,{mapModel:this._mapModel,mapView:this._mapView,visView:this._visView});return!!r&&(r.type=e,r)}i.log("Overlays of type '"+e+"' are not supported anymore")},r.each(o,function(e,t){a.register(t,e)}),e.exports=a},function(e,t,n){n(128),n(32);var r=n(21),i=n(11),o=n(1),a=n(7),s=n(0),l=n(152),u=n(2963),c=n(170),d=n(435),f=n(606),h=["attribution","fullscreen","tiles","limits","logo","search","zoom"],p=l.extend({initialize:function initialize(e){if(!e.overlaysCollection)throw new Error("overlaysCollection is required");if(!e.engine)throw new Error("engine is required");if(!e.visView)throw new Error("visView is required");if(!e.mapModel)throw new Error("mapModel is required");if(!e.mapView)throw new Error("mapView is required");this._overlaysCollection=e.overlaysCollection,this._engine=e.engine,this._visView=e.visView,this._mapModel=e.mapModel,this._mapView=e.mapView,this._overlayViews=[],this._overlaysFactory=new u({mapModel:this._mapModel,mapView:this._mapView,visView:this._visView}),this._initBinds(),this.$el.append(c())},render:function render(){return this._clearOverlays(),this._renderOverlays(),this},_initBinds:function _initBinds(){this._engine.on(f.Events.RELOAD_STARTED,this._showLoaderOverlay,this),this._engine.on(f.Events.RELOAD_ERROR,this._hideLoaderOverlay,this),this._engine.on(f.Events.RELOAD_SUCCESS,this._hideLoaderOverlay,this),this.listenTo(this._overlaysCollection,"add remove change",this.render,this),this.listenTo(this._mapModel,"error:limit",this._addLimitsOverlay,this),this.listenTo(this._mapModel,"error:tile",this._addTilesOverlay,this)},_clearOverlays:function _clearOverlays(){for(;0!==this._overlayViews.length;)this._overlayViews.pop().clean()},_renderOverlays:function _renderOverlays(){var e,t=this._overlaysCollection.toJSON();t=s.sortBy(t,function(e){return null===e.order?Number.MAX_VALUE:e.order}),a(t).call(t,o(e=function _context(e){this._renderOverlay(e)}).call(e,this))},_renderOverlay:function _renderOverlay(e){var t=this._createOverlayView(e);t&&(t.render(),this._isGlobalOverlay(e)?this.$el.append(t.el):this._overlayContainer().append(t.el),this.addView(t),this._overlayViews.push(t))},_createOverlayView:function _createOverlayView(e){return this._overlaysFactory.create(e.type,e,{visView:this._visView,map:this._mapModel})},_isGlobalOverlay:function _isGlobalOverlay(e){return-1===i(h).call(h,e.type)},_overlayContainer:function _overlayContainer(){return this.$(".CDB-OverlayContainer")},_showLoaderOverlay:function _showLoaderOverlay(){var e=this._getLoaderOverlay();e&&e.show()},_hideLoaderOverlay:function _hideLoaderOverlay(){var e=this._getLoaderOverlay();e&&e.hide()},_getLoaderOverlay:function _getLoaderOverlay(){return this._getOverlayViewByType("loader")},_getOverlayViewByType:function _getOverlayViewByType(e){return r(s).call(s,this._overlayViews,function(t){return t.type===e})},_areLimitsErrorsEnabled:function _areLimitsErrorsEnabled(){return this._visView.model.get("showLimitErrors")},_addLimitsOverlay:function _addLimitsOverlay(){this._areLimitsErrorsEnabled()&&(this._removeTilesOverlay(),this._getOverlayViewByType(d.OVERLAY_TYPES.LIMITS)||this._overlaysCollection.add({type:d.OVERLAY_TYPES.LIMITS}))},_hasLimitsOverlay:function _hasLimitsOverlay(){return!!this._getOverlayViewByType(d.OVERLAY_TYPES.LIMITS)},_addTilesOverlay:function _addTilesOverlay(){this._hasLimitsOverlay()||(this._getOverlayViewByType(d.OVERLAY_TYPES.TILES)||this._overlaysCollection.add({type:d.OVERLAY_TYPES.TILES}))},_removeLimitsOverlay:function _removeLimitsOverlay(){var e=this._overlaysCollection.findWhere({type:d.OVERLAY_TYPES.LIMITS});this._overlaysCollection.remove(e)},_removeTilesOverlay:function _removeTilesOverlay(){var e=this._overlaysCollection.findWhere({type:d.OVERLAY_TYPES.TILES});this._overlaysCollection.remove(e)},clean:function clean(){l.prototype.clean.apply(this),this._clearOverlays()}});e.exports=p},function(e,t,n){var r=n(430),i=n(180),o=r.extend({_getCompiledTemplate:function _getCompiledTemplate(){return i({colors:this.model.get("colors"),prefix:this.model.get("prefix"),suffix:this.model.get("suffix"),hasCustomLabels:this._hasCustomLabels(),leftLabel:this.model.get("leftLabel"),rightLabel:this.model.get("rightLabel")})},_hasCustomLabels:function _hasCustomLabels(){var e=this.model.get("leftLabel"),t=this.model.get("rightLabel");return null!=e&&""!==e||null!=t&&""!==t}});e.exports=o},function(e,t,n){n(16),n(25);var r=n(430),i=n(181),o=r.extend({_getCompiledTemplate:function _getCompiledTemplate(){var e=this.model.get("html");return e=""===e?i({items:this.model.get("items")}):this._patchStylesForIE(e)},_patchStylesForIE:function _patchStylesForIE(e){return e.replace(/\bstyle=(['"])/g,'style="opacity:1; ')}});e.exports=o},function(e,t,n){var r=n(430),i=n(182),o=n(1337),a=n(270),s=r.extend({_getCompiledTemplate:function _getCompiledTemplate(){return i({colors:this.model.get("colors"),avg:this.model.get("avg"),hasCustomLabels:this._hasCustomLabels(),avgPercentage:this._calculateAVGPercentage(),prefix:this.model.get("prefix"),suffix:this.model.get("suffix"),labels:this._getLabels(),formatter:o})},_hasCustomLabels:function _hasCustomLabels(){var e=this.model.get("leftLabel"),t=this.model.get("rightLabel");return null!=e&&""!==e||null!=t&&""!==t},_getLabels:function _getLabels(){var e=this.model.get("colors"),t=this.model.get("leftLabel"),n=this.model.get("rightLabel"),r={};return r.left=a.html(o.formatNumber(e[0].label)),r.right=a.html(o.formatNumber(e[e.length-1].label)),null!=t&&""!==t&&(r.left=t),null!=n&&""!==n&&(r.right=n),r},_calculateAVGPercentage:function _calculateAVGPercentage(){return 100*(this.model.get("avg")-this.model.get("min"))/(this.model.get("max")-this.model.get("min"))}});e.exports=s},function(e,t,n){var r=n(18),i=n(430),o=n(183),a=i.extend({_getCompiledTemplate:function _getCompiledTemplate(){return o({categories:this._getCategories()})},_getCategories:function _getCategories(){var e,t=r(e=this.model.get("categories")).call(e,0),n=this.model.get("default");return n&&t.push({title:"Others",icon:n.icon,color:n.color}),t}});e.exports=a},function(e,t,n){n(16),n(35);var r=n(620),i=n(21),o=n(9),a=n(3),s=n(231);e.exports=a.View.extend({initialize:function initialize(e){if(!e.el)throw new Error("element is mandatory.");if(!e.imageClass)throw new Error("Image class is mandatory.");this._color=this.$el.data("color"),this._icon=this.$el.data("icon"),this._imageClass=e.imageClass,this._lastImage={url:null,content:null}},_loadImage:function _loadImage(){var e=this,t=this._isSVG(this._icon);if(0!==this.$el.length)if(t)this._requestImage(this._icon,function(t){var n=t.cloneNode(!0),r=o(n);(r=r.removeAttr("xmlns:a")).attr("class",e._imageClass+" js-image"),e.$el.empty().append(r),r.css("fill",e._color),i(r).call(r,"g").css("fill","inherit"),i(r).call(r,"path").css("fill","inherit"),i(r).call(r,"rect").each(function(e,t){var n=o(t);"none"!==n.css("fill")&&n.css("fill","inherit")})});else{var n=o('<img crossorigin="anonymous"/>');n.attr("class",e._imageClass+" js-image"),n.attr("src",this._icon+"?req=markup"),this.$el.empty().append(n)}},_requestImage:function _requestImage(e,t){var n=this,r=e+"?req=ajax";this._lastImage.url===r?t&&t(this._lastImage.content):o.ajax(r).done(function(e){n._lastImage.url=r;var i=n._lastImage.content=e.getElementsByTagName("svg")[0];t&&t(i)}).fail(function(){throw new Error("Couldn't get "+r+" file.")})},_updateImageColor:function _updateImageColor(e){this.$(".js-image").css("fill",e)},_isSVG:function _isSVG(e){if(!e)return!1;var t=e.split("?")[0];return t&&r(s).call(s,t.toUpperCase(),"SVG")}})},function(e,t,n){var r=n(27),i=n(5),o=n(18),a=n(239),s=n(0),l=n(430),u=n(184),c=n(1337),d=l.extend({className:"CDB-Legend-item u-tSpace-xl u-clearfix",_getCompiledTemplate:function _getCompiledTemplate(){return u({hasCustomLabels:this._hasCustomLabels(),labels:this._calculateLabels(),bubbleSizes:this._calculateBubbleSizes(),labelPositions:this._calculateLabelPositions(),avgSize:this._calculateAverageSize(),avgLabel:this.model.get("avg"),fillColor:this.model.get("fillColor"),formatter:c})},_hasCustomLabels:function _hasCustomLabels(){var e=this.model.get("topLabel"),t=this.model.get("bottomLabel");return null!=e&&""!==e||null!=t&&""!==t},_calculateLabelPositions:function _calculateLabelPositions(){var e;return this._hasCustomLabels()?e=[0,100]:(e=this._calculateBubbleSizes()).push(0),e},_calculateLabels:function _calculateLabels(){var e,t;this._hasCustomLabels()?((e=[]).push(this.model.get("bottomLabel")),e.push(this.model.get("topLabel")),e=a(e).call(e)):(e=o(t=this.model.get("values")).call(t,0),this._areSizesInAscendingOrder()&&(e=a(e).call(e)));return e},_calculateValues:function _calculateValues(){var e,t=o(e=this.model.get("sizes")).call(e,0);return this._areSizesInAscendingOrder()&&(t=a(t).call(t)),t},_areSizesInAscendingOrder:function _areSizesInAscendingOrder(){var e,t=o(e=this.model.get("sizes")).call(e,0);return s.first(t)<s.last(t)},_calculateBubbleSizes:function _calculateBubbleSizes(){var e=this._calculateValues(),t=s.max(e);return i(s).call(s,e,function(e,n){return 100*e/t})},_calculateAverageSize:function _calculateAverageSize(){var e,t,n=a(e=this._calculateBubbleSizes()).call(e);n.unshift(0);var i=o(t=this.model.get("values")).call(t,0),l=this.model.get("avg"),u=r(s).call(s,i,function(e,t,n){return t>l?e:n+1},0);if(u===i.length)return 100;var c=n[u-1];return c+(n[u]-c)*((l-i[u-1])/(i[u]-i[u-1]))}});e.exports=d},function(e,t,n){var r=n(2970),i=n(2968),o=n(2967),a=n(2966),s={bubble:r,category:i,choropleth:o,custom_choropleth:n(2965),custom:a,torque:a},l={bubble:n(179),category:n(178),choropleth:n(177)};e.exports={createLegendView:function createLegendView(e){var t=e.get("type"),n=s[t];if(n)return new n({model:e,placeholderTemplate:l[t]});throw new Error('Legends of type "'+t+'" are not supported')}}},function(e,t,n){var r=n(7),i=n(0),o=n(152),a=n(186),s=n(2971),l=o.extend({className:"CDB-LayerLegends js-layer-legends",events:{"click .js-toggle-layer":"_onToggleLayerCheckboxClicked"},initialize:function initialize(e){var t;this._legendViews=[],this.settingsModel=e.settingsModel,this.model.on("change:visible",this.render,this),this.model.on("change:layer_name",this.render,this),r(t=this._getLegendModels()).call(t,function(e){e.on("change:state",i.debounce(this.render,150),this),e.on("change:visible",i.debounce(this.render,150),this),this.add_related_model(e)},this),this.settingsModel.on("change",this.render,this),this.add_related_model(this.settingsModel)},render:function render(){var e=this._shouldLegendsBeVisible(),t=this._shouldLayerSelectorBeVisible();return this._shouldLayerLegendsBeVisible()?(this.$el.html(a({layerName:this.model.getName(),isLayerVisible:this._isLayerVisible(),showLegends:e,showLayerSelector:t})),this._renderLegends()):this.$el.html(""),this.trigger("render"),this},isEmpty:function isEmpty(){return""===this.$el.html()},_shouldLegendsBeVisible:function _shouldLegendsBeVisible(){return this.settingsModel.get("showLegends")&&this._isLayerVisible()},_shouldLayerLegendsBeVisible:function _shouldLayerLegendsBeVisible(){var e=this.settingsModel.get("showLegends"),t=this.model.legends.hasAnyLegend();return this._shouldLayerSelectorBeVisible()||this._isLayerVisible()&&e&&t},_shouldLayerSelectorBeVisible:function _shouldLayerSelectorBeVisible(){var e=this.settingsModel.get("layerSelectorEnabled");return this.settingsModel.get("showLayerSelector")&&e},_renderLegends:function _renderLegends(){i.each(this._getLegendModels(),this._renderLegend,this)},_renderLegend:function _renderLegend(e){var t=s.createLegendView(e);this._legendViews.push(t),this._legendsContainer().append(t.render().$el)},_legendsContainer:function _legendsContainer(){return this.$(".js-legends")},_onToggleLayerCheckboxClicked:function _onToggleLayerCheckboxClicked(e){e.target.checked?this.model.show():this.model.hide()},_getLegendViews:function _getLegendViews(){return this._legendViews||[]},_getLegendModels:function _getLegendModels(){return[this.model.legends.custom,this.model.legends.choropleth,this.model.legends.custom_choropleth,this.model.legends.category,this.model.legends.bubble,this.model.legends.torque]},_isLayerVisible:function _isLayerVisible(){return this.model.isVisible()}});e.exports=l},function(e,t,n){var r=n(1),i=n(239),o=n(9),a=n(0),s=n(152),l=n(301),u=n(187),c=n(2972),d=s.extend({className:"CDB-Legends-canvas",initialize:function initialize(e){if(!e.layersCollection)throw new Error("layersCollection is required");if(!e.settingsModel)throw new Error("settingsModel is required");this._layersCollection=e.layersCollection,this.settingsModel=e.settingsModel,this._isRendered=!1,this._initBinds(),this._layerLegendsViews=[]},_initBinds:function _initBinds(){this.listenTo(this._layersCollection,"add remove layerMoved",this._onLayersChanged),this.listenTo(this.settingsModel,"change",this._onSettingsModelChanged)},render:function render(){this.$el.html(u());var e=this._layersCollection.getLayersWithLegends();return a.each(i(e).call(e),this._renderLayerLegends,this),this._isRendered=!0,this._renderScroll(),this._renderShadows(),this._bindScroll(),this._showOrHide(),this},_renderScroll:function _renderScroll(){l.initialize(this._container(),{wheelSpeed:1,wheelPropagation:!1,swipePropagation:!0,stopPropagationOnClick:!1,minScrollbarLength:20,suppressScrollX:!0})},_renderShadows:function _renderShadows(){var e;this.$shadowTop=o("<div>").addClass("CDB-Legends-canvasShadow CDB-Legends-canvasShadow--top"),this.$shadowBottom=o("<div>").addClass("CDB-Legends-canvasShadow CDB-Legends-canvasShadow--bottom"),this.$el.append(this.$shadowTop),this.$el.append(this.$shadowBottom),a.defer(r(e=function _context(){this._showOrHideShadows()}).call(e,this))},_bindScroll:function _bindScroll(){this.$(this._container()).on("ps-y-reach-start",r(a).call(a,this._onScrollTop,this)).on("ps-y-reach-end",r(a).call(a,this._onScrollBottom,this)).on("ps-scroll-y",r(a).call(a,this._onScroll,this))},_onScrollTop:function _onScrollTop(){this.$shadowTop.removeClass("is-visible")},_onScroll:function _onScroll(){this._showOrHideShadows()},_showOrHideShadows:function _showOrHideShadows(){var e=o(this._container());if(e.length){var t=e.scrollTop(),n=e.get(0).scrollHeight-e.outerHeight();this.$shadowTop.toggleClass("is-visible",t>0),this.$shadowBottom.toggleClass("is-visible",t<n)}},_onScrollBottom:function _onScrollBottom(){this.$shadowBottom.removeClass("is-visible")},_container:function _container(){return this.el.querySelector(".js-container")},_renderLayerLegends:function _renderLayerLegends(e){var t=new c({model:e,settingsModel:this.settingsModel});this._layerLegendsViews.push(t),t.on("render",this._showOrHide,this),this.addView(t),this.$(this._container()).append(t.render().$el)},_onLayersChanged:function _onLayersChanged(e){this._isRendered&&this._hasLegends(e)&&(this._clear(),this.render())},_showOrHide:function _showOrHide(){this.$el.toggle(this._isAnyLayerLegendViewVisible())},_isAnyLayerLegendViewVisible:function _isAnyLayerLegendViewVisible(){return a.any(this._layerLegendsViews,function(e){return!e.isEmpty()})},_hasLegends:function _hasLegends(e){return!!e.legends},_clear:function _clear(){a.each(this._layerLegendsViews,function(e){e.clean()}),this._layerLegendsViews=[],this.$el.html("")},show:function show(){this.$el.show()},hide:function hide(){this.$el.hide()},clean:function clean(){s.prototype.clean.call(this),this._clear()}});e.exports=d},function(e,t,n){n(208);var r=n(0),i=n(208),o=n(3),a=n(431),s=n(1340),l=function GMapsTorqueLayerView(e,t){a.apply(this,arguments),i.GMapsTorqueLayer.call(this,this._initialAttrs(e)),this.setNativeTorqueLayer(this)};r.extend(l.prototype,a.prototype,i.GMapsTorqueLayer.prototype,s,{addToMap:function addToMap(){this.setMap(this.gmapsMap)},remove:function remove(){this.setMap(null)},onAdd:function onAdd(){i.GMapsTorqueLayer.prototype.onAdd.apply(this)},onTilesLoaded:function onTilesLoaded(){o.Events.trigger.call(this,"load")},onTilesLoading:function onTilesLoading(){o.Events.trigger.call(this,"loading")}}),e.exports=l},function(e,t,n){"use strict";var r=n(34),i=n(272).findIndex,o=n(453),a=!0,s=n(210)("findIndex");"findIndex"in[]&&Array(1).findIndex(function(){a=!1}),r({target:"Array",proto:!0,forced:a||!s},{findIndex:function findIndex(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},function(e,t,n){n(2975);var r=n(113);e.exports=r("Array").findIndex},function(e,t,n){var r=n(2976),i=Array.prototype;e.exports=function(e){var t=e.findIndex;return e===i||e instanceof Array&&t===i.findIndex?r:t}},function(e,t,n){var r=n(2977);e.exports=r},function(e,t,n){n(436),n(209),n(29),n(16),n(51),n(25);var r=n(736),i=n(55),o=n(5),a=n(37),s=n(0),l=n(431),u=n(1360),c=n(435),d=n(1338),f=n(1361),h=n(1384),p="progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)",m="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function setImageOpacityIE8(e,t){var n=Math.round(100*t);e.style.filter=n>=99?p:"alpha(opacity="+t+");"}var g=function GMapsCartoDBLayerGroupView(e,t){var n=this,r=[],i=t.nativeMap;s.bindAll(this,"featureOut","featureOver","featureClick");var u=s.clone(e.attributes);u.map=i;var c,h=u.featureOver,p=u.featureOut,m=u.featureClick,g=-1;u.featureOver=function(e,t,i,o,s){r[s]||n.trigger("layerenter",e,t,i,o,s),r[s]=1,h&&h.apply(this,arguments),n.featureOver&&n.featureOver.apply(this,arguments),e.timeStamp===c&&clearTimeout(g),g=a(function(){n.trigger("mouseover",e,t,i,o,s),n.trigger("layermouseover",e,t,i,o,s)},0),c=e.timeStamp},u.featureOut=function(e,t){r[t]&&n.trigger("layermouseout",t),r[t]=0,s.any(r)||n.trigger("mouseout"),p&&p.apply(this,arguments),n.featureOut&&n.featureOut.apply(this,arguments)},u.featureClick=s.debounce(function(){m&&m.apply(this,arguments),n.featureClick&&n.featureClick.apply(u,arguments)},10),this.tiles=0,this.options={tiles:t.tiles,scheme:t.scheme||"xyz",blankImage:t.blankImage||"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},this._id=function generateId(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}(),this.interactive=!0,this.tileSize=new google.maps.Size(256,256),this.cache={},s.extend(this.options,u),l.apply(this,arguments),this.projector=new d(o(u)),f.apply(this,arguments)};g.prototype.interactionClass=u.Interactive,s.extend(g.prototype,f.prototype,l.prototype,{addToMap:function addToMap(){this.gmapsMap.overlayMapTypes.setAt(0,this)},remove:function remove(){var e=this._getOverlayIndex();e>=0&&this.gmapsMap.overlayMapTypes.removeAt(e),this._clearInteraction(),this.finishLoading&&this.finishLoading()},reload:function reload(){this.model.invalidate()},featureOver:function featureOver(e,t,n,r,i){var o=this.model.getLayerInLayerGroupAt(i);o&&this.trigger("featureOver",{layer:o,layerIndex:i,latlng:[t.lat(),t.lng()],position:{x:n.x,y:n.y},feature:r})},featureOut:function featureOut(e,t){var n=this.model.getLayerInLayerGroupAt(t);n&&this.trigger("featureOut",{layer:n,layerIndex:t})},featureClick:function featureClick(e,t,n,r,i){var o=this.model.getLayerInLayerGroupAt(i);o&&this.trigger("featureClick",{layer:o,layerIndex:i,latlng:[t.lat(),t.lng()],position:{x:n.x,y:n.y},feature:r})},error:function error(e){this.model&&(this.model.trigger("error",e?e.errors:"unknown error"),this.model.trigger("tileError",e?e.errors:"unknown error"))},ok:function ok(e){this.model.trigger("tileOk")},tilesOk:function tilesOk(e){this.model.trigger("tileOk")},loading:function loading(){this.trigger("loading")},finishLoading:function finishLoading(){this.trigger("load")},setOpacity:function setOpacity(e){if(isNaN(e)||e>1||e<0)throw new Error(e+" is not a valid value, should be in [0, 1] range");for(var t in this.opacity=this.options.opacity=e,this.cache){var n=this.cache[t];n.style.opacity=e,setImageOpacityIE8(n,e)}},getTile:function getTile(e,t,n){var r=this,i="ActiveXObject"in window&&!document.addEventListener;if(this.options.added=!0,!this.model.hasTileURLTemplates()){var o=t+"/"+e.x+"/"+e.y,a=this.cache[o]=new Image(256,256);return a.src=m,a.setAttribute("gTileKey",o),a.style.opacity=this.options.opacity,a}var s=this._getTile(e,t,n);i&&setImageOpacityIE8(s,this.options.opacity),s.style.opacity=this.options.opacity,0===this.tiles&&this.loading&&this.loading(),this.tiles++;var l=h.metric("cartodb-js.tile.png.load.time").start(),u=function finished(){l.end(),r.tiles--,0===r.tiles&&r.finishLoading&&r.finishLoading()};return s.onload=u,s.onerror=function(){h.metric("cartodb-js.tile.png.error").inc(),r.model.addError({type:c.WINDSHAFT_ERRORS.TILE}),u()},s},_getTile:function _getTile(e,t,n){var r=t+"/"+e.x+"/"+e.y;if(!this.cache[r]){var i=this.cache[r]=new Image(256,256);this.cache[r].src=this._getTileUrl(e,t),this.cache[r].setAttribute("gTileKey",r),this.cache[r].onerror=function(){i.style.display="none"}}return this.cache[r]},_getTileUrl:function _getTileUrl(e,t){var n=Math.pow(2,t),r="tms"===this.options.scheme?n-1-e.y:e.y,o=e.x%n;return o=o<0?e.x%n+n:o,r<0?this.options.blankImage:this.options.tiles[i(o+r,10)%this.options.tiles.length].replace(/\{z\}/g,t).replace(/\{x\}/g,o).replace(/\{y\}/g,r)},_reload:function _reload(){var e;e=this.model.hasTileURLTemplates()?[this.model.getTileURLTemplatesWithSubdomains()[0]]:[m],this.options.tiles=e,this.tiles=0,this.cache={},this._reloadInteraction(),this._refreshView()},_refreshView:function _refreshView(){var e=this.gmapsMap.overlayMapTypes,t=this._getOverlayIndex();t>=0&&e.setAt(t,e.getAt(t))},_checkLayer:function _checkLayer(){if(!this.options.added)throw new Error("the layer is not still added to the map")},_getOverlayIndex:function _getOverlayIndex(){var e=this.gmapsMap.overlayMapTypes.getArray();return r(s).call(s,e,function(e){return e&&e._id===this._id},this)},_newPoint:function _newPoint(e,t){return new google.maps.Point(e,t)},_manageOffEvents:function _manageOffEvents(e,t){if(this.options.featureOut)return this.options.featureOut&&this.options.featureOut(t.e,t.layer)},_manageOnEvents:function _manageOnEvents(e,t){var n=t.pixel,r=this.projector.pixelToLatLng(n);switch(t.e.type.toLowerCase()){case"mousemove":if(this.options.featureOver)return this.options.featureOver(t.e,r,n,t.data,t.layer);break;case"click":case"touchend":case"touchmove":case"mspointerup":case"pointerup":case"pointermove":this.options.featureClick&&this.options.featureClick(t.e,r,n,t.data,t.layer)}}}),e.exports=g},function(e,t,n){var r=n(0),i=n(431),o=function GMapsPlainLayerView(e,t){this.color=e.get("color"),i.apply(this,arguments)};r.extend(o.prototype,i.prototype,{_update:function _update(){this.color=this.model.get("color"),this.refreshView()},getTile:function getTile(e,t,n){var r=document.createElement("div");return r.style.width=this.tileSize.x,r.style.height=this.tileSize.y,r["background-color"]=this.color,r},tileSize:new google.maps.Size(256,256),maxZoom:100,minZoom:0,name:"plain layer",alt:"plain layer"}),e.exports=o},function(e,t,n){n(24),n(16),n(25);var r=n(0),i=n(431),o=function GMapsTiledLayerView(e,t){i.apply(this,arguments),this.tileSize=new google.maps.Size(256,256),this.opacity=1,this.isPng=!0,this.maxZoom=22,this.minZoom=0,this.name="cartodb tiled layer",google.maps.ImageMapType.call(this,this)};r.extend(o.prototype,i.prototype,google.maps.ImageMapType.prototype,{getTileUrl:function getTileUrl(e,t){var n=e.y,r=1<<t;if(n<0||n>=r)return null;var i=e.x;return(i<0||i>=r)&&(i=(i%r+r)%r),this.model.get("tms")&&(n=r-n-1),this.model.get("urlTemplate").replace("{x}",i).replace("{y}",n).replace("{z}",t)}}),e.exports=o},function(e,t,n){var r=n(0),i=n(431),o={roadmap:google.maps.MapTypeId.ROADMAP,gray_roadmap:google.maps.MapTypeId.ROADMAP,dark_roadmap:google.maps.MapTypeId.ROADMAP,hybrid:google.maps.MapTypeId.HYBRID,satellite:google.maps.MapTypeId.SATELLITE,terrain:google.maps.MapTypeId.TERRAIN},a=function GMapsBaseLayerView(e,t){i.apply(this,arguments)};r.extend(a.prototype,i.prototype,{addToMap:function addToMap(){this._updateNativeMapOptions()},remove:function remove(){},_onModelUpdated:function _onModelUpdated(){this._updateNativeMapOptions()},_updateNativeMapOptions:function _updateNativeMapOptions(){var e={};try{e=JSON.parse(this.model.get("style"))}catch(e){}this.gmapsMap.setOptions({mapTypeId:o[this.model.get("baseType")],styles:e})}}),e.exports=a},function(e,t,n){var r=n(193),i=function GMapsLayerViewFactory(){},o={};if("undefined"!=typeof google&&void 0!==google.maps){var a=n(2982),s=n(2981),l=n(1362),u=n(2980),c=n(2979);o={tiled:s,wms:l,plain:u,gmapsbase:a,layergroup:c,namedmap:c,torque:n(2974)}}i.prototype._constructors=o,i.prototype.createLayerView=function(e,t){var n=e.get("type").toLowerCase(),i=this._constructors[n];if(i)try{return new i(e,t)}catch(e){throw r.error("Error creating an instance of layer view for '"+n+"' layer -> "+e.message),e}else r.error("Error creating an instance of layer view for '"+n+"' layer. Type is not supported")},e.exports=i},function(e,t,n){var r=n(1),i=n(5),o=n(1383),a=n(1338),s=n(2983),l=o.extend({initialize:function initialize(){this._isReady=!1,o.prototype.initialize.apply(this,arguments)},_createNativeMap:function _createNativeMap(){var e,t,n=this,o=i(this).get("center");this._gmapsMap=new google.maps.Map(this.el,{center:new google.maps.LatLng(o[0],o[1]),zoom:i(this).get("zoom"),minZoom:i(this).get("minZoom"),maxZoom:i(this).get("maxZoom"),disableDefaultUI:!0,scrollwheel:i(this).get("scrollwheel"),draggable:i(this).get("drag"),disableDoubleClickZoom:!i(this).get("drag"),mapTypeControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,backgroundColor:"white",tilt:0}),r(e=i(this)).call(e,"change:maxZoom",function(){n._gmapsMap.setOptions({maxZoom:i(n).get("maxZoom")})},this),r(t=i(this)).call(t,"change:minZoom",function(){n._gmapsMap.setOptions({minZoom:i(n).get("minZoom")})},this),google.maps.event.addListener(this._gmapsMap,"center_changed",function(){var e=n._gmapsMap.getCenter();n._setModelProperty({center:[e.lat(),e.lng()]})}),google.maps.event.addListener(this._gmapsMap,"zoom_changed",function(){n._setModelProperty({zoom:n._gmapsMap.getZoom()});var e=n._gmapsMap.getCenter();i(n).trigger("moveend",[e.lat(),e.lng()])}),google.maps.event.addListener(this._gmapsMap,"click",function(e){n.trigger("click",e,[e.latLng.lat(),e.latLng.lng()])}),google.maps.event.addListener(this._gmapsMap,"dragend",function(e){var t=n._gmapsMap.getCenter();n.trigger("dragend",[t.lat(),t.lng()]),i(n).trigger("moveend",[t.lat(),t.lng()])}),google.maps.event.addListener(this._gmapsMap,"dblclick",function(e){n.trigger("dblclick",e)}),google.maps.event.addListener(this._gmapsMap,"bounds_changed",function(e){i(n).setMapViewSize(n.getSize())}),google.maps.event.addListenerOnce(this._gmapsMap,"idle",function(e){n._isReady=!0}),this.projector=new a(this._gmapsMap)},clean:function clean(){google.maps.event.clearInstanceListeners(window),google.maps.event.clearInstanceListeners(document),o.prototype.clean.call(this)},onReady:function onReady(e){this._isReady?e():google.maps.event.addListenerOnce(this._gmapsMap,"idle",e)},_getLayerViewFactory:function _getLayerViewFactory(){return this._layerViewFactory=this._layerViewFactory||new s,this._layerViewFactory},_setKeyboard:function _setKeyboard(e,t){this._gmapsMap.setOptions({keyboardShortcuts:t})},_setScrollWheel:function _setScrollWheel(e,t){this._gmapsMap.setOptions({scrollwheel:t})},_setZoom:function _setZoom(e){e=e||0,this._gmapsMap.setZoom(e)},_setCenter:function _setCenter(e){var t=new google.maps.LatLng(e[0],e[1]);this._gmapsMap.setCenter(t)},_setView:function _setView(){i(this).hasChanged("zoom")&&this._setZoom(i(this).get("zoom")),i(this).hasChanged("center")&&this._setCenter(i(this).get("center"))},_getNativeMap:function _getNativeMap(){return this._gmapsMap},_addLayerToMap:function _addLayerToMap(e){e.addToMap()},getSize:function getSize(){return{x:this.$el.width(),y:this.$el.height()}},panBy:function panBy(e){var t=i(this).get("center"),n=this.latLngToContainerPoint(t);e.x+=n.x,e.y+=n.y;var r=this.containerPointToLatLng(e);i(this).setCenter([r.lat,r.lng])},getBounds:function getBounds(){if(this._isReady){var e=this._gmapsMap.getBounds(),t=e.getSouthWest(),n=e.getNorthEast();return[[t.lat(),t.lng()],[n.lat(),n.lng()]]}return[[0,0],[0,0]]},setCursor:function setCursor(e){this._gmapsMap.setOptions({draggableCursor:e})},getNativeMap:function getNativeMap(){return this._gmapsMap},invalidateSize:function invalidateSize(){google.maps.event.trigger(this._gmapsMap,"resize"),i(this).setMapViewSize(this.getSize())},addMarker:function addMarker(e){e.addToMap(this.getNativeMap())},removeMarker:function removeMarker(e){e.removeFromMap(this.getNativeMap())},hasMarker:function hasMarker(e){return e.isAddedToMap(this.getNativeMap())},addPath:function addPath(e){e.addToMap(this.getNativeMap())},removePath:function removePath(e){e.removeFromMap(this.getNativeMap())},latLngToContainerPoint:function latLngToContainerPoint(e){var t=this.projector.latLngToPixel(new google.maps.LatLng(e[0],e[1]));return{x:t.x,y:t.y}},containerPointToLatLng:function containerPointToLatLng(e){var t=this.projector.pixelToLatLng(new google.maps.Point(e.x,e.y));return{lat:t.lat(),lng:t.lng()}}});e.exports=l},function(e,t){ol.TileLoader=function(e,t){this._tileSize=e,this._tiles={},this._tilesLoading={},this._tilesToLoad=0,this._updateTiles=this._updateTiles.bind(this),this._tileGrid=ol.tilegrid.createXYZ({maxZoom:t,tileSize:e})},ol.TileLoader.prototype._initTileLoader=function(e){this._map=e,this._view=e.getView(),this._centerChangedId=this._view.on("change:center",function(e){this._updateTiles()},this),this._postcomposeKey=void 0,this._resolutionChangedId=this._view.on("change:resolution",function(e){this._currentResolution=this._view.getResolution(),this._postcomposeKey||(this.fire("mapZoomStart"),this._postcomposeKey=this._map.on("postcompose",function(e){e.frameState.viewState.resolution===this._currentResolution&&(this._updateTiles(),this._map.unByKey(this._postcomposeKey),this._postcomposeKey=void 0,this.fire("mapZoomEnd"))},this))},this),this._updateTiles()},ol.TileLoader.prototype._removeTileLoader=function(){this._view.unByKey(this._centerChangedId),this._view.unByKey(this._resolutionChangedId),this._removeTiles()},ol.TileLoader.prototype._removeTiles=function(){for(var e in this._tiles)this._removeTile(e)},ol.TileLoader.prototype._reloadTiles=function(){this._removeTiles(),this._updateTiles()},ol.TileLoader.prototype._updateTiles=function(){if(this._map){var e=this._tileGrid.getZForResolution(this._view.getResolution()),t=this._view.calculateExtent(this._map.getSize()),n=this._requestTilesForExtentAndZ(t,e);this._removeOtherTiles(n)}},ol.TileLoader.prototype._removeOtherTiles=function(e){var t,n,r,i,o=this._tileGrid.getZForResolution(this._view.getResolution());for(i in this._tiles)this._tiles.hasOwnProperty(i)&&(t=i.split(":"),n=parseInt(t[0],10),r=parseInt(t[1],10),(parseInt(t[2],10)!==o||n<e.minX||n>e.maxX||-r-1<e.minY||-r-1>e.maxY)&&this._removeTile(i))},ol.TileLoader.prototype._removeTile=function(e){this.fire("tileRemoved",this._tiles[e]),delete this._tiles[e],delete this._tilesLoading[e]},ol.TileLoader.prototype._tileKey=function(e){return e.x+":"+e.y+":"+e.zoom},ol.TileLoader.prototype._tileShouldBeLoaded=function(e){var t=this._tileKey(e);return!(t in this._tiles||t in this._tilesLoading)},ol.TileLoader.prototype._removeFromTilesLoading=function(e){this._tilesToLoad--;var t=this._tileKey(e);delete this._tilesLoading[t],0===this._tilesToLoad&&this.fire("tilesLoaded")},ol.TileLoader.prototype._tileLoaded=function(e,t){var n=this._tileKey(e);this._tiles[n]=t},ol.TileLoader.prototype.getTilePos=function(e){var t=this._tileGrid.getZForResolution(this._view.getResolution()),n=this._tileGrid.getTileCoordExtent([t,e.x,-e.y-1]),r=this._map.getPixelFromCoordinate([n[0],n[3]]);return{x:r[0],y:r[1]}},ol.TileLoader.prototype._requestTilesForExtentAndZ=function(e,t){var n=[],r=[];this._tileGrid.forEachTileCoord(e,t,function(e){r.push(e);var t={x:e[1],y:-e[2]-1,zoom:e[0]};this._tileShouldBeLoaded(t)&&n.push(t)}.bind(this));var i=n.length;if(i>0){this._tilesToLoad+=i;for(var o=0;o<i;o++){var a=n[o],s=this._tileKey(a);this._tilesLoading[s]=a,this.fire("tileAdded",a)}this.fire("tilesLoading")}return{minX:r[0][1],maxX:r[r.length-1][1],minY:r[0][2],maxY:r[r.length-1][2]}},e.exports=ol.TileLoader},function(e,t,n){n(2985),ol.CanvasLayer=function(e){this.root_=document.createElement("div"),this.root_.setAttribute("class","ol-heatmap-layer"),this.options={subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,tileLoader:!1,tileSize:256},e=e||{},torque.extend(this.options,e),ol.TileLoader.call(this,this.options.tileSize,this.options.maxZoom),this.render=this.render.bind(this),this._canvas=this._createCanvas(),this.root_.appendChild(this._canvas),this._ctx=this._canvas.getContext("2d"),this.currentAnimationFrame=-1,this.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},this.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){clearTimeout(e)},e.map&&this.setMap(e.map)},ol.inherits(ol.CanvasLayer,ol.TileLoader),ol.CanvasLayer.prototype.setMap=function(e){(this._map&&(this._map.unByKey(this.pointdragKey_),this._map.unByKey(this.sizeChangedKey_),this._map.unByKey(this.moveendKey_),this._map.getView().unByKey(this.centerChanged_)),this._map=e,e)&&(this._map.getViewport().getElementsByClassName("ol-overlaycontainer")[0].appendChild(this.root_),this.pointdragKey_=e.on("pointerdrag",this._render,this),this.moveendKey_=e.on("moveend",this._render,this),this.centerChanged_=e.getView().on("change:center",this._render,this),this.sizeChangedKey_=e.on("change:size",this._reset,this),this.options.tileLoader&&ol.TileLoader.prototype._initTileLoader.call(this,e),this._reset())},ol.CanvasLayer.prototype._createCanvas=function(){var e;return(e=document.createElement("canvas")).style.position="absolute",e.style.top=0,e.style.left=0,e.style.pointerEvents="none",e.style.zIndex=this.options.zIndex||0,e},ol.CanvasLayer.prototype._reset=function(){this._resize()},ol.CanvasLayer.prototype._resize=function(){var e=this._map.getSize(),t=e[0],n=e[1],r=this._canvas.width,i=this._canvas.height;r===t&&i===n||(this._canvas.width=t,this._canvas.height=n,this._canvas.style.width=t+"px",this._canvas.style.height=n+"px",this.root_.style.width=t+"px",this.root_.style.height=n+"px",this._render())},ol.CanvasLayer.prototype._render=function(){this.currentAnimationFrame>=0&&this.cancelAnimationFrame.call(window,this.currentAnimationFrame),this.currentAnimationFrame=this.requestAnimationFrame.call(window,this.render)},ol.CanvasLayer.prototype.getCanvas=function(){return this._canvas},ol.CanvasLayer.prototype.getAttribution=function(){return this.options.attribution},ol.CanvasLayer.prototype.draw=function(){return this._render()},ol.CanvasLayer.prototype.redraw=function(e){e?this.render():this._render()},e.exports=ol.CanvasLayer},function(e,t,n){(function(t){var r=t.carto||n(299),i=n(208);n(2986),ol.TorqueLayer=function(e){var t=this;if(!i.isBrowserSupported())throw new Error("browser is not supported by torque");e.tileLoader=!0,this.keys=[0],Object.defineProperty(this,"key",{get:function(){return this.getKey()}}),this.prevRenderedKey=0,e.cartocss&&i.extend(e,i.common.TorqueLayer.optionsFromCartoCSS(e.cartocss)),e.resolution=e.resolution||2,e.steps=e.steps||100,e.visible=void 0===e.visible||e.visible,this.hidden=!e.visible,this.animator=new i.Animator(function(e){var n=0|e;t.getKey()!==n&&t.setKey(n,{direct:!0})},i.extend(i.clone(e),{onPause:function(){t.fire("pause")},onStop:function(){t.fire("stop")},onStart:function(){t.fire("play")},onStepsRange:function(){t.fire("change:stepsRange",t.animator.stepsRange())}})),this.play=this.animator.start.bind(this.animator),this.stop=this.animator.stop.bind(this.animator),this.pause=this.animator.pause.bind(this.animator),this.toggle=this.animator.toggle.bind(this.animator),this.setDuration=this.animator.duration.bind(this.animator),this.isRunning=this.animator.isRunning.bind(this.animator),ol.CanvasLayer.call(this,e),this.options.renderer=this.options.renderer||"point",this.options.provider=this.options.provider||"windshaft",this.options.tileJSON&&(this.options.provider="tileJSON"),this.provider=new this.providers[this.options.provider](e),this.renderer=new this.renderers[this.options.renderer](this.getCanvas(),e),e.ready=function(){t.fire("change:bounds",{bounds:t.provider.getBounds()}),t.animator.steps(t.provider.getSteps()),t.animator.rescale(),t.fire("change:steps",{steps:t.provider.getSteps()}),t.setKeys(t.getKeys())},this.renderer.on("allIconsLoaded",this.render.bind(this)),this.on("tileAdded",function(e){this.provider.getTileData(e,e.zoom,function(n){t._removeFromTilesLoading(e),e.zoom===t._tileGrid.getZForResolution(t._view.getResolution())&&(t._tileLoaded(e,n),t.fire("tileLoaded"),n&&t.redraw())})},this),this.on("mapZoomStart",function(){this.getCanvas().style.display="none",this._pauseOnZoom()},this),this.on("mapZoomEnd",function(){this.getCanvas().style.display="block",this._resumeOnZoom()},this)},ol.TorqueLayer.prototype=i.extend({},ol.CanvasLayer.prototype,i.Event,{providers:{sql_api:i.providers.json,url_template:i.providers.JsonArray,windshaft:i.providers.windshaft,tileJSON:i.providers.tileJSON},renderers:{point:i.renderer.Point,pixel:i.renderer.Rectangle},onAdd:function(e){ol.CanvasLayer.prototype.setMap.call(this,e)},onRemove:function(e){this.fire("remove"),this._removeTileLoader()},_pauseOnZoom:function(){this.wasRunning=this.isRunning(),this.wasRunning&&this.pause()},_resumeOnZoom:function(){this.wasRunning&&this.play()},hide:function(){return this.hidden?this:(this.pause(),this.clear(),this.hidden=!0,this)},show:function(){return this.hidden?(this.hidden=!1,this.play(),1===this.options.steps&&this.redraw(),this):this},setSQL:function(e){if(this.provider.options.named_map)throw new Error("SQL queries on named maps are read-only");if(!this.provider||!this.provider.setSQL)throw new Error("this provider does not support SQL");return this.provider.setSQL(e),this._reloadTiles(),this},setBlendMode:function(e){this.renderer.setBlendMode(e),this.redraw()},setSteps:function(e){this.provider.setSteps(e),this._reloadTiles()},setColumn:function(e,t){this.provider.setColumn(e,t),this._reloadTiles()},getTimeBounds:function(){return this.provider&&this.provider.getKeySpan()},clear:function(){var e=this.getCanvas();e.width=e.width},render:function(){if(!this.hidden){var e,t,n,r=this.getCanvas();this.renderer.clearCanvas();var i=r.getContext("2d");for(e in this._tiles)(t=this._tiles[e])&&(n=this.getTilePos(t.coord),i.setTransform(1,0,0,1,n.x,n.y),this.renderer.renderTile(t,this.keys));this.renderer.applyFilters()}},setKey:function(e,t){this.setKeys([e],t)},getKeys:function(){return this.keys},setKeys:function(e,t){this.keys=e,this.animator.step(this.getKey()),this.redraw(t&&t.direct),this.fire("change:time",{time:this.getTime(),step:this.getKey(),start:this.getKey(),end:this.getLastKey()})},getKey:function(){return this.keys[0]},getLastKey:function(){return this.keys[this.keys.length-1]},setStep:function(e){if(void 0===e||void 0!==e.length)throw new Error("setTime only accept scalars");this.setKey(e)},renderRange:function(e,t){this.pause();for(var n=[],r=e;r<=t;r++)n.push(r);this.setKeys(n)},resetRenderRange:function(){this.stop(),this.play()},stepToTime:function(e){var t=this.provider.getKeySpan(),n=t.start+(t.end-t.start)*(e/this.provider.getSteps());return new Date(n)},timeToStep:function(e){if("Date"==typeof e&&(e=e.getTime()),!this.provider)return 0;var t=this.provider.getKeySpan();return this.provider.getSteps()*(e-t.start)/(t.end-t.start)},getStep:function(){return this.getKey()},getTime:function(){return this.stepToTime(this.getKey())},getTimeSpan:function(){return this.provider.getKeySpan()},setCartoCSS:function(e){if(this.provider.options.named_map)throw new Error("CartoCSS style on named maps is read-only");if(!this.renderer)throw new Error("renderer is not valid");var t=(new r.RendererJS).render(e);this.renderer.setShader(t);var n=i.common.TorqueLayer.optionsFromLayer(t.findLayer({name:"Map"}));return this.provider.setCartoCSS&&this.provider.setCartoCSS(e),this.provider.setOptions(n)&&this._reloadTiles(),i.extend(this.options,n),n.animationDuration&&this.animator.duration(n.animationDuration),this.redraw(),this},getActivePointsBBox:function(e){var t=[];for(var n in this._tiles){var r=this._tiles[n];t=t.concat(this.renderer.getActivePointsBBox(r,e))}return t},getValues:function(e){var t,n,r=[];for(t in e=void 0===e?this.getKey():e,this._tiles)n=this._tiles[t],this.renderer.getValues(n,e,r);return r},getValueForPos:function(e,t,n){n=void 0===n?this.getKey():n;var r,i,o,a,s,l=null;for(r in this._tiles)if(i=this._tiles[r],a=e-(o=this.getTilePos(i.coord)).x,s=t-o.y,a>=0&&s>=0&&a<this.renderer.TILE_SIZE&&s<=this.renderer.TILE_SIZE&&(l=this.renderer.getValueFor(i,n,a,s)),null!==l)return l;return null},getValueForBBox:function(e,t,n,r){var i=e+n,o=t+r,a=e,s=0;for(_y=t;_y<o;_y+=this.options.resolution)for(a=e;a<i;a+=this.options.resolution){var l=this.getValueForPos(a,_y);if(l){var u=l.bbox,c=this._map.latLngToContainerPoint([u[1].lat,u[1].lon]);c.x<i&&c.y<o&&(s+=l.value)}}return s},pointCount:function(e){var t,n;e=void 0===e?this.key:e;var r=0;for(t in this._tiles)(n=this._tiles[t])&&(r+=n.timeCount[e]);return r},invalidate:function(){this.provider.reload()},setStepsRange:function(e,t){this.animator.stepsRange(e,t)},removeStepsRange:function(){this.animator.removeCustomStepsRange()},getStepsRange:function(){return this.animator.stepsRange()}}),e.exports=ol.TorqueLayer}).call(this,n(48))},function(e,t,n){"undefined"!=typeof ol&&n(2987)},function(e,t){function CanvasTileLayer(e,t){this.tileSize=new google.maps.Size(256,256),this.maxZoom=19,this.name="Tile #s",this.alt="Canvas tile layer",this.tiles={},this.canvas_setup=e,this.render=t,t||(this.render=e)}CanvasTileLayer.prototype.create_tile_canvas=function(e,t,n){var r=n.createElement("canvas"),i=n.createElement("canvas");r.style.border=i.style.border="none",r.style.margin=i.style.margin="0",r.style.padding=i.style.padding="0";var o=r.getContext("2d");o.width=r.width=this.tileSize.width,o.height=r.height=this.tileSize.height;var a=i.getContext("2d");i.width=a.width=this.tileSize.width,i.height=a.height=this.tileSize.height;var s=e.x+"_"+e.y+"_"+t;return r.setAttribute("id",s),i.setAttribute("id",s),s in this.tiles&&delete this.tiles[s],this.tiles[s]={canvas:r,ctx:o,hit_canvas:i,hit_ctx:a,coord:e,zoom:t,primitives:null},this.canvas_setup&&this.canvas_setup(this.tiles[s],e,t),r},CanvasTileLayer.prototype.each=function(e){for(var t in this.tiles){e(this.tiles[t])}},CanvasTileLayer.prototype.recreate=function(){for(var e in this.tiles){var t=this.tiles[e];this.canvas_setup(t,t.coord,t.zoom)}},CanvasTileLayer.prototype.redraw_tile=function(e){this.render(e,e.coord,e.zoom)},CanvasTileLayer.prototype.redraw=function(){for(var e in this.tiles){var t=this.tiles[e];this.render(t,t.coord,t.zoom)}},CanvasTileLayer.prototype.getTile=function(e,t,n){return this.create_tile_canvas(e,t,n)},CanvasTileLayer.prototype.releaseTile=function(e){var t=e.getAttribute("id");delete this.tiles[t]},e.exports=CanvasTileLayer},function(e,t){function CanvasLayer(e){this.isAdded_=!1,this.isAnimated_=!1,this.paneName_=CanvasLayer.DEFAULT_PANE_NAME_,this.updateHandler_=null,this.resizeHandler_=null,this.topLeft_=null,this.centerListener_=null,this.resizeListener_=null,this.needsResize_=!0,this.requestAnimationFrameId_=null;var t=document.createElement("canvas");function simpleBindShim(e,t){return function(){t.apply(e)}}t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.pointerEvents="none",this.canvas=t,this.repositionFunction_=simpleBindShim(this,this.repositionCanvas_),this.resizeFunction_=simpleBindShim(this,this.resize_),this.requestUpdateFunction_=simpleBindShim(this,this.update_),e&&this.setOptions(e)}CanvasLayer.prototype=new google.maps.OverlayView,CanvasLayer.DEFAULT_PANE_NAME_="overlayLayer",CanvasLayer.CSS_TRANSFORM_=function(){for(var e=document.createElement("div"),t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<t.length;n++){var r=t[n];if(void 0!==e.style[r])return r}return t[0]}(),CanvasLayer.prototype.requestAnimFrame_=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},CanvasLayer.prototype.cancelAnimFrame_=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){},CanvasLayer.prototype.setOptions=function(e){void 0!==e.animate&&this.setAnimate(e.animate),void 0!==e.paneName&&this.setPane(e.paneName),void 0!==e.updateHandler&&this.setUpdateHandler(e.updateHandler),void 0!==e.resizeHandler&&this.setResizeHandler(e.resizeHandler),e.readyHandler&&(this.readyHandler=e.readyHandler)},CanvasLayer.prototype.setAnimate=function(e){this.isAnimated_=!!e,this.isAnimated_&&this.scheduleUpdate()},CanvasLayer.prototype.isAnimated=function(){return this.isAnimated_},CanvasLayer.prototype.setPaneName=function(e){this.paneName_=e,this.setPane_()},CanvasLayer.prototype.setOpacity=function(e){this.canvas.style.opacity=e},CanvasLayer.prototype.getOpacity=function(){return this.canvas.style.opacity},CanvasLayer.prototype.getPaneName=function(){return this.paneName_},CanvasLayer.prototype.setPane_=function(){if(this.isAdded_){var e=this.getPanes();if(!e[this.paneName_])throw new Error('"'+this.paneName_+'" is not a valid MapPane name.');e[this.paneName_].appendChild(this.canvas)}},CanvasLayer.prototype.setResizeHandler=function(e){this.resizeHandler_=e},CanvasLayer.prototype.setUpdateHandler=function(e){this.updateHandler_=e},CanvasLayer.prototype.onAdd=function(){this.isAdded_||(this.isAdded_=!0,this.setPane_(),this.resizeListener_=google.maps.event.addListener(this.getMap(),"resize",this.resizeFunction_),this.centerListener_=google.maps.event.addListener(this.getMap(),"center_changed",this.repositionFunction_),this.resize_(),this.repositionCanvas_(),this.readyHandler&&this.readyHandler())},CanvasLayer.prototype.onRemove=function(){this.isAdded_&&(this.isAdded_=!1,this.topLeft_=null,this.canvas.parentElement.removeChild(this.canvas),this.centerListener_&&(google.maps.event.removeListener(this.centerListener_),this.centerListener_=null),this.resizeListener_&&(google.maps.event.removeListener(this.resizeListener_),this.resizeListener_=null),this.requestAnimationFrameId_&&(this.cancelAnimFrame_.call(window,this.requestAnimationFrameId_),this.requestAnimationFrameId_=null))},CanvasLayer.prototype.resize_=function(){if(this.isAdded_){var e=this.getMap(),t=e.getDiv().offsetWidth,n=e.getDiv().offsetHeight,r=this.canvas.width,i=this.canvas.height;r===t&&i===n||(this.canvas.width=t,this.canvas.height=n,this.canvas.style.width=t+"px",this.canvas.style.height=n+"px",this.needsResize_=!0,this.scheduleUpdate())}},CanvasLayer.prototype.draw=function(){this.repositionCanvas_()},CanvasLayer.prototype.repositionCanvas_=function(){var e=this.getMap().getBounds();this.topLeft_=new google.maps.LatLng(e.getNorthEast().lat(),e.getSouthWest().lng());var t=this.getProjection().fromLatLngToDivPixel(this.topLeft_),n=256*(1<<this.getMap().getZoom());Math.abs(t.x)>n&&(t.x-=n),this.canvas.style[CanvasLayer.CSS_TRANSFORM_]="translate("+Math.round(t.x)+"px,"+Math.round(t.y)+"px)",this.scheduleUpdate()},CanvasLayer.prototype.update_=function(){this.requestAnimationFrameId_=null,this.isAdded_&&(this.isAnimated_&&this.scheduleUpdate(),this.needsResize_&&this.resizeHandler_&&(this.needsResize_=!1,this.resizeHandler_()),this.updateHandler_&&this.updateHandler_())},CanvasLayer.prototype.getTopLeft=function(){return this.topLeft_},CanvasLayer.prototype.scheduleUpdate=function(){this.isAdded_&&!this.requestAnimationFrameId_&&(this.requestAnimationFrameId_=this.requestAnimFrame_.call(window,this.requestUpdateFunction_))},e.exports=CanvasLayer},function(e,t,n){(function(t){var r=t.carto||n(299),i=n(208),o=n(2990),a=n(2989),s=n(1341);function GMapsTorqueLayer(e){var t=this;if(!i.isBrowserSupported())throw new Error("browser is not supported by torque");this.keys=[0],Object.defineProperty(this,"key",{get:function(){return this.getKey()}}),this.shader=null,this.ready=!1,this.options=i.extend({},e),this.options=i.extend({provider:"windshaft",renderer:"point",resolution:2,steps:100,visible:!0},this.options),e.cartocss&&i.extend(this.options,i.common.TorqueLayer.optionsFromCartoCSS(e.cartocss)),e.tileJSON&&(this.options.provider="tileJSON"),this.hidden=!this.options.visible,this.showLimitErrors=e.showLimitErrors,this.animator=new i.Animator(function(e){var n=0|e;t.getKey()!==n&&t.setKey(n)},i.extend(i.clone(this.options),{onPause:function(){t.fire("pause")},onStop:function(){t.fire("stop")},onStart:function(){t.fire("play")},onStepsRange:function(){t.fire("change:stepsRange",t.animator.stepsRange())}})),this.play=this.animator.start.bind(this.animator),this.stop=this.animator.stop.bind(this.animator),this.pause=this.animator.pause.bind(this.animator),this.toggle=this.animator.toggle.bind(this.animator),this.setDuration=this.animator.duration.bind(this.animator),this.isRunning=this.animator.isRunning.bind(this.animator),o.call(this,{animate:!1,updateHandler:this.render,readyHandler:this.initialize})}function GMapsTiledTorqueLayer(e){this.options=i.extend({},e),a.call(this,this._loadTile.bind(this),this.drawTile.bind(this)),this.initialize(e)}GMapsTorqueLayer.prototype=i.extend({},o.prototype,s.prototype,i.Event,{providers:{sql_api:i.providers.json,url_template:i.providers.JsonArray,windshaft:i.providers.windshaft,tileJSON:i.providers.tileJSON},renderers:{point:i.renderer.Point,pixel:i.renderer.Rectangle},initialize:function(){var e=this;this.onTileAdded=this.onTileAdded.bind(this),this.options.ready=function(){e.fire("change:bounds",{bounds:e.provider.getBounds()}),e.animator.steps(e.provider.getSteps()),e.animator.rescale(),e.fire("change:steps",{steps:e.provider.getSteps()}),e.setKeys(e.getKeys())},this.provider=new this.providers[this.options.provider](this.options),this.renderer=new this.renderers[this.options.renderer](this.getCanvas(),this.options),this.renderer.options.errorCallback=this.options.errorCallback,this._cacheListener=google.maps.event.addListener(this.map,"zoom_changed",function(){e.renderer&&e.renderer.clearSpriteCache()}),this._initTileLoader(this.map,this.getProjection()),this.shader&&this.renderer.setShader(this.shader)},hide:function(){return this.hidden?this:(this.pause(),this.clear(),this.hidden=!0,this)},show:function(){return this.hidden?(this.hidden=!1,this.play(),1===this.options.steps&&this.redraw(),this):this},setSQL:function(e){if(this.provider.options.named_map)throw new Error("SQL queries on named maps are read-only");if(!this.provider||!this.provider.setSQL)throw new Error("this provider does not support SQL");return this.provider.setSQL(e),this._reloadTiles(),this},setBlendMode:function(e){this.renderer&&this.renderer.setBlendMode(e),this.redraw()},setSteps:function(e){this.provider&&this.provider.setSteps(e),this.animator&&this.animator.steps(e),this._reloadTiles()},setColumn:function(e,t){this.provider&&this.provider.setColumn(e,t),this._reloadTiles()},getTimeBounds:function(){return this.provider&&this.provider.getKeySpan()},getCanvas:function(){return this.canvas},onTileAdded:function(e){var t=this;this.provider.getTileData(e,e.zoom,function(n,r){e.zoom===t.map.getZoom()&&(t._tileLoaded(e,n),n&&t.redraw(),t.fire("tileLoaded"),r&&t.fire("tileError",r))})},clear:function(){var e=this.canvas;e.width=e.width},render:function(){if(!this.hidden){var e,t,n,r=this.canvas;this.renderer.clearCanvas();var i=r.getContext("2d");for(e in this._tiles)(t=this._tiles[e])&&(n=this.getTilePos(t.coord),i.setTransform(1,0,0,1,n.x,n.y),this.renderer.renderTile(t,this.keys));this.renderer.applyFilters()}},getActivePointsBBox:function(e){var t=[];this.options.resolution,this.options.resolution;for(var n in this._tiles){var r=this._tiles[n];t=t.concat(this.renderer.getActivePointsBBox(r,e))}return t},setKey:function(e){this.setKeys([e])},getKeys:function(){return this.keys},setKeys:function(e){this.keys=e,this.animator.step(this.getKey()),this.redraw(),this.fire("change:time",{time:this.getTime(),step:this.getKey()})},getKey:function(){return this.keys[0]},setStep:function(e){if(void 0===e||void 0!==e.length)throw new Error("setTime only accept scalars");this.setKey(e)},renderRange:function(e,t){this.pause();for(var n=[],r=e;r<=t;r++)n.push(r);this.setKeys(n)},resetRenderRange:function(){this.stop(),this.play()},stepToTime:function(e){if(!this.provider)return 0;var t=this.provider.getKeySpan(),n=t.start+(t.end-t.start)*(e/this.provider.getSteps());return new Date(n)},timeToStep:function(e){if("Date"==typeof e&&(e=e.getTime()),!this.provider)return 0;var t=this.provider.getKeySpan();return this.provider.getSteps()*(e-t.start)/(t.end-t.start)},getStep:function(){return this.getKey()},getTime:function(){return this.stepToTime(this.getKey())},setCartoCSS:function(e){if(!this.renderer)throw new Error("renderer is not valid");if(this.provider&&this.provider.options.named_map)return console.log("Torque layer: CartoCSS style on named maps is read-only"),!1;var t=(new r.RendererJS).render(e);this.shader=t,this.renderer&&this.renderer.setShader(t);var n=i.common.TorqueLayer.optionsFromLayer(t.findLayer({name:"Map"}));return this.provider&&this.provider.setCartoCSS&&this.provider.setCartoCSS(e),this.provider&&this.provider.setOptions(n)&&this._reloadTiles(),i.extend(this.options,n),n.animationDuration&&this.animator.duration(n.animationDuration),this.redraw(),this},redraw:function(){this.scheduleUpdate()},onRemove:function(){this.fire("remove"),o.prototype.onRemove.call(this),this.animator.stop(),this._removeTileLoader(),google.maps.event.removeListener(this._cacheListener)},getValues:function(e){var t,n,r=[];for(t in e=void 0===e?this.getKey():e,this._tiles)n=this._tiles[t],this.renderer.getValues(n,e,r);return r},getValueForPos:function(e,t,n){n=void 0===n?this.getKey():n;var r,i,o,a,s,l=null;for(r in this._tiles)if(i=this._tiles[r],a=e-(o=this.getTilePos(i.coord)).x,s=t-o.y,a>=0&&s>=0&&a<this.renderer.TILE_SIZE&&s<=this.renderer.TILE_SIZE&&(l=this.renderer.getValueFor(i,n,a,s)),null!==l)return l;return null},pointCount:function(e){var t,n;e=void 0===e?this.key:e;var r=0;for(t in this._tiles)(n=this._tiles[t])&&(r+=n.timeCount[e]);return r},getValueForBBox:function(e,t,n,r){var i=e+n,o=t+r,a=0;for(_y=t;t<o;t+=this.options.resolution)for(_x=e;e<i;e+=this.options.resolution){var s=this.getValueForPos(_x,_y);if(s){var l=s.bbox,u=this.getProjection().fromLatLngToContainerPixel(new google.maps.LatLng(l[1].lat,l[1].lon));u.x<i&&u.y<o&&(a+=s.value)}}return a},error:function(e){return this.options.errorCallback=e,this}}),GMapsTiledTorqueLayer.prototype=i.extend({},a.prototype,{providers:{sql_api:i.providers.json,url_template:i.providers.JsonArray},renderers:{point:i.renderer.Point,pixel:i.renderer.Rectangle},initialize:function(e){this.keys=[0],this.options.renderer=this.options.renderer||"pixel",this.options.provider=this.options.provider||"sql_api",this.provider=new this.providers[this.options.provider](e),this.renderer=new this.renderers[this.options.renderer](null,e)},_tileLoaded:function(e,t){e.data=t,this.drawTile(e)},_loadTile:function(e,t,n){var r=this,i=1<<n,o={x:(t.x%i+i)%i,y:t.y};this.provider.getTileData(o,n,function(t){r._tileLoaded(e,t)})},drawTile:function(e){var t=e.canvas;if(e.data){t.width=t.width,this.renderer.setCanvas(t);var n=this.renderer.accumulate(e.data,this.getKey());this.renderer.renderTileAccum(n,0,0)}},setKey:function(e){this.keys=[e],this.redraw()},setCartoCSS:function(e){if(!this.renderer)throw new Error("renderer is not valid");return this.renderer.setCartoCSS(e)},setStepsRange:function(e,t){this.animator.stepsRange(e,t)},removeStepsRange:function(){this.animator.removeCustomStepsRange()},getStepsRange:function(){return this.animator.stepsRange()}}),e.exports={GMapsTiledTorqueLayer:GMapsTiledTorqueLayer,GMapsTorqueLayer:GMapsTorqueLayer}}).call(this,n(48))},function(e,t,n){var r={};"undefined"!=typeof google&&void 0!==google.maps&&((r=n(2991)).GMapsTileLoader=n(1341)),e.exports=r},function(e,t){L.Mixin.TileLoader={_initTileLoader:function(){this._tilesLoading={},this._tilesToLoad=0,this._map.on({moveend:this._updateTiles},this),this._updateTiles()},_removeTileLoader:function(){this._map.off({moveend:this._updateTiles},this),this._removeTiles()},_updateTiles:function(){if(this._map){var e=this._map.getPixelBounds(),t=this._map.getZoom(),n=this.options.tileSize;if(!(t>this.options.maxZoom||t<this.options.minZoom)){var r=new L.Point(Math.floor(e.min.x/n),Math.floor(e.min.y/n)),i=new L.Point(Math.floor(e.max.x/n),Math.floor(e.max.y/n)),o=new L.Bounds(r,i);this._addTilesFromCenterOut(o),this._removeOtherTiles(o)}}},_removeTiles:function(e){for(var t in this._tiles)this._removeTile(t)},_reloadTiles:function(){this._removeTiles(),this._updateTiles()},_removeOtherTiles:function(e){var t,n,r,i,o=this._map.getZoom();for(i in this._tiles)this._tiles.hasOwnProperty(i)&&(t=i.split(":"),n=parseInt(t[0],10),r=parseInt(t[1],10),(o!==parseInt(t[2],10)||n<e.min.x||n>e.max.x||r<e.min.y||r>e.max.y)&&this._removeTile(i))},_removeTile:function(e){this.fire("tileRemoved",this._tiles[e]),delete this._tiles[e],delete this._tilesLoading[e]},_tileKey:function(e){return e.x+":"+e.y+":"+e.zoom},_tileShouldBeLoaded:function(e){var t=this._tileKey(e);return!(t in this._tiles||t in this._tilesLoading)},_tileLoaded:function(e,t){this._tilesToLoad--;var n=e.x+":"+e.y+":"+e.zoom;this._tiles[n]=t,delete this._tilesLoading[n],0===this._tilesToLoad&&this.fire("tilesLoaded")},getTilePos:function(e){e=new L.Point(e.x,e.y);var t=this._map._getTopLeftPoint(this._map.getCenter()),n=this.options.tileSize;return e.multiplyBy(n).subtract(t)},_addTilesFromCenterOut:function(e){var t,n,r,i=[],o=e.getCenter(),a=this._map.getZoom();for(a=Math.round(a),t=e.min.y;t<=e.max.y;t++)for(n=e.min.x;n<=e.max.x;n++)(r=new L.Point(n,t)).zoom=a,this._tileShouldBeLoaded(r)&&i.push(r);var s=i.length;if(0!==s){for(i.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)}),this._tilesToLoad+=s,n=0;n<s;n++){var l=i[n],u=this._tileKey(l);this._tilesLoading[u]=l,this.fire("tileAdded",l)}this.fire("tilesLoading")}}}},function(e,t,n){n(2993),L.CanvasLayer=L.Layer.extend({includes:[L.Mixin.Events,L.Mixin.TileLoader],options:{minZoom:0,maxZoom:28,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:L.Browser.mobile,updateWhenIdle:L.Browser.mobile,tileLoader:!1,zoomAnimation:!0},initialize:function(e){e=e||{},this.render=this.render.bind(this),L.Util.setOptions(this,e),this._canvas=this._createCanvas(),this.options.zoomAnimation&&(this._backCanvas=this._createCanvas()),this._ctx=this._canvas.getContext("2d"),this.currentAnimationFrame=-1,this.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},this.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){clearTimeout(e)}},_createCanvas:function(){var e;(e=document.createElement("canvas")).style.position="absolute",e.style.top=0,e.style.left=0,e.style.pointerEvents="none",e.style.zIndex=this.options.zIndex||0;var t="leaflet-tile-container";return this.options.zoomAnimation&&(t+=" leaflet-zoom-animated"),e.setAttribute("class",t),e},onAdd:function(e){this._map=e;var t=this._map._panes.tilePane,n=L.DomUtil.create("div","leaflet-layer");n.appendChild(this._canvas),this.options.zoomAnimation&&(n.appendChild(this._backCanvas),this._backCanvas.style.display="none"),t.appendChild(n),this._container=n,e.dragging._draggable.on("predrag",function(){var t=e.dragging._draggable;L.DomUtil.setPosition(this._canvas,{x:-t._newPos.x,y:-t._newPos.y})},this),e.on({viewreset:this._reset},this),e.on("move",this.redraw,this),e.on("resize",this._reset,this),this.options.zoomAnimation&&e.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim,moveend:this._reset},this),this.options.tileLoader&&this._initTileLoader(),this._reset()},_animateZoom:function(e){this._animating||(this._animating=!0);var t=this._backCanvas;t.width=this._canvas.width,t.height=this._canvas.height;var n=this._canvas._leaflet_pos||{x:0,y:0};t.getContext("2d").drawImage(this._canvas,0,0),L.DomUtil.setPosition(t,L.DomUtil.getPosition(this._canvas)),this._canvas.style.display="none",t.style.display="block";var r=this._map,i=(r.getZoomScale(e.zoom),r._latLngToNewLayerPoint(r.getCenter(),e.zoom,e.center)),o=r._latLngToNewLayerPoint(e.center,e.zoom,e.center),a=i.x-o.x+n.x,s=i.y-o.y+n.y,l=t,u=L.DomUtil.TRANSFORM;setTimeout(function(){l.style[u]="translate("+a+"px, "+s+"px) scale("+e.scale+") "},0)},_endZoomAnim:function(){this._animating=!1,this._canvas.style.display="block",this._backCanvas.style.display="none",this._backCanvas.style[L.DomUtil.TRANSFORM]=""},getCanvas:function(){return this._canvas},getAttribution:function(){return this.options.attribution},draw:function(){return this._reset()},onRemove:function(e){this._container.parentNode.removeChild(this._container),e.off({viewreset:this._reset,move:this.redraw,moveend:this._reset,resize:this._reset,zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this)},addTo:function(e){return e.addLayer(this),this},error:function(e){return this.provider.options.errorCallback=e,this},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){e=void 0!==e?e:1,this._container.style.zIndex=e,this._canvas.style.zIndex=e,this.options.zoomAnimation&&(this._backCanvas.style.zIndex=e)},bringToFront:function(){return this},bringToBack:function(){return this},_reset:function(){var e=this._map.getSize();this._canvas.width=e.x,this._canvas.height=e.y;var t=L.DomUtil.getPosition(this._map.getPanes().mapPane);t&&L.DomUtil.setPosition(this._canvas,{x:-t.x,y:-t.y}),this.onResize(),this._render()},_updateOpacity:function(){},_render:function(){this.currentAnimationFrame>=0&&this.cancelAnimationFrame.call(window,this.currentAnimationFrame),this.currentAnimationFrame=this.requestAnimationFrame.call(window,this.render)},redraw:function(e){var t=L.DomUtil.getPosition(this._map.getPanes().mapPane);t&&L.DomUtil.setPosition(this._canvas,{x:-t.x,y:-t.y}),e?this.render():this._render()},onResize:function(){},render:function(){throw new Error("render function should be implemented")}})},function(e,t,n){(function(e){e.carto||n(299);var t=n(208);n(2994),L.TorqueLayer=L.CanvasLayer.extend({providers:{sql_api:t.providers.json,url_template:t.providers.JsonArray,windshaft:t.providers.windshaft,tileJSON:t.providers.tileJSON},renderers:{point:t.renderer.Point,pixel:t.renderer.Rectangle},initialize:function(e){var n=this;if(!t.isBrowserSupported())throw new Error("browser is not supported by torque");if(e.tileLoader=!0,this.keys=[0],this._tiles={},Object.defineProperty(this,"key",{get:function(){return this.getKey()}}),this.prevRenderedKey=0,e.cartocss){var r=e.cartocss.replace(/\n/g,"").match(/Map\s*?\{.*?}/g)[0];t.extend(e,t.common.TorqueLayer.optionsFromCartoCSS(r))}e.resolution=e.resolution||2,e.steps=e.steps||100,e.visible=void 0===e.visible||e.visible,this.hidden=!e.visible,this.animator=new t.Animator(function(e){var t=0|e;n.getKey()!==t&&n.setKey(t,{direct:!0})},t.extend(t.clone(e),{onPause:function(){n.fire("pause")},onStop:function(){n.fire("stop")},onStart:function(){n.fire("play")},onStepsRange:function(){n.fire("change:stepsRange",n.animator.stepsRange())}})),this.play=this.animator.start.bind(this.animator),this.stop=this.animator.stop.bind(this.animator),this.pause=this.animator.pause.bind(this.animator),this.toggle=this.animator.toggle.bind(this.animator),this.setDuration=this.animator.duration.bind(this.animator),this.isRunning=this.animator.isRunning.bind(this.animator),L.CanvasLayer.prototype.initialize.call(this,e),this.options.renderer=this.options.renderer||"point",this.options.provider=this.options.provider||"windshaft",this.options.tileJSON&&(this.options.provider="tileJSON"),this.showLimitErrors=e.showLimitErrors,this.provider=new this.providers[this.options.provider](e),e.layer=this,this.renderer=new this.renderers[this.options.renderer](this.getCanvas(),e),e.ready=function(){n.fire("change:bounds",{bounds:n.provider.getBounds()}),n.animator.steps(n.provider.getSteps()),n.animator.rescale(),n.fire("change:steps",{steps:n.provider.getSteps()}),n.setKeys(n.getKeys())},this.on("tileLoaded",function(){n.renderer.setCartoCSS(n.renderer.style)}),this.renderer.on("allIconsLoaded",this.render.bind(this)),this.on("tileAdded",function(e){this.provider.getTileData(e,e.zoom,function(t,r){e.zoom===n._map.getZoom()&&(n._tileLoaded(e,t),n._clearTileCaches(),t&&n.redraw(),n.fire("tileLoaded"),r&&n.fire("tileError",r))})},this)},_clearTileCaches:function(){var e,t;for(e in this._tiles)(t=this._tiles[e])&&t._tileCache&&(t._tileCache=null)},_clearCaches:function(){this.renderer&&this.renderer.clearSpriteCache(),this._clearTileCaches()},onAdd:function(e){e.on({zoomend:this._clearCaches,zoomstart:this._pauseOnZoom},this),e.on({zoomend:this._resumeOnZoom},this),L.CanvasLayer.prototype.onAdd.call(this,e)},onRemove:function(e){this.fire("remove"),this._removeTileLoader(),e.off({zoomend:this._clearCaches,zoomstart:this._pauseOnZoom},this),e.off({zoomend:this._resumeOnZoom},this),L.CanvasLayer.prototype.onRemove.call(this,e)},_pauseOnZoom:function(){this.wasRunning=this.isRunning(),this.wasRunning&&this.pause()},_resumeOnZoom:function(){this.wasRunning&&this.play()},hide:function(){return this.hidden?this:(this.pause(),this.clear(),this.hidden=!0,this)},show:function(){return this.hidden?(this.hidden=!1,this.play(),1===this.options.steps&&this.redraw(),this):this},setSQL:function(e){if(this.provider.options.named_map)throw new Error("SQL queries on named maps are read-only");if(!this.provider||!this.provider.setSQL)throw new Error("this provider does not support SQL");return this.provider.setSQL(e),this._reloadTiles(),this},setBlendMode:function(e){this.renderer.setBlendMode(e),this.redraw()},setSteps:function(e){this.provider.setSteps(e),this._reloadTiles()},setColumn:function(e,t){this.provider.setColumn(e,t),this._reloadTiles()},getTimeBounds:function(){return this.provider&&this.provider.getKeySpan()},clear:function(){var e=this.getCanvas();e.width=e.width},render:function(){if(!this.hidden){var e,t,n,r=this.getCanvas();this.renderer.clearCanvas();var i=r.getContext("2d");for(e in this._tiles)(t=this._tiles[e])&&(this.animator.isRunning()&&(t._tileCache=null),n=this.getTilePos(t.coord),i.setTransform(1,0,0,1,n.x,n.y),t._tileCache?this.renderer._ctx.drawImage(t._tileCache,0,0):this.renderer.renderTile(t,this.keys));if(this.renderer.applyFilters(),!this.animator.isRunning()&&this.getKey()===this.prevRenderedKey){var o=this.renderer.TILE_SIZE;for(e in this._tiles)if((t=this._tiles[e])&&!t._tileCache){var a=t._tileCache=document.createElement("canvas");a.width=a.height=o,n=this.getTilePos(t.coord);var s=Math.max(0,n.x),l=Math.max(0,n.y),u=Math.min(o,this.getCanvas().width-s),c=Math.min(o,this.getCanvas().height-l);u>0&&c>0&&a.getContext("2d").drawImage(this.getCanvas(),s,l,u,c,s-n.x,l-n.y,u,c)}}this.prevRenderedKey=this.getKey()}},setKey:function(e,t){this.setKeys([e],t)},getKeys:function(){return this.keys},setKeys:function(e,t){this.keys=e,this.animator.step(this.getKey()),this._clearTileCaches(),this.redraw(t&&t.direct),this.fire("change:time",{time:this.getTime(),step:this.getKey(),start:this.getKey(),end:this.getLastKey()})},getKey:function(){return this.keys[0]},getLastKey:function(){return this.keys[this.keys.length-1]},setStep:function(e){if(void 0===e||void 0!==e.length)throw new Error("setTime only accept scalars");this.setKey(e)},renderRange:function(e,t){this.pause();for(var n=[],r=e;r<=t;r++)n.push(r);this.setKeys(n)},resetRenderRange:function(){this.stop(),this.play()},stepToTime:function(e){var t=this.provider.getKeySpan(),n=t.start+(t.end-t.start)*(e/this.provider.getSteps());return new Date(n)},timeToStep:function(e){if("Date"==typeof e&&(e=e.getTime()),!this.provider)return 0;var t=this.provider.getKeySpan();return this.provider.getSteps()*(e-t.start)/(t.end-t.start)},getStep:function(){return this.getKey()},getTime:function(){return this.stepToTime(this.getKey())},getTimeSpan:function(){return this.provider.getKeySpan()},setCartoCSS:function(e){if(!this.renderer)throw new Error("renderer is not valid");if(this.provider&&this.provider.options.named_map)return console.log("Torque layer: CartoCSS style on named maps is read-only"),!1;this.renderer.setCartoCSS(e,function(){var n=t.common.TorqueLayer.optionsFromLayer(this.renderer._shader.findLayer({name:"Map"}));return this.provider.setCartoCSS&&this.provider.setCartoCSS(e),this.provider.setOptions(n)&&this._reloadTiles(),t.extend(this.options,n),n.animationDuration&&this.animator.duration(n.animationDuration),this._clearCaches(),this.redraw(),this}.bind(this))},getActivePointsBBox:function(e){var t=[];for(var n in this._tiles){var r=this._tiles[n];t=t.concat(this.renderer.getActivePointsBBox(r,e))}return t},getValues:function(e){var t,n,r=[];for(t in e=void 0===e?this.getKey():e,this._tiles)n=this._tiles[t],this.renderer.getValues(n,e,r);return r},getValueForPos:function(e,t,n){n=void 0===n?this.getKey():n;var r,i,o,a,s,l=null;for(r in this._tiles)if(i=this._tiles[r],a=e-(o=this.getTilePos(i.coord)).x,s=t-o.y,a>=0&&s>=0&&a<this.renderer.TILE_SIZE&&s<=this.renderer.TILE_SIZE&&(l=this.renderer.getValueFor(i,n,a,s)),null!==l)return l;return null},getValueForBBox:function(e,t,n,r){var i=e+n,o=t+r,a=e,s=0;for(_y=t;_y<o;_y+=this.options.resolution)for(a=e;a<i;a+=this.options.resolution){var l=this.getValueForPos(a,_y);if(l){var u=l.bbox,c=this._map.latLngToContainerPoint([u[1].lat,u[1].lon]);c.x<i&&c.y<o&&(s+=l.value)}}return s},pointCount:function(e){var t,n;e=void 0===e?this.key:e;var r=0;for(t in this._tiles)(n=this._tiles[t])&&(r+=n.timeCount[e]);return r},invalidate:function(){this.provider.reload()},setStepsRange:function(e,t){this.animator.stepsRange(e,t)},removeStepsRange:function(){this.animator.removeCustomStepsRange()},getStepsRange:function(){return this.animator.stepsRange()},onRemove:function(e){L.CanvasLayer.prototype.onRemove.apply(this,arguments),this.animator.stop()}})}).call(this,n(48))},function(e,t,n){"undefined"!=typeof L&&n(2995)},function(e,t,n){var r=n(208),i=r.types.Uint8Array,o=r.types.Int32Array,a=r.types.Uint32Array,s=r.types.Uint8ClampedArray;var l=function(e){(this._ready=!1,this._tileQueue=[],this.options=e,this.options.coordinates_data_type=this.options.coordinates_data_type||i,this.options.data_aggregation&&(this.options.cumulative="cumulative"===this.options.data_aggregation),this.options.auth_token)&&((this.options.extra_params||(this.options.extra_params={})).auth_token=this.options.auth_token);this.options.no_fetch_map||this._fetchMap()};l.prototype={NAME:"tileJSON",proccessTile:function(e,t,n){var r=new this.options.coordinates_data_type(e.length),i=new this.options.coordinates_data_type(e.length),l=0,u=-1;for(v=0;v<e.length;++v){l+=(y=e[v]).dates__uint16.length;for(var c=0;c<y.dates__uint16.length;++c)u=Math.max(u,y.dates__uint16[c])}this.options.cumulative&&(l=(1+u)*e.length);for(var d=this.options.cumulative?a:s,f=new o(u+1),h=new o(u+1),p=new(this.options.valueDataType||d)(l),m=new a(l),g={},v=0;v<e.length;++v){var y=e[v];r[v]=y.x__uint8*this.options.resolution,i[v]=y.y__uint8*this.options.resolution;l=y.dates__uint16;var _=y.vals__uint8;if(this.options.cumulative){var b={};for(C=0,S=l.length;C<S;++C)b[l[C]]=_[C];var w=0;for(C=l[0];C<=u;++C){k=g[C]||(g[C]=[]);var x=b[C];x&&(w+=x),k.push([v,w])}}else for(var C=0,S=l.length;C<S;++C){var k=g[l[C]]||(g[l[C]]=[]);this.options.cumulative&&(_[C]+=prev_val),prev_val=_[C],k.push([v,_[C]])}}var T=0,L=0,M=0;for(M=0;M<=u;++M){var E=0,A=g[M];if(A)for(v=0;v<A.length;++v){k=A[v];++E,m[T]=k[0],p[T]=k[1],++T}f[M]=L,h[M]=E,L+=E}return{x:r,y:i,z:n,coord:{x:t.x,y:t.y,z:n},timeCount:h,timeIndex:f,renderDataPos:m,renderData:p,maxDate:u}},setSteps:function(e,t){t=t||{},this.options.steps!==e&&(this.options.steps=e,this.options.step=(this.options.end-this.options.start)/this.getSteps(),this.options.step=this.options.step||1,t.silent||this.reload())},setOptions:function(e){var t=!1;if(void 0!==e.resolution&&e.resolution!==this.options.resolution&&(this.options.resolution=e.resolution,t=!0),void 0!==e.steps&&e.steps!==this.options.steps&&(this.setSteps(e.steps,{silent:!0}),t=!0),void 0!==e.column&&e.column!==this.options.column&&(this.options.column=e.column,t=!0),void 0!==e.countby&&e.countby!==this.options.countby&&(this.options.countby=e.countby,t=!0),void 0!==e.data_aggregation){var n="cumulative"===e.data_aggregation;this.options.cumulative!==n&&(this.options.cumulative=n,t=!0)}return t&&this.reload(),t},_extraParams:function(e){if(e=r.extend(r.extend({},e),this.options.extra_params)){var t=[];for(var n in e){var i=e[n];if(i)if(r.isArray(i))for(var o=0,a=i.length;o<a;o++)t.push(n+"[]="+encodeURIComponent(i[o]));else t.push(n+"="+encodeURIComponent(i))}return t.join("&")}return null},getTileData:function(e,t,n){this._ready?this._getTileData(e,t,n):this._tileQueue.push([e,t,n])},_setReady:function(e){this._ready=!0,this._processQueue(),this.options.ready&&this.options.ready()},_processQueue:function(){for(var e;e=this._tileQueue.pop();)this._getTileData.apply(this,e)},_getTileData:function(e,t,n){var i=this,o=this.options.subdomains||"0123",a=Math.pow(2,t),s=(e.x%a+a)%a,l=Math.abs(s+e.y)%o.length,u=this._extraParams(),c=this.templateUrl.replace("{x}",s).replace("{y}",e.y).replace("{z}",t).replace("{s}",o[l]);c+=u,r.net.get(c,function(r){if(r&&r.responseText){var o=JSON.parse(r.responseText);n(i.proccessTile(o,e,t))}else n(null)})},getKeySpan:function(){return{start:this.options.start,end:this.options.end,step:this.options.step,steps:this.options.steps,columnType:this.options.column_type}},setColumn:function(e,t){this.options.column=e,this.options.is_time=void 0===t,this.reload()},reload:function(){this._ready=!1,this._fetchMap()},getSteps:function(){return Math.min(this.options.steps,this.options.data_steps)},getBounds:function(){return this.options.bounds},getSQL:function(){return this.options.sql||"select * from "+this.options.table},setSQL:function(e){this.options.sql!=e&&(this.options.sql=e,this.reload())},_isUserTemplateUrl:function(e){return e&&-1!==e.indexOf("{user}")},isHttps:function(){return 0===this.options.maps_api_template.indexOf("https")},_fetchMap:function(e){var t=this;r.net.get(this.options.tileJSON,function(e){if(e=JSON.parse(e.response)){if(e.errors)return void(t.options.errorCallback&&t.options.errorCallback(e.errors));for(var n in e)t.options[n]=e[n];t.templateUrl=e.tiles[0],0!==t.templateUrl.indexOf("http")&&(t.templateUrl=t.options.tileJSON.substring(0,t.options.tileJSON.lastIndexOf("/")+1)+t.templateUrl),t._setReady(!0)}})}},e.exports=l},function(e,t,n){var r=n(208),i=n(602),o=r.types.Uint8Array,a=r.types.Int32Array,s=r.types.Uint32Array,l=r.types.Uint8ClampedArray;var u=function(e){(this._ready=!1,this._tileQueue=[],this.options=e,this.options.is_time=void 0===this.options.is_time||this.options.is_time,this.options.tiler_protocol=e.tiler_protocol||"http",this.options.tiler_domain=e.tiler_domain||"cartodb.com",this.options.tiler_port=e.tiler_port||80,e.maps_api_template?this.options.maps_api_template=e.maps_api_template:this._buildMapsApiTemplate(this.options),this.options.coordinates_data_type=this.options.coordinates_data_type||o,this.options.data_aggregation&&(this.options.cumulative="cumulative"===this.options.data_aggregation),this.options.auth_token)&&((this.options.extra_params||(this.options.extra_params={})).auth_token=this.options.auth_token);this.options.no_fetch_map||this._fetchMap()};u.prototype={proccessTile:function(e,t,n){var r=new this.options.coordinates_data_type(e.length),o=new this.options.coordinates_data_type(e.length),u=i.metric("torque.provider.windshaft.mem"),c=i.metric("torque.provider.windshaft.points"),d=i.metric("torque.provider.windshaft.process_time").start(),f=0,h=-1;for(w=0;w<e.length;++w){f+=(x=e[w]).dates__uint16.length;for(var p=0;p<x.dates__uint16.length;++p)h=Math.max(h,x.dates__uint16[p])}this.options.cumulative&&(f=(1+h)*e.length);var m=this.options.cumulative?s:l,g=new a(h+1),v=new a(h+1),y=new(this.options.valueDataType||m)(f),_=new s(f);u.inc(4*h+4*h+f+4*f),c.inc(e.length);for(var b={},w=0;w<e.length;++w){var x=e[w];r[w]=x.x__uint8*this.options.resolution,o[w]=x.y__uint8*this.options.resolution;f=x.dates__uint16;var C=x.vals__uint8;if(this.options.cumulative){var S={};for(L=0,M=f.length;L<M;++L)S[f[L]]=C[L];var k=0;for(L=f[0];L<=h;++L){E=b[L]||(b[L]=[]);var T=S[L];T&&(k+=T),E.push([w,k])}}else for(var L=0,M=f.length;L<M;++L){var E=b[f[L]]||(b[f[L]]=[]);this.options.cumulative&&(C[L]+=prev_val),prev_val=C[L],E.push([w,C[L]])}}var A=0,P=0,R=0;for(R=0;R<=h;++R){var O=0,D=b[R];if(D)for(w=0;w<D.length;++w){E=D[w];++O,_[A]=E[0],y[A]=E[1],++A}g[R]=P,v[R]=O,P+=O}return d.end(),{x:r,y:o,z:n,coord:{x:t.x,y:t.y,z:n},timeCount:v,timeIndex:g,renderDataPos:_,renderData:y,maxDate:h}},proccessTileError:function(e,t,n){return{error:e,coord:{x:t.x,y:t.y,z:n}}},setSteps:function(e,t){t=t||{},this.options.steps!==e&&(this.options.steps=e,this.options.step=(this.options.end-this.options.start)/this.getSteps(),this.options.step=this.options.step||1,t.silent||this.reload())},setOptions:function(e){var t=!1;if(void 0!==e.resolution&&e.resolution!==this.options.resolution&&(this.options.resolution=e.resolution,t=!0),void 0!==e.steps&&e.steps!==this.options.steps&&(this.setSteps(e.steps,{silent:!0}),t=!0),void 0!==e.column&&e.column!==this.options.column&&(this.options.column=e.column,t=!0),void 0!==e.countby&&e.countby!==this.options.countby&&(this.options.countby=e.countby,t=!0),void 0!==e.data_aggregation){var n="cumulative"===e.data_aggregation;this.options.cumulative!==n&&(this.options.cumulative=n,t=!0)}return t&&this.reload(),t},_extraParams:function(e){if(e=r.extend(r.extend({},e),this.options.extra_params)){var t=[];for(var n in e){var i=e[n];if(i)if(r.isArray(i))for(var o=0,a=i.length;o<a;o++)t.push(n+"[]="+encodeURIComponent(i[o]));else t.push(n+"="+encodeURIComponent(i))}return t.join("&")}return null},getTileData:function(e,t,n){this._ready?this._getTileData(e,t,n):this._tileQueue.push([e,t,n])},_setReady:function(e){this._ready=!0,this._processQueue(),this.options.ready&&this.options.ready()},_processQueue:function(){for(var e;e=this._tileQueue.pop();)this._getTileData.apply(this,e)},_getTileData:function(e,t,n){var o=this,a=i.metric("torque.provider.windshaft.tile.fetch").start(),s=this.options.subdomains||"0123",l=Math.pow(2,t),u=(e.x%l+l)%l,c=Math.abs(u+e.y)%s.length,d=this.templateUrl.replace("{x}",u).replace("{y}",e.y).replace("{z}",t).replace("{s}",s[c]),f=this._extraParams();r.net.get(d+(f?"?"+f:""),function(r){if(a.end(),r&&r.responseText){var s=JSON.parse(r.responseText);if(429===r.status){var l=s.errors_with_context[0];n(o.proccessTileError(l,e,t),l)}else n(o.proccessTile(s,e,t))}else i.metric("torque.provider.windshaft.tile.error").inc(),n(null)})},getKeySpan:function(){return{start:this.options.start,end:this.options.end,step:this.options.step,steps:this.options.steps,columnType:this.options.column_type}},setColumn:function(e,t){this.options.column=e,this.options.is_time=void 0===t,this.reload()},reload:function(){this._ready=!1,this._fetchMap()},getSteps:function(){return Math.min(this.options.steps,this.options.data_steps)},getBounds:function(){return this.options.bounds},getSQL:function(){return this.options.sql||"select * from "+this.options.table},setSQL:function(e){this.options.sql!=e&&(this.options.sql=e,this.reload())},_buildMapsApiTemplate:function(e){var t=e.user_name||e.user;e.maps_api_template=e.tiler_protocol+"://"+(t?"{user}.":"")+e.tiler_domain+(""!=e.tiler_port?":"+e.tiler_port:"")},_tilerHost:function(){var e=this.options,t=e.user_name||e.user;return e.maps_api_template.replace("{user}",t)},url:function(){var e=this.options,t=e.cdn_url,n=!t||t&&!t.http&&!t.https;if(e.no_cdn||n)return this._tilerHost();var r=this.isHttps()?"https":"http",i=r+"://";this.isHttps()||(i+="{s}.");var o=t[r];this._isUserTemplateUrl(o)||(o+="/{user}");var a=e.user_name||e.user;return i+=o.replace("{user}",a)},_isUserTemplateUrl:function(e){return e&&-1!==e.indexOf("{user}")},isHttps:function(){return 0===this.options.maps_api_template.indexOf("https")},_generateCartoCSS:function(){var e={"-torque-frame-count":this.options.steps,"-torque-resolution":this.options.resolution,"-torque-aggregation-function":"'"+this.options.countby+"'","-torque-time-attribute":"'"+this.options.column+"'","-torque-data-aggregation":this.options.cumulative?"cumulative":"linear"},t="Map{";for(var n in e)t+=n+":"+e[n]+";";return t+"}"},_fetchMap:function(e){var t=this,n={},o=this.options.dynamic_cdn?this.url().replace("{s}","0"):this._tilerHost(),a=o+"/api/v1/map",s=this.options.named_map,l={};s?(a=o+"/api/v1/map/named/"+s.name+"/jsonp",void 0!==s.params&&(n=s.params)):n={version:"1.0.1",stat_tag:this.options.stat_tag||"torque",layers:[{type:"torque",options:{cartocss_version:"1.0.0",cartocss:this._generateCartoCSS(),sql:this.getSQL()}}]},this.options.stat_tag&&(l.stat_tag=this.options.stat_tag),extra=this._extraParams(l),extra&&(extra=extra.replace("api_key=","map_key=")),a=a+"?config="+encodeURIComponent(JSON.stringify(n))+"&callback=?"+(extra?"&"+extra:"");var u=i.metric("torque.provider.windshaft.layergroup.time").start();r.net.jsonp(a,function(e){if(u.end(),e){if(e.errors)return void(t.options.errorCallback&&t.options.errorCallback(e.errors));var n=Object.keys(e.metadata.torque)[0],r=e.metadata.torque[n];for(var o in r)t.options[o]=r[o];if(e.cdn_url){var a=t.options.cdn_url=t.options.cdn_url||{};a.http=e.cdn_url.http||a.http,a.https=e.cdn_url.https||a.https}t.templateUrl=t.url()+"/api/v1/map/"+e.layergroupid+"/"+n+"/{z}/{x}/{y}.json.torque",t._setReady(!0)}else i.metric("torque.provider.windshaft.layergroup.error").inc()},{callbackName:t.options.instanciateCallback})}},e.exports=u},function(e,t,n){var i=n(208),o=n(602),a=i.types.Uint8Array,s=i.types.Int32Array,l=i.types.Uint32Array;var u=function(e){this.options=e};u.prototype={aggregateByKey:function(e){function getKeys(e){for(var t=e.data[2],n={},r=0;r<t;++r)n[e.data[3+r]]=e.data[3+t+r];return n}var t={};for(r=0;r<e.length;++r){var n=getKeys(e[r]);for(var i in n)t[i]=t[i]||0,t[i]+=n[i]}return t},proccessTile:function(e,t,n){var r=new a(e.length),i=new a(e.length),o=this;function decode_row(e){for(var t={x:e.data[0]*o.options.resolution,y:e.data[1]*o.options.resolution,valuesCount:e.data[2],times:[],values:[]},n=0;n<t.valuesCount;++n)t.times.push(e.data[3+n]),t.values.push(e.data[3+t.valuesCount+n]);if(o.options.cumulative)for(n=1;n<t.valuesCount;++n)t.values[n]+=t.values[n-1];return t}for(v=0;v<e.length;++v)e[v]=decode_row(e[v]);var u=0,c=0;for(v=0;v<e.length;++v){u+=(y=e[v]).times.length;for(var d=0;d<y.times.length;++d)c=Math.max(c,y.times[d])}for(var f=new s(c+1),h=new s(c+1),p=new(this.options.valueDataType||a)(u),m=new l(u),g={},v=0;v<e.length;++v){var y=e[v];r[v]=y.x,i[v]=y.y;u=y.times;for(var _=y.values,b=0,w=u.length;b<w;++b){(L=g[u[b]]||(g[u[b]]=[])).push([v,_[b]])}}var x=0,C=0,S=0;for(S=0;S<=c;++S){var k=0,T=g[S];if(T)for(v=0;v<T.length;++v){var L=T[v];++k,m[x]=L[0],p[x]=L[1],++x}f[S]=C,h[S]=k,C+=k}return{x:r,y:i,coord:{x:t.x,y:t.y,z:n},timeCount:h,timeIndex:f,renderDataPos:m,renderData:p}},url:function(){return this.options.url},tileUrl:function(e,t){var n=this.url(),r=(this.options.subdomains||"abcd")[(e.x+e.y+t)%4];return n.replace("{x}",e.x).replace("{y}",e.y).replace("{z}",t).replace("{s}",r)},getTile:function(e,t,n){var r=this.tileUrl(e,t),a=o.metric("jsonarray:fetch time");a.start(),i.net.get(r,function(e){a.end(),e&&(e=JSON.parse(e.responseText)),n(e)})},getTileData:function(e,t,n){var r=this.tileUrl(e,t),a=this,s=o.metric("jsonarray:fetch time");s.start(),i.net.get(r,function(r){s.end();var i=null,l=o.metric("jsonarray:processing time"),u=o.metric("jsonarray:parsing time");try{l.start(),u.start();var c=JSON.parse(r.responseText||r.response).rows;u.end(),i=a.proccessTile(c,e,t),l.end()}catch(n){console.error("problem parsing JSON on ",e,t)}n(i)})}},e.exports=u},function(e,t,n){var r=n(208),i=n(602),o=r.types.Uint8Array,a=r.types.Int32Array,s=r.types.Uint32Array;function format(e){for(var t=1;t<arguments.length;++t){var n=arguments[t];for(var r in n)e=e.replace(RegExp("\\{"+r+"\\}","g"),n[r])}return e}var l=function(e){if(this._ready=!1,this._tileQueue=[],this.options=e,this.options.is_time=void 0===this.options.is_time||this.options.is_time,this.options.tiler_protocol=e.tiler_protocol||"http",this.options.tiler_domain=e.tiler_domain||"cartodb.com",this.options.tiler_port=e.tiler_port||80,this.options.data_aggregation&&(this.options.cumulative="cumulative"===this.options.data_aggregation),void 0===e.resolution)throw new Error("resolution should be provided");if(void 0===e.steps)throw new Error("steps should be provided");void 0===e.start?this._fetchKeySpan():this._setReady(!0)};l.prototype={proccessTile:function(e,t,n){var r=new o(e.length),l=new o(e.length),u=i.metric("ProviderJSON:mem"),c=i.metric("ProviderJSON:point_count"),d=i.metric("ProviderJSON:process_time").start(),f=0,h=-1;for(w=0;w<e.length;++w){f+=(x=e[w]).dates__uint16.length;for(var p=0;p<x.dates__uint16.length;++p)h=Math.max(h,x.dates__uint16[p])}this.options.cumulative&&(f=(1+h)*e.length);var m=this.options.cumulative?s:o,g=new a(h+1),v=new a(h+1),y=new(this.options.valueDataType||m)(f),_=new s(f);u.inc(4*h+4*h+f+4*f),c.inc(e.length);for(var b={},w=0;w<e.length;++w){var x=e[w];r[w]=x.x__uint8*this.options.resolution,-1===x.y__uint8?l[w]=0:l[w]=x.y__uint8*this.options.resolution;f=x.dates__uint16;var C=x.vals__uint8;if(this.options.cumulative){var S={};for(L=0,M=f.length;L<M;++L)S[f[L]]=C[L];var k=0;for(L=f[0];L<=h;++L){E=b[L]||(b[L]=[]);var T=S[L];T&&(k+=T),E.push([w,k])}}else for(var L=0,M=f.length;L<M;++L){var E=b[f[L]]||(b[f[L]]=[]);this.options.cumulative&&(C[L]+=prev_val),prev_val=C[L],E.push([w,C[L]])}}var A=0,P=0,R=0;for(R=0;R<=h;++R){var O=0,D=b[R];if(D)for(w=0;w<D.length;++w){E=D[w];++O,_[A]=E[0],y[A]=E[1],++A}g[R]=P,v[R]=O,P+=O}return d.end(),{x:r,y:l,z:n,coord:{x:t.x,y:t.y,z:n},timeCount:v,timeIndex:g,renderDataPos:_,renderData:y,maxDate:h}},_host:function(){var e=this.options,t=e.sql_api_port,n=(e.user_name||e.user)+"."+(e.sql_api_domain||"cartodb.com")+(t?":"+t:""),r=e.sql_api_protocol||"http";return this.options.url||r+"://"+n+"/api/v2/sql"},url:function(e){var t=this.options,n=t.sql_api_protocol||"http";if(!this.options.cdn_url)return this._host();var r=n+"://";e&&(r+=e+".");var i=t.cdn_url;if(!i.http&&!i.https)throw new Error("cdn_host should contain http and/or https entries");return r+=i[n]+"/"+(t.user_name||t.user)+"/api/v2/sql"},_hash:function(e){var t=0;if(!e||0==e.length)return t;for(var n=0,r=e.length;n<r;++n)t=(t<<5)-t+e.charCodeAt(n)|0;return t},_extraParams:function(){if(this.options.extra_params){var e=[];for(var t in this.options.extra_params){var n=this.options.extra_params[t];n&&e.push(t+"="+encodeURIComponent(n))}return e.join("&")}return null},isHttps:function(){return this.options.sql_api_protocol&&"https"===this.options.sql_api_protocol},sql:function(e,t,n){n=n||{};var i,o=this.options.subdomains||"0123";this.isHttps()&&(o=[null]),i=n.no_cdn?this._host():this.url(o[Math.abs(this._hash(e))%o.length]);var a=this._extraParams();r.net.get(i+"?q="+encodeURIComponent(e)+(a?"&"+a:""),function(e){n.parseJSON&&(e=JSON.parse(e&&e.responseText)),t&&t(e)})},getTileData:function(e,t,n){this._ready?this._getTileData(e,t,n):this._tileQueue.push([e,t,n])},_setReady:function(e){this._ready=!0,this._processQueue(),this.options.ready&&this.options.ready()},_processQueue:function(){for(var e;e=this._tileQueue.pop();)this._getTileData.apply(this,e)},_getTileData:function(e,t,n){var r=i.metric("ProviderJSON:tile_fetch_time").start();this.table=this.options.table;var o=this.options.column;this.options.is_time&&(o=format("date_part('epoch', {column})",this.options));var a=format("WITH par AS (  SELECT CDB_XYZ_Resolution({zoom})*{resolution} as res,  256/{resolution} as tile_size, CDB_XYZ_Extent({x}, {y}, {zoom}) as ext ),cte AS (   SELECT ST_SnapToGrid(i.the_geom_webmercator, p.res) g, {countby} c, floor(({column_conv} - {start})/{step}) d  FROM ({_sql}) i, par p   WHERE i.the_geom_webmercator && p.ext   GROUP BY g, d) SELECT (st_x(g)-st_xmin(p.ext))/p.res x__uint8,        (st_y(g)-st_ymin(p.ext))/p.res y__uint8, array_agg(c) vals__uint8, array_agg(d) dates__uint16 FROM cte, par p where (st_y(g)-st_ymin(p.ext))/p.res < tile_size and (st_x(g)-st_xmin(p.ext))/p.res < tile_size GROUP BY x__uint8, y__uint8",this.options,{zoom:t,x:e.x,y:e.y,column_conv:o,_sql:this.getSQL()}),s=this;this.sql(a,function(i){if(i){var o=JSON.parse(i.responseText).rows;n(s.proccessTile(o,e,t))}else n(null);r.end()})},getKeySpan:function(){return{start:1e3*this.options.start,end:1e3*this.options.end,step:this.options.step,steps:this.options.steps,columnType:this.options.is_time?"date":"number"}},setColumn:function(e,t){this.options.column=e,this.options.is_time=void 0===t,this.reload()},setResolution:function(e){this.options.resolution=e},setOptions:function(e){var t=!1;if(void 0!==e.resolution&&e.resolution!==this.options.resolution&&(this.options.resolution=e.resolution,t=!0),void 0!==e.steps&&e.steps!==this.options.steps&&(this.setSteps(e.steps,{silent:!0}),t=!0),void 0!==e.column&&e.column!==this.options.column&&(this.options.column=e.column,t=!0),void 0!==e.countby&&e.countby!==this.options.countby&&(this.options.countby=e.countby,t=!0),void 0!==e.data_aggregation){var n="cumulative"===e.data_aggregation;this.options.cumulative!==n&&(this.options.cumulative=n,t=!0)}return t&&this.reload(),t},reload:function(){this._ready=!1,this._fetchKeySpan()},setSQL:function(e){this.options.sql!=e&&(this.options.sql=e,this.reload())},getSteps:function(){return Math.min(this.options.steps,this.options.data_steps)},setSteps:function(e,t){t=t||{},this.options.steps!==e&&(this.options.steps=e,this.options.step=(this.options.end-this.options.start)/this.getSteps(),this.options.step=this.options.step||1,t.silent||this.reload())},getBounds:function(){return this.options.bounds},getSQL:function(){return this.options.sql||"select * from "+this.options.table},_tilerHost:function(){var e=this.options,t=e.user_name||e.user;return e.tiler_protocol+"://"+(t?t+".":"")+e.tiler_domain+(""!=e.tiler_port?":"+e.tiler_port:"")},_fetchUpdateAt:function(e){var t=this,n={version:"1.0.1",stat_tag:this.options.stat_tag||"torque",layers:[{type:"cartodb",options:{cartocss_version:"2.1.1",cartocss:"#layer {}",sql:this.getSQL()}}]},i=this._tilerHost()+"/tiles/layergroup",o=this._extraParams();o&&(o=o.replace("api_key=","map_key=")),i=i+"?config="+encodeURIComponent(JSON.stringify(n))+"&callback=?"+(o?"&"+o:""),r.net.jsonp(i,function(n){var r=format("select * from ({sql}) __torque_wrap_sql limit 0",{sql:t.getSQL()});t.sql(r,function(t){n&&t&&e({updated_at:n.last_updated,fields:t.fields})},{parseJSON:!0})})},_fetchKeySpan:function(){var e,t,n,r,i=this;this._fetchUpdateAt(function(o){if(o){i.options.extra_params=i.options.extra_params||{},i.options.extra_params.last_updated=o.updated_at||0,i.options.extra_params.cache_policy="persist",i.options.is_time="date"===o.fields[i.options.column].type;var a=i.options.column;i.options.is_time?(n="date_part('epoch', max({column}))",r="date_part('epoch', min({column}))",a=format("date_part('epoch', {column})",i.options)):(n="max({column})",r="min({column})"),e=format(n,{column:i.options.column}),t=format(r,{column:i.options.column});var s=format(" SELECT st_xmax(st_envelope(st_collect(the_geom))) xmax, st_ymax(st_envelope(st_collect(the_geom))) ymax, st_xmin(st_envelope(st_collect(the_geom))) xmin, st_ymin(st_envelope(st_collect(the_geom))) ymin, count(*) as num_steps, {max_col} max_date, {min_col} min_date FROM  ({sql}) __torque_wrap_sql ",{max_col:e,min_col:t,column:a,sql:i.getSQL()});i.sql(s,function(e){e=e.rows[0],i.options.start=e.min_date,i.options.end=e.max_date,i.options.step=(e.max_date-e.min_date)/Math.min(i.options.steps,e.num_steps>>0),i.options.data_steps=e.num_steps>>0,i.options.step=i.options.step||1,i.options.bounds=[[e.ymin,e.xmin],[e.ymax,e.xmax]],i._setReady(!0)},{parseJSON:!0,no_cdn:!0})}},{parseJSON:!0,no_cdn:!0})}},e.exports=l},function(e,t,n){e.exports={json:n(3e3),JsonArray:n(2999),windshaft:n(2998),tileJSON:n(2997)}},function(e,t,n){(function(t){var r=t.carto||n(299),i=["#layer {","  polygon-fill: #FFFF00;","  [value > 10] { polygon-fill: #FFFF00; }","  [value > 100] { polygon-fill: #FFCC00; }","  [value > 1000] { polygon-fill: #FE9929; }","  [value > 10000] { polygon-fill: #FF6600; }","  [value > 100000] { polygon-fill: #FF3300; }","}"].join("\n");Math.PI;function RectanbleRenderer(e,t){this.options=t,r.tree.Reference.set(torque["torque-reference"]),this.setCanvas(e),this.setCartoCSS(this.options.cartocss||i)}RectanbleRenderer.prototype={setCartoCSS:function(e){if(this._cartoCssStyle=(new r.RendererJS).render(e),this._cartoCssStyle.getLayers().length>1)throw new Error("only one CartoCSS layer is supported");this._shader=this._cartoCssStyle.getLayers()[0].shader},setCanvas:function(e){e&&(this._canvas=e,this._ctx=e.getContext("2d"))},accumulate:function(e,t){var n,r,i,o,a,s,l=Profiler.metric("RectangleRender:accumulate").start(),u=this.options.resolution,c=256/u,d=new Float32Array(c*c);for("object"!=typeof t&&(t=[t]),i=0;i<t.length;++i)if(o=t[i],a=e.timeCount[o])for(s=e.timeIndex[o],r=0;r<a;++r)n=e.renderDataPos[s+r],d[e.x[n]/u*c+e.y[n]/u]+=e.renderData[s+r];return l.end(),d},renderTileAccum:function(e,t,n){var r,i,o,a,s=Profiler.metric("RectangleRender:renderTileAccum").start(),l=this.options.resolution,u=this._ctx,c=256/l|0,d=c*c;this._colors;this.options.blendmode&&(u.globalCompositeOperation=this.options.blendmode);for(var f=this._shader["polygon-opacity"]||function(){return 1},h=0;h<d;++h){var p=h,m=e[h];m&&(i=p/c|0,o=p%c,r=this._shader["polygon-fill"]({value:m},{zoom:0}),u.fillStyle=r,null===(a=f({value:m},{zoom:0}))&&(a=1),u.globalAlpha=a,u.fillRect(i*l,256-l-o*l,l,l))}s.end()},renderTile:function(e,t,n){if(this._canvas){var r=this.options.resolution,i=this._ctx,o=this._colors;if(e.timeCount[t]){this._canvas.width,this._canvas.height;for(var a=e.timeIndex[t],s=0;s<activePixels;++s){var l=e.renderDataPos[a+s],u=e.renderData[a+s];if(u){var c=o[Math.min(u,o.length-1)],d=e.x[l],f=e.y[l];i.fillStyle=c,i.fillRect(d,f,r,r)}}}return n&&n(null)}}},e.exports=RectanbleRenderer}).call(this,n(48))},function(e,t,n){"use strict";!function(){var t={};function sum(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function mean(e){return 0===e.length?null:sum(e)/e.length}function root_mean_square(e){if(0===e.length)return null;for(var t=0,n=0;n<e.length;n++)t+=Math.pow(e[n],2);return Math.sqrt(t/e.length)}function variance(e){if(0===e.length)return null;for(var t=mean(e),n=[],r=0;r<e.length;r++)n.push(Math.pow(e[r]-t,2));return mean(n)}function standard_deviation(e){return 0===e.length?null:Math.sqrt(variance(e))}function sum_nth_power_deviations(e,t){for(var n=mean(e),r=0,i=0;i<e.length;i++)r+=Math.pow(e[i]-n,t);return r}function sample_variance(e){return e.length<=1?null:sum_nth_power_deviations(e,2)/(e.length-1)}function sample_standard_deviation(e){return e.length<=1?null:Math.sqrt(sample_variance(e))}function sample_covariance(e,t){if(e.length<=1||e.length!==t.length)return null;for(var n=mean(e),r=mean(t),i=0,o=0;o<e.length;o++)i+=(e[o]-n)*(t[o]-r);return i/(e.length-1)}function median(e){if(0===e.length)return null;var t=e.slice().sort(function(e,t){return e-t});return t.length%2==1?t[(t.length-1)/2]:(t[t.length/2-1]+t[t.length/2])/2}function shuffle_in_place(e,t){t=t||Math.random;for(var n,r,i=e.length;i>0;)r=Math.floor(t()*i--),n=e[i],e[i]=e[r],e[r]=n;return e}function shuffle(e,t){return shuffle_in_place((e=e.slice()).slice(),t)}function quantile_sorted(e,t){var n=e.length*t;return t<0||t>1?null:1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function quantile(e,t){if(0===e.length)return null;var n=e.slice().sort(function(e,t){return e-t});if(t.length){for(var r=[],i=0;i<t.length;i++)r[i]=quantile_sorted(n,t[i]);return r}return quantile_sorted(n,t)}function iqr(e){return 0===e.length?null:quantile(e,.75)-quantile(e,.25)}function mad(e){if(!e||0===e.length)return null;for(var t=median(e),n=[],r=0;r<e.length;r++)n.push(Math.abs(e[r]-t));return median(n)}function jenksMatrices(e,t){var n,r,i=[],o=[],a=0;for(n=0;n<e.length+1;n++){var s=[],l=[];for(r=0;r<t+1;r++)s.push(0),l.push(0);i.push(s),o.push(l)}for(n=1;n<t+1;n++)for(i[1][n]=1,o[1][n]=0,r=2;r<e.length+1;r++)o[r][n]=1/0;for(var u=2;u<e.length+1;u++){for(var c=0,d=0,f=0,h=0,p=1;p<u+1;p++){var m=u-p+1,g=e[m-1];if(a=(d+=g*g)-(c+=g)*c/++f,0!==(h=m-1))for(r=2;r<t+1;r++)o[u][r]>=a+o[h][r-1]&&(i[u][r]=m,o[u][r]=a+o[h][r-1])}i[u][1]=1,o[u][1]=a}return{lower_class_limits:i,variance_combinations:o}}function jenksBreaks(e,t,n){var r=e.length,i=[],o=n;for(i[n]=e[e.length-1];o>0;)i[o-1]=e[t[r][o]-1],r=t[r][o]-1,o--;return i}e.exports=t;var n=[.5,.504,.508,.512,.516,.5199,.5239,.5279,.5319,.5359,.5398,.5438,.5478,.5517,.5557,.5596,.5636,.5675,.5714,.5753,.5793,.5832,.5871,.591,.5948,.5987,.6026,.6064,.6103,.6141,.6179,.6217,.6255,.6293,.6331,.6368,.6406,.6443,.648,.6517,.6554,.6591,.6628,.6664,.67,.6736,.6772,.6808,.6844,.6879,.6915,.695,.6985,.7019,.7054,.7088,.7123,.7157,.719,.7224,.7257,.7291,.7324,.7357,.7389,.7422,.7454,.7486,.7517,.7549,.758,.7611,.7642,.7673,.7704,.7734,.7764,.7794,.7823,.7852,.7881,.791,.7939,.7967,.7995,.8023,.8051,.8078,.8106,.8133,.8159,.8186,.8212,.8238,.8264,.8289,.8315,.834,.8365,.8389,.8413,.8438,.8461,.8485,.8508,.8531,.8554,.8577,.8599,.8621,.8643,.8665,.8686,.8708,.8729,.8749,.877,.879,.881,.883,.8849,.8869,.8888,.8907,.8925,.8944,.8962,.898,.8997,.9015,.9032,.9049,.9066,.9082,.9099,.9115,.9131,.9147,.9162,.9177,.9192,.9207,.9222,.9236,.9251,.9265,.9279,.9292,.9306,.9319,.9332,.9345,.9357,.937,.9382,.9394,.9406,.9418,.9429,.9441,.9452,.9463,.9474,.9484,.9495,.9505,.9515,.9525,.9535,.9545,.9554,.9564,.9573,.9582,.9591,.9599,.9608,.9616,.9625,.9633,.9641,.9649,.9656,.9664,.9671,.9678,.9686,.9693,.9699,.9706,.9713,.9719,.9726,.9732,.9738,.9744,.975,.9756,.9761,.9767,.9772,.9778,.9783,.9788,.9793,.9798,.9803,.9808,.9812,.9817,.9821,.9826,.983,.9834,.9838,.9842,.9846,.985,.9854,.9857,.9861,.9864,.9868,.9871,.9875,.9878,.9881,.9884,.9887,.989,.9893,.9896,.9898,.9901,.9904,.9906,.9909,.9911,.9913,.9916,.9918,.992,.9922,.9925,.9927,.9929,.9931,.9932,.9934,.9936,.9938,.994,.9941,.9943,.9945,.9946,.9948,.9949,.9951,.9952,.9953,.9955,.9956,.9957,.9959,.996,.9961,.9962,.9963,.9964,.9965,.9966,.9967,.9968,.9969,.997,.9971,.9972,.9973,.9974,.9974,.9975,.9976,.9977,.9977,.9978,.9979,.9979,.998,.9981,.9981,.9982,.9982,.9983,.9984,.9984,.9985,.9985,.9986,.9986,.9987,.9987,.9987,.9988,.9988,.9989,.9989,.9989,.999,.999];function error_function(e){var t=1/(1+.5*Math.abs(e)),n=t*Math.exp(-Math.pow(e,2)-1.26551223+1.00002368*t+.37409196*Math.pow(t,2)+.09678418*Math.pow(t,3)-.18628806*Math.pow(t,4)+.27886807*Math.pow(t,5)-1.13520398*Math.pow(t,6)+1.48851587*Math.pow(t,7)-.82215223*Math.pow(t,8)+.17087277*Math.pow(t,9));return e>=0?1-n:n-1}var r=1e-4;function factorial(e){if(e<0)return null;for(var t=1,n=2;n<=e;n++)t*=n;return t}function binomial_distribution(e,t){if(t<0||t>1||e<=0||e%1!=0)return null;function probability_mass(e,t,n){return factorial(t)/(factorial(e)*factorial(t-e))*(Math.pow(n,e)*Math.pow(1-n,t-e))}var n=0,i=0,o={};do{o[n]=probability_mass(n,e,t),i+=o[n],n++}while(i<1-r);return o}var i={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}};t.linear_regression=function linear_regression(){var e={},t=[];return e.data=function(n){return arguments.length?(t=n.slice(),e):t},e.mb=function(){var e,n,r=t.length;if(1===r)e=0,n=t[0][1];else{for(var i,o,a,s=0,l=0,u=0,c=0,d=0;d<r;d++)s+=o=(i=t[d])[0],l+=a=i[1],u+=o*o,c+=o*a;n=l/r-(e=(r*c-s*l)/(r*u-s*s))*s/r}return{m:e,b:n}},e.m=function(){return e.mb().m},e.b=function(){return e.mb().b},e.line=function(){var t=e.mb(),n=t.m,r=t.b;return function(e){return r+n*e}},e},t.standard_deviation=standard_deviation,t.r_squared=function r_squared(e,t){if(e.length<2)return 1;for(var n,r=0,i=0;i<e.length;i++)r+=e[i][1];n=r/e.length;for(var o=0,a=0;a<e.length;a++)o+=Math.pow(n-e[a][1],2);for(var s=0,l=0;l<e.length;l++)s+=Math.pow(e[l][1]-t(e[l][0]),2);return 1-s/o},t.median=median,t.mean=mean,t.mode=function mode(e){if(0===e.length)return null;if(1===e.length)return e[0];for(var t,n=e.slice().sort(function(e,t){return e-t}),r=n[0],i=0,o=1,a=1;a<n.length+1;a++)n[a]!==r?(o>i&&(i=o,t=r),o=1,r=n[a]):o++;return t},t.min=function min(e){for(var t,n=0;n<e.length;n++)(e[n]<t||void 0===t)&&(t=e[n]);return t},t.max=function max(e){for(var t,n=0;n<e.length;n++)(e[n]>t||void 0===t)&&(t=e[n]);return t},t.sum=sum,t.quantile=quantile,t.quantile_sorted=quantile_sorted,t.iqr=iqr,t.mad=mad,t.chunk=function chunk(e,t){var n=[];if(t<=0)return null;for(var r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},t.shuffle=shuffle,t.shuffle_in_place=shuffle_in_place,t.sample=function sample(e,t,n){return shuffle(e,n).slice(0,t)},t.sample_covariance=sample_covariance,t.sample_correlation=function sample_correlation(e,t){var n=sample_covariance(e,t),r=sample_standard_deviation(e),i=sample_standard_deviation(t);return null===n||null===r||null===i?null:n/r/i},t.sample_variance=sample_variance,t.sample_standard_deviation=sample_standard_deviation,t.sample_skewness=function sample_skewness(e){if(e.length<3)return null;var t=e.length,n=Math.pow(sample_standard_deviation(e),3);return t*sum_nth_power_deviations(e,3)/((t-1)*(t-2)*n)},t.geometric_mean=function geometric_mean(e){if(0===e.length)return null;for(var t=1,n=0;n<e.length;n++){if(e[n]<=0)return null;t*=e[n]}return Math.pow(t,1/e.length)},t.harmonic_mean=function harmonic_mean(e){if(0===e.length)return null;for(var t=0,n=0;n<e.length;n++){if(e[n]<=0)return null;t+=1/e[n]}return e.length/t},t.root_mean_square=root_mean_square,t.variance=variance,t.t_test=function t_test(e,t){return(mean(e)-t)/(standard_deviation(e)/Math.sqrt(e.length))},t.t_test_two_sample=function t_test_two_sample(e,t,n){var r=e.length,i=t.length;if(!r||!i)return null;n||(n=0);var o=mean(e),a=mean(t),s=((r-1)*sample_variance(e)+(i-1)*sample_variance(t))/(r+i-2);return(o-a-n)/Math.sqrt(s*(1/r+1/i))},t.jenksMatrices=jenksMatrices,t.jenksBreaks=jenksBreaks,t.jenks=function jenks(e,t){return t>e.length?null:jenksBreaks(e=e.slice().sort(function(e,t){return e-t}),jenksMatrices(e,t).lower_class_limits,t)},t.bayesian=function bayesian(){var e={},t=0,n={};return e.train=function(e,r){for(var i in n[r]||(n[r]={}),e){var o=e[i];void 0===n[r][i]&&(n[r][i]={}),void 0===n[r][i][o]&&(n[r][i][o]=0),n[r][i][e[i]]++}t++},e.score=function(e){var r,i={};for(var o in e){var a=e[o];for(r in n)void 0===i[r]&&(i[r]={}),n[r][o]?i[r][o+"_"+a]=(n[r][o][a]||0)/t:i[r][o+"_"+a]=0}var s={};for(r in i)for(var l in i[r])void 0===s[r]&&(s[r]=0),s[r]+=i[r][l];return s},e},t.epsilon=r,t.factorial=factorial,t.bernoulli_distribution=function bernoulli_distribution(e){return e<0||e>1?null:binomial_distribution(1,e)},t.binomial_distribution=binomial_distribution,t.poisson_distribution=function poisson_distribution(e){if(e<=0)return null;var t=0,n=0,i={};function probability_mass(e,t){return Math.pow(Math.E,-t)*Math.pow(t,e)/factorial(e)}do{i[t]=probability_mass(t,e),n+=i[t],t++}while(n<1-r);return i},t.chi_squared_goodness_of_fit=function chi_squared_goodness_of_fit(e,t,n){for(var r,o,a=0,s=t(mean(e)),l=[],u=[],c=0;c<e.length;c++)void 0===l[e[c]]&&(l[e[c]]=0),l[e[c]]++;for(c=0;c<l.length;c++)void 0===l[c]&&(l[c]=0);for(o in s)o in l&&(u[o]=s[o]*e.length);for(o=u.length-1;o>=0;o--)u[o]<3&&(u[o-1]+=u[o],u.pop(),l[o-1]+=l[o],l.pop());for(o=0;o<l.length;o++)a+=Math.pow(l[o]-u[o],2)/u[o];return r=l.length-1-1,i[r][n]<a},t.z_score=function z_score(e,t,n){return(e-t)/n},t.cumulative_std_normal_probability=function cumulative_std_normal_probability(e){var t=Math.abs(e),r=Math.min(Math.round(100*t),n.length-1);return e>=0?n[r]:+(1-n[r]).toFixed(4)},t.standard_normal_table=n,t.error_function=error_function,t.average=mean,t.interquartile_range=iqr,t.mixin=function mixin(e){if(!Object.defineProperty||!Object.defineProperties)throw new Error("without defineProperty, simple-statistics cannot be mixed in");var n,r=["median","standard_deviation","sum","sample_skewness","mean","min","max","quantile","geometric_mean","harmonic_mean","root_mean_square"];function wrap(e){return function(){var n=Array.prototype.slice.apply(arguments);return n.unshift(this),t[e].apply(t,n)}}n=e?e.slice():Array.prototype;for(var i=0;i<r.length;i++)Object.defineProperty(n,r[i],{value:wrap(r[i]),configurable:!0,enumerable:!1,writable:!0});return n},t.median_absolute_deviation=mad,t.rms=root_mean_square,t.erf=error_function}()},function(e,t,n){var r=n(3003);e.exports=function(e,t,n){var i=[];return e.features.forEach(function(e){void 0!==e.properties[t]&&i.push(e.properties[t])}),r.jenks(i,n)}},function(e,t,n){var r=n(298);n(3004);function TorqueDataSource(e){this.tiles=e}e.exports=TorqueDataSource,TorqueDataSource.prototype.getName=function(){return"TorqueDataSource"},TorqueDataSource.prototype.getRamp=function(e,t,n,i){var o=[],a=null,s=Object.keys(this.tiles).map(function(e){return this.tiles[e].renderData}.bind(this)).reduce(function(e,t,n){for(n=0;n<t.length;n++)e.push(t[n]);return e},[]),l=r.extent(s);if(n&&"equal"!==n&&"jenks"!==n)if("quantiles"===n)o=r.scale.quantile().range(r.range(t)).domain(s).quantiles();else if("headstails"===n){var u=s.sort(function(e,t){return e-t});if(u.length<t)a="Number of bins should be lower than total number of rows";else if(u.length===t)o=u;else{var c=r.mean(u);o.push(c);for(var d=1;d<t;d++)o.push(r.mean(u.filter(function(e){return e>o[length-1]})))}}else a=new Error("Quantification method "+n+" is not supported");else{var f=r.scale.linear().domain([0,t]).range(l);o=r.range(t).map(f)}i(a,o)}},function(e,t,n){"use strict";function MetadataHolder(){this.rules=[]}e.exports=MetadataHolder,MetadataHolder.prototype.add=function(e){this.rules.push(e)}},function(e,t,n){"use strict";n(230).polyfill();var r=n(267)("fn-anonymous-tuple"),i=n(333);e.exports=function(){return function fn$anonymousTuple(){r("fn$anonymousTuple(%j)",arguments);var e=arguments;return new Promise(function(t){var n=Object.keys(e).map(function(t){return e[t]});t(new i(n))})}},e.exports.fnName="anonymousTuple"},function(e,t,n){"use strict";n(230).polyfill();var r=n(267)("fn-identity");e.exports=function(e){return function fn$identity(){r("fn$identity(%j)",arguments);for(var t=new Array(arguments.length),n=0;n<t.length;++n)"string"==typeof arguments[n]?t[n]="'"+arguments[n]+"'":t[n]=arguments[n];return Promise.resolve(e+"("+t.join(",")+")")}},e.exports.fnName="pass"},function(e,t,n){"use strict";n(230).polyfill();var r=n(333),i=n(267)("fn-range"),o=n(1342);e.exports=function(){return function fn$range(e,t,n){return i("fn$range(%j)",arguments),new Promise(function(i){var a=[e,t];n=Number.isFinite(n)?n:5,i(new r(a,n,o,Number.POSITIVE_INFINITY))})}},e.exports.fnName="range"},function(e,t,n){"use strict";var r=n(867),i=n(375),o=n(267)("ramp-result");function RampResult(e,t,n){this.values=e,this.filters=t,this.mapping=n||">",this.mapping="=="===this.mapping?"=":this.mapping}e.exports=RampResult;var a={"=":"equality","==":"equality",">":"greater_than_or_equal",">=":"greater_than_or_equal","<":"less_than_or_equal","<=":"less_than_or_equal"},s="category",l="default",u="range";function defaultStats(e){return{min:(e=e||{}).min_val,max:e.max_val,avg:e.avg_val}}function selector(e,t){return t=t||"",e&&"root"!==e.type&&(t=selector(e.parent,e.selector+t)),t}RampResult.prototype.process=function(e,t,n){var r=a[this.mapping];return r===a["<"]?this.processLessThanOrEqual(e,t,n):r===a["=="]?this.processEquality(e,t,n):this.processGreaterThanOrEqual(e,t,n)},RampResult.supports=function(e){return a.hasOwnProperty(e)||!e},RampResult.prototype.processEquality=function(e,t,n){if(this.filters.getLength()>this.values.getMaxSize())throw new r("`"+this.mapping+"` requires more or same values than filters to work.");var o=this.values.get(this.filters.getLength()+1),a=this.filters.get(),u=t,c=null;o.length!==a.length&&(c=o[o.length-1],u=i.decl({prop:t.prop,value:c}),t.replaceWith(u));var d={start:0,end:a.length},f=this.processGeneric(u,e,c,o,a,d,0);if(o.length===a.length&&t.remove(),n){var h={selector:selector(u.parent),prop:u.prop,column:e,mapping:this.mapping,buckets:[],stats:{}};h.buckets=a.map(function(e,t){return{filter:{name:e,type:s},value:o[t]}}),null!==c&&h.buckets.push({filter:{type:l},value:c}),n.add(h)}return f},RampResult.prototype.processGreaterThanOrEqual=function(e,t,n){var r=Math.min(this.values.getMaxSize(),this.filters.getMaxSize()),a=this.values.get(r<=1?r+1:r),s=this.filters.get(r),l=a[0],c=i.decl({prop:t.prop,value:l});t.replaceWith(c);var d={start:0,end:Math.max(s.length-1,0)};if(n){var f=defaultStats(this.filters.stats),h={selector:selector(c.parent),prop:c.prop,column:e,mapping:this.mapping,buckets:[],stats:{filter_avg:f.avg}},p=null;Number.isFinite(f.min)&&(p=f.min);var m=null;h.buckets=s.slice(d.start,d.end).map(function(e,t){var n={filter:{type:u,start:p,end:e},value:a[t]};return p=e,m=t,n});var g=null===m?0:m+1;h.buckets.push({filter:{type:u,start:p,end:f.max},value:a[g]}),o(h.buckets),n.add(h)}return this.processGeneric(c,e,l,a,s,d,1)},RampResult.prototype.processLessThanOrEqual=function(e,t,n){var r=this.values.get(this.filters.getLength()),o=this.filters.get(),a=r[r.length-1],s=i.decl({prop:t.prop,value:a});t.replaceWith(s);var l={start:0,end:o.length-1};if(n){var c=defaultStats(this.filters.stats),d={selector:selector(s.parent),prop:s.prop,column:e,mapping:this.mapping,buckets:[],stats:{filter_avg:c.avg}},f=null;Number.isFinite(c.min)&&(f=c.min);var h=null;d.buckets=o.slice(l.start,l.end).map(function(e,t){var n={filter:{type:u,start:f,end:e},value:r[t]};return f=e,h=t,n});var p=null===h?0:h+1;d.buckets.push({filter:{type:u,start:f,end:c.max},value:r[p]}),n.add(d)}var m=r.concat().reverse(),g=o.concat().reverse();return this.processGeneric(s,e,a,m,g,l,1)},RampResult.prototype.processGeneric=function(e,t,n,r,o,a,s){var l=e;return o.slice(a.start,a.end).forEach(function(n,o){var a=function processFilterValue(e){return"false"!==e&&("true"===e||(Number.isFinite(e)?e:'"'+e+'"'))}(n),u=this.filters.meta.columnName||t,c=i.rule({selector:"[ "+u+" "+this.mapping+" "+a+" ]"});c.append(i.decl({prop:e.prop,value:r[o+s]})),c.moveAfter(l),l=c}.bind(this)),{values:r,filters:o,mapping:this.mapping}}},function(e,t,n){"use strict";var r=n(333),i=n(597),o=n(866);e.exports=function isResult(e){return"object"==typeof e&&null!==e&&(e.constructor===r||e.constructor===i||e.constructor===o)}},function(e,t,n){"use strict";n(230).polyfill();var r=n(267)("fn-ramp"),i=n(1345),o=n(867),a=n(3011),s=n(1342),l=n(333),u=n(597),c=n(866),d=n(3010);function createSplitStrategy(e){return function splitStrategy(t,n,r,i,o,a){var s=n.filter(evenIndex),c=n.filter(reverse(evenIndex)),f=s.slice(1);return"="===e&&(c=c.slice(1).concat([n.filter(reverse(evenIndex))[0]])),f=f.filter(reverse(isNull)),new d(new l(c),new u(f,null,r,i),e).process(t,o,a)}}function evenIndex(e,t){return t%2==0}function isNull(e){return null===e}function reverse(e,t){return function(){return!e.apply(t,arguments)}}var f={max:function maxStrategy(e,t,n,r,i,o){var a=t.filter(reverse(evenIndex)),s=t.filter(evenIndex).filter(reverse(isNull));return new d(new l(a),new u(s,null,n,r),">").process(e,i,o)},split:createSplitStrategy(">"),exact:createSplitStrategy("="),"=":createSplitStrategy("=")};e.exports=function(e,t,n){return function fn$ramp(p,m){return r("fn$ramp(%j)",arguments),r('Using "%s" datasource to calculate ramp',e.getName()),m=Array.prototype.slice.call(arguments,1),function ramp(e,t,n){if(0===n.length)return Promise.reject(new o("invalid number of arguments"));if(Number.isFinite(n[0]))return function compatibilityNumericRamp(e,t,n){if(n.length<2)return Promise.reject(new o("invalid number of arguments"));var r,i,c=+n[0],d=+n[1],f=null;if(Number.isFinite(n[2]))if(r=n[2],a(n[3])){if(f=n[3],i=null,f.getLength()!==r)return Promise.reject(new o("invalid ramp length, got "+f.getLength()+" values, expected "+r))}else f=null,i=n[3];else a(n[2])?(f=n[2],r=f.getLength(),i=null):(f=null,r=5,i=n[2]);var h=new l([c,d],r,s,Number.POSITIVE_INFINITY);if(null===f)return i=(i||"quantiles").toLowerCase(),getRamp(e,t,r,i).then(compatibilityCreateRampFn(h));return f=f.is(u)?f:new u(f.get(),"max"),Promise.resolve(f).then(compatibilityCreateRampFn(h))}(e,t,n);if(!a(n[1]))return function compatibilityValuesRamp(e,t,n){var r=n[0],i=(n[1]||"quantiles").toLowerCase(),o=r.getLength();return getRamp(e,t,o,i).then(compatibilityCreateRampFn(r))}(e,t,n);var r=n[0],i=n[1],d=function strategyFromMapping(e){if(h.hasOwnProperty(e))return h[e];return e}(n[2]);return(i=i.is(l)?new u(i.get(),d):i).is(c)?i.get(t,d).then(createRampFn(r)):Promise.resolve(i).then(createRampFn(r))}(e,p,m).then(function(e){return e.constructor===d?e.process(i(p),t,n):(f.hasOwnProperty(e.strategy)?f[e.strategy]:f.max)(i(p),e.ramp,e.stats,e.meta,t,n)}).catch(function(e){var n={};throw t.parent&&(n.selector=t.parent.selector),t.source&&(n.source={start:t.source.start,end:t.source.end}),new o('Failed to process "'+t.prop+'" property:',e,n)})}};var h={quantiles:"max",equal:"max",jenks:"max",headtails:"split",category:"exact"};function getRamp(e,t,n,r){return new Promise(function(a,s){e.getRamp(i(t),n,r,function(e,t){if(e)return s(new o("unable to compute ramp,",e));var n="max",r={},i={};Array.isArray(t)||(n=t.strategy||"max",r=t.stats,i=t.meta||{},t=t.ramp),a(new u(t,n,r,i))})})}function compatibilityCreateRampFn(e){return function prepareRamp(t){var n,r=Math.min(e.getLength(),t.getLength()),i=[],o=t.get(),a=e.get();if(r>0)for(n=0;n<r;n++)i.push(o[n]),i.push(a[n]);else i.push(null,a[0]);return{ramp:i,strategy:t.getStrategy(),stats:t.stats,meta:t.meta}}}function createRampFn(e){return function prepareRamp(t){if(d.supports(t.getStrategy()))return new d(e,t,t.getStrategy());var n,r=Math.min(e.getMaxSize(),t.getMaxSize()),i=[],o=t.get(),a=e.get(r);if(r>0)for(n=0;n<r;n++)i.push(o[n]),i.push(a[n]);else i.push(null,a[0]);return{ramp:i,strategy:t.getStrategy(),stats:t.stats,meta:t.meta}}}e.exports.fnName="ramp"},function(e,t,n){"use strict";n(230).polyfill();var r=n(1344),i=n(333),o=n(1343),a=n(267)("fn-colorbrewer");e.exports=function(){return function fn$colorbrewer(e,t){return a("fn$colorbrewer(%j)",arguments),new Promise(function(n,a){if(!r.hasOwnProperty(e))return a(new Error('Invalid colorbrewer scheme: "'+e+'"'));var s=r[e],l=o(s);t=Math.min(l.max,Math.max(l.min,t||5)),n(new i(s,t,null,l.max))})}},e.exports.fnName="colorbrewer"},function(e,t,n){var r,i;void 0===(i="function"==typeof(r={YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}})?r.call(t,n,t,e):r)||(e.exports=i)},function(e,t,n){var r,i;!function(){var o={Burg:{2:["#ffc6c4","#672044"],3:["#ffc6c4","#cc607d","#672044"],4:["#ffc6c4","#e38191","#ad466c","#672044"],5:["#ffc6c4","#ee919b","#cc607d","#9e3963","#672044"],6:["#ffc6c4","#f29ca3","#da7489","#b95073","#93345d","#672044"],7:["#ffc6c4","#f4a3a8","#e38191","#cc607d","#ad466c","#8b3058","#672044"],tags:["quantitative"]},BurgYl:{2:["#fbe6c5","#70284a"],3:["#fbe6c5","#dc7176","#70284a"],4:["#fbe6c5","#ee8a82","#c8586c","#70284a"],5:["#fbe6c5","#f2a28a","#dc7176","#b24b65","#70284a"],6:["#fbe6c5","#f4b191","#e7807d","#d06270","#a44360","#70284a"],7:["#fbe6c5","#f5ba98","#ee8a82","#dc7176","#c8586c","#9c3f5d","#70284a"],tags:["quantitative"]},RedOr:{2:["#f6d2a9","#b13f64"],3:["#f6d2a9","#ea8171","#b13f64"],4:["#f6d2a9","#f19c7c","#dd686c","#b13f64"],5:["#f6d2a9","#f3aa84","#ea8171","#d55d6a","#b13f64"],6:["#f6d2a9","#f4b28a","#ef9177","#e3726d","#cf5669","#b13f64"],7:["#f6d2a9","#f5b78e","#f19c7c","#ea8171","#dd686c","#ca5268","#b13f64"],tags:["quantitative"]},OrYel:{2:["#ecda9a","#ee4d5a"],3:["#ecda9a","#f7945d","#ee4d5a"],4:["#ecda9a","#f3ad6a","#f97b57","#ee4d5a"],5:["#ecda9a","#f1b973","#f7945d","#f86f56","#ee4d5a"],6:["#ecda9a","#f0c079","#f5a363","#f98558","#f76856","#ee4d5a"],7:["#ecda9a","#efc47e","#f3ad6a","#f7945d","#f97b57","#f66356","#ee4d5a"],tags:["quantitative"]},Peach:{2:["#fde0c5","#eb4a40"],3:["#fde0c5","#f59e72","#eb4a40"],4:["#fde0c5","#f8b58b","#f2855d","#eb4a40"],5:["#fde0c5","#f9c098","#f59e72","#f17854","#eb4a40"],6:["#fde0c5","#fac7a1","#f7ac80","#f38f65","#f0704f","#eb4a40"],7:["#fde0c5","#facba6","#f8b58b","#f59e72","#f2855d","#ef6a4c","#eb4a40"],tags:["quantitative"]},PinkYl:{2:["#fef6b5","#e15383"],3:["#fef6b5","#ffa679","#e15383"],4:["#fef6b5","#ffc285","#fa8a76","#e15383"],5:["#fef6b5","#ffd08e","#ffa679","#f67b77","#e15383"],6:["#fef6b5","#ffd795","#ffb77f","#fd9576","#f37378","#e15383"],7:["#fef6b5","#ffdd9a","#ffc285","#ffa679","#fa8a76","#f16d7a","#e15383"],tags:["quantitative"]},Mint:{2:["#e4f1e1","#0d585f"],3:["#e4f1e1","#63a6a0","#0d585f"],4:["#e4f1e1","#89c0b6","#448c8a","#0d585f"],5:["#E4F1E1","#9CCDC1","#63A6A0","#337F7F","#0D585F"],6:["#e4f1e1","#abd4c7","#7ab5ad","#509693","#2c7778","#0d585f"],7:["#e4f1e1","#b4d9cc","#89c0b6","#63a6a0","#448c8a","#287274","#0d585f"],tags:["quantitative"]},BluGrn:{2:["#c4e6c3","#1d4f60"],3:["#c4e6c3","#4da284","#1d4f60"],4:["#c4e6c3","#6dbc90","#36877a","#1d4f60"],5:["#c4e6c3","#80c799","#4da284","#2d7974","#1d4f60"],6:["#c4e6c3","#8dce9f","#5fb28b","#3e927e","#297071","#1d4f60"],7:["#c4e6c3","#96d2a4","#6dbc90","#4da284","#36877a","#266b6e","#1d4f60"],tags:["quantitative"]},DarkMint:{2:["#d2fbd4","#123f5a"],3:["#d2fbd4","#559c9e","#123f5a"],4:["#d2fbd4","#7bbcb0","#3a7c89","#123f5a"],5:["#d2fbd4","#8eccb9","#559c9e","#2b6c7f","#123f5a"],6:["#d2fbd4","#9cd5be","#6cafa9","#458892","#266377","#123f5a"],7:["#d2fbd4","#a5dbc2","#7bbcb0","#559c9e","#3a7c89","#235d72","#123f5a"],tags:["quantitative"]},Emrld:{2:["#d3f2a3","#074050"],3:["#d3f2a3","#4c9b82","#074050"],4:["#d3f2a3","#6cc08b","#217a79","#074050"],5:["#d3f2a3","#82d091","#4c9b82","#19696f","#074050"],6:["#d3f2a3","#8fda94","#60b187","#35877d","#145f69","#074050"],7:["#d3f2a3","#97e196","#6cc08b","#4c9b82","#217a79","#105965","#074050"],tags:["quantitative"]},ag_GrnYl:{2:["#245668","#EDEF5D"],3:["#245668","#39AB7E","#EDEF5D"],4:["#245668","#0D8F81","#6EC574","#EDEF5D"],5:["#245668","#04817E","#39AB7E","#8BD16D","#EDEF5D"],6:["#245668","#09787C","#1D9A81","#58BB79","#9DD869","#EDEF5D"],7:["#245668","#0F7279","#0D8F81","#39AB7E","#6EC574","#A9DC67","#EDEF5D"],tags:["aggregation"]},BluYl:{2:["#f7feae","#045275"],3:["#f7feae","#46aea0","#045275"],4:["#f7feae","#7ccba2","#089099","#045275"],5:["#f7feae","#9bd8a4","#46aea0","#058092","#045275"],6:["#f7feae","#ace1a4","#68bfa1","#2a9c9c","#02778e","#045275"],7:["#f7feae","#b7e6a5","#7ccba2","#46aea0","#089099","#00718b","#045275"],tags:["quantitative"]},Teal:{2:["#d1eeea","#2a5674"],3:["#d1eeea","#68abb8","#2a5674"],4:["#d1eeea","#85c4c9","#4f90a6","#2a5674"],5:["#d1eeea","#96d0d1","#68abb8","#45829b","#2a5674"],6:["#d1eeea","#a1d7d6","#79bbc3","#599bae","#3f7994","#2a5674"],7:["#d1eeea","#a8dbd9","#85c4c9","#68abb8","#4f90a6","#3b738f","#2a5674"],tags:["quantitative"]},TealGrn:{2:["#b0f2bc","#257d98"],3:["#b0f2bc","#4cc8a3","#257d98"],4:["#b0f2bc","#67dba5","#38b2a3","#257d98"],5:["#b0f2bc","#77e2a8","#4cc8a3","#31a6a2","#257d98"],6:["#b0f2bc","#82e6aa","#5bd4a4","#3fbba3","#2e9ea1","#257d98"],7:["#b0f2bc","#89e8ac","#67dba5","#4cc8a3","#38b2a3","#2c98a0","#257d98"],tags:["quantitative"]},Purp:{2:["#f3e0f7","#63589f"],3:["#f3e0f7","#b998dd","#63589f"],4:["#f3e0f7","#d1afe8","#9f82ce","#63589f"],5:["#f3e0f7","#dbbaed","#b998dd","#9178c4","#63589f"],6:["#f3e0f7","#e0c2ef","#c8a5e4","#aa8bd4","#8871be","#63589f"],7:["#f3e0f7","#e4c7f1","#d1afe8","#b998dd","#9f82ce","#826dba","#63589f"],tags:["quantitative"]},PurpOr:{3:["#f9ddda","#ce78b3","#573b88"],4:["#f9ddda","#e597b9","#ad5fad","#573b88"],5:["#f9ddda","#eda8bd","#ce78b3","#9955a8","#573b88"],6:["#f9ddda","#f0b2c1","#dd8ab6","#bb69b0","#8c4fa4","#573b88"],7:["#f9ddda","#f2b9c4","#e597b9","#ce78b3","#ad5fad","#834ba0","#573b88"],tags:["quantitative"]},Sunset:{2:["#f3e79b","#5c53a5"],3:["#f3e79b","#eb7f86","#5c53a5"],4:["#f3e79b","#f8a07e","#ce6693","#5c53a5"],5:["#f3e79b","#fab27f","#eb7f86","#b95e9a","#5c53a5"],6:["#f3e79b","#fabc82","#f59280","#dc6f8e","#ab5b9e","#5c53a5"],7:["#f3e79b","#fac484","#f8a07e","#eb7f86","#ce6693","#a059a0","#5c53a5"],tags:["quantitative"]},Magenta:{2:["#f3cbd3","#6c2167"],3:["#f3cbd3","#ca699d","#6c2167"],4:["#f3cbd3","#dd88ac","#b14d8e","#6c2167"],5:["#f3cbd3","#e498b4","#ca699d","#a24186","#6c2167"],6:["#f3cbd3","#e7a2b9","#d67ba5","#bc5894","#983a81","#6c2167"],7:["#f3cbd3","#eaa9bd","#dd88ac","#ca699d","#b14d8e","#91357d","#6c2167"],tags:["quantitative"]},SunsetDark:{2:["#fcde9c","#7c1d6f"],3:["#fcde9c","#e34f6f","#7c1d6f"],4:["#fcde9c","#f0746e","#dc3977","#7c1d6f"],5:["#fcde9c","#f58670","#e34f6f","#d72d7c","#7c1d6f"],6:["#fcde9c","#f89872","#ec666d","#df4273","#c5287b","#7c1d6f"],7:["#fcde9c","#faa476","#f0746e","#e34f6f","#dc3977","#b9257a","#7c1d6f"],tags:["quantitative"]},ag_Sunset:{2:["#4b2991","#edd9a3"],3:["#4b2991","#ea4f88","#edd9a3"],4:["#4b2991","#c0369d","#fa7876","#edd9a3"],5:["#4b2991","#a52fa2","#ea4f88","#fa9074","#edd9a3"],6:["#4b2991","#932da3","#d43f96","#f7667c","#f89f77","#edd9a3"],7:["#4b2991","#872ca2","#c0369d","#ea4f88","#fa7876","#f6a97a","#edd9a3"],tags:["aggregation"]},BrwnYl:{2:["#ede5cf","#541f3f"],3:["#ede5cf","#c1766f","#541f3f"],4:["#ede5cf","#d39c83","#a65461","#541f3f"],5:["#ede5cf","#daaf91","#c1766f","#95455a","#541f3f"],6:["#ede5cf","#ddba9b","#cd8c7a","#b26166","#8a3c56","#541f3f"],7:["#ede5cf","#e0c2a2","#d39c83","#c1766f","#a65461","#813753","#541f3f"],tags:["quantitative"]},ArmyRose:{2:["#929b4f","#db8195"],3:["#a3ad62","#fdfbe4","#df91a3"],4:["#929b4f","#d9dbaf","#f3d1ca","#db8195"],5:["#879043","#c1c68c","#fdfbe4","#ebb4b8","#d8758b"],6:["#7f883b","#b0b874","#e3e4be","#f6ddd1","#e4a0ac","#d66d85"],7:["#798234","#a3ad62","#d0d3a2","#fdfbe4","#f0c6c3","#df91a3","#d46780"],tags:["diverging"]},Fall:{2:["#3d5941","#ca562c"],3:["#3d5941","#f6edbd","#ca562c"],4:["#3d5941","#b5b991","#edbb8a","#ca562c"],5:["#3d5941","#96a07c","#f6edbd","#e6a272","#ca562c"],6:["#3d5941","#839170","#cecea2","#f1cf9e","#e19464","#ca562c"],7:["#3d5941","#778868","#b5b991","#f6edbd","#edbb8a","#de8a5a","#ca562c"],tags:["diverging"]},Geyser:{2:["#008080","#ca562c"],3:["#008080","#f6edbd","#ca562c"],4:["#008080","#b4c8a8","#edbb8a","#ca562c"],5:["#008080","#92b69e","#f6edbd","#e6a272","#ca562c"],6:["#008080","#7eab98","#ced7b1","#f1cf9e","#e19464","#ca562c"],7:["#008080","#70a494","#b4c8a8","#f6edbd","#edbb8a","#de8a5a","#ca562c"],tags:["diverging"]},Temps:{2:["#009392","#cf597e"],3:["#009392","#e9e29c","#cf597e"],4:["#009392","#9ccb86","#eeb479","#cf597e"],5:["#009392","#71be83","#e9e29c","#ed9c72","#cf597e"],6:["#009392","#52b684","#bcd48c","#edc783","#eb8d71","#cf597e"],7:["#009392","#39b185","#9ccb86","#e9e29c","#eeb479","#e88471","#cf597e"],tags:["diverging"]},TealRose:{2:["#009392","#d0587e"],3:["#009392","#f1eac8","#d0587e"],4:["#009392","#91b8aa","#f1eac8","#dfa0a0","#d0587e"],5:["#009392","#91b8aa","#f1eac8","#dfa0a0","#d0587e"],6:["#009392","#72aaa1","#b1c7b3","#e5b9ad","#d98994","#d0587e"],7:["#009392","#72aaa1","#b1c7b3","#f1eac8","#e5b9ad","#d98994","#d0587e"],tags:["diverging"]},Tropic:{2:["#009B9E","#C75DAB"],3:["#009B9E","#F1F1F1","#C75DAB"],4:["#009B9E","#A7D3D4","#E4C1D9","#C75DAB"],5:["#009B9E","#7CC5C6","#F1F1F1","#DDA9CD","#C75DAB"],6:["#009B9E","#5DBCBE","#C6DFDF","#E9D4E2","#D99BC6","#C75DAB"],7:["#009B9E","#42B7B9","#A7D3D4","#F1F1F1","#E4C1D9","#D691C1","#C75DAB"],tags:["diverging"]},Earth:{2:["#A16928","#2887a1"],3:["#A16928","#edeac2","#2887a1"],4:["#A16928","#d6bd8d","#b5c8b8","#2887a1"],5:["#A16928","#caa873","#edeac2","#98b7b2","#2887a1"],6:["#A16928","#c29b64","#e0cfa2","#cbd5bc","#85adaf","#2887a1"],7:["#A16928","#bd925a","#d6bd8d","#edeac2","#b5c8b8","#79a7ac","#2887a1"],tags:["diverging"]},Antique:{2:["#855C75","#D9AF6B","#7C7C7C"],3:["#855C75","#D9AF6B","#AF6458","#7C7C7C"],4:["#855C75","#D9AF6B","#AF6458","#736F4C","#7C7C7C"],5:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#7C7C7C"],6:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#7C7C7C"],7:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#7C7C7C"],8:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#7C7C7C"],9:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#A06177","#7C7C7C"],10:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#A06177","#8C785D","#7C7C7C"],11:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#A06177","#8C785D","#467378","#7C7C7C"],tags:["qualitative"]},Bold:{2:["#7F3C8D","#11A579","#A5AA99"],3:["#7F3C8D","#11A579","#3969AC","#A5AA99"],4:["#7F3C8D","#11A579","#3969AC","#F2B701","#A5AA99"],5:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#A5AA99"],6:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#A5AA99"],7:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#A5AA99"],8:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#A5AA99"],9:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#CF1C90","#A5AA99"],10:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#CF1C90","#f97b72","#A5AA99"],11:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#CF1C90","#f97b72","#4b4b8f","#A5AA99"],tags:["qualitative"]},Pastel:{2:["#66C5CC","#F6CF71","#B3B3B3"],3:["#66C5CC","#F6CF71","#F89C74","#B3B3B3"],4:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#B3B3B3"],5:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#B3B3B3"],6:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#B3B3B3"],7:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#B3B3B3"],8:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#B3B3B3"],9:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B3B3B3"],10:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#B3B3B3"],11:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#D3B484","#B3B3B3"],tags:["qualitative"]},Prism:{2:["#5F4690","#1D6996","#666666"],3:["#5F4690","#1D6996","#38A6A5","#666666"],4:["#5F4690","#1D6996","#38A6A5","#0F8554","#666666"],5:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#666666"],6:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#666666"],7:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#666666"],8:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#666666"],9:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#94346E","#666666"],10:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#94346E","#6F4070","#666666"],11:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#94346E","#6F4070","#994E95","#666666"],tags:["qualitative"]},Safe:{2:["#88CCEE","#CC6677","#888888"],3:["#88CCEE","#CC6677","#DDCC77","#888888"],4:["#88CCEE","#CC6677","#DDCC77","#117733","#888888"],5:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#888888"],6:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#888888"],7:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#888888"],8:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#888888"],9:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#882255","#888888"],10:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#882255","#661100","#888888"],11:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#882255","#661100","#6699CC","#888888"],tags:["qualitative","colorblind"]},Vivid:{2:["#E58606","#5D69B1","#A5AA99"],3:["#E58606","#5D69B1","#52BCA3","#A5AA99"],4:["#E58606","#5D69B1","#52BCA3","#99C945","#A5AA99"],5:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#A5AA99"],6:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#A5AA99"],7:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#A5AA99"],8:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#A5AA99"],9:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#764E9F","#A5AA99"],10:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#764E9F","#ED645A","#A5AA99"],11:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#764E9F","#ED645A","#CC3A8E","#A5AA99"],tags:["qualitative"]}},a={Blues:{tags:["quantitative"]},BrBG:{tags:["diverging"]},Greys:{tags:["quantitative"]},PiYG:{tags:["diverging"]},PRGn:{tags:["diverging"]},Purples:{tags:["quantitative"]},RdYlGn:{tags:["diverging"]},Spectral:{tags:["diverging"]},YlOrBr:{tags:["quantitative"]},YlGn:{tags:["quantitative"]},YlGnBu:{tags:["quantitative"]},YlOrRd:{tags:["quantitative"]}},s=n(1344);for(var l in s){var u=s[l],c={};for(var d in u)c[d]=u[d];l in a&&(c.tags=a[l].tags),o["cb_"+l]=c}void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i)}()},function(e,t,n){"use strict";n(230).polyfill();var r=n(245),i=n(333),o=n(1343),a=n(267)("fn-cartocolor");e.exports=function(){return function fn$cartocolor(e,t){return a("fn$cartocolor(%j)",arguments),new Promise(function(n,a){if(!r.hasOwnProperty(e))return a(new Error('Invalid cartocolor scheme: "'+e+'"'));var s=r[e],l=o(s);t=Math.min(l.max,Math.max(l.min,t||5)),n(new i(s,t,null,l.max))})}},e.exports.fnName="cartocolor"},function(e,t,n){"use strict";var r=n(374).createBucketsFn;e.exports=function(e){return r(e,"quantiles",">")},e.exports.fnName="quantiles"},function(e,t,n){"use strict";var r=n(374).createBucketsFn;e.exports=function(e){return r(e,"jenks",">")},e.exports.fnName="jenks"},function(e,t,n){"use strict";var r=n(374).createBucketsFn;e.exports=function(e){return r(e,"headtails","<")},e.exports.fnName="headtails"},function(e,t,n){"use strict";var r=n(374).createBucketsFn;e.exports=function(e){return r(e,"equal",">")},e.exports.fnName="equal"},function(e,t,n){"use strict";var r=n(374).createBucketsFn;e.exports=function(e){return r(e,"category","==")},e.exports.fnName="category"},function(e,t,n){"use strict";var r=[n(374),n(3021),n(3020),n(3019),n(3018),n(3017),n(3016),n(3013),n(3012),n(3009)].reduce(function(e,t){return e[t.fnName]=t,e},{}),i=n(3008),o=n(3007),a={create:function(e,t,n,a){if(""===e)return o();var s=r[e];return s?s(t,n,a):i(e)}};e.exports=a},function(e,t){var n=1e3,r=60*n,i=60*r,o=24*i,a=7*o,s=365.25*o;function plural(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var l=typeof e;if("string"===l&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var l=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*s;case"weeks":case"week":case"w":return l*a;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*i;case"minutes":case"minute":case"mins":case"min":case"m":return l*r;case"seconds":case"second":case"secs":case"sec":case"s":return l*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===l&&!1===isNaN(e))return t.long?function fmtLong(e){var t=Math.abs(e);if(t>=o)return plural(e,t,o,"day");if(t>=i)return plural(e,t,i,"hour");if(t>=r)return plural(e,t,r,"minute");if(t>=n)return plural(e,t,n,"second");return e+" ms"}(e):function fmtShort(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";e.exports=function setup(e){function selectColor(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return createDebug.colors[Math.abs(t)%createDebug.colors.length]}function createDebug(e){var t;function debug(){if(debug.enabled){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=debug,o=Number(new Date),a=o-(t||o);i.diff=a,i.prev=t,i.curr=o,t=o,n[0]=createDebug.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var s=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;s++;var r=createDebug.formatters[t];if("function"==typeof r){var o=n[s];e=r.call(i,o),n.splice(s,1),s--}return e}),createDebug.formatArgs.call(i,n),(i.log||createDebug.log).apply(i,n)}}return debug.namespace=e,debug.enabled=createDebug.enabled(e),debug.useColors=createDebug.useColors(),debug.color=selectColor(e),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var e=createDebug.instances.indexOf(this);return-1!==e&&(createDebug.instances.splice(e,1),!0)}function extend(e,t){return createDebug(this.namespace+(void 0===t?":":t)+e)}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},createDebug.disable=function disable(){createDebug.enable("")},createDebug.enable=function enable(e){var t;createDebug.save(e),createDebug.names=[],createDebug.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+e.substr(1)+"$")):createDebug.names.push(new RegExp("^"+e+"$")));for(t=0;t<createDebug.instances.length;t++){var i=createDebug.instances[t];i.enabled=createDebug.enabled(i.namespace)}},createDebug.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=createDebug.skips.length;t<n;t++)if(createDebug.skips[t].test(e))return!1;for(t=0,n=createDebug.names.length;t<n;t++)if(createDebug.names[t].test(e))return!0;return!1},createDebug.humanize=n(3023),Object.keys(e).forEach(function(t){createDebug[t]=e[t]}),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(e,t,n){"use strict";(function(r){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function log(){var e;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function formatArgs(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(i=++r)}),t.splice(i,0,n)},t.save=function save(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function load(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG);return e},t.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function localstorage(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(3024)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(197))},function(e,t,n){"use strict";n(230).polyfill();var r=n(267)("fn-executor"),i=n(3022);function FnExecutor(e,t,n,r,i){this.datasource=e,this.fnName=t,this.args=n,this.decl=r,this.metadataHolder=i}e.exports=FnExecutor,FnExecutor.prototype.exec=function(){var e=this;r("[ENTERING] Fn.prototype.exec %s(%j)",e.fnName,e.args);var t=i.create(e.fnName,e.datasource,e.decl,e.metadataHolder);return Promise.all(e.getNestedFns()).then(function(n){return r("[QUEUE DONE] %s=%j",e.fnName,n),n.forEach(function(t){e.args[t.index]=t.result}),t.apply(t,e.args)})},FnExecutor.prototype.getNestedFns=function(){var e=this;return e.getNestedFnIndexes().map(function(t){return e.execFn(t)})},FnExecutor.prototype.getNestedFnIndexes=function(){return this.args.reduce(function(e,t,n){return t instanceof FnExecutor&&e.push(n),e},[])},FnExecutor.prototype.execFn=function(e){return this.args[e].exec().then(function(t){return{index:e,result:t}})}},function(e,t,n){"use strict";n(230).polyfill();var r=n(3026);function FnBuilder(e){this.datasource=e,this.fnExecutors=[]}e.exports=FnBuilder,FnBuilder.prototype.add=function(e,t,n){this.fnExecutors.push({decl:e,fnExecutor:function createFnExecutor(e,t,n,i){var o=[];Array.isArray(e.nodes)&&(o=e.nodes.reduce(function(e,r){switch(r.type){case"word":Number.isFinite(+r.value)?e.push(+r.value):e.push(r.value);break;case"string":e.push(r.value);break;case"function":e.push(createFnExecutor(r,t,n,i))}return e},[]));return new r(t,e.value,o,n,i)}(t,this.datasource,e,n)})},FnBuilder.prototype.exec=function(){var e=this.fnExecutors.map(function(e){return e.fnExecutor.exec()});return Promise.all(e)}},function(e,t){var n="-".charCodeAt(0),r="+".charCodeAt(0),i=".".charCodeAt(0);e.exports=function(e){for(var t,o=0,a=e.length,s=!1,l=!1,u="";o<a;){if((t=e.charCodeAt(o))>=48&&t<=57)u+=e[o],l=!0;else if(t===i){if(s)break;s=!0,u+=e[o]}else{if(t!==r&&t!==n)break;if(0!==o)break;u+=e[o]}o+=1}return!!l&&{number:u,unit:e.slice(o)}}},function(e,t){function stringifyNode(e,t){var n,r,i=e.type,o=e.value;return t&&void 0!==(r=t(e))?r:"word"===i||"space"===i?o:"string"===i?(n=e.quote||"")+o+(e.unclosed?"":n):"comment"===i?"/*"+o+(e.unclosed?"":"*/"):"div"===i?(e.before||"")+o+(e.after||""):Array.isArray(e.nodes)?(n=stringify(e.nodes),"function"!==i?n:o+"("+(e.before||"")+n+(e.after||"")+(e.unclosed?"":")")):o}function stringify(e,t){var n,r;if(Array.isArray(e)){for(n="",r=e.length-1;~r;r-=1)n=stringifyNode(e[r],t)+n;return n}return stringifyNode(e,t)}e.exports=stringify},function(e,t){e.exports=function walk(e,t,n){var r,i,o,a;for(r=0,i=e.length;r<i;r+=1)o=e[r],n||(a=t(o,r,e)),!1!==a&&"function"===o.type&&Array.isArray(o.nodes)&&walk(o.nodes,t,n),n&&t(o,r,e)}},function(e,t){var n="(".charCodeAt(0),r=")".charCodeAt(0),i="'".charCodeAt(0),o='"'.charCodeAt(0),a="\\".charCodeAt(0),s="/".charCodeAt(0),l=",".charCodeAt(0),u=":".charCodeAt(0),c="*".charCodeAt(0);e.exports=function(e){for(var t,d,f,h,p,m,g,v,y=[],_=e,b=0,w=_.charCodeAt(b),x=_.length,C=[{nodes:y}],S=0,k="",T="",L="";b<x;)if(w<=32){t=b;do{t+=1,w=_.charCodeAt(t)}while(w<=32);h=_.slice(b,t),f=y[y.length-1],w===r&&S?L=h:f&&"div"===f.type?f.after=h:w===l||w===u||w===s&&_.charCodeAt(t+1)!==c?T=h:y.push({type:"space",sourceIndex:b,value:h}),b=t}else if(w===i||w===o){t=b,h={type:"string",sourceIndex:b,quote:d=w===i?"'":'"'};do{if(p=!1,~(t=_.indexOf(d,t+1)))for(m=t;_.charCodeAt(m-1)===a;)m-=1,p=!p;else t=(_+=d).length-1,h.unclosed=!0}while(p);h.value=_.slice(b+1,t),y.push(h),b=t+1,w=_.charCodeAt(b)}else if(w===s&&_.charCodeAt(b+1)===c)h={type:"comment",sourceIndex:b},-1===(t=_.indexOf("*/",b))&&(h.unclosed=!0,t=_.length),h.value=_.slice(b+2,t),y.push(h),b=t+2,w=_.charCodeAt(b);else if(w===s||w===l||w===u)h=_[b],y.push({type:"div",sourceIndex:b-T.length,value:h,before:T,after:""}),T="",b+=1,w=_.charCodeAt(b);else if(n===w){t=b;do{t+=1,w=_.charCodeAt(t)}while(w<=32);if(h={type:"function",sourceIndex:b-k.length,value:k,before:_.slice(b+1,t)},b=t,"url"===k&&w!==i&&w!==o){t-=1;do{if(p=!1,~(t=_.indexOf(")",t+1)))for(m=t;_.charCodeAt(m-1)===a;)m-=1,p=!p;else t=(_+=")").length-1,h.unclosed=!0}while(p);g=t;do{g-=1,w=_.charCodeAt(g)}while(w<=32);h.nodes=b!==g+1?[{type:"word",sourceIndex:b,value:_.slice(b,g+1)}]:[],h.unclosed&&g+1!==t?(h.after="",h.nodes.push({type:"space",sourceIndex:g+1,value:_.slice(g+1,t)})):h.after=_.slice(g+1,t),b=t+1,w=_.charCodeAt(b),y.push(h)}else S+=1,h.after="",y.push(h),C.push(h),y=h.nodes=[],v=h;k=""}else if(r===w&&S)b+=1,w=_.charCodeAt(b),v.after=L,L="",S-=1,C.pop(),y=(v=C[S]).nodes;else{t=b;do{w===a&&(t+=1),t+=1,w=_.charCodeAt(t)}while(t<x&&!(w<=32||w===i||w===o||w===l||w===u||w===s||w===n||w===r&&S));h=_.slice(b,t),n===w?k=h:y.push({type:"word",sourceIndex:b,value:h}),b=t}for(b=C.length-1;b;b-=1)C[b].unclosed=!0;return C[0].nodes}},function(e,t,n){var r=n(3031),i=n(3030),o=n(3029);function ValueParser(e){return this instanceof ValueParser?(this.nodes=r(e),this):new ValueParser(e)}ValueParser.prototype.toString=function(){return Array.isArray(this.nodes)?o(this.nodes):""},ValueParser.prototype.walk=function(e,t){return i(this.nodes,e,t),this},ValueParser.unit=n(3028),ValueParser.walk=i,ValueParser.stringify=o,e.exports=ValueParser},function(e,t,n){"use strict";n(230).polyfill();var r=n(3032),i=n(375),o=n(3027);function PostcssTurboCarto(e){this.datasource=e}e.exports=PostcssTurboCarto,PostcssTurboCarto.prototype.getPlugin=function(e){var t=this;return i.plugin("turbo-carto",function(){return function(n){var i=new o(t.datasource);return n.walkDecls(function(t){r(t.value).walk(function(n){if("function"===n.type)return i.add(t,n,e),!1},!1)}),i.exec()}})}},function(e,t,n){"use strict";t.__esModule=!0,t.default={prefix:function prefix(e){if("-"===e[0]){var t=e.indexOf("-",1);return e.substr(0,t+1)}return""},unprefixed:function unprefixed(e){if("-"===e[0]){var t=e.indexOf("-",1);return e.substr(t+1)}return e}},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=n(601),o=_interopRequireDefault(n(600)),a=_interopRequireDefault(n(246)),s=_interopRequireDefault(n(433));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var l=function(){function PreviousMap(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PreviousMap),this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");var n=t.map?t.map.prev:void 0,r=this.loadMap(t.from,n);r&&(this.text=r)}return PreviousMap.prototype.consumer=function consumer(){return this.consumerCache||(this.consumerCache=new o.default.SourceMapConsumer(this.text)),this.consumerCache},PreviousMap.prototype.withContent=function withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)},PreviousMap.prototype.startWith=function startWith(e,t){return!!e&&e.substr(0,t.length)===t},PreviousMap.prototype.loadAnnotation=function loadAnnotation(e){var t=e.match(/\/\*\s*# sourceMappingURL=(.*)\s*\*\//);t&&(this.annotation=t[1].trim())},PreviousMap.prototype.decodeInline=function decodeInline(e){var t="data:application/json;charset=utf-8;base64,",n="data:application/json;base64,",r="data:application/json,";if(this.startWith(e,r))return decodeURIComponent(e.substr(r.length));if(this.startWith(e,n))return i.Base64.decode(e.substr(n.length));if(this.startWith(e,t))return i.Base64.decode(e.substr(t.length));var o=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+o)},PreviousMap.prototype.loadMap=function loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if(t instanceof o.default.SourceMapConsumer)return o.default.SourceMapGenerator.fromSourceMap(t).toString();if(t instanceof o.default.SourceMapGenerator)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var n=this.annotation;return e&&(n=a.default.join(a.default.dirname(e),n)),this.root=a.default.dirname(n),!(!s.default.existsSync||!s.default.existsSync(n))&&s.default.readFileSync(n,"utf-8").toString().trim()}},PreviousMap.prototype.isMap=function isMap(e){return"object"===(void 0===e?"undefined":r(e))&&("string"==typeof e.mappings||"string"==typeof e._mappings)},PreviousMap}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=_interopRequireDefault(n(1354)),o=_interopRequireDefault(n(3035)),a=_interopRequireDefault(n(246));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s=0,l=function(){function Input(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Input),this.css=e.toString(),"\ufeff"!==this.css[0]&&"\ufffe"!==this.css[0]||(this.css=this.css.slice(1)),t.from&&(this.file=a.default.resolve(t.from));var n=new o.default(this.css,t);if(n.text){this.map=n;var r=n.consumer().file;!this.file&&r&&(this.file=this.mapResolve(r))}this.file||(s+=1,this.id="<input css "+s+">"),this.map&&(this.map.file=this.from)}return Input.prototype.error=function error(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],o=void 0,a=this.origin(t,n);return(o=a?new i.default(e,a.line,a.column,a.source,a.file,r.plugin):new i.default(e,t,n,this.css,this.file,r.plugin)).input={line:t,column:n,source:this.css},this.file&&(o.input.file=this.file),o},Input.prototype.origin=function origin(e,t){if(!this.map)return!1;var n=this.map.consumer(),r=n.originalPositionFor({line:e,column:t});if(!r.source)return!1;var i={file:this.mapResolve(r.source),line:r.line,column:r.column},o=n.sourceContentFor(r.source);return o&&(i.source=o),i},Input.prototype.mapResolve=function mapResolve(e){return a.default.resolve(this.map.consumer().sourceRoot||".",e)},r(Input,[{key:"from",get:function get(){return this.file||this.id}}]),Input}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function tokenize(e){var t=[],n=e.css.valueOf(),C=void 0,S=void 0,k=void 0,T=void 0,L=void 0,M=void 0,E=void 0,A=void 0,P=void 0,R=void 0,O=void 0,D=void 0,F=void 0,I=n.length,N=-1,$=1,B=0;function unclosed(t){throw e.error("Unclosed "+t,$,B-N)}for(;B<I;){switch(((C=n.charCodeAt(B))===s||C===u||C===d&&n.charCodeAt(B+1)!==s)&&(N=B,$+=1),C){case s:case l:case c:case d:case u:S=B;do{S+=1,(C=n.charCodeAt(S))===s&&(N=S,$+=1)}while(C===l||C===s||C===c||C===d||C===u);t.push(["space",n.slice(B,S)]),B=S-1;break;case p:t.push(["{","{",$,B-N]);break;case m:t.push(["}","}",$,B-N]);break;case y:t.push([":",":",$,B-N]);break;case g:t.push([";",";",$,B-N]);break;case f:if(D=t.length?t[t.length-1][1]:"",F=n.charCodeAt(B+1),"url"===D&&F!==r&&F!==i&&F!==l&&F!==s&&F!==c&&F!==u&&F!==d){S=B;do{for(R=!1,-1===(S=n.indexOf(")",S+1))&&unclosed("bracket"),O=S;n.charCodeAt(O-1)===o;)O-=1,R=!R}while(R);t.push(["brackets",n.slice(B,S+1),$,B-N,$,S-N]),B=S}else S=n.indexOf(")",B+1),M=n.slice(B,S+1),-1===S||x.test(M)?t.push(["(","(",$,B-N]):(t.push(["brackets",M,$,B-N,$,S-N]),B=S);break;case h:t.push([")",")",$,B-N]);break;case r:case i:k=C===r?"'":'"',S=B;do{for(R=!1,-1===(S=n.indexOf(k,S+1))&&unclosed("quote"),O=S;n.charCodeAt(O-1)===o;)O-=1,R=!R}while(R);M=n.slice(B,S+1),T=M.split("\n"),(L=T.length-1)>0?(A=$+L,P=S-T[L].length):(A=$,P=N),t.push(["string",n.slice(B,S+1),$,B-N,A,S-P]),N=P,$=A,B=S;break;case _:b.lastIndex=B+1,b.test(n),S=0===b.lastIndex?n.length-1:b.lastIndex-2,t.push(["at-word",n.slice(B,S+1),$,B-N,$,S-N]),B=S;break;case o:for(S=B,E=!0;n.charCodeAt(S+1)===o;)S+=1,E=!E;C=n.charCodeAt(S+1),E&&C!==a&&C!==l&&C!==s&&C!==c&&C!==d&&C!==u&&(S+=1),t.push(["word",n.slice(B,S+1),$,B-N,$,S-N]),B=S;break;default:C===a&&n.charCodeAt(B+1)===v?(0===(S=n.indexOf("*/",B+2)+1)&&unclosed("comment"),M=n.slice(B,S+1),T=M.split("\n"),(L=T.length-1)>0?(A=$+L,P=S-T[L].length):(A=$,P=N),t.push(["comment",M,$,B-N,A,S-P]),N=P,$=A,B=S):(w.lastIndex=B+1,w.test(n),S=0===w.lastIndex?n.length-1:w.lastIndex-2,t.push(["word",n.slice(B,S+1),$,B-N,$,S-N]),B=S)}B++}return t};var r=39,i=34,o=92,a=47,s=10,l=32,u=12,c=9,d=13,f=40,h=41,p=123,m=125,g=59,v=42,y=58,_=64,b=/[ \n\t\r\f\{\(\)'"\\;/]/g,w=/[ \n\t\r\f\(\)\{\}:;@!'"\\]|\/(?=\*)/g,x=/.[\\\/\("'\n]/;e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=_interopRequireDefault(n(874)),i=_interopRequireDefault(n(3037)),o=_interopRequireDefault(n(870)),a=_interopRequireDefault(n(599)),s=_interopRequireDefault(n(868)),l=_interopRequireDefault(n(598));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var u=function(){function Parser(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Parser),this.input=e,this.pos=0,this.root=new s.default,this.current=this.root,this.spaces="",this.semicolon=!1,this.root.source={input:e,start:{line:1,column:1}}}return Parser.prototype.tokenize=function tokenize(){this.tokens=(0,i.default)(this.input)},Parser.prototype.loop=function loop(){for(var e=void 0;this.pos<this.tokens.length;){switch((e=this.tokens[this.pos])[0]){case"word":case":":this.word();break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.spaces+=e[1]}this.pos+=1}this.endFile()},Parser.prototype.comment=function comment(e){var t=new o.default;this.init(t,e[2],e[3]),t.source.end={line:e[4],column:e[5]};var n=e[1].slice(2,-2);if(/^\s*$/.test(n))t.text="",t.raws.left=n,t.raws.right="";else{var r=n.match(/^(\s*)([^]*[^\s])(\s*)$/);t.text=r[2],t.raws.left=r[1],t.raws.right=r[3]}},Parser.prototype.emptyRule=function emptyRule(e){var t=new l.default;this.init(t,e[2],e[3]),t.selector="",t.raws.between="",this.current=t},Parser.prototype.word=function word(){var e=void 0,t=!1,n=null,r=!1,i=null,o=0,a=this.pos;for(this.pos+=1;this.pos<this.tokens.length;){if("("===(n=(e=this.tokens[this.pos])[0]))i||(i=e),o+=1;else if(0===o){if(";"===n){if(r)return void this.decl(this.tokens.slice(a,this.pos+1));break}if("{"===n)return void this.rule(this.tokens.slice(a,this.pos+1));if("}"===n){this.pos-=1,t=!0;break}":"===n&&(r=!0)}else")"===n&&0===(o-=1)&&(i=null);this.pos+=1}if(this.pos===this.tokens.length&&(this.pos-=1,t=!0),o>0&&this.unclosedBracket(i),t&&r){for(;this.pos>a&&("space"===(e=this.tokens[this.pos][0])||"comment"===e);)this.pos-=1;this.decl(this.tokens.slice(a,this.pos+1))}else this.unknownWord(a)},Parser.prototype.rule=function rule(e){e.pop();var t=new l.default;this.init(t,e[0][2],e[0][3]),t.raws.between=this.spacesFromEnd(e),this.raw(t,"selector",e),this.current=t},Parser.prototype.decl=function decl(e){var t=new r.default;this.init(t);var n=e[e.length-1];for(";"===n[0]&&(this.semicolon=!0,e.pop()),n[4]?t.source.end={line:n[4],column:n[5]}:t.source.end={line:n[2],column:n[3]};"word"!==e[0][0];)t.raws.before+=e.shift()[1];for(t.source.start={line:e[0][2],column:e[0][3]},t.prop="";e.length;){if(":"===(c=e[0][0])||"space"===c||"comment"===c)break;t.prop+=e.shift()[1]}t.raws.between="";for(var i=void 0;e.length;){if(":"===(i=e.shift())[0]){t.raws.between+=i[1];break}t.raws.between+=i[1]}"_"!==t.prop[0]&&"*"!==t.prop[0]||(t.raws.before+=t.prop[0],t.prop=t.prop.slice(1)),t.raws.between+=this.spacesFromStart(e),this.precheckMissedSemicolon(e);for(var o=e.length-1;o>0;o--){if("!important"===(i=e[o])[1]){t.important=!0;var a=this.stringFrom(e,o);" !important"!==(a=this.spacesFromEnd(e)+a)&&(t.raws.important=a);break}if("important"===i[1]){for(var s=e.slice(0),l="",u=o;u>0;u--){var c=s[u][0];if(0===l.trim().indexOf("!")&&"space"!==c)break;l=s.pop()[1]+l}0===l.trim().indexOf("!")&&(t.important=!0,t.raws.important=l,e=s)}if("space"!==i[0]&&"comment"!==i[0])break}this.raw(t,"value",e),-1!==t.value.indexOf(":")&&this.checkMissedSemicolon(e)},Parser.prototype.atrule=function atrule(e){var t=new a.default;t.name=e[1].slice(1),""===t.name&&this.unnamedAtrule(t,e),this.init(t,e[2],e[3]);var n=!1,r=!1,i=[];for(this.pos+=1;this.pos<this.tokens.length;){if(";"===(e=this.tokens[this.pos])[0]){t.source.end={line:e[2],column:e[3]},this.semicolon=!0;break}if("{"===e[0]){r=!0;break}if("}"===e[0]){this.end(e);break}i.push(e),this.pos+=1}this.pos===this.tokens.length&&(n=!0),t.raws.between=this.spacesFromEnd(i),i.length?(t.raws.afterName=this.spacesFromStart(i),this.raw(t,"params",i),n&&(e=i[i.length-1],t.source.end={line:e[4],column:e[5]},this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),r&&(t.nodes=[],this.current=t)},Parser.prototype.end=function end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end={line:e[2],column:e[3]},this.current=this.current.parent):this.unexpectedClose(e)},Parser.prototype.endFile=function endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces},Parser.prototype.init=function init(e,t,n){this.current.push(e),e.source={start:{line:t,column:n},input:this.input},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)},Parser.prototype.raw=function raw(e,t,n){for(var r=void 0,i=void 0,o=n.length,a="",s=!0,l=0;l<o;l+=1)"comment"===(i=(r=n[l])[0])||"space"===i&&l===o-1?s=!1:a+=r[1];if(!s){var raw=n.reduce(function(e,t){return e+t[1]},"");e.raws[t]={value:a,raw:raw}}e[t]=a},Parser.prototype.spacesFromEnd=function spacesFromEnd(e){for(var t=void 0,n="";e.length&&("space"===(t=e[e.length-1][0])||"comment"===t);)n+=e.pop()[1];return n},Parser.prototype.spacesFromStart=function spacesFromStart(e){for(var t=void 0,n="";e.length&&("space"===(t=e[0][0])||"comment"===t);)n+=e.shift()[1];return n},Parser.prototype.stringFrom=function stringFrom(e,t){for(var n="",r=t;r<e.length;r++)n+=e[r][1];return e.splice(t,e.length-t),n},Parser.prototype.colon=function colon(e){for(var t=0,n=void 0,r=void 0,i=void 0,o=0;o<e.length;o++){if("("===(r=(n=e[o])[0]))t+=1;else if(")"===r)t-=1;else if(0===t&&":"===r){if(i){if("word"===i[0]&&"progid"===i[1])continue;return o}this.doubleColon(n)}i=n}return!1},Parser.prototype.unclosedBracket=function unclosedBracket(e){throw this.input.error("Unclosed bracket",e[2],e[3])},Parser.prototype.unknownWord=function unknownWord(e){var t=this.tokens[e];throw this.input.error("Unknown word",t[2],t[3])},Parser.prototype.unexpectedClose=function unexpectedClose(e){throw this.input.error("Unexpected }",e[2],e[3])},Parser.prototype.unclosedBlock=function unclosedBlock(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)},Parser.prototype.doubleColon=function doubleColon(e){throw this.input.error("Double colon",e[2],e[3])},Parser.prototype.unnamedAtrule=function unnamedAtrule(e,t){throw this.input.error("At-rule without name",t[2],t[3])},Parser.prototype.precheckMissedSemicolon=function precheckMissedSemicolon(e){},Parser.prototype.checkMissedSemicolon=function checkMissedSemicolon(e){var t=this.colon(e);if(!1!==t){for(var n=0,r=void 0,i=t-1;i>=0&&("space"===(r=e[i])[0]||2!==(n+=1));i--);throw this.input.error("Missed semicolon",r[2],r[3])}},Parser}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function Warning(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Warning),this.type="warning",this.text=e,t.node&&t.node.source){var n=t.node.positionBy(t);this.line=n.line,this.column=n.column}for(var r in t)this[r]=t[r]}return Warning.prototype.toString=function toString(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text},Warning}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3039));var o=function(){function Result(e,t,n){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Result),this.processor=e,this.messages=[],this.root=t,this.opts=n,this.css=void 0,this.map=void 0}return Result.prototype.toString=function toString(){return this.css},Result.prototype.warn=function warn(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin),this.messages.push(new i.default(e,t))},Result.prototype.warnings=function warnings(){return this.messages.filter(function(e){return"warning"===e.type})},r(Result,[{key:"content",get:function get(){return this.css}}]),Result}();t.default=o,e.exports=t.default},function(e,t,n){var r=n(1349).SourceMapGenerator,i=n(432),o=/(\r?\n)/,a="$$$isSourceNode$$$";function SourceNode(e,t,n,r,i){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==i?null:i,this[a]=!0,null!=r&&this.add(r)}SourceNode.fromStringWithSourceMap=function SourceNode_fromStringWithSourceMap(e,t,n){var r=new SourceNode,a=e.split(o),s=0,l=function(){return getNextLine()+(getNextLine()||"");function getNextLine(){return s<a.length?a[s++]:void 0}},u=1,c=0,d=null;return t.eachMapping(function(e){if(null!==d){if(!(u<e.generatedLine)){var t=(n=a[s]).substr(0,e.generatedColumn-c);return a[s]=n.substr(e.generatedColumn-c),c=e.generatedColumn,addMappingWithCode(d,t),void(d=e)}addMappingWithCode(d,l()),u++,c=0}for(;u<e.generatedLine;)r.add(l()),u++;if(c<e.generatedColumn){var n=a[s];r.add(n.substr(0,e.generatedColumn)),a[s]=n.substr(e.generatedColumn),c=e.generatedColumn}d=e},this),s<a.length&&(d&&addMappingWithCode(d,l()),r.add(a.splice(s).join(""))),t.sources.forEach(function(e){var o=t.sourceContentFor(e);null!=o&&(null!=n&&(e=i.join(n,e)),r.setSourceContent(e,o))}),r;function addMappingWithCode(e,t){if(null===e||void 0===e.source)r.add(t);else{var o=n?i.join(n,e.source):e.source;r.add(new SourceNode(e.originalLine,e.originalColumn,o,t,e.name))}}},SourceNode.prototype.add=function SourceNode_add(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[a]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},SourceNode.prototype.prepend=function SourceNode_prepend(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[a]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},SourceNode.prototype.walk=function SourceNode_walk(e){for(var t,n=0,r=this.children.length;n<r;n++)(t=this.children[n])[a]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},SourceNode.prototype.join=function SourceNode_join(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;n<r-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},SourceNode.prototype.replaceRight=function SourceNode_replaceRight(e,t){var n=this.children[this.children.length-1];return n[a]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},SourceNode.prototype.setSourceContent=function SourceNode_setSourceContent(e,t){this.sourceContents[i.toSetString(e)]=t},SourceNode.prototype.walkSourceContents=function SourceNode_walkSourceContents(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][a]&&this.children[t].walkSourceContents(e);var r=Object.keys(this.sourceContents);for(t=0,n=r.length;t<n;t++)e(i.fromSetString(r[t]),this.sourceContents[r[t]])},SourceNode.prototype.toString=function SourceNode_toString(){var e="";return this.walk(function(t){e+=t}),e},SourceNode.prototype.toStringWithSourceMap=function SourceNode_toStringWithSourceMap(e){var t={code:"",line:1,column:0},n=new r(e),i=!1,o=null,a=null,s=null,l=null;return this.walk(function(e,r){t.code+=e,null!==r.source&&null!==r.line&&null!==r.column?(o===r.source&&a===r.line&&s===r.column&&l===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name}),o=r.source,a=r.line,s=r.column,l=r.name,i=!0):i&&(n.addMapping({generated:{line:t.line,column:t.column}}),o=null,i=!1);for(var u=0,c=e.length;u<c;u++)10===e.charCodeAt(u)?(t.line++,t.column=0,u+1===c?(o=null,i=!1):i&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name})):t.column++}),this.walkSourceContents(function(e,t){n.setSourceContent(e,t)}),{code:t.code,map:n}},t.SourceNode=SourceNode},function(e,t){function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function doQuickSort(e,t,n,r){if(n<r){var i=n-1;swap(e,function randomIntInRange(e,t){return Math.round(e+Math.random()*(t-e))}(n,r),r);for(var o=e[r],a=n;a<r;a++)t(e[a],o)<=0&&swap(e,i+=1,a);swap(e,i+1,a);var s=i+1;doQuickSort(e,t,n,s-1),doQuickSort(e,t,s+1,r)}}t.quickSort=function(e,t){doQuickSort(e,t,0,e.length-1)}},function(e,t){t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.search=function search(e,n,r,i){if(0===n.length)return-1;var o=function recursiveSearch(e,n,r,i,o,a){var s=Math.floor((n-e)/2)+e,l=o(r,i[s],!0);return 0===l?s:l>0?n-s>1?recursiveSearch(s,n,r,i,o,a):a==t.LEAST_UPPER_BOUND?n<i.length?n:-1:s:s-e>1?recursiveSearch(e,s,r,i,o,a):a==t.LEAST_UPPER_BOUND?s:e<0?-1:e}(-1,n.length,e,n,r,i||t.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&0===r(n[o],n[o-1],!0);)--o;return o}},function(e,t,n){var r=n(432),i=n(3043),o=n(1347).ArraySet,a=n(1348),s=n(3042).quickSort;function SourceMapConsumer(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new IndexedSourceMapConsumer(t):new BasicSourceMapConsumer(t)}function BasicSourceMapConsumer(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=r.getArg(t,"version"),i=r.getArg(t,"sources"),a=r.getArg(t,"names",[]),s=r.getArg(t,"sourceRoot",null),l=r.getArg(t,"sourcesContent",null),u=r.getArg(t,"mappings"),c=r.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);i=i.map(String).map(r.normalize).map(function(e){return s&&r.isAbsolute(s)&&r.isAbsolute(e)?r.relative(s,e):e}),this._names=o.fromArray(a.map(String),!0),this._sources=o.fromArray(i,!0),this.sourceRoot=s,this.sourcesContent=l,this._mappings=u,this.file=c}function Mapping(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function IndexedSourceMapConsumer(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=r.getArg(t,"version"),i=r.getArg(t,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new o,this._names=new o;var a={line:-1,column:0};this._sections=i.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=r.getArg(e,"offset"),n=r.getArg(t,"line"),i=r.getArg(t,"column");if(n<a.line||n===a.line&&i<a.column)throw new Error("Section offsets must be ordered and non-overlapping.");return a=t,{generatedOffset:{generatedLine:n+1,generatedColumn:i+1},consumer:new SourceMapConsumer(r.getArg(e,"map"))}})}SourceMapConsumer.fromSourceMap=function(e){return BasicSourceMapConsumer.fromSourceMap(e)},SourceMapConsumer.prototype._version=3,SourceMapConsumer.prototype.__generatedMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),SourceMapConsumer.prototype.__originalMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),SourceMapConsumer.prototype._charIsMappingSeparator=function SourceMapConsumer_charIsMappingSeparator(e,t){var n=e.charAt(t);return";"===n||","===n},SourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(e,t){throw new Error("Subclasses must implement _parseMappings")},SourceMapConsumer.GENERATED_ORDER=1,SourceMapConsumer.ORIGINAL_ORDER=2,SourceMapConsumer.GREATEST_LOWER_BOUND=1,SourceMapConsumer.LEAST_UPPER_BOUND=2,SourceMapConsumer.prototype.eachMapping=function SourceMapConsumer_eachMapping(e,t,n){var i,o=t||null;switch(n||SourceMapConsumer.GENERATED_ORDER){case SourceMapConsumer.GENERATED_ORDER:i=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;i.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return null!=t&&null!=a&&(t=r.join(a,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,o)},SourceMapConsumer.prototype.allGeneratedPositionsFor=function SourceMapConsumer_allGeneratedPositionsFor(e){var t=r.getArg(e,"line"),n={source:r.getArg(e,"source"),originalLine:t,originalColumn:r.getArg(e,"column",0)};if(null!=this.sourceRoot&&(n.source=r.relative(this.sourceRoot,n.source)),!this._sources.has(n.source))return[];n.source=this._sources.indexOf(n.source);var o=[],a=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,i.LEAST_UPPER_BOUND);if(a>=0){var s=this._originalMappings[a];if(void 0===e.column)for(var l=s.originalLine;s&&s.originalLine===l;)o.push({line:r.getArg(s,"generatedLine",null),column:r.getArg(s,"generatedColumn",null),lastColumn:r.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++a];else for(var u=s.originalColumn;s&&s.originalLine===t&&s.originalColumn==u;)o.push({line:r.getArg(s,"generatedLine",null),column:r.getArg(s,"generatedColumn",null),lastColumn:r.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++a]}return o},t.SourceMapConsumer=SourceMapConsumer,BasicSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype),BasicSourceMapConsumer.prototype.consumer=SourceMapConsumer,BasicSourceMapConsumer.fromSourceMap=function SourceMapConsumer_fromSourceMap(e){var t=Object.create(BasicSourceMapConsumer.prototype),n=t._names=o.fromArray(e._names.toArray(),!0),i=t._sources=o.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file;for(var a=e._mappings.toArray().slice(),l=t.__generatedMappings=[],u=t.__originalMappings=[],c=0,d=a.length;c<d;c++){var f=a[c],h=new Mapping;h.generatedLine=f.generatedLine,h.generatedColumn=f.generatedColumn,f.source&&(h.source=i.indexOf(f.source),h.originalLine=f.originalLine,h.originalColumn=f.originalColumn,f.name&&(h.name=n.indexOf(f.name)),u.push(h)),l.push(h)}return s(t.__originalMappings,r.compareByOriginalPositions),t},BasicSourceMapConsumer.prototype._version=3,Object.defineProperty(BasicSourceMapConsumer.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?r.join(this.sourceRoot,e):e},this)}}),BasicSourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(e,t){for(var n,i,o,l,u,c=1,d=0,f=0,h=0,p=0,m=0,g=e.length,v=0,y={},_={},b=[],w=[];v<g;)if(";"===e.charAt(v))c++,v++,d=0;else if(","===e.charAt(v))v++;else{for((n=new Mapping).generatedLine=c,l=v;l<g&&!this._charIsMappingSeparator(e,l);l++);if(o=y[i=e.slice(v,l)])v+=i.length;else{for(o=[];v<l;)a.decode(e,v,_),u=_.value,v=_.rest,o.push(u);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");y[i]=o}n.generatedColumn=d+o[0],d=n.generatedColumn,o.length>1&&(n.source=p+o[1],p+=o[1],n.originalLine=f+o[2],f=n.originalLine,n.originalLine+=1,n.originalColumn=h+o[3],h=n.originalColumn,o.length>4&&(n.name=m+o[4],m+=o[4])),w.push(n),"number"==typeof n.originalLine&&b.push(n)}s(w,r.compareByGeneratedPositionsDeflated),this.__generatedMappings=w,s(b,r.compareByOriginalPositions),this.__originalMappings=b},BasicSourceMapConsumer.prototype._findMapping=function SourceMapConsumer_findMapping(e,t,n,r,o,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return i.search(e,t,o,a)},BasicSourceMapConsumer.prototype.computeColumnSpans=function SourceMapConsumer_computeColumnSpans(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},BasicSourceMapConsumer.prototype.originalPositionFor=function SourceMapConsumer_originalPositionFor(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",r.compareByGeneratedPositionsDeflated,r.getArg(e,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===t.generatedLine){var o=r.getArg(i,"source",null);null!==o&&(o=this._sources.at(o),null!=this.sourceRoot&&(o=r.join(this.sourceRoot,o)));var a=r.getArg(i,"name",null);return null!==a&&(a=this._names.at(a)),{source:o,line:r.getArg(i,"originalLine",null),column:r.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},BasicSourceMapConsumer.prototype.hasContentsOfAllSources=function BasicSourceMapConsumer_hasContentsOfAllSources(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},BasicSourceMapConsumer.prototype.sourceContentFor=function SourceMapConsumer_sourceContentFor(e,t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=r.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var n;if(null!=this.sourceRoot&&(n=r.urlParse(this.sourceRoot))){var i=e.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!n.path||"/"==n.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},BasicSourceMapConsumer.prototype.generatedPositionFor=function SourceMapConsumer_generatedPositionFor(e){var t=r.getArg(e,"source");if(null!=this.sourceRoot&&(t=r.relative(this.sourceRoot,t)),!this._sources.has(t))return{line:null,column:null,lastColumn:null};var n={source:t=this._sources.indexOf(t),originalLine:r.getArg(e,"line"),originalColumn:r.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,r.getArg(e,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:r.getArg(o,"generatedLine",null),column:r.getArg(o,"generatedColumn",null),lastColumn:r.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},t.BasicSourceMapConsumer=BasicSourceMapConsumer,IndexedSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype),IndexedSourceMapConsumer.prototype.constructor=SourceMapConsumer,IndexedSourceMapConsumer.prototype._version=3,Object.defineProperty(IndexedSourceMapConsumer.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),IndexedSourceMapConsumer.prototype.originalPositionFor=function IndexedSourceMapConsumer_originalPositionFor(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=i.search(t,this._sections,function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn}),o=this._sections[n];return o?o.consumer.originalPositionFor({line:t.generatedLine-(o.generatedOffset.generatedLine-1),column:t.generatedColumn-(o.generatedOffset.generatedLine===t.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},IndexedSourceMapConsumer.prototype.hasContentsOfAllSources=function IndexedSourceMapConsumer_hasContentsOfAllSources(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},IndexedSourceMapConsumer.prototype.sourceContentFor=function IndexedSourceMapConsumer_sourceContentFor(e,t){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},IndexedSourceMapConsumer.prototype.generatedPositionFor=function IndexedSourceMapConsumer_generatedPositionFor(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer.sources.indexOf(r.getArg(e,"source"))){var i=n.consumer.generatedPositionFor(e);if(i)return{line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},IndexedSourceMapConsumer.prototype._parseMappings=function IndexedSourceMapConsumer_parseMappings(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var l=o[a],u=i.consumer._sources.at(l.source);null!==i.consumer.sourceRoot&&(u=r.join(i.consumer.sourceRoot,u)),this._sources.add(u),u=this._sources.indexOf(u);var c=i.consumer._names.at(l.name);this._names.add(c),c=this._names.indexOf(c);var d={source:u,generatedLine:l.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(i.generatedOffset.generatedLine===l.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:c};this.__generatedMappings.push(d),"number"==typeof d.originalLine&&this.__originalMappings.push(d)}s(this.__generatedMappings,r.compareByGeneratedPositionsDeflated),s(this.__originalMappings,r.compareByOriginalPositions)},t.IndexedSourceMapConsumer=IndexedSourceMapConsumer},function(e,t,n){var r=n(432);function MappingList(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}MappingList.prototype.unsortedForEach=function MappingList_forEach(e,t){this._array.forEach(e,t)},MappingList.prototype.add=function MappingList_add(e){!function generatedPositionAfter(e,t){var n=e.generatedLine,i=t.generatedLine,o=e.generatedColumn,a=t.generatedColumn;return i>n||i==n&&a>=o||r.compareByGeneratedPositionsInflated(e,t)<=0}(this._last,e)?(this._sorted=!1,this._array.push(e)):(this._last=e,this._array.push(e))},MappingList.prototype.toArray=function MappingList_toArray(){return this._sorted||(this._array.sort(r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},t.MappingList=MappingList},function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.encode=function(e){if(0<=e&&e<n.length)return n[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(601),i=_interopRequireDefault(n(600)),o=_interopRequireDefault(n(246));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var a=function(){function _class(e,t,n){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_class),this.stringify=e,this.mapOpts=n.map||{},this.root=t,this.opts=n}return _class.prototype.isMap=function isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0},_class.prototype.previous=function previous(){var e=this;return this.previousMaps||(this.previousMaps=[],this.root.walk(function(t){if(t.source&&t.source.input.map){var n=t.source.input.map;-1===e.previousMaps.indexOf(n)&&e.previousMaps.push(n)}})),this.previousMaps},_class.prototype.isInline=function isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(function(e){return e.inline}))},_class.prototype.isSourcesContent=function isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(function(e){return e.withContent()})},_class.prototype.clearAnnotation=function clearAnnotation(){if(!1!==this.mapOpts.annotation)for(var e=void 0,t=this.root.nodes.length-1;t>=0;t--)"comment"===(e=this.root.nodes[t]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)},_class.prototype.setSourcesContent=function setSourcesContent(){var e=this,t={};this.root.walk(function(n){if(n.source){var r=n.source.input.from;if(r&&!t[r]){t[r]=!0;var i=e.relative(r);e.map.setSourceContent(i,n.source.input.css)}}})},_class.prototype.applyPrevMaps=function applyPrevMaps(){var e=this.previous(),t=Array.isArray(e),n=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if((n=e.next()).done)break;r=n.value}var a=r,s=this.relative(a.file),l=a.root||o.default.dirname(a.file),u=void 0;!1===this.mapOpts.sourcesContent?(u=new i.default.SourceMapConsumer(a.text)).sourcesContent&&(u.sourcesContent=u.sourcesContent.map(function(){return null})):u=a.consumer(),this.map.applySourceMap(u,s,this.relative(l))}},_class.prototype.isAnnotation=function isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(function(e){return e.annotation}))},_class.prototype.addAnnotation=function addAnnotation(){var e=void 0;e=this.isInline()?"data:application/json;base64,"+r.Base64.encode(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:this.outputFile()+".map";var t="\n";-1!==this.css.indexOf("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"},_class.prototype.outputFile=function outputFile(){return this.opts.to?this.relative(this.opts.to):this.opts.from?this.relative(this.opts.from):"to.css"},_class.prototype.generateMap=function generateMap(){return this.generateString(),this.isSourcesContent()&&this.setSourcesContent(),this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]},_class.prototype.relative=function relative(e){var t=this.opts.to?o.default.dirname(this.opts.to):".";return"string"==typeof this.mapOpts.annotation&&(t=o.default.dirname(o.default.resolve(t,this.mapOpts.annotation))),e=o.default.relative(t,e),"\\"===o.default.sep?e.replace(/\\/g,"/"):e},_class.prototype.sourcePath=function sourcePath(e){return this.relative(e.source.input.from)},_class.prototype.generateString=function generateString(){var e=this;this.css="",this.map=new i.default.SourceMapGenerator({file:this.outputFile()});var t=1,n=1,r=void 0,o=void 0;this.stringify(this.root,function(i,a,s){e.css+=i,a&&a.source&&a.source.start&&"end"!==s&&e.map.addMapping({source:e.sourcePath(a),original:{line:a.source.start.line,column:a.source.start.column-1},generated:{line:t,column:n-1}}),(r=i.match(/\n/g))?(t+=r.length,o=i.lastIndexOf("\n"),n=i.length-o):n+=i.length,a&&a.source&&a.source.end&&"start"!==s&&e.map.addMapping({source:e.sourcePath(a),original:{line:a.source.end.line,column:a.source.end.column},generated:{line:t,column:n-1}})})},_class.prototype.generate=function generate(){if(this.clearAnnotation(),this.isMap())return this.generateMap();var e="";return this.stringify(this.root,function(t){e+=t}),[e]},_class}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(375),i=n(3033),o=n(3006);function TurboCarto(e,t){this.cartocss=e,this.datasource=t,this.metadataHolder=new o}TurboCarto.prototype.getCartocss=function(e){var t=this,n=new i(this.datasource);r([n.getPlugin(this.metadataHolder)]).process(this.cartocss).then(function(n){e(null,n.css,t.metadataHolder)}).catch(e)},TurboCarto.prototype.getMetadata=function(e){return e(null,this.metadataHolder)},e.exports=TurboCarto},function(e,t,n){"use strict";var r=n(3048);e.exports=function turbocarto(e,t,n){new r(e,t).getCartocss(n)},e.exports.TurboCarto=r,e.exports.version=n(188).version},function(e,t,n){"use strict";function torque_filters(e,t){if(!(this instanceof torque_filters))return new torque_filters(e,t);t=t||{},this._canvas=e="string"==typeof e?document.getElementById(e):e,this._ctx=e.getContext("2d"),this._width=e.width,this._height=e.height,this._max=1,this._data=[],this.canvasClass=t.canvasClass}torque_filters.prototype={defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},gradient:function(e){var t=this._createCanvas(),n=t.getContext("2d"),r=n.createLinearGradient(0,0,0,256);for(var i in t.width=1,t.height=256,e)r.addColorStop(+i,e[i]);return n.fillStyle=r,n.fillRect(0,0,1,256),this._grad=n.getImageData(0,0,1,256).data,this},draw:function(){this._grad||this.gradient(this.defaultGradient);var e=this._ctx,t=e.getImageData(0,0,this._canvas.width,this._canvas.height);return this._colorize(t.data,this._grad),e.putImageData(t,0,0),this},_colorize:function(e,t){for(var n,r=3,i=e.length;r<i;r+=4)(n=4*e[r])&&(e[r-3]=t[n],e[r-2]=t[n+1],e[r-1]=t[n+2])},_createCanvas:function(){return this.canvasClass?new this.canvasClass:document.createElement("canvas")}},e.exports=torque_filters},function(e,t,n){(function(t){var r=n(208),i=n(1355),o=n(602),a=t.carto||n(299),s=n(3050),l=n(3049),u=n(3005),c="http://s3.amazonaws.com/com.cartodb.assets.static/error.svg",d=["#layer {","  marker-fill: #662506;","  marker-width: 4;","  [value > 1] { marker-fill: #FEE391; }","  [value > 2] { marker-fill: #FEC44F; }","  [value > 3] { marker-fill: #FE9929; }","  [value > 4] { marker-fill: #EC7014; }","  [value > 5] { marker-fill: #CC4C02; }","  [value > 6] { marker-fill: #993404; }","  [value > 7] { marker-fill: #662506; }","}"].join("\n"),f={difference:"difference",src:"source-over",exclusion:"exclusion",dst:"destination-in",multiply:"multiply",contrast:"contrast","src-over":"source-over",screen:"screen",invert:"invert","dst-over":"destination-over",overlay:"overlay","invert-rgb":"invert","src-in":"source-in",darken:"darken","dst-in":"destination-in",lighten:"lighten","src-out":"source-out","color-dodge":"color-dodge",hue:"hue","dst-out":"destination-out","color-burn":"color-burn",saturation:"saturation","src-atop":"source-atop","hard-light":"hard-light",color:"color","dst-atop":"destination-atop","soft-light":"soft-light",xor:"xor"};function compop2canvas(e){return f[e]||e}function PointRenderer(e,t){if(!e)throw new Error("canvas can't be undefined");this.options=t,this.layer=t.layer,this._canvas=e,this._ctx=e.getContext("2d"),this._sprites=[],this._shader=null,this._icons={},this._iconsToLoad=0,this._filters=new s(this._canvas,{canvasClass:t.canvasClass}),this.style=this.options.cartocss||d,this.setCartoCSS(this.style),this.TILE_SIZE=256,this._style=null,this._gradients={},this._forcePoints=!1}r.extend(PointRenderer.prototype,r.Event,{clearCanvas:function(){if(this._Map){var e=this._canvas,t=this._Map["-torque-clear-color"],n=this._ctx;if("rgba(255, 255, 255, 0)"!==t&&t){n.setTransform(1,0,0,1,0,0);var r=this._Map["comp-op"];n.globalCompositeOperation=compop2canvas(r)||r,n.fillStyle=t,n.fillRect(0,0,e.width,e.height)}else n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),n.restore()}},setCanvas:function(e){this._canvas=e,this._ctx=e.getContext("2d")},setCartoCSS:function(e,t){var n=this;if(this.style=e,PointRenderer.isTurboCarto(e)){var r=new u(n.layer._tiles);l(e,r,function(e,r){if(e)return t(e,null);n.setShader((new a.RendererJS).render(r)),n.layer.redraw(),n.layer.animator.start(),t&&t()})}else n.setShader((new a.RendererJS).render(e)),t&&t()},setShader:function(e){this._sprites=[],this._shader=e,this._Map=this._shader.getDefault().getStyle({},{zoom:0});var t=this._shader.getImageURLs();this.layer&&this.layer.showLimitErrors&&t.push(c),this._preloadIcons(t)},clearSpriteCache:function(){this._sprites=[]},generateSprite:function(e,t,n){var a=o.metric("torque.renderer.point.generateSprite").start(),s=e.getStyle({value:t},n);null!==this._style&&this._style===s||(this._style=s);var l=s["marker-width"];if(!l)return null;if(0===s["marker-opacity"]&&!s["marker-line-opacity"])return null;var u=this._createCanvas(),c=u.getContext("2d"),d=s["marker-file"]||s["point-file"],f=d&&this._qualifyURL(d);if(f&&this._iconsToLoad<=0&&this._icons[f]){var h=this._icons[f],p=Math.min(2*s["marker-width"]||h.width,2*i.MAX_SPRITE_RADIUS),m=Math.min((s["marker-height"]||p)*(h.width/h.height),2*i.MAX_SPRITE_RADIUS);u.width=c.width=p,u.height=c.height=m,c.scale(p/h.width,m/h.height),i.renderSprite(c,h,s)}else{var g=(s["marker-line-width"]||0)+2*l,v=c.width=u.width=c.height=u.height=Math.ceil(g);c.translate(v/2,v/2);var y=s["marker-type"];y&&"rectangle"===y?i.renderRectangle(c,s):i.renderPoint(c,s)}if(a.end(!0),r.flags.sprites_to_images){var _=this._createImage();return _.src=u.toDataURL(),_}return u},renderTile:function(e,t,n){if(e&&e.error)return this._renderErrorTile(e),!1;if(this._iconsToLoad>0)return this.on("allIconsLoaded",function(){this.renderTile.apply(this,[e,t,n])}),!1;void 0===t.length&&(t=[t]);for(var r=o.metric("torque.renderer.point.renderLayers").start(),i=this._shader.getLayers(),a=0,s=i.length;a<s;++a){var l=i[a];if("Map"!==l.name())for(var u=this._sprites[a]||(this._sprites[a]={}),c=0;c<l.frames().length;++c)for(var d=l.frames()[c],f=u[d]||(u[d]=[]),h=0,p=t.length;h<p;h++)this._renderTile(e,t[h]-d,d,f,l)}return r.end(!0),n&&n(null)},_createCanvas:function(){return this.options.canvasClass?new this.options.canvasClass:document.createElement("canvas")},_createImage:function(){return this.options.imageClass?new this.options.imageClass:new Image},_setImageSrc:function(e,t,n){this.options.setImageSrc?this.options.setImageSrc(e,t,n):(e.onload=function(){n(null)},e.onerror=function(){n(new Error("Could not load image"))},e.src=t)},_qualifyURL:function(e){if(void 0!==this.options.qualifyURL)return this.options.qualifyURL(e);var t=document.createElement("a");return t.href=e,t.href},_renderErrorTile:function(e){if(this.layer.showLimitErrors){var t=this._icons[c];t&&this._ctx.drawImage(t,0,0,this.TILE_SIZE,this.TILE_SIZE)}},_renderTile:function(e,t,n,i,a,s){if(this._canvas){var l=o.metric("torque.renderer.point.renderTile").start(),u=this._ctx,c=compop2canvas(a.eval("comp-op"))||this.options.blendmode;c&&(u.globalCompositeOperation=c),this.options.cumulative&&t>e.maxDate&&(t=e.maxDate);var d=this.options.resolution*(this.TILE_SIZE/this.options.resolution-1),f=e.timeCount[t],h=this.options.resolution/2;if(f)for(var p=e.timeIndex[t],m=0;m<f;++m){var g=e.renderDataPos[p+m],v=e.renderData[p+m];if(v){var y=i[v];if(void 0===y&&(y=i[v]=this.generateSprite(a,v,r.extend({zoom:e.z,"frame-offset":n},s))),y){var _=e.x[g]-(y.width>>1)+h,b=d-e.y[g]+h;u.drawImage(y,_,b-(y.height>>1))}}}l.end(!0)}},setBlendMode:function(e){this.options.blendmode=e},getActivePointsBBox:function(e,t){for(var n=[],i=new r.Mercator,o=this.options.resolution*(this.TILE_SIZE/this.options.resolution-1),a=e.timeCount[t],s=e.timeIndex[t],l=0;l<a;++l){var u=e.renderDataPos[s+l];if(e.renderData[s+l]){var c=e.x[u],d=o-e.y[u];n.push(i.tilePixelBBox(e.coord.x,e.coord.y,e.coord.z,c,d))}}return n},getValues:function(e,t,n){n=n||[];for(var r=e.timeCount[t],i=e.timeIndex[t],o=0;o<r;++o){e.renderDataPos[i+o];n.push(e.renderData[i+o])}return n},getValueFor:function(e,t,n,i){for(var o=new r.Mercator,a=this.options.resolution,s=a>>1,l=this.options.resolution*(this.TILE_SIZE/this.options.resolution-1),u=e.timeCount[t],c=e.timeIndex[t],d=0;d<u;++d){var f=e.renderDataPos[c+d],h=e.renderData[c+d];if(h){var p=e.x[f],m=l-e.y[f],g=n+s-p,v=i+s-m;if(g>=0&&g<a&&v>=0&&v<a)return{value:h,bbox:o.tilePixelBBox(e.coord.x,e.coord.y,e.coord.z,p-s,m-s,a)}}}return null},_preloadIcons:function(e){var t=this;if(e.length>0&&!this._forcePoints){var n=Object.keys(e.reduce(function(e,n){var r=t._qualifyURL(n);return t._icons[r]||(e[r]=!0),e},{})),r=t._shader.getLayers().some(function(e){return void 0!==e.shader["image-filters"]});this._iconsToLoad+=n.length,n.forEach(function(e){t._icons[e]=null;var n=t._createImage();r&&(n.crossOrigin="Anonymous"),t._setImageSrc(n,e,function(i){i?(t._forcePoints=!0,t.clearSpriteCache(),t._iconsToLoad=0,t.fire("allIconsLoaded"),r&&console.info("Only CORS-enabled, or same domain image-files can be used in combination with image-filters"),console.error("Couldn't get marker-file "+e)):(t._icons[e]=n,t._iconsToLoad--,t._iconsToLoad<=0&&(t.clearSpriteCache(),t.fire("allIconsLoaded")))})})}else this.fire("allIconsLoaded")},applyFilters:function(){if(this._style&&this._style["image-filters"]){function gradientKey(e){for(var t="",n=0;n<e.args.length;n++){var r=e.args[n].rgb;t+=r[0]+":"+r[1]+":"+r[2]}return t}var e=this._gradients[gradientKey(this._style["image-filters"])];if(!e){function componentToHex(e){var t=e.toString(16);return 1==t.length?"0"+t:t}e={};for(var t=this._style["image-filters"].args,n=1/t.length,r=0;r<t.length;r++){var i=n*r+n,o=t[r].rgb,a=(s=o[0],l=o[1],u=o[2],"#"+componentToHex(s)+componentToHex(l)+componentToHex(u));e[i]=a}this._gradients[gradientKey(this._style["image-filters"])]=e}this._filters.gradient(e),this._filters.draw()}var s,l,u}}),PointRenderer.isTurboCarto=function(e){return!["ramp","colorbrewer","buckets"].map(function(e){return e+"("}).map(String.prototype.indexOf.bind(e)).every(function(e){return-1===e})},e.exports=PointRenderer}).call(this,n(48))},function(e,t,n){e.exports={cartocss:n(1355),Point:n(3051),Rectangle:n(3002)}},function(e,t,n){(function(t){var r=n(1359),i=null;function get(e,n,r){r=r||{method:"GET",data:null,responseType:"text"},i={url:e,callback:n};var o=XMLHttpRequest;!t.XDomainRequest||"withCredentials"in o||!/^(http(s)?:)?\/\//.test(e)||(o=XDomainRequest);var a=new o;function respond(){var e=a.status,t="arraybuffer"===r.responseType?a.response:a.responseText;n(!e&&t||e>=200&&e<300||304===e||429===e?a:null)}return a.open(r.method,e,!0),"onload"in a?a.onload=a.onerror=respond:a.onreadystatechange=function(){a.readyState>3&&respond()},a.onprogress=function(){},a.responseType=r.responseType,r.data&&(a.setRequestHeader("Content-type","application/json"),a.setRequestHeader("Accept","*")),a.send(r.data),a}e.exports={get:get,post:function post(e,t,n){return get(e,n,{data:t,method:"POST"})},jsonp:function jsonp(e,t,n){(n=n||{}).timeout=void 0===n.timeout?1e4:n.timeout;var i=document.getElementsByTagName("head")[0],o=document.createElement("script"),a=n.callbackName||"torque_"+Date.now();function clean(){i.removeChild(o),clearTimeout(s),delete window[a]}r.isFunction(a)&&(a=a()),window[a]=function(){clean(),t.apply(window,arguments)};var s=setTimeout(function(){clean(),t.call(window,null)},n.timeout);e=e.replace("callback=?","callback="+a),o.type="text/javascript",o.src=e,o.async=!0,setTimeout(function(){i.appendChild(o)},0)},lastCall:function(){return i}}}).call(this,n(48))},function(e,t){var n=function(e,t){this.x=e||0,this.y=t||0};var r=function(){this._tileSize=256,this._pixelOrigin=new n(this._tileSize/2,this._tileSize/2),this._pixelsPerLonDegree=this._tileSize/360,this._pixelsPerLonRadian=this._tileSize/(2*Math.PI)};r.prototype._fromLatLonToPoint=function(e,t){var r=new n(0,0),i=this._pixelOrigin;r.x=i.x+t*this._pixelsPerLonDegree;var o=function clamp(e,t,n){return null!==t&&(e=Math.max(e,t)),null!==n&&(e=Math.min(e,n)),e}(Math.sin(function degreesToRadians(e){return e*(Math.PI/180)}(e)),-.9999,.9999);return r.y=i.y+.5*Math.log((1+o)/(1-o))*-this._pixelsPerLonRadian,r},r.prototype._fromPointToLatLon=function(e){var t=this._pixelOrigin,n=(e.x-t.x)/this._pixelsPerLonDegree,r=(e.y-t.y)/-this._pixelsPerLonRadian;return{lat:function radiansToDegrees(e){return e/(Math.PI/180)}(2*Math.atan(Math.exp(r))-Math.PI/2),lon:n}},r.prototype._tilePixelPos=function(e,t){return{x:e*this._tileSize,y:t*this._tileSize}},r.prototype.tilePixelBBox=function(e,t,r,i,o,a){var s=1<<r,l=(a=a||1)/s;return i=(e*this._tileSize+i)/s,o=(t*this._tileSize+o)/s,[this._fromPointToLatLon(new n(i,o+l)),this._fromPointToLatLon(new n(i+l,o))]},r.prototype.tileBBox=function(e,t,r,i){var o=1<<r;i=i||0;var a=(this._tileSize+2*i)/o,s=(e*this._tileSize-i)/o,l=(t*this._tileSize-i)/o;return[this._fromPointToLatLon(new n(s,l+a)),this._fromPointToLatLon(new n(s+a,l))]},r.prototype.latLonToTilePoint=function(e,t,r,i,o){var a=1<<o,s=this._fromLatLonToPoint(e,t),l=new n(s.x*a,s.y*a),u=this._tilePixelPos(r,i);return new n(Math.round(l.x-u.x),Math.round(l.y-u.y))},e.exports=r},function(e,t){function clamp(e,t){return function(n){return Math.max(Math.min(n,t),e)}}function invLinear(e,t){var n=clamp(0,1);return function(r){return n((r-e)/(t-e))}}e.exports={clamp:clamp,linear:function linear(e,t){var n=clamp(e,t);function _linear(r){return n(e*(1-r)+r*t)}return _linear.invert=function(){return invLinear(e,t)},_linear},invLinear:invLinear}},function(e,t,n){!function(e){e.functions={rgb:function(e,t,n){return this.rgba(e,t,n,1)},rgba:function(t,n,r,i){var o=[t,n,r].map(function(e){return number(e)});return i=number(i),o.some(isNaN)||isNaN(i)?null:new e.Color(o,i)},stop:function(e){var t,n;return arguments.length>1&&(t=arguments[1]),arguments.length>2&&(n=arguments[2]),{is:"tag",val:e,color:t,mode:n,toString:function(r){return'\n\t<stop value="'+e.ev(r)+'"'+(t?' color="'+t.ev(r)+'" ':"")+(n?' mode="'+n.ev(r)+'" ':"")+"/>"}}},hsl:function(e,t,n){return this.hsla(e,t,n,1)},hsla:function(e,t,n,r){if([e=number(e)%360/360,t=number(t),n=number(n),r=number(r)].some(isNaN))return null;var i=n<=.5?n*(t+1):n+t-n*t,o=2*n-i;return this.rgba(255*hue(e+1/3),255*hue(e),255*hue(e-1/3),r);function hue(e){return 6*(e=e<0?e+1:e>1?e-1:e)<1?o+(i-o)*e*6:2*e<1?i:3*e<2?o+(i-o)*(2/3-e)*6:o}},hue:function(t){return"toHSL"in t?new e.Dimension(Math.round(t.toHSL().h)):null},saturation:function(t){return"toHSL"in t?new e.Dimension(Math.round(100*t.toHSL().s),"%"):null},lightness:function(t){return"toHSL"in t?new e.Dimension(Math.round(100*t.toHSL().l),"%"):null},alpha:function(t){return"toHSL"in t?new e.Dimension(t.toHSL().a):null},saturate:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.s+=t.value/100,n.s=clamp(n.s),hsla(n)},desaturate:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.s-=t.value/100,n.s=clamp(n.s),hsla(n)},lighten:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.l+=t.value/100,n.l=clamp(n.l),hsla(n)},darken:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.l-=t.value/100,n.l=clamp(n.l),hsla(n)},fadein:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.a+=t.value/100,n.a=clamp(n.a),hsla(n)},fadeout:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.a-=t.value/100,n.a=clamp(n.a),hsla(n)},spin:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL(),r=(n.h+t.value)%360;return n.h=r<0?360+r:r,hsla(n)},replace:function(e,t,n){return"field"===e.is?e.toString+".replace("+t.toString()+", "+n.toString()+")":e.replace(t,n)},mix:function(t,n,r){var i=r.value/100,o=2*i-1,a=t.toHSL().a-n.toHSL().a,s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,l=1-s,u=[t.rgb[0]*s+n.rgb[0]*l,t.rgb[1]*s+n.rgb[1]*l,t.rgb[2]*s+n.rgb[2]*l],c=t.alpha*i+n.alpha*(1-i);return new e.Color(u,c)},greyscale:function(t){return this.desaturate(t,new e.Dimension(100))},"%":function(t){for(var n=Array.prototype.slice.call(arguments,1),r=t.value,i=0;i<n.length;i++)r=r.replace(/%s/,n[i].value).replace(/%[da]/,n[i].toString());return r=r.replace(/%%/g,"%"),new e.Quoted(r)}};for(var t=["emboss","blur","gray","sobel","edge-detect","x-gradient","y-gradient","sharpen"],n=0;n<t.length;n++){var r=t[n];e.functions[r]=function(t){return function(){return new e.ImageFilter(t)}}(r)}function hsla(t){return e.functions.hsla(t.h,t.s,t.l,t.a)}function number(t){return t instanceof e.Dimension?parseFloat("%"==t.unit?t.value/100:t.value):"number"==typeof t?t:NaN}function clamp(e){return Math.min(1,Math.max(0,e))}e.functions["agg-stack-blur"]=function(t,n){return new e.ImageFilter("agg-stack-blur",[t,n])},e.functions["scale-hsla"]=function(t,n,r,i,o,a,s,l){return new e.ImageFilter("scale-hsla",[t,n,r,i,o,a,s,l])}}(n(57))},function(e,t,n){var r=n(57);r.FrameOffset=function(e,t,n){if((t=parseInt(t,10))>r.FrameOffset.max||t<=0)throw{message:"Only frame-offset levels between 1 and "+r.FrameOffset.max+" supported.",index:n};if("="!==e)throw{message:"only = operator is supported for frame-offset",index:n};return t},r.FrameOffset.max=32,r.FrameOffset.none=0},function(e,t,n){var r;(r=n(57))._getFontSet=function(e,t){var n=t.join("");if(e._fontMap&&e._fontMap[n])return e._fontMap[n];var i=new r.FontSet(e,t);return e.effects.push(i),e._fontMap||(e._fontMap={}),e._fontMap[n]=i,i},r.FontSet=function FontSet(e,t){this.fonts=t,this.name="fontset-"+e.effects.length},r.FontSet.prototype.toXML=function(e){return'<FontSet name="'+this.name+'">\n'+this.fonts.map(function(e){return'  <Font face-name="'+e+'"/>'}).join("\n")+"\n</FontSet>"}},function(e,t,n){var r;(r=n(57)).Invalid=function Invalid(e,t,n){this.chunk=e,this.index=t,this.type="syntax",this.message=n||"Invalid code: "+this.chunk},r.Invalid.prototype.is="invalid",r.Invalid.prototype.ev=function(e){return e.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}},function(e,t,n){var r=n(57);r.Zoom=function(e,t,n){this.op=e,this.value=t,this.index=n},r.Zoom.prototype.setZoom=function(e){return this.zoom=e,this},r.Zoom.prototype.ev=function(e){var t=0,n=1/0,i=parseInt(this.value.ev(e).toString(),10),o=0;switch((i>r.Zoom.maxZoom||i<0)&&e.error({message:"Only zoom levels between 0 and "+r.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom=1<<i,this;case">":t=i+1;break;case">=":t=i;break;case"<":n=i-1;break;case"<=":n=i}for(var a=0;a<=r.Zoom.maxZoom;a++)a>=t&&a<=n&&(o|=1<<a);return this.zoom=o,this},r.Zoom.prototype.toString=function(){return this.zoom},r.Zoom.all=8388607,r.Zoom.maxZoom=22,r.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100},r.Zoom.prototype.toXML=function(){var e=[];if(this.zoom!=r.Zoom.all){for(var t=null,n=null,i=0;i<=r.Zoom.maxZoom;i++)this.zoom&1<<i&&(null===t&&(t=i),n=i);t>0&&e.push("    <MaxScaleDenominator>"+r.Zoom.ranges[t]+"</MaxScaleDenominator>\n"),n<22&&e.push("    <MinScaleDenominator>"+r.Zoom.ranges[n+1]+"</MinScaleDenominator>\n")}return e},r.Zoom.prototype.toString=function(){for(var e="",t=0;t<=r.Zoom.maxZoom;t++)e+=this.zoom&1<<t?"X":".";return e}},function(e,t,n){var r;(r=n(57)).Variable=function Variable(e,t,n){this.name=e,this.index=t,this.filename=n},r.Variable.prototype={is:"variable",toString:function(){return this.name},ev:function(e){if(this.name,this._css)return this._css;var t=e.frames.filter(function(e){return e.name==this.name}.bind(this));return t.length?t[0].value.ev(e):(e.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}},function(e,t,n){var r;(r=n(57)).Value=function Value(e){this.value=e},r.Value.prototype={is:"value",ev:function(e){return 1===this.value.length?this.value[0].ev(e):new r.Value(this.value.map(function(t){return t.ev(e)}))},toString:function(e,t,n,r){return this.value.map(function(t){return t.toString(e,r)}).join(n||", ")},clone:function(){var e=Object.create(r.Value.prototype);return Array.isArray(e)?e.value=this.value.slice():e.value=this.value,e.is=this.is,e},toJS:function(e){var t=this.ev(e),n=t.toString();return"color"===t.is||"uri"===t.is||"string"===t.is||"keyword"===t.is?n="'"+n.replace(/&amp;/g,"&")+"'":Array.isArray(this.value)&&this.value.length>1?n="["+this.value.join(",")+"]":"field"===t.is?n=n.replace(/\[([^\]]*)\]/g,function(e){return e.replace(/\[(.*)\]/g,"data['$1']")}):"call"===t.is&&(n=JSON.stringify({name:t.name,args:t.args})),"_value = "+n+";"}}},function(e,t,n){var r;(r=n(57)).URL=function URL(e,t){this.value=e,this.paths=t},r.URL.prototype={is:"uri",toString:function(){return this.value.toString()},ev:function(e){return new r.URL(this.value.ev(e),this.paths)}}},function(e,t,n){(function(e){var t,r;t=n(57),r=e._||n(0),t.StyleXML=function(e,t,n,i){for(var o={},a=[],s=[],l=[],u=[],c=[],d=0;d<n.length;d++)for(var f=0;f<n[d].rules.length;f++)"image-filters"===n[d].rules[f].name&&a.push(n[d].rules[f]),"image-filters-inflate"===n[d].rules[f].name&&s.push(n[d].rules[f]),"direct-image-filters"===n[d].rules[f].name&&l.push(n[d].rules[f]),"comp-op"===n[d].rules[f].name&&u.push(n[d].rules[f]),"opacity"===n[d].rules[f].name&&c.push(n[d].rules[f]);var h=n.map(function(e){return e.toXML(i,o)}),p="";a.length&&(p+=' image-filters="'+r.chain(a).uniq(function(e){return e.id}).map(function(e){return e.ev(i).toXML(i,!0,",","image-filter")}).value().join(",")+'"'),s.length&&(p+=' image-filters-inflate="'+s[0].value.ev(i).toString()+'"'),l.length&&(p+=' direct-image-filters="'+r.chain(l).uniq(function(e){return e.id}).map(function(e){return e.ev(i).toXML(i,!0,",","direct-image-filter")}).value().join(",")+'"'),u.length&&"src-over"!=u[0].value.ev(i).value&&(p+=' comp-op="'+u[0].value.ev(i).toString()+'"'),c.length&&1!=c[0].value.ev(i).value&&(p+=' opacity="'+c[0].value.ev(i).toString()+'"');var m=h.join("");return p||m?'<Style name="'+e+'" filter-mode="first"'+p+">\n"+m+"</Style>":""}}).call(this,n(48))},function(e,t,n){var r;(r=n(57)).Selector=function Selector(e,t,n,i,o,a,s){this.elements=i||[],this.attachment=o,this.filters=e||{},this.frame_offset=n,this.zoom=void 0!==t?t:r.Zoom.all,this.conditions=a,this.index=s},r.Selector.prototype.specificity=function(){return this.elements.reduce(function(e,t){var n=t.specificity();return e[0]+=n[0],e[1]+=n[1],e},[0,0,this.conditions,this.index])}},function(e,t,n){var r;(r=n(57)).Ruleset=function Ruleset(e,t){this.selectors=e,this.rules=t,this._lookups={}},r.Ruleset.prototype={is:"ruleset",ev:function(e){var t,n=new r.Ruleset(this.selectors,this.rules.slice(0));for(n.root=this.root,e.frames.unshift(n),t=0,rule;t<n.rules.length;t++)rule=n.rules[t],n.rules[t]=rule.ev?rule.ev(e):rule;return e.frames.shift(),n},match:function(e){return!e||0===e.length},variables:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,t){return t instanceof r.Rule&&!0===t.variable&&(e[t.name]=t),e},{})},variable:function(e){return this.variables()[e]},rulesets:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(e){return e instanceof r.Ruleset})},find:function(e,t){t=t||this;var n=[],i=e.toString();return i in this._lookups?this._lookups[i]:(this.rulesets().forEach(function(i){if(i!==t)for(var o=0;o<i.selectors.length;o++)if(e.match(i.selectors[o])){e.elements.length>1?Array.prototype.push.apply(n,i.find(new r.Selector(null,null,null,e.elements.slice(1)),t)):n.push(i);break}}),this._lookups[i]=n)},evZooms:function(e){for(var t=0;t<this.selectors.length;t++){for(var n=r.Zoom.all,i=0;i<this.selectors[t].zoom.length;i++)n&=this.selectors[t].zoom[i].ev(e).zoom;this.selectors[t].zoom=n}},flatten:function(e,t,n){var i,o,a=[];for(0===this.selectors.length&&(n.frames=n.frames.concat(this.rules)),this.evZooms(n),i=0;i<this.selectors.length;i++){var s=this.selectors[i];if(s.filters)if(t.length)for(o=0;o<t.length;o++){var l=t[o],u=l.filters.cloneWith(s.filters);if(null===u){if(l.zoom===(l.zoom&s.zoom)&&l.frame_offset===s.frame_offset&&l.attachment===s.attachment&&l.elements.join()===s.elements.join()){a.push(l);continue}u=l.filters}else if(!u)continue;var c=Object.create(r.Selector.prototype);c.filters=u,c.zoom=l.zoom&s.zoom,c.frame_offset=s.frame_offset,c.elements=l.elements.concat(s.elements),l.attachment&&s.attachment?c.attachment=l.attachment+"/"+s.attachment:c.attachment=s.attachment||l.attachment,c.conditions=l.conditions+s.conditions,c.index=s.index,a.push(c)}else a.push(s)}var d=[];for(i=0;i<this.rules.length;i++){var f=this.rules[i];f instanceof r.Ruleset?f.flatten(e,a,n):f instanceof r.Rule?d.push(f):f instanceof r.Invalid&&n.error(f)}var h=!!d.length&&d[0].index;for(i=0;i<a.length;i++)!1!==h&&(a[i].index=h),e.push(new r.Definition(a[i],d.slice()));return e}}},function(e,t,n){!function(e){e.Rule=function Rule(t,n,r,i){var o=t.split("/");this.name=o.pop(),this.instance=o.length?o[0]:"__default__",this.value=n instanceof e.Value?n:new e.Value([n]),this.index=r,this.symbolizer=e.Reference.symbolizer(this.name),this.filename=i,this.variable="@"===t.charAt(0)},e.Rule.prototype.is="rule",e.Rule.prototype.clone=function(){var t=Object.create(e.Rule.prototype);return t.name=this.name,t.value=this.value,t.index=this.index,t.instance=this.instance,t.symbolizer=this.symbolizer,t.filename=this.filename,t.variable=this.variable,t},e.Rule.prototype.updateID=function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name},e.Rule.prototype.toString=function(){return"["+e.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value},e.Rule.prototype.toXML=function(t,n,r,i){if(!e.Reference.validSelector(this.name)){var o=function getMean(t){return Object.keys(e.Reference.selector_cache).map(function(n){return[n,e.Reference.editDistance(t,n)]}).sort(function(e,t){return e[1]-t[1]})}(this.name),a="";return o[0][1]<3&&(a=". Did you mean "+o[0][0]+"?"),t.error({message:"Unrecognized rule: "+this.name+a,index:this.index,type:"syntax",filename:this.filename})}var s;return this.value instanceof e.Value&&!e.Reference.validValue(t,this.name,this.value)?e.Reference.selector(this.name)?(s=e.Reference.selector(this.name).validate?e.Reference.selector(this.name).validate:"object"==typeof e.Reference.selector(this.name).type?"keyword (options: "+e.Reference.selector(this.name).type.join(", ")+")":e.Reference.selector(this.name).type,t.error({message:"Invalid value for "+this.name+", the type "+s+" is expected. "+this.value+" (of type "+this.value.value[0].is+")  was given.",index:this.index,type:"syntax",filename:this.filename})):t.error({message:"Unrecognized property: "+this.name,index:this.index,type:"syntax",filename:this.filename}):this.variable?"":e.Reference.isFont(this.name)&&this.value.value.length>1?'fontset-name="'+e._getFontSet(t,this.value.value).name+'"':n?this.value.toString(t,this.name,r):e.Reference.selectorName(this.name)+'="'+this.value.toString(t,this.name)+'"'},e.Rule.prototype.ev=function(t){return new e.Rule(this.name,this.value.ev(t),this.index,this.filename)}}(n(57))},function(e,t,n){(function(e){!function(t){var r=e._||n(0),i={};i.setData=function(e){i.data=e,i.selector_cache=function generateSelectorCache(e){var t={};for(var n in e.symbolizers)for(var r in e.symbolizers[n])e.symbolizers[n][r].hasOwnProperty("css")&&(t[e.symbolizers[n][r].css]=[e.symbolizers[n][r],n,r]);return t}(e),i.mapnikFunctions=function generateMapnikFunctions(e){var t={};for(var n in e.symbolizers)for(var r in e.symbolizers[n])if("functions"===e.symbolizers[n][r].type)for(var i=0;i<e.symbolizers[n][r].functions.length;i++){var o=e.symbolizers[n][r].functions[i];t[o[0]]=o[1]}return t}(e),i.mapnikFunctions.matrix=[6],i.mapnikFunctions.translate=[1,2],i.mapnikFunctions.scale=[1,2],i.mapnikFunctions.rotate=[1,3],i.mapnikFunctions.skewX=[1],i.mapnikFunctions.skewY=[1],i.required_cache=function generateRequiredProperties(e){var t={};for(var n in e.symbolizers)for(var r in t[n]=[],e.symbolizers[n])e.symbolizers[n][r].required&&t[n].push(e.symbolizers[n][r].css);return t}(e)},i.setVersion=function(e){var t=n(1356);return!!t.version.hasOwnProperty(e)&&(i.setData(t.version[e]),!0)},i.selectorData=function(e,t){if(i.selector_cache[e])return i.selector_cache[e][t]},i.validSelector=function(e){return!!i.selector_cache[e]},i.selectorName=function(e){return i.selectorData(e,2)},i.selector=function(e){return i.selectorData(e,0)},i.symbolizer=function(e){return i.selectorData(e,1)},i.requiredProperties=function(e,t){var n=i.required_cache[e];for(var r in n)if(!(n[r]in t))return"Property "+n[r]+" required for defining "+e+" styles."},i._validateValue={font:function(e,t){return!e.validation_data||!e.validation_data.fonts||-1!=e.validation_data.fonts.indexOf(t)}},i.isFont=function(e){return"font"==i.selector(e).validate},i.editDistance=function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;for(var n=[],r=0;r<=t.length;r++)n[r]=[r];for(var i=0;i<=e.length;i++)n[0][i]=i;for(r=1;r<=t.length;r++)for(i=1;i<=e.length;i++)t.charAt(r-1)==e.charAt(i-1)?n[r][i]=n[r-1][i-1]:n[r][i]=Math.min(n[r-1][i-1]+1,Math.min(n[r][i-1]+1,n[r-1][i]+1));return n[t.length][e.length]},i.validValue=function(e,t,n){var o;if(i.selector(t)){if("keyword"==n.value[0].is)return function validateKeyword(e,t){return"object"==typeof i.selector(t).type?-1!==i.selector(t).type.indexOf(e.value[0].value):"string"===i.selector(t).type}(n,t);if("undefined"==n.value[0].is)return!0;if("numbers"==i.selector(t).type){for(o in n.value)if("float"!==n.value[o].is)return!1;return!0}if("tags"==i.selector(t).type){if(!n.value)return!1;if(!n.value[0].value)return"tag"===n.value[0].is;for(o=0;o<n.value[0].value.length;o++)if("tag"!==n.value[0].value[o].is)return!1;return!0}if("functions"==i.selector(t).type)return function validateFunctions(e,t){if("string"===e.value[0].is)return!0;for(var n in e.value)for(var o in e.value[n].value){if("call"!==e.value[n].value[o].is)return!1;var a=r.find(i.selector(t).functions,function(t){return t[0]==e.value[n].value[o].name});if(!(a&&-1==a[1]||a&&a[1]===e.value[n].value[o].args.length))return!1}return!0}(n,t);if("unsigned"===i.selector(t).type)return"float"===n.value[0].is&&(n.value[0].round(),!0);if(i.selector(t).expression)return!0;if(i.selector(t).validate){for(o=0;o<n.value.length;o++)if(i.selector(t).type==n.value[o].is&&i._validateValue[i.selector(t).validate](e,n.value[o].value))return!0;return!1}return i.selector(t).type==n.value[0].is}return!1},t.Reference=i}(n(57))}).call(this,n(48))},function(e,t,n){var r;(r=n(57)).ImageFilter=function ImageFilter(e,t){this.filter=e,this.args=t||null},r.ImageFilter.prototype={is:"imagefilter",ev:function(){return this},toString:function(){return this.args?this.filter+"("+this.args.join(",")+")":this.filter}}},function(e,t,n){var r;(r=n(57)).Quoted=function Quoted(e){this.value=e||""},r.Quoted.prototype={is:"string",toString:function(e){var t=this.value.replace(/&/g,"&amp;"),n=t.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===e?"'"+n+"'":t},ev:function(){return this},operate:function(e,t,n){return new r.Quoted(r.operate(t,this.toString(),n.toString(this.contains_field)))}}},function(e,t,n){var r;(r=n(57)).Operation=function Operation(e,t,n){this.op=e.trim(),this.operands=t,this.index=n},r.Operation.prototype.is="operation",r.Operation.prototype.ev=function(e){var t,n=this.operands[0].ev(e),i=this.operands[1].ev(e);return"undefined"===n.is||"undefined"===i.is?{is:"undefined",value:"undefined"}:(n instanceof r.Dimension&&i instanceof r.Color&&("*"===this.op||"+"===this.op?(t=i,i=n,n=t):e.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),n instanceof r.Quoted&&i instanceof r.Quoted&&"+"!==this.op?(e.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n instanceof r.Field||i instanceof r.Field||n instanceof r.Literal||i instanceof r.Literal?"color"===n.is||"color"===i.is?(e.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new r.Literal(n.ev(e).toString(!0)+this.op+i.ev(e).toString(!0)):void 0===n.operate?(e.error({message:"Cannot do math with type "+n.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n.operate(e,this.op,i))},r.operate=function(e,t,n){switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"%":return t%n;case"/":return t/n}}},function(e,t,n){var r;(r=n(57)).Literal=function Field(e){this.value=e||"",this.is="field"},r.Literal.prototype={toString:function(){return this.value},ev:function(){return this}}},function(e,t,n){var r;(r=n(57)).LayerXML=function(e,t){var n=[];for(var i in e.Datasource)n.push('<Parameter name="'+i+'"><![CDATA['+e.Datasource[i]+"]]></Parameter>");var o="";for(var a in e.properties)o+="minzoom"===a?'  maxzoom="'+r.Zoom.ranges[e.properties[a]]+'"\n':"maxzoom"===a?'  minzoom="'+r.Zoom.ranges[e.properties[a]+1]+'"\n':"  "+a+'="'+e.properties[a]+'"\n';return'<Layer name="'+e.name+'"\n'+o+(void 0===e.status?"":'  status="'+e.status+'"\n')+(void 0===e.srs?"":'  srs="'+e.srs+'"')+">\n    "+t.reverse().map(function(e){return"<StyleName>"+e+"</StyleName>"}).join("\n    ")+(n.length?"\n    <Datasource>\n       "+n.join("\n       ")+"\n    </Datasource>\n":"")+"  </Layer>\n"}},function(e,t,n){var r;(r=n(57)).Keyword=function Keyword(e){this.value=e;var t={transparent:"color",true:"boolean",false:"boolean"};this.is=t[e]?t[e]:"keyword"},r.Keyword.prototype={ev:function(){return this},toString:function(){return this.value}}},function(e,t,n){var r;(r=n(57)).Field=function Field(e){this.value=e||""},r.Field.prototype={is:"field",toString:function(){return"["+this.value+"]"},ev:function(){return this}}},function(e,t,n){!function(e){e.Filter=function Filter(e,t,n,r,i){this.key=e,this.op=t,this.val=n,this.index=r,this.filename=i,this.id=this.key+this.op+this.val};var t={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]};e.Filter.prototype.ev=function(e){return this.key=this.key.ev(e),this.val=this.val.ev(e),this},e.Filter.prototype.toXML=function(n){e.Reference.data.filter&&("keyword"===this.key.is&&-1===e.Reference.data.filter.value.indexOf(this.key.toString())&&n.error({message:this.key.toString()+" is not a valid keyword in a filter expression",index:this.index,filename:this.filename}),"keyword"===this.val.is&&-1===e.Reference.data.filter.value.indexOf(this.val.toString())&&n.error({message:this.val.toString()+" is not a valid keyword in a filter expression",index:this.index,filename:this.filename}));var r=this.key.toString(!1),i=this.val.toString("string"==this.val.is);return("numeric"==t[this.op][1]&&isNaN(i)&&"field"!==this.val.is||"string"==t[this.op][1]&&"'"!=i[0])&&n.error({message:'Cannot use operator "'+this.op+'" with value '+this.val,index:this.index,filename:this.filename}),r+t[this.op][0]+i+(t[this.op][2]||"")},e.Filter.prototype.toString=function(){return"["+this.id+"]"}}(n(57))},function(e,t,n){(function(e){var t=n(57),r=e._||n(0);t.Filterset=function Filterset(){this.filters={}},t.Filterset.prototype.toXML=function(e){var t=[];for(var n in this.filters)t.push("("+this.filters[n].toXML(e).trim()+")");return t.length?"    <Filter>"+t.join(" and ")+"</Filter>\n":""},t.Filterset.prototype.toString=function(){var e=[];for(var t in this.filters)e.push(this.filters[t].id);return e.sort().join("\t")},t.Filterset.prototype.ev=function(e){for(var t in this.filters)this.filters[t].ev(e);return this},t.Filterset.prototype.clone=function(){var e=new t.Filterset;for(var n in this.filters)e.filters[n]=this.filters[n];return e},t.Filterset.prototype.cloneWith=function(e){var n=[];for(var r in e.filters){var i=this.addable(e.filters[r]);if(!1===i)return!1;!0===i&&n.push(e.filters[r])}if(!n.length)return null;var o=new t.Filterset;for(r in this.filters)o.filters[r]=this.filters[r];for(;r=n.shift();)o.add(r);return o},t.Filterset.prototype.toJS=function(e){var t={"=":"==="};return r.map(this.filters,function(e){var n=e.op;n in t&&(n=t[n]);var r=e.val;void 0!==e._val&&(r=e._val.toString(!0));return"=~"===n?"(data['"+e.key.value+"'] + '').match("+("string"===r.is?"'"+r.toString().replace(/'/g,"\\'").replace(/&amp;/g,"&")+"'":r)+")":"data['"+e.key.value+"'] "+n+" "+("string"===r.is?"'"+r.toString().replace(/'/g,"\\'").replace(/&amp;/g,"&")+"'":r)}).join(" && ")},t.Filterset.prototype.addable=function(e){var t=e.key.toString(),n=e.val.toString();switch(n.match(/^[0-9]+(\.[0-9]*)?$/)&&(n=parseFloat(n)),e.op){case"=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val.toString()==n&&null:void 0===this.filters[t+"!="+n]&&(!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n))));case"=~":return!0;case"!=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val!=n&&null:void 0!==this.filters[t+"!="+n]?null:void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)||null;case">":return t+"="in this.filters?!(this.filters[t+"="].val<=n)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=n)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)||null));case">=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val<n)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=n)||null));case"<":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>=n)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=n)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)||null));case"<=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>n)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=n)||null))}},t.Filterset.prototype.conflict=function(e){var t=e.key.toString(),n=e.val.toString();return isNaN(parseFloat(n))||(n=parseFloat(n)),("="===e.op&&void 0!==this.filters[t+"="]&&n!=this.filters[t+"="].val.toString()||"!="===e.op&&void 0!==this.filters[t+"="]&&n==this.filters[t+"="].val.toString()||"="===e.op&&void 0!==this.filters[t+"!="]&&n==this.filters[t+"!="].val.toString())&&e.toString()+" added to "+this.toString()+" produces an invalid filter"},t.Filterset.prototype.add=function(e,t){var n,r=e.key.toString(),i=e.op,o=this.conflict(e);if(o)return o;if("="===i){for(var a in this.filters)this.filters[a].key==r&&delete this.filters[a];this.filters[r+"="]=e}else if("!="===i)this.filters[r+"!="+e.val]=e;else if("=~"===i)this.filters[r+"=~"+e.val]=e;else if(">"===i){for(var s in this.filters)this.filters[s].key==r&&this.filters[s].val<=e.val&&delete this.filters[s];this.filters[r+">"]=e}else if(">="===i){for(var l in this.filters)n=+this.filters[l].val.toString(),this.filters[l].key==r&&n<e.val&&delete this.filters[l];void 0!==this.filters[r+"!="+e.val]?(delete this.filters[r+"!="+e.val],e.op=">",this.filters[r+">"]=e):this.filters[r+">="]=e}else if("<"===i){for(var u in this.filters)n=+this.filters[u].val.toString(),this.filters[u].key==r&&n>=e.val&&delete this.filters[u];this.filters[r+"<"]=e}else if("<="===i){for(var c in this.filters)n=+this.filters[c].val.toString(),this.filters[c].key==r&&n>e.val&&delete this.filters[c];void 0!==this.filters[r+"!="+e.val]?(delete this.filters[r+"!="+e.val],e.op="<",this.filters[r+"<"]=e):this.filters[r+"<="]=e}}}).call(this,n(48))},function(e,t,n){var r;(r=n(57)).Expression=function Expression(e){this.value=e},r.Expression.prototype={is:"expression",ev:function(e){return this.value.length>1?new r.Expression(this.value.map(function(t){return t.ev(e)})):this.value[0].ev(e)},toString:function(e){return this.value.map(function(t){return t.toString(e)}).join(" ")}}},function(e,t,n){var r;(r=n(57)).Element=function Element(e){this.value=e.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")},r.Element.prototype.specificity=function(){return["id"===this.type?1:0,"class"===this.type?1:0]},r.Element.prototype.toString=function(){return this.value}},function(e,t,n){(function(e){var t,r;t=n(57),r=e._||n(0),t.Dimension=function Dimension(e,t,n){this.value=parseFloat(e),this.unit=t||null,this.index=n},t.Dimension.prototype={is:"float",physical_units:["m","cm","in","mm","pt","pc"],screen_units:["px","%"],all_units:["m","cm","in","mm","pt","pc","px","%"],densities:{m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},ev:function(e){if(this.unit&&!r.contains(this.all_units,this.unit))return e.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&r.contains(this.physical_units,this.unit)){if(!e.ppi)return e.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*e.ppi,this.unit="px"}return this},round:function(){return this.value=Math.round(this.value),this},toColor:function(){return new t.Color([this.value,this.value,this.value])},round:function(){return this.value=Math.round(this.value),this},toString:function(){return this.value.toString()},operate:function(e,n,r){return"%"===this.unit&&"%"!==r.unit?(e.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===r.unit?"*"===n||"/"===n||"%"===n?(e.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new t.Dimension(t.operate(n,this.value,this.value*r.value*.01),this.unit):new t.Dimension(t.operate(n,this.value,r.value),this.unit||r.unit)}}}).call(this,n(48))},function(e,t,n){(function(e){!function(t){var r=n(1357),i=e._||n(0);function symbolizerName(e){return e.charAt(0).toUpperCase()+e.slice(1).replace(/\-./,function capitalize(e){return e[1].toUpperCase()})+"Symbolizer"}t.Definition=function Definition(e,n){this.elements=e.elements,r.ok(e.filters instanceof t.Filterset),this.rules=n,this.ruleIndex={};for(var i=0;i<this.rules.length;i++)"zoom"in this.rules[i]&&(this.rules[i]=this.rules[i].clone()),this.rules[i].zoom=e.zoom,this.ruleIndex[this.rules[i].updateID()]=!0;this.filters=e.filters,this.zoom=e.zoom,this.frame_offset=e.frame_offset,this.attachment=e.attachment||"__default__",this.specificity=e.specificity()},t.Definition.prototype.toString=function(){for(var e=this.filters.toString(),t=0;t<this.rules.length;t++)e+="\n    "+this.rules[t];return e},t.Definition.prototype.clone=function(e){e&&r.ok(e instanceof t.Filterset);var n=Object.create(t.Definition.prototype);return n.rules=this.rules.slice(),n.ruleIndex=i.clone(this.ruleIndex),n.filters=e||this.filters.clone(),n.attachment=this.attachment,n},t.Definition.prototype.addRules=function(e){for(var t=0,n=0;n<e.length;n++)this.ruleIndex[e[n].id]||(this.rules.push(e[n]),this.ruleIndex[e[n].id]=!0,t++);return t},t.Definition.prototype.appliesTo=function(e,t){for(var n=0,r=this.elements.length;n<r;n++){var i=this.elements[n];if(!(i.wildcard||"class"===i.type&&t[i.clean]||"id"===i.type&&e===i.clean))return!1}return!0},t.Definition.prototype.symbolizersToXML=function(e,n,r){var i=r.toXML(e).join("")+this.filters.toXML(e),o=[],a=[];for(var s in n){for(var l in a=[],n[s])a.push(n[s][l].index);var u=Math.min.apply(Math,a);o.push([s,u])}o=function symbolizerList(e){return e.sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}(o);for(var c=0,d=0;d<o.length;d++){var f=n[o[d]],h=o[d].split("/").pop();if("*"!==h){c++;var p=t.Reference.requiredProperties(h,f);if(p){var m=f[Object.keys(f).shift()];e.error({message:p,index:m.index,filename:m.filename})}var g,v=symbolizerName(h),y=!0;for(var _ in i+="    <"+v+" ",f){"map"===h&&e.error({message:"Map properties are not permitted in other rules",index:f[_].index,filename:f[_].filename});var b=t.Reference.selector(f[_].name);b&&b.serialization&&"content"===b.serialization?(y=!1,g=f[_].ev(e).toXML(e,!0)):b&&b.serialization&&"tag"===b.serialization?(y=!1,g=f[_].ev(e).toXML(e,!0)):i+=f[_].ev(e).toXML(e)+" "}y?i+="/>\n":void 0!==g&&(-1!=g.indexOf("<")?i+=">"+g+"</"+v+">\n":i+="><![CDATA["+g+"]]></"+v+">\n")}}return c&&i?"  <Rule>\n"+i+"  </Rule>\n":""},t.Definition.prototype.collectSymbolizers=function(e,t){for(var n,r={},i=t;i<this.rules.length;i++){var o=(n=this.rules[i]).instance+"/"+n.symbolizer;!(e.current&n.zoom)||o in r&&n.name in r[o]||(e.current&=n.zoom,o in r||(r[o]={}),r[o][n.name]=n)}if(Object.keys(r).length)return e.rule&=e.available&=~e.current,r},t.Definition.prototype.toXML=function(e,n){var r=this.filters.toString();r in n||(n[r]=t.Zoom.all);for(var i,o=t.Zoom.all,a="",s={available:t.Zoom.all},l=0;l<this.rules.length&&o;l++)if(s.rule=this.rules[l].zoom,n[r]&s.rule)for(;s.current=s.rule&o;)if(i=this.collectSymbolizers(s,l)){if(!(n[r]&s.current))continue;a+=this.symbolizersToXML(e,i,(new t.Zoom).setZoom(n[r]&s.current)),n[r]&=~s.current}return a},t.Definition.prototype.toJS=function(e){var n={},r=this.frame_offset,o=["("+this.zoom+" & (1 << ctx.zoom))"],a=this.filters.toJS(e),s=this.zoom!==t.Zoom.all;return a&&o.push(a),r&&o.push('ctx["frame-offset"] === '+r),i.each(this.rules,function(r){var i={};if(!r instanceof t.Rule)throw new Error("Ruleset not supported");i.index=r.index,i.symbolizer=r.symbolizer,i.js="if("+o.join(" && ")+"){"+r.value.toJS(e)+"}",i.constant="field"!==r.value.ev(e).is,i.filtered=s||""!==a,n[r.name]=n[r.name]||[],n[r.name].push(i)}),n}}(n(57))}).call(this,n(48))},function(e,t,n){var r;(r=n(57)).Comment=function Comment(e,t){this.value=e,this.silent=!!t},r.Comment.prototype={toString:function(e){return"\x3c!--"+this.value+"--\x3e"},ev:function(){return this}}},function(e,t,n){var r;(r=n(57)).Color=function Color(e,t){Array.isArray(e)?this.rgb=e.slice(0,3):6==e.length?this.rgb=e.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=e.split("").map(function(e){return parseInt(e+e,16)}),"number"==typeof t?this.alpha=t:4===e.length?this.alpha=e[3]:this.alpha=1},r.Color.prototype={is:"color",ev:function(){return this},toString:function(){return this.alpha<1?"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(", ")+")":"#"+this.rgb.map(function(e){return 1===(e=((e=Math.round(e))>255?255:e<0?0:e).toString(16)).length?"0"+e:e}).join("")},operate:function(e,t,n){var i=[];n instanceof r.Color||(n=n.toColor());for(var o=0;o<3;o++)i[o]=r.operate(t,this.rgb[o],n.rgb[o]);return new r.Color(i)},toHSL:function(){var e,t,n=this.rgb[0]/255,r=this.rgb[1]/255,i=this.rgb[2]/255,o=this.alpha,a=Math.max(n,r,i),s=Math.min(n,r,i),l=(a+s)/2,u=a-s;if(a===s)e=t=0;else{switch(t=l>.5?u/(2-a-s):u/(a+s),a){case n:e=(r-i)/u+(r<i?6:0);break;case r:e=(i-n)/u+2;break;case i:e=(n-r)/u+4}e/=6}return{h:360*e,s:t,l:l,a:o}}}},function(e,t,n){(function(e){var t,r;t=n(57),r=e._||n(0),t.Call=function Call(e,t,n){this.name=e,this.args=t,this.index=n},t.Call.prototype={is:"call",ev:function(e){for(var n=this.args.map(function(t){return t.ev(e)}),i=0;i<n.length;i++)if("undefined"===n[i].is)return{is:"undefined",value:"undefined"};if(this.name in t.functions){if(t.functions[this.name].length<=n.length){var o=t.functions[this.name].apply(t.functions,n);return null===o?(e.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):o}return e.error({message:"incorrect number of arguments for "+this.name+"(). "+t.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var a=t.Reference.mapnikFunctions[this.name];if(void 0===a){var s=r.pairs(t.Reference.mapnikFunctions),l=this.name,u=s.map(function(e){return[e[0],t.Reference.editDistance(l,e[0]),e[1]]}).sort(function(e,t){return e[1]-t[1]});return e.error({message:"unknown function "+this.name+"(), did you mean "+u[0][0]+"("+u[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return a===n.length||Array.isArray(a)&&r.include(a,n.length)||-1===a?(this.args=n,this):(e.error({message:"function "+this.name+"() takes "+a+" arguments and was given "+n.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})},toString:function(e,t){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}}).call(this,n(48))},function(module,exports,__webpack_require__){(function(global){!function(carto){var tree=__webpack_require__(57),_=global._||__webpack_require__(0);function CartoCSS(e,t){this.options=t||{},this.imageURLs=[],e&&this.setStyle(e)}CartoCSS.Layer=function(e,t){this.options=t,this.shader=e},CartoCSS.Layer.prototype={fullName:function(){return this.shader.attachment},name:function(){return this.fullName().split("::")[0]},frames:function(){return this.shader.frames},attachment:function(){return this.fullName().split("::")[1]},eval:function(e){var t=this.shader[e];if(t&&t.style)return t.style({},{zoom:0,"frame-offset":0})},getStyle:function(e,t){var n={};for(var r in this.shader)"attachment"!==r&&"zoom"!==r&&"frames"!==r&&"symbolizers"!==r&&(n[r]=this.shader[r].style(e,t));return n},getSymbolizers:function(){return this.shader.symbolizers},isVariable:function(){for(var e in this.shader)if("attachment"!==e&&"zoom"!==e&&"frames"!==e&&"symbolizers"!==e&&!this.shader[e].constant)return!0;return!1},getShader:function(){return this.shader},filter:function(e,t,n){for(var r in this.shader){if(this.shader[r](t,n))return!0}return!1},transformGeometry:function(e){return e},transformGeometries:function(e){return e}},CartoCSS.prototype={setStyle:function(e){var t=this.parse(e);if(!t)throw new Error(this.parse_env.errors);this.layers=t.map(function(e){return new CartoCSS.Layer(e)})},getLayers:function(){return this.layers},getDefault:function(){return this.findLayer({attachment:"__default__"})},findLayer:function(e){return _.find(this.layers,function(t){for(var n in e){var r=t[n];if("function"==typeof r&&(r=r.call(t)),e[n]!==r)return!1}return!0})},_createFn:function(e){var t=e.join("\n");return this.options.debug&&console.log(t),Function("data","ctx","var _value = null; "+t+"; return _value; ")},_compile:function(shader){for(var attr in"string"==typeof shader&&(shader=eval("(function() { return "+shader+"; })()")),this.shader_src=shader,shader){var c=mapper[attr];c&&(this.compiled[c]=eval("(function() { return shader[attr]; })();"))}},getImageURLs:function(){return this.imageURLs},parse:function(e){var t={frames:[],errors:[],error:function(e){this.errors.push(e)}};this.parse_env=t;var n=null;try{n=new carto.Parser(t).parse(e)}catch(e){return void t.errors.push(e.message)}if(n){function defKey(e){return e.elements[0]+"::"+e.attachment}var r=n.toList(t);r.reverse();for(var i={},o=0;o<r.length;++o){for(var a=defKey(g=r[o]),s=i[a]=i[a]||{symbolizers:[]},l=0;l<g.rules.length;l++){var u=g.rules[l];if("marker-file"===u.name||"point-file"===u.name){var c=u.value.value[0].value[0].value.value;this.imageURLs.push(c)}}s.frames=[],s.zoom=tree.Zoom.all;var d=g.toJS(t);for(var f in this.options.debug&&console.log("props",d),d){var h=s[f]=s[f]||{constant:!1,symbolizer:null,js:[],index:0};h.js.push(d[f].map(function(e){return e.js}).join("\n")),h.symbolizer=_.first(d[f].map(function(e){return e.symbolizer})),h.index=_.max(d[f].map(function(e){return e.index}).concat(h.index)),h.constant=!_.any(d[f].map(function(e){return!e.constant})),h.filtered=d[f][0].filtered}}var p=[];this.options.debug&&console.log(i);var m={};for(o=0;o<r.length;++o){var g=r[o];if(this.options.strict&&(g.toXML(t,{}),t.errors.message))throw new Error(t.errors.message);var v=defKey(g);s=i[v];if(!m[v]){for(var y in this.options.debug&&console.log("**",v),s)"zoom"!==y&&"frames"!==y&&"symbolizers"!==y&&(this.options.debug&&console.log("*",y),s[y].style=this._createFn(s[y].js),s.symbolizers.push(s[y].symbolizer),s.symbolizers=_.uniq(s.symbolizers));s.attachment=v,p.push(s),m[v]=!0}s.zoom|=g.zoom,s.frames.push(g.frame_offset)}for(o=0;o<p.length;++o)p[o].frames=_.uniq(p[o].frames);return p}return null}},carto.RendererJS=function(e){this.options=e||{},this.options.mapnik_version=this.options.mapnik_version||"latest",this.reference=this.options.reference||__webpack_require__(1358).version.latest,this.options.strict=!!this.options.hasOwnProperty("strict")&&this.options.strict},carto.RendererJS.prototype.render=function render(e,t){return tree.Reference.setData(this.reference),new CartoCSS(e,this.options)},module.exports=carto.RendererJS}(__webpack_require__(299))}).call(this,__webpack_require__(48))},function(e,t,n){(function(t){var r=t._||n(0),i=n(299);function addRules(e,t,n,r){for(var i,o,a,s=t.filters,l=t.rules,u=0;u<e.length;u++)(i=e[u].filters.cloneWith(s))?(a=n[i])?a.addRules(l):(o=e[u].clone(i)).addRules(l)&&(n[i]=o,e.splice(u,0,o),u++):null===i&&(e[u]=e[u].clone(),e[u].addRules(l));return e}function inheritDefinitions(e,t){var n,r,i=+new Date,o={},a={},s=[];e.forEach(function(e){e.filters.ev(t)});for(var l=0;l<e.length;l++){r=e[l].attachment,n=[e[l]],o[r]||(o[r]=[],o[r].attachment=r,a[r]={},s.push(o[r]));for(var u=l+1;u<e.length;u++)e[u].attachment===r&&(n=addRules(n,e[u],a[r]));for(var c=0;c<n.length;c++)a[r][n[c].filters]=n[c],o[r].push(n[c])}return t.benchmark&&console.warn("Inheritance time: "+(new Date-i)+"ms"),s}function sortStylesIndex(e,t){return t.index-e.index}function sortStyles(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.index=1/0;for(var i=0;i<r.length;i++)for(var o=r[i].rules,a=0;a<o.length;a++){var s=o[a];s.index<r.index&&(r.index=s.index)}}var l=e.slice();return l.sort(sortStylesIndex),l}i.Renderer=function Renderer(e,t){this.env=e||{},this.options=t||{},this.options.mapnik_version=this.options.mapnik_version||"3.0.0"},i.Renderer.prototype.renderMSS=function render(e){var t=r.defaults(this.env,{benchmark:!1,validation_data:!1,effects:[]});if(!i.tree.Reference.setVersion(this.options.mapnik_version))throw new Error("Could not set mapnik version to "+this.options.mapnik_version);var n=[],o=[];t.benchmark&&console.time("Parsing MSS");var a=i.Parser(t).parse(e);t.benchmark&&console.timeEnd("Parsing MSS"),t.benchmark&&console.time("Rule generation");var s=a.toList(t);t.benchmark&&console.timeEnd("Rule generation"),t.benchmark&&console.time("Rule inheritance");var l=inheritDefinitions(s,t);t.benchmark&&console.timeEnd("Rule inheritance"),t.benchmark&&console.time("Style sort");var u=sortStyles(l,t);t.benchmark&&console.timeEnd("Style sort"),t.benchmark&&console.time("Total Style generation");for(var c,d,f=0;f<u.length;f++){d="style"+("__default__"!==(c=u[f]).attachment?"-"+c.attachment:""),o.push(d);var h='\tStyle "'+d+'" (#'+f+") toXML";t.benchmark&&console.time(h),n.push(i.tree.StyleXML(d,c.attachment,c,t)),t.benchmark&&console.timeEnd(h)}if(t.benchmark&&console.timeEnd("Total Style generation"),t.errors)throw t.errors;return n.join("\n")},i.Renderer.prototype.render=function render(e){var t=r.defaults(this.env,{benchmark:!1,validation_data:!1,effects:[],ppi:90.714});if(!i.tree.Reference.setVersion(this.options.mapnik_version))throw new Error("Could not set mapnik version to "+this.options.mapnik_version);var n,o,a,s,l=[],u=r.chain(e.Stylesheet).map(function(e){if("string"==typeof e)throw new Error("Stylesheet object is expected not a string: '"+e+"'");t=r.extend(t,{filename:e.id});var n=+new Date,o=i.Parser(t).parse(e.data);return t.benchmark&&console.warn("Parsing time: "+(new Date-n)+"ms"),o.toList(t)}).flatten().value();function appliesTo(e,t){return function(e){return e.appliesTo(o.name,t)}}for(var c=0;c<e.Layer.length;c++){o=e.Layer[c],n=[],a={},t.benchmark&&console.warn("processing layer: "+o.id);for(var d=(o.class||"").split(/\s+/g),f=0;f<d.length;f++)a[d[f]]=!0;s=sortStyles(inheritDefinitions(u.filter(appliesTo(o.name,a)),t),t);for(var h,p,m=0;m<s.length;m++){h=s[m],p=o.name+("__default__"!==h.attachment?"-"+h.attachment:"");var g=i.tree.StyleXML(p,h.attachment,h,t);g&&(l.push(g),n.push(p))}l.push(i.tree.LayerXML(o,n))}l.unshift(t.effects.map(function(e){return e.toXML(t)}).join("\n"));var v=function getMapProperties(e,t,n){var o={},a=i.tree.Reference.data.symbolizers.map;return r(e).each(function(e,t){t in a&&(o[t]=t+'="'+e+'"')}),t.filter(function(e){return"Map"===e.elements.join("")}).forEach(function(e){for(var t=0;t<e.rules.length;t++){var r=e.rules[t].name;r in a||n.error({message:"Rule "+r+" not allowed for Map.",index:e.rules[t].index}),o[r]=e.rules[t].ev(n).toXML(n)}}),o}(e,u,t);if(t.errors)throw t.errors;var y=r.reduce(e,function(e,t,n){if(!t&&0!==t)return e;switch(n){case"srs":case"Layer":case"Stylesheet":break;case"bounds":case"center":case"minzoom":case"maxzoom":case"version":e.push('  <Parameter name="'+n+'">'+t+"</Parameter>");break;case"name":case"description":case"legend":case"attribution":case"template":e.push('  <Parameter name="'+n+'"><![CDATA['+t+"]]></Parameter>");break;case"format":e.push('  <Parameter name="'+n+'">'+t+"</Parameter>");break;case"interactivity":e.push('  <Parameter name="interactivity_layer">'+t.layer+"</Parameter>"),e.push('  <Parameter name="interactivity_fields">'+t.fields+"</Parameter>");break;default:"string"==typeof t?e.push('  <Parameter name="'+n+'"><![CDATA['+t+"]]></Parameter>"):"number"==typeof t?e.push('  <Parameter name="'+n+'">'+t+"</Parameter>"):"boolean"==typeof t&&e.push('  <Parameter name="'+n+'">'+t+"</Parameter>")}return e},[]);y.length&&l.unshift("<Parameters>\n"+y.join("\n")+"\n</Parameters>\n");var _=r.map(v,function(e){return" "+e}).join("");return l.unshift('<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE Map[]>\n<Map'+_+">\n"),l.push("</Map>"),l.join("\n")},e.exports=i,e.exports.addRules=addRules,e.exports.inheritDefinitions=inheritDefinitions,e.exports.sortStyles=sortStyles}).call(this,n(48))},function(e,t,n){(function(e){var r=t,i=n(57),o=e._||n(0);r.Parser=function Parser(e){var t,n,r,a,s,l,u,c,d,f=this;function save(){a=u[r],s=n,c=n}function restore(){u[r]=a,c=n=s}function sync(){n>c&&(u[r]=u[r].slice(n-c),c=n)}function $(e){var i,o,a,s;if(e instanceof Function)return e.call(d.parsers);if("string"==typeof e)i=t.charAt(n)===e?e:null,o=1,sync();else{if(sync(),!(i=e.exec(u[r])))return null;o=i[0].length}if(i){var l=n+=o;for(s=n+u[r].length-o;n<s&&(32===(a=t.charCodeAt(n))||10===a||9===a);)n++;return u[r]=u[r].slice(o+(n-l)),c=n,0===u[r].length&&r<u.length-1&&r++,"string"==typeof i?i:1===i.length?i[0]:i}}function extractErrorLine(e,t){return(e.slice(0,t).match(/\n/g)||"").length+1}function makeError(n){var r,i;o.defaults(n,{index:l,filename:e.filename,message:"Parse error.",line:0,column:-1}),r=n.filename&&f.env.inputs&&f.env.inputs[n.filename]?f.env.inputs[n.filename]:t,n.line=extractErrorLine(r,n.index);for(var a=n.index;a>=0&&"\n"!==r.charAt(a);a--)n.column++;return i=o.template("<%=filename%>:<%=line%>:<%=column%> <%=message%>"),new Error(i(n))}return this.env=e=e||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},d={extractErrorLine:extractErrorLine,parse:function(o){var a,s=null;n=r=c=l=0,u=[],t=o.replace(/\r\n/g,"\n"),e.filename&&(f.env.inputs[e.filename]=t);if(u=function(e){for(var n,r,i,o,a=0,l=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,u=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,c=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,d=0,f=e[0],h=0;h<t.length;)if(l.lastIndex=h,(n=l.exec(t))&&n.index===h&&(h+=n[0].length,f.push(n[0])),i=t.charAt(h),u.lastIndex=c.lastIndex=h,(n=c.exec(t))&&n.index===h)h+=n[0].length,f.push(n[0]);else if(r||"/"!==i||"/"!==(o=t.charAt(h+1))&&"*"!==o||!(n=u.exec(t))||n.index!==h){switch(i){case"{":if(!r){d++,f.push(i);break}case"}":if(!r){d--,f.push(i),e[++a]=f=[];break}case"(":if(!r){r=!0,f.push(i);break}case")":if(r){r=!1,f.push(i);break}default:f.push(i)}h++}else h+=n[0].length,f.push(n[0]);return 0!==d&&(s={index:h-1,type:"Parse",message:d>0?"missing closing `}`":"missing opening `{`"}),e.map(function(e){return e.join("")})}([[]]),s)throw makeError(s);(a=new i.Ruleset([],$(this.parsers.primary))).root=!0,a.toList=function(e){e.error=function(t){e.errors||(e.errors=new Error("")),e.errors.message?e.errors.message+="\n"+makeError(t).message:e.errors.message=makeError(t).message},e.frames=e.frames||[];var t=this.flatten([],[],e);return t.sort(d),t};var d=function(e,t){var n=e.specificity,r=t.specificity;return n[0]!=r[0]?r[0]-n[0]:n[1]!=r[1]?r[1]-n[1]:n[2]!=r[2]?r[2]-n[2]:r[3]-n[3]};return a},parsers:{primary:function(){for(var e,t=[];(e=$(this.rule)||$(this.ruleset)||$(this.comment))||$(/^[\s\n]+/)||(e=$(this.invalid));)e&&t.push(e);return t},invalid:function(){var e=$(/^[^;\n]*[;\n]/);if(e)return new i.Invalid(e,s)},comment:function(){var e;if("/"===t.charAt(n))return"/"===t.charAt(n+1)?new i.Comment($(/^\/\/.*/),!0):(e=$(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new i.Comment(e):void 0},entities:{quoted:function(){if('"'===t.charAt(n)||"'"===t.charAt(n)){var e=$(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return e?new i.Quoted(e[1]||e[2]):void 0}},field:function(){if($("[")){var e=$(/(^[^\]]+)/);if($("]"))return e?new i.Field(e[1]):void 0}},comparison:function(){var e=$(/^=~|=|!=|<=|>=|<|>/);if(e)return e},keyword:function(){var e=$(/^[A-Za-z-]+[A-Za-z-0-9_]*/);if(e)return new i.Keyword(e)},call:function(){var e,t;if(e=/^([\w\-]+|%)\(/.exec(u[r])){if("url"===(e=e[1]))return null;if(n+=e.length,$("("),t=$(this.entities.arguments),$(")"))return e?new i.Call(e,t,n):void 0}},arguments:function(){for(var e,t=[];(e=$(this.expression))&&(t.push(e),$(",")););return t},literal:function(){return $(this.entities.dimension)||$(this.entities.keywordcolor)||$(this.entities.hexcolor)||$(this.entities.quoted)},url:function(){var e;if("u"===t.charAt(n)&&$(/^url\(/))return e=$(this.entities.quoted)||$(this.entities.variable)||$(/^[\-\w%@$\/.&=:;#+?~]+/)||"",$(")")?new i.URL(void 0!==e.value||e instanceof i.Variable?e:new i.Quoted(e)):new i.Invalid(e,s,"Missing closing ) in URL.")},variable:function(){var r,o=n;if("@"===t.charAt(n)&&(r=$(/^@[\w-]+/)))return new i.Variable(r,o,e.filename)},hexcolor:function(){var e;if("#"===t.charAt(n)&&(e=$(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new i.Color(e[1])},keywordcolor:function(){var e=u[r].match(/^[a-z]+/);if(e&&e[0]in i.Reference.data.colors)return new i.Color(i.Reference.data.colors[$(/^[a-z]+/)])},dimension:function(){var e=t.charCodeAt(n);if(!(e>57||e<45||47===e)){var r=$(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return r?new i.Dimension(r[1],r[2],s):void 0}}},variable:function(){var e;if("@"===t.charAt(n)&&(e=$(/^(@[\w-]+)\s*:/)))return e[1]},entity:function(){return $(this.entities.call)||$(this.entities.literal)||$(this.entities.field)||$(this.entities.variable)||$(this.entities.url)||$(this.entities.keyword)},end:function(){return $(";")||function peek(e){return"string"==typeof e?t.charAt(n)===e:!!e.test(u[r])}("}")},element:function(){var e=$(/^(?:[.#][\w\-]+|\*|Map)/);if(e)return new i.Element(e)},attachment:function(){var e=$(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(e)return e[1]},selector:function(){var e,r,o,a,l,u=[],c=new i.Filterset,d=[],f=i.FrameOffset.none;for(segments=0,conditions=0;(o=$(this.element))||(l=$(this.zoom))||(fo=$(this.frame_offset))||(a=$(this.filter))||(e=$(this.attachment));){if(segments++,o)u.push(o);else if(l)d.push(l),conditions++;else if(fo)f=fo,conditions++;else if(a){var h=c.add(a);if(h)throw makeError({message:h,index:n-1});conditions++}else{if(r)throw makeError({message:"Encountered second attachment name.",index:n-1});r=e}var p=t.charAt(n);if("{"===p||"}"===p||";"===p||","===p)break}if(segments)return new i.Selector(c,d,f,u,r,conditions,s)},filter:function(){var t,n,r;if(save(),$("[")&&(t=$(/^[a-zA-Z0-9\-_]+/)||$(this.entities.quoted)||$(this.entities.variable)||$(this.entities.keyword)||$(this.entities.field))&&(t instanceof i.Quoted&&(t=new i.Field(t.toString())),(n=$(this.entities.comparison))&&(r=$(this.entities.quoted)||$(this.entities.variable)||$(this.entities.dimension)||$(this.entities.keyword)||$(this.entities.field)))){if(!$("]"))throw makeError({message:"Missing closing ] of filter.",index:s-1});return t.is||(t=new i.Field(t)),new i.Filter(t,n,r,s,e.filename)}},frame_offset:function(){var e,t;if(save(),$(/^\[\s*frame-offset/g)&&(e=$(this.entities.comparison))&&(t=$(/^\d+/))&&$("]"))return i.FrameOffset(e,t,s)},zoom:function(){var e,t;if(save(),$(/^\[\s*zoom/g)&&(e=$(this.entities.comparison))&&(t=$(this.entities.variable)||$(this.entities.dimension))&&$("]"))return new i.Zoom(e,t,s);restore()},block:function(){var e;if($("{")&&(e=$(this.primary))&&$("}"))return e},ruleset:function(){var e,t,n=[];for(save();e=$(this.selector);){for(n.push(e);$(this.comment););if(!$(","))break;for(;$(this.comment););}if(e)for(;$(this.comment););if(n.length>0&&(t=$(this.block))){if(1===n.length&&n[0].elements.length&&"Map"===n[0].elements[0].value){var r=new i.Ruleset(n,t);return r.isMap=!0,r}return new i.Ruleset(n,t)}restore()},rule:function(){var r,o,a=t.charAt(n);if(save(),"."!==a&&"#"!==a&&(r=$(this.variable)||$(this.property))){if((o=$(this.value))&&$(this.end))return new i.Rule(r,o,s,e.filename);l=n,restore()}},font:function(){for(var e,t=[],n=[];e=$(this.entity);)n.push(e);if(t.push(new i.Expression(n)),$(","))for(;(e=$(this.expression))&&(t.push(e),$(",")););return new i.Value(t)},value:function(){for(var e,t=[];(e=$(this.expression))&&(t.push(e),$(",")););return t.length>1?new i.Value(t.map(function(e){return e.value[0]})):1===t.length?new i.Value(t):void 0},sub:function(){var e,t=[];if($("(")){for(;(e=$(this.expression))&&(t.push(e),$(",")););$(")")}return t.length>1?new i.Value(t.map(function(e){return e.value[0]})):1===t.length?new i.Value(t):void 0},multiplication:function(){var e,t,n,r;if(e=$(this.operand)){for(;(n=$("/")||$("*")||$("%"))&&(t=$(this.operand));)r=new i.Operation(n,[r||e,t],s);return r||e}},addition:function(){var e,r,o,a;if(e=$(this.multiplication)){for(;(o=$(/^[-+]\s+/)||" "!=t.charAt(n-1)&&($("+")||$("-")))&&(r=$(this.multiplication));)a=new i.Operation(o,[a||e,r],s);return a||e}},operand:function(){return $(this.sub)||$(this.entity)},expression:function(){for(var e,t=[];e=$(this.addition)||$(this.entity);)t.push(e);if(t.length>0)return new i.Expression(t)},property:function(){var e=$(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(e)return e[1]}}}}}).call(this,n(48))},function(e,t){"function"==typeof Object.create?e.exports=function inherits(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function inherits(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){e.exports=function isBuffer(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,n){(function(t){var r=t.carto||n(299);function TorqueLayer(){}TorqueLayer.prototype={},TorqueLayer.optionsFromLayer=function(e){var t={};if(!e)return t;var n={"buffer-size":"buffer-size","-torque-frame-count":"steps","-torque-resolution":"resolution","-torque-animation-duration":"animationDuration","-torque-aggregation-function":"countby","-torque-time-attribute":"column","-torque-data-aggregation":"data_aggregation"};for(var r in n){var i=e.eval(r);if(void 0!==i)t[n[r]]=i}return t},TorqueLayer.optionsFromCartoCSS=function(e){var t=(new r.RendererJS).render(e).findLayer({name:"Map"});return TorqueLayer.optionsFromLayer(t)},e.exports.TorqueLayer=TorqueLayer}).call(this,n(48))},function(e,t){var n={version:"1.0.0",style:{"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["src","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","darken","lighten"]}},layer:{"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"-torque-clear-color":{css:"-torque-clear-color",type:"color","default-value":"rgba(255, 255, 255, 0)","default-meaning":"full clear",doc:"color used to clear canvas on each frame"},"-torque-frame-count":{css:"-torque-frame-count","default-value":"128",type:"number","default-meaning":"the data is broken into 128 time frames",doc:"Number of animation steps/frames used in the animation. If the data contains a fewere number of total frames, the lesser value will be used."},"-torque-resolution":{css:"-torque-resolution","default-value":"2",type:"number","default-meaning":"",doc:"Spatial resolution in pixels. A resolution of 1 means no spatial aggregation of the data. Any other resolution of N results in spatial aggregation into cells of NxN pixels. The value N must be power of 2"},"-torque-animation-duration":{css:"-torque-animation-duration","default-value":"30",type:"number","default-meaning":"the animation lasts 30 seconds",doc:"Animation duration in seconds"},"-torque-aggregation-function":{css:"-torque-aggregation-function","default-value":"count(cartodb_id)",type:"string","default-meaning":"the value for each cell is the count of points in that cell",doc:"A function used to calculate a value from the aggregate data for each cell. See -torque-resolution"},"-torque-time-attribute":{css:"-torque-time-attribute","default-value":"time",type:"string","default-meaning":"the data column in your table that is of a time based type",doc:"The table column that contains the time information used create the animation"},"-torque-data-aggregation":{css:"-torque-data-aggregation","default-value":"linear",type:["cumulative"],"default-meaning":"previous values are discarded",doc:"A linear animation will discard previous values while a cumulative animation will accumulate them until it restarts"}},symbolizers:{"*":{"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["src","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","darken","lighten"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},trail:{steps:{css:"trail-steps",type:"float","default-value":1,"default-meaning":"no trail steps",doc:"How many steps of trails are going to be rendered"}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"marker-type":{css:"marker-type",type:["rectangle","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an rectangle or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"float"}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]}};e.exports={version:{latest:n,"1.0.0":n}}},function(e,t){var n=function(e,t){if(e<0)throw new Error("start must be a positive number");if(e>=t)throw new Error("start must be smaller than end");this.start=e,this.end=t};n.prototype={diff:function(){return this.end-this.start},isLast:function(e){return(0|e)===this.end}},e.exports=n},function(e,t,n){(function(t){var r=n(208),i=n(3092),o=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)},a=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.msCancelAnimationFrame||function(e){clearTimeout(e)};function Animator(e,t){if(!t.steps)throw new Error("steps option missing");this.options=t,this.running=!1,this._tick=this._tick.bind(this),this._t0=+new Date,this.callback=e,this._time=0,this.itemsReady=!1,this.options=r.extend({animationDelay:0,maxDelta:.2,loop:void 0===t.loop||t.loop},this.options),this.steps(t.steps)}Animator.prototype={start:function(){this.running=!0,o(this._tick),this.options.onStart&&this.options.onStart(),1===this.stepsRange().diff()&&(this.running=!1)},isRunning:function(){return this.running},stop:function(){this.pause(),this.time(this.stepsRange().start),this.options.onStop&&this.options.onStop()},time:function(e){if(!arguments.length)return this._time;this._time=e;var t=this.range(this.domain(this._time));this.callback(t)},toggle:function(){this.running?this.pause():this.start()},rescale:function(){return this.domainInv=r.math.linear(this.options.animationDelay,this.options.animationDelay+this.options.animationDuration),this.domain=this.domainInv.invert(),this.range=r.math.linear(0,this._defaultStepsRange.end),this.rangeInv=this.range.invert(),this.time(this._time),this.running?this.start():this.pause(),this},duration:function(e){return arguments.length?(this.options.animationDuration=e,this.time()>e&&this.time(0),this.rescale(),this):this.options.animationDuration},steps:function(e){return this.options.steps=e,this._defaultStepsRange=new i(0,e),this.rescale()},stepsRange:function(e,t){if(2===arguments.length){if(e<this._defaultStepsRange.start)throw new Error("start must be within default steps range");if(t>this._defaultStepsRange.end)throw new Error("end must be within default steps range");this._customStepsRange=new i(e,t),this.options.onStepsRange&&this.options.onStepsRange();var n=0|this.step();(n<e||n>t)&&this.step(e)}return this._customStepsRange||this._defaultStepsRange},removeCustomStepsRange:function(){this._customStepsRange=void 0,this.options.onStepsRange&&this.options.onStepsRange()},step:function(e){if(0===arguments.length)return this.range(this.domain(this._time));this._time=this.domainInv(this.rangeInv(e))},pause:function(){this.running=!1,a(this._tick),this.options.onPause&&this.options.onPause()},_tick:function(){var e=+new Date,t=.001*(e-this._t0);t=Math.min(this.options.maxDelta,t),this._t0=e,this._time+=t;var n=this.stepsRange();n.isLast(this.step())&&(this.options.loop?this.step(n.start):(this.time(this.options.animationDuration),this.pause())),this.running&&(this.time(this._time),o(this._tick))}},e.exports=Animator}).call(this,n(48))},function(e,t,n){var r=n(1);n(208);var i=n(0),o=n(434),a=n(1340),s=n(231),l=function LeafletTorqueLayer(e,t){o.apply(this,arguments),this.setNativeTorqueLayer(this.leafletLayer)};l.prototype=i.extend({},o.prototype,a,{_createLeafletLayer:function _createLeafletLayer(){var e,t=this._getQuery(this.model),n=this._initialAttrs(this.model);return i.extend(n,{dynamic_cdn:this.model.get("dynamic_cdn"),showLimitErrors:this.showLimitErrors,instanciateCallback:r(e=function _context(){var e=this.model.get("cartocss")||this.model.get("tile_style");return"_cdbct_"+s.uniqueCallbackName(e+t)}).call(e,this)}),new L.TorqueLayer(n)}}),e.exports=l},function(e,t,n){var r=n(1),i=n(0),o=n(435),a=n(434),s=n(1361),l=n(1360),u=function LeafletCartoDBLayerGroupView(e,t){var n,i,l;a.apply(this,arguments),s.apply(this,arguments),this.leafletLayer.on("load",r(n=function _context(){this.trigger("load")}).call(n,this)),this.leafletLayer.on("loading",r(i=function _context2(){this.trigger("loading")}).call(i,this)),this.leafletLayer.on("tileerror",r(l=function _context3(e){this.model.addError({type:o.WINDSHAFT_ERRORS.TILE})}).call(l,this))};(u.prototype=i.extend({},a.prototype,s.prototype,{interactionClass:l.Interactive,_createLeafletLayer:function _createLeafletLayer(){var e=new L.TileLayer(null,{opacity:.99,maxZoom:30});return e._setUrl=function(e,t){return L.TileLayer.prototype.setUrl.call(this,e,t)},e},_reload:function _reload(){var e=this.model.getTileURLTemplate(),t=this.model.getSubdomains();e||(e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),t&&L.Util.setOptions(this.leafletLayer,{subdomains:t}),this.leafletLayer._setUrl(e),this._reloadInteraction()},_manageOffEvents:function _manageOffEvents(e,t){this._onFeatureOut(t.layer)},_manageOnEvents:function _manageOnEvents(e,t){var n=e.layerPointToContainerPoint(t.layerPoint);if(!n||isNaN(n.x)||isNaN(n.y))return!1;var r=e.containerPointToLatLng(n);switch(t.e.type.toLowerCase()){case"mousemove":this._onFeatureOver(r,n,t.data,t.layer);break;case"click":this._onFeatureClicked(r,n,t.data,t.layer)}},_onFeatureClicked:function _onFeatureClicked(e,t,n,r){var i=this.model.getLayerInLayerGroupAt(r);i&&this.trigger("featureClick",{layer:i,layerIndex:r,latlng:[e.lat,e.lng],position:t,feature:n})},_onFeatureOver:function _onFeatureOver(e,t,n,r){var i=this.model.getLayerInLayerGroupAt(r);i&&this.trigger("featureOver",{layer:i,layerIndex:r,latlng:[e.lat,e.lng],position:t,feature:n})},_onFeatureOut:function _onFeatureOut(e){var t=this.model.getLayerInLayerGroupAt(e);t&&this.trigger("featureOut",{layer:t,layerIndex:e})}})).constructor=a,e.exports=u},function(e,t,n){var r=n(1),i=n(0),o=n(434),a=function LeafletPlainLayerView(e,t){o.apply(this,arguments)};a.prototype=i.extend({},o.prototype,{_createLeafletLayer:function _createLeafletLayer(){var e,t,n=new L.Layer;return n.onAdd=r(e=function _context(){this._redraw()}).call(e,this),n.onRemove=r(t=function _context2(){this.leafletMap.getContainer().style.background="none"}).call(t,this),n.setZIndex=function(){},n},_modelUpdated:function _modelUpdated(){this._redraw()},_redraw:function _redraw(){var e=this.leafletMap.getContainer();if(e.style.backgroundColor=this.model.get("color")||"#FFF",this.model.get("image")){var t="transparent url("+this.model.get("image")+") repeat center center";e.style.background=t}}}),e.exports=a},function(e,t,n){var r=n(1),i=n(0),o=n(434),a=function LeafletTiledLayerView(e,t){var n,i;o.apply(this,arguments),this.leafletLayer.on("load",r(n=function _context(e){this.trigger("load")}).call(n,this)),this.leafletLayer.on("loading",r(i=function _context2(e){this.trigger("loading")}).call(i,this));var a=this;this.leafletLayer.onAdd=function(e){L.TileLayer.prototype.onAdd.apply(this,arguments),a._onAdd()}};(a.prototype=i.extend({},o.prototype,{_createLeafletLayer:function _createLeafletLayer(){return new L.TileLayer(l(this._isHdpi(),this.model),s(this.model))},_onAdd:function _onAdd(){this.leafletLayer.getContainer().style.pointerEvents="none"},_modelUpdated:function _modelUpdated(){L.Util.setOptions(this.leafletLayer,s(this.model)),this.leafletLayer.setUrl(l(this._isHdpi(),this.model))},_isHdpi:function _isHdpi(){return window&&window.devicePixelRatio&&window.devicePixelRatio>1}})).constructor=a;var s=function generateLeafletLayerOptions(e){return{tms:!!e.get("tms"),attribution:e.get("attribution"),minZoom:e.get("minZoom"),maxZoom:e.get("maxZoom"),subdomains:e.get("subdomains")||"abc",errorTileUrl:e.get("errorTileUrl"),opacity:e.get("opacity")}},l=function getUrlTemplate(e,t){var n=t.changedAttributes();return n.urlTemplate&&!n.urlTemplate2x&&t.unset("urlTemplate2x",{silent:!0}),e&&t.get("urlTemplate2x")?t.get("urlTemplate2x"):t.get("urlTemplate")};e.exports=a},function(e,t,n){var r=n(193),i=n(3097),o=n(1362),a=n(3096),s=n(3095),l=n(3094),u=n(1339),c=function LeafletLayerViewFactory(){};c.prototype._constructors={tiled:i,wms:o,plain:a,layergroup:function LayerGroupViewConstructor(e,t){return(t=t||{}).mapModel.get("renderMode")===u.VECTOR&&console.warn("Vector rendering is not supported anymore"),new s(e,t)},torque:l},c.prototype.createLayerView=function(e,t){var n=e.get("type").toLowerCase(),i=this._constructors[n];if(i)try{return new i(e,t)}catch(e){throw r.error("Error creating an instance of layer view for '"+n+"' layer -> "+e.message),e}else r.error("Error creating an instance of layer view for '"+n+"' layer. Type is not supported")},e.exports=c},function(e,t){var n=function EditionController(e,t){this._map=t,this._mapView=e};n.prototype.enableEdition=function(e){this.disableEdition(),this._geometry=e,this._map.addGeometry(this._geometry),this._werePopupsEnabled=this._map.arePopupsEnabled(),this._map.disablePopups()},n.prototype.disableEdition=function(){this._isEditionEnabled()&&(this._geometry.remove(),this._map.removeGeometry(this._geometry),delete this._geometry,this._reEnableOrDisablePopups())},n.prototype._isEditionEnabled=function(){return!!this._geometry},n.prototype._reEnableOrDisablePopups=function(){this._werePopupsEnabled?this._map.enablePopups():this._map.disablePopups()},e.exports=n},function(e,t){var n=function DrawingController(e,t){this._map=t,this._mapView=e};n.prototype.enableDrawing=function(e){this.disableDrawing(),this._geometry=e,this._map.addGeometry(this._geometry),this._map.disableInteractivity(),this._mapView.on("click",this._onMapClicked,this)},n.prototype.disableDrawing=function(){this._isDrawingEnabled()&&(this._geometry.remove(),this._map.removeGeometry(this._geometry),delete this._geometry,this._map.enableInteractivity(),this._mapView.off("click",this._onMapClicked,this))},n.prototype._isDrawingEnabled=function(){return!!this._geometry},n.prototype._onMapClicked=function(e,t){this._geometry.update(t)},e.exports=n},function(e,t,n){var r=n(3100),i=n(3099),o=function GeometryManagementController(e,t){this._map=t,this._drawingController=new r(e,t),this._editionController=new i(e,t)};o.prototype.start=function(){this._map.on("enterDrawingMode",this._enterDrawingMode,this),this._map.on("exitDrawingMode",this._exitDrawingMode,this),this._map.on("enterEditMode",this._enterEditMode,this),this._map.on("exitEditMode",this._exitEditMode,this)},o.prototype.stop=function(){this._exitDrawingMode(),this._exitEditMode(),this._map.off("enterDrawingMode",this._enterDrawingMode,this),this._map.off("exitDrawingMode",this._exitDrawingMode,this),this._map.off("enterEditMode",this._enterEditMode,this),this._map.off("exitEditMode",this._exitEditMode,this)},o.prototype._enterDrawingMode=function(e){this._exitDrawingMode(),this._exitEditMode(),this._drawingController.enableDrawing(e)},o.prototype._exitDrawingMode=function(){this._drawingController.disableDrawing()},o.prototype._enterEditMode=function(e){this._exitDrawingMode(),this._exitEditMode(),this._editionController.enableEdition(e)},o.prototype._exitEditMode=function(){this._editionController.disableEdition()},e.exports=o},function(e,t){var n=function MapModelEventsManager(e){if(!e.mapModel)throw new Error("mapModel is required");this._mapModel=e.mapModel};n.prototype.start=function(e){this._cartoDBLayerGroupView=e,this._cartoDBLayerGroupView.on("featureOver",this._onFeatureOver,this),this._cartoDBLayerGroupView.on("featureClick",this._onFeatureClick,this),this._cartoDBLayerGroupView.on("featureOut",this._onFeatureOut,this),this._cartoDBLayerGroupView.on("featureError",this._onFeatureError,this)},n.prototype.stop=function(){this._cartoDBLayerGroupView&&(this._cartoDBLayerGroupView.off("featureOver",this._onFeatureOver,this),this._cartoDBLayerGroupView.off("featureClick",this._onFeatureClick,this),this._cartoDBLayerGroupView.off("featureOut",this._onFeatureOut,this),this._cartoDBLayerGroupView.off("featureError",this._onFeatureError,this),delete this._cartoDBLayerGroupView)},n.prototype._onFeatureOver=function(e){this._mapModel.isFeatureInteractivityEnabled()&&this._mapModel.trigger("featureOver",e)},n.prototype._onFeatureClick=function(e){this._mapModel.isFeatureInteractivityEnabled()&&this._mapModel.trigger("featureClick",e)},n.prototype._onFeatureOver=function(e){this._mapModel.isFeatureInteractivityEnabled()&&this._mapModel.trigger("featureOver",e)},n.prototype._onFeatureError=function(e){this._mapModel.isFeatureInteractivityEnabled()&&this._mapModel.trigger("featureError",e)},e.exports=n},function(e,t,n){var r=n(0),i=function MapCursorManager(e){if(!e.mapView)throw new Error("mapView is required");if(!e.mapModel)throw new Error("mapModel is required");this._mapView=e.mapView,this._mapModel=e.mapModel,this._clickableLayersBeingFeatureOvered={}};i.prototype.start=function(e){this._cartoDBLayerGroupView=e,this._cartoDBLayerGroupView.on("featureOver",this._onFeatureOver,this),this._cartoDBLayerGroupView.on("featureOut",this._onFeatureOut,this)},i.prototype.stop=function(e){this._cartoDBLayerGroupView&&(this._cartoDBLayerGroupView.off("featureOver",this._onFeatureOver,this),this._cartoDBLayerGroupView.off("featureOut",this._onFeatureOut,this),delete this._cartoDBLayerGroupView)},i.prototype._onFeatureOver=function(e){this._isLayerClickable(e.layer)&&!this._isLayerBeingFeatureOvered(e.layer)&&(this._markLayerAsFeatureOvered(e.layer),this._updateMousePointer())},i.prototype._onFeatureOut=function(e){this._isLayerBeingFeatureOvered(e.layer)&&(this._unmarkLayerAsFeatureOvered(e.layer),this._updateMousePointer())},i.prototype._onLayerVisibilityChanged=function(e){e.isVisible()||(this._unmarkLayerAsFeatureOvered(e),this._updateMousePointer())},i.prototype._updateMousePointer=function(){this._isAnyClickableLayerBeingFeatureOvered()?this._mapView.setCursor("pointer"):this._mapView.setCursor("auto")},i.prototype._markLayerAsFeatureOvered=function(e){this._clickableLayersBeingFeatureOvered[e.cid]=e,e.once("change:visible",this._onLayerVisibilityChanged,this)},i.prototype._unmarkLayerAsFeatureOvered=function(e){delete this._clickableLayersBeingFeatureOvered[e.cid],e.off("change:visible",this._onLayerVisibilityChanged,this)},i.prototype._isLayerClickable=function(e){return this._mapModel.isFeatureInteractivityEnabled()||this._mapModel.arePopupsEnabled()&&e.isInfowindowEnabled()},i.prototype._isLayerBeingFeatureOvered=function(e){return!!this._clickableLayersBeingFeatureOvered[e.cid]},i.prototype._isAnyClickableLayerBeingFeatureOvered=function(){return!r.isEmpty(this._clickableLayersBeingFeatureOvered)},e.exports=i},function(e,t,n){var r=n(0),i=function TooltipManager(e){if(!e.mapModel)throw new Error("mapModel is required");if(!e.tooltipModel)throw new Error("tooltipModel is required");if(!e.infowindowModel)throw new Error("infowindowModel is required");this._mapModel=e.mapModel,this._tooltipModel=e.tooltipModel,this._infowindowModel=e.infowindowModel,this._layersBeingFeaturedOvered={}};i.prototype.start=function(e){this._cartoDBLayerGroupView=e,this._cartoDBLayerGroupView.on("featureOver",this._onFeatureOvered,this),this._cartoDBLayerGroupView.on("featureOut",this._onFeatureOut,this)},i.prototype.stop=function(){this._cartoDBLayerGroupView&&(this._cartoDBLayerGroupView.off("featureOver",this._onFeatureOvered,this),this._cartoDBLayerGroupView.off("featureOut",this._onFeatureOut,this))},i.prototype._onFeatureOvered=function(e){var t=e.layer,n=e.feature,r=n.cartodb_id;if(!t)throw new Error("featureOver event for layer "+e.layerIndex+" was captured but layerModel coudn't be retrieved");this._mapModel.arePopupsEnabled()&&t.tooltip.hasTemplate()&&!this._isFeatureInfowindowOpen(t,r)?(this._markLayerAsFeatureOvered(t),this._tooltipModel.setTooltipTemplate(t.tooltip),this._tooltipModel.setPosition(e.position),this._tooltipModel.updateContent(n),this._showTooltip(t)):(this._unmarkLayerAsFeatureOvered(t),this._hideTooltip(t))},i.prototype._onFeatureOut=function(e){var t=e.layer;this._unmarkLayerAsFeatureOvered(t),this._noLayerIsBeingFeatureOvered()&&this._hideTooltip(t)},i.prototype._showTooltip=function(e){this._tooltipModel.show(),e.on("change:visible",this._onLayerVisibilityChanged,this)},i.prototype._hideTooltip=function(e){this._tooltipModel.hide(),e.off("change:visible",this._onLayerVisibilityChanged,this)},i.prototype._onLayerVisibilityChanged=function(e){this._hideTooltip(e)},i.prototype._markLayerAsFeatureOvered=function(e){this._layersBeingFeaturedOvered[e.cid]=!0},i.prototype._unmarkLayerAsFeatureOvered=function(e){this._layersBeingFeaturedOvered[e.cid]=!1},i.prototype._noLayerIsBeingFeatureOvered=function(){return r.all(this._layersBeingFeaturedOvered,function(e,t){return!e},this)},i.prototype._isFeatureInfowindowOpen=function(e,t){return t&&this._infowindowModel.getCurrentFeatureId()===t&&this._infowindowModel.isVisible()&&this._infowindowModel.hasInfowindowTemplate(e.infowindow)},e.exports=i},function(e,t,n){n(23);var r=n(5),i=n(11),o=n(37),a=n(1),s=n(0),l=n(270),u=n(378),c=n(152).extend({defaultTemplate:"<p>{{text}}</p>",className:"CDB-Tooltip-wrapper",initialize:function initialize(e){var t,n,r,i;if(!e.mapView)throw new Error("mapView should be present");this._mapView=e.mapView,this.showing=!1,this.showhideTimeout=null,a(t=this.model).call(t,"change:visible",this._showOrHide,this),a(n=this.model).call(n,"change:position",this._updatePosition,this),a(r=this.model).call(r,"change:placement",this._updatePosition,this),a(i=this.model).call(i,"change:content change:alternative_names",this.render,this)},template:function template(e){return u.compile(this.model.get("template"),"mustache")(e)},render:function render(){var e=this.model.get("content"),t=l.html(this.template(e));return this.$el.html(t),this._updatePosition(),this},_showOrHide:function _showOrHide(){this.model.isVisible()?this._show():this._hide()},_hide:function _hide(){var e=this;clearTimeout(this.showhideTimeout),this.showhideTimeout=o(function fadeOut(){e.$el.fadeOut(100)},50)},_show:function _show(){this.render();var e=this;clearTimeout(this.showhideTimeout),this.showhideTimeout=o(function fadeIn(){e.$el.fadeIn(200)},50)},_updatePosition:function _updatePosition(){var e=this.model.get("position"),t=this.model.get("placement"),n=this.$el.innerHeight(),r=this.$el.innerWidth(),o=this._mapView.getSize(),a=0,s=0,l="CDB-Tooltip-wrapper--";this._removePositionModifiers(),(a=-1!==i(t).call(t,"top")?e.y-n:-1!==i(t).call(t,"middle")?e.y-n/2:e.y)<0?(a=e.y,l+="top"):a+n>o.y?(a=e.y-n,l+="bottom"):l+="top",(s=-1!==i(t).call(t,"left")?e.x-r:-1!==i(t).call(t,"center")?e.x-r/2:e.x)<0?(s=e.x,l+="Left"):s+r>o.x?(s=e.x-r,l+="Right"):l+="Left",a+=this.model.getVerticalOffset(),s+=this.model.getHorizontalOffset(),this.$el.css({top:a,left:s}).addClass(l)},_removePositionModifiers:function _removePositionModifiers(){var e=r(s).call(s,["topLeft","topRight","bottomRight","bottomLeft"],function(e){return this._modifierClassName(e)},this);this.$el.removeClass(e.join(" "))},_modifierClassName:function _modifierClassName(e){return this.className+"--"+e}});e.exports=c},function(e,t,n){n(32);var r=n(7),i=n(10),o=n(0),a=n(144),s=n(879),l=a.extend({defaults:{template:"<p>{{text}}</p>",fields:[],alternative_names:{},placement:"bottom|right",position:{x:0,y:0},offset:[0,0],blacklisted_columns:["cartodb_id"]},updateContent:function updateContent(e){var t=e,n=["fields","content"];this.get("blacklisted_columns")&&(n=i(n).call(n,this.get("blacklisted_columns")));var a=s.contentForFields(t,this.get("fields"),{show_empty_fields:!1});t.content=o.omit(t,n),t.fields=a.fields;var l,u=this.get("alternative_names");u&&r(l=t.fields).call(l,function(e){e.title=u[e.title]||e.title});this.set("content",t)},setTooltipTemplate:function setTooltipTemplate(e){this.set({template:e.get("template"),fields:e.fields.toJSON(),alternative_names:e.get("alternative_names")})},setPosition:function setPosition(e){this.set("position",e)},show:function show(){this.set("visible",!0)},hide:function hide(){this.set("visible",!1)},isVisible:function isVisible(){return!!this.get("visible")},getVerticalOffset:function getVerticalOffset(){var e=this.get("offset");return e&&e[1]||0},getHorizontalOffset:function getHorizontalOffset(){var e=this.get("offset");return e&&e[0]||0}});e.exports=l},function(e,t,n){var r=n(0),i=function RequestTracker(e){this._maxNumberOfRequests=e||3,this.reset()};i.prototype.track=function(e,t){this.lastRequestEquals(e)&&this.lastResponseEquals(t)||this.reset(),this.maxNumberOfRequestsReached()||(this._lastRequest=e,this._lastResponse=t,this._numberOfRequests+=1)},i.prototype.reset=function(){this._lastRequest=void 0,this._lastResponse=void 0,this._numberOfRequests=0},i.prototype.canRequestBePerformed=function(e){return!this.maxNumberOfRequestsReached()||this.maxNumberOfRequestsReached()&&!this.lastRequestEquals(e)},i.prototype.maxNumberOfRequestsReached=function(){return this._numberOfRequests===this._maxNumberOfRequests},i.prototype.lastRequestEquals=function(e){return this._lastRequest&&this._lastRequest.equals(e)},i.prototype.lastResponseEquals=function(e){return r.isEqual(this._lastResponse,e)},e.exports=i},function(e,t){var n=function(){var e,t=1,n=2;function update_progress(e,t){postMessage({action:3,callback_num:t,result:e})}var r,i,o,a=[0,-0x8000000000000000],s=[4294967295,-4294967296],l=[0,0],u=[1,0],c=[4,0],d=[4096,0],f=[16777215,0],h=[16777216,0],p=[4278190080,0],m=[4294967295,0],g=[4294967295,0x7fffffff00000000];function Object_0(){}function Throwable(){}function Exception(){}function $RuntimeException(e,t){return e.detailMessage=t,e}function RuntimeException(){}function JavaScriptException(){}function $append(e,t){e[e.explicitLength++]=t}function $appendNonNull(e,t){e[e.explicitLength++]=t}function initDim(e,t,n,r,a){var s;return s=function createFromSeed(e,t){var n=new Array(t);if(e>0)for(var r=[null,0,!1,[0,0]][e],i=0;i<t;++i)n[i]=r;return n}(a,r),$clinit_4(),wrapArray(s,i,o),s.arrayClass$=e,s.typeId$=t,s.queryId$=n,s}function setCheck(e,t,n){if(null!=n){if(e.queryId$>0&&!canCastUnsafe(n.typeId$,e.queryId$))throw new ArrayStoreException;if(e.queryId$<0&&(n.typeMarker$==nullMethod||2==n.typeId$))throw new ArrayStoreException}return e[t]=n}function Array_0(){}function $clinit_4(){$clinit_4=nullMethod,i=[],o=[],function initExpandos(e,t,n){var r,i=0;for(var o in e)(r=e[o])&&(t[i]=o,n[i]=r,++i)}(new Array_0,i,o)}function wrapArray(e,t,n){$clinit_4();for(var r=0,i=t.length;r<i;++r)e[t[r]]=n[r]}function canCast(e,t){return e&&!!E[e][t]}function canCastUnsafe(e,t){return e&&E[e][t]}function dynamicCast(e,t){if(null!=e&&!canCastUnsafe(e.typeId$,t))throw new ClassCastException;return e}function instanceOf(e,t){return null!=e&&canCast(e.typeId$,t)}function round_int(e){return~~Math.max(Math.min(e,2147483647),-2147483648)}(r=Object_0.prototype={}).getClass$=function getClass_18(){return A},r.typeMarker$=nullMethod,r.typeId$=1,(r=Throwable.prototype=new Object_0).getClass$=function getClass_22(){return P},r.typeId$=3,r.detailMessage=null,(r=Exception.prototype=new Throwable).getClass$=function getClass_13(){return R},r.typeId$=4,(r=RuntimeException.prototype=new Exception).getClass$=function getClass_19(){return O},r.typeId$=5,(r=JavaScriptException.prototype=new RuntimeException).getClass$=function getClass_0(){return D},r.typeId$=6,(r=Array_0.prototype=new Object_0).getClass$=function getClass_2(){return this.arrayClass$},r.typeId$=0,r.arrayClass$=null,r.length=0,r.queryId$=0;var v,y,_,b,w,x,C,S,k,T,L,M,E=[{},{},{1:1},{2:1},{2:1},{2:1},{2:1},{2:1,10:1},{2:1},{2:1},{2:1},{2:1},{2:1},{2:1,11:1},{2:1},{2:1},{2:1},{4:1},{5:1},{6:1},{7:1},{8:1},{9:1}];function caught(e){return null!=e&&canCast(e.typeId$,2)?e:function $JavaScriptException(e,t){return e}(new JavaScriptException)}function add(e,t){var n;return n=e[1]+t[1],create(e[0]+t[0],n)}function addTimes(e,t,n){return 0==t?e:0==n?e:add(e,create(t*n,0))}function and(e,t){return function makeFromBits(e,t){var n,r;n=4294967296*e,r=t,t<0&&(r+=4294967296);return[r,n]}(~~Math.max(Math.min(e[1]/4294967296,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/4294967296,2147483647),-2147483648),lowBits_0(e)&lowBits_0(t))}function compare(e,t){var n,r;return e[0]==t[0]&&e[1]==t[1]?0:(n=e[1]<0,r=t[1]<0,n&&!r?-1:!n&&r?1:sub(e,t)[1]<0?-1:1)}function create(e,t){var n,r;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(n=t%4294967296)+(r=4294967296*Math.floor(e/4294967296)),e=e-r+n;e<0;)e+=4294967296,t-=4294967296;for(;e>4294967295;)e-=4294967296,t+=4294967296;for(t%=0x10000000000000000;t>0x7fffffff00000000;)t-=0x10000000000000000;for(;t<-0x8000000000000000;)t+=0x10000000000000000;return[e,t]}function div(e,t){var n,r,i,o,a;if(0==t[0]&&0==t[1])throw function $ArithmeticException(e,t){return e.detailMessage=t,e}(new ArithmeticException,"/ by zero");if(0==e[0]&&0==e[1])return $clinit_10(),k;if(eq(e,($clinit_10(),b)))return eq(t,x)||eq(t,w)?b:add(n=shl(div(shr(e,1),t),1),div(o=sub(e,mul(t,n)),t));if(eq(t,b))return k;if(e[1]<0)return t[1]<0?div(neg(e),neg(t)):neg(div(neg(e),t));if(t[1]<0)return neg(div(e,neg(t)));for(a=k,o=e;compare(o,t)>=0;)0==(i=fromDouble(Math.floor(toDoubleRoundDown(o)/toDoubleRoundUp(t))))[0]&&0==i[1]&&(i=x),r=mul(i,t),a=add(a,i),o=sub(o,r);return a}function eq(e,t){return e[0]==t[0]&&e[1]==t[1]}function fromDouble(e){return isNaN(e)?($clinit_10(),k):e<-0x8000000000000000?($clinit_10(),b):e>=0x8000000000000000?($clinit_10(),_):create(e>0?Math.floor(e):Math.ceil(e),0)}function fromInt(e){var t,n;return e>-129&&e<128?(t=e+128,null==(n=(function $clinit_9(){nullMethod;v=initDim(I,0,9,256,0)}(),v)[t])&&(n=v[t]=internalFromInt(e)),n):internalFromInt(e)}function internalFromInt(e){return e>=0?[e,0]:[e+4294967296,-4294967296]}function lowBits_0(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-4294967296,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function mul(e,t){var n,r,i,o,a,s,l,u;return 0==e[0]&&0==e[1]?($clinit_10(),k):0==t[0]&&0==t[1]?($clinit_10(),k):eq(e,($clinit_10(),b))?multByMinValue(t):eq(t,b)?multByMinValue(e):e[1]<0?t[1]<0?mul(neg(e),neg(t)):neg(mul(neg(e),t)):t[1]<0?neg(mul(e,neg(t))):compare(e,S)<0&&compare(t,S)<0?create((e[1]+e[0])*(t[1]+t[0]),0):(i=e[1]%281474976710656,o=e[1]-i,n=e[0]%65536,r=e[0]-n,l=t[1]%281474976710656,u=t[1]-l,a=t[0]%65536,s=t[0]-a,addTimes(addTimes(addTimes(addTimes(addTimes(addTimes(addTimes(addTimes(addTimes(addTimes(k,o,a),i,s),i,a),r,l),r,s),r,a),n,u),n,l),n,s),n,a))}function multByMinValue(e){return 1==(1&lowBits_0(e))?($clinit_10(),b):($clinit_10(),k)}function neg(e){var t,n;return eq(e,($clinit_10(),b))?b:(t=-e[1],(n=-e[0])>4294967295&&(n-=4294967296,t+=4294967296),n<0&&(n+=4294967296,t-=4294967296),[n,t])}function pwrAsDouble(e){return e<=30?1<<e:pwrAsDouble(30)*pwrAsDouble(e-30)}function shl(e,t){var n,r,i,o;return t&=63,eq(e,($clinit_10(),b))?0==t?e:k:e[1]<0?neg(shl(neg(e),t)):(o=pwrAsDouble(t),r=e[1]*o%0x10000000000000000,i=e[0]*o,i-=n=i-i%4294967296,(r+=n)>=0x8000000000000000&&(r-=0x10000000000000000),[i,r])}function shr(e,t){var n,r;return r=pwrAsDouble(t&=63),n=e[1]/r,create(Math.floor(e[0]/r),n)}function sub(e,t){var n;return n=e[1]-t[1],create(e[0]-t[0],n)}function toDoubleRoundDown(e){var t,n;return(t=round_int(Math.log(e[1])/($clinit_10(),y)))<=48?e[1]+e[0]:(n=(1<<t-48)-1,e[1]+(e[0]-n))}function toDoubleRoundUp(e){var t,n;return(t=round_int(Math.log(e[1])/($clinit_10(),y)))<=48?e[1]+e[0]:(n=(1<<t-48)-1,e[1]+(e[0]+n))}function $clinit_10(){$clinit_10=nullMethod,y=Math.log(2),_=g,b=a,w=fromInt(-1),x=fromInt(1),C=fromInt(2),S=h,k=fromInt(0)}function InputStream(){}function $ByteArrayInputStream(e,t){return function $ByteArrayInputStream_0(e,t,n,r){e.buf=t,e.pos=n,e.count=n+r,e.count>t.length&&(e.count=t.length);return e}(e,t,0,t.length),e}function $read(e){return e.pos>=e.count?-1:255&e.buf[e.pos++]}function $read_0(e,t,n,r){return e.pos>=e.count?-1:(r=min(r,e.count-e.pos),arraycopy(e.buf,e.pos,t,n,r),e.pos+=r,r)}function ByteArrayInputStream(){}function OutputStream(){}function $ByteArrayOutputStream(e){return e.buf=initDim(B,0,-1,32,1),e}function $ensureCapacity(e,t){var n;t<=e.buf.length||(t=max(t,2*e.buf.length),n=initDim(B,0,-1,t,1),arraycopy(e.buf,0,n,0,e.buf.length),e.buf=n)}function $toByteArray(e){var t;return t=initDim(B,0,-1,e.count,1),arraycopy(e.buf,0,t,0,e.count),t}function $write(e,t){$ensureCapacity(e,e.count+1),e.buf[e.count++]=t<<24>>24}function $write_0(e,t,n,r){$ensureCapacity(e,e.count+r),arraycopy(t,n,e.buf,e.count,r),e.count+=r}function ByteArrayOutputStream(){}function $IOException(e,t){return e.detailMessage=t,e}function IOException(){}function ArithmeticException(){}function $ArrayStoreException(e,t){return e.detailMessage=t,e}function ArrayStoreException(){}function createForArray(e,t){var n;return(n=new Class).typeName=e+t,n}function createForClass(e,t){var n;return(n=new Class).typeName=e+t,n}function Class(){}function ClassCastException(){}function Enum(){}function $IllegalArgumentException(e,t){return e.detailMessage=t,e}function IllegalArgumentException(){}function IllegalStateException(){}function IndexOutOfBoundsException(){}function max(e,t){return e>t?e:t}function min(e,t){return e<t?e:t}function NullPointerException(){}function StringBuilder(){}function arraycopy(e,t,n,r,i){var o,a,s,l,u,c,d,f;if(null==e||null==n)throw new NullPointerException;if(d=(e.typeMarker$==nullMethod||2==e.typeId$?e.getClass$():F).typeName,s=(n.typeMarker$==nullMethod||2==n.typeId$?n.getClass$():F).typeName,91!=d.charCodeAt(0)||91!=s.charCodeAt(0))throw $ArrayStoreException(new ArrayStoreException,"Must be array types");if(d.charCodeAt(1)!=s.charCodeAt(1))throw $ArrayStoreException(new ArrayStoreException,"Array types must match");if(f=e.length,l=n.length,t<0||r<0||i<0||t+i>f||r+i>l)throw new IndexOutOfBoundsException;if(76!=d.charCodeAt(1)&&91!=d.charCodeAt(1)||function $equals(e,t){return null!=t&&String(e)==t}(d,s))for(u=0;u<i;++u)n[r+u]=e[t+u];else if(c=dynamicCast(e,3),o=dynamicCast(n,3),(null==e?null:e)===(null==n?null:n)&&t<r)for(t+=i,a=r+i;a-- >r;)setCheck(o,a,c[--t]);else for(a=r+i;r<a;)setCheck(o,r++,c[t++])}function $execute(e){var t;try{return $processChunk(e.chunker)}catch(t){if(instanceOf(t=caught(t),10))return!1;throw t}}function $init(e,t,n,r,i){var o,a;if(!i)throw $IllegalArgumentException(new IllegalArgumentException,"null mode");if(compare(r,s)<0)throw $IllegalArgumentException(new IllegalArgumentException,"invalid length "+function toString_0(e){var t,n,r,i,o,a;if(0==e[0]&&0==e[1])return"0";if(eq(e,($clinit_10(),b)))return"-9223372036854775808";if(e[1]<0)return"-"+toString_0(neg(e));for(n=e,i="";0!=n[0]||0!=n[1];){if(t=""+lowBits_0(sub(n,mul(r=div(n,o=fromInt(1e9)),o))),0!=(n=r)[0]||0!=n[1])for(a=9-t.length;a>0;--a)t="0"+t;i=t+i}return i}(r));for(e.length_0=r,function $configure(e,t){if(!function $SetDictionarySize_0(e,t){var n;if(t<1||t>536870912)return!1;for(e._dictionarySize=t,n=0;t>1<<n;++n);return e._distTableSize=2*n,!0}(t,1<<e.dictionarySize))throw $RuntimeException(new RuntimeException,"unexpected failure");if(!function $SetNumFastBytes(e,t){return!(t<5||t>273)&&(e._numFastBytes=t,!0)}(t,e.fb))throw $RuntimeException(new RuntimeException,"unexpected failure");if(!function $SetMatchFinder(e,t){var n;return!(t<0||t>2)&&(n=e._matchFinderType,e._matchFinderType=t,e._matchFinder&&n!=e._matchFinderType&&(e._dictionarySizePrev=-1,e._matchFinder=null),!0)}(t,e.matchFinder))throw $RuntimeException(new RuntimeException,"unexpected failure");if(!function $SetLcLpPb_0(e,t,n,r){return!(n<0||n>4||t<0||t>8||r<0||r>4)&&(e._numLiteralPosStateBits=n,e._numLiteralContextBits=t,e._posStateBits=r,e._posStateMask=(1<<e._posStateBits)-1,!0)}(t,e.lc,e.lp,e.pb))throw $RuntimeException(new RuntimeException,"unexpected failure")}(i,o=function $Encoder(e){var t;for($clinit_59(),e._repDistances=initDim(J,0,-1,4,1),e._optimum=initDim(he,0,6,4096,0),e._rangeEncoder=($clinit_66(),new Encoder_0),e._isMatch=initDim(ae,0,-1,192,1),e._isRep=initDim(ae,0,-1,12,1),e._isRepG0=initDim(ae,0,-1,12,1),e._isRepG1=initDim(ae,0,-1,12,1),e._isRepG2=initDim(ae,0,-1,12,1),e._isRep0Long=initDim(ae,0,-1,192,1),e._posSlotEncoder=initDim(pe,0,8,4,0),e._posEncoders=initDim(ae,0,-1,114,1),e._posAlignEncoder=$BitTreeEncoder(new BitTreeEncoder,4),e._lenEncoder=$Encoder$LenPriceTableEncoder(new Encoder$LenPriceTableEncoder),e._repMatchLenEncoder=$Encoder$LenPriceTableEncoder(new Encoder$LenPriceTableEncoder),e._literalEncoder=new Encoder$LiteralEncoder,e._matchDistances=initDim(J,0,-1,548,1),e._posSlotPrices=initDim(J,0,-1,256,1),e._distancesPrices=initDim(J,0,-1,512,1),e._alignPrices=initDim(J,0,-1,16,1),e.reps=initDim(J,0,-1,4,1),e.repLens=initDim(J,0,-1,4,1),e.processedInSize=initDim(me,0,-1,1,3),e.processedOutSize=initDim(me,0,-1,1,3),e.finished=initDim(ge,0,-1,1,2),e.properties=initDim(B,0,-1,5,1),e.tempPrices=initDim(J,0,-1,128,1),t=0;t<4096;++t)e._optimum[t]=new Encoder$Optimal;for(t=0;t<4;++t)e._posSlotEncoder[t]=$BitTreeEncoder(new BitTreeEncoder,6);return e}(new Encoder)),o._writeEndMark=!0,function $WriteCoderProperties(e,t){var n;for(e.properties[0]=9*(5*e._posStateBits+e._numLiteralPosStateBits)+e._numLiteralContextBits<<24>>24,n=0;n<4;++n)e.properties[1+n]=e._dictionarySize>>8*n<<24>>24;$write_0(t,e.properties,0,5)}(o,n),a=0;a<64;a+=8)$write(n,255&lowBits_0(shr(r,a)));e.chunker=(o._needReleaseMFStream=!1,o._inStream=t,o._finished=!1,function $Create_2(e){var t,n;e._matchFinder||($clinit_60(),t=new BinTree,n=4,0==e._matchFinderType&&(n=2),function $SetType(e,t){e.HASH_ARRAY=t>2,e.HASH_ARRAY?(e.kNumHashDirectBytes=0,e.kMinMatchCheck=4,e.kFixHashSize=66560):(e.kNumHashDirectBytes=2,e.kMinMatchCheck=3,e.kFixHashSize=0)}(t,n),e._matchFinder=t);if(function $Create_1(e,t,n){var r,i;if(null==e.m_Coders||e.m_NumPrevBits!=n||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,i=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=initDim(ye,0,5,i,0),r=0;r<i;++r)e.m_Coders[r]=$Encoder$LiteralEncoder$Encoder2(new Encoder$LiteralEncoder$Encoder2)}(e._literalEncoder,e._numLiteralPosStateBits,e._numLiteralContextBits),e._dictionarySize==e._dictionarySizePrev&&e._numFastBytesPrev==e._numFastBytes)return;(function $Create_3(e,t,n,r,i){var o,a;if(t>1073741567)return!1;e._cutValue=16+(r>>1),function $Create_4(e,t,n,r){var i;e._keepSizeBefore=t,e._keepSizeAfter=n,i=t+n+r,(null==e._bufferBase||e._blockSize!=i)&&(e._bufferBase=null,e._blockSize=i,e._bufferBase=initDim(B,0,-1,e._blockSize,1)),e._pointerToLastSafePosition=e._blockSize-n}(e,t+n,r+i,256+~~((t+n+r+i)/2)),e._matchMaxLen=r,o=t+1,e._cyclicBufferSize!=o&&(e._son=initDim(J,0,-1,2*(e._cyclicBufferSize=o),1));a=65536,e.HASH_ARRAY&&(a=t-1,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a>>=1,(a|=65535)>16777216&&(a>>=1),e._hashMask=a,++a,a+=e.kFixHashSize);a!=e._hashSizeSum&&(e._hash=initDim(J,0,-1,e._hashSizeSum=a,1));return!0})(e._matchFinder,e._dictionarySize,4096,e._numFastBytes,274),e._dictionarySizePrev=e._dictionarySize,e._numFastBytesPrev=e._numFastBytes}(o),o._rangeEncoder.Stream=n,function $Init_4(e){var t;for(function $BaseInit(e){var t;for(e._state=0,e._previousByte=0,t=0;t<4;++t)e._repDistances[t]=0}(e),function $Init_9(e){e._position=l,e.Low=l,e.Range=-1,e._cacheSize=1,e._cache=0}(e._rangeEncoder),InitBitModels_0(e._isMatch),InitBitModels_0(e._isRep0Long),InitBitModels_0(e._isRep),InitBitModels_0(e._isRepG0),InitBitModels_0(e._isRepG1),InitBitModels_0(e._isRepG2),InitBitModels_0(e._posEncoders),function $Init_3(e){var t,n;for(n=1<<e.m_NumPrevBits+e.m_NumPosBits,t=0;t<n;++t)InitBitModels_0(e.m_Coders[t].m_Encoders)}(e._literalEncoder),t=0;t<4;++t)InitBitModels(e._posSlotEncoder[t].Models);$Init_2(e._lenEncoder,1<<e._posStateBits),$Init_2(e._repMatchLenEncoder,1<<e._posStateBits),InitBitModels(e._posAlignEncoder.Models),e._longestMatchWasFound=!1,e._optimumEndIndex=0,e._optimumCurrentIndex=0,e._additionalOffset=0}(o),$FillDistancesPrices(o),$FillAlignPrices(o),o._lenEncoder._tableSize=o._numFastBytes+1-2,$UpdateTables(o._lenEncoder,1<<o._posStateBits),o._repMatchLenEncoder._tableSize=o._numFastBytes+1-2,$UpdateTables(o._repMatchLenEncoder,1<<o._posStateBits),o.nowPos64=l,function $Chunker_0(e,t){return e.encoder=t,e.decoder=null,e.alive=!0,e}(new Chunker,o))}function LZMACompressor(){}function LZMAByteArrayCompressor(){}function $execute_0(e){var t,n;try{return $processChunk(e.chunker)}catch(t){if(instanceOf(t=caught(t),10))return n=t,e.exception=n,!1;throw t}}function $init_0(e,t,n){var r,i,o,a,u,c="";for(o=initDim(B,0,-1,5,1),i=0;i<o.length;++i){if(-1==(a=$read(t)))throw $IOException(new IOException,"truncated input");o[i]=a<<24>>24}if(!function $SetDecoderProperties(e,t){var n,r,i,o,a,s,l;if(t.length<5)return!1;for(l=255&t[0],i=l%9,o=(s=~~(l/9))%5,a=~~(s/5),n=0,r=0;r<4;++r)n+=(255&t[1+r])<<8*r;if(!function $SetLcLpPb(e,t,n,r){var i;if(t>8||n>4||r>4)return!1;return function $Create_0(e,t,n){var r,i;if(null==e.m_Coders||e.m_NumPrevBits!=n||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,i=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=initDim(ce,0,4,i,0),r=0;r<i;++r)e.m_Coders[r]=$Decoder$LiteralDecoder$Decoder2(new Decoder$LiteralDecoder$Decoder2)}(e.m_LiteralDecoder,n,t),i=1<<r,$Create(e.m_LenDecoder,i),$Create(e.m_RepLenDecoder,i),e.m_PosStateMask=i-1,!0}(e,i,o,a))return!1;return function $SetDictionarySize(e,t){if(t<0)return!1;e.m_DictionarySize!=t&&(e.m_DictionarySize=t,e.m_DictionarySizeCheck=max(e.m_DictionarySize,1),function $Create_5(e,t){null!=e._buffer&&e._windowSize==t||(e._buffer=initDim(B,0,-1,t,1));e._windowSize=t,e._pos=0,e._streamPos=0}(e.m_OutWindow,max(e.m_DictionarySizeCheck,4096)));return!0}(e,n)}(r=function $Decoder(e){var t;for(e.m_OutWindow=new OutWindow,e.m_RangeDecoder=new Decoder_0,e.m_IsMatchDecoders=initDim(ae,0,-1,192,1),e.m_IsRepDecoders=initDim(ae,0,-1,12,1),e.m_IsRepG0Decoders=initDim(ae,0,-1,12,1),e.m_IsRepG1Decoders=initDim(ae,0,-1,12,1),e.m_IsRepG2Decoders=initDim(ae,0,-1,12,1),e.m_IsRep0LongDecoders=initDim(ae,0,-1,192,1),e.m_PosSlotDecoder=initDim(se,0,7,4,0),e.m_PosDecoders=initDim(ae,0,-1,114,1),e.m_PosAlignDecoder=$BitTreeDecoder(new BitTreeDecoder,4),e.m_LenDecoder=$Decoder$LenDecoder(new Decoder$LenDecoder),e.m_RepLenDecoder=$Decoder$LenDecoder(new Decoder$LenDecoder),e.m_LiteralDecoder=new Decoder$LiteralDecoder,t=0;t<4;++t)e.m_PosSlotDecoder[t]=$BitTreeDecoder(new BitTreeDecoder,6);return e}(new Decoder),o))throw $IOException(new IOException,"corrupted input");for(i=0;i<64;i+=8){if(-1==(a=$read(t)))throw $IOException(new IOException,"truncated input");1==(a=a.toString(16)).length&&(a="0"+a),c=a+""+c}"ffffffffffffffffff"==c.toLowerCase()||0==c?e.length_0=s:(u=parseInt(c,16),e.length_0=u>4294967295?s:fromDouble(u)),e.chunker=function $CodeInChunks(e,t,n,r){return e.m_RangeDecoder.Stream=t,function $SetStream_0(e,t){$Flush_0(e),e._stream=null,e._stream=t}(e.m_OutWindow,n),function $Init_1(e){var t;for(function $Init_7(e,t){t||(e._streamPos=0,e._pos=0)}(e.m_OutWindow,!1),InitBitModels(e.m_IsMatchDecoders),InitBitModels(e.m_IsRep0LongDecoders),InitBitModels(e.m_IsRepDecoders),InitBitModels(e.m_IsRepG0Decoders),InitBitModels(e.m_IsRepG1Decoders),InitBitModels(e.m_IsRepG2Decoders),InitBitModels(e.m_PosDecoders),function $Init_0(e){var t,n;for(n=1<<e.m_NumPrevBits+e.m_NumPosBits,t=0;t<n;++t)InitBitModels(e.m_Coders[t].m_Decoders)}(e.m_LiteralDecoder),t=0;t<4;++t)InitBitModels(e.m_PosSlotDecoder[t].Models);$Init(e.m_LenDecoder),$Init(e.m_RepLenDecoder),InitBitModels(e.m_PosAlignDecoder.Models),function $Init_8(e){var t;for(e.Code=0,e.Range=-1,t=0;t<5;++t)e.Code=e.Code<<8|$read(e.Stream)}(e.m_RangeDecoder)}(e),e.state=0,e.rep0=0,e.rep1=0,e.rep2=0,e.rep3=0,e.outSize=r,e.nowPos64=l,e.prevByte=0,function $Chunker(e,t){return e.decoder=t,e.encoder=null,e.alive=!0,e}(new Chunker,e)}(r,t,n,e.length_0)}function LZMADecompressor(){}function LZMAByteArrayDecompressor(){}function $GetIndexByte(e,t){return e._bufferBase[e._bufferOffset+e._pos+t]}function $GetMatchLen(e,t,n,r){var i,o;for(e._streamEndWasReached&&e._pos+t+r>e._streamPos&&(r=e._streamPos-(e._pos+t)),++n,o=e._bufferOffset+e._pos+t,i=0;i<r&&e._bufferBase[o+i]==e._bufferBase[o+i-n];++i);return i}function $GetNumAvailableBytes(e){return e._streamPos-e._pos}function $ReadBlock(e){var t,n;if(!e._streamEndWasReached)for(;;){if(0==(n=-e._bufferOffset+e._blockSize-e._streamPos))return;if(-1==(t=$read_0(e._stream,e._bufferBase,e._bufferOffset+e._streamPos,n)))return e._posLimit=e._streamPos,e._bufferOffset+e._posLimit>e._pointerToLastSafePosition&&(e._posLimit=e._pointerToLastSafePosition-e._bufferOffset),void(e._streamEndWasReached=!0);e._streamPos+=t,e._streamPos>=e._pos+e._keepSizeAfter&&(e._posLimit=e._streamPos-e._keepSizeAfter)}}function $ReduceOffsets(e,t){e._bufferOffset+=t,e._posLimit-=t,e._pos-=t,e._streamPos-=t}function InWindow(){}function $clinit_60(){var e,t,n;for($clinit_60=nullMethod,T=initDim(J,0,-1,256,1),e=0;e<256;++e){for(n=e,t=0;t<8;++t)0!=(1&n)?n=n>>>1^-306674912:n>>>=1;T[e]=n}}function $MovePos_0(e){var t;++e._cyclicBufferPos>=e._cyclicBufferSize&&(e._cyclicBufferPos=0),function $MovePos_1(e){++e._pos,e._pos>e._posLimit&&(e._bufferOffset+e._pos>e._pointerToLastSafePosition&&function $MoveBlock(e){var t,n,r;for((r=e._bufferOffset+e._pos-e._keepSizeBefore)>0&&--r,n=e._bufferOffset+e._streamPos-r,t=0;t<n;++t)e._bufferBase[t]=e._bufferBase[r+t];e._bufferOffset-=r}(e),$ReadBlock(e))}(e),1073741823==e._pos&&(t=e._pos-e._cyclicBufferSize,$NormalizeLinks(e._son,2*e._cyclicBufferSize,t),$NormalizeLinks(e._hash,e._hashSizeSum,t),$ReduceOffsets(e,t))}function $NormalizeLinks(e,t,n){var r,i;for(r=0;r<t;++r)(i=e[r])<=n?i=0:i-=n,e[r]=i}function BinTree(){}function $Flush_0(e){var t;0!=(t=e._pos-e._streamPos)&&($write_0(e._stream,e._buffer,e._streamPos,t),e._pos>=e._windowSize&&(e._pos=0),e._streamPos=e._pos)}function $GetByte(e,t){var n;return(n=e._pos-t-1)<0&&(n+=e._windowSize),e._buffer[n]}function OutWindow(){}function GetLenToPosState(e){return(e-=2)<4?e:3}function StateUpdateChar(e){return e<4?0:e<10?e-3:e-6}function $processChunk(e){var t;if(!e.alive)throw new IllegalStateException;t=!0;try{return e.encoder?function $processEncoderChunk(e){(function $CodeOneBlock(e,t,n,r){var i,o,a,s,c,f,h,p,m,g,v,y,_,b,w;if(t[0]=l,n[0]=l,r[0]=!0,e._inStream&&(e._matchFinder._stream=e._inStream,function $Init_5(e){var t;for(e._bufferOffset=0,e._pos=0,e._streamPos=0,e._streamEndWasReached=!1,$ReadBlock(e),t=0;t<e._hashSizeSum;++t)e._hash[t]=0;e._cyclicBufferPos=0,$ReduceOffsets(e,-1)}(e._matchFinder),e._needReleaseMFStream=!0,e._inStream=null),!e._finished){if(e._finished=!0,b=e.nowPos64,eq(e.nowPos64,l)){if(0==$GetNumAvailableBytes(e._matchFinder))return void $Flush(e,lowBits_0(e.nowPos64));$ReadMatchDistances(e),_=lowBits_0(e.nowPos64)&e._posStateMask,$Encode_3(e._rangeEncoder,e._isMatch,(e._state<<4)+_,0),e._state=StateUpdateChar(e._state),a=$GetIndexByte(e._matchFinder,-e._additionalOffset),$Encode_1($GetSubCoder(e._literalEncoder,lowBits_0(e.nowPos64),e._previousByte),e._rangeEncoder,a),e._previousByte=a,--e._additionalOffset,e.nowPos64=add(e.nowPos64,u)}if(0!=$GetNumAvailableBytes(e._matchFinder))for(;;){if(h=$GetOptimum(e,lowBits_0(e.nowPos64)),g=e.backRes,_=lowBits_0(e.nowPos64)&e._posStateMask,o=(e._state<<4)+_,1==h&&-1==g)$Encode_3(e._rangeEncoder,e._isMatch,o,0),a=$GetIndexByte(e._matchFinder,-e._additionalOffset),w=$GetSubCoder(e._literalEncoder,lowBits_0(e.nowPos64),e._previousByte),e._state<7?$Encode_1(w,e._rangeEncoder,a):(m=$GetIndexByte(e._matchFinder,-e._repDistances[0]-1-e._additionalOffset),$EncodeMatched(w,e._rangeEncoder,m,a)),e._previousByte=a,e._state=StateUpdateChar(e._state);else{if($Encode_3(e._rangeEncoder,e._isMatch,o,1),g<4){if($Encode_3(e._rangeEncoder,e._isRep,e._state,1),0==g?($Encode_3(e._rangeEncoder,e._isRepG0,e._state,0),$Encode_3(e._rangeEncoder,e._isRep0Long,o,1==h?0:1)):($Encode_3(e._rangeEncoder,e._isRepG0,e._state,1),1==g?$Encode_3(e._rangeEncoder,e._isRepG1,e._state,0):($Encode_3(e._rangeEncoder,e._isRepG1,e._state,1),$Encode_3(e._rangeEncoder,e._isRepG2,e._state,g-2))),1==h?e._state=e._state<7?9:11:($Encode_0(e._repMatchLenEncoder,e._rangeEncoder,h-2,_),e._state=e._state<7?8:11),s=e._repDistances[g],0!=g){for(f=g;f>=1;--f)e._repDistances[f]=e._repDistances[f-1];e._repDistances[0]=s}}else{for($Encode_3(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,$Encode_0(e._lenEncoder,e._rangeEncoder,h-2,_),y=GetPosSlot(g-=4),p=GetLenToPosState(h),$Encode_2(e._posSlotEncoder[p],e._rangeEncoder,y),y>=4&&(v=g-(i=(2|1&y)<<(c=(y>>1)-1)),y<14?ReverseEncode(e._posEncoders,i-y-1,e._rangeEncoder,c,v):($EncodeDirectBits(e._rangeEncoder,v>>4,c-4),$ReverseEncode(e._posAlignEncoder,e._rangeEncoder,15&v),++e._alignPriceCount)),s=g,f=3;f>=1;--f)e._repDistances[f]=e._repDistances[f-1];e._repDistances[0]=s,++e._matchPriceCount}e._previousByte=$GetIndexByte(e._matchFinder,h-1-e._additionalOffset)}if(e._additionalOffset-=h,e.nowPos64=add(e.nowPos64,fromInt(h)),0==e._additionalOffset){if(e._matchPriceCount>=128&&$FillDistancesPrices(e),e._alignPriceCount>=16&&$FillAlignPrices(e),t[0]=e.nowPos64,n[0]=$GetProcessedSizeAdd(e._rangeEncoder),0==$GetNumAvailableBytes(e._matchFinder))return void $Flush(e,lowBits_0(e.nowPos64));if(compare(sub(e.nowPos64,b),d)>=0)return e._finished=!1,void(r[0]=!1)}}else $Flush(e,lowBits_0(e.nowPos64))}})(e.encoder,e.encoder.processedInSize,e.encoder.processedOutSize,e.encoder.finished),e.inBytesProcessed=e.encoder.processedInSize[0],e.encoder.finished[0]&&(!function $ReleaseStreams(e){$ReleaseMFStream(e),e._rangeEncoder.Stream=null}(e.encoder),e.alive=!1)}(e):function $processDecoderChunk(e){var t;if(-1==(t=function $CodeOneChunk(e){var t,n,r,i,o,a;if(a=lowBits_0(e.nowPos64)&e.m_PosStateMask,0==$DecodeBit(e.m_RangeDecoder,e.m_IsMatchDecoders,(e.state<<4)+a))t=function $GetDecoder(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}(e.m_LiteralDecoder,lowBits_0(e.nowPos64),e.prevByte),e.state<7?e.prevByte=function $DecodeNormal(e,t){var n;n=1;do{n=n<<1|$DecodeBit(t,e.m_Decoders,n)}while(n<256);return n<<24>>24}(t,e.m_RangeDecoder):e.prevByte=function $DecodeWithMatchByte(e,t,n){var r,i,o;o=1;do{if(i=n>>7&1,n<<=1,r=$DecodeBit(t,e.m_Decoders,(1+i<<8)+o),o=o<<1|r,i!=r){for(;o<256;)o=o<<1|$DecodeBit(t,e.m_Decoders,o);break}}while(o<256);return o<<24>>24}(t,e.m_RangeDecoder,$GetByte(e.m_OutWindow,e.rep0)),function $PutByte(e,t){e._buffer[e._pos++]=t,e._pos>=e._windowSize&&$Flush_0(e)}(e.m_OutWindow,e.prevByte),e.state=StateUpdateChar(e.state),e.nowPos64=add(e.nowPos64,u);else{if(1==$DecodeBit(e.m_RangeDecoder,e.m_IsRepDecoders,e.state))r=0,0==$DecodeBit(e.m_RangeDecoder,e.m_IsRepG0Decoders,e.state)?0==$DecodeBit(e.m_RangeDecoder,e.m_IsRep0LongDecoders,(e.state<<4)+a)&&(e.state=e.state<7?9:11,r=1):(0==$DecodeBit(e.m_RangeDecoder,e.m_IsRepG1Decoders,e.state)?n=e.rep1:(0==$DecodeBit(e.m_RangeDecoder,e.m_IsRepG2Decoders,e.state)?n=e.rep2:(n=e.rep3,e.rep3=e.rep2),e.rep2=e.rep1),e.rep1=e.rep0,e.rep0=n),0==r&&(r=$Decode(e.m_RepLenDecoder,e.m_RangeDecoder,a)+2,e.state=e.state<7?8:11);else if(e.rep3=e.rep2,e.rep2=e.rep1,e.rep1=e.rep0,r=2+$Decode(e.m_LenDecoder,e.m_RangeDecoder,a),e.state=e.state<7?7:10,(o=$Decode_0(e.m_PosSlotDecoder[GetLenToPosState(r)],e.m_RangeDecoder))>=4){if(i=(o>>1)-1,e.rep0=(2|1&o)<<i,o<14)e.rep0+=function ReverseDecode(e,t,n,r){var i,o,a,s;for(a=1,s=0,o=0;o<r;++o)i=$DecodeBit(n,e,t+a),a<<=1,a+=i,s|=i<<o;return s}(e.m_PosDecoders,e.rep0-o-1,e.m_RangeDecoder,i);else if(e.rep0+=function $DecodeDirectBits(e,t){var n,r,i;for(r=0,n=t;0!=n;--n)e.Range>>>=1,i=e.Code-e.Range>>>31,e.Code-=e.Range&i-1,r=r<<1|1-i,0==(-16777216&e.Range)&&(e.Code=e.Code<<8|$read(e.Stream),e.Range<<=8);return r}(e.m_RangeDecoder,i-4)<<4,e.rep0+=function $ReverseDecode(e,t){var n,r,i,o;for(i=1,o=0,r=0;r<e.NumBitLevels;++r)n=$DecodeBit(t,e.Models,i),i<<=1,i+=n,o|=n<<r;return o}(e.m_PosAlignDecoder,e.m_RangeDecoder),e.rep0<0)return-1==e.rep0?1:-1}else e.rep0=o;if(compare(fromInt(e.rep0),e.nowPos64)>=0||e.rep0>=e.m_DictionarySizeCheck)return-1;!function $CopyBlock(e,t,n){var r;for((r=e._pos-t-1)<0&&(r+=e._windowSize);0!=n;--n)r>=e._windowSize&&(r=0),e._buffer[e._pos++]=e._buffer[r++],e._pos>=e._windowSize&&$Flush_0(e)}(e.m_OutWindow,e.rep0,r),e.nowPos64=add(e.nowPos64,fromInt(r)),e.prevByte=$GetByte(e.m_OutWindow,0)}return 0}(e.decoder)))throw $IOException(new IOException,"corrupted input");e.inBytesProcessed=s,e.outBytesProcessed=e.decoder.nowPos64,(1==t||compare(e.decoder.outSize,l)>=0&&compare(e.decoder.nowPos64,e.decoder.outSize)>=0)&&(!function $CodeFinish(e){$Flush_0(e.m_OutWindow),function $ReleaseStream(e){$Flush_0(e),e._stream=null}(e.m_OutWindow),e.m_RangeDecoder.Stream=null}(e.decoder),e.alive=!1)}(e),t=!1,e.alive}finally{t&&(e.alive=!1)}}function Chunker(){}function Decoder(){}function $Create(e,t){for(;e.m_NumPosStates<t;++e.m_NumPosStates)e.m_LowCoder[e.m_NumPosStates]=$BitTreeDecoder(new BitTreeDecoder,3),e.m_MidCoder[e.m_NumPosStates]=$BitTreeDecoder(new BitTreeDecoder,3)}function $Decode(e,t,n){var r;return 0==$DecodeBit(t,e.m_Choice,0)?$Decode_0(e.m_LowCoder[n],t):(r=8,0==$DecodeBit(t,e.m_Choice,1)?r+=$Decode_0(e.m_MidCoder[n],t):r+=8+$Decode_0(e.m_HighCoder,t),r)}function $Decoder$LenDecoder(e){return e.m_Choice=initDim(ae,0,-1,2,1),e.m_LowCoder=initDim(se,0,7,16,0),e.m_MidCoder=initDim(se,0,7,16,0),e.m_HighCoder=$BitTreeDecoder(new BitTreeDecoder,8),e}function $Init(e){var t;for(InitBitModels(e.m_Choice),t=0;t<e.m_NumPosStates;++t)InitBitModels(e.m_LowCoder[t].Models),InitBitModels(e.m_MidCoder[t].Models);InitBitModels(e.m_HighCoder.Models)}function Decoder$LenDecoder(){}function Decoder$LiteralDecoder(){}function $Decoder$LiteralDecoder$Decoder2(e){return e.m_Decoders=initDim(ae,0,-1,768,1),e}function Decoder$LiteralDecoder$Decoder2(){}function $clinit_59(){var e,t,n,r;for($clinit_59=nullMethod,e=2,(L=initDim(B,0,-1,2048,1))[0]=0,L[1]=1,r=2;r<22;++r)for(n=1<<(r>>1)-1,t=0;t<n;++t,++e)L[e]=r<<24>>24}function $Backward(e,t){var n,r,i,o;e._optimumEndIndex=t,i=e._optimum[t].PosPrev,r=e._optimum[t].BackPrev;do{e._optimum[t].Prev1IsChar&&($MakeAsChar(e._optimum[i]),e._optimum[i].PosPrev=i-1,e._optimum[t].Prev2&&(e._optimum[i-1].Prev1IsChar=!1,e._optimum[i-1].PosPrev=e._optimum[t].PosPrev2,e._optimum[i-1].BackPrev=e._optimum[t].BackPrev2)),o=i,n=r,r=e._optimum[o].BackPrev,i=e._optimum[o].PosPrev,e._optimum[o].BackPrev=n,e._optimum[o].PosPrev=t,t=o}while(t>0);return e.backRes=e._optimum[0].BackPrev,e._optimumCurrentIndex=e._optimum[0].PosPrev,e._optimumCurrentIndex}function $FillAlignPrices(e){var t;for(t=0;t<16;++t)e._alignPrices[t]=$ReverseGetPrice(e._posAlignEncoder,t);e._alignPriceCount=0}function $FillDistancesPrices(e){var t,n,r,i,o,a,s,l;for(i=4;i<128;++i)t=(2|1&(a=GetPosSlot(i)))<<(r=(a>>1)-1),e.tempPrices[i]=ReverseGetPrice(e._posEncoders,t-a-1,r,i-t);for(o=0;o<4;++o){for(n=e._posSlotEncoder[o],s=o<<6,a=0;a<e._distTableSize;++a)e._posSlotPrices[s+a]=$GetPrice_1(n,a);for(a=14;a<e._distTableSize;++a)e._posSlotPrices[s+a]+=(a>>1)-1-4<<6;for(l=128*o,i=0;i<4;++i)e._distancesPrices[l+i]=e._posSlotPrices[s+i];for(;i<128;++i)e._distancesPrices[l+i]=e._posSlotPrices[s+GetPosSlot(i)]+e.tempPrices[i]}e._matchPriceCount=0}function $Flush(e,t){$ReleaseMFStream(e),function $WriteEndMarker(e,t){var n;if(!e._writeEndMark)return;$Encode_3(e._rangeEncoder,e._isMatch,(e._state<<4)+t,1),$Encode_3(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,$Encode_0(e._lenEncoder,e._rangeEncoder,0,t),n=GetLenToPosState(2),$Encode_2(e._posSlotEncoder[n],e._rangeEncoder,63),$EncodeDirectBits(e._rangeEncoder,67108863,26),$ReverseEncode(e._posAlignEncoder,e._rangeEncoder,15)}(e,t&e._posStateMask),function $FlushData(e){var t;for(t=0;t<5;++t)$ShiftLow(e)}(e._rangeEncoder)}function $GetOptimum(e,t){var n,r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,_,b,w,x,C,S,k,T,L,E,A,P,R,O,D,F,I,N,$,B,z,j,U,q,H,V,G;if(e._optimumEndIndex!=e._optimumCurrentIndex)return p=e._optimum[e._optimumCurrentIndex].PosPrev-e._optimumCurrentIndex,e.backRes=e._optimum[e._optimumCurrentIndex].BackPrev,e._optimumCurrentIndex=e._optimum[e._optimumCurrentIndex].PosPrev,p;if(e._optimumCurrentIndex=e._optimumEndIndex=0,e._longestMatchWasFound?(h=e._longestMatchLength,e._longestMatchWasFound=!1):h=$ReadMatchDistances(e),L=e._numDistancePairs,(k=$GetNumAvailableBytes(e._matchFinder)+1)<2)return e.backRes=-1,1;for(k>273&&(k=273),j=0,c=0;c<4;++c)e.reps[c]=e._repDistances[c],e.repLens[c]=$GetMatchLen(e._matchFinder,-1,e.reps[c],273),e.repLens[c]>e.repLens[j]&&(j=c);if(e.repLens[j]>=e._numFastBytes)return e.backRes=j,$MovePos(e,(p=e.repLens[j])-1),p;if(h>=e._numFastBytes)return e.backRes=e._matchDistances[L-1]+4,$MovePos(e,h-1),h;if(l=$GetIndexByte(e._matchFinder,-1),y=$GetIndexByte(e._matchFinder,-e._repDistances[0]-1-1),h<2&&l!=y&&e.repLens[j]<2)return e.backRes=-1,1;if(e._optimum[0].State=e._state,F=t&e._posStateMask,e._optimum[1].Price=($clinit_66(),M[e._isMatch[(e._state<<4)+F]>>>2]+$GetPrice_0($GetSubCoder(e._literalEncoder,t,e._previousByte),e._state>=7,y,l)),$MakeAsChar(e._optimum[1]),z=(_=M[2048-e._isMatch[(e._state<<4)+F]>>>2])+M[2048-e._isRep[e._state]>>>2],y==l&&(U=z+function $GetRepLen1Price(e,t,n){return $clinit_66(),M[e._isRepG0[t]>>>2]+M[e._isRep0Long[(t<<4)+n]>>>2]}(e,e._state,F))<e._optimum[1].Price&&(e._optimum[1].Price=U,function $MakeAsShortRep(e){e.BackPrev=0,e.Prev1IsChar=!1}(e._optimum[1])),(f=h>=e.repLens[j]?h:e.repLens[j])<2)return e.backRes=e._optimum[1].BackPrev,1;e._optimum[1].PosPrev=0,e._optimum[0].Backs0=e.reps[0],e._optimum[0].Backs1=e.reps[1],e._optimum[0].Backs2=e.reps[2],e._optimum[0].Backs3=e.reps[3],d=f;do{e._optimum[d--].Price=268435455}while(d>=2);for(c=0;c<4;++c)if(!((B=e.repLens[c])<2)){N=z+$GetPureRepPrice(e,c,e._state,F);do{(o=N+$GetPrice(e._repMatchLenEncoder,B-2,F))<(R=e._optimum[B]).Price&&(R.Price=o,R.PosPrev=0,R.BackPrev=c,R.Prev1IsChar=!1)}while(--B>=2)}if(S=_+M[e._isRep[e._state]>>>2],(d=e.repLens[0]>=2?e.repLens[0]+1:2)<=h){for(E=0;d>e._matchDistances[E];)E+=2;for(;(o=S+$GetPosLenPrice(e,u=e._matchDistances[E+1],d,F))<(R=e._optimum[d]).Price&&(R.Price=o,R.PosPrev=0,R.BackPrev=u+4,R.Prev1IsChar=!1),d!=e._matchDistances[E]||(E+=2)!=L;++d);}for(n=0;;){if(++n==f)return $Backward(e,n);if(b=$ReadMatchDistances(e),L=e._numDistancePairs,b>=e._numFastBytes)return e._longestMatchLength=b,e._longestMatchWasFound=!0,$Backward(e,n);if(++t,D=e._optimum[n].PosPrev,e._optimum[n].Prev1IsChar?(--D,e._optimum[n].Prev2?(H=e._optimum[e._optimum[n].PosPrev2].State,H=e._optimum[n].BackPrev2<4?H<7?8:11:H<7?7:10):H=e._optimum[D].State,H=StateUpdateChar(H)):H=e._optimum[D].State,D==n-1?H=0==e._optimum[n].BackPrev?H<7?9:11:StateUpdateChar(H):(e._optimum[n].Prev1IsChar&&e._optimum[n].Prev2?(D=e._optimum[n].PosPrev2,O=e._optimum[n].BackPrev2,H=H<7?8:11):H=(O=e._optimum[n].BackPrev)<4?H<7?8:11:H<7?7:10,P=e._optimum[D],O<4?0==O?(e.reps[0]=P.Backs0,e.reps[1]=P.Backs1,e.reps[2]=P.Backs2,e.reps[3]=P.Backs3):1==O?(e.reps[0]=P.Backs1,e.reps[1]=P.Backs0,e.reps[2]=P.Backs2,e.reps[3]=P.Backs3):2==O?(e.reps[0]=P.Backs2,e.reps[1]=P.Backs0,e.reps[2]=P.Backs1,e.reps[3]=P.Backs3):(e.reps[0]=P.Backs3,e.reps[1]=P.Backs0,e.reps[2]=P.Backs1,e.reps[3]=P.Backs2):(e.reps[0]=O-4,e.reps[1]=P.Backs0,e.reps[2]=P.Backs1,e.reps[3]=P.Backs2)),e._optimum[n].State=H,e._optimum[n].Backs0=e.reps[0],e._optimum[n].Backs1=e.reps[1],e._optimum[n].Backs2=e.reps[2],e._optimum[n].Backs3=e.reps[3],s=e._optimum[n].Price,l=$GetIndexByte(e._matchFinder,-1),y=$GetIndexByte(e._matchFinder,-e.reps[0]-1-1),F=t&e._posStateMask,w=!1,(r=s+M[e._isMatch[(H<<4)+F]>>>2]+$GetPrice_0($GetSubCoder(e._literalEncoder,t,$GetIndexByte(e._matchFinder,-2)),H>=7,y,l))<(x=e._optimum[n+1]).Price&&(x.Price=r,x.PosPrev=n,x.BackPrev=-1,x.Prev1IsChar=!1,w=!0),z=(_=s+M[2048-e._isMatch[(H<<4)+F]>>>2])+M[2048-e._isRep[H]>>>2],y!=l||x.PosPrev<n&&0==x.BackPrev||(U=z+(M[e._isRepG0[H]>>>2]+M[e._isRep0Long[(H<<4)+F]>>>2]))<=x.Price&&(x.Price=U,x.PosPrev=n,x.BackPrev=0,x.Prev1IsChar=!1,w=!0),!((k=T=4095-n<(T=$GetNumAvailableBytes(e._matchFinder)+1)?4095-n:T)<2)){if(k>e._numFastBytes&&(k=e._numFastBytes),!w&&y!=l&&(G=min(T-1,e._numFastBytes),(g=$GetMatchLen(e._matchFinder,0,e.reps[0],G))>=2)){for(V=StateUpdateChar(H),I=t+1&e._posStateMask,C=r+M[2048-e._isMatch[(V<<4)+I]>>>2]+M[2048-e._isRep[V]>>>2],A=n+1+g;f<A;)e._optimum[++f].Price=268435455;(o=C+($GetPrice(e._repMatchLenEncoder,g-2,I)+$GetPureRepPrice(e,0,V,I)))<(R=e._optimum[A]).Price&&(R.Price=o,R.PosPrev=n+1,R.BackPrev=0,R.Prev1IsChar=!0,R.Prev2=!1)}for(q=2,$=0;$<4;++$)if(!((m=$GetMatchLen(e._matchFinder,-1,e.reps[$],k))<2)){v=m;do{for(;f<n+m;)e._optimum[++f].Price=268435455;(o=z+($GetPrice(e._repMatchLenEncoder,m-2,F)+$GetPureRepPrice(e,$,H,F)))<(R=e._optimum[n+m]).Price&&(R.Price=o,R.PosPrev=n,R.BackPrev=$,R.Prev1IsChar=!1)}while(--m>=2);if(m=v,0==$&&(q=m+1),m<T&&(G=min(T-1-m,e._numFastBytes),(g=$GetMatchLen(e._matchFinder,m,e.reps[$],G))>=2)){for(V=H<7?8:11,I=t+m&e._posStateMask,i=z+($GetPrice(e._repMatchLenEncoder,m-2,F)+$GetPureRepPrice(e,$,H,F))+M[e._isMatch[(V<<4)+I]>>>2]+$GetPrice_0($GetSubCoder(e._literalEncoder,t+m,$GetIndexByte(e._matchFinder,m-1-1)),!0,$GetIndexByte(e._matchFinder,m-1-(e.reps[$]+1)),$GetIndexByte(e._matchFinder,m-1)),V=StateUpdateChar(V),I=t+m+1&e._posStateMask,C=i+M[2048-e._isMatch[(V<<4)+I]>>>2]+M[2048-e._isRep[V]>>>2],A=m+1+g;f<n+A;)e._optimum[++f].Price=268435455;(o=C+($GetPrice(e._repMatchLenEncoder,g-2,I)+$GetPureRepPrice(e,0,V,I)))<(R=e._optimum[n+A]).Price&&(R.Price=o,R.PosPrev=n+m+1,R.BackPrev=0,R.Prev1IsChar=!0,R.Prev2=!0,R.PosPrev2=n,R.BackPrev2=$)}}if(b>k){for(b=k,L=0;b>e._matchDistances[L];L+=2);e._matchDistances[L]=b,L+=2}if(b>=q){for(S=_+M[e._isRep[H]>>>2];f<n+b;)e._optimum[++f].Price=268435455;for(E=0;q>e._matchDistances[E];)E+=2;for(m=q;;++m)if((o=S+$GetPosLenPrice(e,a=e._matchDistances[E+1],m,F))<(R=e._optimum[n+m]).Price&&(R.Price=o,R.PosPrev=n,R.BackPrev=a+4,R.Prev1IsChar=!1),m==e._matchDistances[E]){if(m<T&&(G=min(T-1-m,e._numFastBytes),(g=$GetMatchLen(e._matchFinder,m,a,G))>=2)){for(V=H<7?7:10,I=t+m&e._posStateMask,i=o+M[e._isMatch[(V<<4)+I]>>>2]+$GetPrice_0($GetSubCoder(e._literalEncoder,t+m,$GetIndexByte(e._matchFinder,m-1-1)),!0,$GetIndexByte(e._matchFinder,m-(a+1)-1),$GetIndexByte(e._matchFinder,m-1)),V=StateUpdateChar(V),I=t+m+1&e._posStateMask,C=i+M[2048-e._isMatch[(V<<4)+I]>>>2]+M[2048-e._isRep[V]>>>2],A=m+1+g;f<n+A;)e._optimum[++f].Price=268435455;(o=C+($GetPrice(e._repMatchLenEncoder,g-2,I)+$GetPureRepPrice(e,0,V,I)))<(R=e._optimum[n+A]).Price&&(R.Price=o,R.PosPrev=n+m+1,R.BackPrev=0,R.Prev1IsChar=!0,R.Prev2=!0,R.PosPrev2=n,R.BackPrev2=a+4)}if((E+=2)==L)break}}}}}function $GetPosLenPrice(e,t,n,r){var i;return i=GetLenToPosState(n),(t<128?e._distancesPrices[128*i+t]:e._posSlotPrices[(i<<6)+function GetPosSlot2(e){if(e<131072)return L[e>>6]+12;if(e<134217728)return L[e>>16]+32;return L[e>>26]+52}(t)]+e._alignPrices[15&t])+$GetPrice(e._lenEncoder,n-2,r)}function $GetPureRepPrice(e,t,n,r){var i;return 0==t?($clinit_66(),i=M[e._isRepG0[n]>>>2],i+=M[2048-e._isRep0Long[(n<<4)+r]>>>2]):($clinit_66(),i=M[2048-e._isRepG0[n]>>>2],1==t?i+=M[e._isRepG1[n]>>>2]:(i+=M[2048-e._isRepG1[n]>>>2],i+=GetPrice(e._isRepG2[n],t-2))),i}function $MovePos(e,t){t>0&&(!function $Skip(e,t){var n,r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y;do{if(e._pos+e._matchMaxLen<=e._streamPos)h=e._matchMaxLen;else if((h=e._streamPos-e._pos)<e.kMinMatchCheck){$MovePos_0(e);continue}for(p=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,r=e._bufferOffset+e._pos,e.HASH_ARRAY?(s=1023&(y=T[255&e._bufferBase[r]]^255&e._bufferBase[r+1]),e._hash[s]=e._pos,l=65535&(y^=(255&e._bufferBase[r+2])<<8),e._hash[1024+l]=e._pos,u=(y^T[255&e._bufferBase[r+3]]<<5)&e._hashMask):u=255&e._bufferBase[r]^(255&e._bufferBase[r+1])<<8,i=e._hash[e.kFixHashSize+u],e._hash[e.kFixHashSize+u]=e._pos,g=1+(e._cyclicBufferPos<<1),v=e._cyclicBufferPos<<1,d=f=e.kNumHashDirectBytes,n=e._cutValue;;){if(i<=p||0==n--){e._son[g]=e._son[v]=0;break}if(o=((a=e._pos-i)<=e._cyclicBufferPos?e._cyclicBufferPos-a:e._cyclicBufferPos-a+e._cyclicBufferSize)<<1,m=e._bufferOffset+i,c=d<f?d:f,e._bufferBase[m+c]==e._bufferBase[r+c]){for(;++c!=h&&e._bufferBase[m+c]==e._bufferBase[r+c];);if(c==h){e._son[v]=e._son[o],e._son[g]=e._son[o+1];break}}(255&e._bufferBase[m+c])<(255&e._bufferBase[r+c])?(e._son[v]=i,v=o+1,i=e._son[v],f=c):(e._son[g]=i,g=o,i=e._son[g],d=c)}$MovePos_0(e)}while(0!=--t)}(e._matchFinder,t),e._additionalOffset+=t)}function $ReadMatchDistances(e){var t;return t=0,e._numDistancePairs=function $GetMatches(e,t){var n,r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,_,b,w,x;if(e._pos+e._matchMaxLen<=e._streamPos)m=e._matchMaxLen;else if((m=e._streamPos-e._pos)<e.kMinMatchCheck)return $MovePos_0(e),0;for(y=0,g=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,r=e._bufferOffset+e._pos,v=1,u=0,c=0,e.HASH_ARRAY?(u=1023&(x=T[255&e._bufferBase[r]]^255&e._bufferBase[r+1]),c=65535&(x^=(255&e._bufferBase[r+2])<<8),d=(x^T[255&e._bufferBase[r+3]]<<5)&e._hashMask):d=255&e._bufferBase[r]^(255&e._bufferBase[r+1])<<8,i=e._hash[e.kFixHashSize+d],e.HASH_ARRAY&&(o=e._hash[u],a=e._hash[1024+c],e._hash[u]=e._pos,e._hash[1024+c]=e._pos,o>g&&e._bufferBase[e._bufferOffset+o]==e._bufferBase[r]&&(t[y++]=v=2,t[y++]=e._pos-o-1),a>g&&e._bufferBase[e._bufferOffset+a]==e._bufferBase[r]&&(a==o&&(y-=2),t[y++]=v=3,t[y++]=e._pos-a-1,o=a),0!=y&&o==i&&(y-=2,v=1)),e._hash[e.kFixHashSize+d]=e._pos,b=1+(e._cyclicBufferPos<<1),w=e._cyclicBufferPos<<1,h=p=e.kNumHashDirectBytes,0!=e.kNumHashDirectBytes&&i>g&&e._bufferBase[e._bufferOffset+i+e.kNumHashDirectBytes]!=e._bufferBase[r+e.kNumHashDirectBytes]&&(t[y++]=v=e.kNumHashDirectBytes,t[y++]=e._pos-i-1),n=e._cutValue;;){if(i<=g||0==n--){e._son[b]=e._son[w]=0;break}if(s=((l=e._pos-i)<=e._cyclicBufferPos?e._cyclicBufferPos-l:e._cyclicBufferPos-l+e._cyclicBufferSize)<<1,_=e._bufferOffset+i,f=h<p?h:p,e._bufferBase[_+f]==e._bufferBase[r+f]){for(;++f!=m&&e._bufferBase[_+f]==e._bufferBase[r+f];);if(v<f&&(t[y++]=v=f,t[y++]=l-1,f==m)){e._son[w]=e._son[s],e._son[b]=e._son[s+1];break}}(255&e._bufferBase[_+f])<(255&e._bufferBase[r+f])?(e._son[w]=i,w=s+1,i=e._son[w],p=f):(e._son[b]=i,b=s,i=e._son[b],h=f)}return $MovePos_0(e),y}(e._matchFinder,e._matchDistances),e._numDistancePairs>0&&(t=e._matchDistances[e._numDistancePairs-2])==e._numFastBytes&&(t+=$GetMatchLen(e._matchFinder,t-1,e._matchDistances[e._numDistancePairs-1],273-t)),++e._additionalOffset,t}function $ReleaseMFStream(e){e._matchFinder&&e._needReleaseMFStream&&(e._matchFinder._stream=null,e._needReleaseMFStream=!1)}function GetPosSlot(e){return e<2048?L[e]:e<2097152?L[e>>10]+20:L[e>>20]+40}function Encoder(){}function $Init_2(e,t){var n;for(InitBitModels_0(e._choice),n=0;n<t;++n)InitBitModels(e._lowCoder[n].Models),InitBitModels(e._midCoder[n].Models);InitBitModels(e._highCoder.Models)}function $SetPrices(e,t,n,r,i){var o,a,s,l,u;for($clinit_66(),o=M[e._choice[0]>>>2],s=(a=M[2048-e._choice[0]>>>2])+M[e._choice[1]>>>2],l=a+M[2048-e._choice[1]>>>2],u=0,u=0;u<8;++u){if(u>=n)return;r[i+u]=o+$GetPrice_1(e._lowCoder[t],u)}for(;u<16;++u){if(u>=n)return;r[i+u]=s+$GetPrice_1(e._midCoder[t],u-8)}for(;u<n;++u)r[i+u]=l+$GetPrice_1(e._highCoder,u-8-8)}function Encoder$LenEncoder(){}function $Encode_0(e,t,n,r){!function $Encode(e,t,n,r){n<8?($Encode_3(t,e._choice,0,0),$Encode_2(e._lowCoder[r],t,n)):(n-=8,$Encode_3(t,e._choice,0,1),n<8?($Encode_3(t,e._choice,1,0),$Encode_2(e._midCoder[r],t,n)):($Encode_3(t,e._choice,1,1),$Encode_2(e._highCoder,t,n-8)))}(e,t,n,r),0==--e._counters[r]&&($SetPrices(e,r,e._tableSize,e._prices,272*r),e._counters[r]=e._tableSize)}function $Encoder$LenPriceTableEncoder(e){return function $Encoder$LenEncoder(e){var t;for(e._choice=initDim(ae,0,-1,2,1),e._lowCoder=initDim(pe,0,8,16,0),e._midCoder=initDim(pe,0,8,16,0),e._highCoder=$BitTreeEncoder(new BitTreeEncoder,8),t=0;t<16;++t)e._lowCoder[t]=$BitTreeEncoder(new BitTreeEncoder,3),e._midCoder[t]=$BitTreeEncoder(new BitTreeEncoder,3);return e}(e),e._prices=initDim(J,0,-1,4352,1),e._counters=initDim(J,0,-1,16,1),e}function $GetPrice(e,t,n){return e._prices[272*n+t]}function $UpdateTables(e,t){var n;for(n=0;n<t;++n)$SetPrices(e,n,e._tableSize,e._prices,272*n),e._counters[n]=e._tableSize}function Encoder$LenPriceTableEncoder(){}function $GetSubCoder(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}function Encoder$LiteralEncoder(){}function $Encode_1(e,t,n){var r,i,o;for(i=1,o=7;o>=0;--o)r=n>>o&1,$Encode_3(t,e.m_Encoders,i,r),i=i<<1|r}function $EncodeMatched(e,t,n,r){var i,o,a,s,l,u;for(o=1,l=!0,a=7;a>=0;--a)i=r>>a&1,u=o,l&&(u+=1+(s=n>>a&1)<<8,l=s==i),$Encode_3(t,e.m_Encoders,u,i),o=o<<1|i}function $Encoder$LiteralEncoder$Encoder2(e){return e.m_Encoders=initDim(ae,0,-1,768,1),e}function $GetPrice_0(e,t,n,r){var i,o,a,s,l;if(l=0,o=1,a=7,t)for(;a>=0;--a)if(s=n>>a&1,i=r>>a&1,l+=GetPrice(e.m_Encoders[(1+s<<8)+o],i),o=o<<1|i,s!=i){--a;break}for(;a>=0;--a)i=r>>a&1,l+=GetPrice(e.m_Encoders[o],i),o=o<<1|i;return l}function Encoder$LiteralEncoder$Encoder2(){}function $MakeAsChar(e){e.BackPrev=-1,e.Prev1IsChar=!1}function Encoder$Optimal(){}function $BitTreeDecoder(e,t){return e.NumBitLevels=t,e.Models=initDim(ae,0,-1,1<<t,1),e}function $Decode_0(e,t){var n,r;for(r=1,n=e.NumBitLevels;0!=n;--n)r=(r<<1)+$DecodeBit(t,e.Models,r);return r-(1<<e.NumBitLevels)}function BitTreeDecoder(){}function $BitTreeEncoder(e,t){return e.NumBitLevels=t,e.Models=initDim(ae,0,-1,1<<t,1),e}function $Encode_2(e,t,n){var r,i,o;for(o=1,i=e.NumBitLevels;0!=i;)r=n>>>--i&1,$Encode_3(t,e.Models,o,r),o=o<<1|r}function $GetPrice_1(e,t){var n,r,i,o;for(o=0,i=1,r=e.NumBitLevels;0!=r;)n=t>>>--r&1,o+=GetPrice(e.Models[i],n),i=(i<<1)+n;return o}function $ReverseEncode(e,t,n){var r,i,o;for(o=1,i=0;i<e.NumBitLevels;++i)r=1&n,$Encode_3(t,e.Models,o,r),o=o<<1|r,n>>=1}function $ReverseGetPrice(e,t){var n,r,i,o;for(o=0,i=1,r=e.NumBitLevels;0!=r;--r)n=1&t,t>>>=1,o+=GetPrice(e.Models[i],n),i=i<<1|n;return o}function ReverseEncode(e,t,n,r,i){var o,a,s;for(s=1,a=0;a<r;++a)$Encode_3(n,e,t+s,o=1&i),s=s<<1|o,i>>=1}function ReverseGetPrice(e,t,n,r){var i,o,a,s;for(s=0,a=1,o=n;0!=o;--o)i=1&r,r>>>=1,s+=($clinit_66(),M[(2047&(e[t+a]-i^-i))>>>2]),a=a<<1|i;return s}function BitTreeEncoder(){}function $DecodeBit(e,t,n){var r,i;return i=t[n],r=(e.Range>>>11)*i,(-2147483648^e.Code)<(-2147483648^r)?(e.Range=r,t[n]=i+(2048-i>>>5)<<16>>16,0==(-16777216&e.Range)&&(e.Code=e.Code<<8|$read(e.Stream),e.Range<<=8),0):(e.Range-=r,e.Code-=r,t[n]=i-(i>>>5)<<16>>16,0==(-16777216&e.Range)&&(e.Code=e.Code<<8|$read(e.Stream),e.Range<<=8),1)}function InitBitModels(e){var t;for(t=0;t<e.length;++t)e[t]=1024}function Decoder_0(){}function $clinit_66(){var e,t,n;for($clinit_66=nullMethod,M=initDim(J,0,-1,512,1),t=8;t>=0;--t)for(e=1<<9-t,n=1<<9-t-1;n<e;++n)M[n]=(t<<6)+(e-n<<6>>>9-t-1)}function $Encode_3(e,t,n,r){var i,o;o=t[n],i=(e.Range>>>11)*o,0==r?(e.Range=i,t[n]=o+(2048-o>>>5)<<16>>16):(e.Low=add(e.Low,and(fromInt(i),m)),e.Range-=i,t[n]=o-(o>>>5)<<16>>16),0==(-16777216&e.Range)&&(e.Range<<=8,$ShiftLow(e))}function $EncodeDirectBits(e,t,n){var r;for(r=n-1;r>=0;--r)e.Range>>>=1,1==(t>>>r&1)&&(e.Low=add(e.Low,fromInt(e.Range))),0==(-16777216&e.Range)&&(e.Range<<=8,$ShiftLow(e))}function $GetProcessedSizeAdd(e){return add(add(fromInt(e._cacheSize),e._position),c)}function $ShiftLow(e){var t,n;if(0!=(t=lowBits_0(function shru(e,t){var n;return n=shr(e,t&=63),e[1]<0&&(n=add(n,shl(($clinit_10(),C),63-t))),n}(e.Low,32)))||compare(e.Low,p)<0){e._position=add(e._position,fromInt(e._cacheSize)),n=e._cache;do{$write(e.Stream,n+t),n=255}while(0!=--e._cacheSize);e._cache=lowBits_0(e.Low)>>>24}++e._cacheSize,e.Low=shl(and(e.Low,f),8)}function GetPrice(e,t){return $clinit_66(),M[(2047&(e-t^-t))>>>2]}function InitBitModels_0(e){var t;for($clinit_66(),t=0;t<e.length;++t)e[t]=1024}function Encoder_0(){}function $LZMADemo(e){return e}function toDouble(e){return e[1]+e[0]}function compress(){var e,n,r,i,o,a=$LZMADemo(new LZMADemo),s=arguments[0],l=arguments[1];"function"==typeof arguments[2]?(i=arguments[2],"function"==typeof arguments[3]&&(o=arguments[3])):r=arguments[2],a.mode=De(l),a.c=function $LZMAByteArrayCompressor(e,t,n){var r;e.output=$ByteArrayOutputStream(new ByteArrayOutputStream);try{$init(e,$ByteArrayInputStream(new ByteArrayInputStream,t),e.output,fromInt(t.length),n)}catch(r){throw instanceOf(r=caught(r),10)?$RuntimeException(new RuntimeException,"impossible exception"):r}return e}(new LZMAByteArrayCompressor,function encode(e){var t,n,r,i,o,a,s;for(function $getChars(e,t,n,r,i){var o;for(o=t;o<n;++o)r[i++]=e.charCodeAt(o)}(e,0,s=e.length,a=initDim(G,0,-1,s,1),0),n=a,i=0,o=0;o<e.length;++o)(t=n[o])>=1&&t<=127?++i:i+=0==t||t>=128&&t<=2047?2:3;for(r=initDim(B,0,-1,i,1),i=0,o=0;o<e.length;++o)(t=n[o])>=1&&t<=127?r[i++]=t<<24>>24:0==t||t>=128&&t<=2047?(r[i++]=(192|t>>6&31)<<24>>24,r[i++]=(128|63&t)<<24>>24):(r[i++]=(224|t>>12&15)<<24>>24,r[i++]=(128|t>>6&63)<<24>>24,r[i++]=(128|63&t)<<24>>24);return r}(s),a.mode),o?o(0):void 0!==r&&update_progress(0,r),setTimeout(function do_action(){var s;for(n=(new Date).getTime();$execute(a.c);)if(e=toDouble(a.c.chunker.inBytesProcessed)/toDouble(a.c.length_0),(new Date).getTime()-n>200)return o?o(e):void 0!==r&&update_progress(e,r),setTimeout(do_action,0),!1;o?o(1):void 0!==r&&update_progress(1,r),s=$toByteArray(a.c.output).slice(0),i?i(s):void 0!==r&&postMessage({action:t,callback_num:r,result:s})},1)}function decompress(){var e,t,r,a,s,l,u=$LZMADemo(new LZMADemo),c=arguments[0];"function"==typeof arguments[1]?(s=arguments[1],"function"==typeof arguments[2]&&(l=arguments[2])):a=arguments[1],t=function initValues(e,t,n,r){return $clinit_4(),wrapArray(r,i,o),r.arrayClass$=e,r.typeId$=t,r.queryId$=n,r}(B,0,-1,c),u.d=function $LZMAByteArrayDecompressor(e,t){return e.output=$ByteArrayOutputStream(new ByteArrayOutputStream),$init_0(e,$ByteArrayInputStream(new ByteArrayInputStream,t),e.output),e}(new LZMAByteArrayDecompressor,t),l?l(0):void 0!==a&&update_progress(0,a),setTimeout(function do_action(){var t;for(r=(new Date).getTime();$execute_0(u.d);)if(e=toDouble(u.d.chunker.decoder.nowPos64)/toDouble(u.d.length_0),(new Date).getTime()-r>200)return l?l(e):void 0!==a&&update_progress(e,a),setTimeout(do_action,0),!1;l?l(1):void 0!==a&&update_progress(1,a),t=function decode(e){var t,n,r,i,o;for(t=function $StringBuilder(e){var t;return e.data=((t=[]).explicitLength=0,t),e}(new StringBuilder),n=0;n<e.length;++n)if(0==(128&(r=255&e[n]))){if(0==r)throw $IllegalArgumentException(new IllegalArgumentException,"invalid UTF-8");$appendNonNull(t.data,String.fromCharCode(65535&r))}else if(192==(224&r)){if(n+1>=e.length)throw $IllegalArgumentException(new IllegalArgumentException,"invalid UTF-8");if(128!=(192&(i=255&e[++n])))throw $IllegalArgumentException(new IllegalArgumentException,"invalid UTF-8");$append(t.data,String.fromCharCode((31&r)<<6&65535|63&i))}else{if(224!=(240&r))throw $IllegalArgumentException(new IllegalArgumentException,"invalid UTF-8");if(n+2>=e.length)throw $IllegalArgumentException(new IllegalArgumentException,"invalid UTF-8");if(128!=(192&(i=255&e[++n])))throw $IllegalArgumentException(new IllegalArgumentException,"invalid UTF-8");if(128!=(192&(o=255&e[++n])))throw $IllegalArgumentException(new IllegalArgumentException,"invalid UTF-8");$appendNonNull(t.data,String.fromCharCode(65535&((15&r)<<12|(63&i)<<6|63&o)))}return function $toString(e){var t,n;return n=e.join(""),e.length=e.explicitLength=0,t=n,e[e.explicitLength++]=t,t}(t.data)}($toByteArray(u.d.output)),s?s(t):void 0!==a&&postMessage({action:n,callback_num:a,result:t})},0)}function LZMADemo(){}function init(){$stats&&$stats({moduleName:e,subSystem:"startup",evtGroup:"moduleStartup",millis:(new Date).getTime(),type:"onModuleLoadStart",className:"org.dellroad.lzma.demo.client.LZMADemo"})}function nullMethod(){}(r=InputStream.prototype=new Object_0).getClass$=function getClass_6(){return N},r.typeId$=0,(r=ByteArrayInputStream.prototype=new InputStream).getClass$=function getClass_3(){return $},r.typeId$=0,r.buf=null,r.count=0,r.pos=0,(r=OutputStream.prototype=new Object_0).getClass$=function getClass_7(){return z},r.typeId$=0,(r=ByteArrayOutputStream.prototype=new OutputStream).getClass$=function getClass_4(){return j},r.typeId$=0,r.buf=null,r.count=0,(r=IOException.prototype=new Exception).getClass$=function getClass_5(){return U},r.typeId$=7,(r=ArithmeticException.prototype=new RuntimeException).getClass$=function getClass_8(){return H},r.typeId$=8,(r=ArrayStoreException.prototype=new RuntimeException).getClass$=function getClass_9(){return V},r.typeId$=9,(r=Class.prototype=new Object_0).getClass$=function getClass_11(){return W},r.typeId$=0,r.typeName=null,(r=ClassCastException.prototype=new RuntimeException).getClass$=function getClass_10(){return Y},r.typeId$=12,(r=Enum.prototype=new Object_0).getClass$=function getClass_12(){return q},r.typeId$=0,(r=IllegalArgumentException.prototype=new RuntimeException).getClass$=function getClass_14(){return Z},r.typeId$=13,(r=IllegalStateException.prototype=new RuntimeException).getClass$=function getClass_15(){return K},r.typeId$=14,(r=IndexOutOfBoundsException.prototype=new RuntimeException).getClass$=function getClass_16(){return X},r.typeId$=15,(r=NullPointerException.prototype=new RuntimeException).getClass$=function getClass_17(){return Q},r.typeId$=16,(r=String.prototype).getClass$=function getClass_21(){return ee},r.typeId$=2,(r=StringBuilder.prototype=new Object_0).getClass$=function getClass_20(){return te},r.typeId$=0,(r=function CompressionMode(){}.prototype=new Enum).getClass$=function getClass_23(){return Me},r.typeId$=0,r.dictionarySize=0,r.fb=0,r.lc=0,r.lp=0,r.matchFinder=0,r.pb=0,(r=LZMACompressor.prototype=new Object_0).getClass$=function getClass_26(){return Ee},r.typeId$=0,r.chunker=null,(r=LZMAByteArrayCompressor.prototype=new LZMACompressor).getClass$=function getClass_24(){return Ae},r.typeId$=0,r.output=null,(r=LZMADecompressor.prototype=new Object_0).getClass$=function getClass_27(){return Pe},r.typeId$=0,r.chunker=null,r.exception=null,r.length_0=l,(r=LZMAByteArrayDecompressor.prototype=new LZMADecompressor).getClass$=function getClass_25(){return Re},r.typeId$=0,r.output=null,(r=InWindow.prototype=new Object_0).getClass$=function getClass_40(){return ne},r.typeId$=0,r._blockSize=0,r._bufferBase=null,r._bufferOffset=0,r._keepSizeAfter=0,r._keepSizeBefore=0,r._pointerToLastSafePosition=0,r._pos=0,r._posLimit=0,r._stream=null,r._streamEndWasReached=!1,r._streamPos=0,(r=BinTree.prototype=new InWindow).getClass$=function getClass_39(){return re},r.typeId$=0,r.HASH_ARRAY=!0,r._cutValue=255,r._cyclicBufferPos=0,r._cyclicBufferSize=0,r._hash=null,r._hashMask=0,r._hashSizeSum=0,r._matchMaxLen=0,r._son=null,r.kFixHashSize=66560,r.kMinMatchCheck=4,r.kNumHashDirectBytes=0,(r=OutWindow.prototype=new Object_0).getClass$=function getClass_41(){return ie},r.typeId$=0,r._buffer=null,r._pos=0,r._stream=null,r._streamPos=0,r._windowSize=0,(r=Chunker.prototype=new Object_0).getClass$=function getClass_28(){return oe},r.typeId$=0,r.alive=!1,r.decoder=null,r.encoder=null,(r=Decoder.prototype=new Object_0).getClass$=function getClass_32(){return le},r.typeId$=0,r.m_DictionarySize=-1,r.m_DictionarySizeCheck=-1,r.m_PosStateMask=0,r.nowPos64=l,r.outSize=l,r.prevByte=0,r.rep0=0,r.rep1=0,r.rep2=0,r.rep3=0,r.state=0,(r=Decoder$LenDecoder.prototype=new Object_0).getClass$=function getClass_29(){return ue},r.typeId$=0,r.m_NumPosStates=0,(r=Decoder$LiteralDecoder.prototype=new Object_0).getClass$=function getClass_31(){return de},r.typeId$=0,r.m_Coders=null,r.m_NumPosBits=0,r.m_NumPrevBits=0,r.m_PosMask=0,(r=Decoder$LiteralDecoder$Decoder2.prototype=new Object_0).getClass$=function getClass_30(){return fe},r.typeId$=17,(r=Encoder.prototype=new Object_0).getClass$=function getClass_38(){return ve},r.typeId$=0,r._additionalOffset=0,r._alignPriceCount=0,r._dictionarySize=4194304,r._dictionarySizePrev=-1,r._distTableSize=44,r._finished=!1,r._inStream=null,r._longestMatchLength=0,r._longestMatchWasFound=!1,r._matchFinder=null,r._matchFinderType=1,r._matchPriceCount=0,r._needReleaseMFStream=!1,r._numDistancePairs=0,r._numFastBytes=32,r._numFastBytesPrev=-1,r._numLiteralContextBits=3,r._numLiteralPosStateBits=0,r._optimumCurrentIndex=0,r._optimumEndIndex=0,r._posStateBits=2,r._posStateMask=3,r._previousByte=0,r._state=0,r._writeEndMark=!1,r.backRes=0,r.nowPos64=l,(r=Encoder$LenEncoder.prototype=new Object_0).getClass$=function getClass_33(){return we},r.typeId$=0,(r=Encoder$LenPriceTableEncoder.prototype=new Encoder$LenEncoder).getClass$=function getClass_34(){return xe},r.typeId$=0,r._tableSize=0,(r=Encoder$LiteralEncoder.prototype=new Object_0).getClass$=function getClass_36(){return _e},r.typeId$=0,r.m_Coders=null,r.m_NumPosBits=0,r.m_NumPrevBits=0,r.m_PosMask=0,(r=Encoder$LiteralEncoder$Encoder2.prototype=new Object_0).getClass$=function getClass_35(){return be},r.typeId$=18,(r=Encoder$Optimal.prototype=new Object_0).getClass$=function getClass_37(){return Ce},r.typeId$=19,r.BackPrev=0,r.BackPrev2=0,r.Backs0=0,r.Backs1=0,r.Backs2=0,r.Backs3=0,r.PosPrev=0,r.PosPrev2=0,r.Prev1IsChar=!1,r.Prev2=!1,r.Price=0,r.State=0,(r=BitTreeDecoder.prototype=new Object_0).getClass$=function getClass_42(){return Se},r.typeId$=20,r.Models=null,r.NumBitLevels=0,(r=BitTreeEncoder.prototype=new Object_0).getClass$=function getClass_43(){return ke},r.typeId$=21,r.Models=null,r.NumBitLevels=0,(r=Decoder_0.prototype=new Object_0).getClass$=function getClass_44(){return Te},r.typeId$=0,r.Code=0,r.Range=0,r.Stream=null,(r=Encoder_0.prototype=new Object_0).getClass$=function getClass_45(){return Le},r.typeId$=0,r.Low=l,r.Range=0,r.Stream=null,r._cache=0,r._cacheSize=0,r._position=l,(r=LZMADemo.prototype=new Object_0).getClass$=function getClass_46(){return Oe},r.typeId$=0,r.c=null,r.d=null;var A=createForClass("java.lang.","Object"),P=createForClass("java.lang.","Throwable"),R=createForClass("java.lang.","Exception"),O=createForClass("java.lang.","RuntimeException"),D=createForClass("com.google.gwt.core.client.","JavaScriptException"),F=createForClass("com.google.gwt.core.client.","JavaScriptObject$"),I=createForArray("","[[D"),N=createForClass("java.io.","InputStream"),$=createForClass("java.io.","ByteArrayInputStream"),B=createForArray("","[B"),z=createForClass("java.io.","OutputStream"),j=createForClass("java.io.","ByteArrayOutputStream"),U=createForClass("java.io.","IOException"),q=createForClass("java.lang.","Enum"),H=createForClass("java.lang.","ArithmeticException"),V=createForClass("java.lang.","ArrayStoreException"),G=createForArray("","[C"),W=createForClass("java.lang.","Class"),Y=createForClass("java.lang.","ClassCastException"),Z=createForClass("java.lang.","IllegalArgumentException"),K=createForClass("java.lang.","IllegalStateException"),X=createForClass("java.lang.","IndexOutOfBoundsException"),J=createForArray("","[I"),Q=createForClass("java.lang.","NullPointerException"),ee=createForClass("java.lang.","String"),te=createForClass("java.lang.","StringBuilder"),ne=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZ.","InWindow"),re=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZ.","BinTree"),ie=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZ.","OutWindow"),oe=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Chunker"),ae=createForArray("","[S"),se=createForArray("[Lorg.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","BitTreeDecoder;"),le=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder"),ue=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder$LenDecoder"),ce=createForArray("[Lorg.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder$LiteralDecoder$Decoder2;"),de=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder$LiteralDecoder"),fe=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder$LiteralDecoder$Decoder2"),he=createForArray("[Lorg.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$Optimal;"),pe=createForArray("[Lorg.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","BitTreeEncoder;"),me=createForArray("","[J"),ge=createForArray("","[Z"),ve=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder"),ye=createForArray("[Lorg.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LiteralEncoder$Encoder2;"),_e=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LiteralEncoder"),be=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LiteralEncoder$Encoder2"),we=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LenEncoder"),xe=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LenPriceTableEncoder"),Ce=createForClass("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$Optimal"),Se=createForClass("org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","BitTreeDecoder"),ke=createForClass("org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","BitTreeEncoder"),Te=createForClass("org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","Decoder"),Le=createForClass("org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","Encoder"),Me=function createForEnum(e,t){var n;return(n=new Class).typeName=e+t,n}("org.dellroad.lzma.client.","CompressionMode"),Ee=createForClass("org.dellroad.lzma.client.","LZMACompressor"),Ae=createForClass("org.dellroad.lzma.client.","LZMAByteArrayCompressor"),Pe=createForClass("org.dellroad.lzma.client.","LZMADecompressor"),Re=createForClass("org.dellroad.lzma.client.","LZMAByteArrayDecompressor"),Oe=createForClass("org.dellroad.lzma.demo.client.","LZMADemo");!function gwtOnLoad(t,n,r){if(e=n,r,t)try{init()}catch(e){t(n)}else init()}(function(){},"lzma_demo","");var De=function(){var e=[{dictionarySize:16,fb:64,matchFinder:0,lc:3,lp:0,pb:2},{dictionarySize:20,fb:64,matchFinder:0,lc:3,lp:0,pb:2},{dictionarySize:19,fb:64,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:20,fb:64,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:21,fb:128,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:22,fb:128,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:23,fb:128,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:24,fb:255,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:25,fb:255,matchFinder:1,lc:3,lp:0,pb:2}];return function(t){return!function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}(t)?t=1:t<1?t=1:t>9&&(t=9),e[t-1]}}();return{compress:compress,decompress:decompress}}();e.exports=n},function(e,t,n){n(23),n(16),n(25);var r=n(30),i=n(1),o=n(6),a=n(9),s=n(0),l=n(3108),u=n(231),c=n(1364),d=n(3107),f=n(193),h=n(875),p=function WindshaftClient(e){!function validatePresenceOfOptions(e,t){var n=o(s).call(s,t,function(t){return!e[t]});if(n.length)throw new Error("WindshaftClient could not be initialized. The following options are missing: "+n.join(", "))}(e,["urlTemplate","userName"]),e.templateName?this.endpoints={get:[c.MAPS_API_BASE_URL,"named",e.templateName,"jsonp"].join("/"),post:[c.MAPS_API_BASE_URL,"named",e.templateName].join("/")}:this.endpoints={get:c.MAPS_API_BASE_URL,post:c.MAPS_API_BASE_URL},this.url=e.urlTemplate.replace("{user}",e.userName),this._requestTracker=new d(3)};p.prototype.instantiateMap=function(e){var t,n;this._requestTracker.canRequestBePerformed(e)?this._performRequest(e,{success:i(t=function _context(t){if(this._requestTracker.track(e,t),t.errors){var n=h(t);e.options.error&&e.options.error(n)}else e.options.success&&e.options.success(t)}).call(t,this),error:i(n=function _context2(t,n){if("abort"!==n){var r={},i={};try{r=JSON.parse(t.responseText),i=h(r)}catch(e){}this._requestTracker.track(e,r),e.options.error&&e.options.error(i)}}).call(n,this)}):(f.error("Maximum number of subsequent equal requests to the Maps API reached (3):",e.payload,e.params),e.options.error&&e.options.error({}))},p.prototype._performRequest=function(e,t){var n,r=e.payload,o=e.params,a=this._generateEncodedURL(r,o);this._isURLValid(a)?this._get(a,t):this._generateCompressedURL(r,o,i(n=function _context3(e){if(this._isURLValid(e))this._get(e,t);else{var n=this._getURL(o,"post");this._post(n,r,t)}}).call(n,this))},p.prototype._generateEncodedURL=function(e,t){return t=s.extend({config:r(e)},t),this._getURL(t)},p.prototype._generateCompressedURL=function(e,t,n){var o,a=r({config:r(e)});l.compress(a,3,i(o=function _context4(e){t=s.extend({lzma:u.array2hex(e)},t),n(this._getURL(t))}).call(o,this))},p.prototype._isURLValid=function(e){return e.length<2033},p.prototype._post=function(e,t,n){this._abortPreviousRequest(),this._previousRequest=a.ajax({url:e,crossOrigin:!0,method:"POST",dataType:"json",contentType:"application/json",data:r(t),success:n.success,error:n.error})},p.prototype._get=function(e,t){this._abortPreviousRequest(),this._previousRequest=a.ajax({url:e,method:"GET",dataType:"jsonp",jsonpCallback:this._jsonpCallbackName(e),cache:!0,success:t.success,error:t.error})},p.prototype._abortPreviousRequest=function(){this._previousRequest&&this._previousRequest.abort()},p.prototype._getURL=function(e,t){t=t||"get";var n=this._convertParamsToQueryString(e),r=this.endpoints[t];return[this.url,r].join("/")+n},p.prototype._convertParamsToQueryString=function(e){var t=[];return s.each(e,function(e,n){e instanceof Array?s.each(e,function(e){t.push(n+"[]="+e)}):e instanceof Object?t.push(n+"="+encodeURIComponent(r(e))):t.push(n+"="+encodeURIComponent(e))}),t.length>0?"?"+t.join("&"):""},p.prototype._jsonpCallbackName=function(e){return"_cdbc_"+u.uniqueCallbackName(e)},e.exports=p},function(e,t,n){n(23),n(16),n(25);var r=n(5),i=n(11),o=n(27),a=n(0),s=n(1364);function Response(e,t){this._windshaftSettings=e,this._layerGroupId=t.layergroupid,this._layers=t.metadata.layers,this._dataviews=t.metadata.dataviews,this._analyses=t.metadata.analyses,this._cdnUrl=t.cdn_url}Response.prototype.getLayerIndexesByType=function getLayerIndexesByType(e){return o(a).call(a,this._getLayers(),function(t,n,r){return n.type===e&&t.push(r),t},[])},Response.prototype.getBaseURL=function getBaseURL(){return[this._getHost(),s.MAPS_API_BASE_URL,this._layerGroupId].join("/")},Response.prototype.getStaticBaseURL=function getStaticBaseURL(){return[this._getHost(),s.MAPS_API_BASE_URL,"static/center",this._layerGroupId].join("/")},Response.prototype._getHost=function _getHost(){var e=this._windshaftSettings.urlTemplate,t=this._windshaftSettings.userName,n=this.getProtocol(),r=this._cdnUrl,i=r&&r[n],o=r&&r.templates;return o&&o[n]?o[n].url+"/"+t:i?[n,"://",i,"/",t].join(""):e.replace("{user}",t)},Response.prototype.getProtocol=function getProtocol(){return this._isHttps()?"https":"http"},Response.prototype._isHttps=function isHttps(){var e;return 0===i(e=this._windshaftSettings.urlTemplate).call(e,"https")},Response.prototype.getSupportedSubdomains=function getSupportedSubdomains(){var e=this._cdnUrl&&this._cdnUrl.templates,t=this.getProtocol();return e&&e[t]?e[t].subdomains:[]},Response.prototype.getLayerMetadata=function getLayerMetadata(e){var t={},n=this._getLayers();return n&&n[e]&&(t=n[e].meta||{}),t},Response.prototype.getDataviewMetadata=function getDataviewMetadata(e){var t=this._getDataviews();if(t&&t[e])return t[e];t={};var n=a.compact(r(a).call(a,this._getLayers(),function(e){return e.widgets}));return a.each(n,function(e){a.extend(t,e)}),t&&t[e]?t[e]:void 0},Response.prototype.getAnalysisNodeMetadata=function(e){var t={},n=r(a).call(a,this._getAnalyses(),function(e){return e.nodes});return a.each(n,function(e){a.extend(t,e)}),t[e]},Response.prototype._getLayers=function _getLayers(){return this._layers},Response.prototype._getDataviews=function _getDataviews(){return this._dataviews},Response.prototype._getAnalyses=function _getAnalyses(){return this._analyses},e.exports=Response},function(e,t,n){var r=n(30),i=function Request(e,t,n){this.payload=e,this.params=t,this.options=n};i.prototype.toHashCode=function(){return r(this.payload)+r(this.params)+r(this.options)},i.prototype.equals=function(e){return this.toHashCode()===e.toHashCode()},e.exports=i},function(e,t,n){var r=n(27),i=n(6),o=n(0),a=n(603);e.exports={serialize:function serialize(e,t){return{buffersize:{mvt:0},styles:function _getStylesFromLayers(e){return r(o).call(o,e,function(e,t,n){return t.get("cartocss")&&(e[n]=t.get("cartocss")),e},{})}(i(e).call(e,function(e){return!a.isGoogleMapsBaseLayer(e)}))}}}},function(e,t,n){n(24),n(16),n(68);var r=n(21),i=n(5),o=n(6),a=n(116),s=n(0),l=n(876),u=["line-color","marker-fill","polygon-fill","marker-file"],c=["="],d=function _extractURL(e){var t="",n=e.match(/(http|https):\/\/\S+\.(?:gif|jpeg|jpg|png|webp|svg)/g);return n&&(t=n[0]),t};e.exports={canAdapt:function canAdapt(e){return(e=new l(e)).matchesAnyProperty(u)&&e.matchesAnyMapping(c)&&function isEveryBucketValid(e){var t=e.getBucketsWithCategoryFilter();return a(s).call(s,t,function(e){return null!=o(e).name&&null!=e.value})}(e)},adapt:function adapt(e){var t=new l(e[0]),n=new l(e[1]),a=t.getBucketsWithCategoryFilter(),u=n.getBucketsWithCategoryFilter(),c=t.getBucketsWithDefaultFilter(),f=n.getBucketsWithDefaultFilter();return{categories:function generateCategories(e,t){return i(s).call(s,e,function(e){var n=r(s).call(s,t,function(t){return o(t).name===o(e).name});return{title:o(e).name,icon:n&&n.value?d(n.value):"",color:e.value}})}(a,u),default:{icon:s.isEmpty(f)?"":d(f[0].value),color:s.isEmpty(c)?"":c[0].value}}}}},function(e,t,n){n(29),n(51);var r=n(5),i=n(6),o=n(116),a=n(0),s=n(876),l=["line-color","marker-fill","polygon-fill"],u=[">",">=","<","<="];e.exports={canAdapt:function canAdapt(e){return(e=new s(e)).matchesAnyProperty(l)&&e.matchesAnyMapping(u)&&function isEveryBucketValid(e){var t=e.getBucketsWithRangeFilter();return o(a).call(a,t,function(e){return null!=i(e).start&&null!=i(e).end})}(e)},adapt:function adapt(e){var t=new s(e[0]),n=t.getBucketsWithRangeFilter(),o=a.last(n),l=a.first(n);return{colors:function generateColors(e){if(1===e.length){var t=e[0],n=i(t).start,o=i(t).end;return[{value:t.value,label:n.toString()},{value:t.value,label:o.toString()}]}return r(a).call(a,e,function(t,n){var r="";return 0===n?r=i(t).start:n===e.length-1&&(r=i(t).end),{value:t.value,label:r.toString()}})}(n),avg:t.getFilterAvg(),max:i(o).end,min:i(l).start}}}},function(e,t,n){var r=n(5),i=n(10),o=n(6),a=n(116),s=n(0),l=n(876),u=["marker-width","line-width"];e.exports={canAdapt:function canAdapt(e){return(e=new l(e)).matchesAnyProperty(u)&&function isEveryBucketValid(e){var t=e.getBucketsWithRangeFilter();return a(s).call(s,t,function(e){return null!=o(e).start&&null!=o(e).end})}(e)},adapt:function adapt(e){var t=new l(e[0]),n=t.getBucketsWithRangeFilter();return{values:function calculateValues(e){var t,n,a,l=s.last(e);return i(t=r(n=r(a=s.chain(e)).call(a,"filter")).call(n,"start")).call(t,o(l).end).value()}(n),sizes:r(s).call(s,n,"value"),avg:t.getFilterAvg()}}}},function(e,t,n){var r={bubble:n(3115),choropleth:n(3114),category:n(3113)};e.exports={getAdapterForLegend:function getAdapterForLegend(e){return r[e.get("type")]}}},function(e,t,n){n(23),n(16),n(25);var r=n(5),i=n(6),o=n(11),a=n(0),s=n(193),l=n(231),u=n(3116),c=n(605),d=n(3);var f=function ModelUpdater(e){if(!e.layerGroupModel)throw new Error("layerGroupModel is required");if(!e.layersCollection)throw new Error("layersCollection is required");if(!e.dataviewsCollection)throw new Error("dataviewsCollection is required");this._layerGroupModel=e.layerGroupModel,this._layersCollection=e.layersCollection,this._dataviewsCollection=e.dataviewsCollection};f.prototype.updateModels=function(e,t,n){this._updateLayerModels(e),this._updateLayerGroupModel(e),this._updateDataviewModels(e,t,n),this._updateAnalysisModels(e)},f.prototype._updateLayerGroupModel=function(e){var t={tiles:this._generateTileURLTemplate(e),subdomains:e.getSupportedSubdomains(),grids:this._calculateGridURLTemplatesForCartoDBLayers(e),attributes:this._calculateAttributesBaseURLsForCartoDBLayers(e),image:this._calculateStaticMapURL(e)};this._layerGroupModel.set({indexOfLayersInWindshaft:e.getLayerIndexesByType("mapnik"),urls:t})},f.prototype._calculateStaticMapURL=function(e){return[e.getStaticBaseURL(),"{z}/{lat}/{lng}/{width}/{height}.{format}"].join("/")},f.prototype._generateTileURLTemplate=function(e){return e.getBaseURL()+"/{layerIndexes}/{z}/{x}/{y}.{format}"},f.prototype._calculateGridURLTemplatesForCartoDBLayers=function(e){var t=[],n=e.getLayerIndexesByType("mapnik");return n.length>0&&a.each(n,function(n){var r=[],i=this._generateGridURLTemplate(e,n),o=e.getSupportedSubdomains();o.length?a.each(o,function(e){r.push(i.replace("{s}",e))}):r.push(i),t.push(r)},this),t},f.prototype._generateGridURLTemplate=function(e,t){return e.getBaseURL()+"/"+t+"/{z}/{x}/{y}.grid.json"},f.prototype._calculateAttributesBaseURLsForCartoDBLayers=function(e){var t=[],n=e.getLayerIndexesByType("mapnik");return n.length>0&&a.each(n,function(n){t.push(this._generateAttributesBaseURL(e,n))},this),t},f.prototype._generateAttributesBaseURL=function(e,t){var n=e.getBaseURL()+"/"+t+"/attributes";if(o(n).call(n,"{s}")>=0){var r=function getSubdomain(e,t){return e[l.crc32(t)%e.length]}(e.getSupportedSubdomains(),n);n=n.replace("{s}",r)}return n},f.prototype._updateLayerModels=function(e){var t=e.getLayerIndexesByType("mapnik");a.each(this._layersCollection.getCartoDBLayers(),function(n,r){var i=t[r];n.set("meta",e.getLayerMetadata(i)),this._updateLegendModels(n,i,e),n.setOk()},this);var n=e.getLayerIndexesByType("torque");a.each(this._layersCollection.getTorqueLayers(),function(t,r){var i=n[r],o=e.getLayerMetadata(i);t.set("meta",o),t.set(o),t.set("subdomains",e.getSupportedSubdomains()),t.set("tileURLTemplates",this._calculateTileURLTemplatesForTorqueLayers(e)),this._updateLegendModels(t,i,e),t.setOk()},this)},f.prototype._calculateTileURLTemplatesForTorqueLayers=function(e){var t=[],n=e.getLayerIndexesByType("torque");return n.length>0&&t.push(this._generateTorqueTileURLTemplate(e,n)),t},f.prototype._generateTorqueTileURLTemplate=function(e,t){return e.getBaseURL()+"/"+t.join(",")+"/{z}/{x}/{y}.json.torque"},f.prototype._updateLegendModels=function(e,t,n){var r=n.getLayerMetadata(t);a.each(this._getLayerLegends(e),function(e){this._updateLegendModel(e,r)},this)},f.prototype._updateLegendModel=function(e,t){var n=t&&t.cartocss_meta&&t.cartocss_meta.rules;try{var r={state:"success"};if(n){var o=u.getAdapterForLegend(e),l=i(a).call(a,n,o.canAdapt);a.isEmpty(l)||(r=a.extend(r,o.adapt(l)))}e.set(r)}catch(t){e.set({state:"error"}),s.error("legend of type '"+e.get("type")+"' couldn't be updated: "+t.message)}},f.prototype._updateDataviewModels=function(e,t,n){this._dataviewsCollection.each(function(r){var i=e.getDataviewMetadata(r.get("id"));i&&r.set({url:i.url[this._getProtocol()]},{sourceId:t,forceFetch:n})},this)},f.prototype._updateAnalysisModels=function(e){this._getUniqueAnalysisNodesCollection().each(function(t){var n,r=e.getAnalysisNodeMetadata(t.get("id"));r&&(n={status:r.status,url:r.url[this._getProtocol()],query:r.query},n=a.omit(n,t.getParamNames()),r.error_message?(n=a.extend(n,{error:{message:r.error_message}}),t.set(n)):(t.set(n),t.setOk()))},this)},f.prototype._getProtocol=function(){return"file:"===window.location.protocol?"http":window.location.protocol.replace(":","")},f.prototype.setErrors=function(e){a.each(e,this._setError,this),this._setLegendErrors()},f.prototype._setError=function(e){if(e.isLayerError()){var t=this._layersCollection.get(e.layerId);t&&t.setError(e)}else if(e.isAnalysisError()){var n=this._getUniqueAnalysisNodesCollection().get(e.analysisId);n&&n.setError(e)}},f.prototype._setLegendErrors=function(){var e,t=r(e=this._layersCollection.chain()).call(e,this._getLayerLegends).compact().flatten().value();a.each(t,function(e){e.set("state","error")})},f.prototype._getLayerLegends=function(e){return e.legends&&[e.legends.bubble,e.legends.category,e.legends.choropleth]},f.prototype._getUniqueAnalysisNodesCollection=function(){var e=c.getUniqueAnalysisNodes(this._layersCollection,this._dataviewsCollection);return new d.Collection(e)},e.exports=f},function(e,t,n){n(32);var r=n(27),i=n(6),o=n(0),a=n(3).Collection.extend({isAnyDataviewFiltered:function isAnyDataviewFiltered(){return this.any(function(e){var t=i(e);return t&&!t.isEmpty()})},getFilters:function getFilters(){var e;return r(e=this).call(e,function(e,t){var n=i(t);return n&&!n.isEmpty()&&(e.dataviews=e.dataviews||{},o.extend(e.dataviews,n.toJSON())),e},{})}});e.exports=a},function(e,t,n){n(23),n(16),n(25),n(32);var r=n(27),i=n(5),o=n(11),a=n(1),s=n(0),l=n(9),u=n(3),c=n(603),d=n(231),f=u.Model.extend({defaults:{visible:!0,type:"layergroup"},initialize:function initialize(e,t){if(!(t=t||{}).layersCollection)throw new Error("layersCollection option is required");this._layersCollection=t.layersCollection},addError:function addError(e){var t=e.type;if(!t)throw new Error("Error must have a type property.");this.trigger("error:"+t,e)},forEachGroupedLayer:function forEachGroupedLayer(e,t){s.each(this._getGroupedLayers(),a(e).call(e,t||this))},_getGroupedLayers:function _getGroupedLayers(){return this._layersCollection.getCartoDBLayers()},_getLayers:function _getLayers(){return this._layersCollection.reject(c.isGoogleMapsBaseLayer)},getIndexOfLayerInLayerGroup:function getIndexOfLayerInLayerGroup(e){var t;return o(t=this._getGroupedLayers()).call(t,e)},getLayerInLayerGroupAt:function getLayerInLayerGroupAt(e){return this._getGroupedLayers()[e]},getCartoLayerById:function getCartoLayerById(e){return this._layersCollection.get(e)},isEqual:function isEqual(){return!1},hasURLs:function hasURLs(){return!!this.get("urls")},getSubdomains:function getSubdomains(){return this.get("urls")&&this.get("urls").subdomains||[]},getTileURLTemplatesWithSubdomains:function getTileURLTemplatesWithSubdomains(){var e=this.getTileURLTemplate(),t=this.getSubdomains();return t&&t.length?i(s).call(s,t,function(t){return e.replace("{s}",t)}):[e]},getTileURLTemplate:function getTileURLTemplate(e){e=e||"png";var t=this.get("urls")&&this.get("urls").tiles;return t?"png"===e?this._areAllLayersHidden()?"":this._generatePNGTileURLTemplate(t):"mvt"===e?this._generateMTVTileURLTemplate(t):void 0:""},_generatePNGTileURLTemplate:function _generatePNGTileURLTemplate(e){var t=this._getIndexesOfVisibleMapnikLayers();return t?(e=e.replace("{layerIndexes}",t).replace("{format}","png"),this._appendAuthParamsToURL(e)):""},_generateMTVTileURLTemplate:function _generateMTVTileURLTemplate(e){return e=e.replace("{layerIndexes}","mapnik").replace("{format}","mvt"),this._appendAuthParamsToURL(e)},_areAllLayersHidden:function _areAllLayersHidden(){return s.all(this._getGroupedLayers(),function(e){return!e.isVisible()})},_getIndexesOfVisibleMapnikLayers:function _getIndexesOfVisibleMapnikLayers(e){var t=this.get("indexOfLayersInWindshaft");return r(s).call(s,this._getGroupedLayers(),function(e,n,r){return n.isVisible()&&e.push(t[r]),e},[]).join(",")},_getIndexesOfVisibleLayers:function _getIndexesOfVisibleLayers(e){return r(s).call(s,this._getLayers(),function(e,t,n){return t.isVisible()&&e.push(n),e},[]).join(",")},hasTileURLTemplates:function hasTileURLTemplates(){return!!this.getTileURLTemplate()},getGridURLTemplatesWithSubdomains:function getGridURLTemplatesWithSubdomains(e){var t=this.get("urls")&&this.get("urls").grids&&this.get("urls").grids[e]||[];if(this.get("urls")&&this.get("urls").subdomains){var n=this.get("urls").subdomains;t=i(s).call(s,t,function(e,t){return e.replace("{s}",n[t])})}return i(s).call(s,t,this._appendAuthParamsToURL,this)},getAttributesBaseURL:function getAttributesBaseURL(e){return this.get("urls")&&this.get("urls").attributes&&this.get("urls").attributes[e]},getStaticImageURLTemplate:function getStaticImageURLTemplate(){var e=this.get("urls")&&this.get("urls").image;return e&&(e=this._appendParamsToURL(e,["layer="+this._getIndexesOfVisibleLayers()]),e=(e=this._appendAuthParamsToURL(e)).replace("{s}",this.getSubdomains()[0])),e},fetchAttributes:function fetchAttributes(e,t,n){var r=this.getAttributesBaseURL(e);if(!r)throw new Error("Attributes cannot be fetched until urls are set");var i=this._appendAuthParamsToURL(r+"/"+t);l.ajax({dataType:"jsonp",url:i,jsonpCallback:"_cdbi_layer_attributes_"+d.uniqueCallbackName(this.toJSON()),cache:!0,success:function success(e){n(e)},error:function error(e){n(null)}})},_appendAuthParamsToURL:function _appendAuthParamsToURL(e){var t=[];if(this.get("apiKey"))t.push("api_key="+this.get("apiKey"));else if(this.get("authToken")){var n=this.get("authToken");n instanceof Array?s.each(n,function(e){t.push("auth_token[]="+e)}):t.push("auth_token="+n)}return this._appendParamsToURL(e,t)},_appendParamsToURL:function _appendParamsToURL(e,t){if(t.length){var n="?";return-1!==o(e).call(e,"?")&&(n="&"),e+n+t.join("&")}return e},onLayerVisibilityChanged:function onLayerVisibilityChanged(e){this._layersCollection.on("change:visible",function(t){this._isLayerGrouped(t)&&e(t)},this)},onLayerAdded:function onLayerAdded(e){this._layersCollection.on("add",function(t){this._isLayerGrouped(t)&&e(t,this.getLayerInLayerGroupAt(t))},this)},_isLayerGrouped:function _isLayerGrouped(e){var t;return o(t=this._getGroupedLayers()).call(t,e)>=0}});e.exports=f},function(e,t,n){var r=n(5),i=n(0),o=n(603),a="2.1.0",s="http",l="plain",u="mapnik",c="torque";function _calculateLayerJSON(e){return o.isTiledLayer(e)?function optionsForHTTPLayer(e){return{id:e.get("id"),type:s,options:{urlTemplate:e.get("urlTemplate"),subdomains:e.get("subdomains"),tms:e.get("tms")}}}(e):o.isPlainLayer(e)?function optionsForPlainLayer(e){return{id:e.get("id"),type:l,options:{color:e.get("color"),imageUrl:e.get("image")}}}(e):o.isWMSLayer(e)?function optionsForWMSLayer(e){return{id:e.get("id"),type:s,options:{urlTemplate:e.get("urlTemplate"),tms:!0}}}(e):o.isCartoDBLayer(e)?function optionsForMapnikLayer(e){var t=sharedOptionsForMapnikAndTorqueLayers(e);t.interactivity=e.getInteractiveColumnNames(),e.infowindow&&e.infowindow.hasFields()&&(t.attributes={id:"cartodb_id",columns:e.infowindow.getFieldNames()});isFinite(e.get("minzoom"))&&(t.minzoom=e.get("minzoom"));isFinite(e.get("maxzoom"))&&(t.maxzoom=e.get("maxzoom"));i.isEmpty(e.aggregation)||i.extend(t,{aggregation:e.aggregation});return{id:e.get("id"),type:u,options:t}}(e):o.isTorqueLayer(e)?function optionsForTorqueLayer(e){var t=sharedOptionsForMapnikAndTorqueLayers(e);return{id:e.get("id"),type:c,options:t}}(e):void 0}function sharedOptionsForMapnikAndTorqueLayers(e){var t={cartocss:e.get("cartocss"),cartocss_version:e.get("cartocss_version")||a};return t.source={id:e.getSourceId()},e.get("sql_wrap")&&(t.sql_wrap=e.get("sql_wrap")),t}e.exports={serialize:function serialize(e){var t;return r(t=e.chain()).call(t,_calculateLayerJSON).compact().value()}}},function(e,t,n){n(32);var r=n(27);e.exports={serialize:function serialize(e){return r(e).call(e,function(e,t){return e[t.get("id")]=t.toJSON(),e},{})}}},function(e,t,n){"use strict";var r=n(1365);function AnalysisGraph(e,t){t=t||"latest",this.definition=e,this.reference=r.getVersion(t)}function childNodes(e,t){var n=t.analyses[e];return Object.keys(n.params).reduce(function(e,t){return"node"===n.params[t].type&&e.push(t),e},[])}function filterMissingOptionalNodes(e,t){return function(n){return!function isOptionalParam(e,t,n){return n.analyses[e].params[t].optional}(e.type,n,t)||!!e.params[n]}}e.exports=AnalysisGraph,AnalysisGraph.prototype.getNodesWithId=function(){return function reduceById(e,t,n){t.id&&(e[t.id]=t);childNodes(t.type,n).filter(filterMissingOptionalNodes(t,n)).forEach(function(r){reduceById(e,t.params[r],n)});return e}({},this.definition,this.reference)},AnalysisGraph.prototype.getChildNodesNames=function(){return childNodes(this.definition.type,this.reference)},AnalysisGraph.prototype.getNodesList=function(){return function appendAllNodes(e,t,n){e.push(t);childNodes(t.type,n).filter(filterMissingOptionalNodes(t,n)).forEach(function(r){appendAllNodes(e,t.params[r],n)});return e}([],this.definition,this.reference)},AnalysisGraph.prototype.getDefinitionWith=function(e,t){return function extendDefinition(e,t,n,r){e.id&&e.id===n&&Object.keys(r).forEach(function(t){e.params.hasOwnProperty(t)||(e.params[t]={});var n=r[t];Object.keys(n).forEach(function(r){e.params[t][r]=n[r]})});childNodes(e.type,t).filter(filterMissingOptionalNodes(e,t)).forEach(function(i){extendDefinition(e.params[i],t,n,r)});return e}(this.definition,this.reference,e,t)}},function(e,t){e.exports.versions=["0.1.0","0.2.0","0.3.0","0.4.0","0.6.0","0.7.0","0.9.0","0.10.0","0.14.0","0.15.0","0.16.0","0.17.0","0.18.0","0.19.0","0.20.0","0.21.0","0.22.0","0.23.0","0.26.0","0.27.0","0.29.0","0.33.0","0.34.0","0.37.0","0.37.1","0.38.0","0.40.0","0.41.0","0.43.0","0.44.0","0.47.0","0.51.0","0.52.0","0.54.0","0.55.0","0.55.1","0.58.1","0.59.3","0.59.4"],e.exports.target="0.59.4"},function(e,t,n){var r="node",i={source:[]},o={},a=n(877).getVersion("latest").analyses;if(!a)throw new Error("Error loading the reference for Camshaft analyses");for(var s in a){var l=a[s].params;for(var u in l){o[s]=o[s]||[],o[s].push(u),i[s]=i[s]||[],l[u].type===r&&i[s].push(u)}}e.exports={getSourceNamesForAnalysisType:function getSourceNamesForAnalysisType(e){var t=i[e];if(!t)throw new Error("source names for analysis of type "+e+" couldn't be found");return t},getParamNamesForAnalysisType:function getParamNamesForAnalysisType(e){var t=o[e];if(!t)throw new Error("param names for analysis of type "+e+" couldn't be found");return t}}},function(e,t,n){n(32);var r=n(27),i=n(0),o=n(605);e.exports={serialize:function serialize(e,t){return function _generateUniqueAnalysisList(e){var t={};return r(i).call(i,e,function(n,r){return t[r.get("id")]||function _isAnalysisPartOfOtherAnalyses(e,t){return i.any(t,function(t){return!e.equals(t)&&t.findAnalysisById(e.get("id"))})}(r,e)||(t[r.get("id")]=!0,n.push(r.toJSON())),n},[])}(o.getAnalysisList(e,t))}}},function(e,t,n){var r=n(3125),i=n(3121),o=n(3120);e.exports={serialize:function serialize(e,t){return{buffersize:{mvt:0},layers:o.serialize(e),dataviews:i.serialize(t),analyses:r.serialize(e,t)}}}},function(e,t,n){var r,i,o;!function(a,s){"use strict";i=[n(0),n(3)],void 0===(o="function"==typeof(r=function(e,t){var n={delay:1e3,condition:function(){return!0}},r=["start","stop","fetch","success","error","complete"],i=[];var o={get:function(t,n){var r=function findPoller(t){return e.find(i,function(e){return e.model===t})}(t);return r?r.set(n):(r=new Poller(t,n),i.push(r)),n&&!0===n.autostart&&r.start({silent:!0}),r},size:function(){return i.length},reset:function(){for(;i.length;)i[0].destroy()}};function Poller(n,r){this.model=n,this.cid=e.uniqueId("poller"),this.set(r),this.model instanceof t.Model&&this.listenTo(this.model,"destroy",this.destroy)}function run(t){if(validate(t)){var n=e.extend({},t.options,{success:function(e,n){t.trigger("success",e,n),delayedRun(t)},error:function(e,n){t.options.continueOnError?(t.trigger("error",e,n),delayedRun(t)):(t.stop({silent:!0}),t.trigger("error",e,n))}});t.trigger("fetch",t.model),t.xhr=t.model.fetch(n)}}e.extend(Poller.prototype,t.Events,{set:function(t){return this.options=e.extend({},n,t||{}),this.options.flush&&this.off(),e.each(r,e.bind(function(t){var n=this.options[t];e.isFunction(n)&&(this.off(t,n,this),this.on(t,n,this))},this)),this.stop({silent:!0})},start:function(t){return this.active()||(t&&t.silent||this.trigger("start",this.model),this.options.active=!0,this.options.delayed?delayedRun(this,e.isNumber(this.options.delayed)&&this.options.delayed):run(this)),this},stop:function(e){return e&&e.silent||this.trigger("stop",this.model),this.options.active=!1,this.xhr&&this.xhr.abort&&this.xhr.abort(),this.xhr=null,clearTimeout(this.timeoutId),this.timeoutId=null,this},active:function(){return!0===this.options.active},destroy:function(){var t=e.indexOf(i,this);t>-1&&(this.stop().stopListening().off(),i.splice(t,1))}});var a={};function getDelay(t){if(e.isNumber(t.options.delay))return t.options.delay;var n=t.options.delay[0],r=t.options.delay[1],i=t.options.delay[2]||2;a[t.cid]?e.isFunction(i)?a[t.cid]=i(a[t.cid]):a[t.cid]*=i:a[t.cid]=1;var o=Math.round(n*a[t.cid]);return r&&r>0&&(o=Math.min(o,r)),o}function delayedRun(t,n){validate(t)&&(t.timeoutId=e.delay(run,n||getDelay(t),t))}function validate(e){return!!e.options.active&&(!0===e.options.condition(e.model)||(e.stop({silent:!0}),e.trigger("complete",e.model),!1))}return o.getDelay=getDelay,o.prototype=Poller.prototype,o})?r.apply(t,i):r)||(e.exports=o)}()},function(e,t,n){var r=n(21),i=n(0),o=n(3127);function AnalysisPoller(){this._pollers=[]}AnalysisPoller.CONFIG={START_DELAY:1e3,MAX_DELAY:1/0,DELAY_MULTIPLIER:1.5},AnalysisPoller.prototype.resetAnalysisNodes=function(e){this.reset(),i.each(e,function(e){this._poll(e)},this)},AnalysisPoller.prototype._poll=function(e){this._canBePolled(e)&&this._createPoller(e).start()},AnalysisPoller.prototype._canBePolled=function(e){return e.url()&&!e.isDone()},AnalysisPoller.prototype._findPoller=function(e){return r(i).call(i,this._pollers,function(t){return t.model===e})},AnalysisPoller.prototype._createPoller=function(e){var t={delay:[AnalysisPoller.CONFIG.START_DELAY,AnalysisPoller.CONFIG.MAX_DELAY,AnalysisPoller.CONFIG.DELAY_MULTIPLIER],condition:function condition(e){return!e.isDone()}},n=o.get(e,t);return this._pollers.push(n),n},AnalysisPoller.prototype.reset=function(){o.reset(),this._pollers=[]},e.exports=AnalysisPoller},function(e,t,n){n(23);var r=n(1),i=n(606),o=function InfowindowManager(e,t){if(e=e||{},t=t||{},!e.engine)throw new Error("engine is required");if(!e.mapModel)throw new Error("mapModel is required");if(!e.infowindowModel)throw new Error("infowindowModel is required");if(!e.tooltipModel)throw new Error("tooltipModel is required");this._engine=e.engine,this._mapModel=e.mapModel,this._infowindowModel=e.infowindowModel,this._tooltipModel=e.tooltipModel,this._showEmptyFields=!!t.showEmptyFields,this._cartoDBLayerGroupView=null,this._cartoDBLayerModel=null,this.currentFeatureUniqueId=null,this._mapModel.on("change:popupsEnabled",this._onPopupsEnabledChanged,this)};o.prototype.start=function(e){this._cartoDBLayerGroupView=e,e.on("featureClick",this._onFeatureClicked,this)},o.prototype.stop=function(){this._cartoDBLayerGroupView&&(this._cartoDBLayerGroupView.off("featureClick",this._onFeatureClicked,this),delete this._cartoDBLayerGroupView),this._cartoDBLayerModel&&(this._unbindLayerModel(),delete this._cartoDBLayerModel)},o.prototype._onFeatureClicked=function(e){this._unbindLayerModel(),this._cartoDBLayerModel=e.layer;var t=e.feature.cartodb_id,n=e.latlng;this._mapModel.arePopupsEnabled()&&this._cartoDBLayerModel.infowindow.hasTemplate()&&(this._tooltipModel.hide(),this._updateInfowindowModel(this._cartoDBLayerModel.infowindow),this._infowindowModel.setLatLng(n),this._showInfowindow(t),this._fetchAttributes(t))},o.prototype._showInfowindow=function(e){this._bindLayerModel(),this._infowindowModel.show(),this._infowindowModel.setCurrentFeatureId(e)},o.prototype._hideInfowindow=function(){this._unbindLayerModel(),this._infowindowModel.hide(),this._infowindowModel.unsetCurrentFeatureId()},o.prototype._fetchAttributes=function(e){var t,n=this._cartoDBLayerGroupView.model.getIndexOfLayerInLayerGroup(this._cartoDBLayerModel),i=this._generateFeatureUniqueId(n,e);this._currentFeatureId=e||this._currentFeatureId,this._infowindowModel.setLoading(),this.currentFeatureUniqueId=i,this._cartoDBLayerGroupView.model.fetchAttributes(n,this._currentFeatureId,r(t=function _context(e){i===this.currentFeatureUniqueId&&(e?this._infowindowModel.updateContent(e,{showEmptyFields:this._showEmptyFields}):this._infowindowModel.setError())}).call(t,this))},o.prototype._bindLayerModel=function(){this._cartoDBLayerModel.on("destroy",this._hideInfowindow,this),this._cartoDBLayerModel.on("change:visible",this._hideInfowindow,this),this._cartoDBLayerModel.infowindow.on("change",this._updateInfowindowModel,this),this._cartoDBLayerModel.infowindow.fields.on("reset",this._onInfowindowTemplateFieldsReset,this),this._engine.on(i.Events.RELOAD_SUCCESS,this._onReloaded,this)},o.prototype._unbindLayerModel=function(){this._cartoDBLayerModel&&(this._cartoDBLayerModel.off("destroy",this._hideInfowindow,this),this._cartoDBLayerModel.off("change:visible",this._hideInfowindow,this),this._cartoDBLayerModel.infowindow.off("change",this._updateInfowindowModel,this),this._cartoDBLayerModel.infowindow.fields.off("reset",this._onInfowindowTemplateFieldsReset,this),this._engine.off(i.Events.RELOAD_SUCCESS,this._onReloaded,this))},o.prototype._updateInfowindowModel=function(e){this._infowindowModel.setInfowindowTemplate(e)},o.prototype._onInfowindowTemplateFieldsReset=function(){this._cartoDBLayerModel.infowindow.hasFields()?this._updateInfowindowModel(this._cartoDBLayerModel.infowindow):this._hideInfowindow()},o.prototype._onReloaded=function(){this._cartoDBLayerModel&&this._cartoDBLayerModel.infowindow.hasFields()&&this._fetchAttributes()},o.prototype._onPopupsEnabledChanged=function(){this._mapModel.arePopupsDisabled()&&this._hideInfowindow()},o.prototype._generateFeatureUniqueId=function(e,t){return[e,t].join("_")},e.exports=o},function(e,t,n){var r=window||root,i=i||r.jQuery||n(9);(function(n){var r=0,i=function(e,t,n,i){this.$=e,this.$el=t,this.points=n,this.svgDefId="clipPathPolygonGenId"+r++,this.processOptions(i)};void 0!==e&&e.exports&&(t=e.exports=i),t.ClipPath=i,i.prototype={$:null,$el:null,points:null,isForWebkit:!0,isForSvg:!0,svgDefId:null,isPercentage:!1,create:function(){this._createClipPath(this.points)},_createClipPath:function(e){this._createSvgDefs(),this.isForSvg&&this._createSvgBasedClipPath(e),this.isForWebkit&&this._createWebkitClipPath(e)},_createWebkitClipPath:function(e){var t="polygon("+this._translatePoints(e,!0,this.isPercentage)+")";this.$el.css("-webkit-clip-path",t)},_createSvgBasedClipPath:function(e){this.$("#"+this.svgDefId).find("polygon").attr("points",this._translatePoints(e,!1,this.isPercentage)),this.$el.css("clip-path","url(#"+this.svgDefId+")")},_translatePoints:function(e,t,n){var r=[];for(var i in e){var o=this._handlePxs(e[i][0],t,n),a=this._handlePxs(e[i][1],t,n);r.push(o+" "+a)}return r.join(", ")},_handlePxs:function(e,t,n){return 0===e?e:t?e+(n?"%":"px"):n?e/100:e},_createSvgElement:function(e){return this.$(document.createElementNS("http://www.w3.org/2000/svg",e))},_createSvgDefs:function(){if(0===this.$("#"+this.svgDefId).length){var e=this._createSvgElement("svg").attr("width",0).attr("height",0).css({position:"absolute",visibility:"hidden",width:0,height:0}),t=this._createSvgElement("defs");e.append(t);var n=this._createSvgElement("clipPath").attr("id",this.svgDefId);this.isPercentage&&n.get(0).setAttribute("clipPathUnits","objectBoundingBox"),t.append(n);var r=this._createSvgElement("polygon");n.append(r),this.$("body").append(e)}},processOptions:function(e){this.isForWebkit=e&&void 0!==e.isForWebkit?e.isForWebkit:this.isForWebkit,this.isForSvg=e&&void 0!==e.isForSvg?e.isForSvg:this.isForSvg,this.isPercentage=e&&e.isPercentage||this.isPercentage,this.svgDefId=e&&e.svgDefId||this.svgDefId}},n.fn.clipPath=function(e,t){return this.each(function(){var r=n(this);new i(n,r,e,t).create()})}}).call(this,i)},function(e,t,n){"use strict";var r=n(191),i=n(269);e.exports=function(e){!function bindNativeScrollHandler(e,t){t.event.bind(e,"scroll",function(){i(e)})}(e,r.get(e))}},function(e,t,n){"use strict";var r=n(247),i=n(191),o=n(269),a=n(300);function bindSelectionHandler(e,t){var n=null,s={top:0,left:0};function stopScrolling(){n&&(clearInterval(n),n=null),r.stopScrolling(e)}var l=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(function getRangeNode(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}())?l=!0:(l=!1,stopScrolling())}),t.event.bind(window,"mouseup",function(){l&&(l=!1,stopScrolling())}),t.event.bind(window,"keyup",function(){l&&(l=!1,stopScrolling())}),t.event.bind(window,"mousemove",function(t){if(l){var u={x:t.pageX,y:t.pageY},c={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};u.x<c.left+3?(s.left=-5,r.startScrolling(e,"x")):u.x>c.right-3?(s.left=5,r.startScrolling(e,"x")):s.left=0,u.y<c.top+3?(s.top=c.top+3-u.y<5?-5:-20,r.startScrolling(e,"y")):u.y>c.bottom-3?(s.top=u.y-c.bottom+3<5?5:20,r.startScrolling(e,"y")):s.top=0,0===s.top&&0===s.left?stopScrolling():function startScrolling(){n||(n=setInterval(function(){i.get(e)?(a(e,"top",e.scrollTop+s.top),a(e,"left",e.scrollLeft+s.left),o(e)):clearInterval(n)},50))}()}})}e.exports=function(e){bindSelectionHandler(e,i.get(e))}},function(e,t,n){"use strict";var r=n(247),i=n(191),o=n(269),a=n(300);function bindTouchHandler(e,t,n,r){function applyTouchMove(t,n){a(e,"top",e.scrollTop-n),a(e,"left",e.scrollLeft-t),o(e)}var s={},l=0,u={},c=null,d=!1,f=!1;function globalTouchStart(){d=!0}function globalTouchEnd(){d=!1}function getTouch(e){return e.targetTouches?e.targetTouches[0]:e}function shouldHandle(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function touchStart(e){if(shouldHandle(e)){f=!0;var t=getTouch(e);s.pageX=t.pageX,s.pageY=t.pageY,l=(new Date).getTime(),null!==c&&clearInterval(c),e.stopPropagation()}}function touchMove(n){var r=n.target;if(!(r&&r.getAttribute&&r.getAttribute("class")||"").match(/ps-prevent-touchmove/)&&(!f&&t.settings.swipePropagation&&touchStart(n),!d&&f&&shouldHandle(n))){var i=getTouch(n),o={pageX:i.pageX,pageY:i.pageY},a=o.pageX-s.pageX,c=o.pageY-s.pageY;applyTouchMove(a,c),s=o;var h=(new Date).getTime(),p=h-l;p>0&&(u.x=a/p,u.y=c/p,l=h),function shouldPreventDefault(n,r){var i=e.scrollTop,o=e.scrollLeft,a=Math.abs(n),s=Math.abs(r);if(s>a){if(r<0&&i===t.contentHeight-t.containerHeight||r>0&&0===i)return!t.settings.swipePropagation}else if(a>s&&(n<0&&o===t.contentWidth-t.containerWidth||n>0&&0===o))return!t.settings.swipePropagation;return!0}(a,c)&&(n.stopPropagation(),n.preventDefault())}}function touchEnd(){!d&&f&&(f=!1,clearInterval(c),c=setInterval(function(){i.get(e)&&(u.x||u.y)?Math.abs(u.x)<.01&&Math.abs(u.y)<.01?clearInterval(c):(applyTouchMove(30*u.x,30*u.y),u.x*=.8,u.y*=.8):clearInterval(c)},10))}n?(t.event.bind(window,"touchstart",globalTouchStart),t.event.bind(window,"touchend",globalTouchEnd),t.event.bind(e,"touchstart",touchStart),t.event.bind(e,"touchmove",touchMove),t.event.bind(e,"touchend",touchEnd)):r&&(window.PointerEvent?(t.event.bind(window,"pointerdown",globalTouchStart),t.event.bind(window,"pointerup",globalTouchEnd),t.event.bind(e,"pointerdown",touchStart),t.event.bind(e,"pointermove",touchMove),t.event.bind(e,"pointerup",touchEnd)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",globalTouchStart),t.event.bind(window,"MSPointerUp",globalTouchEnd),t.event.bind(e,"MSPointerDown",touchStart),t.event.bind(e,"MSPointerMove",touchMove),t.event.bind(e,"MSPointerUp",touchEnd)))}e.exports=function(e){(r.env.supportsTouch||r.env.supportsIePointer)&&bindTouchHandler(e,i.get(e),r.env.supportsTouch,r.env.supportsIePointer)}},function(e,t,n){"use strict";var r=n(191),i=n(269),o=n(300);function bindMouseWheelHandler(e,t){var n=!1;function mousewheelHandler(r){var a=function getDeltaFromEvent(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(r),s=a[0],l=a[1];(function shouldBeConsumedByChild(t,n){var r=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(r){if(!window.getComputedStyle(r).overflow.match(/(scroll|auto)/))return!1;var i=r.scrollHeight-r.clientHeight;if(i>0&&!(0===r.scrollTop&&n>0||r.scrollTop===i&&n<0))return!0;var o=r.scrollLeft-r.clientWidth;if(o>0&&!(0===r.scrollLeft&&t<0||r.scrollLeft===o&&t>0))return!0}return!1})(s,l)||(n=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(o(e,"top",l?e.scrollTop-l*t.settings.wheelSpeed:e.scrollTop+s*t.settings.wheelSpeed),n=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(o(e,"left",s?e.scrollLeft+s*t.settings.wheelSpeed:e.scrollLeft-l*t.settings.wheelSpeed),n=!0):(o(e,"top",e.scrollTop-l*t.settings.wheelSpeed),o(e,"left",e.scrollLeft+s*t.settings.wheelSpeed)),i(e),(n=n||function shouldPreventDefault(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(s,l))&&(r.stopPropagation(),r.preventDefault()))}void 0!==window.onwheel?t.event.bind(e,"wheel",mousewheelHandler):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",mousewheelHandler)}e.exports=function(e){bindMouseWheelHandler(e,r.get(e))}},function(e,t,n){"use strict";var r=n(247),i=n(335),o=n(191),a=n(269),s=n(300);function bindKeyboardHandler(e,t){var n=!1;t.event.bind(e,"mouseenter",function(){n=!0}),t.event.bind(e,"mouseleave",function(){n=!1});t.event.bind(t.ownerDocument,"keydown",function(o){if(!(o.isDefaultPrevented&&o.isDefaultPrevented()||o.defaultPrevented)){var l=i.matches(t.scrollbarX,":focus")||i.matches(t.scrollbarY,":focus");if(n||l){var u=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(u){if("IFRAME"===u.tagName)u=u.contentDocument.activeElement;else for(;u.shadowRoot;)u=u.shadowRoot.activeElement;if(r.isEditable(u))return}var c=0,d=0;switch(o.which){case 37:c=o.metaKey?-t.contentWidth:o.altKey?-t.containerWidth:-30;break;case 38:d=o.metaKey?t.contentHeight:o.altKey?t.containerHeight:30;break;case 39:c=o.metaKey?t.contentWidth:o.altKey?t.containerWidth:30;break;case 40:d=o.metaKey?-t.contentHeight:o.altKey?-t.containerHeight:-30;break;case 33:d=90;break;case 32:d=o.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=o.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=o.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}s(e,"top",e.scrollTop-d),s(e,"left",e.scrollLeft+c),a(e),function shouldPreventDefault(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(c,d)&&o.preventDefault()}}})}e.exports=function(e){bindKeyboardHandler(e,o.get(e))}},function(e,t,n){"use strict";var r=n(247),i=n(335),o=n(191),a=n(269),s=n(300);function bindMouseScrollXHandler(e,t){var n=null,o=null;var l=function(i){!function updateScrollLeft(i){var o=n+i*t.railXRatio,a=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=o<0?0:o>a?a:o;var l=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;s(e,"left",l)}(i.pageX-o),a(e),i.stopPropagation(),i.preventDefault()},u=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",l)};t.event.bind(t.scrollbarX,"mousedown",function(a){o=a.pageX,n=r.toInt(i.css(t.scrollbarX,"left"))*t.railXRatio,r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",l),t.event.once(t.ownerDocument,"mouseup",u),a.stopPropagation(),a.preventDefault()})}function bindMouseScrollYHandler(e,t){var n=null,o=null;var l=function(i){!function updateScrollTop(i){var o=n+i*t.railYRatio,a=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=o<0?0:o>a?a:o;var l=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));s(e,"top",l)}(i.pageY-o),a(e),i.stopPropagation(),i.preventDefault()},u=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",l)};t.event.bind(t.scrollbarY,"mousedown",function(a){o=a.pageY,n=r.toInt(i.css(t.scrollbarY,"top"))*t.railYRatio,r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",l),t.event.once(t.ownerDocument,"mouseup",u),a.stopPropagation(),a.preventDefault()})}e.exports=function(e){var t=o.get(e);bindMouseScrollXHandler(e,t),bindMouseScrollYHandler(e,t)}},function(e,t,n){"use strict";var r=n(191),i=n(269),o=n(300);e.exports=function(e){!function bindClickRailHandler(e,t){function pageOffset(e){return e.getBoundingClientRect()}var n=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",n),t.event.bind(t.scrollbarYRail,"click",function(n){var r=n.pageY-window.pageYOffset-pageOffset(t.scrollbarYRail).top>t.scrollbarYTop?1:-1;o(e,"top",e.scrollTop+r*t.containerHeight),i(e),n.stopPropagation()}),t.event.bind(t.scrollbarX,"click",n),t.event.bind(t.scrollbarXRail,"click",function(n){var r=n.pageX-window.pageXOffset-pageOffset(t.scrollbarXRail).left>t.scrollbarXLeft?1:-1;o(e,"left",e.scrollLeft+r*t.containerWidth),i(e),n.stopPropagation()})}(e,r.get(e))}},function(e,t,n){"use strict";var r=n(878),i=n(191),o=n(247);e.exports=function(e){i.get(e).event.bind(window,"resize",o.debounce(function(){r(e)},60))}},function(e,t,n){"use strict";var r=n(878),i=window.MutationObserver,o=n(191);e.exports=function(e){if(null!==i&&void 0!==i){var t=o.get(e),n=function(){var t,n;r(e),e.dispatchEvent((t="ps-dom-change",(n=document.createEvent("Event")).initEvent(t,!0,!0),n))};t.observer=new i(n),n();t.observer.observe(e,{childList:!0,subtree:!0})}}},function(e,t,n){"use strict";var r=n(247),i=n(607),o=n(191),a=n(269),s=n(3139),l=n(3138),u={"click-rail":n(3137),"drag-scrollbar":n(3136),keyboard:n(3135),wheel:n(3134),touch:n(3133),selection:n(3132)},c=n(3131);e.exports=function(e,t){t="object"==typeof t?t:{},i.add(e,"ps-container");var n=o.add(e);n.settings=r.extend(n.settings,t),i.add(e,"ps-theme-"+n.settings.theme),n.settings.handlers.forEach(function(t){u[t](e)}),c(e),a(e),n.settings.autoupdate&&(s(e),l(e))}},function(e,t,n){"use strict";e.exports=function(){function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()}}()},function(e,t,n){"use strict";var r=function(e){this.element=e,this.events={}};r.prototype.bind=function(e,t){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},r.prototype.unbind=function(e,t){var n=void 0!==t;this.events[e]=this.events[e].filter(function(r){return!(!n||r===t)||(this.element.removeEventListener(e,r,!1),!1)},this)},r.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var i=function(){this.eventElements=[]};i.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return void 0===t&&(t=new r(e),this.eventElements.push(t)),t},i.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},i.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},i.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},i.prototype.once=function(e,t,n){var r=this.eventElement(e),i=function(e){r.unbind(t,i),n(e)};r.bind(t,i)},e.exports=i},function(e,t,n){"use strict";e.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default",autoupdate:!0}},function(e,t,n){"use strict";var r=n(247),i=n(335),o=n(191);e.exports=function(e){var t=o.get(e);t&&(t.observer&&t.observer.disconnect(),t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),r.removePsClasses(e),o.remove(e))}},function(e,t,n){"use strict";var r=n(3144),i=n(3140),o=n(878);e.exports={initialize:i,update:o,destroy:r}},function(e,t,n){var r=n(376),i=n(1367),o=r.extend({GeometryViewClass:i});e.exports=o},function(e,t,n){var r=n(376),i=n(1369),o=r.extend({GeometryViewClass:i});e.exports=o},function(e,t,n){var r=n(376),i=n(608),o=r.extend({GeometryViewClass:i});e.exports=o},function(e,t,n){var r=n(18),i=n(1374),o=function GMapsMarkerAdapter(e){this._listeners={},this._nativeMarker=e};(o.prototype=new i).constructor=o,o.prototype.addToMap=function(e){this._nativeMarker.setMap(e)},o.prototype.removeFromMap=function(e){this._nativeMarker.setMap(null)},o.prototype.isAddedToMap=function(e){return!!this._nativeMarker.getMap()},o.prototype.getCoordinates=function(){var e=this._nativeMarker.getPosition();return{lat:e.lat(),lng:e.lng()}},o.prototype.setCoordinates=function(e){var t=new google.maps.LatLng(e[0],e[1]);this._nativeMarker.setPosition(t)},o.prototype.isDraggable=function(){return this._nativeMarker.getDraggable()},o.prototype.getIconURL=function(){return this._nativeMarker.getIcon()&&this._nativeMarker.getIcon().url||this._nativeMarker.getIcon()},o.prototype.setIconURL=function(e,t){var n={url:e,origin:new google.maps.Point(0,0),anchor:new google.maps.Point(t[0],t[1])};this._nativeMarker.setIcon(n)},o.prototype.on=function(e,t){var n=this._nativeMarker.addListener(e,t);this._listeners[e]=n},o.prototype.off=function(e){var t=this._listeners[e];google.maps.event.removeListener(t)},o.prototype.trigger=function(e){var t=r(Array.prototype).call(arguments,1);google.maps.event.trigger(this._nativeMarker,e,t)},e.exports=o},function(e,t,n){var r=n(376),i=n(1370),o=r.extend({GeometryViewClass:i});e.exports=o},function(e,t,n){var r=n(376),i=n(1373),o=r.extend({GeometryViewClass:i});e.exports=o},function(e,t,n){var r=n(376),i=n(610),o=r.extend({GeometryViewClass:i});e.exports=o},function(e,t,n){var r=n(1374),i=function LeafletMarkerAdapter(e){this._nativeMarker=e};(i.prototype=new r).constructor=i,i.prototype.addToMap=function(e){e.addLayer(this._nativeMarker)},i.prototype.removeFromMap=function(e){e.removeLayer(this._nativeMarker)},i.prototype.isAddedToMap=function(e){return e.hasLayer(this._nativeMarker)},i.prototype.getCoordinates=function(){var e=this._nativeMarker.getLatLng();return{lat:e.lat,lng:e.lng}},i.prototype.setCoordinates=function(e){this._nativeMarker.setLatLng(e)},i.prototype.isDraggable=function(){return this._nativeMarker.options.draggable},i.prototype.getIconURL=function(){return this._nativeMarker.options.icon.options.iconUrl},i.prototype.setIconURL=function(e){this._nativeMarker._icon.src=e,this._nativeMarker.options.icon.options.iconUrl=e},i.prototype.on=function(){this._nativeMarker.on.apply(this._nativeMarker,arguments)},i.prototype.off=function(){this._nativeMarker.off.apply(this._nativeMarker,arguments)},i.prototype.trigger=function(){this._nativeMarker.fire.apply(this._nativeMarker,arguments)},e.exports=i},function(e,t,n){var r=n(0),i=n(377),o=n(884),a=n(883),s=n(1378),l=n(1377),u=n(1376),c=n(302),d=function createPoint(e,t){return new i(e,t)},f=function createPolyline(e,t){return new o(e,t)},h=function createPolygon(e,t){return new a(e,t)},p=function createMultiPoint(e,t){return new s(e,t)},m=function createMultiPolygon(e,t){return new l(e,t)},g=function createMultiPolyline(e,t){return new u(e,t)},v={Point:function createPointFromGeoJSON(e,t){var n=c.getPointLatLngFromGeoJSONCoords(e);return d(r.extend({},t,{latlng:n}))},LineString:function createPolylineFromGeoJSON(e,t){var n=c.getPolylineLatLngsFromGeoJSONCoords(e);return f(t,{latlngs:n})},Polygon:function createPolygonFromGeoJSON(e,t){var n=c.getPolygonLatLngsFromGeoJSONCoords(e);return h(t,{latlngs:n})},MultiPoint:function createMultiPointFromGeoJSON(e,t){var n=c.getMultiPointLatLngsFromGeoJSONCoords(e);return p(t,{latlngs:n})},MultiPolygon:function createMultiPolygonFromGeoJSON(e,t){var n=c.getMultiPolygonLatLngsFromGeoJSONCoords(e);return m(t,{latlngs:n})},MultiLineString:function createMultiPolylineFromGeoJSON(e,t){var n=c.getMultiPolylineLatLngsFromGeoJSONCoords(e);return g(t,{latlngs:n})}};e.exports={createPoint:d,createPolyline:f,createPolygon:h,createMultiPoint:p,createMultiPolyline:g,createMultiPolygon:m,createGeometryFromGeoJSON:function createGeometryFromGeoJSON(e,t){var n=c.getGeometryType(e),r=v[n];if(r)return r(e,t);throw new Error("Geometries of type "+n+" are not supported yet")}}},function(e,t,n){var r=n(3).Model.extend({VERSION:4,initialize:function initialize(){},REPORT_ERROR_URL:"/api/v0/error",ERROR_TRACK_ENABLED:!1});e.exports=r},function(e,t,n){var r=n(1382),i=n(377),o=n(884),a=n(883),s=n(1378),l=n(1377),u=n(1376),c=n(610),d=n(1373),f=n(1370),h=n(3152),p=n(3151),m=n(3150),g=function getLeafletGeometryViewForGeometry(e){var t;return e instanceof i?t=c:e instanceof o?t=f:e instanceof a?t=d:e instanceof s?t=h:e instanceof u?t=m:e instanceof l&&(t=p),t},v=n(608),y=n(1369),_=n(1367),b=n(3148),w=n(3147),x=n(3146),C=function getGoogleMapsGeometryViewForGeometry(e){var t;return e instanceof i?t=v:e instanceof o?t=_:e instanceof a?t=y:e instanceof s?t=b:e instanceof u?t=x:e instanceof l&&(t=w),t},S={createGeometryView:function createGeometryView(e,t,n){var i=function getGeometryViewForGeometry(e,t){var n;if(e===r.PROVIDERS.GMAPS)n=C(t);else{if(e!==r.PROVIDERS.LEAFLET)throw new Error("unknown provider: '"+e);n=g(t)}return n}(e,t);if(i)return new i({model:t,mapView:n});throw new Error(t.get("type")+" is not supported yet")}};e.exports=S},function(e,t,n){n(23),n(16),n(68),n(35);var r=n(21),i=n(1),o=n(5),a=n(9),s=n(0),l=n(1383),u=n(3098),c=l.extend({_createNativeMap:function _createNativeMap(){var e,t,n,r=this,a=o(this).get("center"),s={zoomControl:!1,center:new L.LatLng(a[0],a[1]),zoom:o(this).get("zoom"),minZoom:o(this).get("minZoom"),maxZoom:o(this).get("maxZoom"),dragging:!!o(this).get("drag"),doubleClickZoom:!!o(this).get("drag"),scrollWheelZoom:!!o(this).get("scrollwheel"),keyboard:!!o(this).get("keyboard"),attributionControl:!1,zoomAnimationThreshold:1e3};this._leafletMap=new L.Map(this.el,s),i(e=o(this)).call(e,"set_view",this._setView,this),this._leafletMap.on("layeradd",function(e){this.trigger("layeradd",e,r)},this),this._leafletMap.on("zoomstart",function(){r.trigger("zoomstart")}),this._leafletMap.on("click",function(e){r.trigger("click",e.originalEvent,[e.latlng.lat,e.latlng.lng])}),this._leafletMap.on("dblclick",function(e){r.trigger("dblclick",e.originalEvent)}),this._leafletMap.on("zoomend",function(){r._setModelProperty({zoom:r._leafletMap.getZoom()}),r.trigger("zoomend")},this),this._leafletMap.on("dragend",function(){var e=r._leafletMap.getCenter();this.trigger("dragend",[e.lat,e.lng])},this),this._leafletMap.on("moveend",function(){var e=r._leafletMap.getCenter();r._setModelProperty({center:[e.lat,e.lng]}),o(r).trigger("moveend",[e.lat,e.lng])},this),this._leafletMap.on("drag",function(){var e=r._leafletMap.getCenter();r._setModelProperty({center:[e.lat,e.lng]}),r.trigger("drag")},this),this._leafletMap.on("resize",function(){o(this).setMapViewSize(this.getSize())},this),i(t=o(this)).call(t,"change:maxZoom",function(){L.Util.setOptions(r._leafletMap,{maxZoom:o(r).get("maxZoom")})},this),i(n=o(this)).call(n,"change:minZoom",function(){L.Util.setOptions(r._leafletMap,{minZoom:o(r).get("minZoom")})},this)},_getLayerViewFactory:function _getLayerViewFactory(){return this._layerViewFactory=this._layerViewFactory||new u,this._layerViewFactory},_addLayers:function _addLayers(e,t){var n=this,i=this._layerViews;function canReused(e){var t;return r(t=o(n).layers).call(t,function(t){return t.isEqual(e)})}for(var a in this._layerViews={},i){var l=i[a];canReused(l.model)||l.remove()}o(this).layers.each(function(o){var a=function findLayerView(e){return r(s).call(s,i,function(t){return t.model.isEqual(e)})}(o);a?(a.setModel(o),n._layerViews[o.cid]=a):n._addLayer(o,e,{silent:t&&t.silent||!1,index:t&&t.index})})},clean:function clean(){L.DomEvent.off(window,"resize",this._leafletMap._onResize,this._leafletMap),this._leafletMap.remove(),l.prototype.clean.call(this)},_setKeyboard:function _setKeyboard(e,t){t?this._leafletMap.keyboard.enable():this._leafletMap.keyboard.disable()},_setScrollWheel:function _setScrollWheel(e,t){t?this._leafletMap.scrollWheelZoom.enable():this._leafletMap.scrollWheelZoom.disable()},_setZoom:function _setZoom(e,t){this._setView()},_setCenter:function _setCenter(e,t){this._setView()},_setView:function _setView(){(o(this).hasChanged("zoom")||o(this).hasChanged("center"))&&this._leafletMap.setView(o(this).get("center"),o(this).get("zoom")||0)},_getNativeMap:function _getNativeMap(){return this._leafletMap},_addLayerToMap:function _addLayerToMap(e){this._leafletMap.addLayer(e.leafletLayer),this._reorderLayerViews()},_reorderLayerViews:function _reorderLayerViews(){o(this).layers.each(function(e){var t=this.getLayerViewByLayerCid(e.cid);t&&t.setZIndex(e.get("order"))},this)},onReady:function onReady(e){e()},getBounds:function getBounds(){var e=this._leafletMap.getBounds(),t=e.getSouthWest(),n=e.getNorthEast();return[[t.lat,t.lng],[n.lat,n.lng]]},getSize:function getSize(){return this._leafletMap.getSize()},panBy:function panBy(e){this._leafletMap.panBy(new L.Point(e.x,e.y))},setCursor:function setCursor(e){a(this._leafletMap.getContainer()).css("cursor",e)},getNativeMap:function getNativeMap(){return this._leafletMap},invalidateSize:function invalidateSize(){var e=o(this).get("center"),t=o(this).get("zoom");this._leafletMap.invalidateSize({pan:!1,animate:!1}),this._leafletMap.setView(e,t,{pan:!1,animate:!1}),o(this).setMapViewSize(this.getSize())},addMarker:function addMarker(e){e.addToMap(this.getNativeMap())},removeMarker:function removeMarker(e){e.removeFromMap(this.getNativeMap())},hasMarker:function hasMarker(e){return e.isAddedToMap(this.getNativeMap())},addPath:function addPath(e){e.addToMap(this.getNativeMap())},removePath:function removePath(e){e.removeFromMap(this.getNativeMap())},latLngToContainerPoint:function latLngToContainerPoint(e){var t=this.getNativeMap().latLngToContainerPoint(e);return{x:t.x,y:t.y}},containerPointToLatLng:function containerPointToLatLng(e){var t=this.getNativeMap().containerPointToLatLng([e.x,e.y]);return{lat:t.lat,lng:t.lng}}});L.Icon.Default.imagePath=function(){var e,t,n,r=document.getElementsByTagName("script"),i=/\/?cartodb[\-\._]?([\w\-\._]*)\.js\??/;for(e=0,t=r.length;e<t;e++)if((n=r[e].src).match(i)){var o=n.split("/");return delete o[o.length-1],o.join("/")+"themes/css/images"}}(),e.exports=c},function(e,t,n){var r,i=n(5),o=n(3157);function MapViewFactory(){}function _generateOptions(e){return{showEmptyInfowindowFields:e.get("showEmptyInfowindowFields"),showLimitErrors:e.get("showLimitErrors"),mapModel:i(e),engine:e.getEngine(),layerGroupModel:e.getEngine().getLayerGroup()}}window.google&&window.google.maps&&(r=n(2984)),MapViewFactory.createMapView=function(e,t){switch(e){case"leaflet":return function _createLeafletMap(e){return new o(_generateOptions(e))}(t);case"googlemaps":return function _createGoogleMap(e){if(!r)throw new Error("Google maps library should be included");return new r(_generateOptions(e))}(t);default:throw new Error(e+" provider is not supported")}},e.exports=MapViewFactory},function(e,t,n){var r=n(37),i=n(1),o=n(5),a=n(0),s=n(9),l=n(152),u=n(3158),c=n(2973),d=n(2964),f=l.extend({initialize:function initialize(e){this.model.once("reloaded",this.render,this),this.model.on("invalidateSize",this._invalidateSize,this),this._overlaysCollection=this.model.overlaysCollection,this.settingsModel=e.settingsModel,a.bindAll(this,"_onResize")},render:function render(){var e;(o(this.model).off("change:provider",this.render,this),o(this.model).on("change:provider",this.render,this),this._cleanMapView(),this._renderMapView(),this._cleanLegendsView(),this._renderLegendsView(),this._cleanOverlaysView(),this._renderOverlaysView(),0===this.$el.outerHeight())&&i(e=s(window)).call(e,"resize",this._onResize)},_renderMapView:function _renderMapView(){this.mapView=u.createMapView(o(this.model).get("provider"),this.model),this.$el.html(this.mapView.el),this.listenTo(this.mapView,"newLayerView",this._bindLayerViewToLoader),this.listenTo(this.mapView,"click",function(){this.model.trigger("click")}),this.mapView.render()},_cleanMapView:function _cleanMapView(){this.mapView&&this.mapView.clean()},_renderLegendsView:function _renderLegendsView(){this._legendsView=new c({layersCollection:o(this.model).layers,settingsModel:this.settingsModel}),this.$el.append(this._legendsView.render().$el),this.addView(this._legendsView);var e=s(".js-embed-legends");e.length&&(this._embedLegendsView=new c({layersCollection:o(this.model).layers,settingsModel:this.settingsModel}),e.append(this._embedLegendsView.render().$el),this.addView(this._embedLegendsView))},_cleanLegendsView:function _cleanLegendsView(){this._legendsView&&this._legendsView.clean()},_renderOverlaysView:function _renderOverlaysView(){this._overlaysView=new d({engine:this.model._engine,visView:this,mapModel:o(this.model),mapView:this.mapView,overlaysCollection:this._overlaysCollection}),this.$el.append(this._overlaysView.render().$el)},_cleanOverlaysView:function _cleanOverlaysView(){this._overlaysView&&this._overlaysView.clean()},_bindLayerViewToLoader:function _bindLayerViewToLoader(e){i(e).call(e,"load",function(){this.model.untrackLoadingObject(e)},this),i(e).call(e,"loading",function(){this.model.trackLoadingObject(e)},this)},_invalidateSize:function _invalidateSize(){this.mapView.invalidateSize()},_onResize:function _onResize(){s(window).unbind("resize",this._onResize);var e=this;r(function(){e.model.invalidateSize()},150)}});e.exports=f},function(e,t,n){n(196),n(195);var r=n(216),i=n(55),o=n(0),a=n(3159),s=n(2942),l=n(2879),u=n(2878),c={tiles_loader:!0,loaderControl:!0,infowindow:!0,tooltip:!0,logo:!0,show_empty_infowindow_fields:!1,showLimitErrors:!1,interactiveFeatures:!1},d=function loadVizJSON(e,t,n,r){var i=new u(n);f(i,r);var a=!0;o.isBoolean(r.legends)?a=r.legends:i.options&&o.isBoolean(i.options.legends)&&(a=i.options.legends);var s=!0;o.isBoolean(r.layer_selector)?s=r.layer_selector:i.options&&o.isBoolean(i.options.layer_selector)&&(s=i.options.layer_selector);var l=!0;o.isBoolean(r.layerSelectorEnabled)&&(l=r.layerSelectorEnabled),t.set({title:i.title,description:i.description,https:t.get("https")||!0===i.https}),t.setSettings({showLegends:a,showLayerSelector:s,layerSelectorEnabled:l}),t.load(i),r.skipMapInstantiation||t.instantiateMap()},f=function applyOptionsToVizJSON(e,t){e.options=e.options||{},e.options.scrollwheel=o.isBoolean(t.scrollwheel)?t.scrollwheel:e.options.scrollwheel,t.tiles_loader&&t.loaderControl||e.removeLoaderOverlay(),!0===t.searchControl?e.addSearchOverlay():!1===t.searchControl&&e.removeSearchOverlay(),(t.title&&e.title||t.description&&e.description)&&e.addHeaderOverlay(t.title,t.description,t.shareable),void 0===t.zoomControl||t.zoomControl||e.removeZoomOverlay(),!1===t.logo&&e.removeLogoOverlay(),o.has(t,"vector")&&e.setVector(t.vector);var n=i(t.zoom,10);isNaN(n)||e.setZoom(n);var a=r(t.center_lat),s=r(t.center_lon);isNaN(a)||isNaN(s)||e.setCenter([a,s]),void 0!==t.center&&e.setCenter(t.center);var l=r(t.sw_lat),u=r(t.sw_lon),c=r(t.ne_lat),d=r(t.ne_lon);isNaN(l)||isNaN(u)||isNaN(c)||isNaN(d)||e.setBounds([[l,u],[c,d]]),t.gmaps_base_type&&e.enforceGMapsBaseLayer(t.gmaps_base_type,t.gmaps_style)};e.exports=function createVis(e,t,n){if("string"==typeof e&&(e=document.getElementById(e)),!e)throw new TypeError("a valid DOM element or selector must be provided");if(!t)throw new TypeError("a vizjson URL or object must be provided");var r=window&&window.location.protocol&&"https:"===window.location.protocol;n=o.defaults(n||{},c);var i=new s({apiKey:n.apiKey,authToken:n.authToken,showEmptyInfowindowFields:!0===n.show_empty_infowindow_fields,showLimitErrors:!0===n.showLimitErrors,https:r||!0===n.https,interactiveFeatures:n.interactiveFeatures});if(new a({el:e,model:i,settingsModel:i.settings}),"string"==typeof t){var u=t;l.get(u,function(t){if(!t)throw new Error("error fetching viz.json file");d(e,i,t,n)})}else d(e,i,t,n);return i}},function(e,t,n){var r=n(1),i=n(0),o=n(3);function Promise(){}i.extend(Promise.prototype,o.Events,{done:function done(e){var t;return r(t=this).call(t,"done",e)},error:function error(e){var t;return r(t=this).call(t,"error",e)}}),e.exports=Promise},function(e,t,n){n(436),n(23),n(16),n(68),n(25),n(35);var r=n(11),i=n(5),o=n(1),a=n(37),s=n(10),l=n(18),u=n(0),c=n(9),d=n(1385),f=n(3161);function SQL(e){if(window.cdb===this||window===this)return new SQL(e);if(!e.user)throw new Error("user should be provided");var t=String(window.location.protocol);if("file"===(t=l(t).call(t,0,t.length-1))&&(t="https"),this.options=u.defaults(e,{version:"v2",protocol:t,jsonp:!c.support.cors,abortable:!1}),!this.options.sql_api_template){var n=this.options,r=null;if(n&&n.completeDomain)r=n.completeDomain;else{var i=n.host||"carto.com";r=(n.protocol||"https")+"://{user}."+i}this.options.sql_api_template=r}}function arrayAgg(e){return JSON.parse(e.replace(/^{/,"[").replace(/}$/,"]"))}SQL.prototype._host=function(){var e=this.options;return e.sql_api_template.replace("{user}",e.user)+"/api/"+e.version+"/sql"},SQL.prototype.execute=function(e,t,n,r){var i,l=new f;if(!e)throw new TypeError("sql should not be null");var h=arguments,p=h[h.length-1];u.isFunction(p)&&(r=p),n=u.defaults(n||{},this.options);var m={type:"get",dataType:"json",crossDomain:!0};this._xhr&&!0===this.options.abortable&&this._xhr.abort(),void 0!==n.cache&&(m.cache=n.cache),n.jsonp&&(delete m.crossDomain,n.jsonpCallback&&(m.jsonpCallback=n.jsonpCallback),m.dataType="jsonp");var g="156543.03515625";e=e.replace("!bbox!","ST_MakeEnvelope(-20037508.5,-20037508.5,20037508.5,20037508.5,3857)").replace("!pixel_width!",g).replace("!pixel_height!",g);var v,y,_,b=d.render(e,t),w=b.length<1024,x=["format","dp","api_key"];if(n.extra_params&&(x=s(x).call(x,n.extra_params)),m.url=this._host(),w){var C="q="+encodeURIComponent(b);for(v in x)null!=(_=n[y=x[v]])&&(C+="&"+y+"="+_);m.url+="?"+C}else{var S={q:b};for(v in x)null!=(_=n[y=x[v]])&&(S[y]=_);m.data=S,m.type="post"}var k=n.success,T=n.error;return k&&delete n.success,T&&delete T.success,m.error=function(e){var t=e.responseText||e.response,n=t&&JSON.parse(t);l.trigger("error",n&&n.error,e),T&&T(e),r&&r(e)},m.success=function(e,t,n){void 0===t&&(t=e.status,n=e,e=JSON.parse(e.response)),a(function(){l.trigger("done",e,t,n),k&&k(e,t,n),r&&r(null,e)},0)},m.complete=o(i=function _context(){this._xhr=null}).call(i,this),delete n.jsonp,this._xhr=c.ajax(u.extend(m,n)),l},SQL.prototype.getBounds=function(e,t,n,r){var i=new f,o=arguments,a=o[o.length-1];u.isFunction(a)&&(r=a);return e=d.render(e,t),this.execute("SELECT ST_XMin(ST_Extent(the_geom)) as minx,       ST_YMin(ST_Extent(the_geom)) as miny,       ST_XMax(ST_Extent(the_geom)) as maxx,       ST_YMax(ST_Extent(the_geom)) as maxy from ({{{ sql }}}) as subq",{sql:e},n).done(function(e){if(e.rows&&e.rows.length>0&&null!=e.rows[0].maxx){var t=e.rows[0],n=function clamp(e,t,n){return e<t?t:e>n?n:e},o=n(t.maxx,-179,179),a=n(t.minx,-179,179),s=[[n(t.maxy,-85.0511,85.0511),o],[n(t.miny,-85.0511,85.0511),a]];i.trigger("done",s),r&&r(null,s)}else{var l=["No bounds"];i.trigger("error",l),r&&r(l)}}).error(function(e){i.trigger("error",e),r&&r(e)}),i},SQL.prototype.table=function(e){var t,n,r,i,o=e,a=[],s=this;function _table(){_table.fetch.apply(_table,arguments)}return _table.fetch=function(e){e=e||{};var t=arguments,n=t[t.length-1];u.isFunction(n)&&1===t.length&&(e={}),s.execute(_table.sql(),e,n)},_table.sql=function(){var e="select";return a.length?e+=" "+a.join(",")+" ":e+=" * ",e+="from "+o,t&&(e+=" where "+t),n&&(e+=" limit "+n),r&&(e+=" order by "+r),i&&(e+=" "+i),e},_table.filter=function(e){return t=e,_table},_table.order_by=function(e){return r=e,_table},_table.asc=function(){return i="asc",_table},_table.desc=function(){return i="desc",_table},_table.columns=function(e){return a=e,_table},_table.limit=function(e){return n=e,_table},_table},SQL.prototype.describeString=function(e,t,n){var r=d.render(["WITH t as (","        SELECT count(*) as total,","               count(DISTINCT {{column}}) as ndist","        FROM ({{sql}}) _wrap","      ), a as (","        SELECT ","          count(*) cnt, ","          {{column}}","        FROM ","          ({{sql}}) _wrap ","        GROUP BY ","          {{column}} ","        ORDER BY ","          cnt DESC","        ), b As (","         SELECT","          row_number() OVER (ORDER BY cnt DESC) rn,","          cnt","         FROM a","        ), c As (","        SELECT ","          sum(cnt) OVER (ORDER BY rn ASC) / t.total cumperc,","          rn,","          cnt ","         FROM b, t","         LIMIT 10","         ),","stats as (","select count(distinct({{column}})) as uniq, ","       count(*) as cnt, ","       sum(case when COALESCE(NULLIF({{column}},'')) is null then 1 else 0 end)::numeric as null_count, ","       sum(case when COALESCE(NULLIF({{column}},'')) is null then 1 else 0 end)::numeric / count(*)::numeric as null_ratio, ","       (SELECT max(cumperc) weight FROM c) As skew ","from ({{sql}}) __wrap","),","hist as (","select array_agg(row(d, c)) array_agg from (select distinct({{column}}) d, count(*) as c from ({{sql}}) __wrap, stats group by 1 limit 100) _a",")","select * from stats, hist"].join("\n"),{column:t,sql:e});this.execute(r,function(e,t){if(e)n(e);else{var r=t.rows[0],o=0,a=[];try{var s,l=arrayAgg(r.array_agg);a=i(s=u(l)).call(s,function(e){var t=e.match(/\((.*),(\d+)/);return[function normalizeName(e){return e.replace(/^"(.+(?="$))?"$/,"$1").replace(/""/g,'"')}(t[1]),+t[2]]}),o=r.skew*(1-r.null_ratio)*(1-r.uniq/r.cnt)*(r.uniq>1?1:0)}catch(e){}n(null,{type:"string",hist:a,distinct:r.uniq,count:r.cnt,null_count:r.null_count,null_ratio:r.null_ratio,skew:r.skew,weight:o})}})},SQL.prototype.describeDate=function(e,t,n){var r=d.render(["with minimum as (","SELECT min({{column}}) as start_time FROM ({{sql}}) _wrap), ","maximum as (SELECT max({{column}}) as end_time FROM ({{sql}}) _wrap), ","null_ratio as (SELECT sum(case when {{column}} is null then 1 else 0 end)::numeric / count(*)::numeric as null_ratio FROM ({{sql}}) _wrap), ","moments as (SELECT count(DISTINCT {{column}}) as moments FROM ({{sql}}) _wrap)","SELECT * FROM minimum, maximum, moments, null_ratio"].join("\n"),{column:t,sql:e});this.execute(r,function(e,t){if(e)n(e);else{var r=t.rows[0],i=new Date(r.end_time),o=new Date(r.start_time),a=Math.min(r.moments,1024);n(null,{type:"date",start_time:o,end_time:i,range:i-o,steps:a,null_ratio:r.null_ratio})}})},SQL.prototype.describeBoolean=function(e,t,n){var r=d.render(["with stats as (","select count(distinct({{column}})) as uniq,","count(*) as cnt","from ({{sql}}) _wrap ","),","null_ratio as (","SELECT sum(case when {{column}} is null then 1 else 0 end)::numeric / count(*)::numeric as null_ratio FROM ({{sql}}) _wrap), ","true_ratio as (","SELECT sum(case when {{column}} is true then 1 else 0 end)::numeric / count(*)::numeric as true_ratio FROM ({{sql}}) _wrap) ","SELECT * FROM true_ratio, null_ratio, stats"].join("\n"),{column:t,sql:e});this.execute(r,function(e,t){if(e)n(e);else{var r=t.rows[0];n(null,{type:"boolean",null_ratio:r.null_ratio,true_ratio:r.true_ratio,distinct:r.uniq,count:r.cnt})}})},SQL.prototype.describeGeom=function(e,t,n){var r=d.render(["with geotype as (","select st_geometrytype({{column}}) as geometry_type from ({{sql}}) _w where {{column}} is not null limit 1",")","select * from geotype"].join("\n"),{column:t,sql:e});this.execute(r,function(e,t){if(e)n(e);else{var r=t.rows[0];n(null,{type:"geom",geometry_type:r.geometry_type,simplified_geometry_type:function simplifyType(e){return{st_multipolygon:"polygon",st_polygon:"polygon",st_multilinestring:"line",st_linestring:"line",st_multipoint:"point",st_point:"point"}[e.toLowerCase()]}(r.geometry_type)})}})},SQL.prototype.columns=function(e,t,n){var i=arguments,o=i[i.length-1];u.isFunction(o)&&(n=o);var a="select * from ("+e+") __wrap limit 0",s=["cartodb_id","latitude","longitude","created_at","updated_at","lat","lon","the_geom_webmercator"];this.execute(a,function(e,t){if(e)n(e);else{var i={};for(var o in t.fields)-1===r(s).call(s,o)&&(i[o]=t.fields[o].type);n(null,i)}})},SQL.prototype.describeFloat=function(e,t,n){var o=d.render(["with stats as (","select min({{column}}) as min,","max({{column}}) as max,","avg({{column}}) as avg,","count(DISTINCT {{column}}) as cnt,","count(distinct({{column}})) as uniq,","count(*) as cnt,","sum(case when {{column}} is null then 1 else 0 end)::numeric / count(*)::numeric as null_ratio,","stddev_pop({{column}}) / count({{column}}) as stddev,","CASE WHEN abs(avg({{column}})) > 1e-7 THEN stddev({{column}}) / abs(avg({{column}})) ELSE 1e12 END as stddevmean,",'CDB_DistType(array_agg("{{column}}"::numeric)) as dist_type ',"from ({{sql}}) _wrap ","),","params as (select min(a) as min, (max(a) - min(a)) / 7 as diff from ( select {{column}} as a from ({{sql}}) _table_sql where {{column}} is not null ) as foo ),","histogram as (","select array_agg(row(bucket, range, freq)) as hist from (","select CASE WHEN uniq > 1 then width_bucket({{column}}, min-0.01*abs(min), max+0.01*abs(max), 100) ELSE 1 END as bucket,","numrange(min({{column}})::numeric, max({{column}})::numeric) as range,","count(*) as freq","from ({{sql}}) _w, stats","group by 1","order by 1",") __wrap","),","hist as (","select array_agg(row(d, c)) cat_hist from (select distinct({{column}}) d, count(*) as c from ({{sql}}) __wrap, stats group by 1 limit 100) _a","),","buckets as (","select CDB_QuantileBins(array_agg(distinct({{column}}::numeric)), 7) as quantiles, ","       (select array_agg(x::numeric) FROM (SELECT (min + n * diff)::numeric as x FROM generate_series(1,7) n, params) p) as equalint,","       CDB_JenksBins(array_agg(distinct({{column}}::numeric)), 7) as jenks, ","       CDB_HeadsTailsBins(array_agg(distinct({{column}}::numeric)), 7) as headtails ","from ({{sql}}) _table_sql where {{column}} is not null",")","select * from histogram, stats, buckets, hist"].join("\n"),{column:t,sql:e});this.execute(o,function(e,t){var o,a;if(e)n(e);else{var s=t.rows[0],l=arrayAgg(s.hist),c=arrayAgg(s.cat_hist);n(null,{type:"number",cat_hist:i(o=u(c)).call(o,function(e){var t=e.match(/\((.*),(\d+)/);return[+t[1],+t[2]]}),hist:i(a=u(l)).call(a,function(e){var t;if(!(r(e).call(e,"empty")>-1)){var n=e.split('"');return{index:n[0].replace(/\D/g,""),range:i(t=n[1].split(",")).call(t,function(e){return e.replace(/\D/g,"")}),freq:n[2].replace(/\D/g,"")}}}),stddev:s.stddev,null_ratio:s.null_ratio,count:s.cnt,distinct:s.uniq,avg:s.avg,max:s.max,min:s.min,stddevmean:s.stddevmean,weight:(s.uniq>1?1:0)*(1-s.null_ratio)*(s.stddev<-1?1:s.stddev<1?.5:s.stddev<3?.25:.1),quantiles:s.quantiles,equalint:s.equalint,jenks:s.jenks,headtails:s.headtails,dist_type:s.dist_type})}})},SQL.prototype.describe=function(e,t,n){var r=this,i=arguments,o=i[i.length-1];if(u.isFunction(o))var a=o;var s=function callback(e,n){e?a(e):(n.column=t,a(null,n))},l="select * from ("+e+") __wrap limit 0";this.execute(l,function(i,o){if(i)s(i);else{var a=n&&n.type?n.type:o.fields[t].type;a?"string"===a?r.describeString(e,t,s):"number"===a?r.describeFloat(e,t,s):"geometry"===a?r.describeGeom(e,t,s):"date"===a?r.describeDate(e,t,s):"boolean"===a?r.describeBoolean(e,t,s):s(new Error("column type is not supported")):s(new Error("column does not exist"))}})},e.exports=SQL},function(e,t,n){var r=n(1),i=n(21),o=n(0),a=n(3),s=n(193),l=n(378),u=a.Collection.extend({model:l,getTemplate:function getTemplate(e){var t;this.namespace&&(e=this.namespace+e);var n=i(t=this).call(t,function(t){return t.get("name")===e});return n?r(o).call(o,n.render,n):(s.error(e+" not found"),null)}});e.exports=u},function(e,t,n){var r=n(3163);e.exports=new r},function(e,t,n){n(1418)("Float32",function(e){return function Float32Array(t,n,r){return e(this,t,n,r)}})},function(e,t,n){(function(t){(function webpackShim(e,n,r,i,o){var a,s,l=function(){var e=[["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],["all-scroll","col-resize","crosshair","default","e-resize","hand","help","move","n-resize","ne-resize","no-drop","not-allowed","nw-resize","pointer","progress","row-resize","s-resize","se-resize","sw-resize","text","vertical-text","w-resize","wait"],["armenian","decimal","decimal-leading-zero","disc","georgian","lower-alpha","lower-greek","lower-latin","lower-roman","square","upper-alpha","upper-latin","upper-roman"],["100","200","300","400","500","600","700","800","900","bold","bolder","lighter"],["block-level","inline-level","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group"],["condensed","expanded","extra-condensed","extra-expanded","narrower","semi-condensed","semi-expanded","ultra-condensed","ultra-expanded","wider"],["inherit","inline","inline-block","inline-box","inline-flex","inline-grid","inline-list-item","inline-stack","inline-table","run-in"],["behind","center-left","center-right","far-left","far-right","left-side","leftwards","right-side","rightwards"],["large","larger","small","smaller","x-large","x-small","xx-large","xx-small"],["dashed","dotted","double","groove","outset","ridge","solid"],["ease","ease-in","ease-in-out","ease-out","linear","step-end","step-start"],["at","closest-corner","closest-side","ellipse","farthest-corner","farthest-side"],["baseline","middle","sub","super","text-bottom","text-top"],["caption","icon","menu","message-box","small-caption","status-bar"],["fast","faster","slow","slower","x-fast","x-slow"],["above","below","higher","level","lower"],["cursive","fantasy","monospace","sans-serif","serif"],["loud","silent","soft","x-loud","x-soft"],["no-repeat","repeat-x","repeat-y","round","space"],["blink","line-through","overline","underline"],["block","flex","grid","table"],["high","low","x-high","x-low"],["nowrap","pre","pre-line","pre-wrap"],["absolute","relative","static"],["alternate","alternate-reverse","reverse"],["border-box","content-box","padding-box"],["capitalize","lowercase","uppercase"],["child","female","male"],["=","opacity"],["backwards","forwards"],["bidi-override","embed"],["bottom","top"],["break-all","keep-all"],["clip","ellipsis"],["contain","cover"],["continuous","digits"],["end","start"],["flat","preserve-3d"],["hide","show"],["horizontal","vertical"],["inside","outside"],["italic","oblique"],["left","right"],["ltr","rtl"],["no-content","no-display"],["paused","running"],["suppress","unrestricted"],["thick","thin"],[","],["/"],["all"],["always"],["auto"],["avoid"],["both"],["break-word"],["center"],["circle"],["code"],["collapse"],["contents"],["fixed"],["hidden"],["infinite"],["inset"],["invert"],["justify"],["list-item"],["local"],["medium"],["mix"],["none"],["normal"],["once"],["repeat"],["scroll"],["separate"],["small-caps"],["spell-out"],["to"],["visible"]],t={animation:{cssPropBits:517,cssLitGroup:[e[10],e[24],e[29],e[45],e[48],e[54],e[63],e[71],e[72]],cssFns:["cubic-bezier()","steps()"]},"animation-delay":{cssPropBits:5,cssLitGroup:[e[48]],cssFns:[]},"animation-direction":{cssPropBits:0,cssLitGroup:[e[24],e[48],e[72]],cssFns:[]},"animation-duration":"animation-delay","animation-fill-mode":{cssPropBits:0,cssLitGroup:[e[29],e[48],e[54],e[71]],cssFns:[]},"animation-iteration-count":{cssPropBits:5,cssLitGroup:[e[48],e[63]],cssFns:[]},"animation-name":{cssPropBits:512,cssLitGroup:[e[48],e[71]],cssFns:[]},"animation-play-state":{cssPropBits:0,cssLitGroup:[e[45],e[48]],cssFns:[]},"animation-timing-function":{cssPropBits:0,cssLitGroup:[e[10],e[48]],cssFns:["cubic-bezier()","steps()"]},appearance:{cssPropBits:0,cssLitGroup:[e[71]],cssFns:[]},azimuth:{cssPropBits:5,cssLitGroup:[e[7],e[42],e[56]],cssFns:[]},"backface-visibility":{cssPropBits:0,cssLitGroup:[e[59],e[62],e[80]],cssFns:[]},background:{cssPropBits:23,cssLitGroup:[e[0],e[18],e[25],e[31],e[34],e[42],e[48],e[49],e[52],e[56],e[61],e[68],e[71],e[74],e[75]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()","rgb()","rgba()"]},"background-attachment":{cssPropBits:0,cssLitGroup:[e[48],e[61],e[68],e[75]],cssFns:[]},"background-color":{cssPropBits:2,cssLitGroup:[e[0]],cssFns:["rgb()","rgba()"]},"background-image":{cssPropBits:16,cssLitGroup:[e[48],e[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"background-position":{cssPropBits:5,cssLitGroup:[e[31],e[42],e[48],e[56]],cssFns:[]},"background-repeat":{cssPropBits:0,cssLitGroup:[e[18],e[48],e[74]],cssFns:[]},"background-size":{cssPropBits:5,cssLitGroup:[e[34],e[48],e[52]],cssFns:[]},border:{cssPropBits:7,cssLitGroup:[e[0],e[9],e[47],e[62],e[64],e[69],e[71]],cssFns:["rgb()","rgba()"]},"border-bottom":"border","border-bottom-color":"background-color","border-bottom-left-radius":{cssPropBits:5,cssFns:[]},"border-bottom-right-radius":"border-bottom-left-radius","border-bottom-style":{cssPropBits:0,cssLitGroup:[e[9],e[62],e[64],e[71]],cssFns:[]},"border-bottom-width":{cssPropBits:5,cssLitGroup:[e[47],e[69]],cssFns:[]},"border-collapse":{cssPropBits:0,cssLitGroup:[e[59],e[76]],cssFns:[]},"border-color":"background-color","border-left":"border","border-left-color":"background-color","border-left-style":"border-bottom-style","border-left-width":"border-bottom-width","border-radius":{cssPropBits:5,cssLitGroup:[e[49]],cssFns:[]},"border-right":"border","border-right-color":"background-color","border-right-style":"border-bottom-style","border-right-width":"border-bottom-width","border-spacing":"border-bottom-left-radius","border-style":"border-bottom-style","border-top":"border","border-top-color":"background-color","border-top-left-radius":"border-bottom-left-radius","border-top-right-radius":"border-bottom-left-radius","border-top-style":"border-bottom-style","border-top-width":"border-bottom-width","border-width":"border-bottom-width",bottom:{cssPropBits:5,cssLitGroup:[e[52]],cssFns:[]},box:{cssPropBits:0,cssLitGroup:[e[60],e[71],e[72]],cssFns:[]},"box-shadow":{cssPropBits:7,cssLitGroup:[e[0],e[48],e[64],e[71]],cssFns:["rgb()","rgba()"]},"box-sizing":{cssPropBits:0,cssLitGroup:[e[25]],cssFns:[]},"caption-side":{cssPropBits:0,cssLitGroup:[e[31]],cssFns:[]},clear:{cssPropBits:0,cssLitGroup:[e[42],e[54],e[71]],cssFns:[]},clip:{cssPropBits:0,cssLitGroup:[e[52]],cssFns:["rect()"]},color:"background-color",content:{cssPropBits:8,cssLitGroup:[e[71],e[72]],cssFns:[]},cue:{cssPropBits:16,cssLitGroup:[e[71]],cssFns:[]},"cue-after":"cue","cue-before":"cue",cursor:{cssPropBits:16,cssLitGroup:[e[1],e[48],e[52]],cssFns:[]},direction:{cssPropBits:0,cssLitGroup:[e[43]],cssFns:[]},display:{cssPropBits:0,cssLitGroup:[e[4],e[6],e[20],e[52],e[67],e[71]],cssFns:[]},"display-extras":{cssPropBits:0,cssLitGroup:[e[67],e[71]],cssFns:[]},"display-inside":{cssPropBits:0,cssLitGroup:[e[20],e[52]],cssFns:[]},"display-outside":{cssPropBits:0,cssLitGroup:[e[4],e[71]],cssFns:[]},elevation:{cssPropBits:5,cssLitGroup:[e[15]],cssFns:[]},"empty-cells":{cssPropBits:0,cssLitGroup:[e[38]],cssFns:[]},filter:{cssPropBits:0,cssFns:["alpha()"]},float:{cssPropBits:0,cssLitGroup:[e[42],e[71]],cssFns:[]},font:{cssPropBits:73,cssLitGroup:[e[3],e[8],e[13],e[16],e[41],e[48],e[49],e[69],e[72],e[77]],cssFns:[]},"font-family":{cssPropBits:72,cssLitGroup:[e[16],e[48]],cssFns:[]},"font-size":{cssPropBits:1,cssLitGroup:[e[8],e[69]],cssFns:[]},"font-stretch":{cssPropBits:0,cssLitGroup:[e[5],e[72]],cssFns:[]},"font-style":{cssPropBits:0,cssLitGroup:[e[41],e[72]],cssFns:[]},"font-variant":{cssPropBits:0,cssLitGroup:[e[72],e[77]],cssFns:[]},"font-weight":{cssPropBits:0,cssLitGroup:[e[3],e[72]],cssFns:[]},height:"bottom",left:"bottom","letter-spacing":{cssPropBits:5,cssLitGroup:[e[72]],cssFns:[]},"line-height":{cssPropBits:1,cssLitGroup:[e[72]],cssFns:[]},"list-style":{cssPropBits:16,cssLitGroup:[e[2],e[40],e[57],e[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"list-style-image":{cssPropBits:16,cssLitGroup:[e[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"list-style-position":{cssPropBits:0,cssLitGroup:[e[40]],cssFns:[]},"list-style-type":{cssPropBits:0,cssLitGroup:[e[2],e[57],e[71]],cssFns:[]},margin:"bottom","margin-bottom":"bottom","margin-left":"bottom","margin-right":"bottom","margin-top":"bottom","max-height":{cssPropBits:1,cssLitGroup:[e[52],e[71]],cssFns:[]},"max-width":"max-height","min-height":{cssPropBits:1,cssLitGroup:[e[52]],cssFns:[]},"min-width":"min-height",opacity:{cssPropBits:1,cssFns:[]},outline:{cssPropBits:7,cssLitGroup:[e[0],e[9],e[47],e[62],e[64],e[65],e[69],e[71]],cssFns:["rgb()","rgba()"]},"outline-color":{cssPropBits:2,cssLitGroup:[e[0],e[65]],cssFns:["rgb()","rgba()"]},"outline-style":"border-bottom-style","outline-width":"border-bottom-width",overflow:{cssPropBits:0,cssLitGroup:[e[52],e[62],e[75],e[80]],cssFns:[]},"overflow-wrap":{cssPropBits:0,cssLitGroup:[e[55],e[72]],cssFns:[]},"overflow-x":{cssPropBits:0,cssLitGroup:[e[44],e[52],e[62],e[75],e[80]],cssFns:[]},"overflow-y":"overflow-x",padding:"opacity","padding-bottom":"opacity","padding-left":"opacity","padding-right":"opacity","padding-top":"opacity","page-break-after":{cssPropBits:0,cssLitGroup:[e[42],e[51],e[52],e[53]],cssFns:[]},"page-break-before":"page-break-after","page-break-inside":{cssPropBits:0,cssLitGroup:[e[52],e[53]],cssFns:[]},pause:"border-bottom-left-radius","pause-after":"border-bottom-left-radius","pause-before":"border-bottom-left-radius",perspective:{cssPropBits:5,cssLitGroup:[e[71]],cssFns:[]},"perspective-origin":{cssPropBits:5,cssLitGroup:[e[31],e[42],e[56]],cssFns:[]},pitch:{cssPropBits:5,cssLitGroup:[e[21],e[69]],cssFns:[]},"pitch-range":"border-bottom-left-radius","play-during":{cssPropBits:16,cssLitGroup:[e[52],e[70],e[71],e[74]],cssFns:[]},position:{cssPropBits:0,cssLitGroup:[e[23]],cssFns:[]},quotes:{cssPropBits:8,cssLitGroup:[e[71]],cssFns:[]},resize:{cssPropBits:0,cssLitGroup:[e[39],e[54],e[71]],cssFns:[]},richness:"border-bottom-left-radius",right:"bottom",speak:{cssPropBits:0,cssLitGroup:[e[71],e[72],e[78]],cssFns:[]},"speak-header":{cssPropBits:0,cssLitGroup:[e[51],e[73]],cssFns:[]},"speak-numeral":{cssPropBits:0,cssLitGroup:[e[35]],cssFns:[]},"speak-punctuation":{cssPropBits:0,cssLitGroup:[e[58],e[71]],cssFns:[]},"speech-rate":{cssPropBits:5,cssLitGroup:[e[14],e[69]],cssFns:[]},stress:"border-bottom-left-radius","table-layout":{cssPropBits:0,cssLitGroup:[e[52],e[61]],cssFns:[]},"text-align":{cssPropBits:0,cssLitGroup:[e[42],e[56],e[66]],cssFns:[]},"text-decoration":{cssPropBits:0,cssLitGroup:[e[19],e[71]],cssFns:[]},"text-indent":"border-bottom-left-radius","text-overflow":{cssPropBits:8,cssLitGroup:[e[33]],cssFns:[]},"text-shadow":"box-shadow","text-transform":{cssPropBits:0,cssLitGroup:[e[26],e[71]],cssFns:[]},"text-wrap":{cssPropBits:0,cssLitGroup:[e[46],e[71],e[72]],cssFns:[]},top:"bottom",transform:{cssPropBits:0,cssLitGroup:[e[71]],cssFns:["matrix()","perspective()","rotate()","rotate3d()","rotatex()","rotatey()","rotatez()","scale()","scale3d()","scalex()","scaley()","scalez()","skew()","skewx()","skewy()","translate()","translate3d()","translatex()","translatey()","translatez()"]},"transform-origin":"perspective-origin","transform-style":{cssPropBits:0,cssLitGroup:[e[37]],cssFns:[]},transition:{cssPropBits:1029,cssLitGroup:[e[10],e[48],e[50],e[71]],cssFns:["cubic-bezier()","steps()"]},"transition-delay":"animation-delay","transition-duration":"animation-delay","transition-property":{cssPropBits:1024,cssLitGroup:[e[48],e[50]],cssFns:[]},"transition-timing-function":"animation-timing-function","unicode-bidi":{cssPropBits:0,cssLitGroup:[e[30],e[72]],cssFns:[]},"vertical-align":{cssPropBits:5,cssLitGroup:[e[12],e[31]],cssFns:[]},visibility:"backface-visibility","voice-family":{cssPropBits:8,cssLitGroup:[e[27],e[48]],cssFns:[]},volume:{cssPropBits:1,cssLitGroup:[e[17],e[69]],cssFns:[]},"white-space":{cssPropBits:0,cssLitGroup:[e[22],e[72]],cssFns:[]},width:"min-height","word-break":{cssPropBits:0,cssLitGroup:[e[32],e[72]],cssFns:[]},"word-spacing":"letter-spacing","word-wrap":"overflow-wrap","z-index":"bottom",zoom:"line-height","cubic-bezier()":"animation-delay","steps()":{cssPropBits:5,cssLitGroup:[e[36],e[48]],cssFns:[]},"image()":{cssPropBits:18,cssLitGroup:[e[0],e[48]],cssFns:["rgb()","rgba()"]},"linear-gradient()":{cssPropBits:7,cssLitGroup:[e[0],e[31],e[42],e[48],e[79]],cssFns:["rgb()","rgba()"]},"radial-gradient()":{cssPropBits:7,cssLitGroup:[e[0],e[11],e[31],e[42],e[48],e[56],e[57]],cssFns:["rgb()","rgba()"]},"repeating-linear-gradient()":"linear-gradient()","repeating-radial-gradient()":"radial-gradient()","rgb()":{cssPropBits:1,cssLitGroup:[e[48]],cssFns:[]},"rgba()":"rgb()","rect()":{cssPropBits:5,cssLitGroup:[e[48],e[52]],cssFns:[]},"alpha()":{cssPropBits:1,cssLitGroup:[e[28]],cssFns:[]},"matrix()":"animation-delay","perspective()":"border-bottom-left-radius","rotate()":"border-bottom-left-radius","rotate3d()":"animation-delay","rotatex()":"border-bottom-left-radius","rotatey()":"border-bottom-left-radius","rotatez()":"border-bottom-left-radius","scale()":"animation-delay","scale3d()":"animation-delay","scalex()":"border-bottom-left-radius","scaley()":"border-bottom-left-radius","scalez()":"border-bottom-left-radius","skew()":"animation-delay","skewx()":"border-bottom-left-radius","skewy()":"border-bottom-left-radius","translate()":"animation-delay","translate3d()":"animation-delay","translatex()":"border-bottom-left-radius","translatey()":"border-bottom-left-radius","translatez()":"border-bottom-left-radius"};for(var n in t)"string"==typeof t[n]&&Object.hasOwnProperty.call(t,n)&&(t[n]=t[t[n]]);return t}();"undefined"!=typeof window&&(window.cssSchema=l),function(){function decodeCssEscape(e){var t=parseInt(e.substring(1),16);return t>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):t==t?String.fromCharCode(t):e[1]<" "?"":e[1]}function escapeCssString(e,t){return'"'+e.replace(/[\u0000-\u001f\\\"<>]/g,t)+'"'}function escapeCssStrChar(t){return e[t]||(e[t]="\\"+t.charCodeAt(0).toString(16)+" ")}function escapeCssUrlChar(e){return t[e]||(t[e]=(e<"\x10"?"%0":"%")+e.charCodeAt(0).toString(16))}var e={"\\":"\\\\"},t={"\\":"%5c"},n="[\\t\\n\\f ]",r=n+"*",i="[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]",o="(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff])",l="\\\\"+o,u="\"(?:'|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*\"|'(?:\"|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*'",c="[-+]?(?:[0-9]+(?:[.][0-9]+)?|[.][0-9]+)",d="(?:[a-zA-Z_]|"+i+"|"+l+")",f="(?:[a-zA-Z0-9_-]|"+i+"|"+l+")",h="-?"+d+f+"*",p="\x3c!--",m="--\x3e",g=new RegExp(["\\uFEFF","U[+][0-9A-F?]{1,6}(?:-[0-9A-F]{1,6})?","url[(]"+r+"(?:"+u+"|(?:[\\t\\x21\\x23-\\x26\\x28-\\x5b\\x5d-\\x7e]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*)"+r+"[)]","(?!url[(])"+h+"[(]","(?:@?-?"+d+"|#)"+f+"*",u,c+"(?:%|"+h+")?",p,m,n+"+","/(?:[*][^*]*[*]+(?:[^/][^*]*[*]+)*/|/[^\\n\\f]*)","[~|^$*]=","[^\"'\\\\/]|/(?![/*])"].join("|"),"gi"),v=new RegExp("\\\\(?:"+o+"|[\\n\\f])","g"),y=new RegExp("^url\\("+r+"[\"']?|[\"']?"+r+"\\)$","gi");s=function(e){return e.replace(v,decodeCssEscape)},a=function(e){for(var t=(e=(e=("\uffff"+e).replace(/^\uffff/,"")).replace(/\r\n?/g,"\n")).match(g)||[],n=0,r=" ",i=0,o=t.length;i<o;++i){var a=s(t[i]),l=a.length,u=a.charCodeAt(0);r==(a=u=='"'.charCodeAt(0)||u=="'".charCodeAt(0)?escapeCssString(a.substring(1,l-1),escapeCssStrChar):u=="/".charCodeAt(0)&&l>1||"\\"==a||a==m||a==p||"\ufeff"==a||u<=" ".charCodeAt(0)?" ":/url\(/i.test(a)?"url("+escapeCssString(a.replace(y,""),escapeCssUrlChar)+")":a)&&" "==a||(t[n++]=r=a)}return t.length=n,t}}(),"undefined"!=typeof window&&(window.lexCss=a,window.decodeCss=s);var u=function(){function parse(e){var t=(""+e).match(r);return t?new URI(nullIfAbsent(t[1]),nullIfAbsent(t[2]),nullIfAbsent(t[3]),nullIfAbsent(t[4]),nullIfAbsent(t[5]),nullIfAbsent(t[6]),nullIfAbsent(t[7])):null}function encodeIfExists(e){return"string"==typeof e?encodeURIComponent(e):null}function encodeIfExists2(e,t){return"string"==typeof e?encodeURI(e).replace(t,encodeOne):null}function encodeOne(e){var t=e.charCodeAt(0);return"%"+"0123456789ABCDEF".charAt(t>>4&15)+"0123456789ABCDEF".charAt(15&t)}var e=new RegExp("(/|^)(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)/\\.\\.(?:/|$)"),t=new RegExp(e),n=/^(?:\.\.\/)*(?:\.\.$)?/;function collapse_dots(e){if(null===e)return null;for(var n,r=function normPath(e){return e.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/")}(e),i=t;(n=r.replace(i,"$1"))!=r;r=n);return r}function resolve(e,t){var r=e.clone(),i=t.hasScheme();i?r.setRawScheme(t.getRawScheme()):i=t.hasCredentials(),i?r.setRawCredentials(t.getRawCredentials()):i=t.hasDomain(),i?r.setRawDomain(t.getRawDomain()):i=t.hasPort();var o=t.getRawPath(),a=collapse_dots(o);if(i)r.setPort(t.getPort()),a=a&&a.replace(n,"");else if(i=!!o){if(47!==a.charCodeAt(0)){var s=collapse_dots(r.getRawPath()||"").replace(n,""),l=s.lastIndexOf("/")+1;a=collapse_dots((l?s.substring(0,l):"")+collapse_dots(o)).replace(n,"")}}else(a=a&&a.replace(n,""))!==o&&r.setRawPath(a);return i?r.setRawPath(a):i=t.hasQuery(),i?r.setRawQuery(t.getRawQuery()):i=t.hasFragment(),i&&r.setRawFragment(t.getRawFragment()),r}function URI(e,t,n,r,i,o,a){this.scheme_=e,this.credentials_=t,this.domain_=n,this.port_=r,this.path_=i,this.query_=o,this.fragment_=a,this.paramCache_=null}function nullIfAbsent(e){return"string"==typeof e&&e.length>0?e:null}URI.prototype.toString=function(){var e=[];return null!==this.scheme_&&e.push(this.scheme_,":"),null!==this.domain_&&(e.push("//"),null!==this.credentials_&&e.push(this.credentials_,"@"),e.push(this.domain_),null!==this.port_&&e.push(":",this.port_.toString())),null!==this.path_&&e.push(this.path_),null!==this.query_&&e.push("?",this.query_),null!==this.fragment_&&e.push("#",this.fragment_),e.join("")},URI.prototype.clone=function(){return new URI(this.scheme_,this.credentials_,this.domain_,this.port_,this.path_,this.query_,this.fragment_)},URI.prototype.getScheme=function(){return this.scheme_&&decodeURIComponent(this.scheme_).toLowerCase()},URI.prototype.getRawScheme=function(){return this.scheme_},URI.prototype.setScheme=function(e){return this.scheme_=encodeIfExists2(e,i),this},URI.prototype.setRawScheme=function(e){return this.scheme_=e||null,this},URI.prototype.hasScheme=function(){return null!==this.scheme_},URI.prototype.getCredentials=function(){return this.credentials_&&decodeURIComponent(this.credentials_)},URI.prototype.getRawCredentials=function(){return this.credentials_},URI.prototype.setCredentials=function(e){return this.credentials_=encodeIfExists2(e,i),this},URI.prototype.setRawCredentials=function(e){return this.credentials_=e||null,this},URI.prototype.hasCredentials=function(){return null!==this.credentials_},URI.prototype.getDomain=function(){return this.domain_&&decodeURIComponent(this.domain_)},URI.prototype.getRawDomain=function(){return this.domain_},URI.prototype.setDomain=function(e){return this.setRawDomain(e&&encodeURIComponent(e))},URI.prototype.setRawDomain=function(e){return this.domain_=e||null,this.setRawPath(this.path_)},URI.prototype.hasDomain=function(){return null!==this.domain_},URI.prototype.getPort=function(){return this.port_&&decodeURIComponent(this.port_)},URI.prototype.setPort=function(e){if(e){if((e=Number(e))!==(65535&e))throw new Error("Bad port number "+e);this.port_=""+e}else this.port_=null;return this},URI.prototype.hasPort=function(){return null!==this.port_},URI.prototype.getPath=function(){return this.path_&&decodeURIComponent(this.path_)},URI.prototype.getRawPath=function(){return this.path_},URI.prototype.setPath=function(e){return this.setRawPath(encodeIfExists2(e,o))},URI.prototype.setRawPath=function(e){return e?(e=String(e),this.path_=!this.domain_||/^\//.test(e)?e:"/"+e):this.path_=null,this},URI.prototype.hasPath=function(){return null!==this.path_},URI.prototype.getQuery=function(){return this.query_&&decodeURIComponent(this.query_).replace(/\+/g," ")},URI.prototype.getRawQuery=function(){return this.query_},URI.prototype.setQuery=function(e){return this.paramCache_=null,this.query_=encodeIfExists(e),this},URI.prototype.setRawQuery=function(e){return this.paramCache_=null,this.query_=e||null,this},URI.prototype.hasQuery=function(){return null!==this.query_},URI.prototype.setAllParameters=function(e){if("object"==typeof e&&!(e instanceof Array)&&(e instanceof Object||"[object Array]"!==Object.prototype.toString.call(e))){var t=[],n=-1;for(var r in e){"string"==typeof(s=e[r])&&(t[++n]=r,t[++n]=s)}e=t}this.paramCache_=null;for(var i=[],o="",a=0;a<e.length;){r=e[a++];var s=e[a++];i.push(o,encodeURIComponent(r.toString())),o="&",s&&i.push("=",encodeURIComponent(s.toString()))}return this.query_=i.join(""),this},URI.prototype.checkParameterCache_=function(){if(!this.paramCache_){var e=this.query_;if(e){for(var t=e.split(/[&\?]/),n=[],r=-1,i=0;i<t.length;++i){var o=t[i].match(/^([^=]*)(?:=(.*))?$/);n[++r]=decodeURIComponent(o[1]).replace(/\+/g," "),n[++r]=decodeURIComponent(o[2]||"").replace(/\+/g," ")}this.paramCache_=n}else this.paramCache_=[]}},URI.prototype.setParameterValues=function(e,t){"string"==typeof t&&(t=[t]),this.checkParameterCache_();for(var n=0,r=this.paramCache_,i=[],o=0;o<r.length;o+=2)e===r[o]?n<t.length&&i.push(e,t[n++]):i.push(r[o],r[o+1]);for(;n<t.length;)i.push(e,t[n++]);return this.setAllParameters(i),this},URI.prototype.removeParameter=function(e){return this.setParameterValues(e,[])},URI.prototype.getAllParameters=function(){return this.checkParameterCache_(),this.paramCache_.slice(0,this.paramCache_.length)},URI.prototype.getParameterValues=function(e){this.checkParameterCache_();for(var t=[],n=0;n<this.paramCache_.length;n+=2)e===this.paramCache_[n]&&t.push(this.paramCache_[n+1]);return t},URI.prototype.getParameterMap=function(e){this.checkParameterCache_();for(var t={},n=0;n<this.paramCache_.length;n+=2){var r=this.paramCache_[n++],i=this.paramCache_[n++];r in t?t[r].push(i):t[r]=[i]}return t},URI.prototype.getParameterValue=function(e){this.checkParameterCache_();for(var t=0;t<this.paramCache_.length;t+=2)if(e===this.paramCache_[t])return this.paramCache_[t+1];return null},URI.prototype.getFragment=function(){return this.fragment_&&decodeURIComponent(this.fragment_)},URI.prototype.getRawFragment=function(){return this.fragment_},URI.prototype.setFragment=function(e){return this.fragment_=e?encodeURIComponent(e):null,this},URI.prototype.setRawFragment=function(e){return this.fragment_=e||null,this},URI.prototype.hasFragment=function(){return null!==this.fragment_};var r=new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),i=/[#\/\?@]/g,o=/[\#\?]/g;return URI.parse=parse,URI.create=function create(e,t,n,r,a,s,l){var u=new URI(encodeIfExists2(e,i),encodeIfExists2(t,i),encodeIfExists(n),r>0?r.toString():null,encodeIfExists2(a,o),null,encodeIfExists(l));return s&&("string"==typeof s?u.setRawQuery(s.replace(/[^?&=0-9A-Za-z_\-~.%]/g,encodeOne)):u.setAllParameters(s)),u},URI.resolve=resolve,URI.collapse_dots=collapse_dots,URI.utils={mimeTypeOf:function(e){var t=parse(e);return/\.html$/.test(t.getPath())?"text/html":"application/javascript"},resolve:function(e,t){return e?resolve(parse(e),parse(t)).toString():""+t}},URI}();"undefined"!=typeof window&&(window.URI=u);var c,d,f=void 0,h=void 0,p=void 0,m=void 0;if(function(){var e='url("about:blank")',t=/[\n\f\r\"\'()*<>]/g,n={"\n":"%0a","\f":"%0c","\r":"%0d",'"':"%22","'":"%27","(":"%28",")":"%29","*":"%2a","<":"%3c",">":"%3e"};function normalizeUrl(n){return"string"==typeof n?'url("'+n.replace(t,normalizeUrlChar)+'")':e}function normalizeUrlChar(e){return n[e]}var r=new RegExp("^(?:([^:/?# ]+):)?"),i=/^(?:https?|mailto)$/i;function resolveUri(e,t){return e?u.utils.resolve(e,t):t}function safeUri(e,t,n){if(!n)return null;var o=(""+e).match(r);return!o||o[1]&&!i.test(o[1])?null:n(e,t)}function withoutVendorPrefix(e){return e.replace(/^-(?:apple|css|epub|khtml|moz|mso?|o|rim|wap|webkit|xv)-(?=[a-z])/,"")}f=function(){function unionArrays(e){for(var n={},r=e.length;--r>=0;)for(var i=e[r],o=i.length;--o>=0;)n[i[o]]=t;return n}var t={};return function sanitize(n,r,i,o,a){var u=withoutVendorPrefix(n),c=l[u];if(c&&"object"==typeof c){for(var d=c.cssPropBits,f=80&d,h=1536&d,p=NaN,m=0,g=0;m<r.length;++m){var v,y,_,b,w,x=r[m].toLowerCase(),C=x.charCodeAt(0);(x=C===" ".charCodeAt(0)?"":C==='"'.charCodeAt(0)?16===f?i?normalizeUrl(safeUri(resolveUri(o,s(r[m].substring(1,x.length-1))),u,i)):"":8&d&&!(f&f-1)?x:"":"inherit"===x?x:((w=c.cssLitGroup)?c.cssLitMap||(c.cssLitMap=unionArrays(w)):t)[withoutVendorPrefix(x)]===t?x:C==="#".charCodeAt(0)&&/^#(?:[0-9a-f]{3}){1,2}$/.test(x)?2&d?x:"":"0".charCodeAt(0)<=C&&C<="9".charCodeAt(0)?1&d?x:"":(v=x.charCodeAt(1),y=x.charCodeAt(2),_="0".charCodeAt(0)<=v&&v<="9".charCodeAt(0),b="0".charCodeAt(0)<=y&&y<="9".charCodeAt(0),C==="+".charCodeAt(0)&&(_||v===".".charCodeAt(0)&&b)?1&d?(_?"":"0")+x.substring(1):"":C==="-".charCodeAt(0)&&(_||v===".".charCodeAt(0)&&b)?4&d?(_?"-":"-0")+x.substring(1):1&d?"0":"":C===".".charCodeAt(0)&&_?1&d?"0"+x:"":'url("'===x.substring(0,5)?i&&16&d?normalizeUrl(safeUri(resolveUri(o,r[m].substring(5,x.length-2)),u,i)):"":"("===x.charAt(x.length-1)?sanitizeFunctionCall(r,m):h&&/^-?[a-z_][\w\-]*$/.test(x)&&!/__$/.test(x)?a&&512===h?r[m]+a:1024===h&&l[x]&&"number"==typeof l[x].cssPropBits?x:"":/^\w+$/.test(x)&&64===f&&8&d?p+1===g?(r[p]=r[p].substring(0,r[p].length-1)+" "+x+'"',x=""):(p=g,'"'+x+'"'):""))&&(r[g++]=x)}1===g&&r[0]===e&&(g=0),r.length=g}else r.length=0;function sanitizeFunctionCall(e,t){for(var n=1,r=t+1,a=e.length;r<a&&n;){var s=e[r++];n+=")"===s?-1:/^[^"']*\($/.test(s)}if(!n)for(var l=e[t].toLowerCase(),u=withoutVendorPrefix(l),d=e.splice(t,r-t,""),f=c.cssFns,h=0,p=f.length;h<p;++h)if(f[h].substring(0,u.length)==u)return d[0]=d[d.length-1]="",sanitize(f[h],d,i,o),l+d.join(" ")+")";return""}}}();var o,a,d,v,y=new RegExp("^(active|after|before|blank|checked|default|disabled|drop|empty|enabled|first|first-child|first-letter|first-line|first-of-type|fullscreen|focus|hover|in-range|indeterminate|invalid|last-child|last-of-type|left|link|only-child|only-of-type|optional|out-of-range|placeholder-shown|read-only|read-write|required|right|root|scope|user-error|valid|visited)$"),_={};_[">"]=_["+"]=_["~"]=_,h=function(e,t,n){var r,i,o=t.containerClass,a=t.idSuffix,s=t.tagPolicy,l=[],u=0,c=0;for(r=0;r<e.length;++r)("("==(i=e[r])||"["==i?(++c,1):")"==i||"]"==i?(c&&--c,1):" "!=e[r]||!c&&_[e[r-1]]!==_&&_[e[r+1]]!==_)&&(e[u++]=e[r]);e.length=u;var d=e.length,f=0;for(r=0;r<d;++r)if(","===e[r]){if(!processComplexSelector(f,r))return null;f=r+1}if(!processComplexSelector(f,d))return null;function processComplexSelector(r,i){" "===e[r]&&++r,i-1!==r&&" "===e[i]&&--i;for(var u=[],c=r,d=!0,f=r;d&&f<i;++f){var h=e[f];_[h]!==_&&" "!==h||(processCompoundSelector(c,f,h)?c=f+1:d=!1)}function processCompoundSelector(n,r,i){var o,l,c,d,f,h=!0;if(o="",n<r)if("*"===(f=e[n]))++n,o=f;else if(/^[a-zA-Z]/.test(f)){var p=s(f.toLowerCase(),[]);p&&("tagName"in p&&(f=p.tagName),++n,o=f)}for(l="",c="",d="";h&&n<r;++n)if("#"===(f=e[n]).charAt(0))/^#_|__$|[^\w#:\-]/.test(f)?h=!1:l+=f+a;else if("."===f)++n<r&&/^[0-9A-Za-z:_\-]+$/.test(f=e[n])&&!/^_|__$/.test(f)?l+="."+f:h=!1;else if(n+1<r&&"["===e[n]){++n;var m,v=e[n++].toLowerCase(),_=g.ATTRIBS[o+"::"+v];_!==+_&&(_=g.ATTRIBS["*::"+v]),t.virtualizeAttrName?("string"!=typeof(m=t.virtualizeAttrName(o,v))&&(h=!1,m=v),h&&_!==+_&&(_=g.atype.NONE)):(m=v,_!==+_&&(h=!1));var b="",w="",x=!1;switch(/^[~^$*|]?=$/.test(e[n])&&(b=e[n++],w=e[n++],/^[0-9A-Za-z:_\-]+$/.test(w)?w='"'+w+'"':"]"===w&&(w='""',--n),/^"([^\"\\]|\\.)*"$/.test(w)||(h=!1),(x="i"===e[n])&&++n),"]"!==e[n]&&(++n,h=!1),_){case g.atype.CLASSES:case g.atype.LOCAL_NAME:case g.atype.NONE:break;case g.atype.GLOBAL_NAME:case g.atype.ID:case g.atype.IDREF:"="!==b&&"~="!==b&&"$="!==b||'""'==w||x?"|="===b||""===b||(h=!1):w='"'+w.substring(1,w.length-1)+a+'"';break;case g.atype.URI:case g.atype.URI_FRAGMENT:""!==b&&(h=!1);break;default:h=!1}h&&(c+="["+m.replace(/[^\w-]/g,"\\$&")+b+w+(x?" i]":"]"))}else{if(!(n<r&&":"===e[n]))break;if(f=e[++n],!y.test(f))break;d+=":"+f}if(n!==r&&(h=!1),h){var C=(o+l).replace(/[^ .*#\w-]/g,"\\$&")+c+d+i;C&&u.push(C)}return h}if(processCompoundSelector(c,i,"")||(d=!1),d){if(u.length){var p=u.join("");null!==o&&(p="."+o+" "+p),l.push(p)}return!0}return!n||n(e.slice(r,i))}return l},a="(?:(?:(?:(?:only|not) )?(?:all|aural|braille|embossed|handheld|print|projection|screen|speech|tty|tv)|"+(o="\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\)")+")(?: and ?"+o+")*)",d=/^\w/,v=new RegExp("^"+a+"(?: , "+a+")*$","i"),m=function(e){for(var t=(e=e.slice()).length,n=0,r=0;r<t;++r){var i=e[r];" "!=i&&(e[n++]=i)}e.length=n;var o=e.join(" ");return o=o.length?v.test(o)?d.test(o)?o:"not all , "+o:"not all":""},function(){function sanitizeStylesheetInternal(e,t,n,r,i,o,a){var s=void 0,l=a||[0],u=[],d=!1;function checkElide(){d=u.length&&null===u[u.length-1]}return c(t,{startStylesheet:function(){s=[]},endStylesheet:function(){},startAtrule:function(t,a){if(d)t=null;else if("@media"===t)s.push("@media"," ",m(a));else if("@keyframes"===t||"@-webkit-keyframes"===t){var c=a[0];1!==a.length||/__$|[^\w\-]/.test(c)?t=null:(s.push(t," ",c+n.idSuffix),t="@keyframes")}else if("@import"===t&&a.length>0)if(t=null,"function"==typeof o){var f=m(a.slice(1));if("not all"!==f){++l[0];var h=[];s.push(h);var p=safeUri(resolveUri(e,function cssParseUri(e){var t;return(t=/^\s*["]([^"]*)["]\s*$/.exec(e))?t[1]:(t=/^\s*[']([^']*)[']\s*$/.exec(e))?t[1]:(t=/^\s*url\s*[(]["]([^"]*)["][)]\s*$/.exec(e))?t[1]:(t=/^\s*url\s*[(][']([^']*)['][)]\s*$/.exec(e))?t[1]:(t=/^\s*url\s*[(]([^)]*)[)]\s*$/.exec(e))?t[1]:null}(a[0])),function(e){var t=sanitizeStylesheetInternal(p,e.html,n,r,i,o,l);--l[0];var a=f?{toString:function(){return"@media "+f+" {"+t.result+"}"}}:t.result;h[0]=a,o(a,!!l[0])},i)}}else window.console&&window.console.log("@import "+a.join(" ")+" elided");d=!t,u.push(t)},endAtrule:function(){u.pop(),d||s.push(";"),checkElide()},startBlock:function(){d||s.push("{")},endBlock:function(){d||(s.push("}"),d=!0)},startRuleset:function(e){if(!d){var t=void 0;if("@keyframes"===u[u.length-1])t=e.join(" ").match(/^ *(?:from|to|\d+(?:\.\d+)?%) *(?:, *(?:from|to|\d+(?:\.\d+)?%) *)*$/i),d=!t,t&&(t=t[0].replace(/ +/g,""));else{var r=h(e,n);r&&r.length?t=r.join(", "):d=!0}d||s.push(t,"{")}u.push(null)},endRuleset:function(){u.pop(),d||s.push("}"),checkElide()},declaration:function(t,i){if(!d){var o=!1,a=i.length;a>=2&&"!"===i[a-2]&&"important"===i[a-1].toLowerCase()&&(o=!0,i.length-=2),f(t,i,r,e,n.idSuffix),i.length&&s.push(t,":",i.join(" "),o?" !important;":";")}}}),{result:{toString:function(){return s.join("")}},moreToCome:!!l[0]}}p=function(e,t,n,r){return sanitizeStylesheetInternal(e,t,n,r,void 0,void 0).result.toString()},function(e,t,n,r,i,o){return sanitizeStylesheetInternal(e,t,n,r,i,o)}}()}(),"undefined"!=typeof window&&(window.sanitizeCssProperty=f,window.sanitizeCssSelectorList=h,window.sanitizeStylesheet=p,window.sanitizeMediaQuery=m),"i"!=="I".toLowerCase())throw"I/i problem";!function(){function statement(e,t,n,r){return t<n?"@"===e[t].charAt(0)?atrule(e,t,n,r,!0):ruleset(e,t,n,r):t}function atrule(e,t,n,r,i){for(var o=t++;t<n&&"{"!==e[t]&&";"!==e[t];)++t;if(t<n&&(i||";"===e[t])){var a=o+1,s=t;a<n&&" "===e[a]&&++a,s>a&&" "===e[s-1]&&--s,r.startAtrule&&r.startAtrule(e[o].toLowerCase(),e.slice(a,s)),t="{"===e[t]?function block(e,t,n,r){++t;r.startBlock&&r.startBlock();for(;t<n;){var i=e[t].charAt(0);if("}"==i){++t;break}" "===i||";"===i?t+=1:t="@"===i?atrule(e,t,n,r,!1):"{"===i?block(e,t,n,r):ruleset(e,t,n,r)}r.endBlock&&r.endBlock();return t}(e,t,n,r):t+1,r.endAtrule&&r.endAtrule()}return t}function ruleset(e,t,n,r){var i=t,o=selector(e,t,n,!0);if(o<0)return(o=~o)===i?o+1:o;var a=e[o];if("{"!==a)return o===i?o+1:o;for(t=o+1,o>i&&" "===e[o-1]&&--o,r.startRuleset&&r.startRuleset(e.slice(i,o));t<n;){if("}"===(a=e[t])){++t;break}" "===a?t+=1:t=declaration(e,t,n,r)}return r.endRuleset&&r.endRuleset(),t}function selector(e,t,n,r){for(var i,o=[],a=-1;t<n;++t)if("["===(i=e[t].charAt(0))||"("===i)o[++a]=i;else if("]"===i&&"["===o[a]||")"===i&&"("===o[a])--a;else if("{"===i||"}"===i||";"===i||"@"===i||":"===i&&!r)break;return a>=0&&(t=~(t+1)),t}c=function(e,t){var n=a(e);t.startStylesheet&&t.startStylesheet();for(var r=0,i=n.length;r<i;)r=" "===n[r]?r+1:statement(n,r,i,t);t.endStylesheet&&t.endStylesheet()};var e=/^-?[a-z]/i;function skipDeclaration(e,t,n){for(;t<n&&";"!==e[t]&&"}"!==e[t];)++t;return t<n&&";"===e[t]?t+1:t}function declaration(t,n,r,i){var o,a=t[n++];if(!e.test(a))return skipDeclaration(t,n,r);if(n<r&&" "===t[n]&&++n,n==r||":"!==t[n])return skipDeclaration(t,n,r);++n<r&&" "===t[n]&&++n;var s=n,l=selector(t,n,r,!1);if(l<0)l=~l;else{for(var u=[],c=0,d=s;d<l;++d)" "!==(o=t[d])&&(u[c++]=o);if(l<r){do{if(";"===(o=t[l])||"}"===o)break;c=0}while(++l<r);";"===o&&++l}c&&i.declaration&&i.declaration(a.toLowerCase(),u)}return l}d=function(e,t){for(var n=a(e),r=0,i=n.length;r<i;)r=" "!==n[r]?declaration(n,r,i,t):r+1}}(),"undefined"!=typeof window&&(window.parseCssStylesheet=c,window.parseCssDeclarations=d);var g={atype:{NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13}};if(g.atype=g.atype,g.ATTRIBS={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onerror":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::ontouchcancel":2,"*::ontouchend":2,"*::ontouchenter":2,"*::ontouchleave":2,"*::ontouchmove":2,"*::ontouchstart":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::tabindex":0,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::target":0,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,"audio::muted":0,"audio::preload":0,"audio::src":1,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::pattern":0,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::optimum":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,"textarea::rows":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::src":1,"video::width":0},g.ATTRIBS=g.ATTRIBS,g.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256},g.eflags=g.eflags,g.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:16,img:2,input:2,ins:0,isindex:274,kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,var:0,video:0,wbr:2},g.ELEMENTS=g.ELEMENTS,g.ELEMENT_DOM_INTERFACES={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement",var:"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"},g.ELEMENT_DOM_INTERFACES=g.ELEMENT_DOM_INTERFACES,g.ueffects={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},g.ueffects=g.ueffects,g.URIEFFECTS={"a::href":2,"area::href":2,"audio::src":1,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1,"video::src":1},g.URIEFFECTS=g.URIEFFECTS,g.ltypes={UNSANDBOXED:2,SANDBOXED:1,DATA:0},g.ltypes=g.ltypes,g.LOADERTYPES={"a::href":2,"area::href":2,"audio::src":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1,"video::src":2},g.LOADERTYPES=g.LOADERTYPES,"undefined"!=typeof window&&(window.html4=g),"i"!=="I".toLowerCase())throw"I/i problem";var v=function(e){var t,n;"undefined"!=typeof window&&(t=window.parseCssDeclarations,n=window.sanitizeCssProperty,window.cssSchema);var r={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:"\xa0"},i=/^#(\d+)$/,o=/^#x([0-9A-Fa-f]+)$/,a=/^[A-Za-z][A-za-z0-9]+$/,s="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):null;function decodeOneEntity(e,t){return function lookupEntity(e){if(r.hasOwnProperty(e))return r[e];var t=e.match(i);if(t)return String.fromCharCode(parseInt(t[1],10));if(t=e.match(o))return String.fromCharCode(parseInt(t[1],16));if(s&&a.test(e)){s.innerHTML="&"+e+";";var n=s.textContent;return r[e]=n,n}return"&"+e+";"}(t)}var l=/\0/g;var c=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,d=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/;function unescapeEntities(e){return e.replace(c,decodeOneEntity)}var f=/&/g,h=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,p=/[<]/g,m=/>/g,g=/\"/g;function escapeAttrib(e){return(""+e).replace(f,"&amp;").replace(p,"&lt;").replace(m,"&gt;").replace(g,"&#34;")}function normalizeRCData(e){return e.replace(h,"&amp;$1").replace(p,"&lt;").replace(m,"&gt;")}var v=new RegExp("^\\s*([-.:\\w]+)(?:\\s*(=)\\s*((\")[^\"]*(\"|$)|(')[^']*('|$)|(?=[a-z][-\\w]*\\s*=)|[^\"'\\s]*))?","i"),y=3==="a,b".split(/(,)/).length,_=e.eflags.CDATA|e.eflags.RCDATA;function makeSaxParser(e){var t={cdata:e.cdata||e.cdata,comment:e.comment||e.comment,endDoc:e.endDoc||e.endDoc,endTag:e.endTag||e.endTag,pcdata:e.pcdata||e.pcdata,rcdata:e.rcdata||e.rcdata,startDoc:e.startDoc||e.startDoc,startTag:e.startTag||e.startTag};return function(e,n){return function parse(e,t,n){var r=function htmlSplit(e){var t=/(<\/|<\!--|<[!?]|[&<>])/g;if(e+="",y)return e.split(t);for(var n,r=[],i=0;null!==(n=t.exec(e));)r.push(e.substring(i,n.index)),r.push(n[0]),i=n.index+n[0].length;return r.push(e.substring(i)),r}(e);parseCPS(t,r,0,{noMoreGT:!1,noMoreEndComments:!1},n)}(e,t,n)}}var b={};function continuationMaker(e,t,n,r,i){return function(){parseCPS(e,t,n,r,i)}}function parseCPS(t,n,r,i,o){try{var a,s,l;t.startDoc&&0==r&&t.startDoc(o);for(var u=r,c=n.length;u<c;){var f=n[u++],h=n[u];switch(f){case"&":d.test(h)?(t.pcdata&&t.pcdata("&"+h,o,b,continuationMaker(t,n,u,i,o)),u++):t.pcdata&&t.pcdata("&amp;",o,b,continuationMaker(t,n,u,i,o));break;case"</":(a=/^([-\w:]+)[^\'\"]*/.exec(h))?a[0].length===h.length&&">"===n[u+1]?(u+=2,l=a[1].toLowerCase(),t.endTag&&t.endTag(l,o,b,continuationMaker(t,n,u,i,o))):u=parseEndTag(n,u,t,o,b,i):t.pcdata&&t.pcdata("&lt;/",o,b,continuationMaker(t,n,u,i,o));break;case"<":if(a=/^([-\w:]+)\s*\/?/.exec(h))if(a[0].length===h.length&&">"===n[u+1]){u+=2,l=a[1].toLowerCase(),t.startTag&&t.startTag(l,[],o,b,continuationMaker(t,n,u,i,o));var p=e.ELEMENTS[l];if(p&_)u=parseText(n,{name:l,next:u,eflags:p},t,o,b,i)}else u=parseStartTag(n,u,t,o,b,i);else t.pcdata&&t.pcdata("&lt;",o,b,continuationMaker(t,n,u,i,o));break;case"\x3c!--":if(!i.noMoreEndComments){for(s=u+1;s<c&&(">"!==n[s]||!/--$/.test(n[s-1]));s++);if(s<c){if(t.comment){var m=n.slice(u,s).join("");t.comment(m.substr(0,m.length-2),o,b,continuationMaker(t,n,s+1,i,o))}u=s+1}else i.noMoreEndComments=!0}i.noMoreEndComments&&t.pcdata&&t.pcdata("&lt;!--",o,b,continuationMaker(t,n,u,i,o));break;case"<!":if(/^\w/.test(h)){if(!i.noMoreGT){for(s=u+1;s<c&&">"!==n[s];s++);s<c?u=s+1:i.noMoreGT=!0}i.noMoreGT&&t.pcdata&&t.pcdata("&lt;!",o,b,continuationMaker(t,n,u,i,o))}else t.pcdata&&t.pcdata("&lt;!",o,b,continuationMaker(t,n,u,i,o));break;case"<?":if(!i.noMoreGT){for(s=u+1;s<c&&">"!==n[s];s++);s<c?u=s+1:i.noMoreGT=!0}i.noMoreGT&&t.pcdata&&t.pcdata("&lt;?",o,b,continuationMaker(t,n,u,i,o));break;case">":t.pcdata&&t.pcdata("&gt;",o,b,continuationMaker(t,n,u,i,o));break;case"":break;default:t.pcdata&&t.pcdata(f,o,b,continuationMaker(t,n,u,i,o))}}t.endDoc&&t.endDoc(o)}catch(e){if(e!==b)throw e}}function parseEndTag(e,t,n,r,i,o){var a=parseTagAndAttrs(e,t);return a?(n.endTag&&n.endTag(a.name,r,i,continuationMaker(n,e,t,o,r)),a.next):e.length}function parseStartTag(e,t,n,r,i,o){var a=parseTagAndAttrs(e,t);return a?(n.startTag&&n.startTag(a.name,a.attrs,r,i,continuationMaker(n,e,a.next,o,r)),a.eflags&_?parseText(e,a,n,r,i,o):a.next):e.length}var w={};function parseText(t,n,r,i,o,a){var s=t.length;w.hasOwnProperty(n.name)||(w[n.name]=new RegExp("^"+n.name+"(?:[\\s\\/]|$)","i"));for(var l=w[n.name],u=n.next,c=n.next+1;c<s&&("</"!==t[c-1]||!l.test(t[c]));c++);c<s&&(c-=1);var d=t.slice(u,c).join("");if(n.eflags&e.eflags.CDATA)r.cdata&&r.cdata(d,i,o,continuationMaker(r,t,c,a,i));else{if(!(n.eflags&e.eflags.RCDATA))throw new Error("bug");r.rcdata&&r.rcdata(normalizeRCData(d),i,o,continuationMaker(r,t,c,a,i))}return c}function parseTagAndAttrs(t,n){var r=/^([-\w:]+)/.exec(t[n]),i={};i.name=r[1].toLowerCase(),i.eflags=e.ELEMENTS[i.name];for(var o=t[n].substr(r[0].length),a=n+1,s=t.length;a<s&&">"!==t[a];a++)o+=t[a];if(!(s<=a)){for(var l=[];""!==o;)if(r=v.exec(o)){if(r[4]&&!r[5]||r[6]&&!r[7]){for(var u=r[4]||r[6],c=!1,d=[o,t[a++]];a<s;a++){if(c){if(">"===t[a])break}else 0<=t[a].indexOf(u)&&(c=!0);d.push(t[a])}if(s<=a)break;o=d.join("");continue}var f=r[1].toLowerCase(),h=r[2]?decodeValue(r[3]):"";l.push(f,h),o=o.substr(r[0].length)}else o=o.replace(/^[\s\S][^a-z\s]*/,"");return i.attrs=l,i.next=a+1,i}}function decodeValue(e){var t=e.charCodeAt(0);return 34!==t&&39!==t||(e=e.substr(1,e.length-2)),unescapeEntities(function stripNULs(e){return e.replace(l,"")}(e))}function makeHtmlSanitizer(t){var n,r,i=function(e,t){r||t.push(e)};return makeSaxParser({startDoc:function(e){n=[],r=!1},startTag:function(i,o,a){if(!r&&e.ELEMENTS.hasOwnProperty(i)){var s=e.ELEMENTS[i];if(!(s&e.eflags.FOLDABLE)){var l=t(i,o);if(l){if("object"!=typeof l)throw new Error("tagPolicy did not return object (old API?)");if(!("attribs"in l))throw new Error("tagPolicy gave no attribs");var u,c;if(o=l.attribs,"tagName"in l?(c=l.tagName,u=e.ELEMENTS[c]):(c=i,u=s),s&e.eflags.OPTIONAL_ENDTAG){var d=n[n.length-1];!d||d.orig!==i||d.rep===c&&i===c||a.push("</",d.rep,">")}s&e.eflags.EMPTY||n.push({orig:i,rep:c}),a.push("<",c);for(var f=0,h=o.length;f<h;f+=2){var p=o[f],m=o[f+1];null!==m&&void 0!==m&&a.push(" ",p,'="',escapeAttrib(m),'"')}a.push(">"),s&e.eflags.EMPTY&&!(u&e.eflags.EMPTY)&&a.push("</",c,">")}else r=!(s&e.eflags.EMPTY)}}},endTag:function(t,i){if(r)r=!1;else if(e.ELEMENTS.hasOwnProperty(t)){var o=e.ELEMENTS[t];if(!(o&(e.eflags.EMPTY|e.eflags.FOLDABLE))){var a;if(o&e.eflags.OPTIONAL_ENDTAG)for(a=n.length;--a>=0;){var s=n[a].orig;if(s===t)break;if(!(e.ELEMENTS[s]&e.eflags.OPTIONAL_ENDTAG))return}else for(a=n.length;--a>=0&&n[a].orig!==t;);if(a<0)return;for(var l=n.length;--l>a;){var u=n[l].rep;e.ELEMENTS[u]&e.eflags.OPTIONAL_ENDTAG||i.push("</",u,">")}a<n.length&&(t=n[a].rep),n.length=a,i.push("</",t,">")}}},pcdata:i,rcdata:i,cdata:i,endDoc:function(e){for(;n.length;n.length--)e.push("</",n[n.length-1].rep,">")}})}var x=/^(?:https?|mailto)$/i;function safeUri(e,t,n,r,i){if(!i)return null;try{var o=u.parse(""+e);if(o&&(!o.hasScheme()||x.test(o.getScheme()))){var a=i(o,t,n,r);return a?a.toString():null}}catch(e){return null}return null}function log(e,t,n,r,i){if(n||e(t+" removed",{change:"removed",tagName:t}),r!==i){var o="changed";r&&!i?o="removed":!r&&i&&(o="added"),e(t+"."+n+" "+o,{change:o,tagName:t,attribName:n,oldValue:r,newValue:i})}}function lookupAttribute(e,t,n){var r;return r=t+"::"+n,e.hasOwnProperty(r)?e[r]:(r="*::"+n,e.hasOwnProperty(r)?e[r]:void 0)}function getLoaderType(t,n){return lookupAttribute(e.LOADERTYPES,t,n)}function getUriEffect(t,n){return lookupAttribute(e.URIEFFECTS,t,n)}function sanitizeAttribs(r,i,o,a,s){for(var l=0;l<i.length;l+=2){var u,c=i[l],d=i[l+1],f=d,h=null;if(u=r+"::"+c,(e.ATTRIBS.hasOwnProperty(u)||(u="*::"+c,e.ATTRIBS.hasOwnProperty(u)))&&(h=e.ATTRIBS[u]),null!==h)switch(h){case e.atype.NONE:break;case e.atype.SCRIPT:d=null,s&&log(s,r,c,f,d);break;case e.atype.STYLE:if(void 0===t){d=null,s&&log(s,r,c,f,d);break}var p=[];t(d,{declaration:function(t,r){var i=t.toLowerCase();n(i,r,o?function(t){return safeUri(t,e.ueffects.SAME_DOCUMENT,e.ltypes.SANDBOXED,{TYPE:"CSS",CSS_PROP:i},o)}:null),r.length&&p.push(i+": "+r.join(" "))}}),d=p.length>0?p.join(" ; "):null,s&&log(s,r,c,f,d);break;case e.atype.ID:case e.atype.IDREF:case e.atype.IDREFS:case e.atype.GLOBAL_NAME:case e.atype.LOCAL_NAME:case e.atype.CLASSES:d=a?a(d):d,s&&log(s,r,c,f,d);break;case e.atype.URI:d=safeUri(d,getUriEffect(r,c),getLoaderType(r,c),{TYPE:"MARKUP",XML_ATTR:c,XML_TAG:r},o),s&&log(s,r,c,f,d);break;case e.atype.URI_FRAGMENT:d&&"#"===d.charAt(0)?(d=d.substring(1),null!==(d=a?a(d):d)&&void 0!==d&&(d="#"+d)):d=null,s&&log(s,r,c,f,d);break;default:d=null,s&&log(s,r,c,f,d)}else d=/data-[\w-]+/.test(c)?a?a(d):d:null,s&&log(s,r,c,f,d);i[l+1]=d}return i}function makeTagPolicy(t,n,r){return function(i,o){if(!(e.ELEMENTS[i]&e.eflags.UNSAFE))return{attribs:sanitizeAttribs(i,o,t,n,r)};r&&log(r,i,void 0,void 0,void 0)}}function sanitizeWithPolicy(e,t){var n=[];return makeHtmlSanitizer(t)(e,n),n.join("")}var C={};return C.escapeAttrib=C.escapeAttrib=escapeAttrib,C.makeHtmlSanitizer=C.makeHtmlSanitizer=makeHtmlSanitizer,C.makeSaxParser=C.makeSaxParser=makeSaxParser,C.makeTagPolicy=C.makeTagPolicy=makeTagPolicy,C.normalizeRCData=C.normalizeRCData=normalizeRCData,C.sanitize=C.sanitize=function sanitize(e,t,n,r){return sanitizeWithPolicy(e,makeTagPolicy(t,n,r))},C.sanitizeAttribs=C.sanitizeAttribs=sanitizeAttribs,C.sanitizeWithPolicy=C.sanitizeWithPolicy=sanitizeWithPolicy,C.unescapeEntities=C.unescapeEntities=unescapeEntities,C}(g),y=v.sanitize;"undefined"!=typeof window&&(window.html=v,window.html_sanitize=y),o(void 0!==v?v:t.html)}).call(t,void 0,void 0,void 0,void 0,function defineExport(t){e.exports=t})}).call(this,n(48))},function(e,t,n){(function(e){!function(e){var t,n,r={pos:[-260,-260]},i=3,o=document,a=o.documentElement,s=o.body;function unsetPos(){this===r.elem&&(r.pos=[-260,-260],r.elem=!1,i=3)}e.event.special.mwheelIntent={setup:function(){var t=e(this).on("mousewheel",e.event.special.mwheelIntent.handler);return this!==o&&this!==a&&this!==s&&t.on("mouseleave",unsetPos),t=null,!0},teardown:function(){return e(this).off("mousewheel",e.event.special.mwheelIntent.handler).off("mouseleave",unsetPos),!0},handler:function(o,a){var s=[o.clientX,o.clientY];if(this===r.elem||Math.abs(r.pos[0]-s[0])>i||Math.abs(r.pos[1]-s[1])>i)return r.elem=this,r.pos=s,i=250,clearTimeout(n),n=setTimeout(function(){i=10},200),clearTimeout(t),t=setTimeout(function(){i=3},1500),o=e.extend({},o,{type:"mwheelIntent"}),e.event.dispatch.apply(this,arguments)}},e.fn.extend({mwheelIntent:function(e){return e?this.on("mwheelIntent",e):this.trigger("mwheelIntent")},unmwheelIntent:function(e){return this.off("mwheelIntent",e)}}),e(function(){s=o.body,e(o).on("mwheelIntent.mwheelIntentDefault",e.noop)})}(e)}).call(this,n(9))},function(e,t,n){(function(e){!function(e){var t=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var n=t.length;n;)e.event.fixHooks[t[--n]]=e.event.mouseHooks;function handler(t){var n=t||window.event,r=[].slice.call(arguments,1),i=0,o=0,a=0;return(t=e.event.fix(n)).type="mousewheel",n.wheelDelta&&(i=n.wheelDelta/120),n.detail&&(i=-n.detail/3),a=i,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(a=0,o=-1*i),void 0!==n.wheelDeltaY&&(a=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(o=-1*n.wheelDeltaX/120),r.unshift(t,i,o,a),(e.event.dispatch||e.event.handle).apply(this,r)}e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],handler,!1);else this.onmousewheel=handler},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],handler,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(e)}).call(this,n(9))},function(e,t,n){window.L=n(611),n(3168),n(3167);var r=n(1386);window&&(window.cartodb=window.cdb=r),r.core={},r.core.sanitize=n(270),r.core.Template=n(378),r.core.Model=n(144),r.core.View=n(152),r.SQL=n(3162),r.createVis=n(3160),n(193).log("carto.js "+r.VERSION),r.helpers.GeoJSONHelper=n(302),e.exports=r},,,,,,function(e,t,n){n(450);var r=n(113);e.exports=r("Array").entries},function(e,t,n){var r=n(3175);e.exports=r},function(e,t,n){n(233);var r=n(3176),i=n(271),o=Array.prototype,a={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.entries;return e===o||e instanceof Array&&t===o.entries||a.hasOwnProperty(i(e))?r:t}},function(e,t,n){var r=n(67),i=n(118),o=n(307),a=i("iterator");e.exports=!r(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach(function(e,r){t.delete("b"),n+=r+e}),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})},function(e,t,n){"use strict";n(450);var r=n(34),i=n(234),o=n(3178),a=n(381),s=n(902),l=n(305),u=n(1525),c=n(306),d=n(622),f=n(212),h=n(343),p=n(271),m=n(211),g=n(129),v=n(341),y=n(346),_=n(1475),b=n(442),w=n(118),x=i("fetch"),C=i("Headers"),S=w("iterator"),k=c.set,T=c.getterFor("URLSearchParams"),L=c.getterFor("URLSearchParamsIterator"),M=/\+/g,E=Array(4),A=function(e){return E[e-1]||(E[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},P=function(e){try{return decodeURIComponent(e)}catch(t){return e}},R=function(e){var t=e.replace(M," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(A(n--),P);return t}},O=/[!'()~]|%20/g,D={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},F=function(e){return D[e]},I=function(e){return encodeURIComponent(e).replace(O,F)},N=function(e,t){if(t)for(var n,r,i=t.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),e.push({key:R(r.shift()),value:R(r.join("="))}))},$=function(e){this.entries.length=0,N(this.entries,e)},B=function(e,t){if(e<t)throw TypeError("Not enough arguments")},z=u(function Iterator(e,t){k(this,{type:"URLSearchParamsIterator",iterator:_(T(e).entries),kind:t})},"Iterator",function next(){var e=L(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),j=function URLSearchParams(){d(this,j,"URLSearchParams");var e,t,n,r,i,o,a,s,l,u=arguments.length>0?arguments[0]:void 0,c=[];if(k(this,{type:"URLSearchParams",entries:c,updateURL:function(){},updateSearchParams:$}),void 0!==u)if(g(u))if("function"==typeof(e=b(u)))for(n=(t=e.call(u)).next;!(r=n.call(t)).done;){if((a=(o=(i=_(m(r.value))).next).call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");c.push({key:a.value+"",value:s.value+""})}else for(l in u)f(u,l)&&c.push({key:l,value:u[l]+""});else N(c,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},U=j.prototype;s(U,{append:function append(e,t){B(arguments.length,2);var n=T(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){B(arguments.length,1);for(var t=T(this),n=t.entries,r=e+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function get(e){B(arguments.length,1);for(var t=T(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function getAll(e){B(arguments.length,1);for(var t=T(this).entries,n=e+"",r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function has(e){B(arguments.length,1);for(var t=T(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function set(e,t){B(arguments.length,1);for(var n,r=T(this),i=r.entries,o=!1,a=e+"",s=t+"",l=0;l<i.length;l++)(n=i[l]).key===a&&(o?i.splice(l--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function sort(){var e,t,n,r=T(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function forEach(e){for(var t,n=T(this).entries,r=h(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function keys(){return new z(this,"keys")},values:function values(){return new z(this,"values")},entries:function entries(){return new z(this,"entries")}},{enumerable:!0}),a(U,S,U.entries),a(U,"toString",function toString(){for(var e,t=T(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(I(e.key)+"="+I(e.value));return n.join("&")},{enumerable:!0}),l(j,"URLSearchParams"),r({global:!0,forced:!o},{URLSearchParams:j}),o||"function"!=typeof x||"function"!=typeof C||r({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(e){var t,n,r,i=[e];return arguments.length>1&&(t=arguments[1],g(t)&&(n=t.body,"URLSearchParams"===p(n)&&((r=t.headers?new C(t.headers):new C).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=v(t,{body:y(0,String(n)),headers:y(0,r)}))),i.push(t)),x.apply(this,i)}}),e.exports={URLSearchParams:j,getState:T}},function(e,t,n){n(3179);var r=n(52);e.exports=r.URLSearchParams},function(e,t,n){var r=n(3180);e.exports=r},function(e,t,n){var r=n(139),i=n(443);e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},function(e,t,n){"use strict";n(127);var r=n(133),i=n(348),o=n(1392),a=n(213),s=n(904),l=n(339),u=n(1478),c=n(250),d=n(445),f=n(140),h=n(380),p=n(457),m=n(139),g=n(165),v=n(386),y=n(349),_=n(3182),b=n(443),w=n(114),x=i("fetch"),C=i("Headers"),S=w("iterator"),k=c.set,T=c.getterFor("URLSearchParams"),L=c.getterFor("URLSearchParamsIterator"),M=/\+/g,E=Array(4),A=function(e){return E[e-1]||(E[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},P=function(e){try{return decodeURIComponent(e)}catch(t){return e}},R=function(e){var t=e.replace(M," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(A(n--),P);return t}},O=/[!'()~]|%20/g,D={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},F=function(e){return D[e]},I=function(e){return encodeURIComponent(e).replace(O,F)},N=function(e,t){if(t)for(var n,r,i=t.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),e.push({key:R(r.shift()),value:R(r.join("="))}))},$=function(e){this.entries.length=0,N(this.entries,e)},B=function(e,t){if(e<t)throw TypeError("Not enough arguments")},z=u(function Iterator(e,t){k(this,{type:"URLSearchParamsIterator",iterator:_(T(e).entries),kind:t})},"Iterator",function next(){var e=L(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),j=function URLSearchParams(){d(this,j,"URLSearchParams");var e,t,n,r,i,o,a,s,l,u=arguments.length>0?arguments[0]:void 0,c=[];if(k(this,{type:"URLSearchParams",entries:c,updateURL:function(){},updateSearchParams:$}),void 0!==u)if(g(u))if("function"==typeof(e=b(u)))for(n=(t=e.call(u)).next;!(r=n.call(t)).done;){if((a=(o=(i=_(m(r.value))).next).call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");c.push({key:a.value+"",value:s.value+""})}else for(l in u)f(u,l)&&c.push({key:l,value:u[l]+""});else N(c,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},U=j.prototype;s(U,{append:function append(e,t){B(arguments.length,2);var n=T(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){B(arguments.length,1);for(var t=T(this),n=t.entries,r=e+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function get(e){B(arguments.length,1);for(var t=T(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function getAll(e){B(arguments.length,1);for(var t=T(this).entries,n=e+"",r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function has(e){B(arguments.length,1);for(var t=T(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function set(e,t){B(arguments.length,1);for(var n,r=T(this),i=r.entries,o=!1,a=e+"",s=t+"",l=0;l<i.length;l++)(n=i[l]).key===a&&(o?i.splice(l--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function sort(){var e,t,n,r=T(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function forEach(e){for(var t,n=T(this).entries,r=h(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function keys(){return new z(this,"keys")},values:function values(){return new z(this,"values")},entries:function entries(){return new z(this,"entries")}},{enumerable:!0}),a(U,S,U.entries),a(U,"toString",function toString(){for(var e,t=T(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(I(e.key)+"="+I(e.value));return n.join("&")},{enumerable:!0}),l(j,"URLSearchParams"),r({global:!0,forced:!o},{URLSearchParams:j}),o||"function"!=typeof x||"function"!=typeof C||r({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(e){var t,n,r,i=[e];return arguments.length>1&&(t=arguments[1],g(t)&&(n=t.body,"URLSearchParams"===p(n)&&((r=t.headers?new C(t.headers):new C).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=v(t,{body:y(0,String(n)),headers:y(0,r)}))),i.push(t)),x.apply(this,i)}}),e.exports={URLSearchParams:j,getState:T}},function(e,t,n){"use strict";var r=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",a=Math.floor,s=String.fromCharCode,l=function(e){return e+22+75*(e<26)},u=function(e,t,n){var r=0;for(e=n?a(e/700):e>>1,e+=a(e/t);e>455;r+=36)e=a(e/35);return a(r+36*e/(e+38))},c=function(e){var t,n,r=[],i=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}(e)).length,c=128,d=0,f=72;for(t=0;t<e.length;t++)(n=e[t])<128&&r.push(s(n));var h=r.length,p=h;for(h&&r.push("-");p<i;){var m=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=c&&n<m&&(m=n);var g=p+1;if(m-c>a((2147483647-d)/g))throw RangeError(o);for(d+=(m-c)*g,c=m,t=0;t<e.length;t++){if((n=e[t])<c&&++d>2147483647)throw RangeError(o);if(n==c){for(var v=d,y=36;;y+=36){var _=y<=f?1:y>=f+26?26:y-f;if(v<_)break;var b=v-_,w=36-_;r.push(s(l(_+b%w))),v=a(b/w)}r.push(s(l(v))),f=u(d,g,p==h),d=0,++p}}++d,++c}return r.join("")};e.exports=function(e){var t,n,o=[],a=e.toLowerCase().replace(i,".").split(".");for(t=0;t<a.length;t++)n=a[t],o.push(r.test(n)?"xn--"+c(n):n);return o.join(".")}},function(e,t,n){"use strict";var r=n(388),i=n(154),o=n(349);e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},function(e,t,n){"use strict";var r=n(380),i=n(238),o=n(1506),a=n(903),s=n(145),l=n(3185),u=n(443);e.exports=function from(e){var t,n,c,d,f,h,p=i(e),m="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,y=void 0!==v,_=u(p),b=0;if(y&&(v=r(v,g>2?arguments[2]:void 0,2)),void 0==_||m==Array&&a(_))for(n=new m(t=s(p.length));t>b;b++)h=y?v(p[b],b):p[b],l(n,b,h);else for(f=(d=_.call(p)).next,n=new m;!(c=f.call(d)).done;b++)h=y?o(d,v,[c.value,b],!0):c.value,l(n,b,h);return n.length=b,n}},function(e,t,n){"use strict";var r=n(146),i=n(109),o=n(925),a=n(928),s=n(935),l=n(238),u=n(459),c=Object.assign,d=Object.defineProperty;e.exports=!c||i(function(){if(r&&1!==c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||"abcdefghijklmnopqrst"!=o(c({},t)).join("")})?function assign(e,t){for(var n=l(e),i=arguments.length,c=1,d=a.f,f=s.f;i>c;)for(var h,p=u(arguments[c++]),m=d?o(p).concat(d(p)):o(p),g=m.length,v=0;g>v;)h=m[v++],r&&!f.call(p,h)||(n[h]=p[h]);return n}:c},function(e,t,n){var r=n(59),i=n(1476),o=n(1422),a=n(214);for(var s in i){var l=r[s],u=l&&l.prototype;if(u&&u.forEach!==o)try{a(u,"forEach",o)}catch(e){u.forEach=o}}},function(e,t,n){"use strict";var r=n(308),i=n(249),o=n(145),a=n(927),s=n(613),l=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,d=a("lastIndexOf"),f=s("indexOf",{ACCESSORS:!0,1:0}),h=c||!d||!f;e.exports=h?function lastIndexOf(e){if(c)return u.apply(this,arguments)||0;var t=r(this),n=o(t.length),a=n-1;for(arguments.length>1&&(a=l(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:u},function(e,t,n){"use strict";var r=n(238),i=n(638),o=n(145),a=Math.min;e.exports=[].copyWithin||function copyWithin(e,t){var n=r(this),s=o(n.length),l=i(e,s),u=i(t,s),c=arguments.length>2?arguments[2]:void 0,d=a((void 0===c?s:i(c,s))-u,s-l),f=1;for(u<l&&l<u+d&&(f=-1,u+=d-1,l+=d-1);d-- >0;)u in n?n[l]=n[u]:delete n[l],l+=f,u+=f;return n}},function(e,t,n){var r=n(238),i=n(145),o=n(443),a=n(903),s=n(380),l=n(110).aTypedArrayConstructor;e.exports=function from(e){var t,n,u,c,d,f,h=r(e),p=arguments.length,m=p>1?arguments[1]:void 0,g=void 0!==m,v=o(h);if(void 0!=v&&!a(v))for(f=(d=v.call(h)).next,h=[];!(c=f.call(d)).done;)h.push(c.value);for(g&&p>2&&(m=s(m,arguments[2],2)),n=i(h.length),u=new(l(this))(n),t=0;n>t;t++)u[t]=g?m(h[t],t):h[t];return u}},function(e,t,n){var r=n(249);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},function(e,t,n){var r=n(59),i=n(109),o=n(1505),a=n(110).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,l=r.Int8Array;e.exports=!a||!i(function(){l(1)})||!i(function(){new l(-1)})||!o(function(e){new l,new l(null),new l(1.5),new l(e)},!0)||i(function(){return 1!==new l(new s(2),1,void 0).length})},function(e,t,n){n(1418)("Uint8",function(e){return function Uint8Array(t,n,r){return e(this,t,n,r)}})},function(e,t){var n=Math.abs,r=Math.pow,i=Math.floor,o=Math.log,a=Math.LN2;e.exports={pack:function(e,t,s){var l,u,c,d=new Array(s),f=8*s-t-1,h=(1<<f)-1,p=h>>1,m=23===t?r(2,-24)-r(2,-77):0,g=e<0||0===e&&1/e<0?1:0,v=0;for((e=n(e))!=e||e===1/0?(u=e!=e?1:0,l=h):(l=i(o(e)/a),e*(c=r(2,-l))<1&&(l--,c*=2),(e+=l+p>=1?m/c:m*r(2,1-p))*c>=2&&(l++,c/=2),l+p>=h?(u=0,l=h):l+p>=1?(u=(e*c-1)*r(2,t),l+=p):(u=e*r(2,p-1)*r(2,t),l=0));t>=8;d[v++]=255&u,u/=256,t-=8);for(l=l<<t|u,f+=t;f>0;d[v++]=255&l,l/=256,f-=8);return d[--v]|=128*g,d},unpack:function(e,t){var n,i=e.length,o=8*i-t-1,a=(1<<o)-1,s=a>>1,l=o-7,u=i-1,c=e[u--],d=127&c;for(c>>=7;l>0;d=256*d+e[u],u--,l-=8);for(n=d&(1<<-l)-1,d>>=-l,l+=t;l>0;n=256*n+e[u],u--,l-=8);if(0===d)d=1-s;else{if(d===a)return n?NaN:c?-1/0:1/0;n+=r(2,t),d-=s}return(c?-1:1)*n*r(2,d-t)}}},function(e,t,n){"use strict";var r=n(133),i=n(59),o=n(1421),a=n(623),s=o.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==s},{ArrayBuffer:s}),a("ArrayBuffer")},function(e,t,n){"use strict";var r=n(133),i=n(1422);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(e,t,n){n(1481)("iterator")},function(e,t,n){"use strict";n(196),n(195),n(3198),n(3197),n(127),n(23),n(209),n(3196),n(24),n(29),n(46),n(16),n(51),n(147),n(25),n(35),n(3194),n(1416),n(1415),n(1414),n(1413),n(1412),n(1411),n(1410),n(1409),n(1408),n(1407),n(1406),n(1405),n(1404),n(1403),n(1401),n(1400),n(1399),n(1398),n(1397),n(1396),n(1395),n(1394),n(1393),n(3188),n(143),n(1571);var r=n(43),i=n.n(r),o=n(37),a=n.n(o),s=n(38),l=n.n(s),u=n(36),c=n.n(u),d=n(1001),f=n.n(d),h=n(18),p=n.n(h),m=n(28),g=n.n(m),v=n(1564),y=n.n(v),_=n(5),b=n.n(_),w=n(468),x=n.n(w),C=n(26),S=n.n(C),k=n(7),T=n.n(k),L=n(742),M=n.n(L),E=n(11),A=n.n(E),P=n(313),R="undefined"!=typeof self&&self||void 0!==R&&R,O={searchParams:"URLSearchParams"in R,iterable:"Symbol"in R&&"iterator"in n.n(P).a,blob:"FileReader"in R&&"Blob"in R&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in R,arrayBuffer:"ArrayBuffer"in R};if(O.arrayBuffer)var D=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],F=ArrayBuffer.isView||function(e){return e&&A()(D).call(D,Object.prototype.toString.call(e))>-1};function normalizeName(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function normalizeValue(e){return"string"!=typeof e&&(e=String(e)),e}function iteratorFor(e){var t={next:function next(){var t=e.shift();return{done:void 0===t,value:t}}};return O.iterable&&(t[M.a]=function(){return t}),t}function Headers(e){if(this.map={},e instanceof Headers)T()(e).call(e,function(e,t){this.append(t,e)},this);else if(S()(e))T()(e).call(e,function(e){this.append(e[0],e[1])},this);else if(e){var t;T()(t=x()(e)).call(t,function(t){this.append(t,e[t])},this)}}function consumed(e){if(e.bodyUsed)return g.a.reject(new TypeError("Already read"));e.bodyUsed=!0}function fileReaderReady(e){return new g.a(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function readBlobAsArrayBuffer(e){var t=new FileReader,n=fileReaderReady(t);return t.readAsArrayBuffer(e),n}function bufferClone(e){if(p()(e))return p()(e).call(e,0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:O.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:O.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:O.searchParams&&f.a.prototype.isPrototypeOf(e)?this._bodyText=e.toString():O.arrayBuffer&&O.blob&&function isDataView(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=bufferClone(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):O.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||F(e))?this._bodyArrayBuffer=bufferClone(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):O.searchParams&&f.a.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},O.blob&&(this.blob=function(){var e=consumed(this);if(e)return e;if(this._bodyBlob)return g.a.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return g.a.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return g.a.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e,t=consumed(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?g.a.resolve(p()(e=this._bodyArrayBuffer.buffer).call(e,this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):g.a.resolve(this._bodyArrayBuffer))}return this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var e=consumed(this);if(e)return e;if(this._bodyBlob)return function readBlobAsText(e){var t=new FileReader,n=fileReaderReady(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return g.a.resolve(function readArrayBufferAsText(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return g.a.resolve(this._bodyText)},O.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(e,t){e=normalizeName(e),t=normalizeValue(t);var n=b()(this)[e];b()(this)[e]=n?n+", "+t:t},Headers.prototype.delete=function(e){delete b()(this)[normalizeName(e)]},Headers.prototype.get=function(e){return e=normalizeName(e),this.has(e)?b()(this)[e]:null},Headers.prototype.has=function(e){return b()(this).hasOwnProperty(normalizeName(e))},Headers.prototype.set=function(e,t){b()(this)[normalizeName(e)]=normalizeValue(t)},Headers.prototype.forEach=function(e,t){for(var n in b()(this))b()(this).hasOwnProperty(n)&&e.call(t,b()(this)[n],n,this)},Headers.prototype.keys=function(){var e,t=[];return T()(e=this).call(e,function(e,n){t.push(n)}),iteratorFor(t)},Headers.prototype.values=function(){var e,t=[];return T()(e=this).call(e,function(e){t.push(e)}),iteratorFor(t)},Headers.prototype.entries=function(){var e,t=[];return T()(e=this).call(e,function(e,n){t.push([n,e])}),iteratorFor(t)},O.iterable&&(Headers.prototype[M.a]=y()(Headers.prototype));var I=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Request(e,t){if(!(this instanceof Request))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n=(t=t||{}).body;if(e instanceof Request){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Headers(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new Headers(t.headers)),this.method=function normalizeMethod(e){var t=e.toUpperCase();return A()(I).call(I,t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function decode(e){var t,n=new FormData;return T()(t=c()(e).call(e).split("&")).call(t,function(e){if(e){var t=e.split("="),r=t.shift().replace(/\+/g," "),i=t.join("=").replace(/\+/g," ");n.append(decodeURIComponent(r),decodeURIComponent(i))}}),n}function Response(e,t){if(!(this instanceof Response))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new Headers(t.headers),this.url=t.url||"",this._initBody(e)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var e=new Response(null,{status:0,statusText:""});return e.type="error",e};var N=[301,302,303,307,308];Response.redirect=function(e,t){if(-1===A()(N).call(N,t))throw new RangeError("Invalid status code");return new Response(null,{status:t,headers:{location:e}})};var $=R.DOMException;try{new $}catch(e){($=function DOMException(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=l()(Error.prototype),$.prototype.constructor=$}function fetch(e,t){return new g.a(function(n,r){var o=new Request(e,t);if(o.signal&&o.signal.aborted)return r(new $("Aborted","AbortError"));var s,l,u,d=new XMLHttpRequest;function abortXhr(){d.abort()}(d.onload=function(){var e={status:d.status,statusText:d.statusText,headers:function parseHeaders(e){var t,n=new Headers,r=e.replace(/\r?\n[\t ]+/g," ");return T()(t=r.split(/\r?\n/)).call(t,function(e){var t,r=e.split(":"),i=c()(t=r.shift()).call(t);if(i){var o,a=c()(o=r.join(":")).call(o);n.append(i,a)}}),n}(d.getAllResponseHeaders()||"")};e.url="responseURL"in d?d.responseURL:e.headers.get("X-Request-URL");var t="response"in d?d.response:d.responseText;a()(function(){n(new Response(t,e))},0)},d.onerror=function(){a()(function(){r(new TypeError("Network request failed"))},0)},d.ontimeout=function(){a()(function(){r(new TypeError("Network request failed"))},0)},d.onabort=function(){a()(function(){r(new $("Aborted","AbortError"))},0)},d.open(o.method,function fixUrl(e){try{return""===e&&R.location.href?R.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?d.withCredentials=!0:"omit"===o.credentials&&(d.withCredentials=!1),"responseType"in d)&&(O.blob?d.responseType="blob":O.arrayBuffer&&o.headers.get("Content-Type")&&-1!==A()(s=o.headers.get("Content-Type")).call(s,"application/octet-stream")&&(d.responseType="arraybuffer"));!t||"object"!==i()(t.headers)||t.headers instanceof Headers?T()(l=o.headers).call(l,function(e,t){d.setRequestHeader(t,e)}):T()(u=x()(t.headers)).call(u,function(e){d.setRequestHeader(e,normalizeValue(t.headers[e]))});o.signal&&(o.signal.addEventListener("abort",abortXhr),d.onreadystatechange=function(){4===d.readyState&&o.signal.removeEventListener("abort",abortXhr)}),d.send(void 0===o._bodyInit?null:o._bodyInit)})}fetch.polyfill=!0,R.fetch||(R.fetch=fetch,R.Headers=Headers,R.Request=Request,R.Response=Response)},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(1453);e.exports=function subYears(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(896);e.exports=function subWeeks(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(1454);e.exports=function subSeconds(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(1455);e.exports=function subQuarters(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(616);e.exports=function subMonths(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(1456);e.exports=function subMinutes(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(439);e.exports=function subMilliseconds(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(1459);e.exports=function subHours(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(440);e.exports=function subDays(e,t){var n=Number(t);return r(e,-n)}},function(e,t){e.exports=function startOfYesterday(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),i=new Date(0);return i.setFullYear(t,n,r-1),i.setHours(0,0,0,0),i}},function(e,t){e.exports=function startOfTomorrow(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),i=new Date(0);return i.setFullYear(t,n,r+1),i.setHours(0,0,0,0),i}},function(e,t,n){var r=n(336);e.exports=function startOfToday(){return r(new Date)}},function(e,t,n){var r=n(22);e.exports=function startOfMonth(e){var t=r(e);return t.setDate(1),t.setHours(0,0,0,0),t}},function(e,t,n){var r=n(22);e.exports=function setYear(e,t){var n=r(e),i=Number(t);return n.setFullYear(i),n}},function(e,t,n){var r=n(22);e.exports=function setSeconds(e,t){var n=r(e),i=Number(t);return n.setSeconds(i),n}},function(e,t,n){var r=n(22),i=n(1426);e.exports=function setQuarter(e,t){var n=r(e),o=Number(t)-(Math.floor(n.getMonth()/3)+1);return i(n,n.getMonth()+3*o)}},function(e,t,n){var r=n(22);e.exports=function setMinutes(e,t){var n=r(e),i=Number(t);return n.setMinutes(i),n}},function(e,t,n){var r=n(22);e.exports=function setMilliseconds(e,t){var n=r(e),i=Number(t);return n.setMilliseconds(i),n}},function(e,t,n){var r=n(22),i=n(890);e.exports=function setISOWeek(e,t){var n=r(e),o=Number(t),a=i(n)-o;return n.setDate(n.getDate()-7*a),n}},function(e,t,n){var r=n(22),i=n(440),o=n(1440);e.exports=function setISODay(e,t){var n=r(e),a=Number(t),s=o(n);return i(n,a-s)}},function(e,t,n){var r=n(22);e.exports=function setHours(e,t){var n=r(e),i=Number(t);return n.setHours(i),n}},function(e,t,n){var r=n(22);e.exports=function setDayOfYear(e,t){var n=r(e),i=Number(t);return n.setMonth(0),n.setDate(i),n}},function(e,t,n){var r=n(22),i=n(440);e.exports=function setDay(e,t,n){var o=n&&Number(n.weekStartsOn)||0,a=r(e),s=Number(t),l=a.getDay();return i(a,((s%7+7)%7<o?7:0)+s-l)}},function(e,t,n){var r=n(22);e.exports=function setDate(e,t){var n=r(e),i=Number(t);return n.setDate(i),n}},function(e,t,n){var r=n(22);e.exports=function min(){var e=Array.prototype.slice.call(arguments).map(function(e){return r(e)}),t=Math.min.apply(null,e);return new Date(t)}},function(e,t,n){var r=n(22);e.exports=function max(){var e=Array.prototype.slice.call(arguments).map(function(e){return r(e)}),t=Math.max.apply(null,e);return new Date(t)}},function(e,t,n){var r=n(22);e.exports=function lastDayOfYear(e){var t=r(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(0,0,0,0),t}},function(e,t,n){var r=n(22);e.exports=function lastDayOfQuarter(e){var t=r(e),n=t.getMonth(),i=n-n%3+3;return t.setMonth(i,0),t.setHours(0,0,0,0),t}},function(e,t,n){var r=n(22);e.exports=function lastDayOfMonth(e){var t=r(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}},function(e,t,n){var r=n(338),i=n(337);e.exports=function lastDayOfISOYear(e){var t=r(e),n=new Date(0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);var o=i(n);return o.setDate(o.getDate()-1),o}},function(e,t,n){var r=n(1427);e.exports=function lastDayOfISOWeek(e){return r(e,{weekStartsOn:1})}},function(e,t,n){var r=n(336);e.exports=function isYesterday(e){var t=new Date;return t.setDate(t.getDate()-1),r(e).getTime()===r(t).getTime()}},function(e,t,n){var r=n(22);e.exports=function isWithinRange(e,t,n){var i=r(e).getTime(),o=r(t).getTime(),a=r(n).getTime();if(o>a)throw new Error("The start of the range cannot be after the end of the range");return i>=o&&i<=a}},function(e,t,n){var r=n(22);e.exports=function isWeekend(e){var t=r(e).getDay();return 0===t||6===t}},function(e,t,n){var r=n(22);e.exports=function isWednesday(e){return 3===r(e).getDay()}},function(e,t,n){var r=n(22);e.exports=function isTuesday(e){return 2===r(e).getDay()}},function(e,t,n){var r=n(336);e.exports=function isTomorrow(e){var t=new Date;return t.setDate(t.getDate()+1),r(e).getTime()===r(t).getTime()}},function(e,t,n){var r=n(336);e.exports=function isToday(e){return r(e).getTime()===r(new Date).getTime()}},function(e,t,n){var r=n(22);e.exports=function isThursday(e){return 4===r(e).getDay()}},function(e,t,n){var r=n(1428);e.exports=function isThisYear(e){return r(new Date,e)}},function(e,t,n){var r=n(889);e.exports=function isThisWeek(e,t){return r(new Date,e,t)}},function(e,t,n){var r=n(1430);e.exports=function isThisSecond(e){return r(new Date,e)}},function(e,t,n){var r=n(1432);e.exports=function isThisQuarter(e){return r(new Date,e)}},function(e,t,n){var r=n(1433);e.exports=function isThisMonth(e){return r(new Date,e)}},function(e,t,n){var r=n(1435);e.exports=function isThisMinute(e){return r(new Date,e)}},function(e,t,n){var r=n(1436);e.exports=function isThisISOYear(e){return r(new Date,e)}},function(e,t,n){var r=n(1437);e.exports=function isThisISOWeek(e){return r(new Date,e)}},function(e,t,n){var r=n(1439);e.exports=function isThisHour(e){return r(new Date,e)}},function(e,t,n){var r=n(22);e.exports=function isSunday(e){return 0===r(e).getDay()}},function(e,t,n){var r=n(22);e.exports=function isSaturday(e){return 6===r(e).getDay()}},function(e,t,n){var r=n(336);e.exports=function isSameDay(e,t){var n=r(e),i=r(t);return n.getTime()===i.getTime()}},function(e,t,n){var r=n(22);e.exports=function isPast(e){return r(e).getTime()<(new Date).getTime()}},function(e,t,n){var r=n(22);e.exports=function isMonday(e){return 1===r(e).getDay()}},function(e,t,n){var r=n(22),i=n(891),o=n(1445);e.exports=function isLastDayOfMonth(e){var t=r(e);return i(t).getTime()===o(t).getTime()}},function(e,t,n){var r=n(22);e.exports=function isFuture(e){return r(e).getTime()>(new Date).getTime()}},function(e,t,n){var r=n(22);e.exports=function isFriday(e){return 5===r(e).getDay()}},function(e,t,n){var r=n(22);e.exports=function isFirstDayOfMonth(e){return 1===r(e).getDate()}},function(e,t,n){var r=n(22);e.exports=function isEqual(e,t){var n=r(e),i=r(t);return n.getTime()===i.getTime()}},function(e,t,n){var r=n(22);e.exports=function isBefore(e,t){var n=r(e),i=r(t);return n.getTime()<i.getTime()}},function(e,t,n){var r=n(22);e.exports=function getYear(e){return r(e).getFullYear()}},function(e,t,n){var r=n(22);e.exports=function getTime(e){return r(e).getTime()}},function(e,t,n){var r=n(22);e.exports=function getSeconds(e){return r(e).getSeconds()}},function(e,t,n){var r=n(22),i=864e5;e.exports=function getOverlappingDaysInRanges(e,t,n,o){var a=r(e).getTime(),s=r(t).getTime(),l=r(n).getTime(),u=r(o).getTime();if(a>s||l>u)throw new Error("The start of the range cannot be after the end of the range");if(!(a<u&&l<s))return 0;var c=(u>s?s:u)-(l<a?a:l);return Math.ceil(c/i)}},function(e,t,n){var r=n(22);e.exports=function getMonth(e){return r(e).getMonth()}},function(e,t,n){var r=n(22);e.exports=function getMinutes(e){return r(e).getMinutes()}},function(e,t,n){var r=n(22);e.exports=function getMilliseconds(e){return r(e).getMilliseconds()}},function(e,t,n){var r=n(438),i=n(896),o=6048e5;e.exports=function getISOWeeksInYear(e){var t=r(e),n=r(i(t,60)).valueOf()-t.valueOf();return Math.round(n/o)}},function(e,t,n){var r=n(22);e.exports=function getHours(e){return r(e).getHours()}},function(e,t,n){var r=n(1441);e.exports=function getDaysInYear(e){return r(e)?366:365}},function(e,t,n){var r=n(22);e.exports=function getDay(e){return r(e).getDay()}},function(e,t,n){var r=n(22);e.exports=function getDate(e){return r(e).getDate()}},function(e,t){e.exports=function endOfYesterday(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),i=new Date(0);return i.setFullYear(t,n,r-1),i.setHours(23,59,59,999),i}},function(e,t,n){var r=n(22);e.exports=function endOfYear(e){var t=r(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}},function(e,t){e.exports=function endOfTomorrow(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),i=new Date(0);return i.setFullYear(t,n,r+1),i.setHours(23,59,59,999),i}},function(e,t,n){var r=n(891);e.exports=function endOfToday(){return r(new Date)}},function(e,t,n){var r=n(22);e.exports=function endOfSecond(e){var t=r(e);return t.setMilliseconds(999),t}},function(e,t,n){var r=n(22);e.exports=function endOfQuarter(e){var t=r(e),n=t.getMonth(),i=n-n%3+3;return t.setMonth(i,0),t.setHours(23,59,59,999),t}},function(e,t,n){var r=n(22);e.exports=function endOfMinute(e){var t=r(e);return t.setSeconds(59,999),t}},function(e,t,n){var r=n(338),i=n(337);e.exports=function endOfISOYear(e){var t=r(e),n=new Date(0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);var o=i(n);return o.setMilliseconds(o.getMilliseconds()-1),o}},function(e,t,n){var r=n(1446);e.exports=function endOfISOWeek(e){return r(e,{weekStartsOn:1})}},function(e,t,n){var r=n(22);e.exports=function endOfHour(e){var t=r(e);return t.setMinutes(59,59,999),t}},function(e,t,n){var r=n(22);e.exports=function eachDay(e,t,n){var i=r(e),o=r(t),a=void 0!==n?n:1,s=o.getTime();if(i.getTime()>s)throw new Error("The first date cannot be after the second date");var l=[],u=i;for(u.setHours(0,0,0,0);u.getTime()<=s;)l.push(r(u)),u.setDate(u.getDate()+a);return l}},function(e,t,n){var r=n(1447);e.exports=function distanceInWordsToNow(e,t){return r(Date.now(),e,t)}},function(e,t){var n=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];e.exports=function buildFormattingTokensRegExp(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);var i=n.concat(t).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+i.join("|")+"|.)","g")}},function(e,t,n){var r=n(3306);e.exports=function buildFormatLocale(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Su","Mo","Tu","We","Th","Fr","Sa"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["AM","PM"],s=["am","pm"],l=["a.m.","p.m."],u={MMM:function(t){return e[t.getMonth()]},MMMM:function(e){return t[e.getMonth()]},dd:function(e){return n[e.getDay()]},ddd:function(e){return i[e.getDay()]},dddd:function(e){return o[e.getDay()]},A:function(e){return e.getHours()/12>=1?a[1]:a[0]},a:function(e){return e.getHours()/12>=1?s[1]:s[0]},aa:function(e){return e.getHours()/12>=1?l[1]:l[0]}};return["M","D","DDD","d","Q","W"].forEach(function(e){u[e+"o"]=function(t,n){return function ordinal(e){var t=e%100;if(t>20||t<10)switch(t%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"}(n[e](t))}}),{formatters:u,formattingTokensRegExp:r(u)}}},function(e,t){e.exports=function buildDistanceInWordsLocale(){var e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function localize(t,n,r){var i;return r=r||{},i="string"==typeof e[t]?e[t]:1===n?e[t].one:e[t].other.replace("{{count}}",n),r.addSuffix?r.comparison>0?"in "+i:i+" ago":i}}}},function(e,t,n){var r=n(22),i=n(1449),o=n(437);e.exports=function differenceInYears(e,t){var n=r(e),a=r(t),s=o(n,a),l=Math.abs(i(n,a));return n.setFullYear(n.getFullYear()-s*l),s*(l-(o(n,a)===-s))}},function(e,t,n){var r=n(707);e.exports=function differenceInWeeks(e,t){var n=r(e,t)/7;return n>0?Math.floor(n):Math.ceil(n)}},function(e,t,n){var r=n(894);e.exports=function differenceInQuarters(e,t){var n=r(e,t)/3;return n>0?Math.floor(n):Math.ceil(n)}},function(e,t,n){var r=n(615),i=6e4;e.exports=function differenceInMinutes(e,t){var n=r(e,t)/i;return n>0?Math.floor(n):Math.ceil(n)}},function(e,t,n){var r=n(22),i=n(1452),o=n(437),a=n(1448);e.exports=function differenceInISOYears(e,t){var n=r(e),s=r(t),l=o(n,s),u=Math.abs(i(n,s));return n=a(n,l*u),l*(u-(o(n,s)===-l))}},function(e,t,n){var r=n(615),i=36e5;e.exports=function differenceInHours(e,t){var n=r(e,t)/i;return n>0?Math.floor(n):Math.ceil(n)}},function(e,t,n){var r=n(618),i=6e4,o=6048e5;e.exports=function differenceInCalendarWeeks(e,t,n){var a=r(e,n),s=r(t,n),l=a.getTime()-a.getTimezoneOffset()*i,u=s.getTime()-s.getTimezoneOffset()*i;return Math.round((l-u)/o)}},function(e,t,n){var r=n(1450),i=n(22);e.exports=function differenceInCalendarQuarters(e,t){var n=i(e),o=i(t);return 4*(n.getFullYear()-o.getFullYear())+(r(n)-r(o))}},function(e,t,n){var r=n(337),i=6e4,o=6048e5;e.exports=function differenceInCalendarISOWeeks(e,t){var n=r(e),a=r(t),s=n.getTime()-n.getTimezoneOffset()*i,l=a.getTime()-a.getTimezoneOffset()*i;return Math.round((s-l)/o)}},function(e,t,n){var r=n(22);e.exports=function closestTo(e,t){if(!(t instanceof Array))throw new TypeError(toString.call(t)+" is not an instance of Array");var n,i,o=r(e).getTime();return t.forEach(function(e){var t=r(e),a=Math.abs(o-t.getTime());(void 0===n||a<i)&&(n=t,i=a)}),n}},function(e,t,n){var r=n(22);e.exports=function closestIndexTo(e,t){if(!(t instanceof Array))throw new TypeError(toString.call(t)+" is not an instance of Array");var n,i,o=r(e).getTime();return t.forEach(function(e,t){var a=r(e),s=Math.abs(o-a.getTime());(void 0===n||s<i)&&(n=t,i=s)}),n}},function(e,t,n){var r=n(22);e.exports=function areRangesOverlapping(e,t,n,i){var o=r(e).getTime(),a=r(t).getTime(),s=r(n).getTime(),l=r(i).getTime();if(o>a||s>l)throw new Error("The start of the range cannot be after the end of the range");return o<l&&s<a}},function(e,t){e.exports=function getTimezoneOffsetInMilliseconds(e){var t=new Date(e.getTime()),n=t.getTimezoneOffset();return t.setSeconds(0,0),6e4*n+t.getTime()%6e4}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(1462),i=n(1461);e.exports=r("Map",function(e){return function Map(){return e(this,arguments.length?arguments[0]:void 0)}},i)},function(e,t,n){n(3337),n(449),n(304),n(233);var r=n(52);e.exports=r.Map},function(e,t,n){var r=n(3338);e.exports=r},function(e,t,n){n(450);var r=n(113);e.exports=r("Array").values},function(e,t,n){var r=n(3340);e.exports=r},function(e,t,n){n(233);var r=n(3341),i=n(271),o=Array.prototype,a={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.values;return e===o||e instanceof Array&&t===o.values||a.hasOwnProperty(i(e))?r:t}},function(e,t,n){"use strict";var r=n(34),i=n(272).find,o=n(453),a=!0,s=n(210)("find");"find"in[]&&Array(1).find(function(){a=!1}),r({target:"Array",proto:!0,forced:a||!s},{find:function find(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("find")},function(e,t,n){n(3343);var r=n(113);e.exports=r("Array").find},function(e,t,n){var r=n(3344),i=Array.prototype;e.exports=function(e){var t=e.find;return e===i||e instanceof Array&&t===i.find?r:t}},function(e,t,n){var r=n(3345);e.exports=r},,,,,function(e,t,n){"use strict";var r=n(383),i=n(344);e.exports="".repeat||function repeat(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){n(34)({target:"String",proto:!0},{repeat:n(3351)})},function(e,t,n){n(3352);var r=n(113);e.exports=r("String").repeat},function(e,t,n){var r=n(3353),i=String.prototype;e.exports=function(e){var t=e.repeat;return"string"==typeof e||e===i||e instanceof String&&t===i.repeat?r:t}},function(e,t,n){var r=n(3354);e.exports=r},function(e,t){e.exports=Object.is||function is(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(249),i=n(251);e.exports="".repeat||function repeat(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){var r=n(252);e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},function(e,t,n){var r=n(119),i=n(911).trim,o=n(628),a=r.parseFloat,s=1/a(o+"-0")!=-1/0;e.exports=s?function parseFloat(e){var t=i(String(e)),n=a(t);return 0===n&&"-"==t.charAt(0)?-0:n}:a},function(e,t,n){var r=n(34),i=n(3359);r({global:!0,forced:parseFloat!=i},{parseFloat:i})},function(e,t,n){n(3360);var r=n(52);e.exports=r.parseFloat},function(e,t,n){var r=n(3361);e.exports=r},function(e,t,n){n(34)({target:"Reflect",stat:!0},{ownKeys:n(1467)})},function(e,t,n){n(3363);var r=n(52);e.exports=r.Reflect.ownKeys},function(e,t,n){var r=n(3364);e.exports=r},function(e,t,n){"use strict";var r=n(1462),i=n(1461);e.exports=r("Set",function(e){return function Set(){return e(this,arguments.length?arguments[0]:void 0)}},i)},function(e,t,n){n(3366),n(449),n(304),n(233);var r=n(52);e.exports=r.Set},function(e,t,n){var r=n(3367);e.exports=r},function(e,t,n){var r=n(34),i=n(67),o=n(1513).f;r({target:"Object",stat:!0,forced:i(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:o})},function(e,t,n){n(3369);var r=n(52).Object;e.exports=function getOwnPropertyNames(e){return r.getOwnPropertyNames(e)}},function(e,t,n){var r=n(3370);e.exports=r},function(e,t,n){var r=n(34),i=n(67),o=n(129),a=Object.isExtensible;r({target:"Object",stat:!0,forced:i(function(){a(1)})},{isExtensible:function isExtensible(e){return!!o(e)&&(!a||a(e))}})},function(e,t,n){n(3372);var r=n(52);e.exports=r.Object.isExtensible},function(e,t,n){var r=n(3373);e.exports=r},function(e,t,n){n(1463);var r=n(52);e.exports=r.setTimeout},function(e,t,n){var r=n(34),i=n(119),o=n(901);r({global:!0,bind:!0,enumerable:!0,forced:!i.setImmediate||!i.clearImmediate},{setImmediate:o.set,clearImmediate:o.clear})},function(e,t,n){n(3376);var r=n(52);e.exports=r.setImmediate},function(e,t,n){var r=n(34),i=n(67),o=n(129),a=Object.isFrozen;r({target:"Object",stat:!0,forced:i(function(){a(1)})},{isFrozen:function isFrozen(e){return!o(e)||!!a&&a(e)}})},function(e,t,n){n(3378);var r=n(52);e.exports=r.Object.isFrozen},function(e,t,n){var r=n(3379);e.exports=r},function(e,t,n){n(1512),n(449),n(1511),n(1510);var r=n(625);e.exports=r.f("toStringTag")},function(e,t,n){var r=n(3381);e.exports=r},function(e,t,n){n(34)({target:"Date",stat:!0},{now:function now(){return(new Date).getTime()}})},function(e,t,n){n(3383);var r=n(52);e.exports=r.Date.now},function(e,t,n){var r=n(3384);e.exports=r},function(e,t,n){n(450);var r=n(113);e.exports=r("Array").keys},function(e,t,n){var r=n(3386);e.exports=r},function(e,t,n){n(233);var r=n(3387),i=n(271),o=Array.prototype,a={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.keys;return e===o||e instanceof Array&&t===o.keys||a.hasOwnProperty(i(e))?r:t}},function(e,t,n){"use strict";var r=n(237),i=n(383),o=n(235),a=n(342),s=n(210),l=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,d=a("lastIndexOf"),f=s("indexOf",{ACCESSORS:!0,1:0}),h=c||!d||!f;e.exports=h?function lastIndexOf(e){if(c)return u.apply(this,arguments)||0;var t=r(this),n=o(t.length),a=n-1;for(arguments.length>1&&(a=l(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:u},function(e,t,n){var r=n(34),i=n(3389);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},function(e,t,n){n(3390);var r=n(113);e.exports=r("Array").lastIndexOf},function(e,t,n){var r=n(3391),i=Array.prototype;e.exports=function(e){var t=e.lastIndexOf;return e===i||e instanceof Array&&t===i.lastIndexOf?r:t}},function(e,t,n){var r=n(3392);e.exports=r},,function(e,t,n){var r=n(718),i=n(1469),o=n(906);e.exports=function _iterableToArrayLimit(e,t){if(void 0!==o&&i(Object(e))){var n=[],a=!0,s=!1,l=void 0;try{for(var u,c=r(e);!(a=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);a=!0);}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return n}}},function(e,t,n){"use strict";var r=n(34),i=n(248),o=n(221),a=n(67),s=n(342),l=[],u=l.sort,c=a(function(){l.sort(void 0)}),d=a(function(){l.sort(null)}),f=s("sort");r({target:"Array",proto:!0,forced:c||!d||!f},{sort:function sort(e){return void 0===e?u.call(o(this)):u.call(o(this),i(e))}})},function(e,t,n){n(3396);var r=n(113);e.exports=r("Array").sort},function(e,t,n){var r=n(3397),i=Array.prototype;e.exports=function(e){var t=e.sort;return e===i||e instanceof Array&&t===i.sort?r:t}},function(e,t,n){var r=n(3398);e.exports=r},function(e,t,n){var r=n(1466);e.exports=r},function(e,t,n){var r=n(34),i=n(67),o=n(237),a=n(384).f,s=n(138),l=i(function(){a(1)});r({target:"Object",stat:!0,forced:!s||l,sham:!s},{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){return a(o(e),t)}})},function(e,t,n){n(3401);var r=n(52).Object,i=e.exports=function getOwnPropertyDescriptor(e,t){return r.getOwnPropertyDescriptor(e,t)};r.getOwnPropertyDescriptor.sham&&(i.sham=!0)},function(e,t,n){var r=n(3402);e.exports=r},function(e,t,n){var r=n(34),i=n(138),o=n(1467),a=n(237),s=n(384),l=n(452);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function getOwnPropertyDescriptors(e){for(var t,n,r=a(e),i=s.f,u=o(r),c={},d=0;u.length>d;)void 0!==(n=i(r,t=u[d++]))&&l(c,t,n);return c}})},function(e,t,n){n(3404);var r=n(52);e.exports=r.Object.getOwnPropertyDescriptors},function(e,t,n){var r=n(3405);e.exports=r},function(e,t,n){var r=n(1498);e.exports=r},function(e,t,n){var r=n(1485);e.exports=r},function(e,t,n){e.exports=n(3408)},function(e,t,n){var r=n(1515);e.exports=r},function(e,t,n){var r=n(1517);e.exports=r},function(e,t,n){var r=n(34),i=n(1468),o=n(67),a=n(129),s=n(899).onFreeze,l=Object.freeze;r({target:"Object",stat:!0,forced:o(function(){l(1)}),sham:!i},{freeze:function freeze(e){return l&&a(e)?l(s(e)):e}})},function(e,t,n){n(3412);var r=n(52);e.exports=r.Object.freeze},function(e,t,n){var r=n(3413);e.exports=r},function(e,t,n){var r=n(119).isFinite;e.exports=Number.isFinite||function isFinite(e){return"number"==typeof e&&r(e)}},function(e,t,n){n(34)({target:"Number",stat:!0},{isFinite:n(3415)})},function(e,t,n){n(3416);var r=n(52);e.exports=r.Number.isFinite},function(e,t,n){var r=n(3417);e.exports=r},function(e,t,n){e.exports=n(3418)},function(e,t,n){var r=n(138),i=n(455),o=n(237),a=n(633).f,s=function(e){return function(t){for(var n,s=o(t),l=i(s),u=l.length,c=0,d=[];u>c;)n=l[c++],r&&!a.call(s,n)||d.push(e?[n,s[n]]:s[n]);return d}};e.exports={entries:s(!0),values:s(!1)}},function(e,t,n){var r=n(34),i=n(3420).values;r({target:"Object",stat:!0},{values:function values(e){return i(e)}})},function(e,t,n){n(3421);var r=n(52);e.exports=r.Object.values},function(e,t,n){var r=n(3422);e.exports=r},function(e,t,n){"use strict";var r=n(34),i=n(272).some,o=n(342),a=n(210),s=o("some"),l=a("some");r({target:"Array",proto:!0,forced:!s||!l},{some:function some(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){n(3424);var r=n(113);e.exports=r("Array").some},function(e,t,n){var r=n(3425),i=Array.prototype;e.exports=function(e){var t=e.some;return e===i||e instanceof Array&&t===i.some?r:t}},function(e,t,n){var r=n(3426);e.exports=r},function(e,t){e.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var r=n(1529);e.exports=r},function(e,t,n){e.exports=n(3429)},function(e,t,n){var r=n(271),i=n(118),o=n(340),a=i("iterator");e.exports=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){n(233),n(304);var r=n(3431);e.exports=r},function(e,t,n){var r=n(1474);e.exports=r},function(e,t,n){var r=n(1518);e.exports=r},function(e,t,n){var r=n(1473),i=n(1472);e.exports=function _arrayWithoutHoles(e){if(r(e))return i(e)}},function(e,t,n){"use strict";var r=n(343),i=n(221),o=n(1494),a=n(1495),s=n(235),l=n(452),u=n(442);e.exports=function from(e){var t,n,c,d,f,h,p=i(e),m="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,y=void 0!==v,_=u(p),b=0;if(y&&(v=r(v,g>2?arguments[2]:void 0,2)),void 0==_||m==Array&&a(_))for(n=new m(t=s(p.length));t>b;b++)h=y?v(p[b],b):p[b],l(n,b,h);else for(f=(d=_.call(p)).next,n=new m;!(c=f.call(d)).done;b++)h=y?o(d,v,[c.value,b],!0):c.value,l(n,b,h);return n.length=b,n}},function(e,t,n){var r=n(34),i=n(3436);r({target:"Array",stat:!0,forced:!n(1493)(function(e){Array.from(e)})},{from:i})},function(e,t,n){var r=n(1474);e.exports=r},function(e,t,n){n(233),n(304);var r=n(442);e.exports=r},function(e,t,n){n(233),n(304);var r=n(1475);e.exports=r},function(e,t,n){var r=n(109);e.exports=!r(function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype})},function(e,t,n){var r=n(165),i=n(1483),o=n(114)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var r=n(308),i=n(347).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function getOwnPropertyNames(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},function(e,t,n){"use strict";var r,i=n(34),o=n(384).f,a=n(235),s=n(1533),l=n(344),u=n(1530),c=n(307),d="".endsWith,f=Math.min,h=u("endsWith");i({target:"String",proto:!0,forced:!!(c||h||(r=o(String.prototype,"endsWith"),!r||r.writable))&&!h},{endsWith:function endsWith(e){var t=String(l(this));s(e);var n=arguments.length>1?arguments[1]:void 0,r=a(t.length),i=void 0===n?r:f(a(n),r),o=String(e);return d?d.call(t,o,i):t.slice(i-o.length,i)===o}})},function(e,t,n){n(3444);var r=n(113);e.exports=r("String").endsWith},function(e,t,n){var r=n(3445),i=String.prototype;e.exports=function(e){var t=e.endsWith;return"string"==typeof e||e===i||e instanceof String&&t===i.endsWith?r:t}},function(e,t,n){var r=n(3446);e.exports=r},function(e,t,n){var r=n(1486);function _setPrototypeOf(t,n){return e.exports=_setPrototypeOf=r||function _setPrototypeOf(e,t){return e.__proto__=t,e},_setPrototypeOf(t,n)}e.exports=_setPrototypeOf},function(e,t,n){var r=n(1528);e.exports=r},function(e,t,n){e.exports=n(3449)},function(e,t,n){n(34)({target:"Object",stat:!0},{setPrototypeOf:n(907)})},function(e,t,n){var r=n(1485);e.exports=r},function(e,t,n){var r=n(34),i=n(67),o=n(221),a=n(626),s=n(1523);r({target:"Object",stat:!0,forced:i(function(){a(1)}),sham:!s},{getPrototypeOf:function getPrototypeOf(e){return a(o(e))}})},function(e,t,n){n(3453);var r=n(52);e.exports=r.Object.getPrototypeOf},function(e,t,n){var r=n(3454);e.exports=r},function(e,t,n){e.exports=n(3455)},function(e,t){e.exports=function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";var r=n(34),i=n(248),o=n(234),a=n(441),s=n(621),l=n(379);r({target:"Promise",stat:!0},{any:function any(e){var t=this,n=a.f(t),r=n.resolve,u=n.reject,c=s(function(){var n=i(t.resolve),a=[],s=0,c=1,d=!1;l(e,function(e){var i=s++,l=!1;a.push(void 0),c++,n.call(t,e).then(function(e){l||d||(d=!0,r(e))},function(e){l||d||(l=!0,a[i]=e,--c||u(new(o("AggregateError"))(a,"No one promise resolved")))})}),--c||u(new(o("AggregateError"))(a,"No one promise resolved"))});return c.error&&u(c.value),n.promise}})},function(e,t,n){"use strict";var r=n(34),i=n(441),o=n(621);r({target:"Promise",stat:!0},{try:function(e){var t=i.f(this),n=o(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}})},function(e,t,n){n(1489)},function(e,t,n){"use strict";var r=n(34),i=n(138),o=n(626),a=n(907),s=n(341),l=n(222),u=n(346),c=n(379),d=n(236),f=n(306),h=f.set,p=f.getterFor("AggregateError"),m=function AggregateError(e,t){var n=this;if(!(n instanceof m))return new m(e,t);a&&(n=a(new Error(t),o(n)));var r=[];return c(e,r.push,r),i?h(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==t&&d(n,"message",String(t)),n};m.prototype=s(Error.prototype,{constructor:u(5,m),message:u(5,""),name:u(5,"AggregateError")}),i&&l.f(m.prototype,"errors",{get:function(){return p(this).errors},configurable:!0}),r({global:!0},{AggregateError:m})},function(e,t,n){"use strict";var r=n(34),i=n(307),o=n(1497),a=n(67),s=n(234),l=n(1492),u=n(1490),c=n(381);r({target:"Promise",proto:!0,real:!0,forced:!!o&&a(function(){o.prototype.finally.call({then:function(){}},function(){})})},{finally:function(e){var t=l(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then(function(){return n})}:e,n?function(n){return u(t,e()).then(function(){throw n})}:e)}}),i||"function"!=typeof o||o.prototype.finally||c(o.prototype,"finally",s("Promise").prototype.finally)},function(e,t,n){var r=n(119);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t,n){var r,i,o,a,s,l,u,c,d=n(119),f=n(384).f,h=n(345),p=n(901).set,m=n(1491),g=d.MutationObserver||d.WebKitMutationObserver,v=d.process,y=d.Promise,_="process"==h(v),b=f(d,"queueMicrotask"),w=b&&b.value;w||(r=function(){var e,t;for(_&&(e=v.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():o=void 0,e}}o=void 0,e&&e.enter()},_?a=function(){v.nextTick(r)}:g&&!m?(s=!0,l=document.createTextNode(""),new g(r).observe(l,{characterData:!0}),a=function(){l.data=s=!s}):y&&y.resolve?(u=y.resolve(void 0),c=u.then,a=function(){c.call(u,r)}):a=function(){p.call(d,r)}),e.exports=w||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},function(e,t,n){"use strict";var r,i,o,a,s=n(34),l=n(307),u=n(119),c=n(234),d=n(1497),f=n(381),h=n(902),p=n(305),m=n(1496),g=n(129),v=n(248),y=n(622),_=n(345),b=n(1526),w=n(379),x=n(1493),C=n(1492),S=n(901).set,k=n(3464),T=n(1490),L=n(3463),M=n(441),E=n(621),A=n(306),P=n(1536),R=n(118),O=n(913),D=R("species"),F="Promise",I=A.get,N=A.set,$=A.getterFor(F),B=d,z=u.TypeError,j=u.document,U=u.process,q=c("fetch"),H=M.f,V=H,G="process"==_(U),W=!!(j&&j.createEvent&&u.dispatchEvent),Y=P(F,function(){if(!(b(B)!==String(B))){if(66===O)return!0;if(!G&&"function"!=typeof PromiseRejectionEvent)return!0}if(l&&!B.prototype.finally)return!0;if(O>=51&&/native code/.test(B))return!1;var e=B.resolve(1),t=function(e){e(function(){},function(){})};return(e.constructor={})[D]=t,!(e.then(function(){})instanceof t)}),Z=Y||!x(function(e){B.all(e).catch(function(){})}),K=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},X=function(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;k(function(){for(var i=t.value,o=1==t.state,a=0;r.length>a;){var s,l,u,c=r[a++],d=o?c.ok:c.fail,f=c.resolve,h=c.reject,p=c.domain;try{d?(o||(2===t.rejection&&te(e,t),t.rejection=1),!0===d?s=i:(p&&p.enter(),s=d(i),p&&(p.exit(),u=!0)),s===c.promise?h(z("Promise-chain cycle")):(l=K(s))?l.call(s,f,h):f(s)):h(i)}catch(e){p&&!u&&p.exit(),h(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&Q(e,t)})}},J=function(e,t,n){var r,i;W?((r=j.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},(i=u["on"+e])?i(r):"unhandledrejection"===e&&L("Unhandled promise rejection",n)},Q=function(e,t){S.call(u,function(){var n,r=t.value;if(ee(t)&&(n=E(function(){G?U.emit("unhandledRejection",r,e):J("unhandledrejection",e,r)}),t.rejection=G||ee(t)?2:1,n.error))throw n.value})},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e,t){S.call(u,function(){G?U.emit("rejectionHandled",e):J("rejectionhandled",e,t.value)})},ne=function(e,t,n,r){return function(i){e(t,n,i,r)}},re=function(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,X(e,t,!0))},ie=function(e,t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(e===n)throw z("Promise can't be resolved itself");var i=K(n);i?k(function(){var r={done:!1};try{i.call(n,ne(ie,e,r,t),ne(re,e,r,t))}catch(n){re(e,r,n,t)}}):(t.value=n,t.state=1,X(e,t,!1))}catch(n){re(e,{done:!1},n,t)}}};Y&&(B=function Promise(e){y(this,B,F),v(e),r.call(this);var t=I(this);try{e(ne(ie,this,t),ne(re,this,t))}catch(e){re(this,t,e)}},(r=function Promise(e){N(this,{type:F,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(B.prototype,{then:function then(e,t){var n=$(this),r=H(C(this,B));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=G?U.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&X(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=I(e);this.promise=e,this.resolve=ne(ie,e,t),this.reject=ne(re,e,t)},M.f=H=function(e){return e===B||e===o?new i(e):V(e)},l||"function"!=typeof d||(a=d.prototype.then,f(d.prototype,"then",function then(e,t){var n=this;return new B(function(e,t){a.call(n,e,t)}).then(e,t)},{unsafe:!0}),"function"==typeof q&&s({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(e){return T(B,q.apply(u,arguments))}}))),s({global:!0,wrap:!0,forced:Y},{Promise:B}),p(B,F,!1,!0),m(F),o=c(F),s({target:F,stat:!0,forced:Y},{reject:function reject(e){var t=H(this);return t.reject.call(void 0,e),t.promise}}),s({target:F,stat:!0,forced:l||Y},{resolve:function resolve(e){return T(l&&this===o?B:this,e)}}),s({target:F,stat:!0,forced:Z},{all:function all(e){var t=this,n=H(t),r=n.resolve,i=n.reject,o=E(function(){var n=v(t.resolve),o=[],a=0,s=1;w(e,function(e){var l=a++,u=!1;o.push(void 0),s++,n.call(t,e).then(function(e){u||(u=!0,o[l]=e,--s||r(o))},i)}),--s||r(o)});return o.error&&i(o.value),n.promise},race:function race(e){var t=this,n=H(t),r=n.reject,i=E(function(){var i=v(t.resolve);w(e,function(e){i.call(t,e).then(n.resolve,r)})});return i.error&&r(i.value),n.promise}})},function(e,t,n){var r=n(1498);n(3461),n(3460),n(3459),n(3458),e.exports=r},function(e,t,n){e.exports=n(3466)},function(e,t,n){var r=n(34),i=n(234),o=n(248),a=n(211),s=n(129),l=n(341),u=n(1509),c=n(67),d=i("Reflect","construct"),f=c(function(){function F(){}return!(d(function(){},[],F)instanceof F)}),h=!c(function(){d(function(){})}),p=f||h;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function construct(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(h&&!f)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var i=n.prototype,c=l(s(i)?i:Object.prototype),p=Function.apply.call(e,c,t);return s(p)?p:c}})},function(e,t,n){n(3468);var r=n(52);e.exports=r.Reflect.construct},function(e,t,n){var r=n(3469);e.exports=r},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){var r=n(59);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t,n){var r=n(139),i=n(165),o=n(1501);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r,i,o,a,s,l,u,c,d=n(59),f=n(389).f,h=n(252),p=n(1504).set,m=n(1503),g=d.MutationObserver||d.WebKitMutationObserver,v=d.process,y=d.Promise,_="process"==h(v),b=f(d,"queueMicrotask"),w=b&&b.value;w||(r=function(){var e,t;for(_&&(e=v.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():o=void 0,e}}o=void 0,e&&e.enter()},_?a=function(){v.nextTick(r)}:g&&!m?(s=!0,l=document.createTextNode(""),new g(r).observe(l,{characterData:!0}),a=function(){l.data=s=!s}):y&&y.resolve?(u=y.resolve(void 0),c=u.then,a=function(){c.call(u,r)}):a=function(){p.call(d,r)}),e.exports=w||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},function(e,t,n){var r=n(139),i=n(903),o=n(145),a=n(380),s=n(443),l=n(1506),u=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,c,d){var f,h,p,m,g,v,y,_=a(t,n,c?2:1);if(d)f=e;else{if("function"!=typeof(h=s(e)))throw TypeError("Target is not iterable");if(i(h)){for(p=0,m=o(e.length);m>p;p++)if((g=c?_(r(y=e[p])[0],y[1]):_(e[p]))&&g instanceof u)return g;return new u(!1)}f=h.call(e)}for(v=f.next;!(y=v.call(f)).done;)if("object"==typeof(g=l(f,_,y.value,c))&&g&&g instanceof u)return g;return new u(!1)}).stop=function(e){return new u(!0,e)}},function(e,t,n){var r=n(59);e.exports=r.Promise},,function(e,t,n){"use strict";var r=n(34),i=n(272).map,o=n(451),a=n(210),s=o("map"),l=a("map");r({target:"Array",proto:!0,forced:!s||!l},{map:function map(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){n(3478);var r=n(113);e.exports=r("Array").map},function(e,t,n){var r=n(3479),i=Array.prototype;e.exports=function(e){var t=e.map;return e===i||e instanceof Array&&t===i.map?r:t}},function(e,t,n){var r=n(3480);e.exports=r},function(e,t,n){var r,i;i=this,void 0===(r=function(){return function(e){"use strict";var t=String.prototype.replace;function Polyglot(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||warn}Polyglot.VERSION="1.0.0",Polyglot.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},Polyglot.prototype.extend=function(e,t){var n;for(var r in e)e.hasOwnProperty(r)&&(n=e[r],t&&(r=t+"."+r),"object"==typeof n?this.extend(n,r):this.phrases[r]=n)},Polyglot.prototype.unset=function(e,t){var n;if("string"==typeof e)delete this.phrases[e];else for(var r in e)e.hasOwnProperty(r)&&(n=e[r],t&&(r=t+"."+r),"object"==typeof n?this.unset(n,r):delete this.phrases[r])},Polyglot.prototype.clear=function(){this.phrases={}},Polyglot.prototype.replace=function(e){this.clear(),this.extend(e)},Polyglot.prototype.t=function(e,l){var u,c;return"number"==typeof(l=null==l?{}:l)&&(l={smart_count:l}),"string"==typeof this.phrases[e]?u=this.phrases[e]:"string"==typeof l._?u=l._:this.allowMissing?u=e:(this.warn('Missing translation for key: "'+e+'"'),c=e),"string"==typeof u&&(l=function clone(e){var t={};for(var n in e)t[n]=e[n];return t}(l),c=function interpolate(e,n){for(var r in n)if("_"!==r&&n.hasOwnProperty(r)){var i=n[r];"string"==typeof i&&(i=t.call(n[r],a,s)),e=t.call(e,new RegExp("%\\{"+r+"\\}","g"),i)}return e}(c=function choosePluralForm(e,a,s){var l,u,c;return null!=s&&e?(u=e.split(n),c=u[function pluralTypeIndex(e,t){return r[function pluralTypeName(e){var t=function langToTypeMap(e){var t,n,r,i={};for(t in e)if(e.hasOwnProperty(t))for(r in n=e[t])i[n[r]]=t;return i}(i);return t[e]||t.en}(e)](t)}(a,s)]||u[0],l=function trim(e){return t.call(e,o,"")}(c)):l=e,l}(u,this.currentLocale,l.smart_count),l)),c},Polyglot.prototype.has=function(e){return e in this.phrases};var n="||||",r={chinese:function(e){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},i={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]},o=/^\s+|\s+$/g,a=/\$/g,s="$$$$";function warn(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}return Polyglot}(i)}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r=n(1521);e.exports=r},function(e,t,n){n(34)({target:"Function",proto:!0},{bind:n(1509)})},function(e,t,n){n(3484);var r=n(113);e.exports=r("Function").bind},function(e,t,n){var r=n(3485),i=Function.prototype;e.exports=function(e){var t=e.bind;return e===i||e instanceof Function&&t===i.bind?r:t}},function(e,t,n){var r=n(3486);e.exports=r},function(e,t,n){n(132)("replaceAll")},function(e,t,n){n(132)("patternMatch")},function(e,t,n){n(132)("observable")},function(e,t,n){n(132)("dispose")},function(e,t,n){n(132)("asyncDispose")},function(e,t,n){n(132)("unscopables")},function(e,t,n){n(132)("toPrimitive")},function(e,t,n){n(132)("split")},function(e,t,n){n(132)("species")},function(e,t,n){n(132)("search")},function(e,t,n){n(132)("replace")},function(e,t,n){n(132)("matchAll")},function(e,t,n){n(132)("match")},function(e,t,n){n(132)("isConcatSpreadable")},function(e,t,n){n(132)("hasInstance")},function(e,t){},function(e,t,n){n(132)("asyncIterator")},function(e,t,n){var r=n(1515);n(3492),n(3491),n(3490),n(3489),n(3488),e.exports=r},function(e,t,n){var r=n(383),i=n(344),o=function(e){return function(t,n){var o,a,s=String(i(t)),l=r(n),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},function(e,t,n){var r=n(1517);e.exports=r},function(e,t,n){e.exports=n(3507)},function(e,t,n){n(34)({target:"Array",stat:!0},{isArray:n(382)})},function(e,t,n){var r=n(1518);e.exports=r},function(e,t,n){var r=n(34),i=n(234),o=n(67),a=i("JSON","stringify"),s=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,u=/^[\uDC00-\uDFFF]$/,c=function(e,t,n){var r=n.charAt(t-1),i=n.charAt(t+1);return l.test(e)&&!u.test(i)||u.test(e)&&!l.test(r)?"\\u"+e.charCodeAt(0).toString(16):e},d=o(function(){return'"\\udf06\\ud834"'!==a("\udf06\ud834")||'"\\udead"'!==a("\udead")});a&&r({target:"JSON",stat:!0,forced:d},{stringify:function stringify(e,t,n){var r=a.apply(null,arguments);return"string"==typeof r?r.replace(s,c):r}})},function(e,t,n){n(3511);var r=n(52);r.JSON||(r.JSON={stringify:JSON.stringify}),e.exports=function stringify(e,t,n){return r.JSON.stringify.apply(null,arguments)}},function(e,t,n){var r=n(3512);e.exports=r},function(e,t,n){"use strict";var r=n(34),i=n(918).indexOf,o=n(342),a=n(210),s=[].indexOf,l=!!s&&1/[1].indexOf(1,-0)<0,u=o("indexOf"),c=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:l||!u||!c},{indexOf:function indexOf(e){return l?s.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){n(3514);var r=n(113);e.exports=r("Array").indexOf},function(e,t,n){var r=n(1519);e.exports=r},function(e,t,n){"use strict";var r=n(34),i=n(630),o=n(383),a=n(235),s=n(221),l=n(910),u=n(452),c=n(451),d=n(210),f=c("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,m=Math.min;r({target:"Array",proto:!0,forced:!f||!h},{splice:function splice(e,t){var n,r,c,d,f,h,g=s(this),v=a(g.length),y=i(e,v),_=arguments.length;if(0===_?n=r=0:1===_?(n=0,r=v-y):(n=_-2,r=m(p(o(t),0),v-y)),v+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(c=l(g,r),d=0;d<r;d++)(f=y+d)in g&&u(c,d,g[f]);if(c.length=r,n<r){for(d=y;d<v-r;d++)h=d+n,(f=d+r)in g?g[h]=g[f]:delete g[h];for(d=v;d>v-r+n;d--)delete g[d-1]}else if(n>r)for(d=v-r;d>y;d--)h=d+n-1,(f=d+r-1)in g?g[h]=g[f]:delete g[h];for(d=0;d<n;d++)g[d+y]=arguments[d+2];return g.length=v-r+n,c}})},function(e,t,n){n(3517);var r=n(113);e.exports=r("Array").splice},function(e,t,n){var r=n(3518),i=Array.prototype;e.exports=function(e){var t=e.splice;return e===i||e instanceof Array&&t===i.splice?r:t}},function(e,t,n){var r=n(3519);e.exports=r},function(e,t,n){"use strict";var r=n(34),i=n(272).every,o=n(342),a=n(210),s=o("every"),l=a("every");r({target:"Array",proto:!0,forced:!s||!l},{every:function every(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){n(3521);var r=n(113);e.exports=r("Array").every},function(e,t,n){var r=n(3522),i=Array.prototype;e.exports=function(e){var t=e.every;return e===i||e instanceof Array&&t===i.every?r:t}},function(e,t,n){var r=n(3523);e.exports=r},function(e,t,n){var r=n(34),i=n(221),o=n(455);r({target:"Object",stat:!0,forced:n(67)(function(){o(1)})},{keys:function keys(e){return o(i(e))}})},function(e,t,n){var r=n(1520);e.exports=r},function(e,t,n){var r=n(34),i=n(138);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(222).f})},function(e,t,n){var r=n(1521);e.exports=r},function(e,t,n){n(1522);var r=n(113);e.exports=r("Array").concat},function(e,t,n){var r=n(3529),i=Array.prototype;e.exports=function(e){var t=e.concat;return e===i||e instanceof Array&&t===i.concat?r:t}},function(e,t,n){var r=n(3530);e.exports=r},function(e,t,n){"use strict";var r=n(272).forEach,i=n(342),o=n(210),a=i("forEach"),s=o("forEach");e.exports=a&&s?[].forEach:function forEach(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,n){"use strict";var r=n(34),i=n(3532);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(e,t,n){n(3533);var r=n(113);e.exports=r("Array").forEach},function(e,t,n){var r=n(3534);e.exports=r},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){var r=n(129);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){"use strict";var r=n(908),i=n(271);e.exports=r?{}.toString:function toString(){return"[object "+i(this)+"]"}},function(e,t,n){var r=n(119),i=n(1526),o=r.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},function(e,t,n){n(233);var r=n(3535),i=n(271),o=Array.prototype,a={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.forEach;return e===o||e instanceof Array&&t===o.forEach||a.hasOwnProperty(i(e))?r:t}},function(e,t,n){"use strict";var r=n(34),i=n(272).filter,o=n(451),a=n(210),s=o("filter"),l=a("filter");r({target:"Array",proto:!0,forced:!s||!l},{filter:function filter(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){n(3541);var r=n(113);e.exports=r("Array").filter},function(e,t,n){var r=n(3542),i=Array.prototype;e.exports=function(e){var t=e.filter;return e===i||e instanceof Array&&t===i.filter?r:t}},function(e,t,n){var r=n(3543);e.exports=r},function(e,t,n){var r=n(67),i=n(628);e.exports=function(e){return r(function(){return!!i[e]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[e]()||i[e].name!==e})}},function(e,t,n){"use strict";var r=n(34),i=n(911).trim;r({target:"String",proto:!0,forced:n(3545)("trim")},{trim:function trim(){return i(this)}})},function(e,t,n){n(3546);var r=n(113);e.exports=r("String").trim},function(e,t,n){var r=n(3547),i=String.prototype;e.exports=function(e){var t=e.trim;return"string"==typeof e||e===i||e instanceof String&&t===i.trim?r:t}},function(e,t,n){var r=n(3548);e.exports=r},function(e,t,n){n(34)({target:"Object",stat:!0,sham:!n(138)},{create:n(341)})},function(e,t,n){var r=n(1528);e.exports=r},function(e,t,n){var r=n(119),i=n(911).trim,o=n(628),a=r.parseInt,s=/^[+-]?0[Xx]/,l=8!==a(o+"08")||22!==a(o+"0x16");e.exports=l?function parseInt(e,t){var n=i(String(e));return a(n,t>>>0||(s.test(n)?16:10))}:a},function(e,t,n){var r=n(34),i=n(3552);r({global:!0,forced:parseInt!=i},{parseInt:i})},function(e,t,n){n(3553);var r=n(52);e.exports=r.parseInt},function(e,t,n){var r=n(3554);e.exports=r},function(e,t,n){"use strict";var r=n(34),i=n(129),o=n(382),a=n(630),s=n(235),l=n(237),u=n(452),c=n(118),d=n(451),f=n(210),h=d("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),m=c("species"),g=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!h||!p},{slice:function slice(e,t){var n,r,c,d=l(this),f=s(d.length),h=a(e,f),p=a(void 0===t?f:t,f);if(o(d)&&("function"!=typeof(n=d.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[m])&&(n=void 0):n=void 0,n===Array||void 0===n))return g.call(d,h,p);for(r=new(void 0===n?Array:n)(v(p-h,0)),c=0;h<p;h++,c++)h in d&&u(r,c,d[h]);return r.length=c,r}})},function(e,t,n){n(3556);var r=n(113);e.exports=r("Array").slice},function(e,t,n){var r=n(1529);e.exports=r},function(e,t,n){var r=n(119),i=n(236);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(129),i=n(345),o=n(118)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){"use strict";var r=n(34),i=n(1533),o=n(344);r({target:"String",proto:!0,forced:!n(1530)("includes")},{includes:function includes(e){return!!~String(o(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){n(3561);var r=n(113);e.exports=r("String").includes},function(e,t,n){"use strict";var r=n(34),i=n(918).includes,o=n(453);r({target:"Array",proto:!0,forced:!n(210)("indexOf",{ACCESSORS:!0,1:0})},{includes:function includes(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(e,t,n){n(3563);var r=n(113);e.exports=r("Array").includes},function(e,t,n){var r=n(3564),i=n(3562),o=Array.prototype,a=String.prototype;e.exports=function(e){var t=e.includes;return e===o||e instanceof Array&&t===o.includes?r:"string"==typeof e||e===a||e instanceof String&&t===a.includes?i:t}},function(e,t,n){var r=n(3565);e.exports=r},function(e,t,n){"use strict";var r=n(34),i=n(382),o=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function reverse(){return i(this)&&(this.length=this.length),o.call(this)}})},function(e,t,n){n(3567);var r=n(113);e.exports=r("Array").reverse},function(e,t,n){var r=n(3568),i=Array.prototype;e.exports=function(e){var t=e.reverse;return e===i||e instanceof Array&&t===i.reverse?r:t}},function(e,t,n){var r=n(3569);e.exports=r},function(e,t,n){"use strict";var r=n(138),i=n(67),o=n(455),a=n(916),s=n(633),l=n(221),u=n(632),c=Object.assign,d=Object.defineProperty;e.exports=!c||i(function(){if(r&&1!==c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||"abcdefghijklmnopqrst"!=o(c({},t)).join("")})?function assign(e,t){for(var n=l(e),i=arguments.length,c=1,d=a.f,f=s.f;i>c;)for(var h,p=u(arguments[c++]),m=d?o(p).concat(d(p)):o(p),g=m.length,v=0;g>v;)h=m[v++],r&&!f.call(p,h)||(n[h]=p[h]);return n}:c},function(e,t,n){var r=n(34),i=n(3571);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(e,t,n){n(3572);var r=n(52);e.exports=r.Object.assign},function(e,t,n){var r=n(3573);e.exports=r},function(e,t,n){e.exports=n(3574)},function(e,t,n){var r=n(248),i=n(221),o=n(632),a=n(235),s=function(e){return function(t,n,s,l){r(n);var u=i(t),c=o(u),d=a(u.length),f=e?d-1:0,h=e?-1:1;if(s<2)for(;;){if(f in c){l=c[f],f+=h;break}if(f+=h,e?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:d>f;f+=h)f in c&&(l=n(l,c[f],f,u));return l}};e.exports={left:s(!1),right:s(!0)}},function(e,t,n){"use strict";var r=n(34),i=n(3576).left,o=n(342),a=n(210),s=o("reduce"),l=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!l},{reduce:function reduce(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){n(3577);var r=n(113);e.exports=r("Array").reduce},function(e,t,n){var r=n(3578),i=Array.prototype;e.exports=function(e){var t=e.reduce;return e===i||e instanceof Array&&t===i.reduce?r:t}},function(e,t,n){var r=n(3579);e.exports=r},function(e,t,n){var r=n(34),i=n(138);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:n(1535)})},function(e,t,n){n(3581);var r=n(52).Object,i=e.exports=function defineProperties(e,t){return r.defineProperties(e,t)};r.defineProperties.sham&&(i.sham=!0)},function(e,t,n){var r=n(3582);e.exports=r},function(e,t,n){"use strict";var r=n(924),i=n(457);e.exports=r?{}.toString:function toString(){return"[object "+i(this)+"]"}},function(e,t){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},function(e,t,n){var r=n(251),i="["+n(3585)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t,n){var r=n(165);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var r=n(348),i=n(347),o=n(928),a=n(139);e.exports=r("Reflect","ownKeys")||function ownKeys(e){var t=i.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(59),i=n(932),o=r.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,o={},a=!1,s=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?function installNextTickImplementation(){r=function(e){t.nextTick(function(){runIfPresent(e)})}}():!function canUsePostMessage(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?function installMessageChannelImplementation(){var e=new MessageChannel;e.port1.onmessage=function(e){runIfPresent(e.data)},r=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function installReadyStateChangeImplementation(){var e=s.documentElement;r=function(t){var n=s.createElement("script");n.onreadystatechange=function(){runIfPresent(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function installSetTimeoutImplementation(){r=function(e){setTimeout(runIfPresent,0,e)}}():function installPostMessageImplementation(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&runIfPresent(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}(),l.setImmediate=function setImmediate(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return o[i]=a,r(i),i++},l.clearImmediate=clearImmediate}function clearImmediate(e){delete o[e]}function runIfPresent(e){if(a)setTimeout(runIfPresent,0,e);else{var t=o[e];if(t){a=!0;try{!function run(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{clearImmediate(e),a=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(48),n(197))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});n(16),n(35);var r=n(21),i=n.n(r),o=n(204),a=n(135),s={namespaced:!0,state:{isFetching:!1,hasError:!1,datasetsList:[],datasetsListCount:0,dataset:{},keyVariables:{},variables:[],filtersAvailable:{},filter:{searchText:"",limit:e.env.VUE_APP_PAGE_SIZE||10,page:0,categories:{}},subscriptionsList:[],interestedSubscriptions:localStorage.getItem("interestedSubscriptions")?localStorage.getItem("interestedSubscriptions").split(","):[]},computed:{},mutations:{setFetchingState:a.k,setDatasetsList:a.i,setDataset:a.h,setKeyVariables:a.m,setVariables:a.r,setAvailableFilters:a.g,setFilter:a.l,removeFilter:a.b,setSearchText:a.o,setPage:a.n,setDatasetsListCount:a.j,resetTagFilters:a.f,resetDatasetsList:a.d,resetDataset:a.c,setSubscriptionsList:a.q,setSubscriptionInfo:a.p,resetSubscriptionsList:a.e,addInterestedSubscriptions:a.a},actions:{initFilter:o.j,fetchDatasetsList:o.d,fetchDataset:o.c,fetchKeyVariables:o.e,fetchVariables:o.i,setSearchText:o.m,setPage:o.l,clearTagFilters:o.a,fetchSubscriptionsList:o.g,fetchSubscribe:o.f,fetchUnSubscribe:o.h,downloadNotebook:o.b,requestDataset:o.k},getters:{getSubscriptionByDataset:function getSubscriptionByDataset(e){return function(t){var n;return e.subscriptionsList?i()(n=e.subscriptionsList).call(n,function(e){return e.id===t}):void 0}}}}}).call(this,n(197))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});n(10);var r=n(1569),i=n(1003),o=n(1551),a=n(1552),s=n(1549),l=n(1550);r.a.use(i.a);var u=[{path:":type/:datasetId",component:a.a,meta:{title:function title(){return"Spatial Data Catalog | CARTO"}},children:[{path:"data",name:"do-dataset-data",component:l.a,meta:{title:function title(){return"Spatial Data Catalog | CARTO"}}},{path:"",name:"do-dataset-summary",component:s.a,meta:{title:function title(){return"Spatial Data Catalog | CARTO"}}}]},{path:"",name:"do-catalog",component:o.a,meta:{title:function title(){return"Spatial Data Catalog | CARTO"}}}]}).call(this,n(197))}]]);
//# sourceMappingURL=common_vendor.js.map
